var qv=Object.defineProperty;var Kv=(nt,rt,it)=>rt in nt?qv(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var uo=(nt,rt,it)=>(Kv(nt,typeof rt!="symbol"?rt+"":rt,it),it);function _mergeNamespaces(nt,rt){for(var it=0;it<rt.length;it++){const st=rt[it];if(typeof st!="string"&&!Array.isArray(st)){for(const lt in st)if(lt!=="default"&&!(lt in nt)){const ct=Object.getOwnPropertyDescriptor(st,lt);ct&&Object.defineProperty(nt,lt,ct.get?ct:{enumerable:!0,get:()=>st[lt]})}}}return Object.freeze(Object.defineProperty(nt,Symbol.toStringTag,{value:"Module"}))}(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const lt of document.querySelectorAll('link[rel="modulepreload"]'))st(lt);new MutationObserver(lt=>{for(const ct of lt)if(ct.type==="childList")for(const ut of ct.addedNodes)ut.tagName==="LINK"&&ut.rel==="modulepreload"&&st(ut)}).observe(document,{childList:!0,subtree:!0});function it(lt){const ct={};return lt.integrity&&(ct.integrity=lt.integrity),lt.referrerPolicy&&(ct.referrerPolicy=lt.referrerPolicy),lt.crossOrigin==="use-credentials"?ct.credentials="include":lt.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function st(lt){if(lt.ep)return;lt.ep=!0;const ct=it(lt);fetch(lt.href,ct)}})();var define_global_default$2={},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof define_global_default$2<"u"?define_global_default$2:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function getAugmentedNamespace(nt){if(nt.__esModule)return nt;var rt=nt.default;if(typeof rt=="function"){var it=function st(){return this instanceof st?Reflect.construct(rt,arguments,this.constructor):rt.apply(this,arguments)};it.prototype=rt.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(nt).forEach(function(st){var lt=Object.getOwnPropertyDescriptor(nt,st);Object.defineProperty(it,st,lt.get?lt:{enumerable:!0,get:function(){return nt[st]}})}),it}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$8=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$7=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$8=Symbol.for("react.provider"),u$7=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$6=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(nt){return nt===null||typeof nt!="object"?null:(nt=z$3&&nt[z$3]||nt["@@iterator"],typeof nt=="function"?nt:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$4=Object.assign,D$5={};function E$3(nt,rt,it){this.props=nt,this.context=rt,this.refs=D$5,this.updater=it||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(nt,rt){if(typeof nt!="object"&&typeof nt!="function"&&nt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,nt,rt,"setState")};E$3.prototype.forceUpdate=function(nt){this.updater.enqueueForceUpdate(this,nt,"forceUpdate")};function F$4(){}F$4.prototype=E$3.prototype;function G$3(nt,rt,it){this.props=nt,this.context=rt,this.refs=D$5,this.updater=it||B$3}var H$3=G$3.prototype=new F$4;H$3.constructor=G$3;C$4(H$3,E$3.prototype);H$3.isPureReactComponent=!0;var I$a=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$6(nt,rt,it){var st,lt={},ct=null,ut=null;if(rt!=null)for(st in rt.ref!==void 0&&(ut=rt.ref),rt.key!==void 0&&(ct=""+rt.key),rt)J$1.call(rt,st)&&!L$2.hasOwnProperty(st)&&(lt[st]=rt[st]);var dt=arguments.length-2;if(dt===1)lt.children=it;else if(1<dt){for(var ht=Array(dt),pt=0;pt<dt;pt++)ht[pt]=arguments[pt+2];lt.children=ht}if(nt&&nt.defaultProps)for(st in dt=nt.defaultProps,dt)lt[st]===void 0&&(lt[st]=dt[st]);return{$$typeof:l$8,type:nt,key:ct,ref:ut,props:lt,_owner:K$2.current}}function N$5(nt,rt){return{$$typeof:l$8,type:nt.type,key:rt,ref:nt.ref,props:nt.props,_owner:nt._owner}}function O$4(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===l$8}function escape$1(nt){var rt={"=":"=0",":":"=2"};return"$"+nt.replace(/[=:]/g,function(it){return rt[it]})}var P$4=/\/+/g;function Q$3(nt,rt){return typeof nt=="object"&&nt!==null&&nt.key!=null?escape$1(""+nt.key):rt.toString(36)}function R$4(nt,rt,it,st,lt){var ct=typeof nt;(ct==="undefined"||ct==="boolean")&&(nt=null);var ut=!1;if(nt===null)ut=!0;else switch(ct){case"string":case"number":ut=!0;break;case"object":switch(nt.$$typeof){case l$8:case n$6:ut=!0}}if(ut)return ut=nt,lt=lt(ut),nt=st===""?"."+Q$3(ut,0):st,I$a(lt)?(it="",nt!=null&&(it=nt.replace(P$4,"$&/")+"/"),R$4(lt,rt,it,"",function(pt){return pt})):lt!=null&&(O$4(lt)&&(lt=N$5(lt,it+(!lt.key||ut&&ut.key===lt.key?"":(""+lt.key).replace(P$4,"$&/")+"/")+nt)),rt.push(lt)),1;if(ut=0,st=st===""?".":st+":",I$a(nt))for(var dt=0;dt<nt.length;dt++){ct=nt[dt];var ht=st+Q$3(ct,dt);ut+=R$4(ct,rt,it,ht,lt)}else if(ht=A$3(nt),typeof ht=="function")for(nt=ht.call(nt),dt=0;!(ct=nt.next()).done;)ct=ct.value,ht=st+Q$3(ct,dt++),ut+=R$4(ct,rt,it,ht,lt);else if(ct==="object")throw rt=String(nt),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(nt).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.");return ut}function S$8(nt,rt,it){if(nt==null)return nt;var st=[],lt=0;return R$4(nt,st,"","",function(ct){return rt.call(it,ct,lt++)}),st}function T$6(nt){if(nt._status===-1){var rt=nt._result;rt=rt(),rt.then(function(it){(nt._status===0||nt._status===-1)&&(nt._status=1,nt._result=it)},function(it){(nt._status===0||nt._status===-1)&&(nt._status=2,nt._result=it)}),nt._status===-1&&(nt._status=0,nt._result=rt)}if(nt._status===1)return nt._result.default;throw nt._result}var U$5={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$8,forEach:function(nt,rt,it){S$8(nt,function(){rt.apply(this,arguments)},it)},count:function(nt){var rt=0;return S$8(nt,function(){rt++}),rt},toArray:function(nt){return S$8(nt,function(rt){return rt})||[]},only:function(nt){if(!O$4(nt))throw Error("React.Children.only expected to receive a single React element child.");return nt}};react_production_min.Component=E$3;react_production_min.Fragment=p$7;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(nt,rt,it){if(nt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+nt+".");var st=C$4({},nt.props),lt=nt.key,ct=nt.ref,ut=nt._owner;if(rt!=null){if(rt.ref!==void 0&&(ct=rt.ref,ut=K$2.current),rt.key!==void 0&&(lt=""+rt.key),nt.type&&nt.type.defaultProps)var dt=nt.type.defaultProps;for(ht in rt)J$1.call(rt,ht)&&!L$2.hasOwnProperty(ht)&&(st[ht]=rt[ht]===void 0&&dt!==void 0?dt[ht]:rt[ht])}var ht=arguments.length-2;if(ht===1)st.children=it;else if(1<ht){dt=Array(ht);for(var pt=0;pt<ht;pt++)dt[pt]=arguments[pt+2];st.children=dt}return{$$typeof:l$8,type:nt.type,key:lt,ref:ct,props:st,_owner:ut}};react_production_min.createContext=function(nt){return nt={$$typeof:u$7,_currentValue:nt,_currentValue2:nt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},nt.Provider={$$typeof:t$8,_context:nt},nt.Consumer=nt};react_production_min.createElement=M$6;react_production_min.createFactory=function(nt){var rt=M$6.bind(null,nt);return rt.type=nt,rt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(nt){return{$$typeof:v$5,render:nt}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(nt){return{$$typeof:y$6,_payload:{_status:-1,_result:nt},_init:T$6}};react_production_min.memo=function(nt,rt){return{$$typeof:x$4,type:nt,compare:rt===void 0?null:rt}};react_production_min.startTransition=function(nt){var rt=V$2.transition;V$2.transition={};try{nt()}finally{V$2.transition=rt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(nt,rt){return U$5.current.useCallback(nt,rt)};react_production_min.useContext=function(nt){return U$5.current.useContext(nt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(nt){return U$5.current.useDeferredValue(nt)};react_production_min.useEffect=function(nt,rt){return U$5.current.useEffect(nt,rt)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(nt,rt,it){return U$5.current.useImperativeHandle(nt,rt,it)};react_production_min.useInsertionEffect=function(nt,rt){return U$5.current.useInsertionEffect(nt,rt)};react_production_min.useLayoutEffect=function(nt,rt){return U$5.current.useLayoutEffect(nt,rt)};react_production_min.useMemo=function(nt,rt){return U$5.current.useMemo(nt,rt)};react_production_min.useReducer=function(nt,rt,it){return U$5.current.useReducer(nt,rt,it)};react_production_min.useRef=function(nt){return U$5.current.useRef(nt)};react_production_min.useState=function(nt){return U$5.current.useState(nt)};react_production_min.useSyncExternalStore=function(nt,rt,it){return U$5.current.useSyncExternalStore(nt,rt,it)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const e$2=getDefaultExportFromCjs(reactExports),e$3=_mergeNamespaces({__proto__:null,default:e$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$3=Symbol.for("react.element"),l$7=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$5=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$6={key:!0,ref:!0,__self:!0,__source:!0};function q$2(nt,rt,it){var st,lt={},ct=null,ut=null;it!==void 0&&(ct=""+it),rt.key!==void 0&&(ct=""+rt.key),rt.ref!==void 0&&(ut=rt.ref);for(st in rt)m$6.call(rt,st)&&!p$6.hasOwnProperty(st)&&(lt[st]=rt[st]);if(nt&&nt.defaultProps)for(st in rt=nt.defaultProps,rt)lt[st]===void 0&&(lt[st]=rt[st]);return{$$typeof:k$3,type:nt,key:ct,ref:ut,props:lt,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$7;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom$1={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Kt=Gt-1>>>1,Xt=Bt[Kt];if(0<lt(Xt,Ht))Bt[Kt]=Ht,Bt[Gt]=Xt,Gt=Kt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Kt=0,Xt=Bt.length,or=Xt>>>1;Kt<or;){var tr=2*(Kt+1)-1,dr=Bt[tr],fr=tr+1,Sr=Bt[fr];if(0>lt(dr,Gt))fr<Xt&&0>lt(Sr,dr)?(Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr):(Bt[Kt]=dr,Bt[tr]=Gt,Kt=tr);else if(fr<Xt&&0>lt(Sr,Gt))Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],pt=[],ft=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(pt);Ht!==null;){if(Ht.callback===null)st(pt);else if(Ht.startTime<=Bt)st(pt),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(pt)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(pt);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,Et(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Pt());){var Kt=mt.callback;if(typeof Kt=="function"){mt.callback=null,gt=mt.priorityLevel;var Xt=Kt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Xt=="function"?mt.callback=Xt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var or=!0;else{var tr=it(pt);tr!==null&&zt(Tt,tr.startTime-Ht),or=!1}return or}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Pt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof wt=="function")Nt=function(){wt(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Kt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Kt+Gt:Kt):Gt=Kt,Bt){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=Gt+Xt,Bt={id:ft++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Xt,sortIndex:-1},Gt>Kt?(Bt.sortIndex=Gt,rt(pt,Bt),it(ht)===null&&Bt===it(pt)&&(vt?(Et(jt),jt=-1):vt=!0,zt(Tt,Gt-Kt))):(Bt.sortIndex=Xt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Pt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports$1;function p$5(nt){for(var rt="https://reactjs.org/docs/error-decoder.html?invariant="+nt,it=1;it<arguments.length;it++)rt+="&args[]="+encodeURIComponent(arguments[it]);return"Minified React error #"+nt+"; visit "+rt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(nt,rt){ha(nt,rt),ha(nt+"Capture",rt)}function ha(nt,rt){for(ea[nt]=rt,nt=0;nt<rt.length;nt++)da.add(rt[nt])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(nt){return ja.call(ma,nt)?!0:ja.call(la,nt)?!1:ka.test(nt)?ma[nt]=!0:(la[nt]=!0,!1)}function pa(nt,rt,it,st){if(it!==null&&it.type===0)return!1;switch(typeof rt){case"function":case"symbol":return!0;case"boolean":return st?!1:it!==null?!it.acceptsBooleans:(nt=nt.toLowerCase().slice(0,5),nt!=="data-"&&nt!=="aria-");default:return!1}}function qa(nt,rt,it,st){if(rt===null||typeof rt>"u"||pa(nt,rt,it,st))return!0;if(st)return!1;if(it!==null)switch(it.type){case 3:return!rt;case 4:return rt===!1;case 5:return isNaN(rt);case 6:return isNaN(rt)||1>rt}return!1}function v$4(nt,rt,it,st,lt,ct,ut){this.acceptsBooleans=rt===2||rt===3||rt===4,this.attributeName=st,this.attributeNamespace=lt,this.mustUseProperty=it,this.propertyName=nt,this.type=rt,this.sanitizeURL=ct,this.removeEmptyString=ut}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,0,!1,nt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nt){var rt=nt[0];z$2[rt]=new v$4(rt,1,!1,nt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,3,!1,nt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(nt){z$2[nt]=new v$4(nt,3,!0,nt,null,!1,!1)});["capture","download"].forEach(function(nt){z$2[nt]=new v$4(nt,4,!1,nt,null,!1,!1)});["cols","rows","size","span"].forEach(function(nt){z$2[nt]=new v$4(nt,6,!1,nt,null,!1,!1)});["rowSpan","start"].forEach(function(nt){z$2[nt]=new v$4(nt,5,!1,nt.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(nt){return nt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!0,!0)});function ta(nt,rt,it,st){var lt=z$2.hasOwnProperty(rt)?z$2[rt]:null;(lt!==null?lt.type!==0:st||!(2<rt.length)||rt[0]!=="o"&&rt[0]!=="O"||rt[1]!=="n"&&rt[1]!=="N")&&(qa(rt,it,lt,st)&&(it=null),st||lt===null?oa(rt)&&(it===null?nt.removeAttribute(rt):nt.setAttribute(rt,""+it)):lt.mustUseProperty?nt[lt.propertyName]=it===null?lt.type===3?!1:"":it:(rt=lt.attributeName,st=lt.attributeNamespace,it===null?nt.removeAttribute(rt):(lt=lt.type,it=lt===3||lt===4&&it===!0?"":""+it,st?nt.setAttributeNS(st,rt,it):nt.setAttribute(rt,it))))}var ua=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(nt){return nt===null||typeof nt!="object"?null:(nt=Ja&&nt[Ja]||nt["@@iterator"],typeof nt=="function"?nt:null)}var A$2=Object.assign,La;function Ma(nt){if(La===void 0)try{throw Error()}catch(it){var rt=it.stack.trim().match(/\n( *(at )?)/);La=rt&&rt[1]||""}return`
`+La+nt}var Na=!1;function Oa(nt,rt){if(!nt||Na)return"";Na=!0;var it=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(rt)if(rt=function(){throw Error()},Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(pt){var st=pt}Reflect.construct(nt,[],rt)}else{try{rt.call()}catch(pt){st=pt}nt.call(rt.prototype)}else{try{throw Error()}catch(pt){st=pt}nt()}}catch(pt){if(pt&&st&&typeof pt.stack=="string"){for(var lt=pt.stack.split(`
`),ct=st.stack.split(`
`),ut=lt.length-1,dt=ct.length-1;1<=ut&&0<=dt&&lt[ut]!==ct[dt];)dt--;for(;1<=ut&&0<=dt;ut--,dt--)if(lt[ut]!==ct[dt]){if(ut!==1||dt!==1)do if(ut--,dt--,0>dt||lt[ut]!==ct[dt]){var ht=`
`+lt[ut].replace(" at new "," at ");return nt.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",nt.displayName)),ht}while(1<=ut&&0<=dt);break}}}finally{Na=!1,Error.prepareStackTrace=it}return(nt=nt?nt.displayName||nt.name:"")?Ma(nt):""}function Pa(nt){switch(nt.tag){case 5:return Ma(nt.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return nt=Oa(nt.type,!1),nt;case 11:return nt=Oa(nt.type.render,!1),nt;case 1:return nt=Oa(nt.type,!0),nt;default:return""}}function Qa(nt){if(nt==null)return null;if(typeof nt=="function")return nt.displayName||nt.name||null;if(typeof nt=="string")return nt;switch(nt){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof nt=="object")switch(nt.$$typeof){case Ca:return(nt.displayName||"Context")+".Consumer";case Ba:return(nt._context.displayName||"Context")+".Provider";case Da:var rt=nt.render;return nt=nt.displayName,nt||(nt=rt.displayName||rt.name||"",nt=nt!==""?"ForwardRef("+nt+")":"ForwardRef"),nt;case Ga:return rt=nt.displayName||null,rt!==null?rt:Qa(nt.type)||"Memo";case Ha:rt=nt._payload,nt=nt._init;try{return Qa(nt(rt))}catch{}}return null}function Ra(nt){var rt=nt.type;switch(nt.tag){case 24:return"Cache";case 9:return(rt.displayName||"Context")+".Consumer";case 10:return(rt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return nt=rt.render,nt=nt.displayName||nt.name||"",rt.displayName||(nt!==""?"ForwardRef("+nt+")":"ForwardRef");case 7:return"Fragment";case 5:return rt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(rt);case 8:return rt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof rt=="function")return rt.displayName||rt.name||null;if(typeof rt=="string")return rt}return null}function Sa(nt){switch(typeof nt){case"boolean":case"number":case"string":case"undefined":return nt;case"object":return nt;default:return""}}function Ta(nt){var rt=nt.type;return(nt=nt.nodeName)&&nt.toLowerCase()==="input"&&(rt==="checkbox"||rt==="radio")}function Ua(nt){var rt=Ta(nt)?"checked":"value",it=Object.getOwnPropertyDescriptor(nt.constructor.prototype,rt),st=""+nt[rt];if(!nt.hasOwnProperty(rt)&&typeof it<"u"&&typeof it.get=="function"&&typeof it.set=="function"){var lt=it.get,ct=it.set;return Object.defineProperty(nt,rt,{configurable:!0,get:function(){return lt.call(this)},set:function(ut){st=""+ut,ct.call(this,ut)}}),Object.defineProperty(nt,rt,{enumerable:it.enumerable}),{getValue:function(){return st},setValue:function(ut){st=""+ut},stopTracking:function(){nt._valueTracker=null,delete nt[rt]}}}}function Va(nt){nt._valueTracker||(nt._valueTracker=Ua(nt))}function Wa(nt){if(!nt)return!1;var rt=nt._valueTracker;if(!rt)return!0;var it=rt.getValue(),st="";return nt&&(st=Ta(nt)?nt.checked?"true":"false":nt.value),nt=st,nt!==it?(rt.setValue(nt),!0):!1}function Xa(nt){if(nt=nt||(typeof document<"u"?document:void 0),typeof nt>"u")return null;try{return nt.activeElement||nt.body}catch{return nt.body}}function Ya(nt,rt){var it=rt.checked;return A$2({},rt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:it??nt._wrapperState.initialChecked})}function Za(nt,rt){var it=rt.defaultValue==null?"":rt.defaultValue,st=rt.checked!=null?rt.checked:rt.defaultChecked;it=Sa(rt.value!=null?rt.value:it),nt._wrapperState={initialChecked:st,initialValue:it,controlled:rt.type==="checkbox"||rt.type==="radio"?rt.checked!=null:rt.value!=null}}function ab$1(nt,rt){rt=rt.checked,rt!=null&&ta(nt,"checked",rt,!1)}function bb$1(nt,rt){ab$1(nt,rt);var it=Sa(rt.value),st=rt.type;if(it!=null)st==="number"?(it===0&&nt.value===""||nt.value!=it)&&(nt.value=""+it):nt.value!==""+it&&(nt.value=""+it);else if(st==="submit"||st==="reset"){nt.removeAttribute("value");return}rt.hasOwnProperty("value")?cb$1(nt,rt.type,it):rt.hasOwnProperty("defaultValue")&&cb$1(nt,rt.type,Sa(rt.defaultValue)),rt.checked==null&&rt.defaultChecked!=null&&(nt.defaultChecked=!!rt.defaultChecked)}function db(nt,rt,it){if(rt.hasOwnProperty("value")||rt.hasOwnProperty("defaultValue")){var st=rt.type;if(!(st!=="submit"&&st!=="reset"||rt.value!==void 0&&rt.value!==null))return;rt=""+nt._wrapperState.initialValue,it||rt===nt.value||(nt.value=rt),nt.defaultValue=rt}it=nt.name,it!==""&&(nt.name=""),nt.defaultChecked=!!nt._wrapperState.initialChecked,it!==""&&(nt.name=it)}function cb$1(nt,rt,it){(rt!=="number"||Xa(nt.ownerDocument)!==nt)&&(it==null?nt.defaultValue=""+nt._wrapperState.initialValue:nt.defaultValue!==""+it&&(nt.defaultValue=""+it))}var eb=Array.isArray;function fb(nt,rt,it,st){if(nt=nt.options,rt){rt={};for(var lt=0;lt<it.length;lt++)rt["$"+it[lt]]=!0;for(it=0;it<nt.length;it++)lt=rt.hasOwnProperty("$"+nt[it].value),nt[it].selected!==lt&&(nt[it].selected=lt),lt&&st&&(nt[it].defaultSelected=!0)}else{for(it=""+Sa(it),rt=null,lt=0;lt<nt.length;lt++){if(nt[lt].value===it){nt[lt].selected=!0,st&&(nt[lt].defaultSelected=!0);return}rt!==null||nt[lt].disabled||(rt=nt[lt])}rt!==null&&(rt.selected=!0)}}function gb(nt,rt){if(rt.dangerouslySetInnerHTML!=null)throw Error(p$5(91));return A$2({},rt,{value:void 0,defaultValue:void 0,children:""+nt._wrapperState.initialValue})}function hb(nt,rt){var it=rt.value;if(it==null){if(it=rt.children,rt=rt.defaultValue,it!=null){if(rt!=null)throw Error(p$5(92));if(eb(it)){if(1<it.length)throw Error(p$5(93));it=it[0]}rt=it}rt==null&&(rt=""),it=rt}nt._wrapperState={initialValue:Sa(it)}}function ib(nt,rt){var it=Sa(rt.value),st=Sa(rt.defaultValue);it!=null&&(it=""+it,it!==nt.value&&(nt.value=it),rt.defaultValue==null&&nt.defaultValue!==it&&(nt.defaultValue=it)),st!=null&&(nt.defaultValue=""+st)}function jb(nt){var rt=nt.textContent;rt===nt._wrapperState.initialValue&&rt!==""&&rt!==null&&(nt.value=rt)}function kb(nt){switch(nt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(nt,rt){return nt==null||nt==="http://www.w3.org/1999/xhtml"?kb(rt):nt==="http://www.w3.org/2000/svg"&&rt==="foreignObject"?"http://www.w3.org/1999/xhtml":nt}var mb,nb=function(nt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(rt,it,st,lt){MSApp.execUnsafeLocalFunction(function(){return nt(rt,it,st,lt)})}:nt}(function(nt,rt){if(nt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in nt)nt.innerHTML=rt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+rt.valueOf().toString()+"</svg>",rt=mb.firstChild;nt.firstChild;)nt.removeChild(nt.firstChild);for(;rt.firstChild;)nt.appendChild(rt.firstChild)}});function ob(nt,rt){if(rt){var it=nt.firstChild;if(it&&it===nt.lastChild&&it.nodeType===3){it.nodeValue=rt;return}}nt.textContent=rt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(nt){qb.forEach(function(rt){rt=rt+nt.charAt(0).toUpperCase()+nt.substring(1),pb[rt]=pb[nt]})});function rb(nt,rt,it){return rt==null||typeof rt=="boolean"||rt===""?"":it||typeof rt!="number"||rt===0||pb.hasOwnProperty(nt)&&pb[nt]?(""+rt).trim():rt+"px"}function sb(nt,rt){nt=nt.style;for(var it in rt)if(rt.hasOwnProperty(it)){var st=it.indexOf("--")===0,lt=rb(it,rt[it],st);it==="float"&&(it="cssFloat"),st?nt.setProperty(it,lt):nt[it]=lt}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(nt,rt){if(rt){if(tb[nt]&&(rt.children!=null||rt.dangerouslySetInnerHTML!=null))throw Error(p$5(137,nt));if(rt.dangerouslySetInnerHTML!=null){if(rt.children!=null)throw Error(p$5(60));if(typeof rt.dangerouslySetInnerHTML!="object"||!("__html"in rt.dangerouslySetInnerHTML))throw Error(p$5(61))}if(rt.style!=null&&typeof rt.style!="object")throw Error(p$5(62))}}function vb(nt,rt){if(nt.indexOf("-")===-1)return typeof rt.is=="string";switch(nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(nt){return nt=nt.target||nt.srcElement||window,nt.correspondingUseElement&&(nt=nt.correspondingUseElement),nt.nodeType===3?nt.parentNode:nt}var yb=null,zb=null,Ab=null;function Bb(nt){if(nt=Cb(nt)){if(typeof yb!="function")throw Error(p$5(280));var rt=nt.stateNode;rt&&(rt=Db(rt),yb(nt.stateNode,nt.type,rt))}}function Eb(nt){zb?Ab?Ab.push(nt):Ab=[nt]:zb=nt}function Fb(){if(zb){var nt=zb,rt=Ab;if(Ab=zb=null,Bb(nt),rt)for(nt=0;nt<rt.length;nt++)Bb(rt[nt])}}function Gb(nt,rt){return nt(rt)}function Hb(){}var Ib=!1;function Jb(nt,rt,it){if(Ib)return nt(rt,it);Ib=!0;try{return Gb(nt,rt,it)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(nt,rt){var it=nt.stateNode;if(it===null)return null;var st=Db(it);if(st===null)return null;it=st[rt];e:switch(rt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(st=!st.disabled)||(nt=nt.type,st=!(nt==="button"||nt==="input"||nt==="select"||nt==="textarea")),nt=!st;break e;default:nt=!1}if(nt)return null;if(it&&typeof it!="function")throw Error(p$5(231,rt,typeof it));return it}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(nt,rt,it,st,lt,ct,ut,dt,ht){var pt=Array.prototype.slice.call(arguments,3);try{rt.apply(it,pt)}catch(ft){this.onError(ft)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(nt){Ob=!0,Pb=nt}};function Tb(nt,rt,it,st,lt,ct,ut,dt,ht){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(nt,rt,it,st,lt,ct,ut,dt,ht){if(Tb.apply(this,arguments),Ob){if(Ob){var pt=Pb;Ob=!1,Pb=null}else throw Error(p$5(198));Qb||(Qb=!0,Rb=pt)}}function Vb(nt){var rt=nt,it=nt;if(nt.alternate)for(;rt.return;)rt=rt.return;else{nt=rt;do rt=nt,rt.flags&4098&&(it=rt.return),nt=rt.return;while(nt)}return rt.tag===3?it:null}function Wb(nt){if(nt.tag===13){var rt=nt.memoizedState;if(rt===null&&(nt=nt.alternate,nt!==null&&(rt=nt.memoizedState)),rt!==null)return rt.dehydrated}return null}function Xb(nt){if(Vb(nt)!==nt)throw Error(p$5(188))}function Yb(nt){var rt=nt.alternate;if(!rt){if(rt=Vb(nt),rt===null)throw Error(p$5(188));return rt!==nt?null:nt}for(var it=nt,st=rt;;){var lt=it.return;if(lt===null)break;var ct=lt.alternate;if(ct===null){if(st=lt.return,st!==null){it=st;continue}break}if(lt.child===ct.child){for(ct=lt.child;ct;){if(ct===it)return Xb(lt),nt;if(ct===st)return Xb(lt),rt;ct=ct.sibling}throw Error(p$5(188))}if(it.return!==st.return)it=lt,st=ct;else{for(var ut=!1,dt=lt.child;dt;){if(dt===it){ut=!0,it=lt,st=ct;break}if(dt===st){ut=!0,st=lt,it=ct;break}dt=dt.sibling}if(!ut){for(dt=ct.child;dt;){if(dt===it){ut=!0,it=ct,st=lt;break}if(dt===st){ut=!0,st=ct,it=lt;break}dt=dt.sibling}if(!ut)throw Error(p$5(189))}}if(it.alternate!==st)throw Error(p$5(190))}if(it.tag!==3)throw Error(p$5(188));return it.stateNode.current===it?nt:rt}function Zb(nt){return nt=Yb(nt),nt!==null?$b(nt):null}function $b(nt){if(nt.tag===5||nt.tag===6)return nt;for(nt=nt.child;nt!==null;){var rt=$b(nt);if(rt!==null)return rt;nt=nt.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec=ca$1.unstable_getCurrentPriorityLevel,fc=ca$1.unstable_ImmediatePriority,gc=ca$1.unstable_UserBlockingPriority,hc=ca$1.unstable_NormalPriority,ic=ca$1.unstable_LowPriority,jc=ca$1.unstable_IdlePriority,kc=null,lc=null;function mc(nt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,nt,void 0,(nt.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(nt){return nt>>>=0,nt===0?32:31-(pc(nt)/qc|0)|0}var rc=64,sc=4194304;function tc(nt){switch(nt&-nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return nt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return nt}}function uc(nt,rt){var it=nt.pendingLanes;if(it===0)return 0;var st=0,lt=nt.suspendedLanes,ct=nt.pingedLanes,ut=it&268435455;if(ut!==0){var dt=ut&~lt;dt!==0?st=tc(dt):(ct&=ut,ct!==0&&(st=tc(ct)))}else ut=it&~lt,ut!==0?st=tc(ut):ct!==0&&(st=tc(ct));if(st===0)return 0;if(rt!==0&&rt!==st&&!(rt&lt)&&(lt=st&-st,ct=rt&-rt,lt>=ct||lt===16&&(ct&4194240)!==0))return rt;if(st&4&&(st|=it&16),rt=nt.entangledLanes,rt!==0)for(nt=nt.entanglements,rt&=st;0<rt;)it=31-oc(rt),lt=1<<it,st|=nt[it],rt&=~lt;return st}function vc(nt,rt){switch(nt){case 1:case 2:case 4:return rt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(nt,rt){for(var it=nt.suspendedLanes,st=nt.pingedLanes,lt=nt.expirationTimes,ct=nt.pendingLanes;0<ct;){var ut=31-oc(ct),dt=1<<ut,ht=lt[ut];ht===-1?(!(dt&it)||dt&st)&&(lt[ut]=vc(dt,rt)):ht<=rt&&(nt.expiredLanes|=dt),ct&=~dt}}function xc(nt){return nt=nt.pendingLanes&-1073741825,nt!==0?nt:nt&1073741824?1073741824:0}function yc(){var nt=rc;return rc<<=1,!(rc&4194240)&&(rc=64),nt}function zc(nt){for(var rt=[],it=0;31>it;it++)rt.push(nt);return rt}function Ac(nt,rt,it){nt.pendingLanes|=rt,rt!==536870912&&(nt.suspendedLanes=0,nt.pingedLanes=0),nt=nt.eventTimes,rt=31-oc(rt),nt[rt]=it}function Bc(nt,rt){var it=nt.pendingLanes&~rt;nt.pendingLanes=rt,nt.suspendedLanes=0,nt.pingedLanes=0,nt.expiredLanes&=rt,nt.mutableReadLanes&=rt,nt.entangledLanes&=rt,rt=nt.entanglements;var st=nt.eventTimes;for(nt=nt.expirationTimes;0<it;){var lt=31-oc(it),ct=1<<lt;rt[lt]=0,st[lt]=-1,nt[lt]=-1,it&=~ct}}function Cc(nt,rt){var it=nt.entangledLanes|=rt;for(nt=nt.entanglements;it;){var st=31-oc(it),lt=1<<st;lt&rt|nt[st]&rt&&(nt[st]|=rt),it&=~lt}}var C$3=0;function Dc(nt){return nt&=-nt,1<nt?4<nt?nt&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(nt,rt){switch(nt){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(rt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(rt.pointerId)}}function Tc(nt,rt,it,st,lt,ct){return nt===null||nt.nativeEvent!==ct?(nt={blockedOn:rt,domEventName:it,eventSystemFlags:st,nativeEvent:ct,targetContainers:[lt]},rt!==null&&(rt=Cb(rt),rt!==null&&Fc(rt)),nt):(nt.eventSystemFlags|=st,rt=nt.targetContainers,lt!==null&&rt.indexOf(lt)===-1&&rt.push(lt),nt)}function Uc(nt,rt,it,st,lt){switch(rt){case"focusin":return Lc=Tc(Lc,nt,rt,it,st,lt),!0;case"dragenter":return Mc=Tc(Mc,nt,rt,it,st,lt),!0;case"mouseover":return Nc=Tc(Nc,nt,rt,it,st,lt),!0;case"pointerover":var ct=lt.pointerId;return Oc.set(ct,Tc(Oc.get(ct)||null,nt,rt,it,st,lt)),!0;case"gotpointercapture":return ct=lt.pointerId,Pc.set(ct,Tc(Pc.get(ct)||null,nt,rt,it,st,lt)),!0}return!1}function Vc(nt){var rt=Wc(nt.target);if(rt!==null){var it=Vb(rt);if(it!==null){if(rt=it.tag,rt===13){if(rt=Wb(it),rt!==null){nt.blockedOn=rt,Ic(nt.priority,function(){Gc(it)});return}}else if(rt===3&&it.stateNode.current.memoizedState.isDehydrated){nt.blockedOn=it.tag===3?it.stateNode.containerInfo:null;return}}}nt.blockedOn=null}function Xc(nt){if(nt.blockedOn!==null)return!1;for(var rt=nt.targetContainers;0<rt.length;){var it=Yc(nt.domEventName,nt.eventSystemFlags,rt[0],nt.nativeEvent);if(it===null){it=nt.nativeEvent;var st=new it.constructor(it.type,it);wb=st,it.target.dispatchEvent(st),wb=null}else return rt=Cb(it),rt!==null&&Fc(rt),nt.blockedOn=it,!1;rt.shift()}return!0}function Zc(nt,rt,it){Xc(nt)&&it.delete(rt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad$1(nt,rt){nt.blockedOn===rt&&(nt.blockedOn=null,Jc||(Jc=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c)))}function bd$1(nt){function rt(lt){return ad$1(lt,nt)}if(0<Kc.length){ad$1(Kc[0],nt);for(var it=1;it<Kc.length;it++){var st=Kc[it];st.blockedOn===nt&&(st.blockedOn=null)}}for(Lc!==null&&ad$1(Lc,nt),Mc!==null&&ad$1(Mc,nt),Nc!==null&&ad$1(Nc,nt),Oc.forEach(rt),Pc.forEach(rt),it=0;it<Qc.length;it++)st=Qc[it],st.blockedOn===nt&&(st.blockedOn=null);for(;0<Qc.length&&(it=Qc[0],it.blockedOn===null);)Vc(it),it.blockedOn===null&&Qc.shift()}var cd$1=ua.ReactCurrentBatchConfig,dd=!0;function ed(nt,rt,it,st){var lt=C$3,ct=cd$1.transition;cd$1.transition=null;try{C$3=1,fd(nt,rt,it,st)}finally{C$3=lt,cd$1.transition=ct}}function gd(nt,rt,it,st){var lt=C$3,ct=cd$1.transition;cd$1.transition=null;try{C$3=4,fd(nt,rt,it,st)}finally{C$3=lt,cd$1.transition=ct}}function fd(nt,rt,it,st){if(dd){var lt=Yc(nt,rt,it,st);if(lt===null)hd(nt,rt,st,id,it),Sc(nt,st);else if(Uc(lt,nt,rt,it,st))st.stopPropagation();else if(Sc(nt,st),rt&4&&-1<Rc.indexOf(nt)){for(;lt!==null;){var ct=Cb(lt);if(ct!==null&&Ec(ct),ct=Yc(nt,rt,it,st),ct===null&&hd(nt,rt,st,id,it),ct===lt)break;lt=ct}lt!==null&&st.stopPropagation()}else hd(nt,rt,st,null,it)}}var id=null;function Yc(nt,rt,it,st){if(id=null,nt=xb(st),nt=Wc(nt),nt!==null)if(rt=Vb(nt),rt===null)nt=null;else if(it=rt.tag,it===13){if(nt=Wb(rt),nt!==null)return nt;nt=null}else if(it===3){if(rt.stateNode.current.memoizedState.isDehydrated)return rt.tag===3?rt.stateNode.containerInfo:null;nt=null}else rt!==nt&&(nt=null);return id=nt,null}function jd(nt){switch(nt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var nt,rt=ld,it=rt.length,st,lt="value"in kd?kd.value:kd.textContent,ct=lt.length;for(nt=0;nt<it&&rt[nt]===lt[nt];nt++);var ut=it-nt;for(st=1;st<=ut&&rt[it-st]===lt[ct-st];st++);return md=lt.slice(nt,1<st?1-st:void 0)}function od(nt){var rt=nt.keyCode;return"charCode"in nt?(nt=nt.charCode,nt===0&&rt===13&&(nt=13)):nt=rt,nt===10&&(nt=13),32<=nt||nt===13?nt:0}function pd(){return!0}function qd(){return!1}function rd(nt){function rt(it,st,lt,ct,ut){this._reactName=it,this._targetInst=lt,this.type=st,this.nativeEvent=ct,this.target=ut,this.currentTarget=null;for(var dt in nt)nt.hasOwnProperty(dt)&&(it=nt[dt],this[dt]=it?it(ct):ct[dt]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(rt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var it=this.nativeEvent;it&&(it.preventDefault?it.preventDefault():typeof it.returnValue!="unknown"&&(it.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var it=this.nativeEvent;it&&(it.stopPropagation?it.stopPropagation():typeof it.cancelBubble!="unknown"&&(it.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),rt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(nt){return nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(nt){return nt.relatedTarget===void 0?nt.fromElement===nt.srcElement?nt.toElement:nt.fromElement:nt.relatedTarget},movementX:function(nt){return"movementX"in nt?nt.movementX:(nt!==yd&&(yd&&nt.type==="mousemove"?(wd=nt.screenX-yd.screenX,xd=nt.screenY-yd.screenY):xd=wd=0,yd=nt),wd)},movementY:function(nt){return"movementY"in nt?nt.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(nt){return"clipboardData"in nt?nt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(nt){var rt=this.nativeEvent;return rt.getModifierState?rt.getModifierState(nt):(nt=Od[nt])?!!rt[nt]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(nt){if(nt.key){var rt=Md[nt.key]||nt.key;if(rt!=="Unidentified")return rt}return nt.type==="keypress"?(nt=od(nt),nt===13?"Enter":String.fromCharCode(nt)):nt.type==="keydown"||nt.type==="keyup"?Nd[nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(nt){return nt.type==="keypress"?od(nt):0},keyCode:function(nt){return nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0},which:function(nt){return nt.type==="keypress"?od(nt):nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(nt){return"deltaX"in nt?nt.deltaX:"wheelDeltaX"in nt?-nt.wheelDeltaX:0},deltaY:function(nt){return"deltaY"in nt?nt.deltaY:"wheelDeltaY"in nt?-nt.wheelDeltaY:"wheelDelta"in nt?-nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$2||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge(nt,rt){switch(nt){case"keyup":return $d.indexOf(rt.keyCode)!==-1;case"keydown":return rt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(nt){return nt=nt.detail,typeof nt=="object"&&"data"in nt?nt.data:null}var ie$1=!1;function je$2(nt,rt){switch(nt){case"compositionend":return he$1(rt);case"keypress":return rt.which!==32?null:(fe$1=!0,ee$1);case"textInput":return nt=rt.data,nt===ee$1&&fe$1?null:nt;default:return null}}function ke$1(nt,rt){if(ie$1)return nt==="compositionend"||!ae$2&&ge(nt,rt)?(nt=nd(),md=ld=kd=null,ie$1=!1,nt):null;switch(nt){case"paste":return null;case"keypress":if(!(rt.ctrlKey||rt.altKey||rt.metaKey)||rt.ctrlKey&&rt.altKey){if(rt.char&&1<rt.char.length)return rt.char;if(rt.which)return String.fromCharCode(rt.which)}return null;case"compositionend":return de$1&&rt.locale!=="ko"?null:rt.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt==="input"?!!le$1[nt.type]:rt==="textarea"}function ne(nt,rt,it,st){Eb(st),rt=oe$1(rt,"onChange"),0<rt.length&&(it=new td("onChange","change",null,it,st),nt.push({event:it,listeners:rt}))}var pe=null,qe$3=null;function re$1(nt){se$1(nt,0)}function te$1(nt){var rt=ue$2(nt);if(Wa(rt))return nt}function ve(nt,rt){if(nt==="change")return rt}var we$2=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$1=typeof ze$2.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$2=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe$3=pe=null)}function Be$1(nt){if(nt.propertyName==="value"&&te$1(qe$3)){var rt=[];ne(rt,qe$3,nt,xb(nt)),Jb(re$1,rt)}}function Ce(nt,rt,it){nt==="focusin"?(Ae(),pe=rt,qe$3=it,pe.attachEvent("onpropertychange",Be$1)):nt==="focusout"&&Ae()}function De$1(nt){if(nt==="selectionchange"||nt==="keyup"||nt==="keydown")return te$1(qe$3)}function Ee$1(nt,rt){if(nt==="click")return te$1(rt)}function Fe$1(nt,rt){if(nt==="input"||nt==="change")return te$1(rt)}function Ge$2(nt,rt){return nt===rt&&(nt!==0||1/nt===1/rt)||nt!==nt&&rt!==rt}var He$3=typeof Object.is=="function"?Object.is:Ge$2;function Ie(nt,rt){if(He$3(nt,rt))return!0;if(typeof nt!="object"||nt===null||typeof rt!="object"||rt===null)return!1;var it=Object.keys(nt),st=Object.keys(rt);if(it.length!==st.length)return!1;for(st=0;st<it.length;st++){var lt=it[st];if(!ja.call(rt,lt)||!He$3(nt[lt],rt[lt]))return!1}return!0}function Je$2(nt){for(;nt&&nt.firstChild;)nt=nt.firstChild;return nt}function Ke$2(nt,rt){var it=Je$2(nt);nt=0;for(var st;it;){if(it.nodeType===3){if(st=nt+it.textContent.length,nt<=rt&&st>=rt)return{node:it,offset:rt-nt};nt=st}e:{for(;it;){if(it.nextSibling){it=it.nextSibling;break e}it=it.parentNode}it=void 0}it=Je$2(it)}}function Le$1(nt,rt){return nt&&rt?nt===rt?!0:nt&&nt.nodeType===3?!1:rt&&rt.nodeType===3?Le$1(nt,rt.parentNode):"contains"in nt?nt.contains(rt):nt.compareDocumentPosition?!!(nt.compareDocumentPosition(rt)&16):!1:!1}function Me$1(){for(var nt=window,rt=Xa();rt instanceof nt.HTMLIFrameElement;){try{var it=typeof rt.contentWindow.location.href=="string"}catch{it=!1}if(it)nt=rt.contentWindow;else break;rt=Xa(nt.document)}return rt}function Ne$3(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt&&(rt==="input"&&(nt.type==="text"||nt.type==="search"||nt.type==="tel"||nt.type==="url"||nt.type==="password")||rt==="textarea"||nt.contentEditable==="true")}function Oe(nt){var rt=Me$1(),it=nt.focusedElem,st=nt.selectionRange;if(rt!==it&&it&&it.ownerDocument&&Le$1(it.ownerDocument.documentElement,it)){if(st!==null&&Ne$3(it)){if(rt=st.start,nt=st.end,nt===void 0&&(nt=rt),"selectionStart"in it)it.selectionStart=rt,it.selectionEnd=Math.min(nt,it.value.length);else if(nt=(rt=it.ownerDocument||document)&&rt.defaultView||window,nt.getSelection){nt=nt.getSelection();var lt=it.textContent.length,ct=Math.min(st.start,lt);st=st.end===void 0?ct:Math.min(st.end,lt),!nt.extend&&ct>st&&(lt=st,st=ct,ct=lt),lt=Ke$2(it,ct);var ut=Ke$2(it,st);lt&&ut&&(nt.rangeCount!==1||nt.anchorNode!==lt.node||nt.anchorOffset!==lt.offset||nt.focusNode!==ut.node||nt.focusOffset!==ut.offset)&&(rt=rt.createRange(),rt.setStart(lt.node,lt.offset),nt.removeAllRanges(),ct>st?(nt.addRange(rt),nt.extend(ut.node,ut.offset)):(rt.setEnd(ut.node,ut.offset),nt.addRange(rt)))}}for(rt=[],nt=it;nt=nt.parentNode;)nt.nodeType===1&&rt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof it.focus=="function"&&it.focus(),it=0;it<rt.length;it++)nt=rt[it],nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$1=null,Se$1=null,Te=!1;function Ue$2(nt,rt,it){var st=it.window===it?it.document:it.nodeType===9?it:it.ownerDocument;Te||Qe$2==null||Qe$2!==Xa(st)||(st=Qe$2,"selectionStart"in st&&Ne$3(st)?st={start:st.selectionStart,end:st.selectionEnd}:(st=(st.ownerDocument&&st.ownerDocument.defaultView||window).getSelection(),st={anchorNode:st.anchorNode,anchorOffset:st.anchorOffset,focusNode:st.focusNode,focusOffset:st.focusOffset}),Se$1&&Ie(Se$1,st)||(Se$1=st,st=oe$1(Re$1,"onSelect"),0<st.length&&(rt=new td("onSelect","select",null,rt,it),nt.push({event:rt,listeners:st}),rt.target=Qe$2)))}function Ve$2(nt,rt){var it={};return it[nt.toLowerCase()]=rt.toLowerCase(),it["Webkit"+nt]="webkit"+rt,it["Moz"+nt]="moz"+rt,it}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$2={},Ye$2={};ia&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$2(nt){if(Xe$2[nt])return Xe$2[nt];if(!We$2[nt])return nt;var rt=We$2[nt],it;for(it in rt)if(rt.hasOwnProperty(it)&&it in Ye$2)return Xe$2[nt]=rt[it];return nt}var $e$2=Ze$2("animationend"),af$1=Ze$2("animationiteration"),bf$1=Ze$2("animationstart"),cf$1=Ze$2("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(nt,rt){df.set(nt,rt),fa(rt,[nt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff$1(jf,"on"+kf)}ff$1($e$2,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(nt,rt,it){var st=nt.type||"unknown-event";nt.currentTarget=it,Ub(st,rt,void 0,nt),nt.currentTarget=null}function se$1(nt,rt){rt=(rt&4)!==0;for(var it=0;it<nt.length;it++){var st=nt[it],lt=st.event;st=st.listeners;e:{var ct=void 0;if(rt)for(var ut=st.length-1;0<=ut;ut--){var dt=st[ut],ht=dt.instance,pt=dt.currentTarget;if(dt=dt.listener,ht!==ct&&lt.isPropagationStopped())break e;nf(lt,dt,pt),ct=ht}else for(ut=0;ut<st.length;ut++){if(dt=st[ut],ht=dt.instance,pt=dt.currentTarget,dt=dt.listener,ht!==ct&&lt.isPropagationStopped())break e;nf(lt,dt,pt),ct=ht}}}if(Qb)throw nt=Rb,Qb=!1,Rb=null,nt}function D$4(nt,rt){var it=rt[of];it===void 0&&(it=rt[of]=new Set);var st=nt+"__bubble";it.has(st)||(pf(rt,nt,2,!1),it.add(st))}function qf(nt,rt,it){var st=0;rt&&(st|=4),pf(it,nt,st,rt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(nt){if(!nt[rf]){nt[rf]=!0,da.forEach(function(it){it!=="selectionchange"&&(mf.has(it)||qf(it,!1,nt),qf(it,!0,nt))});var rt=nt.nodeType===9?nt:nt.ownerDocument;rt===null||rt[rf]||(rt[rf]=!0,qf("selectionchange",!1,rt))}}function pf(nt,rt,it,st){switch(jd(rt)){case 1:var lt=ed;break;case 4:lt=gd;break;default:lt=fd}it=lt.bind(null,rt,it,nt),lt=void 0,!Lb||rt!=="touchstart"&&rt!=="touchmove"&&rt!=="wheel"||(lt=!0),st?lt!==void 0?nt.addEventListener(rt,it,{capture:!0,passive:lt}):nt.addEventListener(rt,it,!0):lt!==void 0?nt.addEventListener(rt,it,{passive:lt}):nt.addEventListener(rt,it,!1)}function hd(nt,rt,it,st,lt){var ct=st;if(!(rt&1)&&!(rt&2)&&st!==null)e:for(;;){if(st===null)return;var ut=st.tag;if(ut===3||ut===4){var dt=st.stateNode.containerInfo;if(dt===lt||dt.nodeType===8&&dt.parentNode===lt)break;if(ut===4)for(ut=st.return;ut!==null;){var ht=ut.tag;if((ht===3||ht===4)&&(ht=ut.stateNode.containerInfo,ht===lt||ht.nodeType===8&&ht.parentNode===lt))return;ut=ut.return}for(;dt!==null;){if(ut=Wc(dt),ut===null)return;if(ht=ut.tag,ht===5||ht===6){st=ct=ut;continue e}dt=dt.parentNode}}st=st.return}Jb(function(){var pt=ct,ft=xb(it),mt=[];e:{var gt=df.get(nt);if(gt!==void 0){var xt=td,yt=nt;switch(nt){case"keypress":if(od(it)===0)break e;case"keydown":case"keyup":xt=Rd;break;case"focusin":yt="focus",xt=Fd;break;case"focusout":yt="blur",xt=Fd;break;case"beforeblur":case"afterblur":xt=Fd;break;case"click":if(it.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xt=Vd;break;case $e$2:case af$1:case bf$1:xt=Hd;break;case cf$1:xt=Xd;break;case"scroll":xt=vd;break;case"wheel":xt=Zd;break;case"copy":case"cut":case"paste":xt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xt=Td}var vt=(rt&4)!==0,St=!vt&&nt==="scroll",Et=vt?gt!==null?gt+"Capture":null:gt;vt=[];for(var wt=pt,Rt;wt!==null;){Rt=wt;var Tt=Rt.stateNode;if(Rt.tag===5&&Tt!==null&&(Rt=Tt,Et!==null&&(Tt=Kb(wt,Et),Tt!=null&&vt.push(tf(wt,Tt,Rt)))),St)break;wt=wt.return}0<vt.length&&(gt=new xt(gt,yt,null,it,ft),mt.push({event:gt,listeners:vt}))}}if(!(rt&7)){e:{if(gt=nt==="mouseover"||nt==="pointerover",xt=nt==="mouseout"||nt==="pointerout",gt&&it!==wb&&(yt=it.relatedTarget||it.fromElement)&&(Wc(yt)||yt[uf]))break e;if((xt||gt)&&(gt=ft.window===ft?ft:(gt=ft.ownerDocument)?gt.defaultView||gt.parentWindow:window,xt?(yt=it.relatedTarget||it.toElement,xt=pt,yt=yt?Wc(yt):null,yt!==null&&(St=Vb(yt),yt!==St||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(xt=null,yt=pt),xt!==yt)){if(vt=Bd,Tt="onMouseLeave",Et="onMouseEnter",wt="mouse",(nt==="pointerout"||nt==="pointerover")&&(vt=Td,Tt="onPointerLeave",Et="onPointerEnter",wt="pointer"),St=xt==null?gt:ue$2(xt),Rt=yt==null?gt:ue$2(yt),gt=new vt(Tt,wt+"leave",xt,it,ft),gt.target=St,gt.relatedTarget=Rt,Tt=null,Wc(ft)===pt&&(vt=new vt(Et,wt+"enter",yt,it,ft),vt.target=Rt,vt.relatedTarget=St,Tt=vt),St=Tt,xt&&yt)t:{for(vt=xt,Et=yt,wt=0,Rt=vt;Rt;Rt=vf(Rt))wt++;for(Rt=0,Tt=Et;Tt;Tt=vf(Tt))Rt++;for(;0<wt-Rt;)vt=vf(vt),wt--;for(;0<Rt-wt;)Et=vf(Et),Rt--;for(;wt--;){if(vt===Et||Et!==null&&vt===Et.alternate)break t;vt=vf(vt),Et=vf(Et)}vt=null}else vt=null;xt!==null&&wf(mt,gt,xt,vt,!1),yt!==null&&St!==null&&wf(mt,St,yt,vt,!0)}}e:{if(gt=pt?ue$2(pt):window,xt=gt.nodeName&&gt.nodeName.toLowerCase(),xt==="select"||xt==="input"&&gt.type==="file")var It=ve;else if(me(gt))if(we$2)It=Fe$1;else{It=De$1;var At=Ce}else(xt=gt.nodeName)&&xt.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(It=Ee$1);if(It&&(It=It(nt,pt))){ne(mt,It,it,ft);break e}At&&At(nt,gt,pt),nt==="focusout"&&(At=gt._wrapperState)&&At.controlled&&gt.type==="number"&&cb$1(gt,"number",gt.value)}switch(At=pt?ue$2(pt):window,nt){case"focusin":(me(At)||At.contentEditable==="true")&&(Qe$2=At,Re$1=pt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$2=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$2(mt,it,ft);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(mt,it,ft)}var Dt;if(ae$2)e:{switch(nt){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ie$1?ge(nt,it)&&(jt="onCompositionEnd"):nt==="keydown"&&it.keyCode===229&&(jt="onCompositionStart");jt&&(de$1&&it.locale!=="ko"&&(ie$1||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ie$1&&(Dt=nd()):(kd=ft,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),At=oe$1(pt,jt),0<At.length&&(jt=new Ld(jt,nt,null,it,ft),mt.push({event:jt,listeners:At}),Dt?jt.data=Dt:(Dt=he$1(it),Dt!==null&&(jt.data=Dt)))),(Dt=ce$1?je$2(nt,it):ke$1(nt,it))&&(pt=oe$1(pt,"onBeforeInput"),0<pt.length&&(ft=new Ld("onBeforeInput","beforeinput",null,it,ft),mt.push({event:ft,listeners:pt}),ft.data=Dt))}se$1(mt,rt)})}function tf(nt,rt,it){return{instance:nt,listener:rt,currentTarget:it}}function oe$1(nt,rt){for(var it=rt+"Capture",st=[];nt!==null;){var lt=nt,ct=lt.stateNode;lt.tag===5&&ct!==null&&(lt=ct,ct=Kb(nt,it),ct!=null&&st.unshift(tf(nt,ct,lt)),ct=Kb(nt,rt),ct!=null&&st.push(tf(nt,ct,lt))),nt=nt.return}return st}function vf(nt){if(nt===null)return null;do nt=nt.return;while(nt&&nt.tag!==5);return nt||null}function wf(nt,rt,it,st,lt){for(var ct=rt._reactName,ut=[];it!==null&&it!==st;){var dt=it,ht=dt.alternate,pt=dt.stateNode;if(ht!==null&&ht===st)break;dt.tag===5&&pt!==null&&(dt=pt,lt?(ht=Kb(it,ct),ht!=null&&ut.unshift(tf(it,ht,dt))):lt||(ht=Kb(it,ct),ht!=null&&ut.push(tf(it,ht,dt)))),it=it.return}ut.length!==0&&nt.push({event:rt,listeners:ut})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(nt){return(typeof nt=="string"?nt:""+nt).replace(xf,`
`).replace(yf,"")}function Af(nt,rt,it){if(rt=zf(rt),zf(nt)!==rt&&it)throw Error(p$5(425))}function Bf(){}var Cf=null,Df=null;function Ef(nt,rt){return nt==="textarea"||nt==="noscript"||typeof rt.children=="string"||typeof rt.children=="number"||typeof rt.dangerouslySetInnerHTML=="object"&&rt.dangerouslySetInnerHTML!==null&&rt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(nt){return Hf.resolve(null).then(nt).catch(If)}:Ff;function If(nt){setTimeout(function(){throw nt})}function Kf(nt,rt){var it=rt,st=0;do{var lt=it.nextSibling;if(nt.removeChild(it),lt&&lt.nodeType===8)if(it=lt.data,it==="/$"){if(st===0){nt.removeChild(lt),bd$1(rt);return}st--}else it!=="$"&&it!=="$?"&&it!=="$!"||st++;it=lt}while(it);bd$1(rt)}function Lf(nt){for(;nt!=null;nt=nt.nextSibling){var rt=nt.nodeType;if(rt===1||rt===3)break;if(rt===8){if(rt=nt.data,rt==="$"||rt==="$!"||rt==="$?")break;if(rt==="/$")return null}}return nt}function Mf(nt){nt=nt.previousSibling;for(var rt=0;nt;){if(nt.nodeType===8){var it=nt.data;if(it==="$"||it==="$!"||it==="$?"){if(rt===0)return nt;rt--}else it==="/$"&&rt++}nt=nt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(nt){var rt=nt[Of];if(rt)return rt;for(var it=nt.parentNode;it;){if(rt=it[uf]||it[Of]){if(it=rt.alternate,rt.child!==null||it!==null&&it.child!==null)for(nt=Mf(nt);nt!==null;){if(it=nt[Of])return it;nt=Mf(nt)}return rt}nt=it,it=nt.parentNode}return null}function Cb(nt){return nt=nt[Of]||nt[uf],!nt||nt.tag!==5&&nt.tag!==6&&nt.tag!==13&&nt.tag!==3?null:nt}function ue$2(nt){if(nt.tag===5||nt.tag===6)return nt.stateNode;throw Error(p$5(33))}function Db(nt){return nt[Pf]||null}var Sf=[],Tf=-1;function Uf(nt){return{current:nt}}function E$2(nt){0>Tf||(nt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(nt,rt){Tf++,Sf[Tf]=nt.current,nt.current=rt}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(nt,rt){var it=nt.type.contextTypes;if(!it)return Vf;var st=nt.stateNode;if(st&&st.__reactInternalMemoizedUnmaskedChildContext===rt)return st.__reactInternalMemoizedMaskedChildContext;var lt={},ct;for(ct in it)lt[ct]=rt[ct];return st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=rt,nt.__reactInternalMemoizedMaskedChildContext=lt),lt}function Zf(nt){return nt=nt.childContextTypes,nt!=null}function $f(){E$2(Wf),E$2(H$2)}function ag$1(nt,rt,it){if(H$2.current!==Vf)throw Error(p$5(168));G$2(H$2,rt),G$2(Wf,it)}function bg$1(nt,rt,it){var st=nt.stateNode;if(rt=rt.childContextTypes,typeof st.getChildContext!="function")return it;st=st.getChildContext();for(var lt in st)if(!(lt in rt))throw Error(p$5(108,Ra(nt)||"Unknown",lt));return A$2({},it,st)}function cg$1(nt){return nt=(nt=nt.stateNode)&&nt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,nt),G$2(Wf,Wf.current),!0}function dg(nt,rt,it){var st=nt.stateNode;if(!st)throw Error(p$5(169));it?(nt=bg$1(nt,rt,Xf),st.__reactInternalMemoizedMergedChildContext=nt,E$2(Wf),E$2(H$2),G$2(H$2,nt)):E$2(Wf),G$2(Wf,it)}var eg=null,fg=!1,gg$1=!1;function hg(nt){eg===null?eg=[nt]:eg.push(nt)}function ig(nt){fg=!0,hg(nt)}function jg(){if(!gg$1&&eg!==null){gg$1=!0;var nt=0,rt=C$3;try{var it=eg;for(C$3=1;nt<it.length;nt++){var st=it[nt];do st=st(!0);while(st!==null)}eg=null,fg=!1}catch(lt){throw eg!==null&&(eg=eg.slice(nt+1)),ac$1(fc,jg),lt}finally{C$3=rt,gg$1=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(nt,rt){kg[lg++]=ng,kg[lg++]=mg,mg=nt,ng=rt}function ug(nt,rt,it){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=nt;var st=rg;nt=sg;var lt=32-oc(st)-1;st&=~(1<<lt),it+=1;var ct=32-oc(rt)+lt;if(30<ct){var ut=lt-lt%5;ct=(st&(1<<ut)-1).toString(32),st>>=ut,lt-=ut,rg=1<<32-oc(rt)+lt|it<<lt|st,sg=ct+nt}else rg=1<<ct|it<<lt|st,sg=nt}function vg(nt){nt.return!==null&&(tg(nt,1),ug(nt,1,0))}function wg(nt){for(;nt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;nt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$9=!1,zg=null;function Ag(nt,rt){var it=Bg(5,null,null,0);it.elementType="DELETED",it.stateNode=rt,it.return=nt,rt=nt.deletions,rt===null?(nt.deletions=[it],nt.flags|=16):rt.push(it)}function Cg(nt,rt){switch(nt.tag){case 5:var it=nt.type;return rt=rt.nodeType!==1||it.toLowerCase()!==rt.nodeName.toLowerCase()?null:rt,rt!==null?(nt.stateNode=rt,xg=nt,yg=Lf(rt.firstChild),!0):!1;case 6:return rt=nt.pendingProps===""||rt.nodeType!==3?null:rt,rt!==null?(nt.stateNode=rt,xg=nt,yg=null,!0):!1;case 13:return rt=rt.nodeType!==8?null:rt,rt!==null?(it=qg!==null?{id:rg,overflow:sg}:null,nt.memoizedState={dehydrated:rt,treeContext:it,retryLane:1073741824},it=Bg(18,null,null,0),it.stateNode=rt,it.return=nt,nt.child=it,xg=nt,yg=null,!0):!1;default:return!1}}function Dg(nt){return(nt.mode&1)!==0&&(nt.flags&128)===0}function Eg(nt){if(I$9){var rt=yg;if(rt){var it=rt;if(!Cg(nt,rt)){if(Dg(nt))throw Error(p$5(418));rt=Lf(it.nextSibling);var st=xg;rt&&Cg(nt,rt)?Ag(st,it):(nt.flags=nt.flags&-4097|2,I$9=!1,xg=nt)}}else{if(Dg(nt))throw Error(p$5(418));nt.flags=nt.flags&-4097|2,I$9=!1,xg=nt}}}function Fg(nt){for(nt=nt.return;nt!==null&&nt.tag!==5&&nt.tag!==3&&nt.tag!==13;)nt=nt.return;xg=nt}function Gg(nt){if(nt!==xg)return!1;if(!I$9)return Fg(nt),I$9=!0,!1;var rt;if((rt=nt.tag!==3)&&!(rt=nt.tag!==5)&&(rt=nt.type,rt=rt!=="head"&&rt!=="body"&&!Ef(nt.type,nt.memoizedProps)),rt&&(rt=yg)){if(Dg(nt))throw Hg(),Error(p$5(418));for(;rt;)Ag(nt,rt),rt=Lf(rt.nextSibling)}if(Fg(nt),nt.tag===13){if(nt=nt.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$5(317));e:{for(nt=nt.nextSibling,rt=0;nt;){if(nt.nodeType===8){var it=nt.data;if(it==="/$"){if(rt===0){yg=Lf(nt.nextSibling);break e}rt--}else it!=="$"&&it!=="$!"&&it!=="$?"||rt++}nt=nt.nextSibling}yg=null}}else yg=xg?Lf(nt.stateNode.nextSibling):null;return!0}function Hg(){for(var nt=yg;nt;)nt=Lf(nt.nextSibling)}function Ig(){yg=xg=null,I$9=!1}function Jg(nt){zg===null?zg=[nt]:zg.push(nt)}var Kg=ua.ReactCurrentBatchConfig;function Lg(nt,rt){if(nt&&nt.defaultProps){rt=A$2({},rt),nt=nt.defaultProps;for(var it in nt)rt[it]===void 0&&(rt[it]=nt[it]);return rt}return rt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(nt){var rt=Mg.current;E$2(Mg),nt._currentValue=rt}function Sg(nt,rt,it){for(;nt!==null;){var st=nt.alternate;if((nt.childLanes&rt)!==rt?(nt.childLanes|=rt,st!==null&&(st.childLanes|=rt)):st!==null&&(st.childLanes&rt)!==rt&&(st.childLanes|=rt),nt===it)break;nt=nt.return}}function Tg(nt,rt){Ng=nt,Pg=Og=null,nt=nt.dependencies,nt!==null&&nt.firstContext!==null&&(nt.lanes&rt&&(Ug=!0),nt.firstContext=null)}function Vg(nt){var rt=nt._currentValue;if(Pg!==nt)if(nt={context:nt,memoizedValue:rt,next:null},Og===null){if(Ng===null)throw Error(p$5(308));Og=nt,Ng.dependencies={lanes:0,firstContext:nt}}else Og=Og.next=nt;return rt}var Wg=null;function Xg(nt){Wg===null?Wg=[nt]:Wg.push(nt)}function Yg(nt,rt,it,st){var lt=rt.interleaved;return lt===null?(it.next=it,Xg(rt)):(it.next=lt.next,lt.next=it),rt.interleaved=it,Zg(nt,st)}function Zg(nt,rt){nt.lanes|=rt;var it=nt.alternate;for(it!==null&&(it.lanes|=rt),it=nt,nt=nt.return;nt!==null;)nt.childLanes|=rt,it=nt.alternate,it!==null&&(it.childLanes|=rt),it=nt,nt=nt.return;return it.tag===3?it.stateNode:null}var $g=!1;function ah$1(nt){nt.updateQueue={baseState:nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(nt,rt){nt=nt.updateQueue,rt.updateQueue===nt&&(rt.updateQueue={baseState:nt.baseState,firstBaseUpdate:nt.firstBaseUpdate,lastBaseUpdate:nt.lastBaseUpdate,shared:nt.shared,effects:nt.effects})}function ch$1(nt,rt){return{eventTime:nt,lane:rt,tag:0,payload:null,callback:null,next:null}}function dh(nt,rt,it){var st=nt.updateQueue;if(st===null)return null;if(st=st.shared,K$1&2){var lt=st.pending;return lt===null?rt.next=rt:(rt.next=lt.next,lt.next=rt),st.pending=rt,Zg(nt,it)}return lt=st.interleaved,lt===null?(rt.next=rt,Xg(st)):(rt.next=lt.next,lt.next=rt),st.interleaved=rt,Zg(nt,it)}function eh(nt,rt,it){if(rt=rt.updateQueue,rt!==null&&(rt=rt.shared,(it&4194240)!==0)){var st=rt.lanes;st&=nt.pendingLanes,it|=st,rt.lanes=it,Cc(nt,it)}}function fh(nt,rt){var it=nt.updateQueue,st=nt.alternate;if(st!==null&&(st=st.updateQueue,it===st)){var lt=null,ct=null;if(it=it.firstBaseUpdate,it!==null){do{var ut={eventTime:it.eventTime,lane:it.lane,tag:it.tag,payload:it.payload,callback:it.callback,next:null};ct===null?lt=ct=ut:ct=ct.next=ut,it=it.next}while(it!==null);ct===null?lt=ct=rt:ct=ct.next=rt}else lt=ct=rt;it={baseState:st.baseState,firstBaseUpdate:lt,lastBaseUpdate:ct,shared:st.shared,effects:st.effects},nt.updateQueue=it;return}nt=it.lastBaseUpdate,nt===null?it.firstBaseUpdate=rt:nt.next=rt,it.lastBaseUpdate=rt}function gh(nt,rt,it,st){var lt=nt.updateQueue;$g=!1;var ct=lt.firstBaseUpdate,ut=lt.lastBaseUpdate,dt=lt.shared.pending;if(dt!==null){lt.shared.pending=null;var ht=dt,pt=ht.next;ht.next=null,ut===null?ct=pt:ut.next=pt,ut=ht;var ft=nt.alternate;ft!==null&&(ft=ft.updateQueue,dt=ft.lastBaseUpdate,dt!==ut&&(dt===null?ft.firstBaseUpdate=pt:dt.next=pt,ft.lastBaseUpdate=ht))}if(ct!==null){var mt=lt.baseState;ut=0,ft=pt=ht=null,dt=ct;do{var gt=dt.lane,xt=dt.eventTime;if((st&gt)===gt){ft!==null&&(ft=ft.next={eventTime:xt,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var yt=nt,vt=dt;switch(gt=rt,xt=it,vt.tag){case 1:if(yt=vt.payload,typeof yt=="function"){mt=yt.call(xt,mt,gt);break e}mt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=vt.payload,gt=typeof yt=="function"?yt.call(xt,mt,gt):yt,gt==null)break e;mt=A$2({},mt,gt);break e;case 2:$g=!0}}dt.callback!==null&&dt.lane!==0&&(nt.flags|=64,gt=lt.effects,gt===null?lt.effects=[dt]:gt.push(dt))}else xt={eventTime:xt,lane:gt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},ft===null?(pt=ft=xt,ht=mt):ft=ft.next=xt,ut|=gt;if(dt=dt.next,dt===null){if(dt=lt.shared.pending,dt===null)break;gt=dt,dt=gt.next,gt.next=null,lt.lastBaseUpdate=gt,lt.shared.pending=null}}while(!0);if(ft===null&&(ht=mt),lt.baseState=ht,lt.firstBaseUpdate=pt,lt.lastBaseUpdate=ft,rt=lt.shared.interleaved,rt!==null){lt=rt;do ut|=lt.lane,lt=lt.next;while(lt!==rt)}else ct===null&&(lt.shared.lanes=0);hh$1|=ut,nt.lanes=ut,nt.memoizedState=mt}}function ih(nt,rt,it){if(nt=rt.effects,rt.effects=null,nt!==null)for(rt=0;rt<nt.length;rt++){var st=nt[rt],lt=st.callback;if(lt!==null){if(st.callback=null,st=it,typeof lt!="function")throw Error(p$5(191,lt));lt.call(st)}}}var jh=new aa$1.Component().refs;function kh(nt,rt,it,st){rt=nt.memoizedState,it=it(st,rt),it=it==null?rt:A$2({},rt,it),nt.memoizedState=it,nt.lanes===0&&(nt.updateQueue.baseState=it)}var nh={isMounted:function(nt){return(nt=nt._reactInternals)?Vb(nt)===nt:!1},enqueueSetState:function(nt,rt,it){nt=nt._reactInternals;var st=L$1(),lt=lh(nt),ct=ch$1(st,lt);ct.payload=rt,it!=null&&(ct.callback=it),rt=dh(nt,ct,lt),rt!==null&&(mh(rt,nt,lt,st),eh(rt,nt,lt))},enqueueReplaceState:function(nt,rt,it){nt=nt._reactInternals;var st=L$1(),lt=lh(nt),ct=ch$1(st,lt);ct.tag=1,ct.payload=rt,it!=null&&(ct.callback=it),rt=dh(nt,ct,lt),rt!==null&&(mh(rt,nt,lt,st),eh(rt,nt,lt))},enqueueForceUpdate:function(nt,rt){nt=nt._reactInternals;var it=L$1(),st=lh(nt),lt=ch$1(it,st);lt.tag=2,rt!=null&&(lt.callback=rt),rt=dh(nt,lt,st),rt!==null&&(mh(rt,nt,st,it),eh(rt,nt,st))}};function oh(nt,rt,it,st,lt,ct,ut){return nt=nt.stateNode,typeof nt.shouldComponentUpdate=="function"?nt.shouldComponentUpdate(st,ct,ut):rt.prototype&&rt.prototype.isPureReactComponent?!Ie(it,st)||!Ie(lt,ct):!0}function ph(nt,rt,it){var st=!1,lt=Vf,ct=rt.contextType;return typeof ct=="object"&&ct!==null?ct=Vg(ct):(lt=Zf(rt)?Xf:H$2.current,st=rt.contextTypes,ct=(st=st!=null)?Yf(nt,lt):Vf),rt=new rt(it,ct),nt.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,rt.updater=nh,nt.stateNode=rt,rt._reactInternals=nt,st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=lt,nt.__reactInternalMemoizedMaskedChildContext=ct),rt}function qh(nt,rt,it,st){nt=rt.state,typeof rt.componentWillReceiveProps=="function"&&rt.componentWillReceiveProps(it,st),typeof rt.UNSAFE_componentWillReceiveProps=="function"&&rt.UNSAFE_componentWillReceiveProps(it,st),rt.state!==nt&&nh.enqueueReplaceState(rt,rt.state,null)}function rh(nt,rt,it,st){var lt=nt.stateNode;lt.props=it,lt.state=nt.memoizedState,lt.refs=jh,ah$1(nt);var ct=rt.contextType;typeof ct=="object"&&ct!==null?lt.context=Vg(ct):(ct=Zf(rt)?Xf:H$2.current,lt.context=Yf(nt,ct)),lt.state=nt.memoizedState,ct=rt.getDerivedStateFromProps,typeof ct=="function"&&(kh(nt,rt,ct,it),lt.state=nt.memoizedState),typeof rt.getDerivedStateFromProps=="function"||typeof lt.getSnapshotBeforeUpdate=="function"||typeof lt.UNSAFE_componentWillMount!="function"&&typeof lt.componentWillMount!="function"||(rt=lt.state,typeof lt.componentWillMount=="function"&&lt.componentWillMount(),typeof lt.UNSAFE_componentWillMount=="function"&&lt.UNSAFE_componentWillMount(),rt!==lt.state&&nh.enqueueReplaceState(lt,lt.state,null),gh(nt,it,lt,st),lt.state=nt.memoizedState),typeof lt.componentDidMount=="function"&&(nt.flags|=4194308)}function sh(nt,rt,it){if(nt=it.ref,nt!==null&&typeof nt!="function"&&typeof nt!="object"){if(it._owner){if(it=it._owner,it){if(it.tag!==1)throw Error(p$5(309));var st=it.stateNode}if(!st)throw Error(p$5(147,nt));var lt=st,ct=""+nt;return rt!==null&&rt.ref!==null&&typeof rt.ref=="function"&&rt.ref._stringRef===ct?rt.ref:(rt=function(ut){var dt=lt.refs;dt===jh&&(dt=lt.refs={}),ut===null?delete dt[ct]:dt[ct]=ut},rt._stringRef=ct,rt)}if(typeof nt!="string")throw Error(p$5(284));if(!it._owner)throw Error(p$5(290,nt))}return nt}function th(nt,rt){throw nt=Object.prototype.toString.call(rt),Error(p$5(31,nt==="[object Object]"?"object with keys {"+Object.keys(rt).join(", ")+"}":nt))}function uh(nt){var rt=nt._init;return rt(nt._payload)}function vh(nt){function rt(Et,wt){if(nt){var Rt=Et.deletions;Rt===null?(Et.deletions=[wt],Et.flags|=16):Rt.push(wt)}}function it(Et,wt){if(!nt)return null;for(;wt!==null;)rt(Et,wt),wt=wt.sibling;return null}function st(Et,wt){for(Et=new Map;wt!==null;)wt.key!==null?Et.set(wt.key,wt):Et.set(wt.index,wt),wt=wt.sibling;return Et}function lt(Et,wt){return Et=wh(Et,wt),Et.index=0,Et.sibling=null,Et}function ct(Et,wt,Rt){return Et.index=Rt,nt?(Rt=Et.alternate,Rt!==null?(Rt=Rt.index,Rt<wt?(Et.flags|=2,wt):Rt):(Et.flags|=2,wt)):(Et.flags|=1048576,wt)}function ut(Et){return nt&&Et.alternate===null&&(Et.flags|=2),Et}function dt(Et,wt,Rt,Tt){return wt===null||wt.tag!==6?(wt=xh(Rt,Et.mode,Tt),wt.return=Et,wt):(wt=lt(wt,Rt),wt.return=Et,wt)}function ht(Et,wt,Rt,Tt){var It=Rt.type;return It===ya?ft(Et,wt,Rt.props.children,Tt,Rt.key):wt!==null&&(wt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===wt.type)?(Tt=lt(wt,Rt.props),Tt.ref=sh(Et,wt,Rt),Tt.return=Et,Tt):(Tt=yh(Rt.type,Rt.key,Rt.props,null,Et.mode,Tt),Tt.ref=sh(Et,wt,Rt),Tt.return=Et,Tt)}function pt(Et,wt,Rt,Tt){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==Rt.containerInfo||wt.stateNode.implementation!==Rt.implementation?(wt=zh(Rt,Et.mode,Tt),wt.return=Et,wt):(wt=lt(wt,Rt.children||[]),wt.return=Et,wt)}function ft(Et,wt,Rt,Tt,It){return wt===null||wt.tag!==7?(wt=Ah(Rt,Et.mode,Tt,It),wt.return=Et,wt):(wt=lt(wt,Rt),wt.return=Et,wt)}function mt(Et,wt,Rt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return wt=xh(""+wt,Et.mode,Rt),wt.return=Et,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va:return Rt=yh(wt.type,wt.key,wt.props,null,Et.mode,Rt),Rt.ref=sh(Et,null,wt),Rt.return=Et,Rt;case wa:return wt=zh(wt,Et.mode,Rt),wt.return=Et,wt;case Ha:var Tt=wt._init;return mt(Et,Tt(wt._payload),Rt)}if(eb(wt)||Ka(wt))return wt=Ah(wt,Et.mode,Rt,null),wt.return=Et,wt;th(Et,wt)}return null}function gt(Et,wt,Rt,Tt){var It=wt!==null?wt.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return It!==null?null:dt(Et,wt,""+Rt,Tt);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:return Rt.key===It?ht(Et,wt,Rt,Tt):null;case wa:return Rt.key===It?pt(Et,wt,Rt,Tt):null;case Ha:return It=Rt._init,gt(Et,wt,It(Rt._payload),Tt)}if(eb(Rt)||Ka(Rt))return It!==null?null:ft(Et,wt,Rt,Tt,null);th(Et,Rt)}return null}function xt(Et,wt,Rt,Tt,It){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Et=Et.get(Rt)||null,dt(wt,Et,""+Tt,It);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return Et=Et.get(Tt.key===null?Rt:Tt.key)||null,ht(wt,Et,Tt,It);case wa:return Et=Et.get(Tt.key===null?Rt:Tt.key)||null,pt(wt,Et,Tt,It);case Ha:var At=Tt._init;return xt(Et,wt,Rt,At(Tt._payload),It)}if(eb(Tt)||Ka(Tt))return Et=Et.get(Rt)||null,ft(wt,Et,Tt,It,null);th(wt,Tt)}return null}function yt(Et,wt,Rt,Tt){for(var It=null,At=null,Dt=wt,jt=wt=0,Ft=null;Dt!==null&&jt<Rt.length;jt++){Dt.index>jt?(Ft=Dt,Dt=null):Ft=Dt.sibling;var Lt=gt(Et,Dt,Rt[jt],Tt);if(Lt===null){Dt===null&&(Dt=Ft);break}nt&&Dt&&Lt.alternate===null&&rt(Et,Dt),wt=ct(Lt,wt,jt),At===null?It=Lt:At.sibling=Lt,At=Lt,Dt=Ft}if(jt===Rt.length)return it(Et,Dt),I$9&&tg(Et,jt),It;if(Dt===null){for(;jt<Rt.length;jt++)Dt=mt(Et,Rt[jt],Tt),Dt!==null&&(wt=ct(Dt,wt,jt),At===null?It=Dt:At.sibling=Dt,At=Dt);return I$9&&tg(Et,jt),It}for(Dt=st(Et,Dt);jt<Rt.length;jt++)Ft=xt(Dt,Et,jt,Rt[jt],Tt),Ft!==null&&(nt&&Ft.alternate!==null&&Dt.delete(Ft.key===null?jt:Ft.key),wt=ct(Ft,wt,jt),At===null?It=Ft:At.sibling=Ft,At=Ft);return nt&&Dt.forEach(function(Pt){return rt(Et,Pt)}),I$9&&tg(Et,jt),It}function vt(Et,wt,Rt,Tt){var It=Ka(Rt);if(typeof It!="function")throw Error(p$5(150));if(Rt=It.call(Rt),Rt==null)throw Error(p$5(151));for(var At=It=null,Dt=wt,jt=wt=0,Ft=null,Lt=Rt.next();Dt!==null&&!Lt.done;jt++,Lt=Rt.next()){Dt.index>jt?(Ft=Dt,Dt=null):Ft=Dt.sibling;var Pt=gt(Et,Dt,Lt.value,Tt);if(Pt===null){Dt===null&&(Dt=Ft);break}nt&&Dt&&Pt.alternate===null&&rt(Et,Dt),wt=ct(Pt,wt,jt),At===null?It=Pt:At.sibling=Pt,At=Pt,Dt=Ft}if(Lt.done)return it(Et,Dt),I$9&&tg(Et,jt),It;if(Dt===null){for(;!Lt.done;jt++,Lt=Rt.next())Lt=mt(Et,Lt.value,Tt),Lt!==null&&(wt=ct(Lt,wt,jt),At===null?It=Lt:At.sibling=Lt,At=Lt);return I$9&&tg(Et,jt),It}for(Dt=st(Et,Dt);!Lt.done;jt++,Lt=Rt.next())Lt=xt(Dt,Et,jt,Lt.value,Tt),Lt!==null&&(nt&&Lt.alternate!==null&&Dt.delete(Lt.key===null?jt:Lt.key),wt=ct(Lt,wt,jt),At===null?It=Lt:At.sibling=Lt,At=Lt);return nt&&Dt.forEach(function(Ot){return rt(Et,Ot)}),I$9&&tg(Et,jt),It}function St(Et,wt,Rt,Tt){if(typeof Rt=="object"&&Rt!==null&&Rt.type===ya&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:e:{for(var It=Rt.key,At=wt;At!==null;){if(At.key===It){if(It=Rt.type,It===ya){if(At.tag===7){it(Et,At.sibling),wt=lt(At,Rt.props.children),wt.return=Et,Et=wt;break e}}else if(At.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===At.type){it(Et,At.sibling),wt=lt(At,Rt.props),wt.ref=sh(Et,At,Rt),wt.return=Et,Et=wt;break e}it(Et,At);break}else rt(Et,At);At=At.sibling}Rt.type===ya?(wt=Ah(Rt.props.children,Et.mode,Tt,Rt.key),wt.return=Et,Et=wt):(Tt=yh(Rt.type,Rt.key,Rt.props,null,Et.mode,Tt),Tt.ref=sh(Et,wt,Rt),Tt.return=Et,Et=Tt)}return ut(Et);case wa:e:{for(At=Rt.key;wt!==null;){if(wt.key===At)if(wt.tag===4&&wt.stateNode.containerInfo===Rt.containerInfo&&wt.stateNode.implementation===Rt.implementation){it(Et,wt.sibling),wt=lt(wt,Rt.children||[]),wt.return=Et,Et=wt;break e}else{it(Et,wt);break}else rt(Et,wt);wt=wt.sibling}wt=zh(Rt,Et.mode,Tt),wt.return=Et,Et=wt}return ut(Et);case Ha:return At=Rt._init,St(Et,wt,At(Rt._payload),Tt)}if(eb(Rt))return yt(Et,wt,Rt,Tt);if(Ka(Rt))return vt(Et,wt,Rt,Tt);th(Et,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"?(Rt=""+Rt,wt!==null&&wt.tag===6?(it(Et,wt.sibling),wt=lt(wt,Rt),wt.return=Et,Et=wt):(it(Et,wt),wt=xh(Rt,Et.mode,Tt),wt.return=Et,Et=wt),ut(Et)):it(Et,wt)}return St}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(nt){if(nt===Dh)throw Error(p$5(174));return nt}function Ih(nt,rt){switch(G$2(Gh,rt),G$2(Fh,nt),G$2(Eh,Dh),nt=rt.nodeType,nt){case 9:case 11:rt=(rt=rt.documentElement)?rt.namespaceURI:lb(null,"");break;default:nt=nt===8?rt.parentNode:rt,rt=nt.namespaceURI||null,nt=nt.tagName,rt=lb(rt,nt)}E$2(Eh),G$2(Eh,rt)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(nt){Hh(Gh.current);var rt=Hh(Eh.current),it=lb(rt,nt.type);rt!==it&&(G$2(Fh,nt),G$2(Eh,it))}function Lh(nt){Fh.current===nt&&(E$2(Eh),E$2(Fh))}var M$5=Uf(0);function Mh(nt){for(var rt=nt;rt!==null;){if(rt.tag===13){var it=rt.memoizedState;if(it!==null&&(it=it.dehydrated,it===null||it.data==="$?"||it.data==="$!"))return rt}else if(rt.tag===19&&rt.memoizedProps.revealOrder!==void 0){if(rt.flags&128)return rt}else if(rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return null;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}return null}var Nh=[];function Oh(){for(var nt=0;nt<Nh.length;nt++)Nh[nt]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$4=null,O$3=null,P$3=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$5(321))}function Wh(nt,rt){if(rt===null)return!1;for(var it=0;it<rt.length&&it<nt.length;it++)if(!He$3(nt[it],rt[it]))return!1;return!0}function Xh(nt,rt,it,st,lt,ct){if(Rh=ct,N$4=rt,rt.memoizedState=null,rt.updateQueue=null,rt.lanes=0,Ph.current=nt===null||nt.memoizedState===null?Yh:Zh,nt=it(st,lt),Th){ct=0;do{if(Th=!1,Uh=0,25<=ct)throw Error(p$5(301));ct+=1,P$3=O$3=null,rt.updateQueue=null,Ph.current=$h,nt=it(st,lt)}while(Th)}if(Ph.current=ai$1,rt=O$3!==null&&O$3.next!==null,Rh=0,P$3=O$3=N$4=null,Sh=!1,rt)throw Error(p$5(300));return nt}function bi$1(){var nt=Uh!==0;return Uh=0,nt}function ci$1(){var nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$4.memoizedState=P$3=nt:P$3=P$3.next=nt,P$3}function di(){if(O$3===null){var nt=N$4.alternate;nt=nt!==null?nt.memoizedState:null}else nt=O$3.next;var rt=P$3===null?N$4.memoizedState:P$3.next;if(rt!==null)P$3=rt,O$3=nt;else{if(nt===null)throw Error(p$5(310));O$3=nt,nt={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$3===null?N$4.memoizedState=P$3=nt:P$3=P$3.next=nt}return P$3}function ei(nt,rt){return typeof rt=="function"?rt(nt):rt}function fi(nt){var rt=di(),it=rt.queue;if(it===null)throw Error(p$5(311));it.lastRenderedReducer=nt;var st=O$3,lt=st.baseQueue,ct=it.pending;if(ct!==null){if(lt!==null){var ut=lt.next;lt.next=ct.next,ct.next=ut}st.baseQueue=lt=ct,it.pending=null}if(lt!==null){ct=lt.next,st=st.baseState;var dt=ut=null,ht=null,pt=ct;do{var ft=pt.lane;if((Rh&ft)===ft)ht!==null&&(ht=ht.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),st=pt.hasEagerState?pt.eagerState:nt(st,pt.action);else{var mt={lane:ft,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};ht===null?(dt=ht=mt,ut=st):ht=ht.next=mt,N$4.lanes|=ft,hh$1|=ft}pt=pt.next}while(pt!==null&&pt!==ct);ht===null?ut=st:ht.next=dt,He$3(st,rt.memoizedState)||(Ug=!0),rt.memoizedState=st,rt.baseState=ut,rt.baseQueue=ht,it.lastRenderedState=st}if(nt=it.interleaved,nt!==null){lt=nt;do ct=lt.lane,N$4.lanes|=ct,hh$1|=ct,lt=lt.next;while(lt!==nt)}else lt===null&&(it.lanes=0);return[rt.memoizedState,it.dispatch]}function gi(nt){var rt=di(),it=rt.queue;if(it===null)throw Error(p$5(311));it.lastRenderedReducer=nt;var st=it.dispatch,lt=it.pending,ct=rt.memoizedState;if(lt!==null){it.pending=null;var ut=lt=lt.next;do ct=nt(ct,ut.action),ut=ut.next;while(ut!==lt);He$3(ct,rt.memoizedState)||(Ug=!0),rt.memoizedState=ct,rt.baseQueue===null&&(rt.baseState=ct),it.lastRenderedState=ct}return[ct,st]}function hi(){}function ii$1(nt,rt){var it=N$4,st=di(),lt=rt(),ct=!He$3(st.memoizedState,lt);if(ct&&(st.memoizedState=lt,Ug=!0),st=st.queue,ji(ki.bind(null,it,st,nt),[nt]),st.getSnapshot!==rt||ct||P$3!==null&&P$3.memoizedState.tag&1){if(it.flags|=2048,li(9,mi.bind(null,it,st,lt,rt),void 0,null),R$3===null)throw Error(p$5(349));Rh&30||ni(it,rt,lt)}return lt}function ni(nt,rt,it){nt.flags|=16384,nt={getSnapshot:rt,value:it},rt=N$4.updateQueue,rt===null?(rt={lastEffect:null,stores:null},N$4.updateQueue=rt,rt.stores=[nt]):(it=rt.stores,it===null?rt.stores=[nt]:it.push(nt))}function mi(nt,rt,it,st){rt.value=it,rt.getSnapshot=st,oi(rt)&&pi(nt)}function ki(nt,rt,it){return it(function(){oi(rt)&&pi(nt)})}function oi(nt){var rt=nt.getSnapshot;nt=nt.value;try{var it=rt();return!He$3(nt,it)}catch{return!0}}function pi(nt){var rt=Zg(nt,1);rt!==null&&mh(rt,nt,1,-1)}function qi(nt){var rt=ci$1();return typeof nt=="function"&&(nt=nt()),rt.memoizedState=rt.baseState=nt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:nt},rt.queue=nt,nt=nt.dispatch=ri.bind(null,N$4,nt),[rt.memoizedState,nt]}function li(nt,rt,it,st){return nt={tag:nt,create:rt,destroy:it,deps:st,next:null},rt=N$4.updateQueue,rt===null?(rt={lastEffect:null,stores:null},N$4.updateQueue=rt,rt.lastEffect=nt.next=nt):(it=rt.lastEffect,it===null?rt.lastEffect=nt.next=nt:(st=it.next,it.next=nt,nt.next=st,rt.lastEffect=nt)),nt}function si(){return di().memoizedState}function ti(nt,rt,it,st){var lt=ci$1();N$4.flags|=nt,lt.memoizedState=li(1|rt,it,void 0,st===void 0?null:st)}function ui(nt,rt,it,st){var lt=di();st=st===void 0?null:st;var ct=void 0;if(O$3!==null){var ut=O$3.memoizedState;if(ct=ut.destroy,st!==null&&Wh(st,ut.deps)){lt.memoizedState=li(rt,it,ct,st);return}}N$4.flags|=nt,lt.memoizedState=li(1|rt,it,ct,st)}function vi(nt,rt){return ti(8390656,8,nt,rt)}function ji(nt,rt){return ui(2048,8,nt,rt)}function wi(nt,rt){return ui(4,2,nt,rt)}function xi(nt,rt){return ui(4,4,nt,rt)}function yi(nt,rt){if(typeof rt=="function")return nt=nt(),rt(nt),function(){rt(null)};if(rt!=null)return nt=nt(),rt.current=nt,function(){rt.current=null}}function zi(nt,rt,it){return it=it!=null?it.concat([nt]):null,ui(4,4,yi.bind(null,rt,nt),it)}function Ai(){}function Bi(nt,rt){var it=di();rt=rt===void 0?null:rt;var st=it.memoizedState;return st!==null&&rt!==null&&Wh(rt,st[1])?st[0]:(it.memoizedState=[nt,rt],nt)}function Ci(nt,rt){var it=di();rt=rt===void 0?null:rt;var st=it.memoizedState;return st!==null&&rt!==null&&Wh(rt,st[1])?st[0]:(nt=nt(),it.memoizedState=[nt,rt],nt)}function Di(nt,rt,it){return Rh&21?(He$3(it,rt)||(it=yc(),N$4.lanes|=it,hh$1|=it,nt.baseState=!0),rt):(nt.baseState&&(nt.baseState=!1,Ug=!0),nt.memoizedState=it)}function Ei(nt,rt){var it=C$3;C$3=it!==0&&4>it?it:4,nt(!0);var st=Qh.transition;Qh.transition={};try{nt(!1),rt()}finally{C$3=it,Qh.transition=st}}function Fi(){return di().memoizedState}function Gi(nt,rt,it){var st=lh(nt);if(it={lane:st,action:it,hasEagerState:!1,eagerState:null,next:null},Hi(nt))Ii(rt,it);else if(it=Yg(nt,rt,it,st),it!==null){var lt=L$1();mh(it,nt,st,lt),Ji(it,rt,st)}}function ri(nt,rt,it){var st=lh(nt),lt={lane:st,action:it,hasEagerState:!1,eagerState:null,next:null};if(Hi(nt))Ii(rt,lt);else{var ct=nt.alternate;if(nt.lanes===0&&(ct===null||ct.lanes===0)&&(ct=rt.lastRenderedReducer,ct!==null))try{var ut=rt.lastRenderedState,dt=ct(ut,it);if(lt.hasEagerState=!0,lt.eagerState=dt,He$3(dt,ut)){var ht=rt.interleaved;ht===null?(lt.next=lt,Xg(rt)):(lt.next=ht.next,ht.next=lt),rt.interleaved=lt;return}}catch{}finally{}it=Yg(nt,rt,lt,st),it!==null&&(lt=L$1(),mh(it,nt,st,lt),Ji(it,rt,st))}}function Hi(nt){var rt=nt.alternate;return nt===N$4||rt!==null&&rt===N$4}function Ii(nt,rt){Th=Sh=!0;var it=nt.pending;it===null?rt.next=rt:(rt.next=it.next,it.next=rt),nt.pending=rt}function Ji(nt,rt,it){if(it&4194240){var st=rt.lanes;st&=nt.pendingLanes,it|=st,rt.lanes=it,Cc(nt,it)}}var ai$1={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(nt,rt){return ci$1().memoizedState=[nt,rt===void 0?null:rt],nt},useContext:Vg,useEffect:vi,useImperativeHandle:function(nt,rt,it){return it=it!=null?it.concat([nt]):null,ti(4194308,4,yi.bind(null,rt,nt),it)},useLayoutEffect:function(nt,rt){return ti(4194308,4,nt,rt)},useInsertionEffect:function(nt,rt){return ti(4,2,nt,rt)},useMemo:function(nt,rt){var it=ci$1();return rt=rt===void 0?null:rt,nt=nt(),it.memoizedState=[nt,rt],nt},useReducer:function(nt,rt,it){var st=ci$1();return rt=it!==void 0?it(rt):rt,st.memoizedState=st.baseState=rt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nt,lastRenderedState:rt},st.queue=nt,nt=nt.dispatch=Gi.bind(null,N$4,nt),[st.memoizedState,nt]},useRef:function(nt){var rt=ci$1();return nt={current:nt},rt.memoizedState=nt},useState:qi,useDebugValue:Ai,useDeferredValue:function(nt){return ci$1().memoizedState=nt},useTransition:function(){var nt=qi(!1),rt=nt[0];return nt=Ei.bind(null,nt[1]),ci$1().memoizedState=nt,[rt,nt]},useMutableSource:function(){},useSyncExternalStore:function(nt,rt,it){var st=N$4,lt=ci$1();if(I$9){if(it===void 0)throw Error(p$5(407));it=it()}else{if(it=rt(),R$3===null)throw Error(p$5(349));Rh&30||ni(st,rt,it)}lt.memoizedState=it;var ct={value:it,getSnapshot:rt};return lt.queue=ct,vi(ki.bind(null,st,ct,nt),[nt]),st.flags|=2048,li(9,mi.bind(null,st,ct,it,rt),void 0,null),it},useId:function(){var nt=ci$1(),rt=R$3.identifierPrefix;if(I$9){var it=sg,st=rg;it=(st&~(1<<32-oc(st)-1)).toString(32)+it,rt=":"+rt+"R"+it,it=Uh++,0<it&&(rt+="H"+it.toString(32)),rt+=":"}else it=Vh++,rt=":"+rt+"r"+it.toString(32)+":";return nt.memoizedState=rt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(nt){var rt=di();return Di(rt,O$3.memoizedState,nt)},useTransition:function(){var nt=fi(ei)[0],rt=di().memoizedState;return[nt,rt]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(nt){var rt=di();return O$3===null?rt.memoizedState=nt:Di(rt,O$3.memoizedState,nt)},useTransition:function(){var nt=gi(ei)[0],rt=di().memoizedState;return[nt,rt]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1};function Ki(nt,rt){try{var it="",st=rt;do it+=Pa(st),st=st.return;while(st);var lt=it}catch(ct){lt=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:nt,source:rt,stack:lt,digest:null}}function Li(nt,rt,it){return{value:nt,source:null,stack:it??null,digest:rt??null}}function Mi(nt,rt){try{console.error(rt.value)}catch(it){setTimeout(function(){throw it})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(nt,rt,it){it=ch$1(-1,it),it.tag=3,it.payload={element:null};var st=rt.value;return it.callback=function(){Pi||(Pi=!0,Qi=st),Mi(nt,rt)},it}function Ri(nt,rt,it){it=ch$1(-1,it),it.tag=3;var st=nt.type.getDerivedStateFromError;if(typeof st=="function"){var lt=rt.value;it.payload=function(){return st(lt)},it.callback=function(){Mi(nt,rt)}}var ct=nt.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(it.callback=function(){Mi(nt,rt),typeof st!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ut=rt.stack;this.componentDidCatch(rt.value,{componentStack:ut!==null?ut:""})}),it}function Ti(nt,rt,it){var st=nt.pingCache;if(st===null){st=nt.pingCache=new Ni;var lt=new Set;st.set(rt,lt)}else lt=st.get(rt),lt===void 0&&(lt=new Set,st.set(rt,lt));lt.has(it)||(lt.add(it),nt=Ui.bind(null,nt,rt,it),rt.then(nt,nt))}function Vi(nt){do{var rt;if((rt=nt.tag===13)&&(rt=nt.memoizedState,rt=rt!==null?rt.dehydrated!==null:!0),rt)return nt;nt=nt.return}while(nt!==null);return null}function Wi(nt,rt,it,st,lt){return nt.mode&1?(nt.flags|=65536,nt.lanes=lt,nt):(nt===rt?nt.flags|=65536:(nt.flags|=128,it.flags|=131072,it.flags&=-52805,it.tag===1&&(it.alternate===null?it.tag=17:(rt=ch$1(-1,1),rt.tag=2,dh(it,rt,1))),it.lanes|=1),nt)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(nt,rt,it,st){rt.child=nt===null?Ch(rt,null,it,st):Bh(rt,nt.child,it,st)}function Zi(nt,rt,it,st,lt){it=it.render;var ct=rt.ref;return Tg(rt,lt),st=Xh(nt,rt,it,st,ct,lt),it=bi$1(),nt!==null&&!Ug?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~lt,$i(nt,rt,lt)):(I$9&&it&&vg(rt),rt.flags|=1,Yi(nt,rt,st,lt),rt.child)}function aj$1(nt,rt,it,st,lt){if(nt===null){var ct=it.type;return typeof ct=="function"&&!bj$1(ct)&&ct.defaultProps===void 0&&it.compare===null&&it.defaultProps===void 0?(rt.tag=15,rt.type=ct,cj$1(nt,rt,ct,st,lt)):(nt=yh(it.type,null,st,rt,rt.mode,lt),nt.ref=rt.ref,nt.return=rt,rt.child=nt)}if(ct=nt.child,!(nt.lanes&lt)){var ut=ct.memoizedProps;if(it=it.compare,it=it!==null?it:Ie,it(ut,st)&&nt.ref===rt.ref)return $i(nt,rt,lt)}return rt.flags|=1,nt=wh(ct,st),nt.ref=rt.ref,nt.return=rt,rt.child=nt}function cj$1(nt,rt,it,st,lt){if(nt!==null){var ct=nt.memoizedProps;if(Ie(ct,st)&&nt.ref===rt.ref)if(Ug=!1,rt.pendingProps=st=ct,(nt.lanes&lt)!==0)nt.flags&131072&&(Ug=!0);else return rt.lanes=nt.lanes,$i(nt,rt,lt)}return dj(nt,rt,it,st,lt)}function ej(nt,rt,it){var st=rt.pendingProps,lt=st.children,ct=nt!==null?nt.memoizedState:null;if(st.mode==="hidden")if(!(rt.mode&1))rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=it;else{if(!(it&1073741824))return nt=ct!==null?ct.baseLanes|it:it,rt.lanes=rt.childLanes=1073741824,rt.memoizedState={baseLanes:nt,cachePool:null,transitions:null},rt.updateQueue=null,G$2(fj,gj),gj|=nt,null;rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},st=ct!==null?ct.baseLanes:it,G$2(fj,gj),gj|=st}else ct!==null?(st=ct.baseLanes|it,rt.memoizedState=null):st=it,G$2(fj,gj),gj|=st;return Yi(nt,rt,lt,it),rt.child}function hj(nt,rt){var it=rt.ref;(nt===null&&it!==null||nt!==null&&nt.ref!==it)&&(rt.flags|=512,rt.flags|=2097152)}function dj(nt,rt,it,st,lt){var ct=Zf(it)?Xf:H$2.current;return ct=Yf(rt,ct),Tg(rt,lt),it=Xh(nt,rt,it,st,ct,lt),st=bi$1(),nt!==null&&!Ug?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~lt,$i(nt,rt,lt)):(I$9&&st&&vg(rt),rt.flags|=1,Yi(nt,rt,it,lt),rt.child)}function ij(nt,rt,it,st,lt){if(Zf(it)){var ct=!0;cg$1(rt)}else ct=!1;if(Tg(rt,lt),rt.stateNode===null)jj(nt,rt),ph(rt,it,st),rh(rt,it,st,lt),st=!0;else if(nt===null){var ut=rt.stateNode,dt=rt.memoizedProps;ut.props=dt;var ht=ut.context,pt=it.contextType;typeof pt=="object"&&pt!==null?pt=Vg(pt):(pt=Zf(it)?Xf:H$2.current,pt=Yf(rt,pt));var ft=it.getDerivedStateFromProps,mt=typeof ft=="function"||typeof ut.getSnapshotBeforeUpdate=="function";mt||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(dt!==st||ht!==pt)&&qh(rt,ut,st,pt),$g=!1;var gt=rt.memoizedState;ut.state=gt,gh(rt,st,ut,lt),ht=rt.memoizedState,dt!==st||gt!==ht||Wf.current||$g?(typeof ft=="function"&&(kh(rt,it,ft,st),ht=rt.memoizedState),(dt=$g||oh(rt,it,dt,st,gt,ht,pt))?(mt||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount()),typeof ut.componentDidMount=="function"&&(rt.flags|=4194308)):(typeof ut.componentDidMount=="function"&&(rt.flags|=4194308),rt.memoizedProps=st,rt.memoizedState=ht),ut.props=st,ut.state=ht,ut.context=pt,st=dt):(typeof ut.componentDidMount=="function"&&(rt.flags|=4194308),st=!1)}else{ut=rt.stateNode,bh$1(nt,rt),dt=rt.memoizedProps,pt=rt.type===rt.elementType?dt:Lg(rt.type,dt),ut.props=pt,mt=rt.pendingProps,gt=ut.context,ht=it.contextType,typeof ht=="object"&&ht!==null?ht=Vg(ht):(ht=Zf(it)?Xf:H$2.current,ht=Yf(rt,ht));var xt=it.getDerivedStateFromProps;(ft=typeof xt=="function"||typeof ut.getSnapshotBeforeUpdate=="function")||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(dt!==mt||gt!==ht)&&qh(rt,ut,st,ht),$g=!1,gt=rt.memoizedState,ut.state=gt,gh(rt,st,ut,lt);var yt=rt.memoizedState;dt!==mt||gt!==yt||Wf.current||$g?(typeof xt=="function"&&(kh(rt,it,xt,st),yt=rt.memoizedState),(pt=$g||oh(rt,it,pt,st,gt,yt,ht)||!1)?(ft||typeof ut.UNSAFE_componentWillUpdate!="function"&&typeof ut.componentWillUpdate!="function"||(typeof ut.componentWillUpdate=="function"&&ut.componentWillUpdate(st,yt,ht),typeof ut.UNSAFE_componentWillUpdate=="function"&&ut.UNSAFE_componentWillUpdate(st,yt,ht)),typeof ut.componentDidUpdate=="function"&&(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate=="function"&&(rt.flags|=1024)):(typeof ut.componentDidUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=1024),rt.memoizedProps=st,rt.memoizedState=yt),ut.props=st,ut.state=yt,ut.context=ht,st=pt):(typeof ut.componentDidUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=1024),st=!1)}return kj(nt,rt,it,st,ct,lt)}function kj(nt,rt,it,st,lt,ct){hj(nt,rt);var ut=(rt.flags&128)!==0;if(!st&&!ut)return lt&&dg(rt,it,!1),$i(nt,rt,ct);st=rt.stateNode,Xi.current=rt;var dt=ut&&typeof it.getDerivedStateFromError!="function"?null:st.render();return rt.flags|=1,nt!==null&&ut?(rt.child=Bh(rt,nt.child,null,ct),rt.child=Bh(rt,null,dt,ct)):Yi(nt,rt,dt,ct),rt.memoizedState=st.state,lt&&dg(rt,it,!0),rt.child}function lj(nt){var rt=nt.stateNode;rt.pendingContext?ag$1(nt,rt.pendingContext,rt.pendingContext!==rt.context):rt.context&&ag$1(nt,rt.context,!1),Ih(nt,rt.containerInfo)}function mj(nt,rt,it,st,lt){return Ig(),Jg(lt),rt.flags|=256,Yi(nt,rt,it,st),rt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(nt){return{baseLanes:nt,cachePool:null,transitions:null}}function pj(nt,rt,it){var st=rt.pendingProps,lt=M$5.current,ct=!1,ut=(rt.flags&128)!==0,dt;if((dt=ut)||(dt=nt!==null&&nt.memoizedState===null?!1:(lt&2)!==0),dt?(ct=!0,rt.flags&=-129):(nt===null||nt.memoizedState!==null)&&(lt|=1),G$2(M$5,lt&1),nt===null)return Eg(rt),nt=rt.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null)?(rt.mode&1?nt.data==="$!"?rt.lanes=8:rt.lanes=1073741824:rt.lanes=1,null):(ut=st.children,nt=st.fallback,ct?(st=rt.mode,ct=rt.child,ut={mode:"hidden",children:ut},!(st&1)&&ct!==null?(ct.childLanes=0,ct.pendingProps=ut):ct=qj(ut,st,0,null),nt=Ah(nt,st,it,null),ct.return=rt,nt.return=rt,ct.sibling=nt,rt.child=ct,rt.child.memoizedState=oj(it),rt.memoizedState=nj,nt):rj(rt,ut));if(lt=nt.memoizedState,lt!==null&&(dt=lt.dehydrated,dt!==null))return sj(nt,rt,ut,st,dt,lt,it);if(ct){ct=st.fallback,ut=rt.mode,lt=nt.child,dt=lt.sibling;var ht={mode:"hidden",children:st.children};return!(ut&1)&&rt.child!==lt?(st=rt.child,st.childLanes=0,st.pendingProps=ht,rt.deletions=null):(st=wh(lt,ht),st.subtreeFlags=lt.subtreeFlags&14680064),dt!==null?ct=wh(dt,ct):(ct=Ah(ct,ut,it,null),ct.flags|=2),ct.return=rt,st.return=rt,st.sibling=ct,rt.child=st,st=ct,ct=rt.child,ut=nt.child.memoizedState,ut=ut===null?oj(it):{baseLanes:ut.baseLanes|it,cachePool:null,transitions:ut.transitions},ct.memoizedState=ut,ct.childLanes=nt.childLanes&~it,rt.memoizedState=nj,st}return ct=nt.child,nt=ct.sibling,st=wh(ct,{mode:"visible",children:st.children}),!(rt.mode&1)&&(st.lanes=it),st.return=rt,st.sibling=null,nt!==null&&(it=rt.deletions,it===null?(rt.deletions=[nt],rt.flags|=16):it.push(nt)),rt.child=st,rt.memoizedState=null,st}function rj(nt,rt){return rt=qj({mode:"visible",children:rt},nt.mode,0,null),rt.return=nt,nt.child=rt}function tj(nt,rt,it,st){return st!==null&&Jg(st),Bh(rt,nt.child,null,it),nt=rj(rt,rt.pendingProps.children),nt.flags|=2,rt.memoizedState=null,nt}function sj(nt,rt,it,st,lt,ct,ut){if(it)return rt.flags&256?(rt.flags&=-257,st=Li(Error(p$5(422))),tj(nt,rt,ut,st)):rt.memoizedState!==null?(rt.child=nt.child,rt.flags|=128,null):(ct=st.fallback,lt=rt.mode,st=qj({mode:"visible",children:st.children},lt,0,null),ct=Ah(ct,lt,ut,null),ct.flags|=2,st.return=rt,ct.return=rt,st.sibling=ct,rt.child=st,rt.mode&1&&Bh(rt,nt.child,null,ut),rt.child.memoizedState=oj(ut),rt.memoizedState=nj,ct);if(!(rt.mode&1))return tj(nt,rt,ut,null);if(lt.data==="$!"){if(st=lt.nextSibling&&lt.nextSibling.dataset,st)var dt=st.dgst;return st=dt,ct=Error(p$5(419)),st=Li(ct,st,void 0),tj(nt,rt,ut,st)}if(dt=(ut&nt.childLanes)!==0,Ug||dt){if(st=R$3,st!==null){switch(ut&-ut){case 4:lt=2;break;case 16:lt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:lt=32;break;case 536870912:lt=268435456;break;default:lt=0}lt=lt&(st.suspendedLanes|ut)?0:lt,lt!==0&&lt!==ct.retryLane&&(ct.retryLane=lt,Zg(nt,lt),mh(st,nt,lt,-1))}return uj(),st=Li(Error(p$5(421))),tj(nt,rt,ut,st)}return lt.data==="$?"?(rt.flags|=128,rt.child=nt.child,rt=vj.bind(null,nt),lt._reactRetry=rt,null):(nt=ct.treeContext,yg=Lf(lt.nextSibling),xg=rt,I$9=!0,zg=null,nt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=nt.id,sg=nt.overflow,qg=rt),rt=rj(rt,st.children),rt.flags|=4096,rt)}function wj(nt,rt,it){nt.lanes|=rt;var st=nt.alternate;st!==null&&(st.lanes|=rt),Sg(nt.return,rt,it)}function xj(nt,rt,it,st,lt){var ct=nt.memoizedState;ct===null?nt.memoizedState={isBackwards:rt,rendering:null,renderingStartTime:0,last:st,tail:it,tailMode:lt}:(ct.isBackwards=rt,ct.rendering=null,ct.renderingStartTime=0,ct.last=st,ct.tail=it,ct.tailMode=lt)}function yj(nt,rt,it){var st=rt.pendingProps,lt=st.revealOrder,ct=st.tail;if(Yi(nt,rt,st.children,it),st=M$5.current,st&2)st=st&1|2,rt.flags|=128;else{if(nt!==null&&nt.flags&128)e:for(nt=rt.child;nt!==null;){if(nt.tag===13)nt.memoizedState!==null&&wj(nt,it,rt);else if(nt.tag===19)wj(nt,it,rt);else if(nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===rt)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===rt)break e;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}st&=1}if(G$2(M$5,st),!(rt.mode&1))rt.memoizedState=null;else switch(lt){case"forwards":for(it=rt.child,lt=null;it!==null;)nt=it.alternate,nt!==null&&Mh(nt)===null&&(lt=it),it=it.sibling;it=lt,it===null?(lt=rt.child,rt.child=null):(lt=it.sibling,it.sibling=null),xj(rt,!1,lt,it,ct);break;case"backwards":for(it=null,lt=rt.child,rt.child=null;lt!==null;){if(nt=lt.alternate,nt!==null&&Mh(nt)===null){rt.child=lt;break}nt=lt.sibling,lt.sibling=it,it=lt,lt=nt}xj(rt,!0,it,null,ct);break;case"together":xj(rt,!1,null,null,void 0);break;default:rt.memoizedState=null}return rt.child}function jj(nt,rt){!(rt.mode&1)&&nt!==null&&(nt.alternate=null,rt.alternate=null,rt.flags|=2)}function $i(nt,rt,it){if(nt!==null&&(rt.dependencies=nt.dependencies),hh$1|=rt.lanes,!(it&rt.childLanes))return null;if(nt!==null&&rt.child!==nt.child)throw Error(p$5(153));if(rt.child!==null){for(nt=rt.child,it=wh(nt,nt.pendingProps),rt.child=it,it.return=rt;nt.sibling!==null;)nt=nt.sibling,it=it.sibling=wh(nt,nt.pendingProps),it.return=rt;it.sibling=null}return rt.child}function zj(nt,rt,it){switch(rt.tag){case 3:lj(rt),Ig();break;case 5:Kh(rt);break;case 1:Zf(rt.type)&&cg$1(rt);break;case 4:Ih(rt,rt.stateNode.containerInfo);break;case 10:var st=rt.type._context,lt=rt.memoizedProps.value;G$2(Mg,st._currentValue),st._currentValue=lt;break;case 13:if(st=rt.memoizedState,st!==null)return st.dehydrated!==null?(G$2(M$5,M$5.current&1),rt.flags|=128,null):it&rt.child.childLanes?pj(nt,rt,it):(G$2(M$5,M$5.current&1),nt=$i(nt,rt,it),nt!==null?nt.sibling:null);G$2(M$5,M$5.current&1);break;case 19:if(st=(it&rt.childLanes)!==0,nt.flags&128){if(st)return yj(nt,rt,it);rt.flags|=128}if(lt=rt.memoizedState,lt!==null&&(lt.rendering=null,lt.tail=null,lt.lastEffect=null),G$2(M$5,M$5.current),st)break;return null;case 22:case 23:return rt.lanes=0,ej(nt,rt,it)}return $i(nt,rt,it)}var Aj,Bj,Cj,Dj;Aj=function(nt,rt){for(var it=rt.child;it!==null;){if(it.tag===5||it.tag===6)nt.appendChild(it.stateNode);else if(it.tag!==4&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===rt)break;for(;it.sibling===null;){if(it.return===null||it.return===rt)return;it=it.return}it.sibling.return=it.return,it=it.sibling}};Bj=function(){};Cj=function(nt,rt,it,st){var lt=nt.memoizedProps;if(lt!==st){nt=rt.stateNode,Hh(Eh.current);var ct=null;switch(it){case"input":lt=Ya(nt,lt),st=Ya(nt,st),ct=[];break;case"select":lt=A$2({},lt,{value:void 0}),st=A$2({},st,{value:void 0}),ct=[];break;case"textarea":lt=gb(nt,lt),st=gb(nt,st),ct=[];break;default:typeof lt.onClick!="function"&&typeof st.onClick=="function"&&(nt.onclick=Bf)}ub(it,st);var ut;it=null;for(pt in lt)if(!st.hasOwnProperty(pt)&&lt.hasOwnProperty(pt)&&lt[pt]!=null)if(pt==="style"){var dt=lt[pt];for(ut in dt)dt.hasOwnProperty(ut)&&(it||(it={}),it[ut]="")}else pt!=="dangerouslySetInnerHTML"&&pt!=="children"&&pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&pt!=="autoFocus"&&(ea.hasOwnProperty(pt)?ct||(ct=[]):(ct=ct||[]).push(pt,null));for(pt in st){var ht=st[pt];if(dt=lt!=null?lt[pt]:void 0,st.hasOwnProperty(pt)&&ht!==dt&&(ht!=null||dt!=null))if(pt==="style")if(dt){for(ut in dt)!dt.hasOwnProperty(ut)||ht&&ht.hasOwnProperty(ut)||(it||(it={}),it[ut]="");for(ut in ht)ht.hasOwnProperty(ut)&&dt[ut]!==ht[ut]&&(it||(it={}),it[ut]=ht[ut])}else it||(ct||(ct=[]),ct.push(pt,it)),it=ht;else pt==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,dt=dt?dt.__html:void 0,ht!=null&&dt!==ht&&(ct=ct||[]).push(pt,ht)):pt==="children"?typeof ht!="string"&&typeof ht!="number"||(ct=ct||[]).push(pt,""+ht):pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(pt)?(ht!=null&&pt==="onScroll"&&D$4("scroll",nt),ct||dt===ht||(ct=[])):(ct=ct||[]).push(pt,ht))}it&&(ct=ct||[]).push("style",it);var pt=ct;(rt.updateQueue=pt)&&(rt.flags|=4)}};Dj=function(nt,rt,it,st){it!==st&&(rt.flags|=4)};function Ej(nt,rt){if(!I$9)switch(nt.tailMode){case"hidden":rt=nt.tail;for(var it=null;rt!==null;)rt.alternate!==null&&(it=rt),rt=rt.sibling;it===null?nt.tail=null:it.sibling=null;break;case"collapsed":it=nt.tail;for(var st=null;it!==null;)it.alternate!==null&&(st=it),it=it.sibling;st===null?rt||nt.tail===null?nt.tail=null:nt.tail.sibling=null:st.sibling=null}}function S$7(nt){var rt=nt.alternate!==null&&nt.alternate.child===nt.child,it=0,st=0;if(rt)for(var lt=nt.child;lt!==null;)it|=lt.lanes|lt.childLanes,st|=lt.subtreeFlags&14680064,st|=lt.flags&14680064,lt.return=nt,lt=lt.sibling;else for(lt=nt.child;lt!==null;)it|=lt.lanes|lt.childLanes,st|=lt.subtreeFlags,st|=lt.flags,lt.return=nt,lt=lt.sibling;return nt.subtreeFlags|=st,nt.childLanes=it,rt}function Fj(nt,rt,it){var st=rt.pendingProps;switch(wg(rt),rt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$7(rt),null;case 1:return Zf(rt.type)&&$f(),S$7(rt),null;case 3:return st=rt.stateNode,Jh(),E$2(Wf),E$2(H$2),Oh(),st.pendingContext&&(st.context=st.pendingContext,st.pendingContext=null),(nt===null||nt.child===null)&&(Gg(rt)?rt.flags|=4:nt===null||nt.memoizedState.isDehydrated&&!(rt.flags&256)||(rt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(nt,rt),S$7(rt),null;case 5:Lh(rt);var lt=Hh(Gh.current);if(it=rt.type,nt!==null&&rt.stateNode!=null)Cj(nt,rt,it,st,lt),nt.ref!==rt.ref&&(rt.flags|=512,rt.flags|=2097152);else{if(!st){if(rt.stateNode===null)throw Error(p$5(166));return S$7(rt),null}if(nt=Hh(Eh.current),Gg(rt)){st=rt.stateNode,it=rt.type;var ct=rt.memoizedProps;switch(st[Of]=rt,st[Pf]=ct,nt=(rt.mode&1)!==0,it){case"dialog":D$4("cancel",st),D$4("close",st);break;case"iframe":case"object":case"embed":D$4("load",st);break;case"video":case"audio":for(lt=0;lt<lf.length;lt++)D$4(lf[lt],st);break;case"source":D$4("error",st);break;case"img":case"image":case"link":D$4("error",st),D$4("load",st);break;case"details":D$4("toggle",st);break;case"input":Za(st,ct),D$4("invalid",st);break;case"select":st._wrapperState={wasMultiple:!!ct.multiple},D$4("invalid",st);break;case"textarea":hb(st,ct),D$4("invalid",st)}ub(it,ct),lt=null;for(var ut in ct)if(ct.hasOwnProperty(ut)){var dt=ct[ut];ut==="children"?typeof dt=="string"?st.textContent!==dt&&(ct.suppressHydrationWarning!==!0&&Af(st.textContent,dt,nt),lt=["children",dt]):typeof dt=="number"&&st.textContent!==""+dt&&(ct.suppressHydrationWarning!==!0&&Af(st.textContent,dt,nt),lt=["children",""+dt]):ea.hasOwnProperty(ut)&&dt!=null&&ut==="onScroll"&&D$4("scroll",st)}switch(it){case"input":Va(st),db(st,ct,!0);break;case"textarea":Va(st),jb(st);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(st.onclick=Bf)}st=lt,rt.updateQueue=st,st!==null&&(rt.flags|=4)}else{ut=lt.nodeType===9?lt:lt.ownerDocument,nt==="http://www.w3.org/1999/xhtml"&&(nt=kb(it)),nt==="http://www.w3.org/1999/xhtml"?it==="script"?(nt=ut.createElement("div"),nt.innerHTML="<script><\/script>",nt=nt.removeChild(nt.firstChild)):typeof st.is=="string"?nt=ut.createElement(it,{is:st.is}):(nt=ut.createElement(it),it==="select"&&(ut=nt,st.multiple?ut.multiple=!0:st.size&&(ut.size=st.size))):nt=ut.createElementNS(nt,it),nt[Of]=rt,nt[Pf]=st,Aj(nt,rt,!1,!1),rt.stateNode=nt;e:{switch(ut=vb(it,st),it){case"dialog":D$4("cancel",nt),D$4("close",nt),lt=st;break;case"iframe":case"object":case"embed":D$4("load",nt),lt=st;break;case"video":case"audio":for(lt=0;lt<lf.length;lt++)D$4(lf[lt],nt);lt=st;break;case"source":D$4("error",nt),lt=st;break;case"img":case"image":case"link":D$4("error",nt),D$4("load",nt),lt=st;break;case"details":D$4("toggle",nt),lt=st;break;case"input":Za(nt,st),lt=Ya(nt,st),D$4("invalid",nt);break;case"option":lt=st;break;case"select":nt._wrapperState={wasMultiple:!!st.multiple},lt=A$2({},st,{value:void 0}),D$4("invalid",nt);break;case"textarea":hb(nt,st),lt=gb(nt,st),D$4("invalid",nt);break;default:lt=st}ub(it,lt),dt=lt;for(ct in dt)if(dt.hasOwnProperty(ct)){var ht=dt[ct];ct==="style"?sb(nt,ht):ct==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,ht!=null&&nb(nt,ht)):ct==="children"?typeof ht=="string"?(it!=="textarea"||ht!=="")&&ob(nt,ht):typeof ht=="number"&&ob(nt,""+ht):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?ht!=null&&ct==="onScroll"&&D$4("scroll",nt):ht!=null&&ta(nt,ct,ht,ut))}switch(it){case"input":Va(nt),db(nt,st,!1);break;case"textarea":Va(nt),jb(nt);break;case"option":st.value!=null&&nt.setAttribute("value",""+Sa(st.value));break;case"select":nt.multiple=!!st.multiple,ct=st.value,ct!=null?fb(nt,!!st.multiple,ct,!1):st.defaultValue!=null&&fb(nt,!!st.multiple,st.defaultValue,!0);break;default:typeof lt.onClick=="function"&&(nt.onclick=Bf)}switch(it){case"button":case"input":case"select":case"textarea":st=!!st.autoFocus;break e;case"img":st=!0;break e;default:st=!1}}st&&(rt.flags|=4)}rt.ref!==null&&(rt.flags|=512,rt.flags|=2097152)}return S$7(rt),null;case 6:if(nt&&rt.stateNode!=null)Dj(nt,rt,nt.memoizedProps,st);else{if(typeof st!="string"&&rt.stateNode===null)throw Error(p$5(166));if(it=Hh(Gh.current),Hh(Eh.current),Gg(rt)){if(st=rt.stateNode,it=rt.memoizedProps,st[Of]=rt,(ct=st.nodeValue!==it)&&(nt=xg,nt!==null))switch(nt.tag){case 3:Af(st.nodeValue,it,(nt.mode&1)!==0);break;case 5:nt.memoizedProps.suppressHydrationWarning!==!0&&Af(st.nodeValue,it,(nt.mode&1)!==0)}ct&&(rt.flags|=4)}else st=(it.nodeType===9?it:it.ownerDocument).createTextNode(st),st[Of]=rt,rt.stateNode=st}return S$7(rt),null;case 13:if(E$2(M$5),st=rt.memoizedState,nt===null||nt.memoizedState!==null&&nt.memoizedState.dehydrated!==null){if(I$9&&yg!==null&&rt.mode&1&&!(rt.flags&128))Hg(),Ig(),rt.flags|=98560,ct=!1;else if(ct=Gg(rt),st!==null&&st.dehydrated!==null){if(nt===null){if(!ct)throw Error(p$5(318));if(ct=rt.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$5(317));ct[Of]=rt}else Ig(),!(rt.flags&128)&&(rt.memoizedState=null),rt.flags|=4;S$7(rt),ct=!1}else zg!==null&&(Gj(zg),zg=null),ct=!0;if(!ct)return rt.flags&65536?rt:null}return rt.flags&128?(rt.lanes=it,rt):(st=st!==null,st!==(nt!==null&&nt.memoizedState!==null)&&st&&(rt.child.flags|=8192,rt.mode&1&&(nt===null||M$5.current&1?T$5===0&&(T$5=3):uj())),rt.updateQueue!==null&&(rt.flags|=4),S$7(rt),null);case 4:return Jh(),Bj(nt,rt),nt===null&&sf(rt.stateNode.containerInfo),S$7(rt),null;case 10:return Rg(rt.type._context),S$7(rt),null;case 17:return Zf(rt.type)&&$f(),S$7(rt),null;case 19:if(E$2(M$5),ct=rt.memoizedState,ct===null)return S$7(rt),null;if(st=(rt.flags&128)!==0,ut=ct.rendering,ut===null)if(st)Ej(ct,!1);else{if(T$5!==0||nt!==null&&nt.flags&128)for(nt=rt.child;nt!==null;){if(ut=Mh(nt),ut!==null){for(rt.flags|=128,Ej(ct,!1),st=ut.updateQueue,st!==null&&(rt.updateQueue=st,rt.flags|=4),rt.subtreeFlags=0,st=it,it=rt.child;it!==null;)ct=it,nt=st,ct.flags&=14680066,ut=ct.alternate,ut===null?(ct.childLanes=0,ct.lanes=nt,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=ut.childLanes,ct.lanes=ut.lanes,ct.child=ut.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=ut.memoizedProps,ct.memoizedState=ut.memoizedState,ct.updateQueue=ut.updateQueue,ct.type=ut.type,nt=ut.dependencies,ct.dependencies=nt===null?null:{lanes:nt.lanes,firstContext:nt.firstContext}),it=it.sibling;return G$2(M$5,M$5.current&1|2),rt.child}nt=nt.sibling}ct.tail!==null&&B$2()>Hj&&(rt.flags|=128,st=!0,Ej(ct,!1),rt.lanes=4194304)}else{if(!st)if(nt=Mh(ut),nt!==null){if(rt.flags|=128,st=!0,it=nt.updateQueue,it!==null&&(rt.updateQueue=it,rt.flags|=4),Ej(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!ut.alternate&&!I$9)return S$7(rt),null}else 2*B$2()-ct.renderingStartTime>Hj&&it!==1073741824&&(rt.flags|=128,st=!0,Ej(ct,!1),rt.lanes=4194304);ct.isBackwards?(ut.sibling=rt.child,rt.child=ut):(it=ct.last,it!==null?it.sibling=ut:rt.child=ut,ct.last=ut)}return ct.tail!==null?(rt=ct.tail,ct.rendering=rt,ct.tail=rt.sibling,ct.renderingStartTime=B$2(),rt.sibling=null,it=M$5.current,G$2(M$5,st?it&1|2:it&1),rt):(S$7(rt),null);case 22:case 23:return Ij(),st=rt.memoizedState!==null,nt!==null&&nt.memoizedState!==null!==st&&(rt.flags|=8192),st&&rt.mode&1?gj&1073741824&&(S$7(rt),rt.subtreeFlags&6&&(rt.flags|=8192)):S$7(rt),null;case 24:return null;case 25:return null}throw Error(p$5(156,rt.tag))}function Jj(nt,rt){switch(wg(rt),rt.tag){case 1:return Zf(rt.type)&&$f(),nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 3:return Jh(),E$2(Wf),E$2(H$2),Oh(),nt=rt.flags,nt&65536&&!(nt&128)?(rt.flags=nt&-65537|128,rt):null;case 5:return Lh(rt),null;case 13:if(E$2(M$5),nt=rt.memoizedState,nt!==null&&nt.dehydrated!==null){if(rt.alternate===null)throw Error(p$5(340));Ig()}return nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 19:return E$2(M$5),null;case 4:return Jh(),null;case 10:return Rg(rt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$4=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(nt,rt){var it=nt.ref;if(it!==null)if(typeof it=="function")try{it(null)}catch(st){W$1(nt,rt,st)}else it.current=null}function Nj(nt,rt,it){try{it()}catch(st){W$1(nt,rt,st)}}var Oj=!1;function Pj(nt,rt){if(Cf=dd,nt=Me$1(),Ne$3(nt)){if("selectionStart"in nt)var it={start:nt.selectionStart,end:nt.selectionEnd};else e:{it=(it=nt.ownerDocument)&&it.defaultView||window;var st=it.getSelection&&it.getSelection();if(st&&st.rangeCount!==0){it=st.anchorNode;var lt=st.anchorOffset,ct=st.focusNode;st=st.focusOffset;try{it.nodeType,ct.nodeType}catch{it=null;break e}var ut=0,dt=-1,ht=-1,pt=0,ft=0,mt=nt,gt=null;t:for(;;){for(var xt;mt!==it||lt!==0&&mt.nodeType!==3||(dt=ut+lt),mt!==ct||st!==0&&mt.nodeType!==3||(ht=ut+st),mt.nodeType===3&&(ut+=mt.nodeValue.length),(xt=mt.firstChild)!==null;)gt=mt,mt=xt;for(;;){if(mt===nt)break t;if(gt===it&&++pt===lt&&(dt=ut),gt===ct&&++ft===st&&(ht=ut),(xt=mt.nextSibling)!==null)break;mt=gt,gt=mt.parentNode}mt=xt}it=dt===-1||ht===-1?null:{start:dt,end:ht}}else it=null}it=it||{start:0,end:0}}else it=null;for(Df={focusedElem:nt,selectionRange:it},dd=!1,V$1=rt;V$1!==null;)if(rt=V$1,nt=rt.child,(rt.subtreeFlags&1028)!==0&&nt!==null)nt.return=rt,V$1=nt;else for(;V$1!==null;){rt=V$1;try{var yt=rt.alternate;if(rt.flags&1024)switch(rt.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var vt=yt.memoizedProps,St=yt.memoizedState,Et=rt.stateNode,wt=Et.getSnapshotBeforeUpdate(rt.elementType===rt.type?vt:Lg(rt.type,vt),St);Et.__reactInternalSnapshotBeforeUpdate=wt}break;case 3:var Rt=rt.stateNode.containerInfo;Rt.nodeType===1?Rt.textContent="":Rt.nodeType===9&&Rt.documentElement&&Rt.removeChild(Rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$5(163))}}catch(Tt){W$1(rt,rt.return,Tt)}if(nt=rt.sibling,nt!==null){nt.return=rt.return,V$1=nt;break}V$1=rt.return}return yt=Oj,Oj=!1,yt}function Qj(nt,rt,it){var st=rt.updateQueue;if(st=st!==null?st.lastEffect:null,st!==null){var lt=st=st.next;do{if((lt.tag&nt)===nt){var ct=lt.destroy;lt.destroy=void 0,ct!==void 0&&Nj(rt,it,ct)}lt=lt.next}while(lt!==st)}}function Rj(nt,rt){if(rt=rt.updateQueue,rt=rt!==null?rt.lastEffect:null,rt!==null){var it=rt=rt.next;do{if((it.tag&nt)===nt){var st=it.create;it.destroy=st()}it=it.next}while(it!==rt)}}function Sj(nt){var rt=nt.ref;if(rt!==null){var it=nt.stateNode;switch(nt.tag){case 5:nt=it;break;default:nt=it}typeof rt=="function"?rt(nt):rt.current=nt}}function Tj(nt){var rt=nt.alternate;rt!==null&&(nt.alternate=null,Tj(rt)),nt.child=null,nt.deletions=null,nt.sibling=null,nt.tag===5&&(rt=nt.stateNode,rt!==null&&(delete rt[Of],delete rt[Pf],delete rt[of],delete rt[Qf],delete rt[Rf])),nt.stateNode=null,nt.return=null,nt.dependencies=null,nt.memoizedProps=null,nt.memoizedState=null,nt.pendingProps=null,nt.stateNode=null,nt.updateQueue=null}function Uj(nt){return nt.tag===5||nt.tag===3||nt.tag===4}function Vj(nt){e:for(;;){for(;nt.sibling===null;){if(nt.return===null||Uj(nt.return))return null;nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;nt.tag!==5&&nt.tag!==6&&nt.tag!==18;){if(nt.flags&2||nt.child===null||nt.tag===4)continue e;nt.child.return=nt,nt=nt.child}if(!(nt.flags&2))return nt.stateNode}}function Wj(nt,rt,it){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,rt?it.nodeType===8?it.parentNode.insertBefore(nt,rt):it.insertBefore(nt,rt):(it.nodeType===8?(rt=it.parentNode,rt.insertBefore(nt,it)):(rt=it,rt.appendChild(nt)),it=it._reactRootContainer,it!=null||rt.onclick!==null||(rt.onclick=Bf));else if(st!==4&&(nt=nt.child,nt!==null))for(Wj(nt,rt,it),nt=nt.sibling;nt!==null;)Wj(nt,rt,it),nt=nt.sibling}function Xj(nt,rt,it){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,rt?it.insertBefore(nt,rt):it.appendChild(nt);else if(st!==4&&(nt=nt.child,nt!==null))for(Xj(nt,rt,it),nt=nt.sibling;nt!==null;)Xj(nt,rt,it),nt=nt.sibling}var X$2=null,Yj=!1;function Zj(nt,rt,it){for(it=it.child;it!==null;)ak$1(nt,rt,it),it=it.sibling}function ak$1(nt,rt,it){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,it)}catch{}switch(it.tag){case 5:U$4||Mj(it,rt);case 6:var st=X$2,lt=Yj;X$2=null,Zj(nt,rt,it),X$2=st,Yj=lt,X$2!==null&&(Yj?(nt=X$2,it=it.stateNode,nt.nodeType===8?nt.parentNode.removeChild(it):nt.removeChild(it)):X$2.removeChild(it.stateNode));break;case 18:X$2!==null&&(Yj?(nt=X$2,it=it.stateNode,nt.nodeType===8?Kf(nt.parentNode,it):nt.nodeType===1&&Kf(nt,it),bd$1(nt)):Kf(X$2,it.stateNode));break;case 4:st=X$2,lt=Yj,X$2=it.stateNode.containerInfo,Yj=!0,Zj(nt,rt,it),X$2=st,Yj=lt;break;case 0:case 11:case 14:case 15:if(!U$4&&(st=it.updateQueue,st!==null&&(st=st.lastEffect,st!==null))){lt=st=st.next;do{var ct=lt,ut=ct.destroy;ct=ct.tag,ut!==void 0&&(ct&2||ct&4)&&Nj(it,rt,ut),lt=lt.next}while(lt!==st)}Zj(nt,rt,it);break;case 1:if(!U$4&&(Mj(it,rt),st=it.stateNode,typeof st.componentWillUnmount=="function"))try{st.props=it.memoizedProps,st.state=it.memoizedState,st.componentWillUnmount()}catch(dt){W$1(it,rt,dt)}Zj(nt,rt,it);break;case 21:Zj(nt,rt,it);break;case 22:it.mode&1?(U$4=(st=U$4)||it.memoizedState!==null,Zj(nt,rt,it),U$4=st):Zj(nt,rt,it);break;default:Zj(nt,rt,it)}}function bk$1(nt){var rt=nt.updateQueue;if(rt!==null){nt.updateQueue=null;var it=nt.stateNode;it===null&&(it=nt.stateNode=new Lj),rt.forEach(function(st){var lt=ck$1.bind(null,nt,st);it.has(st)||(it.add(st),st.then(lt,lt))})}}function dk(nt,rt){var it=rt.deletions;if(it!==null)for(var st=0;st<it.length;st++){var lt=it[st];try{var ct=nt,ut=rt,dt=ut;e:for(;dt!==null;){switch(dt.tag){case 5:X$2=dt.stateNode,Yj=!1;break e;case 3:X$2=dt.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=dt.stateNode.containerInfo,Yj=!0;break e}dt=dt.return}if(X$2===null)throw Error(p$5(160));ak$1(ct,ut,lt),X$2=null,Yj=!1;var ht=lt.alternate;ht!==null&&(ht.return=null),lt.return=null}catch(pt){W$1(lt,rt,pt)}}if(rt.subtreeFlags&12854)for(rt=rt.child;rt!==null;)ek(rt,nt),rt=rt.sibling}function ek(nt,rt){var it=nt.alternate,st=nt.flags;switch(nt.tag){case 0:case 11:case 14:case 15:if(dk(rt,nt),fk(nt),st&4){try{Qj(3,nt,nt.return),Rj(3,nt)}catch(vt){W$1(nt,nt.return,vt)}try{Qj(5,nt,nt.return)}catch(vt){W$1(nt,nt.return,vt)}}break;case 1:dk(rt,nt),fk(nt),st&512&&it!==null&&Mj(it,it.return);break;case 5:if(dk(rt,nt),fk(nt),st&512&&it!==null&&Mj(it,it.return),nt.flags&32){var lt=nt.stateNode;try{ob(lt,"")}catch(vt){W$1(nt,nt.return,vt)}}if(st&4&&(lt=nt.stateNode,lt!=null)){var ct=nt.memoizedProps,ut=it!==null?it.memoizedProps:ct,dt=nt.type,ht=nt.updateQueue;if(nt.updateQueue=null,ht!==null)try{dt==="input"&&ct.type==="radio"&&ct.name!=null&&ab$1(lt,ct),vb(dt,ut);var pt=vb(dt,ct);for(ut=0;ut<ht.length;ut+=2){var ft=ht[ut],mt=ht[ut+1];ft==="style"?sb(lt,mt):ft==="dangerouslySetInnerHTML"?nb(lt,mt):ft==="children"?ob(lt,mt):ta(lt,ft,mt,pt)}switch(dt){case"input":bb$1(lt,ct);break;case"textarea":ib(lt,ct);break;case"select":var gt=lt._wrapperState.wasMultiple;lt._wrapperState.wasMultiple=!!ct.multiple;var xt=ct.value;xt!=null?fb(lt,!!ct.multiple,xt,!1):gt!==!!ct.multiple&&(ct.defaultValue!=null?fb(lt,!!ct.multiple,ct.defaultValue,!0):fb(lt,!!ct.multiple,ct.multiple?[]:"",!1))}lt[Pf]=ct}catch(vt){W$1(nt,nt.return,vt)}}break;case 6:if(dk(rt,nt),fk(nt),st&4){if(nt.stateNode===null)throw Error(p$5(162));lt=nt.stateNode,ct=nt.memoizedProps;try{lt.nodeValue=ct}catch(vt){W$1(nt,nt.return,vt)}}break;case 3:if(dk(rt,nt),fk(nt),st&4&&it!==null&&it.memoizedState.isDehydrated)try{bd$1(rt.containerInfo)}catch(vt){W$1(nt,nt.return,vt)}break;case 4:dk(rt,nt),fk(nt);break;case 13:dk(rt,nt),fk(nt),lt=nt.child,lt.flags&8192&&(ct=lt.memoizedState!==null,lt.stateNode.isHidden=ct,!ct||lt.alternate!==null&&lt.alternate.memoizedState!==null||(gk=B$2())),st&4&&bk$1(nt);break;case 22:if(ft=it!==null&&it.memoizedState!==null,nt.mode&1?(U$4=(pt=U$4)||ft,dk(rt,nt),U$4=pt):dk(rt,nt),fk(nt),st&8192){if(pt=nt.memoizedState!==null,(nt.stateNode.isHidden=pt)&&!ft&&nt.mode&1)for(V$1=nt,ft=nt.child;ft!==null;){for(mt=V$1=ft;V$1!==null;){switch(gt=V$1,xt=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var yt=gt.stateNode;if(typeof yt.componentWillUnmount=="function"){st=gt,it=gt.return;try{rt=st,yt.props=rt.memoizedProps,yt.state=rt.memoizedState,yt.componentWillUnmount()}catch(vt){W$1(st,it,vt)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(mt);continue}}xt!==null?(xt.return=gt,V$1=xt):hk(mt)}ft=ft.sibling}e:for(ft=null,mt=nt;;){if(mt.tag===5){if(ft===null){ft=mt;try{lt=mt.stateNode,pt?(ct=lt.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(dt=mt.stateNode,ht=mt.memoizedProps.style,ut=ht!=null&&ht.hasOwnProperty("display")?ht.display:null,dt.style.display=rb("display",ut))}catch(vt){W$1(nt,nt.return,vt)}}}else if(mt.tag===6){if(ft===null)try{mt.stateNode.nodeValue=pt?"":mt.memoizedProps}catch(vt){W$1(nt,nt.return,vt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===nt)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===nt)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===nt)break e;ft===mt&&(ft=null),mt=mt.return}ft===mt&&(ft=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:dk(rt,nt),fk(nt),st&4&&bk$1(nt);break;case 21:break;default:dk(rt,nt),fk(nt)}}function fk(nt){var rt=nt.flags;if(rt&2){try{e:{for(var it=nt.return;it!==null;){if(Uj(it)){var st=it;break e}it=it.return}throw Error(p$5(160))}switch(st.tag){case 5:var lt=st.stateNode;st.flags&32&&(ob(lt,""),st.flags&=-33);var ct=Vj(nt);Xj(nt,ct,lt);break;case 3:case 4:var ut=st.stateNode.containerInfo,dt=Vj(nt);Wj(nt,dt,ut);break;default:throw Error(p$5(161))}}catch(ht){W$1(nt,nt.return,ht)}nt.flags&=-3}rt&4096&&(nt.flags&=-4097)}function ik(nt,rt,it){V$1=nt,jk(nt)}function jk(nt,rt,it){for(var st=(nt.mode&1)!==0;V$1!==null;){var lt=V$1,ct=lt.child;if(lt.tag===22&&st){var ut=lt.memoizedState!==null||Kj;if(!ut){var dt=lt.alternate,ht=dt!==null&&dt.memoizedState!==null||U$4;dt=Kj;var pt=U$4;if(Kj=ut,(U$4=ht)&&!pt)for(V$1=lt;V$1!==null;)ut=V$1,ht=ut.child,ut.tag===22&&ut.memoizedState!==null?kk(lt):ht!==null?(ht.return=ut,V$1=ht):kk(lt);for(;ct!==null;)V$1=ct,jk(ct),ct=ct.sibling;V$1=lt,Kj=dt,U$4=pt}lk(nt)}else lt.subtreeFlags&8772&&ct!==null?(ct.return=lt,V$1=ct):lk(nt)}}function lk(nt){for(;V$1!==null;){var rt=V$1;if(rt.flags&8772){var it=rt.alternate;try{if(rt.flags&8772)switch(rt.tag){case 0:case 11:case 15:U$4||Rj(5,rt);break;case 1:var st=rt.stateNode;if(rt.flags&4&&!U$4)if(it===null)st.componentDidMount();else{var lt=rt.elementType===rt.type?it.memoizedProps:Lg(rt.type,it.memoizedProps);st.componentDidUpdate(lt,it.memoizedState,st.__reactInternalSnapshotBeforeUpdate)}var ct=rt.updateQueue;ct!==null&&ih(rt,ct,st);break;case 3:var ut=rt.updateQueue;if(ut!==null){if(it=null,rt.child!==null)switch(rt.child.tag){case 5:it=rt.child.stateNode;break;case 1:it=rt.child.stateNode}ih(rt,ut,it)}break;case 5:var dt=rt.stateNode;if(it===null&&rt.flags&4){it=dt;var ht=rt.memoizedProps;switch(rt.type){case"button":case"input":case"select":case"textarea":ht.autoFocus&&it.focus();break;case"img":ht.src&&(it.src=ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(rt.memoizedState===null){var pt=rt.alternate;if(pt!==null){var ft=pt.memoizedState;if(ft!==null){var mt=ft.dehydrated;mt!==null&&bd$1(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$5(163))}U$4||rt.flags&512&&Sj(rt)}catch(gt){W$1(rt,rt.return,gt)}}if(rt===nt){V$1=null;break}if(it=rt.sibling,it!==null){it.return=rt.return,V$1=it;break}V$1=rt.return}}function hk(nt){for(;V$1!==null;){var rt=V$1;if(rt===nt){V$1=null;break}var it=rt.sibling;if(it!==null){it.return=rt.return,V$1=it;break}V$1=rt.return}}function kk(nt){for(;V$1!==null;){var rt=V$1;try{switch(rt.tag){case 0:case 11:case 15:var it=rt.return;try{Rj(4,rt)}catch(ht){W$1(rt,it,ht)}break;case 1:var st=rt.stateNode;if(typeof st.componentDidMount=="function"){var lt=rt.return;try{st.componentDidMount()}catch(ht){W$1(rt,lt,ht)}}var ct=rt.return;try{Sj(rt)}catch(ht){W$1(rt,ct,ht)}break;case 5:var ut=rt.return;try{Sj(rt)}catch(ht){W$1(rt,ut,ht)}}}catch(ht){W$1(rt,rt.return,ht)}if(rt===nt){V$1=null;break}var dt=rt.sibling;if(dt!==null){dt.return=rt.return,V$1=dt;break}V$1=rt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$2=null,Z$2=0,gj=0,fj=Uf(0),T$5=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(nt){return nt.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(nt=C$3,nt!==0||(nt=window.event,nt=nt===void 0?16:jd(nt.type)),nt):1}function mh(nt,rt,it,st){if(50<zk)throw zk=0,Ak=null,Error(p$5(185));Ac(nt,it,st),(!(K$1&2)||nt!==R$3)&&(nt===R$3&&(!(K$1&2)&&(rk|=it),T$5===4&&Dk(nt,Z$2)),Ek(nt,st),it===1&&K$1===0&&!(rt.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(nt,rt){var it=nt.callbackNode;wc(nt,rt);var st=uc(nt,nt===R$3?Z$2:0);if(st===0)it!==null&&bc$1(it),nt.callbackNode=null,nt.callbackPriority=0;else if(rt=st&-st,nt.callbackPriority!==rt){if(it!=null&&bc$1(it),rt===1)nt.tag===0?ig(Fk.bind(null,nt)):hg(Fk.bind(null,nt)),Jf(function(){!(K$1&6)&&jg()}),it=null;else{switch(Dc(st)){case 1:it=fc;break;case 4:it=gc;break;case 16:it=hc;break;case 536870912:it=jc;break;default:it=hc}it=Gk(it,Hk.bind(null,nt))}nt.callbackPriority=rt,nt.callbackNode=it}}function Hk(nt,rt){if(Bk=-1,Ck=0,K$1&6)throw Error(p$5(327));var it=nt.callbackNode;if(Ik()&&nt.callbackNode!==it)return null;var st=uc(nt,nt===R$3?Z$2:0);if(st===0)return null;if(st&30||st&nt.expiredLanes||rt)rt=Jk(nt,st);else{rt=st;var lt=K$1;K$1|=2;var ct=Kk();(R$3!==nt||Z$2!==rt)&&(vk=null,Hj=B$2()+500,Lk(nt,rt));do try{Mk();break}catch(dt){Nk(nt,dt)}while(!0);Qg(),nk.current=ct,K$1=lt,Y$2!==null?rt=0:(R$3=null,Z$2=0,rt=T$5)}if(rt!==0){if(rt===2&&(lt=xc(nt),lt!==0&&(st=lt,rt=Ok(nt,lt))),rt===1)throw it=qk,Lk(nt,0),Dk(nt,st),Ek(nt,B$2()),it;if(rt===6)Dk(nt,st);else{if(lt=nt.current.alternate,!(st&30)&&!Pk(lt)&&(rt=Jk(nt,st),rt===2&&(ct=xc(nt),ct!==0&&(st=ct,rt=Ok(nt,ct))),rt===1))throw it=qk,Lk(nt,0),Dk(nt,st),Ek(nt,B$2()),it;switch(nt.finishedWork=lt,nt.finishedLanes=st,rt){case 0:case 1:throw Error(p$5(345));case 2:Qk(nt,uk,vk);break;case 3:if(Dk(nt,st),(st&130023424)===st&&(rt=gk+500-B$2(),10<rt)){if(uc(nt,0)!==0)break;if(lt=nt.suspendedLanes,(lt&st)!==st){L$1(),nt.pingedLanes|=nt.suspendedLanes&lt;break}nt.timeoutHandle=Ff(Qk.bind(null,nt,uk,vk),rt);break}Qk(nt,uk,vk);break;case 4:if(Dk(nt,st),(st&4194240)===st)break;for(rt=nt.eventTimes,lt=-1;0<st;){var ut=31-oc(st);ct=1<<ut,ut=rt[ut],ut>lt&&(lt=ut),st&=~ct}if(st=lt,st=B$2()-st,st=(120>st?120:480>st?480:1080>st?1080:1920>st?1920:3e3>st?3e3:4320>st?4320:1960*mk(st/1960))-st,10<st){nt.timeoutHandle=Ff(Qk.bind(null,nt,uk,vk),st);break}Qk(nt,uk,vk);break;case 5:Qk(nt,uk,vk);break;default:throw Error(p$5(329))}}}return Ek(nt,B$2()),nt.callbackNode===it?Hk.bind(null,nt):null}function Ok(nt,rt){var it=tk;return nt.current.memoizedState.isDehydrated&&(Lk(nt,rt).flags|=256),nt=Jk(nt,rt),nt!==2&&(rt=uk,uk=it,rt!==null&&Gj(rt)),nt}function Gj(nt){uk===null?uk=nt:uk.push.apply(uk,nt)}function Pk(nt){for(var rt=nt;;){if(rt.flags&16384){var it=rt.updateQueue;if(it!==null&&(it=it.stores,it!==null))for(var st=0;st<it.length;st++){var lt=it[st],ct=lt.getSnapshot;lt=lt.value;try{if(!He$3(ct(),lt))return!1}catch{return!1}}}if(it=rt.child,rt.subtreeFlags&16384&&it!==null)it.return=rt,rt=it;else{if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return!0;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}}return!0}function Dk(nt,rt){for(rt&=~sk,rt&=~rk,nt.suspendedLanes|=rt,nt.pingedLanes&=~rt,nt=nt.expirationTimes;0<rt;){var it=31-oc(rt),st=1<<it;nt[it]=-1,rt&=~st}}function Fk(nt){if(K$1&6)throw Error(p$5(327));Ik();var rt=uc(nt,0);if(!(rt&1))return Ek(nt,B$2()),null;var it=Jk(nt,rt);if(nt.tag!==0&&it===2){var st=xc(nt);st!==0&&(rt=st,it=Ok(nt,st))}if(it===1)throw it=qk,Lk(nt,0),Dk(nt,rt),Ek(nt,B$2()),it;if(it===6)throw Error(p$5(345));return nt.finishedWork=nt.current.alternate,nt.finishedLanes=rt,Qk(nt,uk,vk),Ek(nt,B$2()),null}function Rk(nt,rt){var it=K$1;K$1|=1;try{return nt(rt)}finally{K$1=it,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(nt){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var rt=K$1;K$1|=1;var it=pk.transition,st=C$3;try{if(pk.transition=null,C$3=1,nt)return nt()}finally{C$3=st,pk.transition=it,K$1=rt,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(nt,rt){nt.finishedWork=null,nt.finishedLanes=0;var it=nt.timeoutHandle;if(it!==-1&&(nt.timeoutHandle=-1,Gf(it)),Y$2!==null)for(it=Y$2.return;it!==null;){var st=it;switch(wg(st),st.tag){case 1:st=st.type.childContextTypes,st!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$2),Oh();break;case 5:Lh(st);break;case 4:Jh();break;case 13:E$2(M$5);break;case 19:E$2(M$5);break;case 10:Rg(st.type._context);break;case 22:case 23:Ij()}it=it.return}if(R$3=nt,Y$2=nt=wh(nt.current,null),Z$2=gj=rt,T$5=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(rt=0;rt<Wg.length;rt++)if(it=Wg[rt],st=it.interleaved,st!==null){it.interleaved=null;var lt=st.next,ct=it.pending;if(ct!==null){var ut=ct.next;ct.next=lt,st.next=ut}it.pending=st}Wg=null}return nt}function Nk(nt,rt){do{var it=Y$2;try{if(Qg(),Ph.current=ai$1,Sh){for(var st=N$4.memoizedState;st!==null;){var lt=st.queue;lt!==null&&(lt.pending=null),st=st.next}Sh=!1}if(Rh=0,P$3=O$3=N$4=null,Th=!1,Uh=0,ok.current=null,it===null||it.return===null){T$5=1,qk=rt,Y$2=null;break}e:{var ct=nt,ut=it.return,dt=it,ht=rt;if(rt=Z$2,dt.flags|=32768,ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var pt=ht,ft=dt,mt=ft.tag;if(!(ft.mode&1)&&(mt===0||mt===11||mt===15)){var gt=ft.alternate;gt?(ft.updateQueue=gt.updateQueue,ft.memoizedState=gt.memoizedState,ft.lanes=gt.lanes):(ft.updateQueue=null,ft.memoizedState=null)}var xt=Vi(ut);if(xt!==null){xt.flags&=-257,Wi(xt,ut,dt,ct,rt),xt.mode&1&&Ti(ct,pt,rt),rt=xt,ht=pt;var yt=rt.updateQueue;if(yt===null){var vt=new Set;vt.add(ht),rt.updateQueue=vt}else yt.add(ht);break e}else{if(!(rt&1)){Ti(ct,pt,rt),uj();break e}ht=Error(p$5(426))}}else if(I$9&&dt.mode&1){var St=Vi(ut);if(St!==null){!(St.flags&65536)&&(St.flags|=256),Wi(St,ut,dt,ct,rt),Jg(Ki(ht,dt));break e}}ct=ht=Ki(ht,dt),T$5!==4&&(T$5=2),tk===null?tk=[ct]:tk.push(ct),ct=ut;do{switch(ct.tag){case 3:ct.flags|=65536,rt&=-rt,ct.lanes|=rt;var Et=Oi(ct,ht,rt);fh(ct,Et);break e;case 1:dt=ht;var wt=ct.type,Rt=ct.stateNode;if(!(ct.flags&128)&&(typeof wt.getDerivedStateFromError=="function"||Rt!==null&&typeof Rt.componentDidCatch=="function"&&(Si===null||!Si.has(Rt)))){ct.flags|=65536,rt&=-rt,ct.lanes|=rt;var Tt=Ri(ct,dt,rt);fh(ct,Tt);break e}}ct=ct.return}while(ct!==null)}Tk(it)}catch(It){rt=It,Y$2===it&&it!==null&&(Y$2=it=it.return);continue}break}while(!0)}function Kk(){var nt=nk.current;return nk.current=ai$1,nt===null?ai$1:nt}function uj(){(T$5===0||T$5===3||T$5===2)&&(T$5=4),R$3===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(nt,rt){var it=K$1;K$1|=2;var st=Kk();(R$3!==nt||Z$2!==rt)&&(vk=null,Lk(nt,rt));do try{Uk();break}catch(lt){Nk(nt,lt)}while(!0);if(Qg(),K$1=it,nk.current=st,Y$2!==null)throw Error(p$5(261));return R$3=null,Z$2=0,T$5}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(nt){var rt=Wk(nt.alternate,nt,gj);nt.memoizedProps=nt.pendingProps,rt===null?Tk(nt):Y$2=rt,ok.current=null}function Tk(nt){var rt=nt;do{var it=rt.alternate;if(nt=rt.return,rt.flags&32768){if(it=Jj(it,rt),it!==null){it.flags&=32767,Y$2=it;return}if(nt!==null)nt.flags|=32768,nt.subtreeFlags=0,nt.deletions=null;else{T$5=6,Y$2=null;return}}else if(it=Fj(it,rt,gj),it!==null){Y$2=it;return}if(rt=rt.sibling,rt!==null){Y$2=rt;return}Y$2=rt=nt}while(rt!==null);T$5===0&&(T$5=5)}function Qk(nt,rt,it){var st=C$3,lt=pk.transition;try{pk.transition=null,C$3=1,Xk(nt,rt,it,st)}finally{pk.transition=lt,C$3=st}return null}function Xk(nt,rt,it,st){do Ik();while(xk!==null);if(K$1&6)throw Error(p$5(327));it=nt.finishedWork;var lt=nt.finishedLanes;if(it===null)return null;if(nt.finishedWork=null,nt.finishedLanes=0,it===nt.current)throw Error(p$5(177));nt.callbackNode=null,nt.callbackPriority=0;var ct=it.lanes|it.childLanes;if(Bc(nt,ct),nt===R$3&&(Y$2=R$3=null,Z$2=0),!(it.subtreeFlags&2064)&&!(it.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),ct=(it.flags&15990)!==0,it.subtreeFlags&15990||ct){ct=pk.transition,pk.transition=null;var ut=C$3;C$3=1;var dt=K$1;K$1|=4,ok.current=null,Pj(nt,it),ek(it,nt),Oe(Df),dd=!!Cf,Df=Cf=null,nt.current=it,ik(it),dc(),K$1=dt,C$3=ut,pk.transition=ct}else nt.current=it;if(wk&&(wk=!1,xk=nt,yk=lt),ct=nt.pendingLanes,ct===0&&(Si=null),mc(it.stateNode),Ek(nt,B$2()),rt!==null)for(st=nt.onRecoverableError,it=0;it<rt.length;it++)lt=rt[it],st(lt.value,{componentStack:lt.stack,digest:lt.digest});if(Pi)throw Pi=!1,nt=Qi,Qi=null,nt;return yk&1&&nt.tag!==0&&Ik(),ct=nt.pendingLanes,ct&1?nt===Ak?zk++:(zk=0,Ak=nt):zk=0,jg(),null}function Ik(){if(xk!==null){var nt=Dc(yk),rt=pk.transition,it=C$3;try{if(pk.transition=null,C$3=16>nt?16:nt,xk===null)var st=!1;else{if(nt=xk,xk=null,yk=0,K$1&6)throw Error(p$5(331));var lt=K$1;for(K$1|=4,V$1=nt.current;V$1!==null;){var ct=V$1,ut=ct.child;if(V$1.flags&16){var dt=ct.deletions;if(dt!==null){for(var ht=0;ht<dt.length;ht++){var pt=dt[ht];for(V$1=pt;V$1!==null;){var ft=V$1;switch(ft.tag){case 0:case 11:case 15:Qj(8,ft,ct)}var mt=ft.child;if(mt!==null)mt.return=ft,V$1=mt;else for(;V$1!==null;){ft=V$1;var gt=ft.sibling,xt=ft.return;if(Tj(ft),ft===pt){V$1=null;break}if(gt!==null){gt.return=xt,V$1=gt;break}V$1=xt}}}var yt=ct.alternate;if(yt!==null){var vt=yt.child;if(vt!==null){yt.child=null;do{var St=vt.sibling;vt.sibling=null,vt=St}while(vt!==null)}}V$1=ct}}if(ct.subtreeFlags&2064&&ut!==null)ut.return=ct,V$1=ut;else e:for(;V$1!==null;){if(ct=V$1,ct.flags&2048)switch(ct.tag){case 0:case 11:case 15:Qj(9,ct,ct.return)}var Et=ct.sibling;if(Et!==null){Et.return=ct.return,V$1=Et;break e}V$1=ct.return}}var wt=nt.current;for(V$1=wt;V$1!==null;){ut=V$1;var Rt=ut.child;if(ut.subtreeFlags&2064&&Rt!==null)Rt.return=ut,V$1=Rt;else e:for(ut=wt;V$1!==null;){if(dt=V$1,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Rj(9,dt)}}catch(It){W$1(dt,dt.return,It)}if(dt===ut){V$1=null;break e}var Tt=dt.sibling;if(Tt!==null){Tt.return=dt.return,V$1=Tt;break e}V$1=dt.return}}if(K$1=lt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,nt)}catch{}st=!0}return st}finally{C$3=it,pk.transition=rt}}return!1}function Yk(nt,rt,it){rt=Ki(it,rt),rt=Oi(nt,rt,1),nt=dh(nt,rt,1),rt=L$1(),nt!==null&&(Ac(nt,1,rt),Ek(nt,rt))}function W$1(nt,rt,it){if(nt.tag===3)Yk(nt,nt,it);else for(;rt!==null;){if(rt.tag===3){Yk(rt,nt,it);break}else if(rt.tag===1){var st=rt.stateNode;if(typeof rt.type.getDerivedStateFromError=="function"||typeof st.componentDidCatch=="function"&&(Si===null||!Si.has(st))){nt=Ki(it,nt),nt=Ri(rt,nt,1),rt=dh(rt,nt,1),nt=L$1(),rt!==null&&(Ac(rt,1,nt),Ek(rt,nt));break}}rt=rt.return}}function Ui(nt,rt,it){var st=nt.pingCache;st!==null&&st.delete(rt),rt=L$1(),nt.pingedLanes|=nt.suspendedLanes&it,R$3===nt&&(Z$2&it)===it&&(T$5===4||T$5===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(nt,0):sk|=it),Ek(nt,rt)}function Zk(nt,rt){rt===0&&(nt.mode&1?(rt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):rt=1);var it=L$1();nt=Zg(nt,rt),nt!==null&&(Ac(nt,rt,it),Ek(nt,it))}function vj(nt){var rt=nt.memoizedState,it=0;rt!==null&&(it=rt.retryLane),Zk(nt,it)}function ck$1(nt,rt){var it=0;switch(nt.tag){case 13:var st=nt.stateNode,lt=nt.memoizedState;lt!==null&&(it=lt.retryLane);break;case 19:st=nt.stateNode;break;default:throw Error(p$5(314))}st!==null&&st.delete(rt),Zk(nt,it)}var Wk;Wk=function(nt,rt,it){if(nt!==null)if(nt.memoizedProps!==rt.pendingProps||Wf.current)Ug=!0;else{if(!(nt.lanes&it)&&!(rt.flags&128))return Ug=!1,zj(nt,rt,it);Ug=!!(nt.flags&131072)}else Ug=!1,I$9&&rt.flags&1048576&&ug(rt,ng,rt.index);switch(rt.lanes=0,rt.tag){case 2:var st=rt.type;jj(nt,rt),nt=rt.pendingProps;var lt=Yf(rt,H$2.current);Tg(rt,it),lt=Xh(null,rt,st,nt,lt,it);var ct=bi$1();return rt.flags|=1,typeof lt=="object"&&lt!==null&&typeof lt.render=="function"&&lt.$$typeof===void 0?(rt.tag=1,rt.memoizedState=null,rt.updateQueue=null,Zf(st)?(ct=!0,cg$1(rt)):ct=!1,rt.memoizedState=lt.state!==null&&lt.state!==void 0?lt.state:null,ah$1(rt),lt.updater=nh,rt.stateNode=lt,lt._reactInternals=rt,rh(rt,st,nt,it),rt=kj(null,rt,st,!0,ct,it)):(rt.tag=0,I$9&&ct&&vg(rt),Yi(null,rt,lt,it),rt=rt.child),rt;case 16:st=rt.elementType;e:{switch(jj(nt,rt),nt=rt.pendingProps,lt=st._init,st=lt(st._payload),rt.type=st,lt=rt.tag=$k(st),nt=Lg(st,nt),lt){case 0:rt=dj(null,rt,st,nt,it);break e;case 1:rt=ij(null,rt,st,nt,it);break e;case 11:rt=Zi(null,rt,st,nt,it);break e;case 14:rt=aj$1(null,rt,st,Lg(st.type,nt),it);break e}throw Error(p$5(306,st,""))}return rt;case 0:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),dj(nt,rt,st,lt,it);case 1:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),ij(nt,rt,st,lt,it);case 3:e:{if(lj(rt),nt===null)throw Error(p$5(387));st=rt.pendingProps,ct=rt.memoizedState,lt=ct.element,bh$1(nt,rt),gh(rt,st,null,it);var ut=rt.memoizedState;if(st=ut.element,ct.isDehydrated)if(ct={element:st,isDehydrated:!1,cache:ut.cache,pendingSuspenseBoundaries:ut.pendingSuspenseBoundaries,transitions:ut.transitions},rt.updateQueue.baseState=ct,rt.memoizedState=ct,rt.flags&256){lt=Ki(Error(p$5(423)),rt),rt=mj(nt,rt,st,it,lt);break e}else if(st!==lt){lt=Ki(Error(p$5(424)),rt),rt=mj(nt,rt,st,it,lt);break e}else for(yg=Lf(rt.stateNode.containerInfo.firstChild),xg=rt,I$9=!0,zg=null,it=Ch(rt,null,st,it),rt.child=it;it;)it.flags=it.flags&-3|4096,it=it.sibling;else{if(Ig(),st===lt){rt=$i(nt,rt,it);break e}Yi(nt,rt,st,it)}rt=rt.child}return rt;case 5:return Kh(rt),nt===null&&Eg(rt),st=rt.type,lt=rt.pendingProps,ct=nt!==null?nt.memoizedProps:null,ut=lt.children,Ef(st,lt)?ut=null:ct!==null&&Ef(st,ct)&&(rt.flags|=32),hj(nt,rt),Yi(nt,rt,ut,it),rt.child;case 6:return nt===null&&Eg(rt),null;case 13:return pj(nt,rt,it);case 4:return Ih(rt,rt.stateNode.containerInfo),st=rt.pendingProps,nt===null?rt.child=Bh(rt,null,st,it):Yi(nt,rt,st,it),rt.child;case 11:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),Zi(nt,rt,st,lt,it);case 7:return Yi(nt,rt,rt.pendingProps,it),rt.child;case 8:return Yi(nt,rt,rt.pendingProps.children,it),rt.child;case 12:return Yi(nt,rt,rt.pendingProps.children,it),rt.child;case 10:e:{if(st=rt.type._context,lt=rt.pendingProps,ct=rt.memoizedProps,ut=lt.value,G$2(Mg,st._currentValue),st._currentValue=ut,ct!==null)if(He$3(ct.value,ut)){if(ct.children===lt.children&&!Wf.current){rt=$i(nt,rt,it);break e}}else for(ct=rt.child,ct!==null&&(ct.return=rt);ct!==null;){var dt=ct.dependencies;if(dt!==null){ut=ct.child;for(var ht=dt.firstContext;ht!==null;){if(ht.context===st){if(ct.tag===1){ht=ch$1(-1,it&-it),ht.tag=2;var pt=ct.updateQueue;if(pt!==null){pt=pt.shared;var ft=pt.pending;ft===null?ht.next=ht:(ht.next=ft.next,ft.next=ht),pt.pending=ht}}ct.lanes|=it,ht=ct.alternate,ht!==null&&(ht.lanes|=it),Sg(ct.return,it,rt),dt.lanes|=it;break}ht=ht.next}}else if(ct.tag===10)ut=ct.type===rt.type?null:ct.child;else if(ct.tag===18){if(ut=ct.return,ut===null)throw Error(p$5(341));ut.lanes|=it,dt=ut.alternate,dt!==null&&(dt.lanes|=it),Sg(ut,it,rt),ut=ct.sibling}else ut=ct.child;if(ut!==null)ut.return=ct;else for(ut=ct;ut!==null;){if(ut===rt){ut=null;break}if(ct=ut.sibling,ct!==null){ct.return=ut.return,ut=ct;break}ut=ut.return}ct=ut}Yi(nt,rt,lt.children,it),rt=rt.child}return rt;case 9:return lt=rt.type,st=rt.pendingProps.children,Tg(rt,it),lt=Vg(lt),st=st(lt),rt.flags|=1,Yi(nt,rt,st,it),rt.child;case 14:return st=rt.type,lt=Lg(st,rt.pendingProps),lt=Lg(st.type,lt),aj$1(nt,rt,st,lt,it);case 15:return cj$1(nt,rt,rt.type,rt.pendingProps,it);case 17:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),jj(nt,rt),rt.tag=1,Zf(st)?(nt=!0,cg$1(rt)):nt=!1,Tg(rt,it),ph(rt,st,lt),rh(rt,st,lt,it),kj(null,rt,st,!0,nt,it);case 19:return yj(nt,rt,it);case 22:return ej(nt,rt,it)}throw Error(p$5(156,rt.tag))};function Gk(nt,rt){return ac$1(nt,rt)}function al$1(nt,rt,it,st){this.tag=nt,this.key=it,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=rt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=st,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(nt,rt,it,st){return new al$1(nt,rt,it,st)}function bj$1(nt){return nt=nt.prototype,!(!nt||!nt.isReactComponent)}function $k(nt){if(typeof nt=="function")return bj$1(nt)?1:0;if(nt!=null){if(nt=nt.$$typeof,nt===Da)return 11;if(nt===Ga)return 14}return 2}function wh(nt,rt){var it=nt.alternate;return it===null?(it=Bg(nt.tag,rt,nt.key,nt.mode),it.elementType=nt.elementType,it.type=nt.type,it.stateNode=nt.stateNode,it.alternate=nt,nt.alternate=it):(it.pendingProps=rt,it.type=nt.type,it.flags=0,it.subtreeFlags=0,it.deletions=null),it.flags=nt.flags&14680064,it.childLanes=nt.childLanes,it.lanes=nt.lanes,it.child=nt.child,it.memoizedProps=nt.memoizedProps,it.memoizedState=nt.memoizedState,it.updateQueue=nt.updateQueue,rt=nt.dependencies,it.dependencies=rt===null?null:{lanes:rt.lanes,firstContext:rt.firstContext},it.sibling=nt.sibling,it.index=nt.index,it.ref=nt.ref,it}function yh(nt,rt,it,st,lt,ct){var ut=2;if(st=nt,typeof nt=="function")bj$1(nt)&&(ut=1);else if(typeof nt=="string")ut=5;else e:switch(nt){case ya:return Ah(it.children,lt,ct,rt);case za:ut=8,lt|=8;break;case Aa:return nt=Bg(12,it,rt,lt|2),nt.elementType=Aa,nt.lanes=ct,nt;case Ea:return nt=Bg(13,it,rt,lt),nt.elementType=Ea,nt.lanes=ct,nt;case Fa:return nt=Bg(19,it,rt,lt),nt.elementType=Fa,nt.lanes=ct,nt;case Ia:return qj(it,lt,ct,rt);default:if(typeof nt=="object"&&nt!==null)switch(nt.$$typeof){case Ba:ut=10;break e;case Ca:ut=9;break e;case Da:ut=11;break e;case Ga:ut=14;break e;case Ha:ut=16,st=null;break e}throw Error(p$5(130,nt==null?nt:typeof nt,""))}return rt=Bg(ut,it,rt,lt),rt.elementType=nt,rt.type=st,rt.lanes=ct,rt}function Ah(nt,rt,it,st){return nt=Bg(7,nt,st,rt),nt.lanes=it,nt}function qj(nt,rt,it,st){return nt=Bg(22,nt,st,rt),nt.elementType=Ia,nt.lanes=it,nt.stateNode={isHidden:!1},nt}function xh(nt,rt,it){return nt=Bg(6,nt,null,rt),nt.lanes=it,nt}function zh(nt,rt,it){return rt=Bg(4,nt.children!==null?nt.children:[],nt.key,rt),rt.lanes=it,rt.stateNode={containerInfo:nt.containerInfo,pendingChildren:null,implementation:nt.implementation},rt}function bl$1(nt,rt,it,st,lt){this.tag=rt,this.containerInfo=nt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=st,this.onRecoverableError=lt,this.mutableSourceEagerHydrationData=null}function cl$1(nt,rt,it,st,lt,ct,ut,dt,ht){return nt=new bl$1(nt,rt,it,dt,ht),rt===1?(rt=1,ct===!0&&(rt|=8)):rt=0,ct=Bg(3,null,null,rt),nt.current=ct,ct.stateNode=nt,ct.memoizedState={element:st,isDehydrated:it,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(ct),nt}function dl(nt,rt,it){var st=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:st==null?null:""+st,children:nt,containerInfo:rt,implementation:it}}function el(nt){if(!nt)return Vf;nt=nt._reactInternals;e:{if(Vb(nt)!==nt||nt.tag!==1)throw Error(p$5(170));var rt=nt;do{switch(rt.tag){case 3:rt=rt.stateNode.context;break e;case 1:if(Zf(rt.type)){rt=rt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}rt=rt.return}while(rt!==null);throw Error(p$5(171))}if(nt.tag===1){var it=nt.type;if(Zf(it))return bg$1(nt,it,rt)}return rt}function fl(nt,rt,it,st,lt,ct,ut,dt,ht){return nt=cl$1(it,st,!0,nt,lt,ct,ut,dt,ht),nt.context=el(null),it=nt.current,st=L$1(),lt=lh(it),ct=ch$1(st,lt),ct.callback=rt??null,dh(it,ct,lt),nt.current.lanes=lt,Ac(nt,lt,st),Ek(nt,st),nt}function gl(nt,rt,it,st){var lt=rt.current,ct=L$1(),ut=lh(lt);return it=el(it),rt.context===null?rt.context=it:rt.pendingContext=it,rt=ch$1(ct,ut),rt.payload={element:nt},st=st===void 0?null:st,st!==null&&(rt.callback=st),nt=dh(lt,rt,ut),nt!==null&&(mh(nt,lt,ut,ct),eh(nt,lt,ut)),ut}function hl(nt){if(nt=nt.current,!nt.child)return null;switch(nt.child.tag){case 5:return nt.child.stateNode;default:return nt.child.stateNode}}function il(nt,rt){if(nt=nt.memoizedState,nt!==null&&nt.dehydrated!==null){var it=nt.retryLane;nt.retryLane=it!==0&&it<rt?it:rt}}function jl(nt,rt){il(nt,rt),(nt=nt.alternate)&&il(nt,rt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(nt){console.error(nt)};function ml(nt){this._internalRoot=nt}nl.prototype.render=ml.prototype.render=function(nt){var rt=this._internalRoot;if(rt===null)throw Error(p$5(409));gl(nt,rt,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var nt=this._internalRoot;if(nt!==null){this._internalRoot=null;var rt=nt.containerInfo;Sk(function(){gl(null,nt,null,null)}),rt[uf]=null}};function nl(nt){this._internalRoot=nt}nl.prototype.unstable_scheduleHydration=function(nt){if(nt){var rt=Hc();nt={blockedOn:null,target:nt,priority:rt};for(var it=0;it<Qc.length&&rt!==0&&rt<Qc[it].priority;it++);Qc.splice(it,0,nt),it===0&&Vc(nt)}};function ol(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11)}function pl(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11&&(nt.nodeType!==8||nt.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(nt,rt,it,st,lt){if(lt){if(typeof st=="function"){var ct=st;st=function(){var pt=hl(ut);ct.call(pt)}}var ut=fl(rt,st,nt,0,null,!1,!1,"",ql);return nt._reactRootContainer=ut,nt[uf]=ut.current,sf(nt.nodeType===8?nt.parentNode:nt),Sk(),ut}for(;lt=nt.lastChild;)nt.removeChild(lt);if(typeof st=="function"){var dt=st;st=function(){var pt=hl(ht);dt.call(pt)}}var ht=cl$1(nt,0,!1,null,null,!1,!1,"",ql);return nt._reactRootContainer=ht,nt[uf]=ht.current,sf(nt.nodeType===8?nt.parentNode:nt),Sk(function(){gl(rt,ht,it,st)}),ht}function sl(nt,rt,it,st,lt){var ct=it._reactRootContainer;if(ct){var ut=ct;if(typeof lt=="function"){var dt=lt;lt=function(){var ht=hl(ut);dt.call(ht)}}gl(rt,ut,nt,lt)}else ut=rl(it,rt,nt,lt,st);return hl(ut)}Ec=function(nt){switch(nt.tag){case 3:var rt=nt.stateNode;if(rt.current.memoizedState.isDehydrated){var it=tc(rt.pendingLanes);it!==0&&(Cc(rt,it|1),Ek(rt,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var st=Zg(nt,1);if(st!==null){var lt=L$1();mh(st,nt,1,lt)}}),jl(nt,1)}};Fc=function(nt){if(nt.tag===13){var rt=Zg(nt,134217728);if(rt!==null){var it=L$1();mh(rt,nt,134217728,it)}jl(nt,134217728)}};Gc=function(nt){if(nt.tag===13){var rt=lh(nt),it=Zg(nt,rt);if(it!==null){var st=L$1();mh(it,nt,rt,st)}jl(nt,rt)}};Hc=function(){return C$3};Ic=function(nt,rt){var it=C$3;try{return C$3=nt,rt()}finally{C$3=it}};yb=function(nt,rt,it){switch(rt){case"input":if(bb$1(nt,it),rt=it.name,it.type==="radio"&&rt!=null){for(it=nt;it.parentNode;)it=it.parentNode;for(it=it.querySelectorAll("input[name="+JSON.stringify(""+rt)+'][type="radio"]'),rt=0;rt<it.length;rt++){var st=it[rt];if(st!==nt&&st.form===nt.form){var lt=Db(st);if(!lt)throw Error(p$5(90));Wa(st),bb$1(st,lt)}}}break;case"textarea":ib(nt,it);break;case"select":rt=it.value,rt!=null&&fb(nt,!!it.multiple,rt,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(nt){return nt=Zb(nt),nt===null?null:nt.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(nt,rt){var it=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(rt))throw Error(p$5(200));return dl(nt,rt,null,it)};reactDom_production_min.createRoot=function(nt,rt){if(!ol(nt))throw Error(p$5(299));var it=!1,st="",lt=ll;return rt!=null&&(rt.unstable_strictMode===!0&&(it=!0),rt.identifierPrefix!==void 0&&(st=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(lt=rt.onRecoverableError)),rt=cl$1(nt,1,!1,null,null,it,!1,st,lt),nt[uf]=rt.current,sf(nt.nodeType===8?nt.parentNode:nt),new ml(rt)};reactDom_production_min.findDOMNode=function(nt){if(nt==null)return null;if(nt.nodeType===1)return nt;var rt=nt._reactInternals;if(rt===void 0)throw typeof nt.render=="function"?Error(p$5(188)):(nt=Object.keys(nt).join(","),Error(p$5(268,nt)));return nt=Zb(rt),nt=nt===null?null:nt.stateNode,nt};reactDom_production_min.flushSync=function(nt){return Sk(nt)};reactDom_production_min.hydrate=function(nt,rt,it){if(!pl(rt))throw Error(p$5(200));return sl(null,nt,rt,!0,it)};reactDom_production_min.hydrateRoot=function(nt,rt,it){if(!ol(nt))throw Error(p$5(405));var st=it!=null&&it.hydratedSources||null,lt=!1,ct="",ut=ll;if(it!=null&&(it.unstable_strictMode===!0&&(lt=!0),it.identifierPrefix!==void 0&&(ct=it.identifierPrefix),it.onRecoverableError!==void 0&&(ut=it.onRecoverableError)),rt=fl(rt,null,nt,1,it??null,lt,!1,ct,ut),nt[uf]=rt.current,sf(nt),st)for(nt=0;nt<st.length;nt++)it=st[nt],lt=it._getVersion,lt=lt(it._source),rt.mutableSourceEagerHydrationData==null?rt.mutableSourceEagerHydrationData=[it,lt]:rt.mutableSourceEagerHydrationData.push(it,lt);return new nl(rt)};reactDom_production_min.render=function(nt,rt,it){if(!pl(rt))throw Error(p$5(200));return sl(null,nt,rt,!1,it)};reactDom_production_min.unmountComponentAtNode=function(nt){if(!pl(nt))throw Error(p$5(40));return nt._reactRootContainer?(Sk(function(){sl(null,null,nt,!1,function(){nt._reactRootContainer=null,nt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(nt,rt,it,st){if(!pl(it))throw Error(p$5(200));if(nt==null||nt._reactInternals===void 0)throw Error(p$5(38));return sl(nt,rt,it,!1,st)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(nt){console.error(nt)}}checkDCE(),reactDom$1.exports=reactDom_production_min;var reactDomExports=reactDom$1.exports;const reactDom=getDefaultExportFromCjs(reactDomExports),ReactDOM=_mergeNamespaces({__proto__:null,default:reactDom},[reactDomExports]);var m$5=reactDomExports;client.createRoot=m$5.createRoot,client.hydrateRoot=m$5.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$5.apply(this,arguments)}var Action;(function(nt){nt.Pop="POP",nt.Push="PUSH",nt.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(nt){nt===void 0&&(nt={});function rt(st,lt){let{pathname:ct,search:ut,hash:dt}=st.location;return createLocation("",{pathname:ct,search:ut,hash:dt},lt.state&&lt.state.usr||null,lt.state&&lt.state.key||"default")}function it(st,lt){return typeof lt=="string"?lt:createPath(lt)}return getUrlBasedHistory(rt,it,null,nt)}function invariant$1(nt,rt){if(nt===!1||nt===null||typeof nt>"u")throw new Error(rt)}function warning$1(nt,rt){if(!nt){typeof console<"u"&&console.warn(rt);try{throw new Error(rt)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(nt,rt){return{usr:nt.state,key:nt.key,idx:rt}}function createLocation(nt,rt,it,st){return it===void 0&&(it=null),_extends$5({pathname:typeof nt=="string"?nt:nt.pathname,search:"",hash:""},typeof rt=="string"?parsePath(rt):rt,{state:it,key:rt&&rt.key||st||createKey()})}function createPath(nt){let{pathname:rt="/",search:it="",hash:st=""}=nt;return it&&it!=="?"&&(rt+=it.charAt(0)==="?"?it:"?"+it),st&&st!=="#"&&(rt+=st.charAt(0)==="#"?st:"#"+st),rt}function parsePath(nt){let rt={};if(nt){let it=nt.indexOf("#");it>=0&&(rt.hash=nt.substr(it),nt=nt.substr(0,it));let st=nt.indexOf("?");st>=0&&(rt.search=nt.substr(st),nt=nt.substr(0,st)),nt&&(rt.pathname=nt)}return rt}function getUrlBasedHistory(nt,rt,it,st){st===void 0&&(st={});let{window:lt=document.defaultView,v5Compat:ct=!1}=st,ut=lt.history,dt=Action.Pop,ht=null,pt=ft();pt==null&&(pt=0,ut.replaceState(_extends$5({},ut.state,{idx:pt}),""));function ft(){return(ut.state||{idx:null}).idx}function mt(){dt=Action.Pop;let St=ft(),Et=St==null?null:St-pt;pt=St,ht&&ht({action:dt,location:vt.location,delta:Et})}function gt(St,Et){dt=Action.Push;let wt=createLocation(vt.location,St,Et);it&&it(wt,St),pt=ft()+1;let Rt=getHistoryState(wt,pt),Tt=vt.createHref(wt);try{ut.pushState(Rt,"",Tt)}catch(It){if(It instanceof DOMException&&It.name==="DataCloneError")throw It;lt.location.assign(Tt)}ct&&ht&&ht({action:dt,location:vt.location,delta:1})}function xt(St,Et){dt=Action.Replace;let wt=createLocation(vt.location,St,Et);it&&it(wt,St),pt=ft();let Rt=getHistoryState(wt,pt),Tt=vt.createHref(wt);ut.replaceState(Rt,"",Tt),ct&&ht&&ht({action:dt,location:vt.location,delta:0})}function yt(St){let Et=lt.location.origin!=="null"?lt.location.origin:lt.location.href,wt=typeof St=="string"?St:createPath(St);return invariant$1(Et,"No window.location.(origin|href) available to create URL for href: "+wt),new URL(wt,Et)}let vt={get action(){return dt},get location(){return nt(lt,ut)},listen(St){if(ht)throw new Error("A history only accepts one active listener");return lt.addEventListener(PopStateEventType,mt),ht=St,()=>{lt.removeEventListener(PopStateEventType,mt),ht=null}},createHref(St){return rt(lt,St)},createURL:yt,encodeLocation(St){let Et=yt(St);return{pathname:Et.pathname,search:Et.search,hash:Et.hash}},push:gt,replace:xt,go(St){return ut.go(St)}};return vt}var ResultType;(function(nt){nt.data="data",nt.deferred="deferred",nt.redirect="redirect",nt.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(nt){return nt.index===!0}function convertRoutesToDataRoutes(nt,rt,it,st){return it===void 0&&(it=[]),st===void 0&&(st={}),nt.map((lt,ct)=>{let ut=[...it,ct],dt=typeof lt.id=="string"?lt.id:ut.join("-");if(invariant$1(lt.index!==!0||!lt.children,"Cannot specify children on an index route"),invariant$1(!st[dt],'Found a route id collision on id "'+dt+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(lt)){let ht=_extends$5({},lt,rt(lt),{id:dt});return st[dt]=ht,ht}else{let ht=_extends$5({},lt,rt(lt),{id:dt,children:void 0});return st[dt]=ht,lt.children&&(ht.children=convertRoutesToDataRoutes(lt.children,rt,ut,st)),ht}})}function matchRoutes(nt,rt,it){it===void 0&&(it="/");let st=typeof rt=="string"?parsePath(rt):rt,lt=stripBasename(st.pathname||"/",it);if(lt==null)return null;let ct=flattenRoutes(nt);rankRouteBranches(ct);let ut=null;for(let dt=0;ut==null&&dt<ct.length;++dt)ut=matchRouteBranch(ct[dt],safelyDecodeURI(lt));return ut}function convertRouteMatchToUiMatch(nt,rt){let{route:it,pathname:st,params:lt}=nt;return{id:it.id,pathname:st,params:lt,data:rt[it.id],handle:it.handle}}function flattenRoutes(nt,rt,it,st){rt===void 0&&(rt=[]),it===void 0&&(it=[]),st===void 0&&(st="");let lt=(ct,ut,dt)=>{let ht={relativePath:dt===void 0?ct.path||"":dt,caseSensitive:ct.caseSensitive===!0,childrenIndex:ut,route:ct};ht.relativePath.startsWith("/")&&(invariant$1(ht.relativePath.startsWith(st),'Absolute route path "'+ht.relativePath+'" nested under path '+('"'+st+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ht.relativePath=ht.relativePath.slice(st.length));let pt=joinPaths([st,ht.relativePath]),ft=it.concat(ht);ct.children&&ct.children.length>0&&(invariant$1(ct.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+pt+'".')),flattenRoutes(ct.children,rt,ft,pt)),!(ct.path==null&&!ct.index)&&rt.push({path:pt,score:computeScore(pt,ct.index),routesMeta:ft})};return nt.forEach((ct,ut)=>{var dt;if(ct.path===""||!((dt=ct.path)!=null&&dt.includes("?")))lt(ct,ut);else for(let ht of explodeOptionalSegments(ct.path))lt(ct,ut,ht)}),rt}function explodeOptionalSegments(nt){let rt=nt.split("/");if(rt.length===0)return[];let[it,...st]=rt,lt=it.endsWith("?"),ct=it.replace(/\?$/,"");if(st.length===0)return lt?[ct,""]:[ct];let ut=explodeOptionalSegments(st.join("/")),dt=[];return dt.push(...ut.map(ht=>ht===""?ct:[ct,ht].join("/"))),lt&&dt.push(...ut),dt.map(ht=>nt.startsWith("/")&&ht===""?"/":ht)}function rankRouteBranches(nt){nt.sort((rt,it)=>rt.score!==it.score?it.score-rt.score:compareIndexes(rt.routesMeta.map(st=>st.childrenIndex),it.routesMeta.map(st=>st.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=nt=>nt==="*";function computeScore(nt,rt){let it=nt.split("/"),st=it.length;return it.some(isSplat)&&(st+=splatPenalty),rt&&(st+=indexRouteValue),it.filter(lt=>!isSplat(lt)).reduce((lt,ct)=>lt+(paramRe.test(ct)?dynamicSegmentValue:ct===""?emptySegmentValue:staticSegmentValue),st)}function compareIndexes(nt,rt){return nt.length===rt.length&&nt.slice(0,-1).every((st,lt)=>st===rt[lt])?nt[nt.length-1]-rt[rt.length-1]:0}function matchRouteBranch(nt,rt){let{routesMeta:it}=nt,st={},lt="/",ct=[];for(let ut=0;ut<it.length;++ut){let dt=it[ut],ht=ut===it.length-1,pt=lt==="/"?rt:rt.slice(lt.length)||"/",ft=matchPath({path:dt.relativePath,caseSensitive:dt.caseSensitive,end:ht},pt);if(!ft)return null;Object.assign(st,ft.params);let mt=dt.route;ct.push({params:st,pathname:joinPaths([lt,ft.pathname]),pathnameBase:normalizePathname(joinPaths([lt,ft.pathnameBase])),route:mt}),ft.pathnameBase!=="/"&&(lt=joinPaths([lt,ft.pathnameBase]))}return ct}function matchPath(nt,rt){typeof nt=="string"&&(nt={path:nt,caseSensitive:!1,end:!0});let[it,st]=compilePath(nt.path,nt.caseSensitive,nt.end),lt=rt.match(it);if(!lt)return null;let ct=lt[0],ut=ct.replace(/(.)\/+$/,"$1"),dt=lt.slice(1);return{params:st.reduce((pt,ft,mt)=>{let{paramName:gt,isOptional:xt}=ft;if(gt==="*"){let vt=dt[mt]||"";ut=ct.slice(0,ct.length-vt.length).replace(/(.)\/+$/,"$1")}const yt=dt[mt];return xt&&!yt?pt[gt]=void 0:pt[gt]=safelyDecodeURIComponent(yt||"",gt),pt},{}),pathname:ct,pathnameBase:ut,pattern:nt}}function compilePath(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!0),warning$1(nt==="*"||!nt.endsWith("*")||nt.endsWith("/*"),'Route path "'+nt+'" will be treated as if it were '+('"'+nt.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+nt.replace(/\*$/,"/*")+'".'));let st=[],lt="^"+nt.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ut,dt,ht)=>(st.push({paramName:dt,isOptional:ht!=null}),ht?"/?([^\\/]+)?":"/([^\\/]+)"));return nt.endsWith("*")?(st.push({paramName:"*"}),lt+=nt==="*"||nt==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):it?lt+="\\/*$":nt!==""&&nt!=="/"&&(lt+="(?:(?=\\/|$))"),[new RegExp(lt,rt?void 0:"i"),st]}function safelyDecodeURI(nt){try{return decodeURI(nt)}catch(rt){return warning$1(!1,'The URL path "'+nt+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+rt+").")),nt}}function safelyDecodeURIComponent(nt,rt){try{return decodeURIComponent(nt)}catch(it){return warning$1(!1,'The value for the URL param "'+rt+'" will not be decoded because'+(' the string "'+nt+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+it+").")),nt}}function stripBasename(nt,rt){if(rt==="/")return nt;if(!nt.toLowerCase().startsWith(rt.toLowerCase()))return null;let it=rt.endsWith("/")?rt.length-1:rt.length,st=nt.charAt(it);return st&&st!=="/"?null:nt.slice(it)||"/"}function resolvePath(nt,rt){rt===void 0&&(rt="/");let{pathname:it,search:st="",hash:lt=""}=typeof nt=="string"?parsePath(nt):nt;return{pathname:it?it.startsWith("/")?it:resolvePathname(it,rt):rt,search:normalizeSearch(st),hash:normalizeHash(lt)}}function resolvePathname(nt,rt){let it=rt.replace(/\/+$/,"").split("/");return nt.split("/").forEach(lt=>{lt===".."?it.length>1&&it.pop():lt!=="."&&it.push(lt)}),it.length>1?it.join("/"):"/"}function getInvalidPathError(nt,rt,it,st){return"Cannot include a '"+nt+"' character in a manually specified "+("`to."+rt+"` field ["+JSON.stringify(st)+"].  Please separate it out to the ")+("`to."+it+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(nt){return nt.filter((rt,it)=>it===0||rt.route.path&&rt.route.path.length>0)}function getResolveToMatches(nt,rt){let it=getPathContributingMatches(nt);return rt?it.map((st,lt)=>lt===nt.length-1?st.pathname:st.pathnameBase):it.map(st=>st.pathnameBase)}function resolveTo(nt,rt,it,st){st===void 0&&(st=!1);let lt;typeof nt=="string"?lt=parsePath(nt):(lt=_extends$5({},nt),invariant$1(!lt.pathname||!lt.pathname.includes("?"),getInvalidPathError("?","pathname","search",lt)),invariant$1(!lt.pathname||!lt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",lt)),invariant$1(!lt.search||!lt.search.includes("#"),getInvalidPathError("#","search","hash",lt)));let ct=nt===""||lt.pathname==="",ut=ct?"/":lt.pathname,dt;if(ut==null)dt=it;else{let mt=rt.length-1;if(!st&&ut.startsWith("..")){let gt=ut.split("/");for(;gt[0]==="..";)gt.shift(),mt-=1;lt.pathname=gt.join("/")}dt=mt>=0?rt[mt]:"/"}let ht=resolvePath(lt,dt),pt=ut&&ut!=="/"&&ut.endsWith("/"),ft=(ct||ut===".")&&it.endsWith("/");return!ht.pathname.endsWith("/")&&(pt||ft)&&(ht.pathname+="/"),ht}const joinPaths=nt=>nt.join("/").replace(/\/\/+/g,"/"),normalizePathname=nt=>nt.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=nt=>!nt||nt==="?"?"":nt.startsWith("?")?nt:"?"+nt,normalizeHash=nt=>!nt||nt==="#"?"":nt.startsWith("#")?nt:"#"+nt;class ErrorResponseImpl{constructor(rt,it,st,lt){lt===void 0&&(lt=!1),this.status=rt,this.statusText=it||"",this.internal=lt,st instanceof Error?(this.data=st.toString(),this.error=st):this.data=st}}function isRouteErrorResponse(nt){return nt!=null&&typeof nt.status=="number"&&typeof nt.statusText=="string"&&typeof nt.internal=="boolean"&&"data"in nt}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=nt=>({hasErrorBoundary:!!nt.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(nt){const rt=nt.window?nt.window:typeof window<"u"?window:void 0,it=typeof rt<"u"&&typeof rt.document<"u"&&typeof rt.document.createElement<"u",st=!it;invariant$1(nt.routes.length>0,"You must provide a non-empty routes array to createRouter");let lt;if(nt.mapRouteProperties)lt=nt.mapRouteProperties;else if(nt.detectErrorBoundary){let Tr=nt.detectErrorBoundary;lt=xr=>({hasErrorBoundary:Tr(xr)})}else lt=defaultMapRouteProperties;let ct={},ut=convertRoutesToDataRoutes(nt.routes,lt,void 0,ct),dt,ht=nt.basename||"/",pt=_extends$5({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},nt.future),ft=null,mt=new Set,gt=null,xt=null,yt=null,vt=nt.hydrationData!=null,St=matchRoutes(ut,nt.history.location,ht),Et=null;if(St==null){let Tr=getInternalRouterError(404,{pathname:nt.history.location.pathname}),{matches:xr,route:jr}=getShortCircuitMatches(ut);St=xr,Et={[jr.id]:Tr}}let wt,Rt=St.some(Tr=>Tr.route.lazy),Tt=St.some(Tr=>Tr.route.loader);if(Rt)wt=!1;else if(!Tt)wt=!0;else if(pt.v7_partialHydration){let Tr=nt.hydrationData?nt.hydrationData.loaderData:null,xr=nt.hydrationData?nt.hydrationData.errors:null;wt=St.every(jr=>jr.route.loader&&jr.route.loader.hydrate!==!0&&(Tr&&Tr[jr.route.id]!==void 0||xr&&xr[jr.route.id]!==void 0))}else wt=nt.hydrationData!=null;let It,At={historyAction:nt.history.action,location:nt.history.location,matches:St,initialized:wt,navigation:IDLE_NAVIGATION,restoreScrollPosition:nt.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:nt.hydrationData&&nt.hydrationData.loaderData||{},actionData:nt.hydrationData&&nt.hydrationData.actionData||null,errors:nt.hydrationData&&nt.hydrationData.errors||Et,fetchers:new Map,blockers:new Map},Dt=Action.Pop,jt=!1,Ft,Lt=!1,Pt=new Map,Ot=null,Nt=!1,$t=!1,Vt=[],Ut=[],zt=new Map,Bt=0,Ht=-1,Gt=new Map,Kt=new Set,Xt=new Map,or=new Map,tr=new Set,dr=new Map,fr=new Map,Sr=!1;function vr(){if(ft=nt.history.listen(Tr=>{let{action:xr,location:jr,delta:en}=Tr;if(Sr){Sr=!1;return}warning$1(fr.size===0||en!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fn=nr({currentLocation:At.location,nextLocation:jr,historyAction:xr});if(fn&&en!=null){Sr=!0,nt.history.go(en*-1),Cr(fn,{state:"blocked",location:jr,proceed(){Cr(fn,{state:"proceeding",proceed:void 0,reset:void 0,location:jr}),nt.history.go(en)},reset(){let Vn=new Map(At.blockers);Vn.set(fn,IDLE_BLOCKER),gr({blockers:Vn})}});return}return Fr(xr,jr)}),it){restoreAppliedTransitions(rt,Pt);let Tr=()=>persistAppliedTransitions(rt,Pt);rt.addEventListener("pagehide",Tr),Ot=()=>rt.removeEventListener("pagehide",Tr)}return At.initialized||Fr(Action.Pop,At.location,{initialHydration:!0}),It}function mr(){ft&&ft(),Ot&&Ot(),mt.clear(),Ft&&Ft.abort(),At.fetchers.forEach((Tr,xr)=>yn(xr)),At.blockers.forEach((Tr,xr)=>wn(xr))}function hr(Tr){return mt.add(Tr),()=>mt.delete(Tr)}function gr(Tr,xr){xr===void 0&&(xr={}),At=_extends$5({},At,Tr);let jr=[],en=[];pt.v7_fetcherPersist&&At.fetchers.forEach((fn,Vn)=>{fn.state==="idle"&&(tr.has(Vn)?en.push(Vn):jr.push(Vn))}),[...mt].forEach(fn=>fn(At,{deletedFetchers:en,unstable_viewTransitionOpts:xr.viewTransitionOpts,unstable_flushSync:xr.flushSync===!0})),pt.v7_fetcherPersist&&(jr.forEach(fn=>At.fetchers.delete(fn)),en.forEach(fn=>yn(fn)))}function lr(Tr,xr,jr){var en,fn;let{flushSync:Vn}=jr===void 0?{}:jr,Yn=At.actionData!=null&&At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&At.navigation.state==="loading"&&((en=Tr.state)==null?void 0:en._isRedirect)!==!0,Hn;xr.actionData?Object.keys(xr.actionData).length>0?Hn=xr.actionData:Hn=null:Yn?Hn=At.actionData:Hn=null;let Bn=xr.loaderData?mergeLoaderData(At.loaderData,xr.loaderData,xr.matches||[],xr.errors):At.loaderData,es=At.blockers;es.size>0&&(es=new Map(es),es.forEach((zs,ro)=>es.set(ro,IDLE_BLOCKER)));let $s=jt===!0||At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&((fn=Tr.state)==null?void 0:fn._isRedirect)!==!0;dt&&(ut=dt,dt=void 0),Nt||Dt===Action.Pop||(Dt===Action.Push?nt.history.push(Tr,Tr.state):Dt===Action.Replace&&nt.history.replace(Tr,Tr.state));let Ss;if(Dt===Action.Pop){let zs=Pt.get(At.location.pathname);zs&&zs.has(Tr.pathname)?Ss={currentLocation:At.location,nextLocation:Tr}:Pt.has(Tr.pathname)&&(Ss={currentLocation:Tr,nextLocation:At.location})}else if(Lt){let zs=Pt.get(At.location.pathname);zs?zs.add(Tr.pathname):(zs=new Set([Tr.pathname]),Pt.set(At.location.pathname,zs)),Ss={currentLocation:At.location,nextLocation:Tr}}gr(_extends$5({},xr,{actionData:Hn,loaderData:Bn,historyAction:Dt,location:Tr,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Rr(Tr,xr.matches||At.matches),preventScrollReset:$s,blockers:es}),{viewTransitionOpts:Ss,flushSync:Vn===!0}),Dt=Action.Pop,jt=!1,Lt=!1,Nt=!1,$t=!1,Vt=[],Ut=[]}async function Ir(Tr,xr){if(typeof Tr=="number"){nt.history.go(Tr);return}let jr=normalizeTo(At.location,At.matches,ht,pt.v7_prependBasename,Tr,pt.v7_relativeSplatPath,xr==null?void 0:xr.fromRouteId,xr==null?void 0:xr.relative),{path:en,submission:fn,error:Vn}=normalizeNavigateOptions(pt.v7_normalizeFormMethod,!1,jr,xr),Yn=At.location,Hn=createLocation(At.location,en,xr&&xr.state);Hn=_extends$5({},Hn,nt.history.encodeLocation(Hn));let Bn=xr&&xr.replace!=null?xr.replace:void 0,es=Action.Push;Bn===!0?es=Action.Replace:Bn===!1||fn!=null&&isMutationMethod(fn.formMethod)&&fn.formAction===At.location.pathname+At.location.search&&(es=Action.Replace);let $s=xr&&"preventScrollReset"in xr?xr.preventScrollReset===!0:void 0,Ss=(xr&&xr.unstable_flushSync)===!0,zs=nr({currentLocation:Yn,nextLocation:Hn,historyAction:es});if(zs){Cr(zs,{state:"blocked",location:Hn,proceed(){Cr(zs,{state:"proceeding",proceed:void 0,reset:void 0,location:Hn}),Ir(Tr,xr)},reset(){let ro=new Map(At.blockers);ro.set(zs,IDLE_BLOCKER),gr({blockers:ro})}});return}return await Fr(es,Hn,{submission:fn,pendingError:Vn,preventScrollReset:$s,replace:xr&&xr.replace,enableViewTransition:xr&&xr.unstable_viewTransition,flushSync:Ss})}function wr(){if(Wr(),gr({revalidation:"loading"}),At.navigation.state!=="submitting"){if(At.navigation.state==="idle"){Fr(At.historyAction,At.location,{startUninterruptedRevalidation:!0});return}Fr(Dt||At.historyAction,At.navigation.location,{overrideNavigation:At.navigation})}}async function Fr(Tr,xr,jr){Ft&&Ft.abort(),Ft=null,Dt=Tr,Nt=(jr&&jr.startUninterruptedRevalidation)===!0,Cn(At.location,At.matches),jt=(jr&&jr.preventScrollReset)===!0,Lt=(jr&&jr.enableViewTransition)===!0;let en=dt||ut,fn=jr&&jr.overrideNavigation,Vn=matchRoutes(en,xr,ht),Yn=(jr&&jr.flushSync)===!0;if(!Vn){let ro=getInternalRouterError(404,{pathname:xr.pathname}),{matches:Po,route:To}=getShortCircuitMatches(en);Ur(),lr(xr,{matches:Po,loaderData:{},errors:{[To.id]:ro}},{flushSync:Yn});return}if(At.initialized&&!$t&&isHashChangeOnly(At.location,xr)&&!(jr&&jr.submission&&isMutationMethod(jr.submission.formMethod))){lr(xr,{matches:Vn},{flushSync:Yn});return}Ft=new AbortController;let Hn=createClientSideRequest(nt.history,xr,Ft.signal,jr&&jr.submission),Bn,es;if(jr&&jr.pendingError)es={[findNearestBoundary(Vn).route.id]:jr.pendingError};else if(jr&&jr.submission&&isMutationMethod(jr.submission.formMethod)){let ro=await $r(Hn,xr,jr.submission,Vn,{replace:jr.replace,flushSync:Yn});if(ro.shortCircuited)return;Bn=ro.pendingActionData,es=ro.pendingActionError,fn=getLoadingNavigation(xr,jr.submission),Yn=!1,Hn=new Request(Hn.url,{signal:Hn.signal})}let{shortCircuited:$s,loaderData:Ss,errors:zs}=await hn(Hn,xr,Vn,fn,jr&&jr.submission,jr&&jr.fetcherSubmission,jr&&jr.replace,jr&&jr.initialHydration===!0,Yn,Bn,es);$s||(Ft=null,lr(xr,_extends$5({matches:Vn},Bn?{actionData:Bn}:{},{loaderData:Ss,errors:zs})))}async function $r(Tr,xr,jr,en,fn){fn===void 0&&(fn={}),Wr();let Vn=getSubmittingNavigation(xr,jr);gr({navigation:Vn},{flushSync:fn.flushSync===!0});let Yn,Hn=getTargetMatch(en,xr);if(!Hn.route.action&&!Hn.route.lazy)Yn={type:ResultType.error,error:getInternalRouterError(405,{method:Tr.method,pathname:xr.pathname,routeId:Hn.route.id})};else if(Yn=await callLoaderOrAction("action",Tr,Hn,en,ct,lt,ht,pt.v7_relativeSplatPath),Tr.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Yn)){let Bn;return fn&&fn.replace!=null?Bn=fn.replace:Bn=Yn.location===At.location.pathname+At.location.search,await pr(At,Yn,{submission:jr,replace:Bn}),{shortCircuited:!0}}if(isErrorResult(Yn)){let Bn=findNearestBoundary(en,Hn.route.id);return(fn&&fn.replace)!==!0&&(Dt=Action.Push),{pendingActionData:{},pendingActionError:{[Bn.route.id]:Yn.error}}}if(isDeferredResult(Yn))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Hn.route.id]:Yn.data}}}async function hn(Tr,xr,jr,en,fn,Vn,Yn,Hn,Bn,es,$s){let Ss=en||getLoadingNavigation(xr,fn),zs=fn||Vn||getSubmissionFromNavigation(Ss),ro=dt||ut,[Po,To]=getMatchesToLoad(nt.history,At,jr,zs,xr,pt.v7_partialHydration&&Hn===!0,$t,Vt,Ut,tr,Xt,Kt,ro,ht,es,$s);if(Ur(_i=>!(jr&&jr.some(hs=>hs.route.id===_i))||Po&&Po.some(hs=>hs.route.id===_i)),Ht=++Bt,Po.length===0&&To.length===0){let _i=qn();return lr(xr,_extends$5({matches:jr,loaderData:{},errors:$s||null},es?{actionData:es}:{},_i?{fetchers:new Map(At.fetchers)}:{}),{flushSync:Bn}),{shortCircuited:!0}}if(!Nt&&(!pt.v7_partialHydration||!Hn)){To.forEach(hs=>{let Ms=At.fetchers.get(hs.key),Us=getLoadingFetcher(void 0,Ms?Ms.data:void 0);At.fetchers.set(hs.key,Us)});let _i=es||At.actionData;gr(_extends$5({navigation:Ss},_i?Object.keys(_i).length===0?{actionData:null}:{actionData:_i}:{},To.length>0?{fetchers:new Map(At.fetchers)}:{}),{flushSync:Bn})}To.forEach(_i=>{zt.has(_i.key)&&Mn(_i.key),_i.controller&&zt.set(_i.key,_i.controller)});let qo=()=>To.forEach(_i=>Mn(_i.key));Ft&&Ft.signal.addEventListener("abort",qo);let{results:$a,loaderResults:Ll,fetcherResults:Rl}=await Vr(At.matches,jr,Po,To,Tr);if(Tr.signal.aborted)return{shortCircuited:!0};Ft&&Ft.signal.removeEventListener("abort",qo),To.forEach(_i=>zt.delete(_i.key));let Ar=findRedirect($a);if(Ar){if(Ar.idx>=Po.length){let _i=To[Ar.idx-Po.length].key;Kt.add(_i)}return await pr(At,Ar.result,{replace:Yn}),{shortCircuited:!0}}let{loaderData:_n,errors:Pn}=processLoaderData(At,jr,Po,Ll,$s,To,Rl,dr);dr.forEach((_i,hs)=>{_i.subscribe(Ms=>{(Ms||_i.done)&&dr.delete(hs)})});let Tn=qn(),Or=Gr(Ht),ds=Tn||Or||To.length>0;return _extends$5({loaderData:_n,errors:Pn},ds?{fetchers:new Map(At.fetchers)}:{})}function Zr(Tr,xr,jr,en){if(st)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");zt.has(Tr)&&Mn(Tr);let fn=(en&&en.unstable_flushSync)===!0,Vn=dt||ut,Yn=normalizeTo(At.location,At.matches,ht,pt.v7_prependBasename,jr,pt.v7_relativeSplatPath,xr,en==null?void 0:en.relative),Hn=matchRoutes(Vn,Yn,ht);if(!Hn){ln(Tr,xr,getInternalRouterError(404,{pathname:Yn}),{flushSync:fn});return}let{path:Bn,submission:es,error:$s}=normalizeNavigateOptions(pt.v7_normalizeFormMethod,!0,Yn,en);if($s){ln(Tr,xr,$s,{flushSync:fn});return}let Ss=getTargetMatch(Hn,Bn);if(jt=(en&&en.preventScrollReset)===!0,es&&isMutationMethod(es.formMethod)){Qt(Tr,xr,Bn,Ss,Hn,fn,es);return}Xt.set(Tr,{routeId:xr,path:Bn}),Jt(Tr,xr,Bn,Ss,Hn,fn,es)}async function Qt(Tr,xr,jr,en,fn,Vn,Yn){if(Wr(),Xt.delete(Tr),!en.route.action&&!en.route.lazy){let hs=getInternalRouterError(405,{method:Yn.formMethod,pathname:jr,routeId:xr});ln(Tr,xr,hs,{flushSync:Vn});return}let Hn=At.fetchers.get(Tr);zr(Tr,getSubmittingFetcher(Yn,Hn),{flushSync:Vn});let Bn=new AbortController,es=createClientSideRequest(nt.history,jr,Bn.signal,Yn);zt.set(Tr,Bn);let $s=Bt,Ss=await callLoaderOrAction("action",es,en,fn,ct,lt,ht,pt.v7_relativeSplatPath);if(es.signal.aborted){zt.get(Tr)===Bn&&zt.delete(Tr);return}if(pt.v7_fetcherPersist&&tr.has(Tr)){if(isRedirectResult(Ss)||isErrorResult(Ss)){zr(Tr,getDoneFetcher(void 0));return}}else{if(isRedirectResult(Ss))if(zt.delete(Tr),Ht>$s){zr(Tr,getDoneFetcher(void 0));return}else return Kt.add(Tr),zr(Tr,getLoadingFetcher(Yn)),pr(At,Ss,{fetcherSubmission:Yn});if(isErrorResult(Ss)){ln(Tr,xr,Ss.error);return}}if(isDeferredResult(Ss))throw getInternalRouterError(400,{type:"defer-action"});let zs=At.navigation.location||At.location,ro=createClientSideRequest(nt.history,zs,Bn.signal),Po=dt||ut,To=At.navigation.state!=="idle"?matchRoutes(Po,At.navigation.location,ht):At.matches;invariant$1(To,"Didn't find any matches after fetcher action");let qo=++Bt;Gt.set(Tr,qo);let $a=getLoadingFetcher(Yn,Ss.data);At.fetchers.set(Tr,$a);let[Ll,Rl]=getMatchesToLoad(nt.history,At,To,Yn,zs,!1,$t,Vt,Ut,tr,Xt,Kt,Po,ht,{[en.route.id]:Ss.data},void 0);Rl.filter(hs=>hs.key!==Tr).forEach(hs=>{let Ms=hs.key,Us=At.fetchers.get(Ms),Hs=getLoadingFetcher(void 0,Us?Us.data:void 0);At.fetchers.set(Ms,Hs),zt.has(Ms)&&Mn(Ms),hs.controller&&zt.set(Ms,hs.controller)}),gr({fetchers:new Map(At.fetchers)});let Ar=()=>Rl.forEach(hs=>Mn(hs.key));Bn.signal.addEventListener("abort",Ar);let{results:_n,loaderResults:Pn,fetcherResults:Tn}=await Vr(At.matches,To,Ll,Rl,ro);if(Bn.signal.aborted)return;Bn.signal.removeEventListener("abort",Ar),Gt.delete(Tr),zt.delete(Tr),Rl.forEach(hs=>zt.delete(hs.key));let Or=findRedirect(_n);if(Or){if(Or.idx>=Ll.length){let hs=Rl[Or.idx-Ll.length].key;Kt.add(hs)}return pr(At,Or.result)}let{loaderData:ds,errors:_i}=processLoaderData(At,At.matches,Ll,Pn,void 0,Rl,Tn,dr);if(At.fetchers.has(Tr)){let hs=getDoneFetcher(Ss.data);At.fetchers.set(Tr,hs)}Gr(qo),At.navigation.state==="loading"&&qo>Ht?(invariant$1(Dt,"Expected pending action"),Ft&&Ft.abort(),lr(At.navigation.location,{matches:To,loaderData:ds,errors:_i,fetchers:new Map(At.fetchers)})):(gr({errors:_i,loaderData:mergeLoaderData(At.loaderData,ds,To,_i),fetchers:new Map(At.fetchers)}),$t=!1)}async function Jt(Tr,xr,jr,en,fn,Vn,Yn){let Hn=At.fetchers.get(Tr);zr(Tr,getLoadingFetcher(Yn,Hn?Hn.data:void 0),{flushSync:Vn});let Bn=new AbortController,es=createClientSideRequest(nt.history,jr,Bn.signal);zt.set(Tr,Bn);let $s=Bt,Ss=await callLoaderOrAction("loader",es,en,fn,ct,lt,ht,pt.v7_relativeSplatPath);if(isDeferredResult(Ss)&&(Ss=await resolveDeferredData(Ss,es.signal,!0)||Ss),zt.get(Tr)===Bn&&zt.delete(Tr),!es.signal.aborted){if(tr.has(Tr)){zr(Tr,getDoneFetcher(void 0));return}if(isRedirectResult(Ss))if(Ht>$s){zr(Tr,getDoneFetcher(void 0));return}else{Kt.add(Tr),await pr(At,Ss);return}if(isErrorResult(Ss)){ln(Tr,xr,Ss.error);return}invariant$1(!isDeferredResult(Ss),"Unhandled fetcher deferred data"),zr(Tr,getDoneFetcher(Ss.data))}}async function pr(Tr,xr,jr){let{submission:en,fetcherSubmission:fn,replace:Vn}=jr===void 0?{}:jr;xr.revalidate&&($t=!0);let Yn=createLocation(Tr.location,xr.location,{_isRedirect:!0});if(invariant$1(Yn,"Expected a location on the redirect navigation"),it){let zs=!1;if(xr.reloadDocument)zs=!0;else if(ABSOLUTE_URL_REGEX$1.test(xr.location)){const ro=nt.history.createURL(xr.location);zs=ro.origin!==rt.location.origin||stripBasename(ro.pathname,ht)==null}if(zs){Vn?rt.location.replace(xr.location):rt.location.assign(xr.location);return}}Ft=null;let Hn=Vn===!0?Action.Replace:Action.Push,{formMethod:Bn,formAction:es,formEncType:$s}=Tr.navigation;!en&&!fn&&Bn&&es&&$s&&(en=getSubmissionFromNavigation(Tr.navigation));let Ss=en||fn;if(redirectPreserveMethodStatusCodes.has(xr.status)&&Ss&&isMutationMethod(Ss.formMethod))await Fr(Hn,Yn,{submission:_extends$5({},Ss,{formAction:xr.location}),preventScrollReset:jt});else{let zs=getLoadingNavigation(Yn,en);await Fr(Hn,Yn,{overrideNavigation:zs,fetcherSubmission:fn,preventScrollReset:jt})}}async function Vr(Tr,xr,jr,en,fn){let Vn=await Promise.all([...jr.map(Bn=>callLoaderOrAction("loader",fn,Bn,xr,ct,lt,ht,pt.v7_relativeSplatPath)),...en.map(Bn=>Bn.matches&&Bn.match&&Bn.controller?callLoaderOrAction("loader",createClientSideRequest(nt.history,Bn.path,Bn.controller.signal),Bn.match,Bn.matches,ct,lt,ht,pt.v7_relativeSplatPath):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Bn.path})})]),Yn=Vn.slice(0,jr.length),Hn=Vn.slice(jr.length);return await Promise.all([resolveDeferredResults(Tr,jr,Yn,Yn.map(()=>fn.signal),!1,At.loaderData),resolveDeferredResults(Tr,en.map(Bn=>Bn.match),Hn,en.map(Bn=>Bn.controller?Bn.controller.signal:null),!0)]),{results:Vn,loaderResults:Yn,fetcherResults:Hn}}function Wr(){$t=!0,Vt.push(...Ur()),Xt.forEach((Tr,xr)=>{zt.has(xr)&&(Ut.push(xr),Mn(xr))})}function zr(Tr,xr,jr){jr===void 0&&(jr={}),At.fetchers.set(Tr,xr),gr({fetchers:new Map(At.fetchers)},{flushSync:(jr&&jr.flushSync)===!0})}function ln(Tr,xr,jr,en){en===void 0&&(en={});let fn=findNearestBoundary(At.matches,xr);yn(Tr),gr({errors:{[fn.route.id]:jr},fetchers:new Map(At.fetchers)},{flushSync:(en&&en.flushSync)===!0})}function xn(Tr){return pt.v7_fetcherPersist&&(or.set(Tr,(or.get(Tr)||0)+1),tr.has(Tr)&&tr.delete(Tr)),At.fetchers.get(Tr)||IDLE_FETCHER}function yn(Tr){let xr=At.fetchers.get(Tr);zt.has(Tr)&&!(xr&&xr.state==="loading"&&Gt.has(Tr))&&Mn(Tr),Xt.delete(Tr),Gt.delete(Tr),Kt.delete(Tr),tr.delete(Tr),At.fetchers.delete(Tr)}function Wn(Tr){if(pt.v7_fetcherPersist){let xr=(or.get(Tr)||0)-1;xr<=0?(or.delete(Tr),tr.add(Tr)):or.set(Tr,xr)}else yn(Tr);gr({fetchers:new Map(At.fetchers)})}function Mn(Tr){let xr=zt.get(Tr);invariant$1(xr,"Expected fetch controller: "+Tr),xr.abort(),zt.delete(Tr)}function sn(Tr){for(let xr of Tr){let jr=xn(xr),en=getDoneFetcher(jr.data);At.fetchers.set(xr,en)}}function qn(){let Tr=[],xr=!1;for(let jr of Kt){let en=At.fetchers.get(jr);invariant$1(en,"Expected fetcher: "+jr),en.state==="loading"&&(Kt.delete(jr),Tr.push(jr),xr=!0)}return sn(Tr),xr}function Gr(Tr){let xr=[];for(let[jr,en]of Gt)if(en<Tr){let fn=At.fetchers.get(jr);invariant$1(fn,"Expected fetcher: "+jr),fn.state==="loading"&&(Mn(jr),Gt.delete(jr),xr.push(jr))}return sn(xr),xr.length>0}function qr(Tr,xr){let jr=At.blockers.get(Tr)||IDLE_BLOCKER;return fr.get(Tr)!==xr&&fr.set(Tr,xr),jr}function wn(Tr){At.blockers.delete(Tr),fr.delete(Tr)}function Cr(Tr,xr){let jr=At.blockers.get(Tr)||IDLE_BLOCKER;invariant$1(jr.state==="unblocked"&&xr.state==="blocked"||jr.state==="blocked"&&xr.state==="blocked"||jr.state==="blocked"&&xr.state==="proceeding"||jr.state==="blocked"&&xr.state==="unblocked"||jr.state==="proceeding"&&xr.state==="unblocked","Invalid blocker state transition: "+jr.state+" -> "+xr.state);let en=new Map(At.blockers);en.set(Tr,xr),gr({blockers:en})}function nr(Tr){let{currentLocation:xr,nextLocation:jr,historyAction:en}=Tr;if(fr.size===0)return;fr.size>1&&warning$1(!1,"A router only supports one blocker at a time");let fn=Array.from(fr.entries()),[Vn,Yn]=fn[fn.length-1],Hn=At.blockers.get(Vn);if(!(Hn&&Hn.state==="proceeding")&&Yn({currentLocation:xr,nextLocation:jr,historyAction:en}))return Vn}function Ur(Tr){let xr=[];return dr.forEach((jr,en)=>{(!Tr||Tr(en))&&(jr.cancel(),xr.push(en),dr.delete(en))}),xr}function Mr(Tr,xr,jr){if(gt=Tr,yt=xr,xt=jr||null,!vt&&At.navigation===IDLE_NAVIGATION){vt=!0;let en=Rr(At.location,At.matches);en!=null&&gr({restoreScrollPosition:en})}return()=>{gt=null,yt=null,xt=null}}function rn(Tr,xr){return xt&&xt(Tr,xr.map(en=>convertRouteMatchToUiMatch(en,At.loaderData)))||Tr.key}function Cn(Tr,xr){if(gt&&yt){let jr=rn(Tr,xr);gt[jr]=yt()}}function Rr(Tr,xr){if(gt){let jr=rn(Tr,xr),en=gt[jr];if(typeof en=="number")return en}return null}function pn(Tr){ct={},dt=convertRoutesToDataRoutes(Tr,lt,void 0,ct)}return It={get basename(){return ht},get future(){return pt},get state(){return At},get routes(){return ut},get window(){return rt},initialize:vr,subscribe:hr,enableScrollRestoration:Mr,navigate:Ir,fetch:Zr,revalidate:wr,createHref:Tr=>nt.history.createHref(Tr),encodeLocation:Tr=>nt.history.encodeLocation(Tr),getFetcher:xn,deleteFetcher:Wn,dispose:mr,getBlocker:qr,deleteBlocker:wn,_internalFetchControllers:zt,_internalActiveDeferreds:dr,_internalSetRoutes:pn},It}function isSubmissionNavigation(nt){return nt!=null&&("formData"in nt&&nt.formData!=null||"body"in nt&&nt.body!==void 0)}function normalizeTo(nt,rt,it,st,lt,ct,ut,dt){let ht,pt;if(ut){ht=[];for(let mt of rt)if(ht.push(mt),mt.route.id===ut){pt=mt;break}}else ht=rt,pt=rt[rt.length-1];let ft=resolveTo(lt||".",getResolveToMatches(ht,ct),stripBasename(nt.pathname,it)||nt.pathname,dt==="path");return lt==null&&(ft.search=nt.search,ft.hash=nt.hash),(lt==null||lt===""||lt===".")&&pt&&pt.route.index&&!hasNakedIndexQuery(ft.search)&&(ft.search=ft.search?ft.search.replace(/^\?/,"?index&"):"?index"),st&&it!=="/"&&(ft.pathname=ft.pathname==="/"?it:joinPaths([it,ft.pathname])),createPath(ft)}function normalizeNavigateOptions(nt,rt,it,st){if(!st||!isSubmissionNavigation(st))return{path:it};if(st.formMethod&&!isValidMethod(st.formMethod))return{path:it,error:getInternalRouterError(405,{method:st.formMethod})};let lt=()=>({path:it,error:getInternalRouterError(400,{type:"invalid-body"})}),ct=st.formMethod||"get",ut=nt?ct.toUpperCase():ct.toLowerCase(),dt=stripHashFromPath(it);if(st.body!==void 0){if(st.formEncType==="text/plain"){if(!isMutationMethod(ut))return lt();let gt=typeof st.body=="string"?st.body:st.body instanceof FormData||st.body instanceof URLSearchParams?Array.from(st.body.entries()).reduce((xt,yt)=>{let[vt,St]=yt;return""+xt+vt+"="+St+`
`},""):String(st.body);return{path:it,submission:{formMethod:ut,formAction:dt,formEncType:st.formEncType,formData:void 0,json:void 0,text:gt}}}else if(st.formEncType==="application/json"){if(!isMutationMethod(ut))return lt();try{let gt=typeof st.body=="string"?JSON.parse(st.body):st.body;return{path:it,submission:{formMethod:ut,formAction:dt,formEncType:st.formEncType,formData:void 0,json:gt,text:void 0}}}catch{return lt()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let ht,pt;if(st.formData)ht=convertFormDataToSearchParams(st.formData),pt=st.formData;else if(st.body instanceof FormData)ht=convertFormDataToSearchParams(st.body),pt=st.body;else if(st.body instanceof URLSearchParams)ht=st.body,pt=convertSearchParamsToFormData(ht);else if(st.body==null)ht=new URLSearchParams,pt=new FormData;else try{ht=new URLSearchParams(st.body),pt=convertSearchParamsToFormData(ht)}catch{return lt()}let ft={formMethod:ut,formAction:dt,formEncType:st&&st.formEncType||"application/x-www-form-urlencoded",formData:pt,json:void 0,text:void 0};if(isMutationMethod(ft.formMethod))return{path:it,submission:ft};let mt=parsePath(it);return rt&&mt.search&&hasNakedIndexQuery(mt.search)&&ht.append("index",""),mt.search="?"+ht,{path:createPath(mt),submission:ft}}function getLoaderMatchesUntilBoundary(nt,rt){let it=nt;if(rt){let st=nt.findIndex(lt=>lt.route.id===rt);st>=0&&(it=nt.slice(0,st))}return it}function getMatchesToLoad(nt,rt,it,st,lt,ct,ut,dt,ht,pt,ft,mt,gt,xt,yt,vt){let St=vt?Object.values(vt)[0]:yt?Object.values(yt)[0]:void 0,Et=nt.createURL(rt.location),wt=nt.createURL(lt),Rt=vt?Object.keys(vt)[0]:void 0,It=getLoaderMatchesUntilBoundary(it,Rt).filter((Dt,jt)=>{let{route:Ft}=Dt;if(Ft.lazy)return!0;if(Ft.loader==null)return!1;if(ct)return Ft.loader.hydrate?!0:rt.loaderData[Ft.id]===void 0&&(!rt.errors||rt.errors[Ft.id]===void 0);if(isNewLoader(rt.loaderData,rt.matches[jt],Dt)||dt.some(Ot=>Ot===Dt.route.id))return!0;let Lt=rt.matches[jt],Pt=Dt;return shouldRevalidateLoader(Dt,_extends$5({currentUrl:Et,currentParams:Lt.params,nextUrl:wt,nextParams:Pt.params},st,{actionResult:St,defaultShouldRevalidate:ut||Et.pathname+Et.search===wt.pathname+wt.search||Et.search!==wt.search||isNewRouteInstance(Lt,Pt)}))}),At=[];return ft.forEach((Dt,jt)=>{if(ct||!it.some(Nt=>Nt.route.id===Dt.routeId)||pt.has(jt))return;let Ft=matchRoutes(gt,Dt.path,xt);if(!Ft){At.push({key:jt,routeId:Dt.routeId,path:Dt.path,matches:null,match:null,controller:null});return}let Lt=rt.fetchers.get(jt),Pt=getTargetMatch(Ft,Dt.path),Ot=!1;mt.has(jt)?Ot=!1:ht.includes(jt)?Ot=!0:Lt&&Lt.state!=="idle"&&Lt.data===void 0?Ot=ut:Ot=shouldRevalidateLoader(Pt,_extends$5({currentUrl:Et,currentParams:rt.matches[rt.matches.length-1].params,nextUrl:wt,nextParams:it[it.length-1].params},st,{actionResult:St,defaultShouldRevalidate:ut})),Ot&&At.push({key:jt,routeId:Dt.routeId,path:Dt.path,matches:Ft,match:Pt,controller:new AbortController})}),[It,At]}function isNewLoader(nt,rt,it){let st=!rt||it.route.id!==rt.route.id,lt=nt[it.route.id]===void 0;return st||lt}function isNewRouteInstance(nt,rt){let it=nt.route.path;return nt.pathname!==rt.pathname||it!=null&&it.endsWith("*")&&nt.params["*"]!==rt.params["*"]}function shouldRevalidateLoader(nt,rt){if(nt.route.shouldRevalidate){let it=nt.route.shouldRevalidate(rt);if(typeof it=="boolean")return it}return rt.defaultShouldRevalidate}async function loadLazyRouteModule(nt,rt,it){if(!nt.lazy)return;let st=await nt.lazy();if(!nt.lazy)return;let lt=it[nt.id];invariant$1(lt,"No route found in manifest");let ct={};for(let ut in st){let ht=lt[ut]!==void 0&&ut!=="hasErrorBoundary";warning$1(!ht,'Route "'+lt.id+'" has a static property "'+ut+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ut+'" will be ignored.')),!ht&&!immutableRouteKeys.has(ut)&&(ct[ut]=st[ut])}Object.assign(lt,ct),Object.assign(lt,_extends$5({},rt(lt),{lazy:void 0}))}async function callLoaderOrAction(nt,rt,it,st,lt,ct,ut,dt,ht){ht===void 0&&(ht={});let pt,ft,mt,gt=vt=>{let St,Et=new Promise((wt,Rt)=>St=Rt);return mt=()=>St(),rt.signal.addEventListener("abort",mt),Promise.race([vt({request:rt,params:it.params,context:ht.requestContext}),Et])};try{let vt=it.route[nt];if(it.route.lazy)if(vt){let St,Et=await Promise.all([gt(vt).catch(wt=>{St=wt}),loadLazyRouteModule(it.route,ct,lt)]);if(St)throw St;ft=Et[0]}else if(await loadLazyRouteModule(it.route,ct,lt),vt=it.route[nt],vt)ft=await gt(vt);else if(nt==="action"){let St=new URL(rt.url),Et=St.pathname+St.search;throw getInternalRouterError(405,{method:rt.method,pathname:Et,routeId:it.route.id})}else return{type:ResultType.data,data:void 0};else if(vt)ft=await gt(vt);else{let St=new URL(rt.url),Et=St.pathname+St.search;throw getInternalRouterError(404,{pathname:Et})}invariant$1(ft!==void 0,"You defined "+(nt==="action"?"an action":"a loader")+" for route "+('"'+it.route.id+"\" but didn't return anything from your `"+nt+"` ")+"function. Please return a value or `null`.")}catch(vt){pt=ResultType.error,ft=vt}finally{mt&&rt.signal.removeEventListener("abort",mt)}if(isResponse(ft)){let vt=ft.status;if(redirectStatusCodes.has(vt)){let Et=ft.headers.get("Location");if(invariant$1(Et,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(Et))Et=normalizeTo(new URL(rt.url),st.slice(0,st.indexOf(it)+1),ut,!0,Et,dt);else if(!ht.isStaticRequest){let wt=new URL(rt.url),Rt=Et.startsWith("//")?new URL(wt.protocol+Et):new URL(Et),Tt=stripBasename(Rt.pathname,ut)!=null;Rt.origin===wt.origin&&Tt&&(Et=Rt.pathname+Rt.search+Rt.hash)}if(ht.isStaticRequest)throw ft.headers.set("Location",Et),ft;return{type:ResultType.redirect,status:vt,location:Et,revalidate:ft.headers.get("X-Remix-Revalidate")!==null,reloadDocument:ft.headers.get("X-Remix-Reload-Document")!==null}}if(ht.isRouteRequest)throw{type:pt===ResultType.error?ResultType.error:ResultType.data,response:ft};let St;try{let Et=ft.headers.get("Content-Type");Et&&/\bapplication\/json\b/.test(Et)?ft.body==null?St=null:St=await ft.json():St=await ft.text()}catch(Et){return{type:ResultType.error,error:Et}}return pt===ResultType.error?{type:pt,error:new ErrorResponseImpl(vt,ft.statusText,St),headers:ft.headers}:{type:ResultType.data,data:St,statusCode:ft.status,headers:ft.headers}}if(pt===ResultType.error)return{type:pt,error:ft};if(isDeferredData(ft)){var xt,yt;return{type:ResultType.deferred,deferredData:ft,statusCode:(xt=ft.init)==null?void 0:xt.status,headers:((yt=ft.init)==null?void 0:yt.headers)&&new Headers(ft.init.headers)}}return{type:ResultType.data,data:ft}}function createClientSideRequest(nt,rt,it,st){let lt=nt.createURL(stripHashFromPath(rt)).toString(),ct={signal:it};if(st&&isMutationMethod(st.formMethod)){let{formMethod:ut,formEncType:dt}=st;ct.method=ut.toUpperCase(),dt==="application/json"?(ct.headers=new Headers({"Content-Type":dt}),ct.body=JSON.stringify(st.json)):dt==="text/plain"?ct.body=st.text:dt==="application/x-www-form-urlencoded"&&st.formData?ct.body=convertFormDataToSearchParams(st.formData):ct.body=st.formData}return new Request(lt,ct)}function convertFormDataToSearchParams(nt){let rt=new URLSearchParams;for(let[it,st]of nt.entries())rt.append(it,typeof st=="string"?st:st.name);return rt}function convertSearchParamsToFormData(nt){let rt=new FormData;for(let[it,st]of nt.entries())rt.append(it,st);return rt}function processRouteLoaderData(nt,rt,it,st,lt){let ct={},ut=null,dt,ht=!1,pt={};return it.forEach((ft,mt)=>{let gt=rt[mt].route.id;if(invariant$1(!isRedirectResult(ft),"Cannot handle redirect results in processLoaderData"),isErrorResult(ft)){let xt=findNearestBoundary(nt,gt),yt=ft.error;st&&(yt=Object.values(st)[0],st=void 0),ut=ut||{},ut[xt.route.id]==null&&(ut[xt.route.id]=yt),ct[gt]=void 0,ht||(ht=!0,dt=isRouteErrorResponse(ft.error)?ft.error.status:500),ft.headers&&(pt[gt]=ft.headers)}else isDeferredResult(ft)?(lt.set(gt,ft.deferredData),ct[gt]=ft.deferredData.data):ct[gt]=ft.data,ft.statusCode!=null&&ft.statusCode!==200&&!ht&&(dt=ft.statusCode),ft.headers&&(pt[gt]=ft.headers)}),st&&(ut=st,ct[Object.keys(st)[0]]=void 0),{loaderData:ct,errors:ut,statusCode:dt||200,loaderHeaders:pt}}function processLoaderData(nt,rt,it,st,lt,ct,ut,dt){let{loaderData:ht,errors:pt}=processRouteLoaderData(rt,it,st,lt,dt);for(let ft=0;ft<ct.length;ft++){let{key:mt,match:gt,controller:xt}=ct[ft];invariant$1(ut!==void 0&&ut[ft]!==void 0,"Did not find corresponding fetcher result");let yt=ut[ft];if(!(xt&&xt.signal.aborted))if(isErrorResult(yt)){let vt=findNearestBoundary(nt.matches,gt==null?void 0:gt.route.id);pt&&pt[vt.route.id]||(pt=_extends$5({},pt,{[vt.route.id]:yt.error})),nt.fetchers.delete(mt)}else if(isRedirectResult(yt))invariant$1(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(yt))invariant$1(!1,"Unhandled fetcher deferred data");else{let vt=getDoneFetcher(yt.data);nt.fetchers.set(mt,vt)}}return{loaderData:ht,errors:pt}}function mergeLoaderData(nt,rt,it,st){let lt=_extends$5({},rt);for(let ct of it){let ut=ct.route.id;if(rt.hasOwnProperty(ut)?rt[ut]!==void 0&&(lt[ut]=rt[ut]):nt[ut]!==void 0&&ct.route.loader&&(lt[ut]=nt[ut]),st&&st.hasOwnProperty(ut))break}return lt}function findNearestBoundary(nt,rt){return(rt?nt.slice(0,nt.findIndex(st=>st.route.id===rt)+1):[...nt]).reverse().find(st=>st.route.hasErrorBoundary===!0)||nt[0]}function getShortCircuitMatches(nt){let rt=nt.length===1?nt[0]:nt.find(it=>it.index||!it.path||it.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:rt}],route:rt}}function getInternalRouterError(nt,rt){let{pathname:it,routeId:st,method:lt,type:ct}=rt===void 0?{}:rt,ut="Unknown Server Error",dt="Unknown @remix-run/router error";return nt===400?(ut="Bad Request",lt&&it&&st?dt="You made a "+lt+' request to "'+it+'" but '+('did not provide a `loader` for route "'+st+'", ')+"so there is no way to handle the request.":ct==="defer-action"?dt="defer() is not supported in actions":ct==="invalid-body"&&(dt="Unable to encode submission body")):nt===403?(ut="Forbidden",dt='Route "'+st+'" does not match URL "'+it+'"'):nt===404?(ut="Not Found",dt='No route matches URL "'+it+'"'):nt===405&&(ut="Method Not Allowed",lt&&it&&st?dt="You made a "+lt.toUpperCase()+' request to "'+it+'" but '+('did not provide an `action` for route "'+st+'", ')+"so there is no way to handle the request.":lt&&(dt='Invalid request method "'+lt.toUpperCase()+'"')),new ErrorResponseImpl(nt||500,ut,new Error(dt),!0)}function findRedirect(nt){for(let rt=nt.length-1;rt>=0;rt--){let it=nt[rt];if(isRedirectResult(it))return{result:it,idx:rt}}}function stripHashFromPath(nt){let rt=typeof nt=="string"?parsePath(nt):nt;return createPath(_extends$5({},rt,{hash:""}))}function isHashChangeOnly(nt,rt){return nt.pathname!==rt.pathname||nt.search!==rt.search?!1:nt.hash===""?rt.hash!=="":nt.hash===rt.hash?!0:rt.hash!==""}function isDeferredResult(nt){return nt.type===ResultType.deferred}function isErrorResult(nt){return nt.type===ResultType.error}function isRedirectResult(nt){return(nt&&nt.type)===ResultType.redirect}function isDeferredData(nt){let rt=nt;return rt&&typeof rt=="object"&&typeof rt.data=="object"&&typeof rt.subscribe=="function"&&typeof rt.cancel=="function"&&typeof rt.resolveData=="function"}function isResponse(nt){return nt!=null&&typeof nt.status=="number"&&typeof nt.statusText=="string"&&typeof nt.headers=="object"&&typeof nt.body<"u"}function isValidMethod(nt){return validRequestMethods.has(nt.toLowerCase())}function isMutationMethod(nt){return validMutationMethods.has(nt.toLowerCase())}async function resolveDeferredResults(nt,rt,it,st,lt,ct){for(let ut=0;ut<it.length;ut++){let dt=it[ut],ht=rt[ut];if(!ht)continue;let pt=nt.find(mt=>mt.route.id===ht.route.id),ft=pt!=null&&!isNewRouteInstance(pt,ht)&&(ct&&ct[ht.route.id])!==void 0;if(isDeferredResult(dt)&&(lt||ft)){let mt=st[ut];invariant$1(mt,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(dt,mt,lt).then(gt=>{gt&&(it[ut]=gt||it[ut])})}}}async function resolveDeferredData(nt,rt,it){if(it===void 0&&(it=!1),!await nt.deferredData.resolveData(rt)){if(it)try{return{type:ResultType.data,data:nt.deferredData.unwrappedData}}catch(lt){return{type:ResultType.error,error:lt}}return{type:ResultType.data,data:nt.deferredData.data}}}function hasNakedIndexQuery(nt){return new URLSearchParams(nt).getAll("index").some(rt=>rt==="")}function getTargetMatch(nt,rt){let it=typeof rt=="string"?parsePath(rt).search:rt.search;if(nt[nt.length-1].route.index&&hasNakedIndexQuery(it||""))return nt[nt.length-1];let st=getPathContributingMatches(nt);return st[st.length-1]}function getSubmissionFromNavigation(nt){let{formMethod:rt,formAction:it,formEncType:st,text:lt,formData:ct,json:ut}=nt;if(!(!rt||!it||!st)){if(lt!=null)return{formMethod:rt,formAction:it,formEncType:st,formData:void 0,json:void 0,text:lt};if(ct!=null)return{formMethod:rt,formAction:it,formEncType:st,formData:ct,json:void 0,text:void 0};if(ut!==void 0)return{formMethod:rt,formAction:it,formEncType:st,formData:void 0,json:ut,text:void 0}}}function getLoadingNavigation(nt,rt){return rt?{state:"loading",location:nt,formMethod:rt.formMethod,formAction:rt.formAction,formEncType:rt.formEncType,formData:rt.formData,json:rt.json,text:rt.text}:{state:"loading",location:nt,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(nt,rt){return{state:"submitting",location:nt,formMethod:rt.formMethod,formAction:rt.formAction,formEncType:rt.formEncType,formData:rt.formData,json:rt.json,text:rt.text}}function getLoadingFetcher(nt,rt){return nt?{state:"loading",formMethod:nt.formMethod,formAction:nt.formAction,formEncType:nt.formEncType,formData:nt.formData,json:nt.json,text:nt.text,data:rt}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:rt}}function getSubmittingFetcher(nt,rt){return{state:"submitting",formMethod:nt.formMethod,formAction:nt.formAction,formEncType:nt.formEncType,formData:nt.formData,json:nt.json,text:nt.text,data:rt?rt.data:void 0}}function getDoneFetcher(nt){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:nt}}function restoreAppliedTransitions(nt,rt){try{let it=nt.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(it){let st=JSON.parse(it);for(let[lt,ct]of Object.entries(st||{}))ct&&Array.isArray(ct)&&rt.set(lt,new Set(ct||[]))}}catch{}}function persistAppliedTransitions(nt,rt){if(rt.size>0){let it={};for(let[st,lt]of rt)it[st]=[...lt];try{nt.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(it))}catch(st){warning$1(!1,"Failed to save applied view transitions in sessionStorage ("+st+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$4.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(nt,rt){let{relative:it}=rt===void 0?{}:rt;useInRouterContext()||invariant$1(!1);let{basename:st,navigator:lt}=reactExports.useContext(NavigationContext),{hash:ct,pathname:ut,search:dt}=useResolvedPath(nt,{relative:it}),ht=ut;return st!=="/"&&(ht=ut==="/"?st:joinPaths([st,ut])),lt.createHref({pathname:ht,search:dt,hash:ct})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(nt){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(nt)}function useNavigate(){let{isDataRoute:nt}=reactExports.useContext(RouteContext);return nt?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let nt=reactExports.useContext(DataRouterContext),{basename:rt,future:it,navigator:st}=reactExports.useContext(NavigationContext),{matches:lt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),ut=JSON.stringify(getResolveToMatches(lt,it.v7_relativeSplatPath)),dt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{dt.current=!0}),reactExports.useCallback(function(pt,ft){if(ft===void 0&&(ft={}),!dt.current)return;if(typeof pt=="number"){st.go(pt);return}let mt=resolveTo(pt,JSON.parse(ut),ct,ft.relative==="path");nt==null&&rt!=="/"&&(mt.pathname=mt.pathname==="/"?rt:joinPaths([rt,mt.pathname])),(ft.replace?st.replace:st.push)(mt,ft.state,ft)},[rt,st,ut,ct,nt])}const OutletContext=reactExports.createContext(null);function useOutlet(nt){let rt=reactExports.useContext(RouteContext).outlet;return rt&&reactExports.createElement(OutletContext.Provider,{value:nt},rt)}function useParams(){let{matches:nt}=reactExports.useContext(RouteContext),rt=nt[nt.length-1];return rt?rt.params:{}}function useResolvedPath(nt,rt){let{relative:it}=rt===void 0?{}:rt,{future:st}=reactExports.useContext(NavigationContext),{matches:lt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),ut=JSON.stringify(getResolveToMatches(lt,st.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(nt,JSON.parse(ut),ct,it==="path"),[nt,ut,ct,it])}function useRoutesImpl(nt,rt,it,st){useInRouterContext()||invariant$1(!1);let{navigator:lt}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),ut=ct[ct.length-1],dt=ut?ut.params:{};ut&&ut.pathname;let ht=ut?ut.pathnameBase:"/";ut&&ut.route;let pt=useLocation(),ft;if(rt){var mt;let St=typeof rt=="string"?parsePath(rt):rt;ht==="/"||(mt=St.pathname)!=null&&mt.startsWith(ht)||invariant$1(!1),ft=St}else ft=pt;let gt=ft.pathname||"/",xt=ht==="/"?gt:gt.slice(ht.length)||"/",yt=matchRoutes(nt,{pathname:xt}),vt=_renderMatches(yt&&yt.map(St=>Object.assign({},St,{params:Object.assign({},dt,St.params),pathname:joinPaths([ht,lt.encodeLocation?lt.encodeLocation(St.pathname).pathname:St.pathname]),pathnameBase:St.pathnameBase==="/"?ht:joinPaths([ht,lt.encodeLocation?lt.encodeLocation(St.pathnameBase).pathname:St.pathnameBase])})),ct,it,st);return rt&&vt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$4({pathname:"/",search:"",hash:"",state:null,key:"default"},ft),navigationType:Action.Pop}},vt):vt}function DefaultErrorComponent(){let nt=useRouteError(),rt=isRouteErrorResponse(nt)?nt.status+" "+nt.statusText:nt instanceof Error?nt.message:JSON.stringify(nt),it=nt instanceof Error?nt.stack:null,lt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},rt),it?reactExports.createElement("pre",{style:lt},it):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(rt){super(rt),this.state={location:rt.location,revalidation:rt.revalidation,error:rt.error}}static getDerivedStateFromError(rt){return{error:rt}}static getDerivedStateFromProps(rt,it){return it.location!==rt.location||it.revalidation!=="idle"&&rt.revalidation==="idle"?{error:rt.error,location:rt.location,revalidation:rt.revalidation}:{error:rt.error!==void 0?rt.error:it.error,location:it.location,revalidation:rt.revalidation||it.revalidation}}componentDidCatch(rt,it){console.error("React Router caught the following error during render",rt,it)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(nt){let{routeContext:rt,match:it,children:st}=nt,lt=reactExports.useContext(DataRouterContext);return lt&&lt.static&&lt.staticContext&&(it.route.errorElement||it.route.ErrorBoundary)&&(lt.staticContext._deepestRenderedBoundaryId=it.route.id),reactExports.createElement(RouteContext.Provider,{value:rt},st)}function _renderMatches(nt,rt,it,st){var lt;if(rt===void 0&&(rt=[]),it===void 0&&(it=null),st===void 0&&(st=null),nt==null){var ct;if((ct=it)!=null&&ct.errors)nt=it.matches;else return null}let ut=nt,dt=(lt=it)==null?void 0:lt.errors;if(dt!=null){let ft=ut.findIndex(mt=>mt.route.id&&(dt==null?void 0:dt[mt.route.id]));ft>=0||invariant$1(!1),ut=ut.slice(0,Math.min(ut.length,ft+1))}let ht=!1,pt=-1;if(it&&st&&st.v7_partialHydration)for(let ft=0;ft<ut.length;ft++){let mt=ut[ft];if((mt.route.HydrateFallback||mt.route.hydrateFallbackElement)&&(pt=ft),mt.route.id){let{loaderData:gt,errors:xt}=it,yt=mt.route.loader&&gt[mt.route.id]===void 0&&(!xt||xt[mt.route.id]===void 0);if(mt.route.lazy||yt){ht=!0,pt>=0?ut=ut.slice(0,pt+1):ut=[ut[0]];break}}}return ut.reduceRight((ft,mt,gt)=>{let xt,yt=!1,vt=null,St=null;it&&(xt=dt&&mt.route.id?dt[mt.route.id]:void 0,vt=mt.route.errorElement||defaultErrorElement,ht&&(pt<0&&gt===0?(warningOnce("route-fallback",!1),yt=!0,St=null):pt===gt&&(yt=!0,St=mt.route.hydrateFallbackElement||null)));let Et=rt.concat(ut.slice(0,gt+1)),wt=()=>{let Rt;return xt?Rt=vt:yt?Rt=St:mt.route.Component?Rt=reactExports.createElement(mt.route.Component,null):mt.route.element?Rt=mt.route.element:Rt=ft,reactExports.createElement(RenderedRoute,{match:mt,routeContext:{outlet:ft,matches:Et,isDataRoute:it!=null},children:Rt})};return it&&(mt.route.ErrorBoundary||mt.route.errorElement||gt===0)?reactExports.createElement(RenderErrorBoundary,{location:it.location,revalidation:it.revalidation,component:vt,error:xt,children:wt(),routeContext:{outlet:null,matches:Et,isDataRoute:!0}}):wt()},null)}var DataRouterHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt}(DataRouterHook$1||{}),DataRouterStateHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseLoaderData="useLoaderData",nt.UseActionData="useActionData",nt.UseRouteError="useRouteError",nt.UseNavigation="useNavigation",nt.UseRouteLoaderData="useRouteLoaderData",nt.UseMatches="useMatches",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt.UseRouteId="useRouteId",nt}(DataRouterStateHook$1||{});function useDataRouterContext$1(nt){let rt=reactExports.useContext(DataRouterContext);return rt||invariant$1(!1),rt}function useDataRouterState(nt){let rt=reactExports.useContext(DataRouterStateContext);return rt||invariant$1(!1),rt}function useRouteContext(nt){let rt=reactExports.useContext(RouteContext);return rt||invariant$1(!1),rt}function useCurrentRouteId(nt){let rt=useRouteContext(),it=rt.matches[rt.matches.length-1];return it.route.id||invariant$1(!1),it.route.id}function useRouteError(){var nt;let rt=reactExports.useContext(RouteErrorContext),it=useDataRouterState(DataRouterStateHook$1.UseRouteError),st=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return rt!==void 0?rt:(nt=it.errors)==null?void 0:nt[st]}function useNavigateStable(){let{router:nt}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),rt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),it=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{it.current=!0}),reactExports.useCallback(function(lt,ct){ct===void 0&&(ct={}),it.current&&(typeof lt=="number"?nt.navigate(lt):nt.navigate(lt,_extends$4({fromRouteId:rt},ct)))},[nt,rt])}const alreadyWarned={};function warningOnce(nt,rt,it){!rt&&!alreadyWarned[nt]&&(alreadyWarned[nt]=!0)}function Outlet(nt){return useOutlet(nt.context)}function Router(nt){let{basename:rt="/",children:it=null,location:st,navigationType:lt=Action.Pop,navigator:ct,static:ut=!1,future:dt}=nt;useInRouterContext()&&invariant$1(!1);let ht=rt.replace(/^\/*/,"/"),pt=reactExports.useMemo(()=>({basename:ht,navigator:ct,static:ut,future:_extends$4({v7_relativeSplatPath:!1},dt)}),[ht,dt,ct,ut]);typeof st=="string"&&(st=parsePath(st));let{pathname:ft="/",search:mt="",hash:gt="",state:xt=null,key:yt="default"}=st,vt=reactExports.useMemo(()=>{let St=stripBasename(ft,ht);return St==null?null:{location:{pathname:St,search:mt,hash:gt,state:xt,key:yt},navigationType:lt}},[ht,ft,mt,gt,xt,yt,lt]);return vt==null?null:reactExports.createElement(NavigationContext.Provider,{value:pt},reactExports.createElement(LocationContext.Provider,{children:it,value:vt}))}new Promise(()=>{});function mapRouteProperties(nt){let rt={hasErrorBoundary:nt.ErrorBoundary!=null||nt.errorElement!=null};return nt.Component&&Object.assign(rt,{element:reactExports.createElement(nt.Component),Component:void 0}),nt.HydrateFallback&&Object.assign(rt,{hydrateFallbackElement:reactExports.createElement(nt.HydrateFallback),HydrateFallback:void 0}),nt.ErrorBoundary&&Object.assign(rt,{errorElement:reactExports.createElement(nt.ErrorBoundary),ErrorBoundary:void 0}),rt}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$3.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function isModifiedEvent(nt){return!!(nt.metaKey||nt.altKey||nt.ctrlKey||nt.shiftKey)}function shouldProcessLinkClick(nt,rt){return nt.button===0&&(!rt||rt==="_self")&&!isModifiedEvent(nt)}const _excluded$3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];function createBrowserRouter(nt,rt){return createRouter({basename:rt==null?void 0:rt.basename,future:_extends$3({},rt==null?void 0:rt.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:rt==null?void 0:rt.window}),hydrationData:(rt==null?void 0:rt.hydrationData)||parseHydrationData(),routes:nt,mapRouteProperties,window:rt==null?void 0:rt.window}).initialize()}function parseHydrationData(){var nt;let rt=(nt=window)==null?void 0:nt.__staticRouterHydrationData;return rt&&rt.errors&&(rt=_extends$3({},rt,{errors:deserializeErrors(rt.errors)})),rt}function deserializeErrors(nt){if(!nt)return null;let rt=Object.entries(nt),it={};for(let[st,lt]of rt)if(lt&&lt.__type==="RouteErrorResponse")it[st]=new ErrorResponseImpl(lt.status,lt.statusText,lt.data,lt.internal===!0);else if(lt&&lt.__type==="Error"){if(lt.__subType){let ct=window[lt.__subType];if(typeof ct=="function")try{let ut=new ct(lt.message);ut.stack="",it[st]=ut}catch{}}if(it[st]==null){let ct=new Error(lt.message);ct.stack="",it[st]=ct}}else it[st]=lt;return it}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=e$3[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(nt){startTransitionImpl?startTransitionImpl(nt):nt()}function flushSyncSafe(nt){flushSyncImpl?flushSyncImpl(nt):nt()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((rt,it)=>{this.resolve=st=>{this.status==="pending"&&(this.status="resolved",rt(st))},this.reject=st=>{this.status==="pending"&&(this.status="rejected",it(st))}})}}function RouterProvider(nt){let{fallbackElement:rt,router:it,future:st}=nt,[lt,ct]=reactExports.useState(it.state),[ut,dt]=reactExports.useState(),[ht,pt]=reactExports.useState({isTransitioning:!1}),[ft,mt]=reactExports.useState(),[gt,xt]=reactExports.useState(),[yt,vt]=reactExports.useState(),St=reactExports.useRef(new Map),{v7_startTransition:Et}=st||{},wt=reactExports.useCallback(Dt=>{Et?startTransitionSafe(Dt):Dt()},[Et]),Rt=reactExports.useCallback((Dt,jt)=>{let{deletedFetchers:Ft,unstable_flushSync:Lt,unstable_viewTransitionOpts:Pt}=jt;Ft.forEach(Nt=>St.current.delete(Nt)),Dt.fetchers.forEach((Nt,$t)=>{Nt.data!==void 0&&St.current.set($t,Nt.data)});let Ot=it.window==null||typeof it.window.document.startViewTransition!="function";if(!Pt||Ot){Lt?flushSyncSafe(()=>ct(Dt)):wt(()=>ct(Dt));return}if(Lt){flushSyncSafe(()=>{gt&&(ft&&ft.resolve(),gt.skipTransition()),pt({isTransitioning:!0,flushSync:!0,currentLocation:Pt.currentLocation,nextLocation:Pt.nextLocation})});let Nt=it.window.document.startViewTransition(()=>{flushSyncSafe(()=>ct(Dt))});Nt.finished.finally(()=>{flushSyncSafe(()=>{mt(void 0),xt(void 0),dt(void 0),pt({isTransitioning:!1})})}),flushSyncSafe(()=>xt(Nt));return}gt?(ft&&ft.resolve(),gt.skipTransition(),vt({state:Dt,currentLocation:Pt.currentLocation,nextLocation:Pt.nextLocation})):(dt(Dt),pt({isTransitioning:!0,flushSync:!1,currentLocation:Pt.currentLocation,nextLocation:Pt.nextLocation}))},[it.window,gt,ft,St,wt]);reactExports.useLayoutEffect(()=>it.subscribe(Rt),[it,Rt]),reactExports.useEffect(()=>{ht.isTransitioning&&!ht.flushSync&&mt(new Deferred)},[ht]),reactExports.useEffect(()=>{if(ft&&ut&&it.window){let Dt=ut,jt=ft.promise,Ft=it.window.document.startViewTransition(async()=>{wt(()=>ct(Dt)),await jt});Ft.finished.finally(()=>{mt(void 0),xt(void 0),dt(void 0),pt({isTransitioning:!1})}),xt(Ft)}},[wt,ut,ft,it.window]),reactExports.useEffect(()=>{ft&&ut&&lt.location.key===ut.location.key&&ft.resolve()},[ft,gt,lt.location,ut]),reactExports.useEffect(()=>{!ht.isTransitioning&&yt&&(dt(yt.state),pt({isTransitioning:!0,flushSync:!1,currentLocation:yt.currentLocation,nextLocation:yt.nextLocation}),vt(void 0))},[ht.isTransitioning,yt]),reactExports.useEffect(()=>{},[]);let Tt=reactExports.useMemo(()=>({createHref:it.createHref,encodeLocation:it.encodeLocation,go:Dt=>it.navigate(Dt),push:(Dt,jt,Ft)=>it.navigate(Dt,{state:jt,preventScrollReset:Ft==null?void 0:Ft.preventScrollReset}),replace:(Dt,jt,Ft)=>it.navigate(Dt,{replace:!0,state:jt,preventScrollReset:Ft==null?void 0:Ft.preventScrollReset})}),[it]),It=it.basename||"/",At=reactExports.useMemo(()=>({router:it,navigator:Tt,static:!1,basename:It}),[it,Tt,It]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:At},reactExports.createElement(DataRouterStateContext.Provider,{value:lt},reactExports.createElement(FetchersContext.Provider,{value:St.current},reactExports.createElement(ViewTransitionContext.Provider,{value:ht},reactExports.createElement(Router,{basename:It,location:lt.location,navigationType:lt.historyAction,navigator:Tt,future:{v7_relativeSplatPath:it.future.v7_relativeSplatPath}},lt.initialized||it.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:it.routes,future:it.future,state:lt}):rt))))),null)}function DataRoutes(nt){let{routes:rt,future:it,state:st}=nt;return useRoutesImpl(rt,void 0,st,it)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(rt,it){let{onClick:st,relative:lt,reloadDocument:ct,replace:ut,state:dt,target:ht,to:pt,preventScrollReset:ft,unstable_viewTransition:mt}=rt,gt=_objectWithoutPropertiesLoose$2(rt,_excluded$3),{basename:xt}=reactExports.useContext(NavigationContext),yt,vt=!1;if(typeof pt=="string"&&ABSOLUTE_URL_REGEX.test(pt)&&(yt=pt,isBrowser))try{let Rt=new URL(window.location.href),Tt=pt.startsWith("//")?new URL(Rt.protocol+pt):new URL(pt),It=stripBasename(Tt.pathname,xt);Tt.origin===Rt.origin&&It!=null?pt=It+Tt.search+Tt.hash:vt=!0}catch{}let St=useHref(pt,{relative:lt}),Et=useLinkClickHandler(pt,{replace:ut,state:dt,target:ht,preventScrollReset:ft,relative:lt,unstable_viewTransition:mt});function wt(Rt){st&&st(Rt),Rt.defaultPrevented||Et(Rt)}return reactExports.createElement("a",_extends$3({},gt,{href:yt||St,onClick:vt||ct?st:wt,ref:it,target:ht}))}),NavLink=reactExports.forwardRef(function(rt,it){let{"aria-current":st="page",caseSensitive:lt=!1,className:ct="",end:ut=!1,style:dt,to:ht,unstable_viewTransition:pt,children:ft}=rt,mt=_objectWithoutPropertiesLoose$2(rt,_excluded2),gt=useResolvedPath(ht,{relative:mt.relative}),xt=useLocation(),yt=reactExports.useContext(DataRouterStateContext),{navigator:vt,basename:St}=reactExports.useContext(NavigationContext),Et=yt!=null&&useViewTransitionState(gt)&&pt===!0,wt=vt.encodeLocation?vt.encodeLocation(gt).pathname:gt.pathname,Rt=xt.pathname,Tt=yt&&yt.navigation&&yt.navigation.location?yt.navigation.location.pathname:null;lt||(Rt=Rt.toLowerCase(),Tt=Tt?Tt.toLowerCase():null,wt=wt.toLowerCase()),Tt&&St&&(Tt=stripBasename(Tt,St)||Tt);const It=wt!=="/"&&wt.endsWith("/")?wt.length-1:wt.length;let At=Rt===wt||!ut&&Rt.startsWith(wt)&&Rt.charAt(It)==="/",Dt=Tt!=null&&(Tt===wt||!ut&&Tt.startsWith(wt)&&Tt.charAt(wt.length)==="/"),jt={isActive:At,isPending:Dt,isTransitioning:Et},Ft=At?st:void 0,Lt;typeof ct=="function"?Lt=ct(jt):Lt=[ct,At?"active":null,Dt?"pending":null,Et?"transitioning":null].filter(Boolean).join(" ");let Pt=typeof dt=="function"?dt(jt):dt;return reactExports.createElement(Link,_extends$3({},mt,{"aria-current":Ft,className:Lt,ref:it,style:Pt,to:ht,unstable_viewTransition:pt}),typeof ft=="function"?ft(jt):ft)});var DataRouterHook;(function(nt){nt.UseScrollRestoration="useScrollRestoration",nt.UseSubmit="useSubmit",nt.UseSubmitFetcher="useSubmitFetcher",nt.UseFetcher="useFetcher",nt.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(nt){nt.UseFetcher="useFetcher",nt.UseFetchers="useFetchers",nt.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(nt){let rt=reactExports.useContext(DataRouterContext);return rt||invariant$1(!1),rt}function useLinkClickHandler(nt,rt){let{target:it,replace:st,state:lt,preventScrollReset:ct,relative:ut,unstable_viewTransition:dt}=rt===void 0?{}:rt,ht=useNavigate(),pt=useLocation(),ft=useResolvedPath(nt,{relative:ut});return reactExports.useCallback(mt=>{if(shouldProcessLinkClick(mt,it)){mt.preventDefault();let gt=st!==void 0?st:createPath(pt)===createPath(ft);ht(nt,{replace:gt,state:lt,preventScrollReset:ct,relative:ut,unstable_viewTransition:dt})}},[pt,ht,ft,st,lt,it,nt,ct,ut,dt])}function useViewTransitionState(nt,rt){rt===void 0&&(rt={});let it=reactExports.useContext(ViewTransitionContext);it==null&&invariant$1(!1);let{basename:st}=useDataRouterContext(DataRouterHook.useViewTransitionState),lt=useResolvedPath(nt,{relative:rt.relative});if(!it.isTransitioning)return!1;let ct=stripBasename(it.currentLocation.pathname,st)||it.currentLocation.pathname,ut=stripBasename(it.nextLocation.pathname,st)||it.nextLocation.pathname;return matchPath(lt.pathname,ut)!=null||matchPath(lt.pathname,ct)!=null}function ArrowPathIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const ForwardRef$D=reactExports.forwardRef(ArrowPathIcon),ArrowPathIcon$1=ForwardRef$D;function CalendarDaysIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),reactExports.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const ForwardRef$C=reactExports.forwardRef(CalendarDaysIcon$2),CalendarDaysIcon$3=ForwardRef$C;function CalendarIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const ForwardRef$B=reactExports.forwardRef(CalendarIcon),CalendarIcon$1=ForwardRef$B;function CheckCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ForwardRef$A=reactExports.forwardRef(CheckCircleIcon),CheckCircleIcon$1=ForwardRef$A;function CheckIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const ForwardRef$z=reactExports.forwardRef(CheckIcon),CheckIcon$1=ForwardRef$z;function ChevronDownIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const ForwardRef$y=reactExports.forwardRef(ChevronDownIcon$2),ChevronDownIcon$3=ForwardRef$y;function ChevronLeftIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const ForwardRef$x=reactExports.forwardRef(ChevronLeftIcon),ChevronLeftIcon$1=ForwardRef$x;function ChevronRightIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const ForwardRef$w=reactExports.forwardRef(ChevronRightIcon$2),ChevronRightIcon$3=ForwardRef$w;function ClipboardIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M10.5 3A1.501 1.501 0 0 0 9 4.5h6A1.5 1.5 0 0 0 13.5 3h-3Zm-2.693.178A3 3 0 0 1 10.5 1.5h3a3 3 0 0 1 2.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15Z",clipRule:"evenodd"}))}const ForwardRef$v=reactExports.forwardRef(ClipboardIcon),ClipboardIcon$1=ForwardRef$v;function Cog6ToothIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const ForwardRef$u=reactExports.forwardRef(Cog6ToothIcon$2),SolidCog6ToothIcon=ForwardRef$u;function EllipsisHorizontalIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M4.5 12a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm6 0a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm6 0a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z",clipRule:"evenodd"}))}const ForwardRef$t=reactExports.forwardRef(EllipsisHorizontalIcon),EllipsisHorizontalIcon$1=ForwardRef$t;function ExclamationTriangleIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const ForwardRef$s=reactExports.forwardRef(ExclamationTriangleIcon$2),ExclamationTriangleIcon$3=ForwardRef$s;function FlagIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M3 2.25a.75.75 0 0 1 .75.75v.54l1.838-.46a9.75 9.75 0 0 1 6.725.738l.108.054A8.25 8.25 0 0 0 18 4.524l3.11-.732a.75.75 0 0 1 .917.81 47.784 47.784 0 0 0 .005 10.337.75.75 0 0 1-.574.812l-3.114.733a9.75 9.75 0 0 1-6.594-.77l-.108-.054a8.25 8.25 0 0 0-5.69-.625l-2.202.55V21a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 3 2.25Z",clipRule:"evenodd"}))}const ForwardRef$r=reactExports.forwardRef(FlagIcon),FlagIcon$1=ForwardRef$r;function HomeIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),reactExports.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const ForwardRef$q=reactExports.forwardRef(HomeIcon$2),SolidHomeIcon=ForwardRef$q;function LockClosedIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const ForwardRef$p=reactExports.forwardRef(LockClosedIcon$2),LockClosedIcon$3=ForwardRef$p;function MagnifyingGlassIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const ForwardRef$o=reactExports.forwardRef(MagnifyingGlassIcon),MagnifyingGlassIcon$1=ForwardRef$o;function PaperAirplaneIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const ForwardRef$n=reactExports.forwardRef(PaperAirplaneIcon),PaperAirplaneIcon$1=ForwardRef$n;function PencilSquareIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),reactExports.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}const ForwardRef$m=reactExports.forwardRef(PencilSquareIcon),PencilSquareIcon$1=ForwardRef$m;function PlusCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const ForwardRef$l=reactExports.forwardRef(PlusCircleIcon),PlusCircleIcon$1=ForwardRef$l;function TrashIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const ForwardRef$k=reactExports.forwardRef(TrashIcon),TrashIcon$1=ForwardRef$k;function TrophyIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const ForwardRef$j=reactExports.forwardRef(TrophyIcon$2),SolidTrophyIcon=ForwardRef$j;function UsersIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const ForwardRef$i=reactExports.forwardRef(UsersIcon),UsersIcon$1=ForwardRef$i;function XMarkIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ForwardRef$h=reactExports.forwardRef(XMarkIcon$2),XMarkIcon$3=ForwardRef$h;function CalendarDaysIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const ForwardRef$g=reactExports.forwardRef(CalendarDaysIcon),CalendarDaysIcon$1=ForwardRef$g;function ChevronDownIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ForwardRef$f=reactExports.forwardRef(ChevronDownIcon),ChevronDownIcon$1=ForwardRef$f;function ChevronRightIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const ForwardRef$e=reactExports.forwardRef(ChevronRightIcon),ChevronRightIcon$1=ForwardRef$e;function ChevronUpIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const ForwardRef$d=reactExports.forwardRef(ChevronUpIcon),ChevronUpIcon$1=ForwardRef$d;function Cog6ToothIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ForwardRef$c=reactExports.forwardRef(Cog6ToothIcon),Cog6ToothIcon$1=ForwardRef$c;function EllipsisVerticalIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const ForwardRef$b=reactExports.forwardRef(EllipsisVerticalIcon),EllipsisVerticalIcon$1=ForwardRef$b;function ExclamationCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const ForwardRef$a=reactExports.forwardRef(ExclamationCircleIcon),ExclamationCircleIcon$1=ForwardRef$a;function ExclamationTriangleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const ForwardRef$9=reactExports.forwardRef(ExclamationTriangleIcon),ExclamationTriangleIcon$1=ForwardRef$9;function HomeIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const ForwardRef$8=reactExports.forwardRef(HomeIcon),HomeIcon$1=ForwardRef$8;function LockClosedIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const ForwardRef$7=reactExports.forwardRef(LockClosedIcon),LockClosedIcon$1=ForwardRef$7;function MegaphoneIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const ForwardRef$6=reactExports.forwardRef(MegaphoneIcon),MegaphoneIcon$1=ForwardRef$6;function MinusIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const ForwardRef$5=reactExports.forwardRef(MinusIcon),MinusIcon$1=ForwardRef$5;function PlusIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ForwardRef$4=reactExports.forwardRef(PlusIcon),PlusIcon$1=ForwardRef$4;function QuestionMarkCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ForwardRef$3=reactExports.forwardRef(QuestionMarkCircleIcon),QuestionMarkCircleIcon$1=ForwardRef$3;function Squares2X2Icon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const ForwardRef$2=reactExports.forwardRef(Squares2X2Icon),Squares2X2Icon$1=ForwardRef$2;function TrophyIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const ForwardRef$1=reactExports.forwardRef(TrophyIcon),TrophyIcon$1=ForwardRef$1;function XMarkIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ForwardRef=reactExports.forwardRef(XMarkIcon),XMarkIcon$1=ForwardRef,BottomNavbar=()=>{const[nt,rt]=reactExports.useState("home");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed bottom-0 left-0 right-0",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between p-4 bg-white border-t-2",children:[jsxRuntimeExports.jsxs(NavLink,{to:"/",children:[jsxRuntimeExports.jsx(SolidHomeIcon,{className:`w-6 h-6 ${nt==="home"?"":"hidden"}`}),jsxRuntimeExports.jsx(HomeIcon$1,{className:`w-6 h-6 ${nt==="home"?"hidden":""}`,onClick:()=>rt("home")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/diary",children:[jsxRuntimeExports.jsx(CalendarDaysIcon$3,{className:`w-6 h-6 ${nt==="diary"?"":"hidden"}`}),jsxRuntimeExports.jsx(CalendarDaysIcon$1,{className:`w-6 h-6 ${nt==="diary"?"hidden":""}`,onClick:()=>rt("diary")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/challenge",children:[jsxRuntimeExports.jsx(SolidTrophyIcon,{className:`w-6 h-6 ${nt==="challenge"?"":"hidden"}`}),jsxRuntimeExports.jsx(TrophyIcon$1,{className:`w-6 h-6 ${nt==="challenge"?"hidden":""}`,onClick:()=>rt("challenge")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/mypage",children:[jsxRuntimeExports.jsx(SolidCog6ToothIcon,{className:`w-6 h-6 ${nt==="mypage"?"":"hidden"}`}),jsxRuntimeExports.jsx(Cog6ToothIcon$1,{className:`w-6 h-6 ${nt==="mypage"?"hidden":""}`,onClick:()=>rt("mypage")})]})]})}),jsxRuntimeExports.jsx(Outlet,{})]})};function bind(nt,rt){return function(){return nt.apply(rt,arguments)}}var define_global_default$1={};const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(nt=>rt=>{const it=toString.call(rt);return nt[it]||(nt[it]=it.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=nt=>(nt=nt.toLowerCase(),rt=>kindOf(rt)===nt),typeOfTest=nt=>rt=>typeof rt===nt,{isArray:isArray$1}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer(nt){return nt!==null&&!isUndefined$1(nt)&&nt.constructor!==null&&!isUndefined$1(nt.constructor)&&isFunction$2(nt.constructor.isBuffer)&&nt.constructor.isBuffer(nt)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(nt){let rt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?rt=ArrayBuffer.isView(nt):rt=nt&&nt.buffer&&isArrayBuffer$1(nt.buffer),rt}const isString$1=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$2=nt=>nt!==null&&typeof nt=="object",isBoolean$1=nt=>nt===!0||nt===!1,isPlainObject$1=nt=>{if(kindOf(nt)!=="object")return!1;const rt=getPrototypeOf(nt);return(rt===null||rt===Object.prototype||Object.getPrototypeOf(rt)===null)&&!(Symbol.toStringTag in nt)&&!(Symbol.iterator in nt)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=nt=>isObject$2(nt)&&isFunction$2(nt.pipe),isFormData=nt=>{let rt;return nt&&(typeof FormData=="function"&&nt instanceof FormData||isFunction$2(nt.append)&&((rt=kindOf(nt))==="formdata"||rt==="object"&&isFunction$2(nt.toString)&&nt.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=nt=>nt.trim?nt.trim():nt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(nt,rt,{allOwnKeys:it=!1}={}){if(nt===null||typeof nt>"u")return;let st,lt;if(typeof nt!="object"&&(nt=[nt]),isArray$1(nt))for(st=0,lt=nt.length;st<lt;st++)rt.call(null,nt[st],st,nt);else{const ct=it?Object.getOwnPropertyNames(nt):Object.keys(nt),ut=ct.length;let dt;for(st=0;st<ut;st++)dt=ct[st],rt.call(null,nt[dt],dt,nt)}}function findKey(nt,rt){rt=rt.toLowerCase();const it=Object.keys(nt);let st=it.length,lt;for(;st-- >0;)if(lt=it[st],rt===lt.toLowerCase())return lt;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:define_global_default$1,isContextDefined=nt=>!isUndefined$1(nt)&&nt!==_global;function merge$1(){const{caseless:nt}=isContextDefined(this)&&this||{},rt={},it=(st,lt)=>{const ct=nt&&findKey(rt,lt)||lt;isPlainObject$1(rt[ct])&&isPlainObject$1(st)?rt[ct]=merge$1(rt[ct],st):isPlainObject$1(st)?rt[ct]=merge$1({},st):isArray$1(st)?rt[ct]=st.slice():rt[ct]=st};for(let st=0,lt=arguments.length;st<lt;st++)arguments[st]&&forEach(arguments[st],it);return rt}const extend$1=(nt,rt,it,{allOwnKeys:st}={})=>(forEach(rt,(lt,ct)=>{it&&isFunction$2(lt)?nt[ct]=bind(lt,it):nt[ct]=lt},{allOwnKeys:st}),nt),stripBOM=nt=>(nt.charCodeAt(0)===65279&&(nt=nt.slice(1)),nt),inherits=(nt,rt,it,st)=>{nt.prototype=Object.create(rt.prototype,st),nt.prototype.constructor=nt,Object.defineProperty(nt,"super",{value:rt.prototype}),it&&Object.assign(nt.prototype,it)},toFlatObject=(nt,rt,it,st)=>{let lt,ct,ut;const dt={};if(rt=rt||{},nt==null)return rt;do{for(lt=Object.getOwnPropertyNames(nt),ct=lt.length;ct-- >0;)ut=lt[ct],(!st||st(ut,nt,rt))&&!dt[ut]&&(rt[ut]=nt[ut],dt[ut]=!0);nt=it!==!1&&getPrototypeOf(nt)}while(nt&&(!it||it(nt,rt))&&nt!==Object.prototype);return rt},endsWith=(nt,rt,it)=>{nt=String(nt),(it===void 0||it>nt.length)&&(it=nt.length),it-=rt.length;const st=nt.indexOf(rt,it);return st!==-1&&st===it},toArray=nt=>{if(!nt)return null;if(isArray$1(nt))return nt;let rt=nt.length;if(!isNumber$1(rt))return null;const it=new Array(rt);for(;rt-- >0;)it[rt]=nt[rt];return it},isTypedArray$1=(nt=>rt=>nt&&rt instanceof nt)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(nt,rt)=>{const st=(nt&&nt[Symbol.iterator]).call(nt);let lt;for(;(lt=st.next())&&!lt.done;){const ct=lt.value;rt.call(nt,ct[0],ct[1])}},matchAll=(nt,rt)=>{let it;const st=[];for(;(it=nt.exec(rt))!==null;)st.push(it);return st},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=nt=>nt.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(it,st,lt){return st.toUpperCase()+lt}),hasOwnProperty=(({hasOwnProperty:nt})=>(rt,it)=>nt.call(rt,it))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(nt,rt)=>{const it=Object.getOwnPropertyDescriptors(nt),st={};forEach(it,(lt,ct)=>{let ut;(ut=rt(lt,ct,nt))!==!1&&(st[ct]=ut||lt)}),Object.defineProperties(nt,st)},freezeMethods=nt=>{reduceDescriptors(nt,(rt,it)=>{if(isFunction$2(nt)&&["arguments","caller","callee"].indexOf(it)!==-1)return!1;const st=nt[it];if(isFunction$2(st)){if(rt.enumerable=!1,"writable"in rt){rt.writable=!1;return}rt.set||(rt.set=()=>{throw Error("Can not rewrite read-only method '"+it+"'")})}})},toObjectSet=(nt,rt)=>{const it={},st=lt=>{lt.forEach(ct=>{it[ct]=!0})};return isArray$1(nt)?st(nt):st(String(nt).split(rt)),it},noop$2=()=>{},toFiniteNumber=(nt,rt)=>(nt=+nt,Number.isFinite(nt)?nt:rt),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(nt=16,rt=ALPHABET.ALPHA_DIGIT)=>{let it="";const{length:st}=rt;for(;nt--;)it+=rt[Math.random()*st|0];return it};function isSpecCompliantForm(nt){return!!(nt&&isFunction$2(nt.append)&&nt[Symbol.toStringTag]==="FormData"&&nt[Symbol.iterator])}const toJSONObject=nt=>{const rt=new Array(10),it=(st,lt)=>{if(isObject$2(st)){if(rt.indexOf(st)>=0)return;if(!("toJSON"in st)){rt[lt]=st;const ct=isArray$1(st)?[]:{};return forEach(st,(ut,dt)=>{const ht=it(ut,lt+1);!isUndefined$1(ht)&&(ct[dt]=ht)}),rt[lt]=void 0,ct}}return st};return it(nt,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=nt=>nt&&(isObject$2(nt)||isFunction$2(nt))&&isFunction$2(nt.then)&&isFunction$2(nt.catch),utils$2={isArray:isArray$1,isArrayBuffer:isArrayBuffer$1,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(nt,rt,it,st,lt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=nt,this.name="AxiosError",rt&&(this.code=rt),it&&(this.config=it),st&&(this.request=st),lt&&(this.response=lt)}utils$2.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(nt=>{descriptors$1[nt]={value:nt}});Object.defineProperties(AxiosError,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(nt,rt,it,st,lt,ct)=>{const ut=Object.create(prototype$1);return utils$2.toFlatObject(nt,ut,function(ht){return ht!==Error.prototype},dt=>dt!=="isAxiosError"),AxiosError.call(ut,nt.message,rt,it,st,lt),ut.cause=nt,ut.name=nt.name,ct&&Object.assign(ut,ct),ut};const httpAdapter=null;function isVisitable(nt){return utils$2.isPlainObject(nt)||utils$2.isArray(nt)}function removeBrackets(nt){return utils$2.endsWith(nt,"[]")?nt.slice(0,-2):nt}function renderKey(nt,rt,it){return nt?nt.concat(rt).map(function(lt,ct){return lt=removeBrackets(lt),!it&&ct?"["+lt+"]":lt}).join(it?".":""):rt}function isFlatArray(nt){return utils$2.isArray(nt)&&!nt.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(rt){return/^is[A-Z]/.test(rt)});function toFormData(nt,rt,it){if(!utils$2.isObject(nt))throw new TypeError("target must be an object");rt=rt||new FormData,it=utils$2.toFlatObject(it,{metaTokens:!0,dots:!1,indexes:!1},!1,function(vt,St){return!utils$2.isUndefined(St[vt])});const st=it.metaTokens,lt=it.visitor||ft,ct=it.dots,ut=it.indexes,ht=(it.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(rt);if(!utils$2.isFunction(lt))throw new TypeError("visitor must be a function");function pt(yt){if(yt===null)return"";if(utils$2.isDate(yt))return yt.toISOString();if(!ht&&utils$2.isBlob(yt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(yt)||utils$2.isTypedArray(yt)?ht&&typeof Blob=="function"?new Blob([yt]):Buffer.from(yt):yt}function ft(yt,vt,St){let Et=yt;if(yt&&!St&&typeof yt=="object"){if(utils$2.endsWith(vt,"{}"))vt=st?vt:vt.slice(0,-2),yt=JSON.stringify(yt);else if(utils$2.isArray(yt)&&isFlatArray(yt)||(utils$2.isFileList(yt)||utils$2.endsWith(vt,"[]"))&&(Et=utils$2.toArray(yt)))return vt=removeBrackets(vt),Et.forEach(function(Rt,Tt){!(utils$2.isUndefined(Rt)||Rt===null)&&rt.append(ut===!0?renderKey([vt],Tt,ct):ut===null?vt:vt+"[]",pt(Rt))}),!1}return isVisitable(yt)?!0:(rt.append(renderKey(St,vt,ct),pt(yt)),!1)}const mt=[],gt=Object.assign(predicates,{defaultVisitor:ft,convertValue:pt,isVisitable});function xt(yt,vt){if(!utils$2.isUndefined(yt)){if(mt.indexOf(yt)!==-1)throw Error("Circular reference detected in "+vt.join("."));mt.push(yt),utils$2.forEach(yt,function(Et,wt){(!(utils$2.isUndefined(Et)||Et===null)&&lt.call(rt,Et,utils$2.isString(wt)?wt.trim():wt,vt,gt))===!0&&xt(Et,vt?vt.concat(wt):[wt])}),mt.pop()}}if(!utils$2.isObject(nt))throw new TypeError("data must be an object");return xt(nt),rt}function encode$1(nt){const rt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(nt).replace(/[!'()~]|%20|%00/g,function(st){return rt[st]})}function AxiosURLSearchParams(nt,rt){this._pairs=[],nt&&toFormData(nt,this,rt)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(rt,it){this._pairs.push([rt,it])};prototype.toString=function(rt){const it=rt?function(st){return rt.call(this,st,encode$1)}:encode$1;return this._pairs.map(function(lt){return it(lt[0])+"="+it(lt[1])},"").join("&")};function encode(nt){return encodeURIComponent(nt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(nt,rt,it){if(!rt)return nt;const st=it&&it.encode||encode,lt=it&&it.serialize;let ct;if(lt?ct=lt(rt,it):ct=utils$2.isURLSearchParams(rt)?rt.toString():new AxiosURLSearchParams(rt,it).toString(st),ct){const ut=nt.indexOf("#");ut!==-1&&(nt=nt.slice(0,ut)),nt+=(nt.indexOf("?")===-1?"?":"&")+ct}return nt}class InterceptorManager{constructor(){this.handlers=[]}use(rt,it,st){return this.handlers.push({fulfilled:rt,rejected:it,synchronous:st?st.synchronous:!1,runWhen:st?st.runWhen:null}),this.handlers.length-1}eject(rt){this.handlers[rt]&&(this.handlers[rt]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(rt){utils$2.forEach(this.handlers,function(st){st!==null&&rt(st)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(nt=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(nt)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(nt,rt){return toFormData(nt,new platform.classes.URLSearchParams,Object.assign({visitor:function(it,st,lt,ct){return platform.isNode&&utils$2.isBuffer(it)?(this.append(st,it.toString("base64")),!1):ct.defaultVisitor.apply(this,arguments)}},rt))}function parsePropPath(nt){return utils$2.matchAll(/\w+|\[(\w*)]/g,nt).map(rt=>rt[0]==="[]"?"":rt[1]||rt[0])}function arrayToObject(nt){const rt={},it=Object.keys(nt);let st;const lt=it.length;let ct;for(st=0;st<lt;st++)ct=it[st],rt[ct]=nt[ct];return rt}function formDataToJSON(nt){function rt(it,st,lt,ct){let ut=it[ct++];if(ut==="__proto__")return!0;const dt=Number.isFinite(+ut),ht=ct>=it.length;return ut=!ut&&utils$2.isArray(lt)?lt.length:ut,ht?(utils$2.hasOwnProp(lt,ut)?lt[ut]=[lt[ut],st]:lt[ut]=st,!dt):((!lt[ut]||!utils$2.isObject(lt[ut]))&&(lt[ut]=[]),rt(it,st,lt[ut],ct)&&utils$2.isArray(lt[ut])&&(lt[ut]=arrayToObject(lt[ut])),!dt)}if(utils$2.isFormData(nt)&&utils$2.isFunction(nt.entries)){const it={};return utils$2.forEachEntry(nt,(st,lt)=>{rt(parsePropPath(st),lt,it,0)}),it}return null}function stringifySafely(nt,rt,it){if(utils$2.isString(nt))try{return(rt||JSON.parse)(nt),utils$2.trim(nt)}catch(st){if(st.name!=="SyntaxError")throw st}return(it||JSON.stringify)(nt)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(rt,it){const st=it.getContentType()||"",lt=st.indexOf("application/json")>-1,ct=utils$2.isObject(rt);if(ct&&utils$2.isHTMLForm(rt)&&(rt=new FormData(rt)),utils$2.isFormData(rt))return lt?JSON.stringify(formDataToJSON(rt)):rt;if(utils$2.isArrayBuffer(rt)||utils$2.isBuffer(rt)||utils$2.isStream(rt)||utils$2.isFile(rt)||utils$2.isBlob(rt))return rt;if(utils$2.isArrayBufferView(rt))return rt.buffer;if(utils$2.isURLSearchParams(rt))return it.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),rt.toString();let dt;if(ct){if(st.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(rt,this.formSerializer).toString();if((dt=utils$2.isFileList(rt))||st.indexOf("multipart/form-data")>-1){const ht=this.env&&this.env.FormData;return toFormData(dt?{"files[]":rt}:rt,ht&&new ht,this.formSerializer)}}return ct||lt?(it.setContentType("application/json",!1),stringifySafely(rt)):rt}],transformResponse:[function(rt){const it=this.transitional||defaults$1.transitional,st=it&&it.forcedJSONParsing,lt=this.responseType==="json";if(rt&&utils$2.isString(rt)&&(st&&!this.responseType||lt)){const ut=!(it&&it.silentJSONParsing)&&lt;try{return JSON.parse(rt)}catch(dt){if(ut)throw dt.name==="SyntaxError"?AxiosError.from(dt,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):dt}}return rt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(rt){return rt>=200&&rt<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],nt=>{defaults$1.headers[nt]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=nt=>{const rt={};let it,st,lt;return nt&&nt.split(`
`).forEach(function(ut){lt=ut.indexOf(":"),it=ut.substring(0,lt).trim().toLowerCase(),st=ut.substring(lt+1).trim(),!(!it||rt[it]&&ignoreDuplicateOf[it])&&(it==="set-cookie"?rt[it]?rt[it].push(st):rt[it]=[st]:rt[it]=rt[it]?rt[it]+", "+st:st)}),rt},$internals=Symbol("internals");function normalizeHeader(nt){return nt&&String(nt).trim().toLowerCase()}function normalizeValue(nt){return nt===!1||nt==null?nt:utils$2.isArray(nt)?nt.map(normalizeValue):String(nt)}function parseTokens(nt){const rt=Object.create(null),it=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let st;for(;st=it.exec(nt);)rt[st[1]]=st[2];return rt}const isValidHeaderName=nt=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(nt.trim());function matchHeaderValue(nt,rt,it,st,lt){if(utils$2.isFunction(st))return st.call(this,rt,it);if(lt&&(rt=it),!!utils$2.isString(rt)){if(utils$2.isString(st))return rt.indexOf(st)!==-1;if(utils$2.isRegExp(st))return st.test(rt)}}function formatHeader(nt){return nt.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(rt,it,st)=>it.toUpperCase()+st)}function buildAccessors(nt,rt){const it=utils$2.toCamelCase(" "+rt);["get","set","has"].forEach(st=>{Object.defineProperty(nt,st+it,{value:function(lt,ct,ut){return this[st].call(this,rt,lt,ct,ut)},configurable:!0})})}class AxiosHeaders{constructor(rt){rt&&this.set(rt)}set(rt,it,st){const lt=this;function ct(dt,ht,pt){const ft=normalizeHeader(ht);if(!ft)throw new Error("header name must be a non-empty string");const mt=utils$2.findKey(lt,ft);(!mt||lt[mt]===void 0||pt===!0||pt===void 0&&lt[mt]!==!1)&&(lt[mt||ht]=normalizeValue(dt))}const ut=(dt,ht)=>utils$2.forEach(dt,(pt,ft)=>ct(pt,ft,ht));return utils$2.isPlainObject(rt)||rt instanceof this.constructor?ut(rt,it):utils$2.isString(rt)&&(rt=rt.trim())&&!isValidHeaderName(rt)?ut(parseHeaders(rt),it):rt!=null&&ct(it,rt,st),this}get(rt,it){if(rt=normalizeHeader(rt),rt){const st=utils$2.findKey(this,rt);if(st){const lt=this[st];if(!it)return lt;if(it===!0)return parseTokens(lt);if(utils$2.isFunction(it))return it.call(this,lt,st);if(utils$2.isRegExp(it))return it.exec(lt);throw new TypeError("parser must be boolean|regexp|function")}}}has(rt,it){if(rt=normalizeHeader(rt),rt){const st=utils$2.findKey(this,rt);return!!(st&&this[st]!==void 0&&(!it||matchHeaderValue(this,this[st],st,it)))}return!1}delete(rt,it){const st=this;let lt=!1;function ct(ut){if(ut=normalizeHeader(ut),ut){const dt=utils$2.findKey(st,ut);dt&&(!it||matchHeaderValue(st,st[dt],dt,it))&&(delete st[dt],lt=!0)}}return utils$2.isArray(rt)?rt.forEach(ct):ct(rt),lt}clear(rt){const it=Object.keys(this);let st=it.length,lt=!1;for(;st--;){const ct=it[st];(!rt||matchHeaderValue(this,this[ct],ct,rt,!0))&&(delete this[ct],lt=!0)}return lt}normalize(rt){const it=this,st={};return utils$2.forEach(this,(lt,ct)=>{const ut=utils$2.findKey(st,ct);if(ut){it[ut]=normalizeValue(lt),delete it[ct];return}const dt=rt?formatHeader(ct):String(ct).trim();dt!==ct&&delete it[ct],it[dt]=normalizeValue(lt),st[dt]=!0}),this}concat(...rt){return this.constructor.concat(this,...rt)}toJSON(rt){const it=Object.create(null);return utils$2.forEach(this,(st,lt)=>{st!=null&&st!==!1&&(it[lt]=rt&&utils$2.isArray(st)?st.join(", "):st)}),it}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([rt,it])=>rt+": "+it).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(rt){return rt instanceof this?rt:new this(rt)}static concat(rt,...it){const st=new this(rt);return it.forEach(lt=>st.set(lt)),st}static accessor(rt){const st=(this[$internals]=this[$internals]={accessors:{}}).accessors,lt=this.prototype;function ct(ut){const dt=normalizeHeader(ut);st[dt]||(buildAccessors(lt,ut),st[dt]=!0)}return utils$2.isArray(rt)?rt.forEach(ct):ct(rt),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:nt},rt)=>{let it=rt[0].toUpperCase()+rt.slice(1);return{get:()=>nt,set(st){this[it]=st}}});utils$2.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(nt,rt){const it=this||defaults$2,st=rt||it,lt=AxiosHeaders$1.from(st.headers);let ct=st.data;return utils$2.forEach(nt,function(dt){ct=dt.call(it,ct,lt.normalize(),rt?rt.status:void 0)}),lt.normalize(),ct}function isCancel(nt){return!!(nt&&nt.__CANCEL__)}function CanceledError(nt,rt,it){AxiosError.call(this,nt??"canceled",AxiosError.ERR_CANCELED,rt,it),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(nt,rt,it){const st=it.config.validateStatus;!it.status||!st||st(it.status)?nt(it):rt(new AxiosError("Request failed with status code "+it.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(it.status/100)-4],it.config,it.request,it))}const cookies=platform.hasStandardBrowserEnv?{write(nt,rt,it,st,lt,ct){const ut=[nt+"="+encodeURIComponent(rt)];utils$2.isNumber(it)&&ut.push("expires="+new Date(it).toGMTString()),utils$2.isString(st)&&ut.push("path="+st),utils$2.isString(lt)&&ut.push("domain="+lt),ct===!0&&ut.push("secure"),document.cookie=ut.join("; ")},read(nt){const rt=document.cookie.match(new RegExp("(^|;\\s*)("+nt+")=([^;]*)"));return rt?decodeURIComponent(rt[3]):null},remove(nt){this.write(nt,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(nt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(nt)}function combineURLs(nt,rt){return rt?nt.replace(/\/?\/$/,"")+"/"+rt.replace(/^\/+/,""):nt}function buildFullPath(nt,rt){return nt&&!isAbsoluteURL(rt)?combineURLs(nt,rt):rt}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const rt=/(msie|trident)/i.test(navigator.userAgent),it=document.createElement("a");let st;function lt(ct){let ut=ct;return rt&&(it.setAttribute("href",ut),ut=it.href),it.setAttribute("href",ut),{href:it.href,protocol:it.protocol?it.protocol.replace(/:$/,""):"",host:it.host,search:it.search?it.search.replace(/^\?/,""):"",hash:it.hash?it.hash.replace(/^#/,""):"",hostname:it.hostname,port:it.port,pathname:it.pathname.charAt(0)==="/"?it.pathname:"/"+it.pathname}}return st=lt(window.location.href),function(ut){const dt=utils$2.isString(ut)?lt(ut):ut;return dt.protocol===st.protocol&&dt.host===st.host}}():function(){return function(){return!0}}();function parseProtocol(nt){const rt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(nt);return rt&&rt[1]||""}function speedometer(nt,rt){nt=nt||10;const it=new Array(nt),st=new Array(nt);let lt=0,ct=0,ut;return rt=rt!==void 0?rt:1e3,function(ht){const pt=Date.now(),ft=st[ct];ut||(ut=pt),it[lt]=ht,st[lt]=pt;let mt=ct,gt=0;for(;mt!==lt;)gt+=it[mt++],mt=mt%nt;if(lt=(lt+1)%nt,lt===ct&&(ct=(ct+1)%nt),pt-ut<rt)return;const xt=ft&&pt-ft;return xt?Math.round(gt*1e3/xt):void 0}}function progressEventReducer(nt,rt){let it=0;const st=speedometer(50,250);return lt=>{const ct=lt.loaded,ut=lt.lengthComputable?lt.total:void 0,dt=ct-it,ht=st(dt),pt=ct<=ut;it=ct;const ft={loaded:ct,total:ut,progress:ut?ct/ut:void 0,bytes:dt,rate:ht||void 0,estimated:ht&&ut&&pt?(ut-ct)/ht:void 0,event:lt};ft[rt?"download":"upload"]=!0,nt(ft)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(nt){return new Promise(function(it,st){let lt=nt.data;const ct=AxiosHeaders$1.from(nt.headers).normalize();let{responseType:ut,withXSRFToken:dt}=nt,ht;function pt(){nt.cancelToken&&nt.cancelToken.unsubscribe(ht),nt.signal&&nt.signal.removeEventListener("abort",ht)}let ft;if(utils$2.isFormData(lt)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)ct.setContentType(!1);else if((ft=ct.getContentType())!==!1){const[vt,...St]=ft?ft.split(";").map(Et=>Et.trim()).filter(Boolean):[];ct.setContentType([vt||"multipart/form-data",...St].join("; "))}}let mt=new XMLHttpRequest;if(nt.auth){const vt=nt.auth.username||"",St=nt.auth.password?unescape(encodeURIComponent(nt.auth.password)):"";ct.set("Authorization","Basic "+btoa(vt+":"+St))}const gt=buildFullPath(nt.baseURL,nt.url);mt.open(nt.method.toUpperCase(),buildURL(gt,nt.params,nt.paramsSerializer),!0),mt.timeout=nt.timeout;function xt(){if(!mt)return;const vt=AxiosHeaders$1.from("getAllResponseHeaders"in mt&&mt.getAllResponseHeaders()),Et={data:!ut||ut==="text"||ut==="json"?mt.responseText:mt.response,status:mt.status,statusText:mt.statusText,headers:vt,config:nt,request:mt};settle(function(Rt){it(Rt),pt()},function(Rt){st(Rt),pt()},Et),mt=null}if("onloadend"in mt?mt.onloadend=xt:mt.onreadystatechange=function(){!mt||mt.readyState!==4||mt.status===0&&!(mt.responseURL&&mt.responseURL.indexOf("file:")===0)||setTimeout(xt)},mt.onabort=function(){mt&&(st(new AxiosError("Request aborted",AxiosError.ECONNABORTED,nt,mt)),mt=null)},mt.onerror=function(){st(new AxiosError("Network Error",AxiosError.ERR_NETWORK,nt,mt)),mt=null},mt.ontimeout=function(){let St=nt.timeout?"timeout of "+nt.timeout+"ms exceeded":"timeout exceeded";const Et=nt.transitional||transitionalDefaults;nt.timeoutErrorMessage&&(St=nt.timeoutErrorMessage),st(new AxiosError(St,Et.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,nt,mt)),mt=null},platform.hasStandardBrowserEnv&&(dt&&utils$2.isFunction(dt)&&(dt=dt(nt)),dt||dt!==!1&&isURLSameOrigin(gt))){const vt=nt.xsrfHeaderName&&nt.xsrfCookieName&&cookies.read(nt.xsrfCookieName);vt&&ct.set(nt.xsrfHeaderName,vt)}lt===void 0&&ct.setContentType(null),"setRequestHeader"in mt&&utils$2.forEach(ct.toJSON(),function(St,Et){mt.setRequestHeader(Et,St)}),utils$2.isUndefined(nt.withCredentials)||(mt.withCredentials=!!nt.withCredentials),ut&&ut!=="json"&&(mt.responseType=nt.responseType),typeof nt.onDownloadProgress=="function"&&mt.addEventListener("progress",progressEventReducer(nt.onDownloadProgress,!0)),typeof nt.onUploadProgress=="function"&&mt.upload&&mt.upload.addEventListener("progress",progressEventReducer(nt.onUploadProgress)),(nt.cancelToken||nt.signal)&&(ht=vt=>{mt&&(st(!vt||vt.type?new CanceledError(null,nt,mt):vt),mt.abort(),mt=null)},nt.cancelToken&&nt.cancelToken.subscribe(ht),nt.signal&&(nt.signal.aborted?ht():nt.signal.addEventListener("abort",ht)));const yt=parseProtocol(gt);if(yt&&platform.protocols.indexOf(yt)===-1){st(new AxiosError("Unsupported protocol "+yt+":",AxiosError.ERR_BAD_REQUEST,nt));return}mt.send(lt||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$2.forEach(knownAdapters,(nt,rt)=>{if(nt){try{Object.defineProperty(nt,"name",{value:rt})}catch{}Object.defineProperty(nt,"adapterName",{value:rt})}});const renderReason=nt=>`- ${nt}`,isResolvedHandle=nt=>utils$2.isFunction(nt)||nt===null||nt===!1,adapters$1={getAdapter:nt=>{nt=utils$2.isArray(nt)?nt:[nt];const{length:rt}=nt;let it,st;const lt={};for(let ct=0;ct<rt;ct++){it=nt[ct];let ut;if(st=it,!isResolvedHandle(it)&&(st=knownAdapters[(ut=String(it)).toLowerCase()],st===void 0))throw new AxiosError(`Unknown adapter '${ut}'`);if(st)break;lt[ut||"#"+ct]=st}if(!st){const ct=Object.entries(lt).map(([dt,ht])=>`adapter ${dt} `+(ht===!1?"is not supported by the environment":"is not available in the build"));let ut=rt?ct.length>1?`since :
`+ct.map(renderReason).join(`
`):" "+renderReason(ct[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+ut,"ERR_NOT_SUPPORT")}return st},adapters:knownAdapters};function throwIfCancellationRequested(nt){if(nt.cancelToken&&nt.cancelToken.throwIfRequested(),nt.signal&&nt.signal.aborted)throw new CanceledError(null,nt)}function dispatchRequest(nt){return throwIfCancellationRequested(nt),nt.headers=AxiosHeaders$1.from(nt.headers),nt.data=transformData.call(nt,nt.transformRequest),["post","put","patch"].indexOf(nt.method)!==-1&&nt.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(nt.adapter||defaults$2.adapter)(nt).then(function(st){return throwIfCancellationRequested(nt),st.data=transformData.call(nt,nt.transformResponse,st),st.headers=AxiosHeaders$1.from(st.headers),st},function(st){return isCancel(st)||(throwIfCancellationRequested(nt),st&&st.response&&(st.response.data=transformData.call(nt,nt.transformResponse,st.response),st.response.headers=AxiosHeaders$1.from(st.response.headers))),Promise.reject(st)})}const headersToObject=nt=>nt instanceof AxiosHeaders$1?nt.toJSON():nt;function mergeConfig(nt,rt){rt=rt||{};const it={};function st(pt,ft,mt){return utils$2.isPlainObject(pt)&&utils$2.isPlainObject(ft)?utils$2.merge.call({caseless:mt},pt,ft):utils$2.isPlainObject(ft)?utils$2.merge({},ft):utils$2.isArray(ft)?ft.slice():ft}function lt(pt,ft,mt){if(utils$2.isUndefined(ft)){if(!utils$2.isUndefined(pt))return st(void 0,pt,mt)}else return st(pt,ft,mt)}function ct(pt,ft){if(!utils$2.isUndefined(ft))return st(void 0,ft)}function ut(pt,ft){if(utils$2.isUndefined(ft)){if(!utils$2.isUndefined(pt))return st(void 0,pt)}else return st(void 0,ft)}function dt(pt,ft,mt){if(mt in rt)return st(pt,ft);if(mt in nt)return st(void 0,pt)}const ht={url:ct,method:ct,data:ct,baseURL:ut,transformRequest:ut,transformResponse:ut,paramsSerializer:ut,timeout:ut,timeoutMessage:ut,withCredentials:ut,withXSRFToken:ut,adapter:ut,responseType:ut,xsrfCookieName:ut,xsrfHeaderName:ut,onUploadProgress:ut,onDownloadProgress:ut,decompress:ut,maxContentLength:ut,maxBodyLength:ut,beforeRedirect:ut,transport:ut,httpAgent:ut,httpsAgent:ut,cancelToken:ut,socketPath:ut,responseEncoding:ut,validateStatus:dt,headers:(pt,ft)=>lt(headersToObject(pt),headersToObject(ft),!0)};return utils$2.forEach(Object.keys(Object.assign({},nt,rt)),function(ft){const mt=ht[ft]||lt,gt=mt(nt[ft],rt[ft],ft);utils$2.isUndefined(gt)&&mt!==dt||(it[ft]=gt)}),it}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((nt,rt)=>{validators$1[nt]=function(st){return typeof st===nt||"a"+(rt<1?"n ":" ")+nt}});const deprecatedWarnings={};validators$1.transitional=function(rt,it,st){function lt(ct,ut){return"[Axios v"+VERSION+"] Transitional option '"+ct+"'"+ut+(st?". "+st:"")}return(ct,ut,dt)=>{if(rt===!1)throw new AxiosError(lt(ut," has been removed"+(it?" in "+it:"")),AxiosError.ERR_DEPRECATED);return it&&!deprecatedWarnings[ut]&&(deprecatedWarnings[ut]=!0,console.warn(lt(ut," has been deprecated since v"+it+" and will be removed in the near future"))),rt?rt(ct,ut,dt):!0}};function assertOptions(nt,rt,it){if(typeof nt!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const st=Object.keys(nt);let lt=st.length;for(;lt-- >0;){const ct=st[lt],ut=rt[ct];if(ut){const dt=nt[ct],ht=dt===void 0||ut(dt,ct,nt);if(ht!==!0)throw new AxiosError("option "+ct+" must be "+ht,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(it!==!0)throw new AxiosError("Unknown option "+ct,AxiosError.ERR_BAD_OPTION)}}const validator$3={assertOptions,validators:validators$1},validators=validator$3.validators;class Axios{constructor(rt){this.defaults=rt,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(rt,it){try{return await this._request(rt,it)}catch(st){if(st instanceof Error){let lt;Error.captureStackTrace?Error.captureStackTrace(lt={}):lt=new Error;const ct=lt.stack?lt.stack.replace(/^.+\n/,""):"";st.stack?ct&&!String(st.stack).endsWith(ct.replace(/^.+\n.+\n/,""))&&(st.stack+=`
`+ct):st.stack=ct}throw st}}_request(rt,it){typeof rt=="string"?(it=it||{},it.url=rt):it=rt||{},it=mergeConfig(this.defaults,it);const{transitional:st,paramsSerializer:lt,headers:ct}=it;st!==void 0&&validator$3.assertOptions(st,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),lt!=null&&(utils$2.isFunction(lt)?it.paramsSerializer={serialize:lt}:validator$3.assertOptions(lt,{encode:validators.function,serialize:validators.function},!0)),it.method=(it.method||this.defaults.method||"get").toLowerCase();let ut=ct&&utils$2.merge(ct.common,ct[it.method]);ct&&utils$2.forEach(["delete","get","head","post","put","patch","common"],yt=>{delete ct[yt]}),it.headers=AxiosHeaders$1.concat(ut,ct);const dt=[];let ht=!0;this.interceptors.request.forEach(function(vt){typeof vt.runWhen=="function"&&vt.runWhen(it)===!1||(ht=ht&&vt.synchronous,dt.unshift(vt.fulfilled,vt.rejected))});const pt=[];this.interceptors.response.forEach(function(vt){pt.push(vt.fulfilled,vt.rejected)});let ft,mt=0,gt;if(!ht){const yt=[dispatchRequest.bind(this),void 0];for(yt.unshift.apply(yt,dt),yt.push.apply(yt,pt),gt=yt.length,ft=Promise.resolve(it);mt<gt;)ft=ft.then(yt[mt++],yt[mt++]);return ft}gt=dt.length;let xt=it;for(mt=0;mt<gt;){const yt=dt[mt++],vt=dt[mt++];try{xt=yt(xt)}catch(St){vt.call(this,St);break}}try{ft=dispatchRequest.call(this,xt)}catch(yt){return Promise.reject(yt)}for(mt=0,gt=pt.length;mt<gt;)ft=ft.then(pt[mt++],pt[mt++]);return ft}getUri(rt){rt=mergeConfig(this.defaults,rt);const it=buildFullPath(rt.baseURL,rt.url);return buildURL(it,rt.params,rt.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function(rt){Axios.prototype[rt]=function(it,st){return this.request(mergeConfig(st||{},{method:rt,url:it,data:(st||{}).data}))}});utils$2.forEach(["post","put","patch"],function(rt){function it(st){return function(ct,ut,dt){return this.request(mergeConfig(dt||{},{method:rt,headers:st?{"Content-Type":"multipart/form-data"}:{},url:ct,data:ut}))}}Axios.prototype[rt]=it(),Axios.prototype[rt+"Form"]=it(!0)});const Axios$1=Axios;class CancelToken{constructor(rt){if(typeof rt!="function")throw new TypeError("executor must be a function.");let it;this.promise=new Promise(function(ct){it=ct});const st=this;this.promise.then(lt=>{if(!st._listeners)return;let ct=st._listeners.length;for(;ct-- >0;)st._listeners[ct](lt);st._listeners=null}),this.promise.then=lt=>{let ct;const ut=new Promise(dt=>{st.subscribe(dt),ct=dt}).then(lt);return ut.cancel=function(){st.unsubscribe(ct)},ut},rt(function(ct,ut,dt){st.reason||(st.reason=new CanceledError(ct,ut,dt),it(st.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(rt){if(this.reason){rt(this.reason);return}this._listeners?this._listeners.push(rt):this._listeners=[rt]}unsubscribe(rt){if(!this._listeners)return;const it=this._listeners.indexOf(rt);it!==-1&&this._listeners.splice(it,1)}static source(){let rt;return{token:new CancelToken(function(lt){rt=lt}),cancel:rt}}}const CancelToken$1=CancelToken;function spread(nt){return function(it){return nt.apply(null,it)}}function isAxiosError(nt){return utils$2.isObject(nt)&&nt.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([nt,rt])=>{HttpStatusCode[rt]=nt});const HttpStatusCode$1=HttpStatusCode;function createInstance(nt){const rt=new Axios$1(nt),it=bind(Axios$1.prototype.request,rt);return utils$2.extend(it,Axios$1.prototype,rt,{allOwnKeys:!0}),utils$2.extend(it,rt,null,{allOwnKeys:!0}),it.create=function(lt){return createInstance(mergeConfig(nt,lt))},it}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(rt){return Promise.all(rt)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=nt=>formDataToJSON(utils$2.isHTMLForm(nt)?new FormData(nt):nt);axios.getAdapter=adapters$1.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var define_process_env_default$1={};function err(nt){const rt=new Error(nt);if(rt.stack===void 0)try{throw rt}catch{}return rt}var err_1=err,Recoil_err=err_1;function isPromise$1(nt){return!!nt&&typeof nt.then=="function"}var Recoil_isPromise=isPromise$1;function nullthrows(nt,rt){if(nt!=null)return nt;throw Recoil_err(rt??"Got unexpected null or undefined")}var Recoil_nullthrows=nullthrows;function _defineProperty$2(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}class BaseLoadable{getValue(){throw Recoil_err("BaseLoadable")}toPromise(){throw Recoil_err("BaseLoadable")}valueMaybe(){throw Recoil_err("BaseLoadable")}valueOrThrow(){throw Recoil_err(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Recoil_err("BaseLoadable")}promiseOrThrow(){throw Recoil_err(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Recoil_err("BaseLoadable")}errorOrThrow(){throw Recoil_err(`Loadable expected error, but in "${this.state}" state`)}is(rt){return rt.state===this.state&&rt.contents===this.contents}map(rt){throw Recoil_err("BaseLoadable")}}class ValueLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","hasValue"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(rt){try{const it=rt(this.contents);return Recoil_isPromise(it)?loadableWithPromise(it):isLoadable(it)?it:loadableWithValue(it)}catch(it){return Recoil_isPromise(it)?loadableWithPromise(it.next(()=>this.map(rt))):loadableWithError(it)}}}class ErrorLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","hasError"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(rt){return this}}class LoadingLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","loading"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(rt){return loadableWithPromise(this.contents.then(it=>{const st=rt(it);if(isLoadable(st)){const lt=st;switch(lt.state){case"hasValue":return lt.contents;case"hasError":throw lt.contents;case"loading":return lt.contents}}return st}).catch(it=>{if(Recoil_isPromise(it))return it.then(()=>this.map(rt).contents);throw it}))}}function loadableWithValue(nt){return Object.freeze(new ValueLoadable(nt))}function loadableWithError(nt){return Object.freeze(new ErrorLoadable(nt))}function loadableWithPromise(nt){return Object.freeze(new LoadingLoadable(nt))}function loadableLoading(){return Object.freeze(new LoadingLoadable(new Promise(()=>{})))}function loadableAllArray(nt){return nt.every(rt=>rt.state==="hasValue")?loadableWithValue(nt.map(rt=>rt.contents)):nt.some(rt=>rt.state==="hasError")?loadableWithError(Recoil_nullthrows(nt.find(rt=>rt.state==="hasError"),"Invalid loadable passed to loadableAll").contents):loadableWithPromise(Promise.all(nt.map(rt=>rt.contents)))}function loadableAll(nt){const it=(Array.isArray(nt)?nt:Object.getOwnPropertyNames(nt).map(lt=>nt[lt])).map(lt=>isLoadable(lt)?lt:Recoil_isPromise(lt)?loadableWithPromise(lt):loadableWithValue(lt)),st=loadableAllArray(it);return Array.isArray(nt)?st:st.map(lt=>Object.getOwnPropertyNames(nt).reduce((ct,ut,dt)=>({...ct,[ut]:lt[dt]}),{}))}function isLoadable(nt){return nt instanceof BaseLoadable}const LoadableStaticInterface={of:nt=>Recoil_isPromise(nt)?loadableWithPromise(nt):isLoadable(nt)?nt:loadableWithValue(nt),error:nt=>loadableWithError(nt),loading:()=>loadableLoading(),all:loadableAll,isLoadable};var Recoil_Loadable={loadableWithValue,loadableWithError,loadableWithPromise,loadableLoading,loadableAll,isLoadable,RecoilLoadable:LoadableStaticInterface},Recoil_Loadable_1=Recoil_Loadable.loadableWithValue,Recoil_Loadable_2=Recoil_Loadable.loadableWithError,Recoil_Loadable_3=Recoil_Loadable.loadableWithPromise,Recoil_Loadable_4=Recoil_Loadable.loadableLoading,Recoil_Loadable_5=Recoil_Loadable.loadableAll,Recoil_Loadable_6=Recoil_Loadable.isLoadable,Recoil_Loadable_7=Recoil_Loadable.RecoilLoadable,Recoil_Loadable$1=Object.freeze({__proto__:null,loadableWithValue:Recoil_Loadable_1,loadableWithError:Recoil_Loadable_2,loadableWithPromise:Recoil_Loadable_3,loadableLoading:Recoil_Loadable_4,loadableAll:Recoil_Loadable_5,isLoadable:Recoil_Loadable_6,RecoilLoadable:Recoil_Loadable_7});const env={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function readProcessEnvBooleanFlag(nt,rt){var it,st;const lt=(it=define_process_env_default$1[nt])===null||it===void 0||(st=it.toLowerCase())===null||st===void 0?void 0:st.trim();if(lt==null||lt==="")return;if(!["true","false"].includes(lt))throw Recoil_err(`process.env.${nt} value must be 'true', 'false', or empty: ${lt}`);rt(lt==="true")}function readProcessEnvStringArrayFlag(nt,rt){var it;const st=(it=define_process_env_default$1[nt])===null||it===void 0?void 0:it.trim();st==null||st===""||rt(st.split(/\s*,\s*|\s+/))}function applyProcessEnvFlagOverrides(){var nt;typeof process>"u"||((nt=process)===null||nt===void 0?void 0:nt.env)!=null&&(readProcessEnvBooleanFlag("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",rt=>{env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=rt}),readProcessEnvStringArrayFlag("RECOIL_GKS_ENABLED",rt=>{rt.forEach(it=>{env.RECOIL_GKS_ENABLED.add(it)})}))}applyProcessEnvFlagOverrides();var Recoil_RecoilEnv=env;function Recoil_gkx_OSS(nt){return Recoil_RecoilEnv.RECOIL_GKS_ENABLED.has(nt)}Recoil_gkx_OSS.setPass=nt=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.add(nt)};Recoil_gkx_OSS.setFail=nt=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.delete(nt)};Recoil_gkx_OSS.clear=()=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.clear()};var Recoil_gkx=Recoil_gkx_OSS;function recoverableViolation(nt,rt,{error:it}={}){return null}var recoverableViolation_1=recoverableViolation,Recoil_recoverableViolation=recoverableViolation_1,_createMutableSource,_useMutableSource,_useSyncExternalStore;const createMutableSource=(_createMutableSource=e$2.createMutableSource)!==null&&_createMutableSource!==void 0?_createMutableSource:e$2.unstable_createMutableSource,useMutableSource=(_useMutableSource=e$2.useMutableSource)!==null&&_useMutableSource!==void 0?_useMutableSource:e$2.unstable_useMutableSource,useSyncExternalStore=(_useSyncExternalStore=e$2.useSyncExternalStore)!==null&&_useSyncExternalStore!==void 0?_useSyncExternalStore:e$2.unstable_useSyncExternalStore;function currentRendererSupportsUseSyncExternalStore(){var nt;const{ReactCurrentDispatcher:rt,ReactCurrentOwner:it}=e$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((nt=rt==null?void 0:rt.current)!==null&&nt!==void 0?nt:it.currentDispatcher).useSyncExternalStore!=null}function reactMode(){return Recoil_gkx("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Recoil_gkx("recoil_sync_external_store")&&useSyncExternalStore!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Recoil_gkx("recoil_mutable_source")&&useMutableSource!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function isFastRefreshEnabled(){return!1}var Recoil_ReactMode={createMutableSource,useMutableSource,useSyncExternalStore,currentRendererSupportsUseSyncExternalStore,reactMode,isFastRefreshEnabled};class AbstractRecoilValue{constructor(rt){_defineProperty$2(this,"key",void 0),this.key=rt}toJSON(){return{key:this.key}}}class RecoilState extends AbstractRecoilValue{}class RecoilValueReadOnly extends AbstractRecoilValue{}function isRecoilValue(nt){return nt instanceof RecoilState||nt instanceof RecoilValueReadOnly}var Recoil_RecoilValue={AbstractRecoilValue,RecoilState,RecoilValueReadOnly,isRecoilValue},Recoil_RecoilValue_1=Recoil_RecoilValue.AbstractRecoilValue,Recoil_RecoilValue_2=Recoil_RecoilValue.RecoilState,Recoil_RecoilValue_3=Recoil_RecoilValue.RecoilValueReadOnly,Recoil_RecoilValue_4=Recoil_RecoilValue.isRecoilValue,Recoil_RecoilValue$1=Object.freeze({__proto__:null,AbstractRecoilValue:Recoil_RecoilValue_1,RecoilState:Recoil_RecoilValue_2,RecoilValueReadOnly:Recoil_RecoilValue_3,isRecoilValue:Recoil_RecoilValue_4});function mapIterable(nt,rt){return function*(){let it=0;for(const st of nt)yield rt(st,it++)}()}var Recoil_mapIterable=mapIterable;class DefaultValue{}const DEFAULT_VALUE=new DefaultValue,nodes=new Map,recoilValues=new Map;function recoilValuesForKeys(nt){return Recoil_mapIterable(nt,rt=>Recoil_nullthrows(recoilValues.get(rt)))}function checkForDuplicateAtomKey(nt){if(nodes.has(nt)){const rt=`Duplicate atom key "${nt}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(rt)}}function registerNode(nt){Recoil_RecoilEnv.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&checkForDuplicateAtomKey(nt.key),nodes.set(nt.key,nt);const rt=nt.set==null?new Recoil_RecoilValue$1.RecoilValueReadOnly(nt.key):new Recoil_RecoilValue$1.RecoilState(nt.key);return recoilValues.set(nt.key,rt),rt}class NodeMissingError extends Error{}function getNode(nt){const rt=nodes.get(nt);if(rt==null)throw new NodeMissingError(`Missing definition for RecoilValue: "${nt}""`);return rt}function getNodeMaybe(nt){return nodes.get(nt)}const configDeletionHandlers=new Map;function deleteNodeConfigIfPossible(nt){var rt;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const it=nodes.get(nt);if(it!=null&&(rt=it.shouldDeleteConfigOnRelease)!==null&&rt!==void 0&&rt.call(it)){var st;nodes.delete(nt),(st=getConfigDeletionHandler(nt))===null||st===void 0||st(),configDeletionHandlers.delete(nt)}}function setConfigDeletionHandler(nt,rt){Recoil_gkx("recoil_memory_managament_2020")&&(rt===void 0?configDeletionHandlers.delete(nt):configDeletionHandlers.set(nt,rt))}function getConfigDeletionHandler(nt){return configDeletionHandlers.get(nt)}var Recoil_Node={nodes,recoilValues,registerNode,getNode,getNodeMaybe,deleteNodeConfigIfPossible,setConfigDeletionHandler,getConfigDeletionHandler,recoilValuesForKeys,NodeMissingError,DefaultValue,DEFAULT_VALUE};function enqueueExecution(nt,rt){rt()}var Recoil_Queue={enqueueExecution};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}var hamt_1=createCommonjsModule(function(nt){var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Cr){return typeof Cr}:function(Cr){return Cr&&typeof Symbol=="function"&&Cr.constructor===Symbol&&Cr!==Symbol.prototype?"symbol":typeof Cr},it={},st=5,lt=Math.pow(2,st),ct=lt-1,ut=lt/2,dt=lt/4,ht={},pt=function(nr){return function(){return nr}},ft=it.hash=function(Cr){var nr=typeof Cr>"u"?"undefined":rt(Cr);if(nr==="number")return Cr;nr!=="string"&&(Cr+="");for(var Ur=0,Mr=0,rn=Cr.length;Mr<rn;++Mr){var Cn=Cr.charCodeAt(Mr);Ur=(Ur<<5)-Ur+Cn|0}return Ur},mt=function(nr){return nr-=nr>>1&1431655765,nr=(nr&858993459)+(nr>>2&858993459),nr=nr+(nr>>4)&252645135,nr+=nr>>8,nr+=nr>>16,nr&127},gt=function(nr,Ur){return Ur>>>nr&ct},xt=function(nr){return 1<<nr},yt=function(nr,Ur){return mt(nr&Ur-1)},vt=function(nr,Ur,Mr,rn){var Cn=rn;if(!nr){var Rr=rn.length;Cn=new Array(Rr);for(var pn=0;pn<Rr;++pn)Cn[pn]=rn[pn]}return Cn[Ur]=Mr,Cn},St=function(nr,Ur,Mr){var rn=Mr.length-1,Cn=0,Rr=0,pn=Mr;if(nr)Cn=Rr=Ur;else for(pn=new Array(rn);Cn<Ur;)pn[Rr++]=Mr[Cn++];for(++Cn;Cn<=rn;)pn[Rr++]=Mr[Cn++];return nr&&(pn.length=rn),pn},Et=function(nr,Ur,Mr,rn){var Cn=rn.length;if(nr){for(var Rr=Cn;Rr>=Ur;)rn[Rr--]=rn[Rr];return rn[Ur]=Mr,rn}for(var pn=0,Tr=0,xr=new Array(Cn+1);pn<Ur;)xr[Tr++]=rn[pn++];for(xr[Ur]=Mr;pn<Cn;)xr[++Tr]=rn[pn++];return xr},wt=1,Rt=2,Tt=3,It=4,At={__hamt_isEmpty:!0},Dt=function(nr){return nr===At||nr&&nr.__hamt_isEmpty},jt=function(nr,Ur,Mr,rn){return{type:wt,edit:nr,hash:Ur,key:Mr,value:rn,_modify:Bt}},Ft=function(nr,Ur,Mr){return{type:Rt,edit:nr,hash:Ur,children:Mr,_modify:Ht}},Lt=function(nr,Ur,Mr){return{type:Tt,edit:nr,mask:Ur,children:Mr,_modify:Gt}},Pt=function(nr,Ur,Mr){return{type:It,edit:nr,size:Ur,children:Mr,_modify:Kt}},Ot=function(nr){return nr===At||nr.type===wt||nr.type===Rt},Nt=function(nr,Ur,Mr,rn,Cn){for(var Rr=[],pn=rn,Tr=0,xr=0;pn;++xr)pn&1&&(Rr[xr]=Cn[Tr++]),pn>>>=1;return Rr[Ur]=Mr,Pt(nr,Tr+1,Rr)},$t=function(nr,Ur,Mr,rn){for(var Cn=new Array(Ur-1),Rr=0,pn=0,Tr=0,xr=rn.length;Tr<xr;++Tr)if(Tr!==Mr){var jr=rn[Tr];jr&&!Dt(jr)&&(Cn[Rr++]=jr,pn|=1<<Tr)}return Lt(nr,pn,Cn)},Vt=function Cr(nr,Ur,Mr,rn,Cn,Rr){if(Mr===Cn)return Ft(nr,Mr,[Rr,rn]);var pn=gt(Ur,Mr),Tr=gt(Ur,Cn);return Lt(nr,xt(pn)|xt(Tr),pn===Tr?[Cr(nr,Ur+st,Mr,rn,Cn,Rr)]:pn<Tr?[rn,Rr]:[Rr,rn])},Ut=function(nr,Ur,Mr,rn,Cn,Rr,pn,Tr){for(var xr=Cn.length,jr=0;jr<xr;++jr){var en=Cn[jr];if(Mr(pn,en.key)){var fn=en.value,Vn=Rr(fn);return Vn===fn?Cn:Vn===ht?(--Tr.value,St(nr,jr,Cn)):vt(nr,jr,jt(Ur,rn,pn,Vn),Cn)}}var Yn=Rr();return Yn===ht?Cn:(++Tr.value,vt(nr,xr,jt(Ur,rn,pn,Yn),Cn))},zt=function(nr,Ur){return nr===Ur.edit},Bt=function(nr,Ur,Mr,rn,Cn,Rr,pn){if(Ur(Rr,this.key)){var Tr=rn(this.value);return Tr===this.value?this:Tr===ht?(--pn.value,At):zt(nr,this)?(this.value=Tr,this):jt(nr,Cn,Rr,Tr)}var xr=rn();return xr===ht?this:(++pn.value,Vt(nr,Mr,this.hash,this,Cn,jt(nr,Cn,Rr,xr)))},Ht=function(nr,Ur,Mr,rn,Cn,Rr,pn){if(Cn===this.hash){var Tr=zt(nr,this),xr=Ut(Tr,nr,Ur,this.hash,this.children,rn,Rr,pn);return xr===this.children?this:xr.length>1?Ft(nr,this.hash,xr):xr[0]}var jr=rn();return jr===ht?this:(++pn.value,Vt(nr,Mr,this.hash,this,Cn,jt(nr,Cn,Rr,jr)))},Gt=function(nr,Ur,Mr,rn,Cn,Rr,pn){var Tr=this.mask,xr=this.children,jr=gt(Mr,Cn),en=xt(jr),fn=yt(Tr,en),Vn=Tr&en,Yn=Vn?xr[fn]:At,Hn=Yn._modify(nr,Ur,Mr+st,rn,Cn,Rr,pn);if(Yn===Hn)return this;var Bn=zt(nr,this),es=Tr,$s=void 0;if(Vn&&Dt(Hn)){if(es&=~en,!es)return At;if(xr.length<=2&&Ot(xr[fn^1]))return xr[fn^1];$s=St(Bn,fn,xr)}else if(!Vn&&!Dt(Hn)){if(xr.length>=ut)return Nt(nr,jr,Hn,Tr,xr);es|=en,$s=Et(Bn,fn,Hn,xr)}else $s=vt(Bn,fn,Hn,xr);return Bn?(this.mask=es,this.children=$s,this):Lt(nr,es,$s)},Kt=function(nr,Ur,Mr,rn,Cn,Rr,pn){var Tr=this.size,xr=this.children,jr=gt(Mr,Cn),en=xr[jr],fn=(en||At)._modify(nr,Ur,Mr+st,rn,Cn,Rr,pn);if(en===fn)return this;var Vn=zt(nr,this),Yn=void 0;if(Dt(en)&&!Dt(fn))++Tr,Yn=vt(Vn,jr,fn,xr);else if(!Dt(en)&&Dt(fn)){if(--Tr,Tr<=dt)return $t(nr,Tr,jr,xr);Yn=vt(Vn,jr,At,xr)}else Yn=vt(Vn,jr,fn,xr);return Vn?(this.size=Tr,this.children=Yn,this):Pt(nr,Tr,Yn)};At._modify=function(Cr,nr,Ur,Mr,rn,Cn,Rr){var pn=Mr();return pn===ht?At:(++Rr.value,jt(Cr,rn,Cn,pn))};function Xt(Cr,nr,Ur,Mr,rn){this._editable=Cr,this._edit=nr,this._config=Ur,this._root=Mr,this._size=rn}Xt.prototype.setTree=function(Cr,nr){return this._editable?(this._root=Cr,this._size=nr,this):Cr===this._root?this:new Xt(this._editable,this._edit,this._config,Cr,nr)};var or=it.tryGetHash=function(Cr,nr,Ur,Mr){for(var rn=Mr._root,Cn=0,Rr=Mr._config.keyEq;;)switch(rn.type){case wt:return Rr(Ur,rn.key)?rn.value:Cr;case Rt:{if(nr===rn.hash)for(var pn=rn.children,Tr=0,xr=pn.length;Tr<xr;++Tr){var jr=pn[Tr];if(Rr(Ur,jr.key))return jr.value}return Cr}case Tt:{var en=gt(Cn,nr),fn=xt(en);if(rn.mask&fn){rn=rn.children[yt(rn.mask,fn)],Cn+=st;break}return Cr}case It:{if(rn=rn.children[gt(Cn,nr)],rn){Cn+=st;break}return Cr}default:return Cr}};Xt.prototype.tryGetHash=function(Cr,nr,Ur){return or(Cr,nr,Ur,this)};var tr=it.tryGet=function(Cr,nr,Ur){return or(Cr,Ur._config.hash(nr),nr,Ur)};Xt.prototype.tryGet=function(Cr,nr){return tr(Cr,nr,this)};var dr=it.getHash=function(Cr,nr,Ur){return or(void 0,Cr,nr,Ur)};Xt.prototype.getHash=function(Cr,nr){return dr(Cr,nr,this)},it.get=function(Cr,nr){return or(void 0,nr._config.hash(Cr),Cr,nr)},Xt.prototype.get=function(Cr,nr){return tr(nr,Cr,this)};var fr=it.has=function(Cr,nr,Ur){return or(ht,Cr,nr,Ur)!==ht};Xt.prototype.hasHash=function(Cr,nr){return fr(Cr,nr,this)};var Sr=it.has=function(Cr,nr){return fr(nr._config.hash(Cr),Cr,nr)};Xt.prototype.has=function(Cr){return Sr(Cr,this)};var vr=function(nr,Ur){return nr===Ur};it.make=function(Cr){return new Xt(0,0,{keyEq:Cr&&Cr.keyEq||vr,hash:Cr&&Cr.hash||ft},At,0)},it.empty=it.make();var mr=it.isEmpty=function(Cr){return Cr&&!!Dt(Cr._root)};Xt.prototype.isEmpty=function(){return mr(this)};var hr=it.modifyHash=function(Cr,nr,Ur,Mr){var rn={value:Mr._size},Cn=Mr._root._modify(Mr._editable?Mr._edit:NaN,Mr._config.keyEq,0,Cr,nr,Ur,rn);return Mr.setTree(Cn,rn.value)};Xt.prototype.modifyHash=function(Cr,nr,Ur){return hr(Ur,Cr,nr,this)};var gr=it.modify=function(Cr,nr,Ur){return hr(Cr,Ur._config.hash(nr),nr,Ur)};Xt.prototype.modify=function(Cr,nr){return gr(nr,Cr,this)};var lr=it.setHash=function(Cr,nr,Ur,Mr){return hr(pt(Ur),Cr,nr,Mr)};Xt.prototype.setHash=function(Cr,nr,Ur){return lr(Cr,nr,Ur,this)};var Ir=it.set=function(Cr,nr,Ur){return lr(Ur._config.hash(Cr),Cr,nr,Ur)};Xt.prototype.set=function(Cr,nr){return Ir(Cr,nr,this)};var wr=pt(ht),Fr=it.removeHash=function(Cr,nr,Ur){return hr(wr,Cr,nr,Ur)};Xt.prototype.removeHash=Xt.prototype.deleteHash=function(Cr,nr){return Fr(Cr,nr,this)};var $r=it.remove=function(Cr,nr){return Fr(nr._config.hash(Cr),Cr,nr)};Xt.prototype.remove=Xt.prototype.delete=function(Cr){return $r(Cr,this)};var hn=it.beginMutation=function(Cr){return new Xt(Cr._editable+1,Cr._edit+1,Cr._config,Cr._root,Cr._size)};Xt.prototype.beginMutation=function(){return hn(this)};var Zr=it.endMutation=function(Cr){return Cr._editable=Cr._editable&&Cr._editable-1,Cr};Xt.prototype.endMutation=function(){return Zr(this)};var Qt=it.mutate=function(Cr,nr){var Ur=hn(nr);return Cr(Ur),Zr(Ur)};Xt.prototype.mutate=function(Cr){return Qt(Cr,this)};var Jt=function(nr){return nr&&pr(nr[0],nr[1],nr[2],nr[3],nr[4])},pr=function(nr,Ur,Mr,rn,Cn){for(;Mr<nr;){var Rr=Ur[Mr++];if(Rr&&!Dt(Rr))return Vr(Rr,rn,[nr,Ur,Mr,rn,Cn])}return Jt(Cn)},Vr=function(nr,Ur,Mr){switch(nr.type){case wt:return{value:Ur(nr),rest:Mr};case Rt:case It:case Tt:var rn=nr.children;return pr(rn.length,rn,0,Ur,Mr);default:return Jt(Mr)}},Wr={done:!0};function zr(Cr){this.v=Cr}zr.prototype.next=function(){if(!this.v)return Wr;var Cr=this.v;return this.v=Jt(Cr.rest),Cr},zr.prototype[Symbol.iterator]=function(){return this};var ln=function(nr,Ur){return new zr(Vr(nr._root,Ur))},xn=function(nr){return[nr.key,nr.value]},yn=it.entries=function(Cr){return ln(Cr,xn)};Xt.prototype.entries=Xt.prototype[Symbol.iterator]=function(){return yn(this)};var Wn=function(nr){return nr.key},Mn=it.keys=function(Cr){return ln(Cr,Wn)};Xt.prototype.keys=function(){return Mn(this)};var sn=function(nr){return nr.value},qn=it.values=Xt.prototype.values=function(Cr){return ln(Cr,sn)};Xt.prototype.values=function(){return qn(this)};var Gr=it.fold=function(Cr,nr,Ur){var Mr=Ur._root;if(Mr.type===wt)return Cr(nr,Mr.value,Mr.key);for(var rn=[Mr.children],Cn=void 0;Cn=rn.pop();)for(var Rr=0,pn=Cn.length;Rr<pn;){var Tr=Cn[Rr++];Tr&&Tr.type&&(Tr.type===wt?nr=Cr(nr,Tr.value,Tr.key):rn.push(Tr.children))}return nr};Xt.prototype.fold=function(Cr,nr){return Gr(Cr,nr,this)};var qr=it.forEach=function(Cr,nr){return Gr(function(Ur,Mr,rn){return Cr(Mr,rn,nr)},null,nr)};Xt.prototype.forEach=function(Cr){return qr(Cr,this)};var wn=it.count=function(Cr){return Cr._size};Xt.prototype.count=function(){return wn(this)},Object.defineProperty(Xt.prototype,"size",{get:Xt.prototype.count}),nt.exports?nt.exports=it:(void 0).hamt=it});class BuiltInMap{constructor(rt){_defineProperty$2(this,"_map",void 0),this._map=new Map(rt==null?void 0:rt.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(rt){return this._map.get(rt)}has(rt){return this._map.has(rt)}set(rt,it){return this._map.set(rt,it),this}delete(rt){return this._map.delete(rt),this}clone(){return persistentMap(this)}toMap(){return new Map(this._map)}}class HashArrayMappedTrieMap{constructor(rt){if(_defineProperty$2(this,"_hamt",hamt_1.empty.beginMutation()),rt instanceof HashArrayMappedTrieMap){const it=rt._hamt.endMutation();rt._hamt=it.beginMutation(),this._hamt=it.beginMutation()}else if(rt)for(const[it,st]of rt.entries())this._hamt.set(it,st)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(rt){return this._hamt.get(rt)}has(rt){return this._hamt.has(rt)}set(rt,it){return this._hamt.set(rt,it),this}delete(rt){return this._hamt.delete(rt),this}clone(){return persistentMap(this)}toMap(){return new Map(this._hamt)}}function persistentMap(nt){return Recoil_gkx("recoil_hamt_2020")?new HashArrayMappedTrieMap(nt):new BuiltInMap(nt)}var Recoil_PersistentMap={persistentMap},Recoil_PersistentMap_1=Recoil_PersistentMap.persistentMap,Recoil_PersistentMap$1=Object.freeze({__proto__:null,persistentMap:Recoil_PersistentMap_1});function differenceSets(nt,...rt){const it=new Set;e:for(const st of nt){for(const lt of rt)if(lt.has(st))continue e;it.add(st)}return it}var Recoil_differenceSets=differenceSets;function mapMap(nt,rt){const it=new Map;return nt.forEach((st,lt)=>{it.set(lt,rt(st,lt))}),it}var Recoil_mapMap=mapMap;function makeGraph(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function cloneGraph(nt){return{nodeDeps:Recoil_mapMap(nt.nodeDeps,rt=>new Set(rt)),nodeToNodeSubscriptions:Recoil_mapMap(nt.nodeToNodeSubscriptions,rt=>new Set(rt))}}function mergeDepsIntoGraph(nt,rt,it,st){const{nodeDeps:lt,nodeToNodeSubscriptions:ct}=it,ut=lt.get(nt);if(ut&&st&&ut!==st.nodeDeps.get(nt))return;lt.set(nt,rt);const dt=ut==null?rt:Recoil_differenceSets(rt,ut);for(const ht of dt)ct.has(ht)||ct.set(ht,new Set),Recoil_nullthrows(ct.get(ht)).add(nt);if(ut){const ht=Recoil_differenceSets(ut,rt);for(const pt of ht){if(!ct.has(pt))return;const ft=Recoil_nullthrows(ct.get(pt));ft.delete(nt),ft.size===0&&ct.delete(pt)}}}function saveDepsToStore(nt,rt,it,st){var lt,ct,ut,dt;const ht=it.getState();st===ht.currentTree.version||st===((lt=ht.nextTree)===null||lt===void 0?void 0:lt.version)||((ct=ht.previousTree)===null||ct===void 0||ct.version);const pt=it.getGraph(st);if(mergeDepsIntoGraph(nt,rt,pt),st===((ut=ht.previousTree)===null||ut===void 0?void 0:ut.version)){const mt=it.getGraph(ht.currentTree.version);mergeDepsIntoGraph(nt,rt,mt,pt)}if(st===((dt=ht.previousTree)===null||dt===void 0?void 0:dt.version)||st===ht.currentTree.version){var ft;const mt=(ft=ht.nextTree)===null||ft===void 0?void 0:ft.version;if(mt!==void 0){const gt=it.getGraph(mt);mergeDepsIntoGraph(nt,rt,gt,pt)}}}var Recoil_Graph={cloneGraph,graph:makeGraph,saveDepsToStore};let nextTreeStateVersion=0;const getNextTreeStateVersion=()=>nextTreeStateVersion++;let nextStoreID=0;const getNextStoreID=()=>nextStoreID++;let nextComponentID=0;const getNextComponentID=()=>nextComponentID++;var Recoil_Keys={getNextTreeStateVersion,getNextStoreID,getNextComponentID};const{persistentMap:persistentMap$1}=Recoil_PersistentMap$1,{graph}=Recoil_Graph,{getNextTreeStateVersion:getNextTreeStateVersion$1}=Recoil_Keys;function makeEmptyTreeState(){const nt=getNextTreeStateVersion$1();return{version:nt,stateID:nt,transactionMetadata:{},dirtyAtoms:new Set,atomValues:persistentMap$1(),nonvalidatedAtoms:persistentMap$1()}}function makeEmptyStoreState(){const nt=makeEmptyTreeState();return{currentTree:nt,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(nt.version,graph()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Recoil_State={makeEmptyTreeState,makeEmptyStoreState,getNextTreeStateVersion:getNextTreeStateVersion$1};class RetentionZone{}function retentionZone(){return new RetentionZone}var Recoil_RetentionZone={RetentionZone,retentionZone};function setByAddingToSet(nt,rt){const it=new Set(nt);return it.add(rt),it}function setByDeletingFromSet(nt,rt){const it=new Set(nt);return it.delete(rt),it}function mapBySettingInMap(nt,rt,it){const st=new Map(nt);return st.set(rt,it),st}function mapByUpdatingInMap(nt,rt,it){const st=new Map(nt);return st.set(rt,it(st.get(rt))),st}function mapByDeletingFromMap(nt,rt){const it=new Map(nt);return it.delete(rt),it}function mapByDeletingMultipleFromMap(nt,rt){const it=new Map(nt);return rt.forEach(st=>it.delete(st)),it}var Recoil_CopyOnWrite={setByAddingToSet,setByDeletingFromSet,mapBySettingInMap,mapByUpdatingInMap,mapByDeletingFromMap,mapByDeletingMultipleFromMap};function*filterIterable(nt,rt){let it=0;for(const st of nt)rt(st,it++)&&(yield st)}var Recoil_filterIterable=filterIterable;function lazyProxy(nt,rt){return new Proxy(nt,{get:(st,lt)=>(!(lt in st)&&lt in rt&&(st[lt]=rt[lt]()),st[lt]),ownKeys:st=>Object.keys(st)})}var Recoil_lazyProxy=lazyProxy;const{getNode:getNode$1,getNodeMaybe:getNodeMaybe$1,recoilValuesForKeys:recoilValuesForKeys$1}=Recoil_Node,{RetentionZone:RetentionZone$1}=Recoil_RetentionZone,{setByAddingToSet:setByAddingToSet$1}=Recoil_CopyOnWrite,emptySet=Object.freeze(new Set);class ReadOnlyRecoilValueError extends Error{}function initializeRetentionForNode(nt,rt,it){if(!Recoil_gkx("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:st}=nt.getState().retention;function lt(ct){let ut=st.get(ct);ut||st.set(ct,ut=new Set),ut.add(rt)}if(it instanceof RetentionZone$1)lt(it);else if(Array.isArray(it))for(const ct of it)lt(ct);return()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const{retention:ct}=nt.getState();function ut(dt){const ht=ct.nodesRetainedByZone.get(dt);ht==null||ht.delete(rt),ht&&ht.size===0&&ct.nodesRetainedByZone.delete(dt)}if(it instanceof RetentionZone$1)ut(it);else if(Array.isArray(it))for(const dt of it)ut(dt)}}function initializeNodeIfNewToStore(nt,rt,it,st){const lt=nt.getState();if(lt.nodeCleanupFunctions.has(it))return;const ct=getNode$1(it),ut=initializeRetentionForNode(nt,it,ct.retainedBy),dt=ct.init(nt,rt,st);lt.nodeCleanupFunctions.set(it,()=>{dt(),ut()})}function initializeNode(nt,rt,it){initializeNodeIfNewToStore(nt,nt.getState().currentTree,rt,it)}function cleanUpNode(nt,rt){var it;const st=nt.getState();(it=st.nodeCleanupFunctions.get(rt))===null||it===void 0||it(),st.nodeCleanupFunctions.delete(rt)}function getNodeLoadable(nt,rt,it){return initializeNodeIfNewToStore(nt,rt,it,"get"),getNode$1(it).get(nt,rt)}function peekNodeLoadable(nt,rt,it){return getNode$1(it).peek(nt,rt)}function setUnvalidatedAtomValue_DEPRECATED(nt,rt,it){var st;const lt=getNodeMaybe$1(rt);return lt==null||(st=lt.invalidate)===null||st===void 0||st.call(lt,nt),{...nt,atomValues:nt.atomValues.clone().delete(rt),nonvalidatedAtoms:nt.nonvalidatedAtoms.clone().set(rt,it),dirtyAtoms:setByAddingToSet$1(nt.dirtyAtoms,rt)}}function setNodeValue(nt,rt,it,st){const lt=getNode$1(it);if(lt.set==null)throw new ReadOnlyRecoilValueError(`Attempt to set read-only RecoilValue: ${it}`);const ct=lt.set;return initializeNodeIfNewToStore(nt,rt,it,"set"),ct(nt,rt,st)}function peekNodeInfo(nt,rt,it){const st=nt.getState(),lt=nt.getGraph(rt.version),ct=getNode$1(it).nodeType;return Recoil_lazyProxy({type:ct},{loadable:()=>peekNodeLoadable(nt,rt,it),isActive:()=>st.knownAtoms.has(it)||st.knownSelectors.has(it),isSet:()=>ct==="selector"?!1:rt.atomValues.has(it),isModified:()=>rt.dirtyAtoms.has(it),deps:()=>{var ut;return recoilValuesForKeys$1((ut=lt.nodeDeps.get(it))!==null&&ut!==void 0?ut:[])},subscribers:()=>{var ut,dt;return{nodes:recoilValuesForKeys$1(Recoil_filterIterable(getDownstreamNodes(nt,rt,new Set([it])),ht=>ht!==it)),components:Recoil_mapIterable((ut=(dt=st.nodeToComponentSubscriptions.get(it))===null||dt===void 0?void 0:dt.values())!==null&&ut!==void 0?ut:[],([ht])=>({name:ht}))}}})}function getDownstreamNodes(nt,rt,it){const st=new Set,lt=Array.from(it),ct=nt.getGraph(rt.version);for(let dt=lt.pop();dt;dt=lt.pop()){var ut;st.add(dt);const ht=(ut=ct.nodeToNodeSubscriptions.get(dt))!==null&&ut!==void 0?ut:emptySet;for(const pt of ht)st.has(pt)||lt.push(pt)}return st}var Recoil_FunctionalCore={getNodeLoadable,peekNodeLoadable,setNodeValue,initializeNode,cleanUpNode,setUnvalidatedAtomValue_DEPRECATED,peekNodeInfo,getDownstreamNodes};let _invalidateMemoizedSnapshot=null;function setInvalidateMemoizedSnapshot(nt){_invalidateMemoizedSnapshot=nt}function invalidateMemoizedSnapshot(){var nt;(nt=_invalidateMemoizedSnapshot)===null||nt===void 0||nt()}var Recoil_SnapshotCache={setInvalidateMemoizedSnapshot,invalidateMemoizedSnapshot};const{getDownstreamNodes:getDownstreamNodes$1,getNodeLoadable:getNodeLoadable$1,setNodeValue:setNodeValue$1}=Recoil_FunctionalCore,{getNextComponentID:getNextComponentID$1}=Recoil_Keys,{getNode:getNode$2,getNodeMaybe:getNodeMaybe$2}=Recoil_Node,{DefaultValue:DefaultValue$1}=Recoil_Node,{reactMode:reactMode$1}=Recoil_ReactMode,{AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,RecoilValueReadOnly:RecoilValueReadOnly$1,isRecoilValue:isRecoilValue$1}=Recoil_RecoilValue$1,{invalidateMemoizedSnapshot:invalidateMemoizedSnapshot$1}=Recoil_SnapshotCache;function getRecoilValueAsLoadable(nt,{key:rt},it=nt.getState().currentTree){var st,lt;const ct=nt.getState();it.version===ct.currentTree.version||it.version===((st=ct.nextTree)===null||st===void 0?void 0:st.version)||(it.version,(lt=ct.previousTree)===null||lt===void 0||lt.version);const ut=getNodeLoadable$1(nt,it,rt);return ut.state==="loading"&&ut.contents.catch(()=>{}),ut}function applyAtomValueWrites(nt,rt){const it=nt.clone();return rt.forEach((st,lt)=>{st.state==="hasValue"&&st.contents instanceof DefaultValue$1?it.delete(lt):it.set(lt,st)}),it}function valueFromValueOrUpdater(nt,rt,{key:it},st){if(typeof st=="function"){const lt=getNodeLoadable$1(nt,rt,it);if(lt.state==="loading"){const ct=`Tried to set atom or selector "${it}" using an updater function while the current state is pending, this is not currently supported.`;throw Recoil_err(ct)}else if(lt.state==="hasError")throw lt.contents;return st(lt.contents)}else return st}function applyAction(nt,rt,it){if(it.type==="set"){const{recoilValue:lt,valueOrUpdater:ct}=it,ut=valueFromValueOrUpdater(nt,rt,lt,ct),dt=setNodeValue$1(nt,rt,lt.key,ut);for(const[ht,pt]of dt.entries())writeLoadableToTreeState(rt,ht,pt)}else if(it.type==="setLoadable"){const{recoilValue:{key:lt},loadable:ct}=it;writeLoadableToTreeState(rt,lt,ct)}else if(it.type==="markModified"){const{recoilValue:{key:lt}}=it;rt.dirtyAtoms.add(lt)}else if(it.type==="setUnvalidated"){var st;const{recoilValue:{key:lt},unvalidatedValue:ct}=it,ut=getNodeMaybe$2(lt);ut==null||(st=ut.invalidate)===null||st===void 0||st.call(ut,rt),rt.atomValues.delete(lt),rt.nonvalidatedAtoms.set(lt,ct),rt.dirtyAtoms.add(lt)}else Recoil_recoverableViolation(`Unknown action ${it.type}`)}function writeLoadableToTreeState(nt,rt,it){it.state==="hasValue"&&it.contents instanceof DefaultValue$1?nt.atomValues.delete(rt):nt.atomValues.set(rt,it),nt.dirtyAtoms.add(rt),nt.nonvalidatedAtoms.delete(rt)}function applyActionsToStore(nt,rt){nt.replaceState(it=>{const st=copyTreeState(it);for(const lt of rt)applyAction(nt,st,lt);return invalidateDownstreams(nt,st),invalidateMemoizedSnapshot$1(),st})}function queueOrPerformStateUpdate(nt,rt){if(batchStack.length){const it=batchStack[batchStack.length-1];let st=it.get(nt);st||it.set(nt,st=[]),st.push(rt)}else applyActionsToStore(nt,[rt])}const batchStack=[];function batchStart(){const nt=new Map;return batchStack.push(nt),()=>{for(const[rt,it]of nt)applyActionsToStore(rt,it);batchStack.pop()}}function copyTreeState(nt){return{...nt,atomValues:nt.atomValues.clone(),nonvalidatedAtoms:nt.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(nt.dirtyAtoms)}}function invalidateDownstreams(nt,rt){const it=getDownstreamNodes$1(nt,rt,rt.dirtyAtoms);for(const ct of it){var st,lt;(st=getNodeMaybe$2(ct))===null||st===void 0||(lt=st.invalidate)===null||lt===void 0||lt.call(st,rt)}}function setRecoilValue(nt,rt,it){queueOrPerformStateUpdate(nt,{type:"set",recoilValue:rt,valueOrUpdater:it})}function setRecoilValueLoadable(nt,rt,it){if(it instanceof DefaultValue$1)return setRecoilValue(nt,rt,it);queueOrPerformStateUpdate(nt,{type:"setLoadable",recoilValue:rt,loadable:it})}function markRecoilValueModified(nt,rt){queueOrPerformStateUpdate(nt,{type:"markModified",recoilValue:rt})}function setUnvalidatedRecoilValue(nt,rt,it){queueOrPerformStateUpdate(nt,{type:"setUnvalidated",recoilValue:rt,unvalidatedValue:it})}function subscribeToRecoilValue(nt,{key:rt},it,st=null){const lt=getNextComponentID$1(),ct=nt.getState();ct.nodeToComponentSubscriptions.has(rt)||ct.nodeToComponentSubscriptions.set(rt,new Map),Recoil_nullthrows(ct.nodeToComponentSubscriptions.get(rt)).set(lt,[st??"<not captured>",it]);const ut=reactMode$1();if(ut.early&&(ut.mode==="LEGACY"||ut.mode==="MUTABLE_SOURCE")){const dt=nt.getState().nextTree;dt&&dt.dirtyAtoms.has(rt)&&it(dt)}return{release:()=>{const dt=nt.getState(),ht=dt.nodeToComponentSubscriptions.get(rt);ht===void 0||!ht.has(lt)||(ht.delete(lt),ht.size===0&&dt.nodeToComponentSubscriptions.delete(rt))}}}function refreshRecoilValue(nt,rt){var it;const{currentTree:st}=nt.getState(),lt=getNode$2(rt.key);(it=lt.clearCache)===null||it===void 0||it.call(lt,nt,st)}var Recoil_RecoilValueInterface={RecoilValueReadOnly:RecoilValueReadOnly$1,AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,getRecoilValueAsLoadable,setRecoilValue,setRecoilValueLoadable,markRecoilValueModified,setUnvalidatedRecoilValue,subscribeToRecoilValue,isRecoilValue:isRecoilValue$1,applyAtomValueWrites,batchStart,writeLoadableToTreeState,invalidateDownstreams,copyTreeState,refreshRecoilValue};function someSet(nt,rt,it){const st=nt.entries();let lt=st.next();for(;!lt.done;){const ct=lt.value;if(rt.call(it,ct[1],ct[0],nt))return!0;lt=st.next()}return!1}var Recoil_someSet=someSet;const{cleanUpNode:cleanUpNode$1}=Recoil_FunctionalCore,{deleteNodeConfigIfPossible:deleteNodeConfigIfPossible$1,getNode:getNode$3}=Recoil_Node,{RetentionZone:RetentionZone$2}=Recoil_RetentionZone,SUSPENSE_TIMEOUT_MS=12e4,emptySet$1=new Set;function releaseRetainablesNowOnCurrentTree(nt,rt){const it=nt.getState(),st=it.currentTree;if(it.nextTree)return;const lt=new Set;for(const ut of rt)if(ut instanceof RetentionZone$2)for(const dt of nodesRetainedByZone(it,ut))lt.add(dt);else lt.add(ut);const ct=findReleasableNodes(nt,lt);for(const ut of ct)releaseNode(nt,st,ut)}function findReleasableNodes(nt,rt){const it=nt.getState(),st=it.currentTree,lt=nt.getGraph(st.version),ct=new Set,ut=new Set;return dt(rt),ct;function dt(ht){const pt=new Set,ft=getDownstreamNodesInTopologicalOrder(nt,st,ht,ct,ut);for(const yt of ft){var mt;if(getNode$3(yt).retainedBy==="recoilRoot"){ut.add(yt);continue}if(((mt=it.retention.referenceCounts.get(yt))!==null&&mt!==void 0?mt:0)>0){ut.add(yt);continue}if(zonesThatCouldRetainNode(yt).some(St=>it.retention.referenceCounts.get(St))){ut.add(yt);continue}const vt=lt.nodeToNodeSubscriptions.get(yt);if(vt&&Recoil_someSet(vt,St=>ut.has(St))){ut.add(yt);continue}ct.add(yt),pt.add(yt)}const gt=new Set;for(const yt of pt)for(const vt of(xt=lt.nodeDeps.get(yt))!==null&&xt!==void 0?xt:emptySet$1){var xt;ct.has(vt)||gt.add(vt)}gt.size&&dt(gt)}}function getDownstreamNodesInTopologicalOrder(nt,rt,it,st,lt){const ct=nt.getGraph(rt.version),ut=[],dt=new Set;for(;it.size>0;)ht(Recoil_nullthrows(it.values().next().value));return ut;function ht(pt){if(st.has(pt)||lt.has(pt)){it.delete(pt);return}if(dt.has(pt))return;const ft=ct.nodeToNodeSubscriptions.get(pt);if(ft)for(const mt of ft)ht(mt);dt.add(pt),it.delete(pt),ut.push(pt)}}function releaseNode(nt,rt,it){if(!Recoil_gkx("recoil_memory_managament_2020"))return;cleanUpNode$1(nt,it);const st=nt.getState();st.knownAtoms.delete(it),st.knownSelectors.delete(it),st.nodeTransactionSubscriptions.delete(it),st.retention.referenceCounts.delete(it);const lt=zonesThatCouldRetainNode(it);for(const ht of lt){var ct;(ct=st.retention.nodesRetainedByZone.get(ht))===null||ct===void 0||ct.delete(it)}rt.atomValues.delete(it),rt.dirtyAtoms.delete(it),rt.nonvalidatedAtoms.delete(it);const ut=st.graphsByVersion.get(rt.version);if(ut){const ht=ut.nodeDeps.get(it);if(ht!==void 0){ut.nodeDeps.delete(it);for(const pt of ht){var dt;(dt=ut.nodeToNodeSubscriptions.get(pt))===null||dt===void 0||dt.delete(it)}}ut.nodeToNodeSubscriptions.delete(it)}deleteNodeConfigIfPossible$1(it)}function nodesRetainedByZone(nt,rt){var it;return(it=nt.retention.nodesRetainedByZone.get(rt))!==null&&it!==void 0?it:emptySet$1}function zonesThatCouldRetainNode(nt){const rt=getNode$3(nt).retainedBy;return rt===void 0||rt==="components"||rt==="recoilRoot"?[]:rt instanceof RetentionZone$2?[rt]:rt}function scheduleOrPerformPossibleReleaseOfRetainable(nt,rt){const it=nt.getState();it.nextTree?it.retention.retainablesToCheckForRelease.add(rt):releaseRetainablesNowOnCurrentTree(nt,new Set([rt]))}function updateRetainCount(nt,rt,it){var st;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const lt=nt.getState().retention.referenceCounts,ct=((st=lt.get(rt))!==null&&st!==void 0?st:0)+it;ct===0?updateRetainCountToZero(nt,rt):lt.set(rt,ct)}function updateRetainCountToZero(nt,rt){if(!Recoil_gkx("recoil_memory_managament_2020"))return;nt.getState().retention.referenceCounts.delete(rt),scheduleOrPerformPossibleReleaseOfRetainable(nt,rt)}function releaseScheduledRetainablesNow(nt){if(!Recoil_gkx("recoil_memory_managament_2020"))return;const rt=nt.getState();releaseRetainablesNowOnCurrentTree(nt,rt.retention.retainablesToCheckForRelease),rt.retention.retainablesToCheckForRelease.clear()}function retainedByOptionWithDefault(nt){return nt===void 0?"recoilRoot":nt}var Recoil_Retention={SUSPENSE_TIMEOUT_MS,updateRetainCount,updateRetainCountToZero,releaseScheduledRetainablesNow,retainedByOptionWithDefault};const{unstable_batchedUpdates}=reactDom;var ReactBatchedUpdates={unstable_batchedUpdates};const{unstable_batchedUpdates:unstable_batchedUpdates$1}=ReactBatchedUpdates;var Recoil_ReactBatchedUpdates={unstable_batchedUpdates:unstable_batchedUpdates$1};const{batchStart:batchStart$1}=Recoil_RecoilValueInterface,{unstable_batchedUpdates:unstable_batchedUpdates$2}=Recoil_ReactBatchedUpdates;let batcher=unstable_batchedUpdates$2||(nt=>nt());const setBatcher=nt=>{batcher=nt},getBatcher=()=>batcher,batchUpdates=nt=>{batcher(()=>{let rt=()=>{};try{rt=batchStart$1(),nt()}finally{rt()}})};var Recoil_Batching={getBatcher,setBatcher,batchUpdates};function*concatIterables(nt){for(const rt of nt)for(const it of rt)yield it}var Recoil_concatIterables=concatIterables;const isSSR$1=typeof Window>"u"||typeof window>"u",isWindow=nt=>!isSSR$1&&(nt===window||nt instanceof Window),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var Recoil_Environment={isSSR:isSSR$1,isReactNative,isWindow};function memoizeWithArgsHash(nt,rt){let it;return(...st)=>{it||(it={});const lt=rt(...st);return Object.hasOwnProperty.call(it,lt)||(it[lt]=nt(...st)),it[lt]}}function memoizeOneWithArgsHash(nt,rt){let it,st;return(...lt)=>{const ct=rt(...lt);return it===ct||(it=ct,st=nt(...lt)),st}}function memoizeOneWithArgsHashAndInvalidation(nt,rt){let it,st;return[(...ut)=>{const dt=rt(...ut);return it===dt||(it=dt,st=nt(...ut)),st},()=>{it=null}]}var Recoil_Memoize={memoizeWithArgsHash,memoizeOneWithArgsHash,memoizeOneWithArgsHashAndInvalidation};const{batchUpdates:batchUpdates$1}=Recoil_Batching,{initializeNode:initializeNode$1,peekNodeInfo:peekNodeInfo$1}=Recoil_FunctionalCore,{graph:graph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$1}=Recoil_Keys,{DEFAULT_VALUE:DEFAULT_VALUE$1,recoilValues:recoilValues$1,recoilValuesForKeys:recoilValuesForKeys$2}=Recoil_Node,{AbstractRecoilValue:AbstractRecoilValue$2,getRecoilValueAsLoadable:getRecoilValueAsLoadable$1,setRecoilValue:setRecoilValue$1,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$1}=Recoil_RecoilValueInterface,{updateRetainCount:updateRetainCount$1}=Recoil_Retention,{setInvalidateMemoizedSnapshot:setInvalidateMemoizedSnapshot$1}=Recoil_SnapshotCache,{getNextTreeStateVersion:getNextTreeStateVersion$2,makeEmptyStoreState:makeEmptyStoreState$1}=Recoil_State,{isSSR:isSSR$1$1}=Recoil_Environment,{memoizeOneWithArgsHashAndInvalidation:memoizeOneWithArgsHashAndInvalidation$1}=Recoil_Memoize;class Snapshot{constructor(rt,it){_defineProperty$2(this,"_store",void 0),_defineProperty$2(this,"_refCount",1),_defineProperty$2(this,"getLoadable",st=>(this.checkRefCount_INTERNAL(),getRecoilValueAsLoadable$1(this._store,st))),_defineProperty$2(this,"getPromise",st=>(this.checkRefCount_INTERNAL(),this.getLoadable(st).toPromise())),_defineProperty$2(this,"getNodes_UNSTABLE",st=>{if(this.checkRefCount_INTERNAL(),(st==null?void 0:st.isModified)===!0){if((st==null?void 0:st.isInitialized)===!1)return[];const ut=this._store.getState().currentTree;return recoilValuesForKeys$2(ut.dirtyAtoms)}const lt=this._store.getState().knownAtoms,ct=this._store.getState().knownSelectors;return(st==null?void 0:st.isInitialized)==null?recoilValues$1.values():st.isInitialized===!0?recoilValuesForKeys$2(Recoil_concatIterables([lt,ct])):Recoil_filterIterable(recoilValues$1.values(),({key:ut})=>!lt.has(ut)&&!ct.has(ut))}),_defineProperty$2(this,"getInfo_UNSTABLE",({key:st})=>(this.checkRefCount_INTERNAL(),peekNodeInfo$1(this._store,this._store.getState().currentTree,st))),_defineProperty$2(this,"map",st=>{this.checkRefCount_INTERNAL();const lt=new MutableSnapshot(this,batchUpdates$1);return st(lt),lt}),_defineProperty$2(this,"asyncMap",async st=>{this.checkRefCount_INTERNAL();const lt=new MutableSnapshot(this,batchUpdates$1);return lt.retain(),await st(lt),lt.autoRelease_INTERNAL(),lt}),this._store={storeID:getNextStoreID$1(),parentStoreID:it,getState:()=>rt,replaceState:st=>{rt.currentTree=st(rt.currentTree)},getGraph:st=>{const lt=rt.graphsByVersion;if(lt.has(st))return Recoil_nullthrows(lt.get(st));const ct=graph$1();return lt.set(st,ct),ct},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Recoil_err("Cannot subscribe to Snapshots")}};for(const st of this._store.getState().knownAtoms)initializeNode$1(this._store,st,"get"),updateRetainCount$1(this._store,st,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let rt=!1;return()=>{rt||(rt=!0,this._release())}}autoRelease_INTERNAL(){isSSR$1$1||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(rt=>rt()),this._store.getState().nodeCleanupFunctions.clear(),!Recoil_gkx("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Recoil_gkx("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function cloneStoreState(nt,rt,it=!1){const st=nt.getState(),lt=it?getNextTreeStateVersion$2():rt.version;return{currentTree:{version:it?lt:rt.version,stateID:it?lt:rt.stateID,transactionMetadata:{...rt.transactionMetadata},dirtyAtoms:new Set(rt.dirtyAtoms),atomValues:rt.atomValues.clone(),nonvalidatedAtoms:rt.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(st.knownAtoms),knownSelectors:new Set(st.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(lt,nt.getGraph(rt.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Recoil_mapIterable(st.nodeCleanupFunctions.entries(),([ct])=>[ct,()=>{}]))}}function freshSnapshot(nt){const rt=new Snapshot(makeEmptyStoreState$1());return nt!=null?rt.map(nt):rt}const[memoizedCloneSnapshot,invalidateMemoizedSnapshot$2]=memoizeOneWithArgsHashAndInvalidation$1((nt,rt)=>{var it;const st=nt.getState(),lt=rt==="latest"?(it=st.nextTree)!==null&&it!==void 0?it:st.currentTree:Recoil_nullthrows(st.previousTree);return new Snapshot(cloneStoreState(nt,lt),nt.storeID)},(nt,rt)=>{var it,st;return String(rt)+String(nt.storeID)+String((it=nt.getState().nextTree)===null||it===void 0?void 0:it.version)+String(nt.getState().currentTree.version)+String((st=nt.getState().previousTree)===null||st===void 0?void 0:st.version)});setInvalidateMemoizedSnapshot$1(invalidateMemoizedSnapshot$2);function cloneSnapshot(nt,rt="latest"){const it=memoizedCloneSnapshot(nt,rt);return it.isRetained()?it:(invalidateMemoizedSnapshot$2(),memoizedCloneSnapshot(nt,rt))}class MutableSnapshot extends Snapshot{constructor(rt,it){super(cloneStoreState(rt.getStore_INTERNAL(),rt.getStore_INTERNAL().getState().currentTree,!0),rt.getStoreID()),_defineProperty$2(this,"_batch",void 0),_defineProperty$2(this,"set",(st,lt)=>{this.checkRefCount_INTERNAL();const ct=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(ct,st.key,1),setRecoilValue$1(this.getStore_INTERNAL(),st,lt)})}),_defineProperty$2(this,"reset",st=>{this.checkRefCount_INTERNAL();const lt=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(lt,st.key,1),setRecoilValue$1(this.getStore_INTERNAL(),st,DEFAULT_VALUE$1)})}),_defineProperty$2(this,"setUnvalidatedAtomValues_DEPRECATED",st=>{this.checkRefCount_INTERNAL();const lt=this.getStore_INTERNAL();batchUpdates$1(()=>{for(const[ct,ut]of st.entries())updateRetainCount$1(lt,ct,1),setUnvalidatedRecoilValue$1(lt,new AbstractRecoilValue$2(ct),ut)})}),this._batch=it}}var Recoil_Snapshot={Snapshot,MutableSnapshot,freshSnapshot,cloneSnapshot},Recoil_Snapshot_1=Recoil_Snapshot.Snapshot,Recoil_Snapshot_2=Recoil_Snapshot.MutableSnapshot,Recoil_Snapshot_3=Recoil_Snapshot.freshSnapshot,Recoil_Snapshot_4=Recoil_Snapshot.cloneSnapshot,Recoil_Snapshot$1=Object.freeze({__proto__:null,Snapshot:Recoil_Snapshot_1,MutableSnapshot:Recoil_Snapshot_2,freshSnapshot:Recoil_Snapshot_3,cloneSnapshot:Recoil_Snapshot_4});function unionSets(...nt){const rt=new Set;for(const it of nt)for(const st of it)rt.add(st);return rt}var Recoil_unionSets=unionSets;const{useRef}=e$2;function useRefInitOnce(nt){const rt=useRef(nt);return rt.current===nt&&typeof nt=="function"&&(rt.current=nt()),rt}var Recoil_useRefInitOnce=useRefInitOnce;const{getNextTreeStateVersion:getNextTreeStateVersion$3,makeEmptyStoreState:makeEmptyStoreState$2}=Recoil_State,{cleanUpNode:cleanUpNode$2,getDownstreamNodes:getDownstreamNodes$2,initializeNode:initializeNode$2,setNodeValue:setNodeValue$2,setUnvalidatedAtomValue_DEPRECATED:setUnvalidatedAtomValue_DEPRECATED$1}=Recoil_FunctionalCore,{graph:graph$2}=Recoil_Graph,{cloneGraph:cloneGraph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$2}=Recoil_Keys,{createMutableSource:createMutableSource$1,reactMode:reactMode$2}=Recoil_ReactMode,{applyAtomValueWrites:applyAtomValueWrites$1}=Recoil_RecoilValueInterface,{releaseScheduledRetainablesNow:releaseScheduledRetainablesNow$1}=Recoil_Retention,{freshSnapshot:freshSnapshot$1}=Recoil_Snapshot$1,{useCallback,useContext,useEffect,useMemo,useRef:useRef$1,useState}=e$2;function notInAContext(){throw Recoil_err("This component must be used inside a <RecoilRoot> component.")}const defaultStore=Object.freeze({storeID:getNextStoreID$2(),getState:notInAContext,replaceState:notInAContext,getGraph:notInAContext,subscribeToTransactions:notInAContext,addTransactionMetadata:notInAContext});let stateReplacerIsBeingExecuted=!1;function startNextTreeIfNeeded(nt){if(stateReplacerIsBeingExecuted)throw Recoil_err("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const rt=nt.getState();if(rt.nextTree===null){Recoil_gkx("recoil_memory_managament_2020")&&Recoil_gkx("recoil_release_on_cascading_update_killswitch_2021")&&rt.commitDepth>0&&releaseScheduledRetainablesNow$1(nt);const it=rt.currentTree.version,st=getNextTreeStateVersion$3();rt.nextTree={...rt.currentTree,version:st,stateID:st,dirtyAtoms:new Set,transactionMetadata:{}},rt.graphsByVersion.set(st,cloneGraph$1(Recoil_nullthrows(rt.graphsByVersion.get(it))))}}const AppContext=e$2.createContext({current:defaultStore}),useStoreRef=()=>useContext(AppContext),MutableSourceContext=e$2.createContext(null);function useRecoilMutableSource(){return useContext(MutableSourceContext)}function notifyComponents(nt,rt,it){const st=getDownstreamNodes$2(nt,it,it.dirtyAtoms);for(const lt of st){const ct=rt.nodeToComponentSubscriptions.get(lt);if(ct)for(const[ut,[dt,ht]]of ct)ht(it)}}function sendEndOfBatchNotifications(nt){const rt=nt.getState(),it=rt.currentTree,st=it.dirtyAtoms;if(st.size){for(const[lt,ct]of rt.nodeTransactionSubscriptions)if(st.has(lt))for(const[ut,dt]of ct)dt(nt);for(const[lt,ct]of rt.transactionSubscriptions)ct(nt);(!reactMode$2().early||rt.suspendedComponentResolvers.size>0)&&(notifyComponents(nt,rt,it),rt.suspendedComponentResolvers.forEach(lt=>lt()),rt.suspendedComponentResolvers.clear())}rt.queuedComponentCallbacks_DEPRECATED.forEach(lt=>lt(it)),rt.queuedComponentCallbacks_DEPRECATED.splice(0,rt.queuedComponentCallbacks_DEPRECATED.length)}function endBatch(nt){const rt=nt.getState();rt.commitDepth++;try{const{nextTree:it}=rt;if(it==null)return;rt.previousTree=rt.currentTree,rt.currentTree=it,rt.nextTree=null,sendEndOfBatchNotifications(nt),rt.previousTree!=null?rt.graphsByVersion.delete(rt.previousTree.version):Recoil_recoverableViolation("Ended batch with no previous state, which is unexpected","recoil"),rt.previousTree=null,Recoil_gkx("recoil_memory_managament_2020")&&it==null&&releaseScheduledRetainablesNow$1(nt)}finally{rt.commitDepth--}}function Batcher({setNotifyBatcherOfChange:nt}){const rt=useStoreRef(),[,it]=useState([]);return nt(()=>it({})),useEffect(()=>(nt(()=>it({})),()=>{nt(()=>{})}),[nt]),useEffect(()=>{Recoil_Queue.enqueueExecution("Batcher",()=>{endBatch(rt.current)})}),null}function initialStoreState_DEPRECATED(nt,rt){const it=makeEmptyStoreState$2();return rt({set:(st,lt)=>{const ct=it.currentTree,ut=setNodeValue$2(nt,ct,st.key,lt),dt=new Set(ut.keys()),ht=ct.nonvalidatedAtoms.clone();for(const pt of dt)ht.delete(pt);it.currentTree={...ct,dirtyAtoms:Recoil_unionSets(ct.dirtyAtoms,dt),atomValues:applyAtomValueWrites$1(ct.atomValues,ut),nonvalidatedAtoms:ht}},setUnvalidatedAtomValues:st=>{st.forEach((lt,ct)=>{it.currentTree=setUnvalidatedAtomValue_DEPRECATED$1(it.currentTree,ct,lt)})}}),it}function initialStoreState(nt){const rt=freshSnapshot$1(nt),it=rt.getStore_INTERNAL().getState();return rt.retain(),it.nodeCleanupFunctions.forEach(st=>st()),it.nodeCleanupFunctions.clear(),it}let nextID=0;function RecoilRoot_INTERNAL({initializeState_DEPRECATED:nt,initializeState:rt,store_INTERNAL:it,children:st}){let lt;const ct=xt=>{const yt=lt.current.graphsByVersion;if(yt.has(xt))return Recoil_nullthrows(yt.get(xt));const vt=graph$2();return yt.set(xt,vt),vt},ut=(xt,yt)=>{if(yt==null){const{transactionSubscriptions:vt}=mt.current.getState(),St=nextID++;return vt.set(St,xt),{release:()=>{vt.delete(St)}}}else{const{nodeTransactionSubscriptions:vt}=mt.current.getState();vt.has(yt)||vt.set(yt,new Map);const St=nextID++;return Recoil_nullthrows(vt.get(yt)).set(St,xt),{release:()=>{const Et=vt.get(yt);Et&&(Et.delete(St),Et.size===0&&vt.delete(yt))}}}},dt=xt=>{startNextTreeIfNeeded(mt.current);for(const yt of Object.keys(xt))Recoil_nullthrows(mt.current.getState().nextTree).transactionMetadata[yt]=xt[yt]},ht=xt=>{startNextTreeIfNeeded(mt.current);const yt=Recoil_nullthrows(lt.current.nextTree);let vt;try{stateReplacerIsBeingExecuted=!0,vt=xt(yt)}finally{stateReplacerIsBeingExecuted=!1}vt!==yt&&(lt.current.nextTree=vt,reactMode$2().early&&notifyComponents(mt.current,lt.current,vt),Recoil_nullthrows(pt.current)())},pt=useRef$1(null),ft=useCallback(xt=>{pt.current=xt},[pt]),mt=Recoil_useRefInitOnce(()=>it??{storeID:getNextStoreID$2(),getState:()=>lt.current,replaceState:ht,getGraph:ct,subscribeToTransactions:ut,addTransactionMetadata:dt});it!=null&&(mt.current=it),lt=Recoil_useRefInitOnce(()=>nt!=null?initialStoreState_DEPRECATED(mt.current,nt):rt!=null?initialStoreState(rt):makeEmptyStoreState$2());const gt=useMemo(()=>createMutableSource$1==null?void 0:createMutableSource$1(lt,()=>lt.current.currentTree.version),[lt]);return useEffect(()=>{const xt=mt.current;for(const yt of new Set(xt.getState().knownAtoms))initializeNode$2(xt,yt,"get");return()=>{for(const yt of xt.getState().knownAtoms)cleanUpNode$2(xt,yt)}},[mt]),e$2.createElement(AppContext.Provider,{value:mt},e$2.createElement(MutableSourceContext.Provider,{value:gt},e$2.createElement(Batcher,{setNotifyBatcherOfChange:ft}),st))}function RecoilRoot(nt){const{override:rt,...it}=nt,st=useStoreRef();return rt===!1&&st.current!==defaultStore?nt.children:e$2.createElement(RecoilRoot_INTERNAL,it)}function useRecoilStoreID(){return useStoreRef().current.storeID}var Recoil_RecoilRoot={RecoilRoot,useStoreRef,useRecoilMutableSource,useRecoilStoreID,notifyComponents_FOR_TESTING:notifyComponents,sendEndOfBatchNotifications_FOR_TESTING:sendEndOfBatchNotifications};function shallowArrayEqual(nt,rt){if(nt===rt)return!0;if(nt.length!==rt.length)return!1;for(let it=0,st=nt.length;it<st;it++)if(nt[it]!==rt[it])return!1;return!0}var Recoil_shallowArrayEqual=shallowArrayEqual;const{useEffect:useEffect$1,useRef:useRef$2}=e$2;function usePrevious(nt){const rt=useRef$2();return useEffect$1(()=>{rt.current=nt}),rt.current}var Recoil_usePrevious=usePrevious;const{useStoreRef:useStoreRef$1}=Recoil_RecoilRoot,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$1}=Recoil_Retention,{updateRetainCount:updateRetainCount$2}=Recoil_Retention,{RetentionZone:RetentionZone$3}=Recoil_RetentionZone,{useEffect:useEffect$2,useRef:useRef$3}=e$2,{isSSR:isSSR$2}=Recoil_Environment;function useRetain(nt){if(Recoil_gkx("recoil_memory_managament_2020"))return useRetain_ACTUAL(nt)}function useRetain_ACTUAL(nt){const it=(Array.isArray(nt)?nt:[nt]).map(ut=>ut instanceof RetentionZone$3?ut:ut.key),st=useStoreRef$1();useEffect$2(()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const ut=st.current;if(lt.current&&!isSSR$2)window.clearTimeout(lt.current),lt.current=null;else for(const dt of it)updateRetainCount$2(ut,dt,1);return()=>{for(const dt of it)updateRetainCount$2(ut,dt,-1)}},[st,...it]);const lt=useRef$3(),ct=Recoil_usePrevious(it);if(!isSSR$2&&(ct===void 0||!Recoil_shallowArrayEqual(ct,it))){const ut=st.current;for(const dt of it)updateRetainCount$2(ut,dt,1);if(ct)for(const dt of ct)updateRetainCount$2(ut,dt,-1);lt.current&&window.clearTimeout(lt.current),lt.current=window.setTimeout(()=>{lt.current=null;for(const dt of it)updateRetainCount$2(ut,dt,-1)},SUSPENSE_TIMEOUT_MS$1)}}var Recoil_useRetain=useRetain;function useComponentName(){return"<component name not available>"}var Recoil_useComponentName=useComponentName;const{batchUpdates:batchUpdates$2}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$2}=Recoil_Node,{currentRendererSupportsUseSyncExternalStore:currentRendererSupportsUseSyncExternalStore$1,reactMode:reactMode$3,useMutableSource:useMutableSource$1,useSyncExternalStore:useSyncExternalStore$1}=Recoil_ReactMode,{useRecoilMutableSource:useRecoilMutableSource$1,useStoreRef:useStoreRef$2}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$3,getRecoilValueAsLoadable:getRecoilValueAsLoadable$2,setRecoilValue:setRecoilValue$2,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$2,subscribeToRecoilValue:subscribeToRecoilValue$1}=Recoil_RecoilValueInterface,{useCallback:useCallback$1,useEffect:useEffect$3,useMemo:useMemo$1,useRef:useRef$4,useState:useState$1}=e$2,{setByAddingToSet:setByAddingToSet$2}=Recoil_CopyOnWrite,{isSSR:isSSR$3}=Recoil_Environment;function handleLoadable(nt,rt,it){if(nt.state==="hasValue")return nt.contents;throw nt.state==="loading"?new Promise(lt=>{const ct=it.current.getState().suspendedComponentResolvers;ct.add(lt),isSSR$3&&Recoil_isPromise(nt.contents)&&nt.contents.finally(()=>{ct.delete(lt)})}):nt.state==="hasError"?nt.contents:Recoil_err(`Invalid value of loadable atom "${rt.key}"`)}function useRecoilInterface_DEPRECATED(){const nt=Recoil_useComponentName(),rt=useStoreRef$2(),[,it]=useState$1([]),st=useRef$4(new Set);st.current=new Set;const lt=useRef$4(new Set),ct=useRef$4(new Map),ut=useCallback$1(ht=>{const pt=ct.current.get(ht);pt&&(pt.release(),ct.current.delete(ht))},[ct]),dt=useCallback$1((ht,pt)=>{ct.current.has(pt)&&it([])},[]);return useEffect$3(()=>{const ht=rt.current;Recoil_differenceSets(st.current,lt.current).forEach(pt=>{if(ct.current.has(pt))return;const ft=subscribeToRecoilValue$1(ht,new AbstractRecoilValue$3(pt),gt=>dt(gt,pt),nt);ct.current.set(pt,ft),ht.getState().nextTree?ht.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{dt(ht.getState(),pt)}):dt(ht.getState(),pt)}),Recoil_differenceSets(lt.current,st.current).forEach(pt=>{ut(pt)}),lt.current=st.current}),useEffect$3(()=>{const ht=ct.current;return Recoil_differenceSets(st.current,new Set(ht.keys())).forEach(pt=>{const ft=subscribeToRecoilValue$1(rt.current,new AbstractRecoilValue$3(pt),mt=>dt(mt,pt),nt);ht.set(pt,ft)}),()=>ht.forEach((pt,ft)=>ut(ft))},[nt,rt,ut,dt]),useMemo$1(()=>{function ht(yt){return vt=>{setRecoilValue$2(rt.current,yt,vt)}}function pt(yt){return()=>setRecoilValue$2(rt.current,yt,DEFAULT_VALUE$2)}function ft(yt){var vt;st.current.has(yt.key)||(st.current=setByAddingToSet$2(st.current,yt.key));const St=rt.current.getState();return getRecoilValueAsLoadable$2(rt.current,yt,reactMode$3().early&&(vt=St.nextTree)!==null&&vt!==void 0?vt:St.currentTree)}function mt(yt){const vt=ft(yt);return handleLoadable(vt,yt,rt)}function gt(yt){return[mt(yt),ht(yt)]}function xt(yt){return[ft(yt),ht(yt)]}return{getRecoilValue:mt,getRecoilValueLoadable:ft,getRecoilState:gt,getRecoilStateLoadable:xt,getSetRecoilState:ht,getResetRecoilState:pt}},[st,rt])}const recoilComponentGetRecoilValueCount_FOR_TESTING={current:0};function useRecoilValueLoadable_SYNC_EXTERNAL_STORE(nt){const rt=useStoreRef$2(),it=Recoil_useComponentName(),st=useCallback$1(()=>{var dt;const ht=rt.current,pt=ht.getState(),ft=reactMode$3().early&&(dt=pt.nextTree)!==null&&dt!==void 0?dt:pt.currentTree;return{loadable:getRecoilValueAsLoadable$2(ht,nt,ft),key:nt.key}},[rt,nt]),lt=useCallback$1(dt=>{let ht;return()=>{var pt,ft;const mt=dt();return(pt=ht)!==null&&pt!==void 0&&pt.loadable.is(mt.loadable)&&((ft=ht)===null||ft===void 0?void 0:ft.key)===mt.key?ht:(ht=mt,mt)}},[]),ct=useMemo$1(()=>lt(st),[st,lt]),ut=useCallback$1(dt=>{const ht=rt.current;return subscribeToRecoilValue$1(ht,nt,dt,it).release},[rt,nt,it]);return useSyncExternalStore$1(ut,ct,ct).loadable}function useRecoilValueLoadable_MUTABLE_SOURCE(nt){const rt=useStoreRef$2(),it=useCallback$1(()=>{var pt;const ft=rt.current,mt=ft.getState(),gt=reactMode$3().early&&(pt=mt.nextTree)!==null&&pt!==void 0?pt:mt.currentTree;return getRecoilValueAsLoadable$2(ft,nt,gt)},[rt,nt]),st=useCallback$1(()=>it(),[it]),lt=Recoil_useComponentName(),ct=useCallback$1((pt,ft)=>{const mt=rt.current;return subscribeToRecoilValue$1(mt,nt,()=>{if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return ft();const xt=it();ht.current.is(xt)||ft(),ht.current=xt},lt).release},[rt,nt,lt,it]),ut=useRecoilMutableSource$1();if(ut==null)throw Recoil_err("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const dt=useMutableSource$1(ut,st,ct),ht=useRef$4(dt);return useEffect$3(()=>{ht.current=dt}),dt}function useRecoilValueLoadable_TRANSITION_SUPPORT(nt){const rt=useStoreRef$2(),it=Recoil_useComponentName(),st=useCallback$1(()=>{var ht;const pt=rt.current,ft=pt.getState(),mt=reactMode$3().early&&(ht=ft.nextTree)!==null&&ht!==void 0?ht:ft.currentTree;return getRecoilValueAsLoadable$2(pt,nt,mt)},[rt,nt]),lt=useCallback$1(()=>({loadable:st(),key:nt.key}),[st,nt.key]),ct=useCallback$1(ht=>{const pt=lt();return ht.loadable.is(pt.loadable)&&ht.key===pt.key?ht:pt},[lt]);useEffect$3(()=>{const ht=subscribeToRecoilValue$1(rt.current,nt,pt=>{dt(ct)},it);return dt(ct),ht.release},[it,nt,rt,ct]);const[ut,dt]=useState$1(lt);return ut.key!==nt.key?lt().loadable:ut.loadable}function useRecoilValueLoadable_LEGACY(nt){const rt=useStoreRef$2(),[,it]=useState$1([]),st=Recoil_useComponentName(),lt=useCallback$1(()=>{var dt;const ht=rt.current,pt=ht.getState(),ft=reactMode$3().early&&(dt=pt.nextTree)!==null&&dt!==void 0?dt:pt.currentTree;return getRecoilValueAsLoadable$2(ht,nt,ft)},[rt,nt]),ct=lt(),ut=useRef$4(ct);return useEffect$3(()=>{ut.current=ct}),useEffect$3(()=>{const dt=rt.current,ht=dt.getState(),pt=subscribeToRecoilValue$1(dt,nt,mt=>{var gt;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return it([]);const xt=lt();(gt=ut.current)!==null&&gt!==void 0&&gt.is(xt)||it(xt),ut.current=xt},st);if(ht.nextTree)dt.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{ut.current=null,it([])});else{var ft;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return it([]);const mt=lt();(ft=ut.current)!==null&&ft!==void 0&&ft.is(mt)||it(mt),ut.current=mt}return pt.release},[st,lt,nt,rt]),ct}function useRecoilValueLoadable(nt){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(nt),{TRANSITION_SUPPORT:useRecoilValueLoadable_TRANSITION_SUPPORT,SYNC_EXTERNAL_STORE:currentRendererSupportsUseSyncExternalStore$1()?useRecoilValueLoadable_SYNC_EXTERNAL_STORE:useRecoilValueLoadable_TRANSITION_SUPPORT,MUTABLE_SOURCE:useRecoilValueLoadable_MUTABLE_SOURCE,LEGACY:useRecoilValueLoadable_LEGACY}[reactMode$3().mode](nt)}function useRecoilValue(nt){const rt=useStoreRef$2(),it=useRecoilValueLoadable(nt);return handleLoadable(it,nt,rt)}function useSetRecoilState(nt){const rt=useStoreRef$2();return useCallback$1(it=>{setRecoilValue$2(rt.current,nt,it)},[rt,nt])}function useResetRecoilState(nt){const rt=useStoreRef$2();return useCallback$1(()=>{setRecoilValue$2(rt.current,nt,DEFAULT_VALUE$2)},[rt,nt])}function useRecoilState(nt){return[useRecoilValue(nt),useSetRecoilState(nt)]}function useRecoilStateLoadable(nt){return[useRecoilValueLoadable(nt),useSetRecoilState(nt)]}function useSetUnvalidatedAtomValues(){const nt=useStoreRef$2();return(rt,it={})=>{batchUpdates$2(()=>{nt.current.addTransactionMetadata(it),rt.forEach((st,lt)=>setUnvalidatedRecoilValue$2(nt.current,new AbstractRecoilValue$3(lt),st))})}}function useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(nt){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(nt),useRecoilValueLoadable_TRANSITION_SUPPORT(nt)}function useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(nt){const rt=useStoreRef$2(),it=useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(nt);return handleLoadable(it,nt,rt)}function useRecoilState_TRANSITION_SUPPORT_UNSTABLE(nt){return[useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(nt),useSetRecoilState(nt)]}var Recoil_Hooks={recoilComponentGetRecoilValueCount_FOR_TESTING,useRecoilInterface:useRecoilInterface_DEPRECATED,useRecoilState,useRecoilStateLoadable,useRecoilValue,useRecoilValueLoadable,useResetRecoilState,useSetRecoilState,useSetUnvalidatedAtomValues,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE,useRecoilState_TRANSITION_SUPPORT_UNSTABLE};function filterMap(nt,rt){const it=new Map;for(const[st,lt]of nt)rt(lt,st)&&it.set(st,lt);return it}var Recoil_filterMap=filterMap;function filterSet(nt,rt){const it=new Set;for(const st of nt)rt(st)&&it.add(st);return it}var Recoil_filterSet=filterSet;function mergeMaps(...nt){const rt=new Map;for(let it=0;it<nt.length;it++){const st=nt[it].keys();let lt;for(;!(lt=st.next()).done;)rt.set(lt.value,nt[it].get(lt.value))}return rt}var Recoil_mergeMaps=mergeMaps;const{batchUpdates:batchUpdates$3}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$3,getNode:getNode$4,nodes:nodes$1}=Recoil_Node,{useStoreRef:useStoreRef$3}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$1}=Recoil_RecoilValueInterface,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$2}=Recoil_Retention,{cloneSnapshot:cloneSnapshot$1}=Recoil_Snapshot$1,{useCallback:useCallback$2,useEffect:useEffect$4,useRef:useRef$5,useState:useState$2}=e$2,{isSSR:isSSR$4}=Recoil_Environment;function useTransactionSubscription(nt){const rt=useStoreRef$3();useEffect$4(()=>rt.current.subscribeToTransactions(nt).release,[nt,rt])}function externallyVisibleAtomValuesInState(nt){const rt=nt.atomValues.toMap(),it=Recoil_mapMap(Recoil_filterMap(rt,(st,lt)=>{const ut=getNode$4(lt).persistence_UNSTABLE;return ut!=null&&ut.type!=="none"&&st.state==="hasValue"}),st=>st.contents);return Recoil_mergeMaps(nt.nonvalidatedAtoms.toMap(),it)}function useTransactionObservation_DEPRECATED(nt){useTransactionSubscription(useCallback$2(rt=>{let it=rt.getState().previousTree;const st=rt.getState().currentTree;it||(it=rt.getState().currentTree);const lt=externallyVisibleAtomValuesInState(st),ct=externallyVisibleAtomValuesInState(it),ut=Recoil_mapMap(nodes$1,ht=>{var pt,ft,mt,gt;return{persistence_UNSTABLE:{type:(pt=(ft=ht.persistence_UNSTABLE)===null||ft===void 0?void 0:ft.type)!==null&&pt!==void 0?pt:"none",backButton:(mt=(gt=ht.persistence_UNSTABLE)===null||gt===void 0?void 0:gt.backButton)!==null&&mt!==void 0?mt:!1}}}),dt=Recoil_filterSet(st.dirtyAtoms,ht=>lt.has(ht)||ct.has(ht));nt({atomValues:lt,previousAtomValues:ct,atomInfo:ut,modifiedAtoms:dt,transactionMetadata:{...st.transactionMetadata}})},[nt]))}function useRecoilTransactionObserver(nt){useTransactionSubscription(useCallback$2(rt=>{const it=cloneSnapshot$1(rt,"latest"),st=cloneSnapshot$1(rt,"previous");nt({snapshot:it,previousSnapshot:st})},[nt]))}function useRecoilSnapshot(){const nt=useStoreRef$3(),[rt,it]=useState$2(()=>cloneSnapshot$1(nt.current)),st=Recoil_usePrevious(rt),lt=useRef$5(),ct=useRef$5();if(useTransactionSubscription(useCallback$2(dt=>it(cloneSnapshot$1(dt)),[])),useEffect$4(()=>{const dt=rt.retain();if(lt.current&&!isSSR$4){var ht;window.clearTimeout(lt.current),lt.current=null,(ht=ct.current)===null||ht===void 0||ht.call(ct),ct.current=null}return()=>{window.setTimeout(dt,10)}},[rt]),st!==rt&&!isSSR$4){if(lt.current){var ut;window.clearTimeout(lt.current),lt.current=null,(ut=ct.current)===null||ut===void 0||ut.call(ct),ct.current=null}ct.current=rt.retain(),lt.current=window.setTimeout(()=>{var dt;lt.current=null,(dt=ct.current)===null||dt===void 0||dt.call(ct),ct.current=null},SUSPENSE_TIMEOUT_MS$2)}return rt}function gotoSnapshot(nt,rt){var it;const st=nt.getState(),lt=(it=st.nextTree)!==null&&it!==void 0?it:st.currentTree,ct=rt.getStore_INTERNAL().getState().currentTree;batchUpdates$3(()=>{const ut=new Set;for(const pt of[lt.atomValues.keys(),ct.atomValues.keys()])for(const ft of pt){var dt,ht;((dt=lt.atomValues.get(ft))===null||dt===void 0?void 0:dt.contents)!==((ht=ct.atomValues.get(ft))===null||ht===void 0?void 0:ht.contents)&&getNode$4(ft).shouldRestoreFromSnapshots&&ut.add(ft)}ut.forEach(pt=>{setRecoilValueLoadable$1(nt,new AbstractRecoilValue$4(pt),ct.atomValues.has(pt)?Recoil_nullthrows(ct.atomValues.get(pt)):DEFAULT_VALUE$3)}),nt.replaceState(pt=>({...pt,stateID:rt.getID()}))})}function useGotoRecoilSnapshot(){const nt=useStoreRef$3();return useCallback$2(rt=>gotoSnapshot(nt.current,rt),[nt])}var Recoil_SnapshotHooks={useRecoilSnapshot,gotoSnapshot,useGotoRecoilSnapshot,useRecoilTransactionObserver,useTransactionObservation_DEPRECATED,useTransactionSubscription_DEPRECATED:useTransactionSubscription};const{peekNodeInfo:peekNodeInfo$2}=Recoil_FunctionalCore,{useStoreRef:useStoreRef$4}=Recoil_RecoilRoot;function useGetRecoilValueInfo(){const nt=useStoreRef$4();return({key:rt})=>peekNodeInfo$2(nt.current,nt.current.getState().currentTree,rt)}var Recoil_useGetRecoilValueInfo=useGetRecoilValueInfo;const{reactMode:reactMode$4}=Recoil_ReactMode,{RecoilRoot:RecoilRoot$1,useStoreRef:useStoreRef$5}=Recoil_RecoilRoot,{useMemo:useMemo$2}=e$2;function useRecoilBridgeAcrossReactRoots(){reactMode$4().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const nt=useStoreRef$5().current;return useMemo$2(()=>{function rt({children:it}){return e$2.createElement(RecoilRoot$1,{store_INTERNAL:nt},it)}return rt},[nt])}var Recoil_useRecoilBridgeAcrossReactRoots=useRecoilBridgeAcrossReactRoots;const{loadableWithValue:loadableWithValue$1}=Recoil_Loadable$1,{initializeNode:initializeNode$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$4,getNode:getNode$5}=Recoil_Node,{copyTreeState:copyTreeState$1,getRecoilValueAsLoadable:getRecoilValueAsLoadable$3,invalidateDownstreams:invalidateDownstreams$1,writeLoadableToTreeState:writeLoadableToTreeState$1}=Recoil_RecoilValueInterface;function isAtom(nt){return getNode$5(nt.key).nodeType==="atom"}class TransactionInterfaceImpl{constructor(rt,it){_defineProperty$2(this,"_store",void 0),_defineProperty$2(this,"_treeState",void 0),_defineProperty$2(this,"_changes",void 0),_defineProperty$2(this,"get",st=>{if(this._changes.has(st.key))return this._changes.get(st.key);if(!isAtom(st))throw Recoil_err("Reading selectors within atomicUpdate is not supported");const lt=getRecoilValueAsLoadable$3(this._store,st,this._treeState);if(lt.state==="hasValue")return lt.contents;throw lt.state==="hasError"?lt.contents:Recoil_err(`Expected Recoil atom ${st.key} to have a value, but it is in a loading state.`)}),_defineProperty$2(this,"set",(st,lt)=>{if(!isAtom(st))throw Recoil_err("Setting selectors within atomicUpdate is not supported");if(typeof lt=="function"){const ct=this.get(st);this._changes.set(st.key,lt(ct))}else initializeNode$3(this._store,st.key,"set"),this._changes.set(st.key,lt)}),_defineProperty$2(this,"reset",st=>{this.set(st,DEFAULT_VALUE$4)}),this._store=rt,this._treeState=it,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const rt=copyTreeState$1(this._treeState);for(const[it,st]of this._changes)writeLoadableToTreeState$1(rt,it,loadableWithValue$1(st));return invalidateDownstreams$1(this._store,rt),rt}}function atomicUpdater(nt){return rt=>{nt.replaceState(it=>{const st=new TransactionInterfaceImpl(nt,it);return rt(st),st.newTreeState_INTERNAL()})}}var Recoil_AtomicUpdates={atomicUpdater},Recoil_AtomicUpdates_1=Recoil_AtomicUpdates.atomicUpdater,Recoil_AtomicUpdates$1=Object.freeze({__proto__:null,atomicUpdater:Recoil_AtomicUpdates_1});function invariant(nt,rt){if(!nt)throw new Error(rt)}var invariant_1=invariant,Recoil_invariant=invariant_1;const{atomicUpdater:atomicUpdater$1}=Recoil_AtomicUpdates$1,{batchUpdates:batchUpdates$4}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$5}=Recoil_Node,{useStoreRef:useStoreRef$6}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$1,setRecoilValue:setRecoilValue$3}=Recoil_RecoilValueInterface,{cloneSnapshot:cloneSnapshot$2}=Recoil_Snapshot$1,{gotoSnapshot:gotoSnapshot$1}=Recoil_SnapshotHooks,{useCallback:useCallback$3}=e$2;class Sentinel{}const SENTINEL=new Sentinel;function recoilCallback(nt,rt,it,st){let lt=SENTINEL,ct;if(batchUpdates$4(()=>{const dt="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof rt!="function")throw Recoil_err(dt);const ht=Recoil_lazyProxy({...st??{},set:(ft,mt)=>setRecoilValue$3(nt,ft,mt),reset:ft=>setRecoilValue$3(nt,ft,DEFAULT_VALUE$5),refresh:ft=>refreshRecoilValue$1(nt,ft),gotoSnapshot:ft=>gotoSnapshot$1(nt,ft),transact_UNSTABLE:ft=>atomicUpdater$1(nt)(ft)},{snapshot:()=>{const ft=cloneSnapshot$2(nt);return ct=ft.retain(),ft}}),pt=rt(ht);if(typeof pt!="function")throw Recoil_err(dt);lt=pt(...it)}),lt instanceof Sentinel&&Recoil_invariant(!1),Recoil_isPromise(lt))lt=lt.finally(()=>{var dt;(dt=ct)===null||dt===void 0||dt()});else{var ut;(ut=ct)===null||ut===void 0||ut()}return lt}function useRecoilCallback(nt,rt){const it=useStoreRef$6();return useCallback$3((...st)=>recoilCallback(it.current,nt,st),rt!=null?[...rt,it]:void 0)}var Recoil_useRecoilCallback={recoilCallback,useRecoilCallback};const{useStoreRef:useStoreRef$7}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$2}=Recoil_RecoilValueInterface,{useCallback:useCallback$4}=e$2;function useRecoilRefresher(nt){const rt=useStoreRef$7();return useCallback$4(()=>{const it=rt.current;refreshRecoilValue$2(it,nt)},[nt,rt])}var Recoil_useRecoilRefresher=useRecoilRefresher;const{atomicUpdater:atomicUpdater$2}=Recoil_AtomicUpdates$1,{useStoreRef:useStoreRef$8}=Recoil_RecoilRoot,{useMemo:useMemo$3}=e$2;function useRecoilTransaction(nt,rt){const it=useStoreRef$8();return useMemo$3(()=>(...st)=>{atomicUpdater$2(it.current)(ct=>{nt(ct)(...st)})},rt!=null?[...rt,it]:void 0)}var Recoil_useRecoilTransaction=useRecoilTransaction;class WrappedValue{constructor(rt){_defineProperty$2(this,"value",void 0),this.value=rt}}var Recoil_Wrapper={WrappedValue},Recoil_Wrapper_1=Recoil_Wrapper.WrappedValue,Recoil_Wrapper$1=Object.freeze({__proto__:null,WrappedValue:Recoil_Wrapper_1});const{isFastRefreshEnabled:isFastRefreshEnabled$2}=Recoil_ReactMode;class ChangedPathError extends Error{}class TreeCache{constructor(rt){var it,st,lt;_defineProperty$2(this,"_name",void 0),_defineProperty$2(this,"_numLeafs",void 0),_defineProperty$2(this,"_root",void 0),_defineProperty$2(this,"_onHit",void 0),_defineProperty$2(this,"_onSet",void 0),_defineProperty$2(this,"_mapNodeValue",void 0),this._name=rt==null?void 0:rt.name,this._numLeafs=0,this._root=null,this._onHit=(it=rt==null?void 0:rt.onHit)!==null&&it!==void 0?it:()=>{},this._onSet=(st=rt==null?void 0:rt.onSet)!==null&&st!==void 0?st:()=>{},this._mapNodeValue=(lt=rt==null?void 0:rt.mapNodeValue)!==null&&lt!==void 0?lt:ct=>ct}size(){return this._numLeafs}root(){return this._root}get(rt,it){var st;return(st=this.getLeafNode(rt,it))===null||st===void 0?void 0:st.value}getLeafNode(rt,it){if(this._root==null)return;let st=this._root;for(;st;){if(it==null||it.onNodeVisit(st),st.type==="leaf")return this._onHit(st),st;const lt=this._mapNodeValue(rt(st.nodeKey));st=st.branches.get(lt)}}set(rt,it,st){const lt=()=>{var ct,ut,dt,ht;let pt,ft;for(const[St,Et]of rt){var mt,gt,xt;const wt=this._root;if((wt==null?void 0:wt.type)==="leaf")throw this.invalidCacheError();const Rt=pt;if(pt=Rt?Rt.branches.get(ft):wt,pt=(mt=pt)!==null&&mt!==void 0?mt:{type:"branch",nodeKey:St,parent:Rt,branches:new Map,branchKey:ft},pt.type!=="branch"||pt.nodeKey!==St)throw this.invalidCacheError();Rt==null||Rt.branches.set(ft,pt),st==null||(gt=st.onNodeVisit)===null||gt===void 0||gt.call(st,pt),ft=this._mapNodeValue(Et),this._root=(xt=this._root)!==null&&xt!==void 0?xt:pt}const yt=pt?(ct=pt)===null||ct===void 0?void 0:ct.branches.get(ft):this._root;if(yt!=null&&(yt.type!=="leaf"||yt.branchKey!==ft))throw this.invalidCacheError();const vt={type:"leaf",value:it,parent:pt,branchKey:ft};(ut=pt)===null||ut===void 0||ut.branches.set(ft,vt),this._root=(dt=this._root)!==null&&dt!==void 0?dt:vt,this._numLeafs++,this._onSet(vt),st==null||(ht=st.onNodeVisit)===null||ht===void 0||ht.call(st,vt)};try{lt()}catch(ct){if(ct instanceof ChangedPathError)this.clear(),lt();else throw ct}}delete(rt){const it=this.root();if(!it)return!1;if(rt===it)return this._root=null,this._numLeafs=0,!0;let st=rt.parent,lt=rt.branchKey;for(;st;){var ct;if(st.branches.delete(lt),st===it)return st.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(st.branches.size>0)break;lt=(ct=st)===null||ct===void 0?void 0:ct.branchKey,st=st.parent}for(;st!==it;st=st.parent)if(st==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const rt=isFastRefreshEnabled$2()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Recoil_recoverableViolation(rt+(this._name!=null?` - ${this._name}`:"")),new ChangedPathError}}var Recoil_TreeCache={TreeCache},Recoil_TreeCache_1=Recoil_TreeCache.TreeCache,Recoil_TreeCache$1=Object.freeze({__proto__:null,TreeCache:Recoil_TreeCache_1});class LRUCache{constructor(rt){var it;_defineProperty$2(this,"_maxSize",void 0),_defineProperty$2(this,"_size",void 0),_defineProperty$2(this,"_head",void 0),_defineProperty$2(this,"_tail",void 0),_defineProperty$2(this,"_map",void 0),_defineProperty$2(this,"_keyMapper",void 0),this._maxSize=rt.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(it=rt.mapKey)!==null&&it!==void 0?it:st=>st}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(rt){return this._map.has(this._keyMapper(rt))}get(rt){const it=this._keyMapper(rt),st=this._map.get(it);if(st)return this.set(rt,st.value),st.value}set(rt,it){const st=this._keyMapper(rt);this._map.get(st)&&this.delete(rt);const ct=this.head(),ut={key:rt,right:ct,left:null,value:it};ct?ct.left=ut:this._tail=ut,this._map.set(st,ut),this._head=ut,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const rt=this.tail();rt&&this.delete(rt.key)}delete(rt){const it=this._keyMapper(rt);if(!this._size||!this._map.has(it))return;const st=Recoil_nullthrows(this._map.get(it)),lt=st.right,ct=st.left;lt&&(lt.left=st.left),ct&&(ct.right=st.right),st===this.head()&&(this._head=lt),st===this.tail()&&(this._tail=ct),this._map.delete(it),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Recoil_LRUCache={LRUCache},Recoil_LRUCache_1=Recoil_LRUCache.LRUCache,Recoil_LRUCache$1=Object.freeze({__proto__:null,LRUCache:Recoil_LRUCache_1});const{LRUCache:LRUCache$1}=Recoil_LRUCache$1,{TreeCache:TreeCache$1}=Recoil_TreeCache$1;function treeCacheLRU({name:nt,maxSize:rt,mapNodeValue:it=st=>st}){const st=new LRUCache$1({maxSize:rt}),lt=new TreeCache$1({name:nt,mapNodeValue:it,onHit:ct=>{st.set(ct,!0)},onSet:ct=>{const ut=st.tail();st.set(ct,!0),ut&&lt.size()>rt&&lt.delete(ut.key)}});return lt}var Recoil_treeCacheLRU=treeCacheLRU;function stringify$1(nt,rt,it){if(typeof nt=="string"&&!nt.includes('"')&&!nt.includes("\\"))return`"${nt}"`;switch(typeof nt){case"undefined":return"";case"boolean":return nt?"true":"false";case"number":case"symbol":return String(nt);case"string":return JSON.stringify(nt);case"function":if((rt==null?void 0:rt.allowFunctions)!==!0)throw Recoil_err("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${nt.name})__`}if(nt===null)return"null";if(typeof nt!="object"){var st;return(st=JSON.stringify(nt))!==null&&st!==void 0?st:""}if(Recoil_isPromise(nt))return"__PROMISE__";if(Array.isArray(nt))return`[${nt.map((lt,ct)=>stringify$1(lt,rt,ct.toString()))}]`;if(typeof nt.toJSON=="function")return stringify$1(nt.toJSON(it),rt,it);if(nt instanceof Map){const lt={};for(const[ct,ut]of nt)lt[typeof ct=="string"?ct:stringify$1(ct,rt)]=ut;return stringify$1(lt,rt,it)}return nt instanceof Set?stringify$1(Array.from(nt).sort((lt,ct)=>stringify$1(lt,rt).localeCompare(stringify$1(ct,rt))),rt,it):Symbol!==void 0&&nt[Symbol.iterator]!=null&&typeof nt[Symbol.iterator]=="function"?stringify$1(Array.from(nt),rt,it):`{${Object.keys(nt).filter(lt=>nt[lt]!==void 0).sort().map(lt=>`${stringify$1(lt,rt)}:${stringify$1(nt[lt],rt,lt)}`).join(",")}}`}function stableStringify(nt,rt={allowFunctions:!1}){return stringify$1(nt,rt)}var Recoil_stableStringify=stableStringify;const{TreeCache:TreeCache$2}=Recoil_TreeCache$1,defaultPolicy={equality:"reference",eviction:"keep-all",maxSize:1/0};function treeCacheFromPolicy({equality:nt=defaultPolicy.equality,eviction:rt=defaultPolicy.eviction,maxSize:it=defaultPolicy.maxSize}=defaultPolicy,st){const lt=getValueMapper(nt);return getTreeCache(rt,it,lt,st)}function getValueMapper(nt){switch(nt){case"reference":return rt=>rt;case"value":return rt=>Recoil_stableStringify(rt)}throw Recoil_err(`Unrecognized equality policy ${nt}`)}function getTreeCache(nt,rt,it,st){switch(nt){case"keep-all":return new TreeCache$2({name:st,mapNodeValue:it});case"lru":return Recoil_treeCacheLRU({name:st,maxSize:Recoil_nullthrows(rt),mapNodeValue:it});case"most-recent":return Recoil_treeCacheLRU({name:st,maxSize:1,mapNodeValue:it})}throw Recoil_err(`Unrecognized eviction policy ${nt}`)}var Recoil_treeCacheFromPolicy=treeCacheFromPolicy;function startPerfBlock(nt){return()=>null}var Recoil_PerformanceTimings={startPerfBlock};const{isLoadable:isLoadable$1,loadableWithError:loadableWithError$1,loadableWithPromise:loadableWithPromise$1,loadableWithValue:loadableWithValue$2}=Recoil_Loadable$1,{WrappedValue:WrappedValue$1}=Recoil_Wrapper$1,{getNodeLoadable:getNodeLoadable$2,peekNodeLoadable:peekNodeLoadable$1,setNodeValue:setNodeValue$3}=Recoil_FunctionalCore,{saveDepsToStore:saveDepsToStore$1}=Recoil_Graph,{DEFAULT_VALUE:DEFAULT_VALUE$6,getConfigDeletionHandler:getConfigDeletionHandler$1,getNode:getNode$6,registerNode:registerNode$1}=Recoil_Node,{isRecoilValue:isRecoilValue$3}=Recoil_RecoilValue$1,{markRecoilValueModified:markRecoilValueModified$1}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$1}=Recoil_Retention,{recoilCallback:recoilCallback$1}=Recoil_useRecoilCallback,{startPerfBlock:startPerfBlock$1}=Recoil_PerformanceTimings;class Canceled{}const CANCELED=new Canceled,dependencyStack=[],waitingStores=new Map,getNewExecutionID=(()=>{let nt=0;return()=>nt++})();function selector(nt){let rt=null;const{key:it,get:st,cachePolicy_UNSTABLE:lt}=nt,ct=nt.set!=null?nt.set:void 0,ut=new Set,dt=Recoil_treeCacheFromPolicy(lt??{equality:"reference",eviction:"keep-all"},it),ht=retainedByOptionWithDefault$1(nt.retainedBy_UNSTABLE),pt=new Map;let ft=0;function mt(){return!Recoil_gkx("recoil_memory_managament_2020")||ft>0}function gt(Xt){return Xt.getState().knownSelectors.add(it),ft++,()=>{ft--}}function xt(){return getConfigDeletionHandler$1(it)!==void 0&&!mt()}function yt(Xt,or,tr,dr,fr){Ut(or,dr,fr),vt(Xt,tr)}function vt(Xt,or){$t(Xt,or)&&Nt(Xt),Et(or,!0)}function St(Xt,or){$t(Xt,or)&&(Recoil_nullthrows(Lt(Xt)).stateVersions.clear(),Et(or,!1))}function Et(Xt,or){const tr=waitingStores.get(Xt);if(tr!=null){for(const dr of tr)markRecoilValueModified$1(dr,Recoil_nullthrows(rt));or&&waitingStores.delete(Xt)}}function wt(Xt,or){let tr=waitingStores.get(or);tr==null&&waitingStores.set(or,tr=new Set),tr.add(Xt)}function Rt(Xt,or,tr,dr,fr,Sr){return or.then(vr=>{if(!mt())throw Nt(Xt),CANCELED;const mr=loadableWithValue$2(vr);return yt(Xt,tr,fr,mr,dr),vr}).catch(vr=>{if(!mt())throw Nt(Xt),CANCELED;if(Recoil_isPromise(vr))return Tt(Xt,vr,tr,dr,fr,Sr);const mr=loadableWithError$1(vr);throw yt(Xt,tr,fr,mr,dr),vr})}function Tt(Xt,or,tr,dr,fr,Sr){return or.then(vr=>{if(!mt())throw Nt(Xt),CANCELED;Sr.loadingDepKey!=null&&Sr.loadingDepPromise===or?tr.atomValues.set(Sr.loadingDepKey,loadableWithValue$2(vr)):Xt.getState().knownSelectors.forEach(lr=>{tr.atomValues.delete(lr)});const mr=Dt(Xt,tr);if(mr&&mr.state!=="loading"){if(($t(Xt,fr)||Lt(Xt)==null)&&vt(Xt,fr),mr.state==="hasValue")return mr.contents;throw mr.contents}if(!$t(Xt,fr)){const lr=Ft(Xt,tr);if(lr!=null)return lr.loadingLoadable.contents}const[hr,gr]=At(Xt,tr,fr);if(hr.state!=="loading"&&yt(Xt,tr,fr,hr,gr),hr.state==="hasError")throw hr.contents;return hr.contents}).catch(vr=>{if(vr instanceof Canceled)throw CANCELED;if(!mt())throw Nt(Xt),CANCELED;const mr=loadableWithError$1(vr);throw yt(Xt,tr,fr,mr,dr),vr})}function It(Xt,or,tr,dr){var fr,Sr,vr,mr;if($t(Xt,dr)||or.version===((fr=Xt.getState())===null||fr===void 0||(Sr=fr.currentTree)===null||Sr===void 0?void 0:Sr.version)||or.version===((vr=Xt.getState())===null||vr===void 0||(mr=vr.nextTree)===null||mr===void 0?void 0:mr.version)){var hr,gr,lr;saveDepsToStore$1(it,tr,Xt,(hr=(gr=Xt.getState())===null||gr===void 0||(lr=gr.nextTree)===null||lr===void 0?void 0:lr.version)!==null&&hr!==void 0?hr:Xt.getState().currentTree.version)}for(const Ir of tr)ut.add(Ir)}function At(Xt,or,tr){const dr=startPerfBlock$1(it);let fr=!0,Sr=!0;const vr=()=>{dr(),Sr=!1};let mr,hr=!1,gr;const lr={loadingDepKey:null,loadingDepPromise:null},Ir=new Map;function wr({key:$r}){const hn=getNodeLoadable$2(Xt,or,$r);switch(Ir.set($r,hn),fr||(It(Xt,or,new Set(Ir.keys()),tr),St(Xt,tr)),hn.state){case"hasValue":return hn.contents;case"hasError":throw hn.contents;case"loading":throw lr.loadingDepKey=$r,lr.loadingDepPromise=hn.contents,hn.contents}throw Recoil_err("Invalid Loadable state")}const Fr=$r=>(...hn)=>{if(Sr)throw Recoil_err("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return rt==null&&Recoil_invariant(!1),recoilCallback$1(Xt,$r,hn,{node:rt})};try{mr=st({get:wr,getCallback:Fr}),mr=isRecoilValue$3(mr)?wr(mr):mr,isLoadable$1(mr)&&(mr.state==="hasError"&&(hr=!0),mr=mr.contents),Recoil_isPromise(mr)?mr=Rt(Xt,mr,or,Ir,tr,lr).finally(vr):vr(),mr=mr instanceof WrappedValue$1?mr.value:mr}catch($r){mr=$r,Recoil_isPromise(mr)?mr=Tt(Xt,mr,or,Ir,tr,lr).finally(vr):(hr=!0,vr())}return hr?gr=loadableWithError$1(mr):Recoil_isPromise(mr)?gr=loadableWithPromise$1(mr):gr=loadableWithValue$2(mr),fr=!1,Ot(Xt,tr,Ir),It(Xt,or,new Set(Ir.keys()),tr),[gr,Ir]}function Dt(Xt,or){let tr=or.atomValues.get(it);if(tr!=null)return tr;const dr=new Set;try{tr=dt.get(Sr=>(typeof Sr!="string"&&Recoil_invariant(!1),getNodeLoadable$2(Xt,or,Sr).contents),{onNodeVisit:Sr=>{Sr.type==="branch"&&Sr.nodeKey!==it&&dr.add(Sr.nodeKey)}})}catch(Sr){throw Recoil_err(`Problem with cache lookup for selector "${it}": ${Sr.message}`)}if(tr){var fr;or.atomValues.set(it,tr),It(Xt,or,dr,(fr=Lt(Xt))===null||fr===void 0?void 0:fr.executionID)}return tr}function jt(Xt,or){const tr=Dt(Xt,or);if(tr!=null)return Nt(Xt),tr;const dr=Ft(Xt,or);if(dr!=null){var fr;return((fr=dr.loadingLoadable)===null||fr===void 0?void 0:fr.state)==="loading"&&wt(Xt,dr.executionID),dr.loadingLoadable}const Sr=getNewExecutionID(),[vr,mr]=At(Xt,or,Sr);return vr.state==="loading"?(Pt(Xt,Sr,vr,mr,or),wt(Xt,Sr)):(Nt(Xt),Ut(or,vr,mr)),vr}function Ft(Xt,or){const tr=Recoil_concatIterables([pt.has(Xt)?[Recoil_nullthrows(pt.get(Xt))]:[],Recoil_mapIterable(Recoil_filterIterable(pt,([fr])=>fr!==Xt),([,fr])=>fr)]);function dr(fr){for(const[Sr,vr]of fr)if(!getNodeLoadable$2(Xt,or,Sr).is(vr))return!0;return!1}for(const fr of tr){if(fr.stateVersions.get(or.version)||!dr(fr.depValuesDiscoveredSoFarDuringAsyncWork))return fr.stateVersions.set(or.version,!0),fr;fr.stateVersions.set(or.version,!1)}}function Lt(Xt){return pt.get(Xt)}function Pt(Xt,or,tr,dr,fr){pt.set(Xt,{depValuesDiscoveredSoFarDuringAsyncWork:dr,executionID:or,loadingLoadable:tr,stateVersions:new Map([[fr.version,!0]])})}function Ot(Xt,or,tr){if($t(Xt,or)){const dr=Lt(Xt);dr!=null&&(dr.depValuesDiscoveredSoFarDuringAsyncWork=tr)}}function Nt(Xt){pt.delete(Xt)}function $t(Xt,or){var tr;return or===((tr=Lt(Xt))===null||tr===void 0?void 0:tr.executionID)}function Vt(Xt){return Array.from(Xt.entries()).map(([or,tr])=>[or,tr.contents])}function Ut(Xt,or,tr){Xt.atomValues.set(it,or);try{dt.set(Vt(tr),or)}catch(dr){throw Recoil_err(`Problem with setting cache for selector "${it}": ${dr.message}`)}}function zt(Xt){if(dependencyStack.includes(it)){const or=`Recoil selector has circular dependencies: ${dependencyStack.slice(dependencyStack.indexOf(it)).join(" → ")}`;return loadableWithError$1(Recoil_err(or))}dependencyStack.push(it);try{return Xt()}finally{dependencyStack.pop()}}function Bt(Xt,or){const tr=or.atomValues.get(it);return tr??dt.get(dr=>{var fr;return typeof dr!="string"&&Recoil_invariant(!1),(fr=peekNodeLoadable$1(Xt,or,dr))===null||fr===void 0?void 0:fr.contents})}function Ht(Xt,or){return zt(()=>jt(Xt,or))}function Gt(Xt){Xt.atomValues.delete(it)}function Kt(Xt,or){rt==null&&Recoil_invariant(!1);for(const dr of ut){var tr;const fr=getNode$6(dr);(tr=fr.clearCache)===null||tr===void 0||tr.call(fr,Xt,or)}ut.clear(),Gt(or),dt.clear(),markRecoilValueModified$1(Xt,rt)}return ct!=null?rt=registerNode$1({key:it,nodeType:"selector",peek:Bt,get:Ht,set:(or,tr,dr)=>{let fr=!1;const Sr=new Map;function vr({key:lr}){if(fr)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Ir=getNodeLoadable$2(or,tr,lr);if(Ir.state==="hasValue")return Ir.contents;if(Ir.state==="loading"){const wr=`Getting value of asynchronous atom or selector "${lr}" in a pending state while setting selector "${it}" is not yet supported.`;throw Recoil_err(wr)}else throw Ir.contents}function mr(lr,Ir){if(fr)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const wr=typeof Ir=="function"?Ir(vr(lr)):Ir;setNodeValue$3(or,tr,lr.key,wr).forEach(($r,hn)=>Sr.set(hn,$r))}function hr(lr){mr(lr,DEFAULT_VALUE$6)}const gr=ct({set:mr,get:vr,reset:hr},dr);if(gr!==void 0)throw Recoil_isPromise(gr)?Recoil_err("Recoil: Async selector sets are not currently supported."):Recoil_err("Recoil: selector set should be a void function.");return fr=!0,Sr},init:gt,invalidate:Gt,clearCache:Kt,shouldDeleteConfigOnRelease:xt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:ht}):rt=registerNode$1({key:it,nodeType:"selector",peek:Bt,get:Ht,init:gt,invalidate:Gt,clearCache:Kt,shouldDeleteConfigOnRelease:xt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:ht})}selector.value=nt=>new WrappedValue$1(nt);var Recoil_selector=selector;const{isLoadable:isLoadable$2,loadableWithError:loadableWithError$2,loadableWithPromise:loadableWithPromise$2,loadableWithValue:loadableWithValue$3}=Recoil_Loadable$1,{WrappedValue:WrappedValue$2}=Recoil_Wrapper$1,{peekNodeInfo:peekNodeInfo$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$7,DefaultValue:DefaultValue$2,getConfigDeletionHandler:getConfigDeletionHandler$2,registerNode:registerNode$2,setConfigDeletionHandler:setConfigDeletionHandler$1}=Recoil_Node,{isRecoilValue:isRecoilValue$4}=Recoil_RecoilValue$1,{getRecoilValueAsLoadable:getRecoilValueAsLoadable$4,markRecoilValueModified:markRecoilValueModified$2,setRecoilValue:setRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$2}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$2}=Recoil_Retention,unwrap=nt=>nt instanceof WrappedValue$2?nt.value:nt;function baseAtom(nt){const{key:rt,persistence_UNSTABLE:it}=nt,st=retainedByOptionWithDefault$2(nt.retainedBy_UNSTABLE);let lt=0;function ct(wt){return loadableWithPromise$2(wt.then(Rt=>(ut=loadableWithValue$3(Rt),Rt)).catch(Rt=>{throw ut=loadableWithError$2(Rt),Rt}))}let ut=Recoil_isPromise(nt.default)?ct(nt.default):isLoadable$2(nt.default)?nt.default.state==="loading"?ct(nt.default.contents):nt.default:loadableWithValue$3(unwrap(nt.default));ut.contents;let dt;const ht=new Map;function pt(wt){return wt}function ft(wt,Rt){const Tt=Rt.then(It=>{var At,Dt;return((Dt=((At=wt.getState().nextTree)!==null&&At!==void 0?At:wt.getState().currentTree).atomValues.get(rt))===null||Dt===void 0?void 0:Dt.contents)===Tt&&setRecoilValue$4(wt,Et,It),It}).catch(It=>{var At,Dt;throw((Dt=((At=wt.getState().nextTree)!==null&&At!==void 0?At:wt.getState().currentTree).atomValues.get(rt))===null||Dt===void 0?void 0:Dt.contents)===Tt&&setRecoilValueLoadable$2(wt,Et,loadableWithError$2(It)),It});return Tt}function mt(wt,Rt,Tt){var It;lt++;const At=()=>{var Lt;lt--,(Lt=ht.get(wt))===null||Lt===void 0||Lt.forEach(Pt=>Pt()),ht.delete(wt)};if(wt.getState().knownAtoms.add(rt),ut.state==="loading"){const Lt=()=>{var Pt;((Pt=wt.getState().nextTree)!==null&&Pt!==void 0?Pt:wt.getState().currentTree).atomValues.has(rt)||markRecoilValueModified$2(wt,Et)};ut.contents.finally(Lt)}const Dt=(It=nt.effects)!==null&&It!==void 0?It:nt.effects_UNSTABLE;if(Dt!=null){let Lt=function(Gt){if($t&&Gt.key===rt){const Kt=Nt;return Kt instanceof DefaultValue$2?gt(wt,Rt):Recoil_isPromise(Kt)?loadableWithPromise$2(Kt.then(Xt=>Xt instanceof DefaultValue$2?ut.toPromise():Xt)):loadableWithValue$3(Kt)}return getRecoilValueAsLoadable$4(wt,Gt)},Pt=function(Gt){return Lt(Gt).toPromise()},Ot=function(Gt){var Kt;const Xt=peekNodeInfo$3(wt,(Kt=wt.getState().nextTree)!==null&&Kt!==void 0?Kt:wt.getState().currentTree,Gt.key);return $t&&Gt.key===rt&&!(Nt instanceof DefaultValue$2)?{...Xt,isSet:!0,loadable:Lt(Gt)}:Xt},Nt=DEFAULT_VALUE$7,$t=!0,Vt=!1,Ut=null;const zt=Gt=>Kt=>{if($t){const Xt=Lt(Et),or=Xt.state==="hasValue"?Xt.contents:DEFAULT_VALUE$7;Nt=typeof Kt=="function"?Kt(or):Kt,Recoil_isPromise(Nt)&&(Nt=Nt.then(tr=>(Ut={effect:Gt,value:tr},tr)))}else{if(Recoil_isPromise(Kt))throw Recoil_err("Setting atoms to async values is not implemented.");typeof Kt!="function"&&(Ut={effect:Gt,value:unwrap(Kt)}),setRecoilValue$4(wt,Et,typeof Kt=="function"?Xt=>{const or=unwrap(Kt(Xt));return Ut={effect:Gt,value:or},or}:unwrap(Kt))}},Bt=Gt=>()=>zt(Gt)(DEFAULT_VALUE$7),Ht=Gt=>Kt=>{var Xt;const{release:or}=wt.subscribeToTransactions(tr=>{var dr;let{currentTree:fr,previousTree:Sr}=tr.getState();Sr||(Sr=fr);const vr=(dr=fr.atomValues.get(rt))!==null&&dr!==void 0?dr:ut;if(vr.state==="hasValue"){var mr,hr,gr,lr;const Ir=vr.contents,wr=(mr=Sr.atomValues.get(rt))!==null&&mr!==void 0?mr:ut,Fr=wr.state==="hasValue"?wr.contents:DEFAULT_VALUE$7;((hr=Ut)===null||hr===void 0?void 0:hr.effect)!==Gt||((gr=Ut)===null||gr===void 0?void 0:gr.value)!==Ir?Kt(Ir,Fr,!fr.atomValues.has(rt)):((lr=Ut)===null||lr===void 0?void 0:lr.effect)===Gt&&(Ut=null)}},rt);ht.set(wt,[...(Xt=ht.get(wt))!==null&&Xt!==void 0?Xt:[],or])};for(const Gt of Dt)try{const Kt=Gt({node:Et,storeID:wt.storeID,parentStoreID_UNSTABLE:wt.parentStoreID,trigger:Tt,setSelf:zt(Gt),resetSelf:Bt(Gt),onSet:Ht(Gt),getPromise:Pt,getLoadable:Lt,getInfo_UNSTABLE:Ot});if(Kt!=null){var jt;ht.set(wt,[...(jt=ht.get(wt))!==null&&jt!==void 0?jt:[],Kt])}}catch(Kt){Nt=Kt,Vt=!0}if($t=!1,!(Nt instanceof DefaultValue$2)){var Ft;const Gt=Vt?loadableWithError$2(Nt):Recoil_isPromise(Nt)?loadableWithPromise$2(ft(wt,Nt)):loadableWithValue$3(unwrap(Nt));Gt.contents,Rt.atomValues.set(rt,Gt),(Ft=wt.getState().nextTree)===null||Ft===void 0||Ft.atomValues.set(rt,Gt)}}return At}function gt(wt,Rt){var Tt,It;return(Tt=(It=Rt.atomValues.get(rt))!==null&&It!==void 0?It:dt)!==null&&Tt!==void 0?Tt:ut}function xt(wt,Rt){if(Rt.atomValues.has(rt))return Recoil_nullthrows(Rt.atomValues.get(rt));if(Rt.nonvalidatedAtoms.has(rt)){if(dt!=null)return dt;if(it==null)return ut;const Tt=Rt.nonvalidatedAtoms.get(rt),It=it.validator(Tt,DEFAULT_VALUE$7);return dt=It instanceof DefaultValue$2?ut:loadableWithValue$3(It),dt}else return ut}function yt(){dt=void 0}function vt(wt,Rt,Tt){if(Rt.atomValues.has(rt)){const It=Recoil_nullthrows(Rt.atomValues.get(rt));if(It.state==="hasValue"&&Tt===It.contents)return new Map}else if(!Rt.nonvalidatedAtoms.has(rt)&&Tt instanceof DefaultValue$2)return new Map;return dt=void 0,new Map().set(rt,loadableWithValue$3(Tt))}function St(){return getConfigDeletionHandler$2(rt)!==void 0&&lt<=0}const Et=registerNode$2({key:rt,nodeType:"atom",peek:gt,get:xt,set:vt,init:mt,invalidate:yt,shouldDeleteConfigOnRelease:St,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,persistence_UNSTABLE:nt.persistence_UNSTABLE?{type:nt.persistence_UNSTABLE.type,backButton:nt.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:st});return Et}function atom(nt){const{...rt}=nt,it="default"in nt?nt.default:new Promise(()=>{});return isRecoilValue$4(it)?atomWithFallback({...rt,default:it}):baseAtom({...rt,default:it})}function atomWithFallback(nt){const rt=atom({...nt,default:DEFAULT_VALUE$7,persistence_UNSTABLE:nt.persistence_UNSTABLE===void 0?void 0:{...nt.persistence_UNSTABLE,validator:st=>st instanceof DefaultValue$2?st:Recoil_nullthrows(nt.persistence_UNSTABLE).validator(st,DEFAULT_VALUE$7)},effects:nt.effects,effects_UNSTABLE:nt.effects_UNSTABLE}),it=Recoil_selector({key:`${nt.key}__withFallback`,get:({get:st})=>{const lt=st(rt);return lt instanceof DefaultValue$2?nt.default:lt},set:({set:st},lt)=>st(rt,lt),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:nt.dangerouslyAllowMutability});return setConfigDeletionHandler$1(it.key,getConfigDeletionHandler$2(nt.key)),it}atom.value=nt=>new WrappedValue$2(nt);var Recoil_atom=atom;class MapCache{constructor(rt){var it;_defineProperty$2(this,"_map",void 0),_defineProperty$2(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(it=rt==null?void 0:rt.mapKey)!==null&&it!==void 0?it:st=>st}size(){return this._map.size}has(rt){return this._map.has(this._keyMapper(rt))}get(rt){return this._map.get(this._keyMapper(rt))}set(rt,it){this._map.set(this._keyMapper(rt),it)}delete(rt){this._map.delete(this._keyMapper(rt))}clear(){this._map.clear()}}var Recoil_MapCache={MapCache},Recoil_MapCache_1=Recoil_MapCache.MapCache,Recoil_MapCache$1=Object.freeze({__proto__:null,MapCache:Recoil_MapCache_1});const{LRUCache:LRUCache$2}=Recoil_LRUCache$1,{MapCache:MapCache$1}=Recoil_MapCache$1,defaultPolicy$1={equality:"reference",eviction:"none",maxSize:1/0};function cacheFromPolicy({equality:nt=defaultPolicy$1.equality,eviction:rt=defaultPolicy$1.eviction,maxSize:it=defaultPolicy$1.maxSize}=defaultPolicy$1){const st=getValueMapper$1(nt);return getCache(rt,it,st)}function getValueMapper$1(nt){switch(nt){case"reference":return rt=>rt;case"value":return rt=>Recoil_stableStringify(rt)}throw Recoil_err(`Unrecognized equality policy ${nt}`)}function getCache(nt,rt,it){switch(nt){case"keep-all":return new MapCache$1({mapKey:it});case"lru":return new LRUCache$2({mapKey:it,maxSize:Recoil_nullthrows(rt)});case"most-recent":return new LRUCache$2({mapKey:it,maxSize:1})}throw Recoil_err(`Unrecognized eviction policy ${nt}`)}var Recoil_cacheFromPolicy=cacheFromPolicy;const{setConfigDeletionHandler:setConfigDeletionHandler$2}=Recoil_Node;function atomFamily(nt){var rt,it;const st=Recoil_cacheFromPolicy({equality:(rt=(it=nt.cachePolicyForParams_UNSTABLE)===null||it===void 0?void 0:it.equality)!==null&&rt!==void 0?rt:"value",eviction:"keep-all"});return lt=>{var ct,ut;const dt=st.get(lt);if(dt!=null)return dt;const{cachePolicyForParams_UNSTABLE:ht,...pt}=nt,ft="default"in nt?nt.default:new Promise(()=>{}),mt=Recoil_atom({...pt,key:`${nt.key}__${(ct=Recoil_stableStringify(lt))!==null&&ct!==void 0?ct:"void"}`,default:typeof ft=="function"?ft(lt):ft,retainedBy_UNSTABLE:typeof nt.retainedBy_UNSTABLE=="function"?nt.retainedBy_UNSTABLE(lt):nt.retainedBy_UNSTABLE,effects:typeof nt.effects=="function"?nt.effects(lt):typeof nt.effects_UNSTABLE=="function"?nt.effects_UNSTABLE(lt):(ut=nt.effects)!==null&&ut!==void 0?ut:nt.effects_UNSTABLE});return st.set(lt,mt),setConfigDeletionHandler$2(mt.key,()=>{st.delete(lt)}),mt}}var Recoil_atomFamily=atomFamily;const{setConfigDeletionHandler:setConfigDeletionHandler$3}=Recoil_Node;let nextIndex=0;function selectorFamily(nt){var rt,it;const st=Recoil_cacheFromPolicy({equality:(rt=(it=nt.cachePolicyForParams_UNSTABLE)===null||it===void 0?void 0:it.equality)!==null&&rt!==void 0?rt:"value",eviction:"keep-all"});return lt=>{var ct;let ut;try{ut=st.get(lt)}catch(gt){throw Recoil_err(`Problem with cache lookup for selector ${nt.key}: ${gt.message}`)}if(ut!=null)return ut;const dt=`${nt.key}__selectorFamily/${(ct=Recoil_stableStringify(lt,{allowFunctions:!0}))!==null&&ct!==void 0?ct:"void"}/${nextIndex++}`,ht=gt=>nt.get(lt)(gt),pt=nt.cachePolicy_UNSTABLE,ft=typeof nt.retainedBy_UNSTABLE=="function"?nt.retainedBy_UNSTABLE(lt):nt.retainedBy_UNSTABLE;let mt;if(nt.set!=null){const gt=nt.set;mt=Recoil_selector({key:dt,get:ht,set:(yt,vt)=>gt(lt)(yt,vt),cachePolicy_UNSTABLE:pt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,retainedBy_UNSTABLE:ft})}else mt=Recoil_selector({key:dt,get:ht,cachePolicy_UNSTABLE:pt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,retainedBy_UNSTABLE:ft});return st.set(lt,mt),setConfigDeletionHandler$3(mt.key,()=>{st.delete(lt)}),mt}}var Recoil_selectorFamily=selectorFamily;const constantSelector=Recoil_selectorFamily({key:"__constant",get:nt=>()=>nt,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function constSelector(nt){return constantSelector(nt)}var Recoil_constSelector=constSelector;const throwingSelector=Recoil_selectorFamily({key:"__error",get:nt=>()=>{throw Recoil_err(nt)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function errorSelector(nt){return throwingSelector(nt)}var Recoil_errorSelector=errorSelector;function readOnlySelector(nt){return nt}var Recoil_readOnlySelector=readOnlySelector;const{loadableWithError:loadableWithError$3,loadableWithPromise:loadableWithPromise$3,loadableWithValue:loadableWithValue$4}=Recoil_Loadable$1;function concurrentRequests(nt,rt){const it=Array(rt.length).fill(void 0),st=Array(rt.length).fill(void 0);for(const[lt,ct]of rt.entries())try{it[lt]=nt(ct)}catch(ut){st[lt]=ut}return[it,st]}function isError(nt){return nt!=null&&!Recoil_isPromise(nt)}function unwrapDependencies(nt){return Array.isArray(nt)?nt:Object.getOwnPropertyNames(nt).map(rt=>nt[rt])}function wrapResults(nt,rt){return Array.isArray(nt)?rt:Object.getOwnPropertyNames(nt).reduce((it,st,lt)=>({...it,[st]:rt[lt]}),{})}function wrapLoadables(nt,rt,it){const st=it.map((lt,ct)=>lt==null?loadableWithValue$4(rt[ct]):Recoil_isPromise(lt)?loadableWithPromise$3(lt):loadableWithError$3(lt));return wrapResults(nt,st)}function combineAsyncResultsWithSyncResults(nt,rt){return rt.map((it,st)=>it===void 0?nt[st]:it)}const waitForNone=Recoil_selectorFamily({key:"__waitForNone",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return wrapLoadables(nt,st,lt)},dangerouslyAllowMutability:!0}),waitForAny=Recoil_selectorFamily({key:"__waitForAny",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return lt.some(ct=>!Recoil_isPromise(ct))?wrapLoadables(nt,st,lt):new Promise(ct=>{for(const[ut,dt]of lt.entries())Recoil_isPromise(dt)&&dt.then(ht=>{st[ut]=ht,lt[ut]=void 0,ct(wrapLoadables(nt,st,lt))}).catch(ht=>{lt[ut]=ht,ct(wrapLoadables(nt,st,lt))})})},dangerouslyAllowMutability:!0}),waitForAll=Recoil_selectorFamily({key:"__waitForAll",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);if(lt.every(ut=>ut==null))return wrapResults(nt,st);const ct=lt.find(isError);if(ct!=null)throw ct;return Promise.all(lt).then(ut=>wrapResults(nt,combineAsyncResultsWithSyncResults(st,ut)))},dangerouslyAllowMutability:!0}),waitForAllSettled=Recoil_selectorFamily({key:"__waitForAllSettled",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return lt.every(ct=>!Recoil_isPromise(ct))?wrapLoadables(nt,st,lt):Promise.all(lt.map((ct,ut)=>Recoil_isPromise(ct)?ct.then(dt=>{st[ut]=dt,lt[ut]=void 0}).catch(dt=>{st[ut]=void 0,lt[ut]=dt}):null)).then(()=>wrapLoadables(nt,st,lt))},dangerouslyAllowMutability:!0}),noWait=Recoil_selectorFamily({key:"__noWait",get:nt=>({get:rt})=>{try{return Recoil_selector.value(loadableWithValue$4(rt(nt)))}catch(it){return Recoil_selector.value(Recoil_isPromise(it)?loadableWithPromise$3(it):loadableWithError$3(it))}},dangerouslyAllowMutability:!0});var Recoil_WaitFor={waitForNone,waitForAny,waitForAll,waitForAllSettled,noWait};const{RecoilLoadable}=Recoil_Loadable$1,{DefaultValue:DefaultValue$3}=Recoil_Node,{RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1}=Recoil_RecoilRoot,{isRecoilValue:isRecoilValue$5}=Recoil_RecoilValue$1,{retentionZone:retentionZone$1}=Recoil_RetentionZone,{freshSnapshot:freshSnapshot$2}=Recoil_Snapshot$1,{useRecoilState:useRecoilState$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useRecoilValue:useRecoilValue$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useResetRecoilState:useResetRecoilState$1,useSetRecoilState:useSetRecoilState$1}=Recoil_Hooks,{useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver:useRecoilTransactionObserver$1}=Recoil_SnapshotHooks,{useRecoilCallback:useRecoilCallback$1}=Recoil_useRecoilCallback,{noWait:noWait$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,waitForAny:waitForAny$1,waitForNone:waitForNone$1}=Recoil_WaitFor;var Recoil_index={DefaultValue:DefaultValue$3,isRecoilValue:isRecoilValue$5,RecoilLoadable,RecoilEnv:Recoil_RecoilEnv,RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1,useRecoilBridgeAcrossReactRoots_UNSTABLE:Recoil_useRecoilBridgeAcrossReactRoots,atom:Recoil_atom,selector:Recoil_selector,atomFamily:Recoil_atomFamily,selectorFamily:Recoil_selectorFamily,constSelector:Recoil_constSelector,errorSelector:Recoil_errorSelector,readOnlySelector:Recoil_readOnlySelector,noWait:noWait$1,waitForNone:waitForNone$1,waitForAny:waitForAny$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,useRecoilValue:useRecoilValue$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilState:useRecoilState$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useSetRecoilState:useSetRecoilState$1,useResetRecoilState:useResetRecoilState$1,useGetRecoilValueInfo_UNSTABLE:Recoil_useGetRecoilValueInfo,useRecoilRefresher_UNSTABLE:Recoil_useRecoilRefresher,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilCallback:useRecoilCallback$1,useRecoilTransaction_UNSTABLE:Recoil_useRecoilTransaction,useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver_UNSTABLE:useRecoilTransactionObserver$1,snapshot_UNSTABLE:freshSnapshot$2,useRetain:Recoil_useRetain,retentionZone:retentionZone$1},Recoil_index_5=Recoil_index.RecoilRoot,Recoil_index_8=Recoil_index.atom,Recoil_index_20=Recoil_index.useRecoilValue,Recoil_index_22=Recoil_index.useRecoilState,Recoil_index_24=Recoil_index.useSetRecoilState,Recoil_index_25=Recoil_index.useResetRecoilState,propTypes$1={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function nt(st,lt,ct,ut,dt,ht){if(ht!==ReactPropTypesSecret){var pt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw pt.name="Invariant Violation",pt}}nt.isRequired=nt;function rt(){return nt}var it={array:nt,bigint:nt,bool:nt,func:nt,number:nt,object:nt,string:nt,symbol:nt,any:nt,arrayOf:rt,element:nt,elementType:nt,instanceOf:rt,node:nt,objectOf:rt,oneOf:rt,oneOfType:rt,shape:rt,exact:rt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return it.PropTypes=it,it};propTypes$1.exports=factoryWithThrowingShims();var propTypesExports=propTypes$1.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),Button=({btnCss:nt,onClick:rt,buttonName:it,type:st})=>jsxRuntimeExports.jsx("button",{className:nt,onClick:rt,type:st,children:it});Button.propTypes={btnCss:PropTypes.string,onClick:PropTypes.func,buttonName:PropTypes.string,type:PropTypes.string};const baseUrlState=Recoil_index_8({key:"baseUrlState",default:"https://i10c204.p.ssafy.io/"});var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var recoilPersist_1=dist.recoilPersist=void 0;const recoilPersist=(nt={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:rt="recoil-persist",storage:it=localStorage,converter:st=JSON}=nt,lt=({onSet:pt,node:ft,trigger:mt,setSelf:gt})=>{if(mt==="get"){const xt=ut();typeof xt.then=="function"&&xt.then(yt=>{yt.hasOwnProperty(ft.key)&&gt(yt[ft.key])}),xt.hasOwnProperty(ft.key)&&gt(xt[ft.key])}pt(async(xt,yt,vt)=>{const St=ut();typeof St.then=="function"?St.then(Et=>ct(xt,Et,ft.key,vt)):ct(xt,St,ft.key,vt)})},ct=(pt,ft,mt,gt)=>{gt?delete ft[mt]:ft[mt]=pt,ht(ft)},ut=()=>{const pt=it.getItem(rt);return pt==null?{}:typeof pt=="string"?dt(pt):typeof pt.then=="function"?pt.then(dt):{}},dt=pt=>{if(pt===void 0)return{};try{return st.parse(pt)}catch(ft){return console.error(ft),{}}},ht=pt=>{try{typeof it.mergeItem=="function"?it.mergeItem(rt,st.stringify(pt)):it.setItem(rt,st.stringify(pt))}catch(ft){console.error(ft)}};return{persistAtom:lt}};recoilPersist_1=dist.recoilPersist=recoilPersist;const{persistAtom:persistAtom$1}=recoilPersist_1({key:"userInfo",storage:localStorage}),userState=Recoil_index_8({key:"userInfo",default:{},effects_UNSTABLE:[persistAtom$1]}),modalState=Recoil_index_8({key:"modalState",default:{type:null,data:null}}),LoginPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_24(userState),it=Recoil_index_24(modalState),[st,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(""),dt=()=>{it({type:"signup",data:""})},ht=mt=>{lt(mt.currentTarget.value)},pt=mt=>{ut(mt.currentTarget.value)},ft=async mt=>{mt.preventDefault(),await axios.post(`${nt}api/auth/login`,{email:st,password:ct}).then(gt=>{localStorage.clear(),localStorage.setItem("isLogin",!0),rt({token:gt.data.data_body.token.access_token,info:gt.data.data_body.user_info}),window.location.replace("/")})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-screen gap-24",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center font-mono text-3xl text-teal-700",children:jsxRuntimeExports.jsx("img",{src:"/fullLogo.png",alt:"",className:"w-3/5"})}),jsxRuntimeExports.jsxs("form",{className:"flex flex-col gap-4 p-4 border border-teal-700 rounded-md",onSubmit:ft,children:[jsxRuntimeExports.jsx("label",{className:"font-mono",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:st,onChange:ht,className:"px-2 py-1 border rounded-md"}),jsxRuntimeExports.jsx("label",{className:"font-mono",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:ct,autoComplete:"on",onChange:pt,className:"px-2 py-1 border rounded-md"}),jsxRuntimeExports.jsx(Button,{type:"submit",buttonName:"로그인",btnCss:"py-1 text-white bg-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:dt,value:"회원가입",className:"py-1 text-white bg-teal-700 rounded-md"})]})]})};var lib$1={exports:{}},Modal$2={},ModalPortal={exports:{}},focusManager={},tabbable={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ft;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var it="none",st="contents",lt=/input|select|textarea|button|object|iframe/;function ct(mt,gt){return gt.getPropertyValue("overflow")!=="visible"||mt.scrollWidth<=0&&mt.scrollHeight<=0}function ut(mt){var gt=mt.offsetWidth<=0&&mt.offsetHeight<=0;if(gt&&!mt.innerHTML)return!0;try{var xt=window.getComputedStyle(mt),yt=xt.getPropertyValue("display");return gt?yt!==st&&ct(mt,xt):yt===it}catch{return console.warn("Failed to inspect element style"),!1}}function dt(mt){for(var gt=mt,xt=mt.getRootNode&&mt.getRootNode();gt&&gt!==document.body;){if(xt&&gt===xt&&(gt=xt.host.parentNode),ut(gt))return!1;gt=gt.parentNode}return!0}function ht(mt,gt){var xt=mt.nodeName.toLowerCase(),yt=lt.test(xt)&&!mt.disabled||xt==="a"&&mt.href||gt;return yt&&dt(mt)}function pt(mt){var gt=mt.getAttribute("tabindex");gt===null&&(gt=void 0);var xt=isNaN(gt);return(xt||gt>=0)&&ht(mt,!xt)}function ft(mt){var gt=[].slice.call(mt.querySelectorAll("*"),0).reduce(function(xt,yt){return xt.concat(yt.shadowRoot?ft(yt.shadowRoot):[yt])},[]);return gt.filter(pt)}nt.exports=rt.default})(tabbable,tabbable.exports);var tabbableExports=tabbable.exports;Object.defineProperty(focusManager,"__esModule",{value:!0});focusManager.resetState=resetState$4;focusManager.log=log$4;focusManager.handleBlur=handleBlur;focusManager.handleFocus=handleFocus;focusManager.markForFocusLater=markForFocusLater;focusManager.returnFocus=returnFocus;focusManager.popWithoutFocus=popWithoutFocus;focusManager.setupScopedFocus=setupScopedFocus;focusManager.teardownScopedFocus=teardownScopedFocus;var _tabbable=tabbableExports,_tabbable2=_interopRequireDefault$4(_tabbable);function _interopRequireDefault$4(nt){return nt&&nt.__esModule?nt:{default:nt}}var focusLaterElements=[],modalElement=null,needToFocus=!1;function resetState$4(){focusLaterElements=[]}function log$4(){}function handleBlur(){needToFocus=!0}function handleFocus(){if(needToFocus){if(needToFocus=!1,!modalElement)return;setTimeout(function(){if(!modalElement.contains(document.activeElement)){var nt=(0,_tabbable2.default)(modalElement)[0]||modalElement;nt.focus()}},0)}}function markForFocusLater(){focusLaterElements.push(document.activeElement)}function returnFocus(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,rt=null;try{focusLaterElements.length!==0&&(rt=focusLaterElements.pop(),rt.focus({preventScroll:nt}));return}catch{console.warn(["You tried to return focus to",rt,"but it is not in the DOM anymore"].join(" "))}}function popWithoutFocus(){focusLaterElements.length>0&&focusLaterElements.pop()}function setupScopedFocus(nt){modalElement=nt,window.addEventListener?(window.addEventListener("blur",handleBlur,!1),document.addEventListener("focus",handleFocus,!0)):(window.attachEvent("onBlur",handleBlur),document.attachEvent("onFocus",handleFocus))}function teardownScopedFocus(){modalElement=null,window.addEventListener?(window.removeEventListener("blur",handleBlur),document.removeEventListener("focus",handleFocus)):(window.detachEvent("onBlur",handleBlur),document.detachEvent("onFocus",handleFocus))}var scopeTab={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ut;var it=tabbableExports,st=lt(it);function lt(dt){return dt&&dt.__esModule?dt:{default:dt}}function ct(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return dt.activeElement.shadowRoot?ct(dt.activeElement.shadowRoot):dt.activeElement}function ut(dt,ht){var pt=(0,st.default)(dt);if(!pt.length){ht.preventDefault();return}var ft=void 0,mt=ht.shiftKey,gt=pt[0],xt=pt[pt.length-1],yt=ct();if(dt===yt){if(!mt)return;ft=xt}if(xt===yt&&!mt&&(ft=gt),gt===yt&&mt&&(ft=xt),ft){ht.preventDefault(),ft.focus();return}var vt=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),St=vt!=null&&vt[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(St){var Et=pt.indexOf(yt);if(Et>-1&&(Et+=mt?-1:1),ft=pt[Et],typeof ft>"u"){ht.preventDefault(),ft=mt?xt:gt,ft.focus();return}ht.preventDefault(),ft.focus()}}nt.exports=rt.default})(scopeTab,scopeTab.exports);var scopeTabExports=scopeTab.exports,ariaAppHider$1={},warning=function(){},warning_1=warning,safeHTMLElement={},exenv={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(nt){(function(){var rt=!!(typeof window<"u"&&window.document&&window.document.createElement),it={canUseDOM:rt,canUseWorkers:typeof Worker<"u",canUseEventListeners:rt&&!!(window.addEventListener||window.attachEvent),canUseViewport:rt&&!!window.screen};nt.exports?nt.exports=it:window.ExecutionEnvironment=it})()})(exenv);var exenvExports=exenv.exports;Object.defineProperty(safeHTMLElement,"__esModule",{value:!0});safeHTMLElement.canUseDOM=safeHTMLElement.SafeNodeList=safeHTMLElement.SafeHTMLCollection=void 0;var _exenv=exenvExports,_exenv2=_interopRequireDefault$3(_exenv);function _interopRequireDefault$3(nt){return nt&&nt.__esModule?nt:{default:nt}}var EE=_exenv2.default,SafeHTMLElement=EE.canUseDOM?window.HTMLElement:{};safeHTMLElement.SafeHTMLCollection=EE.canUseDOM?window.HTMLCollection:{};safeHTMLElement.SafeNodeList=EE.canUseDOM?window.NodeList:{};safeHTMLElement.canUseDOM=EE.canUseDOM;safeHTMLElement.default=SafeHTMLElement;Object.defineProperty(ariaAppHider$1,"__esModule",{value:!0});ariaAppHider$1.resetState=resetState$3;ariaAppHider$1.log=log$3;ariaAppHider$1.assertNodeList=assertNodeList;ariaAppHider$1.setElement=setElement;ariaAppHider$1.validateElement=validateElement;ariaAppHider$1.hide=hide$2;ariaAppHider$1.show=show;ariaAppHider$1.documentNotReadyOrSSRTesting=documentNotReadyOrSSRTesting;var _warning=warning_1,_warning2=_interopRequireDefault$2(_warning),_safeHTMLElement$1=safeHTMLElement;function _interopRequireDefault$2(nt){return nt&&nt.__esModule?nt:{default:nt}}var globalElement=null;function resetState$3(){globalElement&&(globalElement.removeAttribute?globalElement.removeAttribute("aria-hidden"):globalElement.length!=null?globalElement.forEach(function(nt){return nt.removeAttribute("aria-hidden")}):document.querySelectorAll(globalElement).forEach(function(nt){return nt.removeAttribute("aria-hidden")})),globalElement=null}function log$3(){}function assertNodeList(nt,rt){if(!nt||!nt.length)throw new Error("react-modal: No elements were found for selector "+rt+".")}function setElement(nt){var rt=nt;if(typeof rt=="string"&&_safeHTMLElement$1.canUseDOM){var it=document.querySelectorAll(rt);assertNodeList(it,rt),rt=it}return globalElement=rt||globalElement,globalElement}function validateElement(nt){var rt=nt||globalElement;return rt?Array.isArray(rt)||rt instanceof HTMLCollection||rt instanceof NodeList?rt:[rt]:((0,_warning2.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function hide$2(nt){var rt=!0,it=!1,st=void 0;try{for(var lt=validateElement(nt)[Symbol.iterator](),ct;!(rt=(ct=lt.next()).done);rt=!0){var ut=ct.value;ut.setAttribute("aria-hidden","true")}}catch(dt){it=!0,st=dt}finally{try{!rt&&lt.return&&lt.return()}finally{if(it)throw st}}}function show(nt){var rt=!0,it=!1,st=void 0;try{for(var lt=validateElement(nt)[Symbol.iterator](),ct;!(rt=(ct=lt.next()).done);rt=!0){var ut=ct.value;ut.removeAttribute("aria-hidden")}}catch(dt){it=!0,st=dt}finally{try{!rt&&lt.return&&lt.return()}finally{if(it)throw st}}}function documentNotReadyOrSSRTesting(){globalElement=null}var classList={};Object.defineProperty(classList,"__esModule",{value:!0});classList.resetState=resetState$2;classList.log=log$2;var htmlClassList={},docBodyClassList={};function removeClass(nt,rt){nt.classList.remove(rt)}function resetState$2(){var nt=document.getElementsByTagName("html")[0];for(var rt in htmlClassList)removeClass(nt,htmlClassList[rt]);var it=document.body;for(var st in docBodyClassList)removeClass(it,docBodyClassList[st]);htmlClassList={},docBodyClassList={}}function log$2(){}var incrementReference=function(rt,it){return rt[it]||(rt[it]=0),rt[it]+=1,it},decrementReference=function(rt,it){return rt[it]&&(rt[it]-=1),it},trackClass=function(rt,it,st){st.forEach(function(lt){incrementReference(it,lt),rt.add(lt)})},untrackClass=function(rt,it,st){st.forEach(function(lt){decrementReference(it,lt),it[lt]===0&&rt.remove(lt)})};classList.add=function(rt,it){return trackClass(rt.classList,rt.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,it.split(" "))};classList.remove=function(rt,it){return untrackClass(rt.classList,rt.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,it.split(" "))};var portalOpenInstances$1={};Object.defineProperty(portalOpenInstances$1,"__esModule",{value:!0});portalOpenInstances$1.log=log$1;portalOpenInstances$1.resetState=resetState$1;function _classCallCheck$1(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}var PortalOpenInstances=function nt(){var rt=this;_classCallCheck$1(this,nt),this.register=function(it){rt.openInstances.indexOf(it)===-1&&(rt.openInstances.push(it),rt.emit("register"))},this.deregister=function(it){var st=rt.openInstances.indexOf(it);st!==-1&&(rt.openInstances.splice(st,1),rt.emit("deregister"))},this.subscribe=function(it){rt.subscribers.push(it)},this.emit=function(it){rt.subscribers.forEach(function(st){return st(it,rt.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},portalOpenInstances=new PortalOpenInstances;function log$1(){console.log("portalOpenInstances ----------"),console.log(portalOpenInstances.openInstances.length),portalOpenInstances.openInstances.forEach(function(nt){return console.log(nt)}),console.log("end portalOpenInstances ----------")}function resetState$1(){portalOpenInstances=new PortalOpenInstances}portalOpenInstances$1.default=portalOpenInstances;var bodyTrap$1={};Object.defineProperty(bodyTrap$1,"__esModule",{value:!0});bodyTrap$1.resetState=resetState;bodyTrap$1.log=log;var _portalOpenInstances=portalOpenInstances$1,_portalOpenInstances2=_interopRequireDefault$1(_portalOpenInstances);function _interopRequireDefault$1(nt){return nt&&nt.__esModule?nt:{default:nt}}var before=void 0,after=void 0,instances$1=[];function resetState(){for(var nt=[before,after],rt=0;rt<nt.length;rt++){var it=nt[rt];it&&it.parentNode&&it.parentNode.removeChild(it)}before=after=null,instances$1=[]}function log(){console.log("bodyTrap ----------"),console.log(instances$1.length);for(var nt=[before,after],rt=0;rt<nt.length;rt++){var it=nt[rt],st=it||{};console.log(st.nodeName,st.className,st.id)}console.log("edn bodyTrap ----------")}function focusContent(){instances$1.length!==0&&instances$1[instances$1.length-1].focusContent()}function bodyTrap(nt,rt){!before&&!after&&(before=document.createElement("div"),before.setAttribute("data-react-modal-body-trap",""),before.style.position="absolute",before.style.opacity="0",before.setAttribute("tabindex","0"),before.addEventListener("focus",focusContent),after=before.cloneNode(),after.addEventListener("focus",focusContent)),instances$1=rt,instances$1.length>0?(document.body.firstChild!==before&&document.body.insertBefore(before,document.body.firstChild),document.body.lastChild!==after&&document.body.appendChild(after)):(before.parentElement&&before.parentElement.removeChild(before),after.parentElement&&after.parentElement.removeChild(after))}_portalOpenInstances2.default.subscribe(bodyTrap);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=Object.assign||function($t){for(var Vt=1;Vt<arguments.length;Vt++){var Ut=arguments[Vt];for(var zt in Ut)Object.prototype.hasOwnProperty.call(Ut,zt)&&($t[zt]=Ut[zt])}return $t},st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},lt=function(){function $t(Vt,Ut){for(var zt=0;zt<Ut.length;zt++){var Bt=Ut[zt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Vt,Bt.key,Bt)}}return function(Vt,Ut,zt){return Ut&&$t(Vt.prototype,Ut),zt&&$t(Vt,zt),Vt}}(),ct=reactExports,ut=propTypesExports,dt=It(ut),ht=focusManager,pt=Tt(ht),ft=scopeTabExports,mt=It(ft),gt=ariaAppHider$1,xt=Tt(gt),yt=classList,vt=Tt(yt),St=safeHTMLElement,Et=It(St),wt=portalOpenInstances$1,Rt=It(wt);function Tt($t){if($t&&$t.__esModule)return $t;var Vt={};if($t!=null)for(var Ut in $t)Object.prototype.hasOwnProperty.call($t,Ut)&&(Vt[Ut]=$t[Ut]);return Vt.default=$t,Vt}function It($t){return $t&&$t.__esModule?$t:{default:$t}}function At($t,Vt){if(!($t instanceof Vt))throw new TypeError("Cannot call a class as a function")}function Dt($t,Vt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&(typeof Vt=="object"||typeof Vt=="function")?Vt:$t}function jt($t,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);$t.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,Vt):$t.__proto__=Vt)}var Ft={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Lt=function(Vt){return Vt.code==="Tab"||Vt.keyCode===9},Pt=function(Vt){return Vt.code==="Escape"||Vt.keyCode===27},Ot=0,Nt=function($t){jt(Vt,$t);function Vt(Ut){At(this,Vt);var zt=Dt(this,(Vt.__proto__||Object.getPrototypeOf(Vt)).call(this,Ut));return zt.setOverlayRef=function(Bt){zt.overlay=Bt,zt.props.overlayRef&&zt.props.overlayRef(Bt)},zt.setContentRef=function(Bt){zt.content=Bt,zt.props.contentRef&&zt.props.contentRef(Bt)},zt.afterClose=function(){var Bt=zt.props,Ht=Bt.appElement,Gt=Bt.ariaHideApp,Kt=Bt.htmlOpenClassName,Xt=Bt.bodyOpenClassName,or=Bt.parentSelector,tr=or&&or().ownerDocument||document;Xt&&vt.remove(tr.body,Xt),Kt&&vt.remove(tr.getElementsByTagName("html")[0],Kt),Gt&&Ot>0&&(Ot-=1,Ot===0&&xt.show(Ht)),zt.props.shouldFocusAfterRender&&(zt.props.shouldReturnFocusAfterClose?(pt.returnFocus(zt.props.preventScroll),pt.teardownScopedFocus()):pt.popWithoutFocus()),zt.props.onAfterClose&&zt.props.onAfterClose(),Rt.default.deregister(zt)},zt.open=function(){zt.beforeOpen(),zt.state.afterOpen&&zt.state.beforeClose?(clearTimeout(zt.closeTimer),zt.setState({beforeClose:!1})):(zt.props.shouldFocusAfterRender&&(pt.setupScopedFocus(zt.node),pt.markForFocusLater()),zt.setState({isOpen:!0},function(){zt.openAnimationFrame=requestAnimationFrame(function(){zt.setState({afterOpen:!0}),zt.props.isOpen&&zt.props.onAfterOpen&&zt.props.onAfterOpen({overlayEl:zt.overlay,contentEl:zt.content})})}))},zt.close=function(){zt.props.closeTimeoutMS>0?zt.closeWithTimeout():zt.closeWithoutTimeout()},zt.focusContent=function(){return zt.content&&!zt.contentHasFocus()&&zt.content.focus({preventScroll:!0})},zt.closeWithTimeout=function(){var Bt=Date.now()+zt.props.closeTimeoutMS;zt.setState({beforeClose:!0,closesAt:Bt},function(){zt.closeTimer=setTimeout(zt.closeWithoutTimeout,zt.state.closesAt-Date.now())})},zt.closeWithoutTimeout=function(){zt.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},zt.afterClose)},zt.handleKeyDown=function(Bt){Lt(Bt)&&(0,mt.default)(zt.content,Bt),zt.props.shouldCloseOnEsc&&Pt(Bt)&&(Bt.stopPropagation(),zt.requestClose(Bt))},zt.handleOverlayOnClick=function(Bt){zt.shouldClose===null&&(zt.shouldClose=!0),zt.shouldClose&&zt.props.shouldCloseOnOverlayClick&&(zt.ownerHandlesClose()?zt.requestClose(Bt):zt.focusContent()),zt.shouldClose=null},zt.handleContentOnMouseUp=function(){zt.shouldClose=!1},zt.handleOverlayOnMouseDown=function(Bt){!zt.props.shouldCloseOnOverlayClick&&Bt.target==zt.overlay&&Bt.preventDefault()},zt.handleContentOnClick=function(){zt.shouldClose=!1},zt.handleContentOnMouseDown=function(){zt.shouldClose=!1},zt.requestClose=function(Bt){return zt.ownerHandlesClose()&&zt.props.onRequestClose(Bt)},zt.ownerHandlesClose=function(){return zt.props.onRequestClose},zt.shouldBeClosed=function(){return!zt.state.isOpen&&!zt.state.beforeClose},zt.contentHasFocus=function(){return document.activeElement===zt.content||zt.content.contains(document.activeElement)},zt.buildClassName=function(Bt,Ht){var Gt=(typeof Ht>"u"?"undefined":st(Ht))==="object"?Ht:{base:Ft[Bt],afterOpen:Ft[Bt]+"--after-open",beforeClose:Ft[Bt]+"--before-close"},Kt=Gt.base;return zt.state.afterOpen&&(Kt=Kt+" "+Gt.afterOpen),zt.state.beforeClose&&(Kt=Kt+" "+Gt.beforeClose),typeof Ht=="string"&&Ht?Kt+" "+Ht:Kt},zt.attributesFromObject=function(Bt,Ht){return Object.keys(Ht).reduce(function(Gt,Kt){return Gt[Bt+"-"+Kt]=Ht[Kt],Gt},{})},zt.state={afterOpen:!1,beforeClose:!1},zt.shouldClose=null,zt.moveFromContentToOverlay=null,zt}return lt(Vt,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(zt,Bt){this.props.isOpen&&!zt.isOpen?this.open():!this.props.isOpen&&zt.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!Bt.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var zt=this.props,Bt=zt.appElement,Ht=zt.ariaHideApp,Gt=zt.htmlOpenClassName,Kt=zt.bodyOpenClassName,Xt=zt.parentSelector,or=Xt&&Xt().ownerDocument||document;Kt&&vt.add(or.body,Kt),Gt&&vt.add(or.getElementsByTagName("html")[0],Gt),Ht&&(Ot+=1,xt.hide(Bt)),Rt.default.register(this)}},{key:"render",value:function(){var zt=this.props,Bt=zt.id,Ht=zt.className,Gt=zt.overlayClassName,Kt=zt.defaultStyles,Xt=zt.children,or=Ht?{}:Kt.content,tr=Gt?{}:Kt.overlay;if(this.shouldBeClosed())return null;var dr={ref:this.setOverlayRef,className:this.buildClassName("overlay",Gt),style:it({},tr,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},fr=it({id:Bt,ref:this.setContentRef,style:it({},or,this.props.style.content),className:this.buildClassName("content",Ht),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",it({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Sr=this.props.contentElement(fr,Xt);return this.props.overlayElement(dr,Sr)}}]),Vt}(ct.Component);Nt.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Nt.propTypes={isOpen:dt.default.bool.isRequired,defaultStyles:dt.default.shape({content:dt.default.object,overlay:dt.default.object}),style:dt.default.shape({content:dt.default.object,overlay:dt.default.object}),className:dt.default.oneOfType([dt.default.string,dt.default.object]),overlayClassName:dt.default.oneOfType([dt.default.string,dt.default.object]),parentSelector:dt.default.func,bodyOpenClassName:dt.default.string,htmlOpenClassName:dt.default.string,ariaHideApp:dt.default.bool,appElement:dt.default.oneOfType([dt.default.instanceOf(Et.default),dt.default.instanceOf(St.SafeHTMLCollection),dt.default.instanceOf(St.SafeNodeList),dt.default.arrayOf(dt.default.instanceOf(Et.default))]),onAfterOpen:dt.default.func,onAfterClose:dt.default.func,onRequestClose:dt.default.func,closeTimeoutMS:dt.default.number,shouldFocusAfterRender:dt.default.bool,shouldCloseOnOverlayClick:dt.default.bool,shouldReturnFocusAfterClose:dt.default.bool,preventScroll:dt.default.bool,role:dt.default.string,contentLabel:dt.default.string,aria:dt.default.object,data:dt.default.object,children:dt.default.node,shouldCloseOnEsc:dt.default.bool,overlayRef:dt.default.func,contentRef:dt.default.func,id:dt.default.string,overlayElement:dt.default.func,contentElement:dt.default.func,testId:dt.default.string},rt.default=Nt,nt.exports=rt.default})(ModalPortal,ModalPortal.exports);var ModalPortalExports=ModalPortal.exports;function componentWillMount(){var nt=this.constructor.getDerivedStateFromProps(this.props,this.state);nt!=null&&this.setState(nt)}function componentWillReceiveProps(nt){function rt(it){var st=this.constructor.getDerivedStateFromProps(nt,it);return st??null}this.setState(rt.bind(this))}function componentWillUpdate(nt,rt){try{var it=this.props,st=this.state;this.props=nt,this.state=rt,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(it,st)}finally{this.props=it,this.state=st}}componentWillMount.__suppressDeprecationWarning=!0;componentWillReceiveProps.__suppressDeprecationWarning=!0;componentWillUpdate.__suppressDeprecationWarning=!0;function polyfill(nt){var rt=nt.prototype;if(!rt||!rt.isReactComponent)throw new Error("Can only polyfill class components");if(typeof nt.getDerivedStateFromProps!="function"&&typeof rt.getSnapshotBeforeUpdate!="function")return nt;var it=null,st=null,lt=null;if(typeof rt.componentWillMount=="function"?it="componentWillMount":typeof rt.UNSAFE_componentWillMount=="function"&&(it="UNSAFE_componentWillMount"),typeof rt.componentWillReceiveProps=="function"?st="componentWillReceiveProps":typeof rt.UNSAFE_componentWillReceiveProps=="function"&&(st="UNSAFE_componentWillReceiveProps"),typeof rt.componentWillUpdate=="function"?lt="componentWillUpdate":typeof rt.UNSAFE_componentWillUpdate=="function"&&(lt="UNSAFE_componentWillUpdate"),it!==null||st!==null||lt!==null){var ct=nt.displayName||nt.name,ut=typeof nt.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+ct+" uses "+ut+" but also contains the following legacy lifecycles:"+(it!==null?`
  `+it:"")+(st!==null?`
  `+st:"")+(lt!==null?`
  `+lt:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof nt.getDerivedStateFromProps=="function"&&(rt.componentWillMount=componentWillMount,rt.componentWillReceiveProps=componentWillReceiveProps),typeof rt.getSnapshotBeforeUpdate=="function"){if(typeof rt.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");rt.componentWillUpdate=componentWillUpdate;var dt=rt.componentDidUpdate;rt.componentDidUpdate=function(pt,ft,mt){var gt=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:mt;dt.call(this,pt,ft,gt)}}return nt}const reactLifecyclesCompat_es=Object.freeze(Object.defineProperty({__proto__:null,polyfill},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(reactLifecyclesCompat_es);Object.defineProperty(Modal$2,"__esModule",{value:!0});Modal$2.bodyOpenClassName=Modal$2.portalClassName=void 0;var _extends$2=Object.assign||function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_createClass=function(){function nt(rt,it){for(var st=0;st<it.length;st++){var lt=it[st];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(rt,lt.key,lt)}}return function(rt,it,st){return it&&nt(rt.prototype,it),st&&nt(rt,st),rt}}(),_react=reactExports,_react2=_interopRequireDefault(_react),_reactDom=reactDomExports,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ModalPortal=ModalPortalExports,_ModalPortal2=_interopRequireDefault(_ModalPortal),_ariaAppHider=ariaAppHider$1,ariaAppHider=_interopRequireWildcard(_ariaAppHider),_safeHTMLElement=safeHTMLElement,_safeHTMLElement2=_interopRequireDefault(_safeHTMLElement),_reactLifecyclesCompat=require$$6;function _interopRequireWildcard(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.prototype.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function _interopRequireDefault(nt){return nt&&nt.__esModule?nt:{default:nt}}function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(nt,rt){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rt&&(typeof rt=="object"||typeof rt=="function")?rt:nt}function _inherits(nt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof rt);nt.prototype=Object.create(rt&&rt.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),rt&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,rt):nt.__proto__=rt)}var portalClassName=Modal$2.portalClassName="ReactModalPortal",bodyOpenClassName=Modal$2.bodyOpenClassName="ReactModal__Body--open",isReact16=_safeHTMLElement.canUseDOM&&_reactDom2.default.createPortal!==void 0,createHTMLElement=function(rt){return document.createElement(rt)},getCreatePortal=function(){return isReact16?_reactDom2.default.createPortal:_reactDom2.default.unstable_renderSubtreeIntoContainer};function getParentElement(nt){return nt()}var Modal$1=function(nt){_inherits(rt,nt);function rt(){var it,st,lt,ct;_classCallCheck(this,rt);for(var ut=arguments.length,dt=Array(ut),ht=0;ht<ut;ht++)dt[ht]=arguments[ht];return ct=(st=(lt=_possibleConstructorReturn(this,(it=rt.__proto__||Object.getPrototypeOf(rt)).call.apply(it,[this].concat(dt))),lt),lt.removePortal=function(){!isReact16&&_reactDom2.default.unmountComponentAtNode(lt.node);var pt=getParentElement(lt.props.parentSelector);pt&&pt.contains(lt.node)?pt.removeChild(lt.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},lt.portalRef=function(pt){lt.portal=pt},lt.renderPortal=function(pt){var ft=getCreatePortal(),mt=ft(lt,_react2.default.createElement(_ModalPortal2.default,_extends$2({defaultStyles:rt.defaultStyles},pt)),lt.node);lt.portalRef(mt)},st),_possibleConstructorReturn(lt,ct)}return _createClass(rt,[{key:"componentDidMount",value:function(){if(_safeHTMLElement.canUseDOM){isReact16||(this.node=createHTMLElement("div")),this.node.className=this.props.portalClassName;var st=getParentElement(this.props.parentSelector);st.appendChild(this.node),!isReact16&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(st){var lt=getParentElement(st.parentSelector),ct=getParentElement(this.props.parentSelector);return{prevParent:lt,nextParent:ct}}},{key:"componentDidUpdate",value:function(st,lt,ct){if(_safeHTMLElement.canUseDOM){var ut=this.props,dt=ut.isOpen,ht=ut.portalClassName;st.portalClassName!==ht&&(this.node.className=ht);var pt=ct.prevParent,ft=ct.nextParent;ft!==pt&&(pt.removeChild(this.node),ft.appendChild(this.node)),!(!st.isOpen&&!dt)&&!isReact16&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!_safeHTMLElement.canUseDOM||!this.node||!this.portal)){var st=this.portal.state,lt=Date.now(),ct=st.isOpen&&this.props.closeTimeoutMS&&(st.closesAt||lt+this.props.closeTimeoutMS);ct?(st.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,ct-lt)):this.removePortal()}}},{key:"render",value:function(){if(!_safeHTMLElement.canUseDOM||!isReact16)return null;!this.node&&isReact16&&(this.node=createHTMLElement("div"));var st=getCreatePortal();return st(_react2.default.createElement(_ModalPortal2.default,_extends$2({ref:this.portalRef,defaultStyles:rt.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(st){ariaAppHider.setElement(st)}}]),rt}(_react.Component);Modal$1.propTypes={isOpen:_propTypes2.default.bool.isRequired,style:_propTypes2.default.shape({content:_propTypes2.default.object,overlay:_propTypes2.default.object}),portalClassName:_propTypes2.default.string,bodyOpenClassName:_propTypes2.default.string,htmlOpenClassName:_propTypes2.default.string,className:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),overlayClassName:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),appElement:_propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default),_propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection),_propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList),_propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),onAfterOpen:_propTypes2.default.func,onRequestClose:_propTypes2.default.func,closeTimeoutMS:_propTypes2.default.number,ariaHideApp:_propTypes2.default.bool,shouldFocusAfterRender:_propTypes2.default.bool,shouldCloseOnOverlayClick:_propTypes2.default.bool,shouldReturnFocusAfterClose:_propTypes2.default.bool,preventScroll:_propTypes2.default.bool,parentSelector:_propTypes2.default.func,aria:_propTypes2.default.object,data:_propTypes2.default.object,role:_propTypes2.default.string,contentLabel:_propTypes2.default.string,shouldCloseOnEsc:_propTypes2.default.bool,overlayRef:_propTypes2.default.func,contentRef:_propTypes2.default.func,id:_propTypes2.default.string,overlayElement:_propTypes2.default.func,contentElement:_propTypes2.default.func};Modal$1.defaultProps={isOpen:!1,portalClassName,bodyOpenClassName,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(rt,it){return _react2.default.createElement("div",rt,it)},contentElement:function(rt,it){return _react2.default.createElement("div",rt,it)}};Modal$1.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,_reactLifecyclesCompat.polyfill)(Modal$1);Modal$2.default=Modal$1;(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=Modal$2,st=lt(it);function lt(ct){return ct&&ct.__esModule?ct:{default:ct}}rt.default=st.default,nt.exports=rt.default})(lib$1,lib$1.exports);var libExports=lib$1.exports;const Modal=getDefaultExportFromCjs(libExports);var isCheckBoxInput=nt=>nt.type==="checkbox",isDateObject=nt=>nt instanceof Date,isNullOrUndefined=nt=>nt==null;const isObjectType=nt=>typeof nt=="object";var isObject$1=nt=>!isNullOrUndefined(nt)&&!Array.isArray(nt)&&isObjectType(nt)&&!isDateObject(nt),getEventValue=nt=>isObject$1(nt)&&nt.target?isCheckBoxInput(nt.target)?nt.target.checked:nt.target.value:nt,getNodeParentName=nt=>nt.substring(0,nt.search(/\.\d+(\.|$)/))||nt,isNameInFieldArray=(nt,rt)=>nt.has(getNodeParentName(rt)),isPlainObject=nt=>{const rt=nt.constructor&&nt.constructor.prototype;return isObject$1(rt)&&rt.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(nt){let rt;const it=Array.isArray(nt);if(nt instanceof Date)rt=new Date(nt);else if(nt instanceof Set)rt=new Set(nt);else if(!(isWeb&&(nt instanceof Blob||nt instanceof FileList))&&(it||isObject$1(nt)))if(rt=it?[]:{},!it&&!isPlainObject(nt))rt=nt;else for(const st in nt)nt.hasOwnProperty(st)&&(rt[st]=cloneObject(nt[st]));else return nt;return rt}var compact=nt=>Array.isArray(nt)?nt.filter(Boolean):[],isUndefined=nt=>nt===void 0,get=(nt,rt,it)=>{if(!rt||!isObject$1(nt))return it;const st=compact(rt.split(/[,[\].]+?/)).reduce((lt,ct)=>isNullOrUndefined(lt)?lt:lt[ct],nt);return isUndefined(st)||st===nt?isUndefined(nt[rt])?it:nt[rt]:st},isBoolean=nt=>typeof nt=="boolean";const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};e$2.createContext(null);var getProxyFormState=(nt,rt,it,st=!0)=>{const lt={defaultValues:rt._defaultValues};for(const ct in nt)Object.defineProperty(lt,ct,{get:()=>{const ut=ct;return rt._proxyFormState[ut]!==VALIDATION_MODE.all&&(rt._proxyFormState[ut]=!st||VALIDATION_MODE.all),it&&(it[ut]=!0),nt[ut]}});return lt},isEmptyObject=nt=>isObject$1(nt)&&!Object.keys(nt).length,shouldRenderFormState=(nt,rt,it,st)=>{it(nt);const{name:lt,...ct}=nt;return isEmptyObject(ct)||Object.keys(ct).length>=Object.keys(rt).length||Object.keys(ct).find(ut=>rt[ut]===(!st||VALIDATION_MODE.all))},convertToArrayPayload=nt=>Array.isArray(nt)?nt:[nt];function useSubscribe(nt){const rt=e$2.useRef(nt);rt.current=nt,e$2.useEffect(()=>{const it=!nt.disabled&&rt.current.subject&&rt.current.subject.subscribe({next:rt.current.next});return()=>{it&&it.unsubscribe()}},[nt.disabled])}var isString=nt=>typeof nt=="string",generateWatchOutput=(nt,rt,it,st,lt)=>isString(nt)?(st&&rt.watch.add(nt),get(it,nt,lt)):Array.isArray(nt)?nt.map(ct=>(st&&rt.watch.add(ct),get(it,ct))):(st&&(rt.watchAll=!0),it),isKey=nt=>/^\w*$/.test(nt),stringToPath=nt=>compact(nt.replace(/["|']|\]/g,"").split(/\.|\[/)),set$1=(nt,rt,it)=>{let st=-1;const lt=isKey(rt)?[rt]:stringToPath(rt),ct=lt.length,ut=ct-1;for(;++st<ct;){const dt=lt[st];let ht=it;if(st!==ut){const pt=nt[dt];ht=isObject$1(pt)||Array.isArray(pt)?pt:isNaN(+lt[st+1])?{}:[]}nt[dt]=ht,nt=nt[dt]}return nt},appendErrors=(nt,rt,it,st,lt)=>rt?{...it[nt],types:{...it[nt]&&it[nt].types?it[nt].types:{},[st]:lt||!0}}:{},getValidationModes=nt=>({isOnSubmit:!nt||nt===VALIDATION_MODE.onSubmit,isOnBlur:nt===VALIDATION_MODE.onBlur,isOnChange:nt===VALIDATION_MODE.onChange,isOnAll:nt===VALIDATION_MODE.all,isOnTouch:nt===VALIDATION_MODE.onTouched}),isWatched=(nt,rt,it)=>!it&&(rt.watchAll||rt.watch.has(nt)||[...rt.watch].some(st=>nt.startsWith(st)&&/^\.\w+/.test(nt.slice(st.length))));const iterateFieldsByAction=(nt,rt,it,st)=>{for(const lt of it||Object.keys(nt)){const ct=get(nt,lt);if(ct){const{_f:ut,...dt}=ct;if(ut){if(ut.refs&&ut.refs[0]&&rt(ut.refs[0],lt)&&!st)break;if(ut.ref&&rt(ut.ref,ut.name)&&!st)break;iterateFieldsByAction(dt,rt)}else isObject$1(dt)&&iterateFieldsByAction(dt,rt)}}};var updateFieldArrayRootError=(nt,rt,it)=>{const st=compact(get(nt,it));return set$1(st,"root",rt[it]),set$1(nt,it,st),nt},isFileInput=nt=>nt.type==="file",isFunction$1=nt=>typeof nt=="function",isHTMLElement$1=nt=>{if(!isWeb)return!1;const rt=nt?nt.ownerDocument:0;return nt instanceof(rt&&rt.defaultView?rt.defaultView.HTMLElement:HTMLElement)},isMessage=nt=>isString(nt),isRadioInput=nt=>nt.type==="radio",isRegex=nt=>nt instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=nt=>{if(Array.isArray(nt)){if(nt.length>1){const rt=nt.filter(it=>it&&it.checked&&!it.disabled).map(it=>it.value);return{value:rt,isValid:!!rt.length}}return nt[0].checked&&!nt[0].disabled?nt[0].attributes&&!isUndefined(nt[0].attributes.value)?isUndefined(nt[0].value)||nt[0].value===""?validResult:{value:nt[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=nt=>Array.isArray(nt)?nt.reduce((rt,it)=>it&&it.checked&&!it.disabled?{isValid:!0,value:it.value}:rt,defaultReturn):defaultReturn;function getValidateError(nt,rt,it="validate"){if(isMessage(nt)||Array.isArray(nt)&&nt.every(isMessage)||isBoolean(nt)&&!nt)return{type:it,message:isMessage(nt)?nt:"",ref:rt}}var getValueAndMessage=nt=>isObject$1(nt)&&!isRegex(nt)?nt:{value:nt,message:""},validateField=async(nt,rt,it,st,lt)=>{const{ref:ct,refs:ut,required:dt,maxLength:ht,minLength:pt,min:ft,max:mt,pattern:gt,validate:xt,name:yt,valueAsNumber:vt,mount:St,disabled:Et}=nt._f,wt=get(rt,yt);if(!St||Et)return{};const Rt=ut?ut[0]:ct,Tt=Ot=>{st&&Rt.reportValidity&&(Rt.setCustomValidity(isBoolean(Ot)?"":Ot||""),Rt.reportValidity())},It={},At=isRadioInput(ct),Dt=isCheckBoxInput(ct),jt=At||Dt,Ft=(vt||isFileInput(ct))&&isUndefined(ct.value)&&isUndefined(wt)||isHTMLElement$1(ct)&&ct.value===""||wt===""||Array.isArray(wt)&&!wt.length,Lt=appendErrors.bind(null,yt,it,It),Pt=(Ot,Nt,$t,Vt=INPUT_VALIDATION_RULES.maxLength,Ut=INPUT_VALIDATION_RULES.minLength)=>{const zt=Ot?Nt:$t;It[yt]={type:Ot?Vt:Ut,message:zt,ref:ct,...Lt(Ot?Vt:Ut,zt)}};if(lt?!Array.isArray(wt)||!wt.length:dt&&(!jt&&(Ft||isNullOrUndefined(wt))||isBoolean(wt)&&!wt||Dt&&!getCheckboxValue(ut).isValid||At&&!getRadioValue(ut).isValid)){const{value:Ot,message:Nt}=isMessage(dt)?{value:!!dt,message:dt}:getValueAndMessage(dt);if(Ot&&(It[yt]={type:INPUT_VALIDATION_RULES.required,message:Nt,ref:Rt,...Lt(INPUT_VALIDATION_RULES.required,Nt)},!it))return Tt(Nt),It}if(!Ft&&(!isNullOrUndefined(ft)||!isNullOrUndefined(mt))){let Ot,Nt;const $t=getValueAndMessage(mt),Vt=getValueAndMessage(ft);if(!isNullOrUndefined(wt)&&!isNaN(wt)){const Ut=ct.valueAsNumber||wt&&+wt;isNullOrUndefined($t.value)||(Ot=Ut>$t.value),isNullOrUndefined(Vt.value)||(Nt=Ut<Vt.value)}else{const Ut=ct.valueAsDate||new Date(wt),zt=Gt=>new Date(new Date().toDateString()+" "+Gt),Bt=ct.type=="time",Ht=ct.type=="week";isString($t.value)&&wt&&(Ot=Bt?zt(wt)>zt($t.value):Ht?wt>$t.value:Ut>new Date($t.value)),isString(Vt.value)&&wt&&(Nt=Bt?zt(wt)<zt(Vt.value):Ht?wt<Vt.value:Ut<new Date(Vt.value))}if((Ot||Nt)&&(Pt(!!Ot,$t.message,Vt.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!it))return Tt(It[yt].message),It}if((ht||pt)&&!Ft&&(isString(wt)||lt&&Array.isArray(wt))){const Ot=getValueAndMessage(ht),Nt=getValueAndMessage(pt),$t=!isNullOrUndefined(Ot.value)&&wt.length>+Ot.value,Vt=!isNullOrUndefined(Nt.value)&&wt.length<+Nt.value;if(($t||Vt)&&(Pt($t,Ot.message,Nt.message),!it))return Tt(It[yt].message),It}if(gt&&!Ft&&isString(wt)){const{value:Ot,message:Nt}=getValueAndMessage(gt);if(isRegex(Ot)&&!wt.match(Ot)&&(It[yt]={type:INPUT_VALIDATION_RULES.pattern,message:Nt,ref:ct,...Lt(INPUT_VALIDATION_RULES.pattern,Nt)},!it))return Tt(Nt),It}if(xt){if(isFunction$1(xt)){const Ot=await xt(wt,rt),Nt=getValidateError(Ot,Rt);if(Nt&&(It[yt]={...Nt,...Lt(INPUT_VALIDATION_RULES.validate,Nt.message)},!it))return Tt(Nt.message),It}else if(isObject$1(xt)){let Ot={};for(const Nt in xt){if(!isEmptyObject(Ot)&&!it)break;const $t=getValidateError(await xt[Nt](wt,rt),Rt,Nt);$t&&(Ot={...$t,...Lt(Nt,$t.message)},Tt($t.message),it&&(It[yt]=Ot))}if(!isEmptyObject(Ot)&&(It[yt]={ref:Rt,...Ot},!it))return It}}return Tt(!0),It};function baseGet(nt,rt){const it=rt.slice(0,-1).length;let st=0;for(;st<it;)nt=isUndefined(nt)?st++:nt[rt[st++]];return nt}function isEmptyArray(nt){for(const rt in nt)if(nt.hasOwnProperty(rt)&&!isUndefined(nt[rt]))return!1;return!0}function unset(nt,rt){const it=Array.isArray(rt)?rt:isKey(rt)?[rt]:stringToPath(rt),st=it.length===1?nt:baseGet(nt,it),lt=it.length-1,ct=it[lt];return st&&delete st[ct],lt!==0&&(isObject$1(st)&&isEmptyObject(st)||Array.isArray(st)&&isEmptyArray(st))&&unset(nt,it.slice(0,-1)),nt}var createSubject=()=>{let nt=[];return{get observers(){return nt},next:lt=>{for(const ct of nt)ct.next&&ct.next(lt)},subscribe:lt=>(nt.push(lt),{unsubscribe:()=>{nt=nt.filter(ct=>ct!==lt)}}),unsubscribe:()=>{nt=[]}}},isPrimitive=nt=>isNullOrUndefined(nt)||!isObjectType(nt);function deepEqual(nt,rt){if(isPrimitive(nt)||isPrimitive(rt))return nt===rt;if(isDateObject(nt)&&isDateObject(rt))return nt.getTime()===rt.getTime();const it=Object.keys(nt),st=Object.keys(rt);if(it.length!==st.length)return!1;for(const lt of it){const ct=nt[lt];if(!st.includes(lt))return!1;if(lt!=="ref"){const ut=rt[lt];if(isDateObject(ct)&&isDateObject(ut)||isObject$1(ct)&&isObject$1(ut)||Array.isArray(ct)&&Array.isArray(ut)?!deepEqual(ct,ut):ct!==ut)return!1}}return!0}var isMultipleSelect=nt=>nt.type==="select-multiple",isRadioOrCheckbox=nt=>isRadioInput(nt)||isCheckBoxInput(nt),live=nt=>isHTMLElement$1(nt)&&nt.isConnected,objectHasFunction=nt=>{for(const rt in nt)if(isFunction$1(nt[rt]))return!0;return!1};function markFieldsDirty(nt,rt={}){const it=Array.isArray(nt);if(isObject$1(nt)||it)for(const st in nt)Array.isArray(nt[st])||isObject$1(nt[st])&&!objectHasFunction(nt[st])?(rt[st]=Array.isArray(nt[st])?[]:{},markFieldsDirty(nt[st],rt[st])):isNullOrUndefined(nt[st])||(rt[st]=!0);return rt}function getDirtyFieldsFromDefaultValues(nt,rt,it){const st=Array.isArray(nt);if(isObject$1(nt)||st)for(const lt in nt)Array.isArray(nt[lt])||isObject$1(nt[lt])&&!objectHasFunction(nt[lt])?isUndefined(rt)||isPrimitive(it[lt])?it[lt]=Array.isArray(nt[lt])?markFieldsDirty(nt[lt],[]):{...markFieldsDirty(nt[lt])}:getDirtyFieldsFromDefaultValues(nt[lt],isNullOrUndefined(rt)?{}:rt[lt],it[lt]):it[lt]=!deepEqual(nt[lt],rt[lt]);return it}var getDirtyFields=(nt,rt)=>getDirtyFieldsFromDefaultValues(nt,rt,markFieldsDirty(rt)),getFieldValueAs=(nt,{valueAsNumber:rt,valueAsDate:it,setValueAs:st})=>isUndefined(nt)?nt:rt?nt===""?NaN:nt&&+nt:it&&isString(nt)?new Date(nt):st?st(nt):nt;function getFieldValue(nt){const rt=nt.ref;if(!(nt.refs?nt.refs.every(it=>it.disabled):rt.disabled))return isFileInput(rt)?rt.files:isRadioInput(rt)?getRadioValue(nt.refs).value:isMultipleSelect(rt)?[...rt.selectedOptions].map(({value:it})=>it):isCheckBoxInput(rt)?getCheckboxValue(nt.refs).value:getFieldValueAs(isUndefined(rt.value)?nt.ref.value:rt.value,nt)}var getResolverOptions=(nt,rt,it,st)=>{const lt={};for(const ct of nt){const ut=get(rt,ct);ut&&set$1(lt,ct,ut._f)}return{criteriaMode:it,names:[...nt],fields:lt,shouldUseNativeValidation:st}},getRuleValue=nt=>isUndefined(nt)?nt:isRegex(nt)?nt.source:isObject$1(nt)?isRegex(nt.value)?nt.value.source:nt.value:nt,hasValidation=nt=>nt.mount&&(nt.required||nt.min||nt.max||nt.maxLength||nt.minLength||nt.pattern||nt.validate);function schemaErrorLookup(nt,rt,it){const st=get(nt,it);if(st||isKey(it))return{error:st,name:it};const lt=it.split(".");for(;lt.length;){const ct=lt.join("."),ut=get(rt,ct),dt=get(nt,ct);if(ut&&!Array.isArray(ut)&&it!==ct)return{name:it};if(dt&&dt.type)return{name:ct,error:dt};lt.pop()}return{name:it}}var skipValidation=(nt,rt,it,st,lt)=>lt.isOnAll?!1:!it&&lt.isOnTouch?!(rt||nt):(it?st.isOnBlur:lt.isOnBlur)?!nt:(it?st.isOnChange:lt.isOnChange)?nt:!0,unsetEmptyArray=(nt,rt)=>!compact(get(nt,rt)).length&&unset(nt,rt);const defaultOptions$3={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(nt={},rt){let it={...defaultOptions$3,...nt},st={submitCount:0,isDirty:!1,isLoading:isFunction$1(it.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:it.errors||{},disabled:it.disabled||!1},lt={},ct=isObject$1(it.defaultValues)||isObject$1(it.values)?cloneObject(it.defaultValues||it.values)||{}:{},ut=it.shouldUnregister?{}:cloneObject(ct),dt={action:!1,mount:!1,watch:!1},ht={mount:new Set,unMount:new Set,array:new Set,watch:new Set},pt,ft=0;const mt={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},gt={values:createSubject(),array:createSubject(),state:createSubject()},xt=getValidationModes(it.mode),yt=getValidationModes(it.reValidateMode),vt=it.criteriaMode===VALIDATION_MODE.all,St=Qt=>Jt=>{clearTimeout(ft),ft=setTimeout(Qt,Jt)},Et=async Qt=>{if(mt.isValid||Qt){const Jt=it.resolver?isEmptyObject((await Ft()).errors):await Pt(lt,!0);Jt!==st.isValid&&gt.state.next({isValid:Jt})}},wt=Qt=>mt.isValidating&&gt.state.next({isValidating:Qt}),Rt=(Qt,Jt=[],pr,Vr,Wr=!0,zr=!0)=>{if(Vr&&pr){if(dt.action=!0,zr&&Array.isArray(get(lt,Qt))){const ln=pr(get(lt,Qt),Vr.argA,Vr.argB);Wr&&set$1(lt,Qt,ln)}if(zr&&Array.isArray(get(st.errors,Qt))){const ln=pr(get(st.errors,Qt),Vr.argA,Vr.argB);Wr&&set$1(st.errors,Qt,ln),unsetEmptyArray(st.errors,Qt)}if(mt.touchedFields&&zr&&Array.isArray(get(st.touchedFields,Qt))){const ln=pr(get(st.touchedFields,Qt),Vr.argA,Vr.argB);Wr&&set$1(st.touchedFields,Qt,ln)}mt.dirtyFields&&(st.dirtyFields=getDirtyFields(ct,ut)),gt.state.next({name:Qt,isDirty:Nt(Qt,Jt),dirtyFields:st.dirtyFields,errors:st.errors,isValid:st.isValid})}else set$1(ut,Qt,Jt)},Tt=(Qt,Jt)=>{set$1(st.errors,Qt,Jt),gt.state.next({errors:st.errors})},It=Qt=>{st.errors=Qt,gt.state.next({errors:st.errors,isValid:!1})},At=(Qt,Jt,pr,Vr)=>{const Wr=get(lt,Qt);if(Wr){const zr=get(ut,Qt,isUndefined(pr)?get(ct,Qt):pr);isUndefined(zr)||Vr&&Vr.defaultChecked||Jt?set$1(ut,Qt,Jt?zr:getFieldValue(Wr._f)):Ut(Qt,zr),dt.mount&&Et()}},Dt=(Qt,Jt,pr,Vr,Wr)=>{let zr=!1,ln=!1;const xn={name:Qt},yn=!!(get(lt,Qt)&&get(lt,Qt)._f.disabled);if(!pr||Vr){mt.isDirty&&(ln=st.isDirty,st.isDirty=xn.isDirty=Nt(),zr=ln!==xn.isDirty);const Wn=yn||deepEqual(get(ct,Qt),Jt);ln=!!(!yn&&get(st.dirtyFields,Qt)),Wn||yn?unset(st.dirtyFields,Qt):set$1(st.dirtyFields,Qt,!0),xn.dirtyFields=st.dirtyFields,zr=zr||mt.dirtyFields&&ln!==!Wn}if(pr){const Wn=get(st.touchedFields,Qt);Wn||(set$1(st.touchedFields,Qt,pr),xn.touchedFields=st.touchedFields,zr=zr||mt.touchedFields&&Wn!==pr)}return zr&&Wr&&gt.state.next(xn),zr?xn:{}},jt=(Qt,Jt,pr,Vr)=>{const Wr=get(st.errors,Qt),zr=mt.isValid&&isBoolean(Jt)&&st.isValid!==Jt;if(nt.delayError&&pr?(pt=St(()=>Tt(Qt,pr)),pt(nt.delayError)):(clearTimeout(ft),pt=null,pr?set$1(st.errors,Qt,pr):unset(st.errors,Qt)),(pr?!deepEqual(Wr,pr):Wr)||!isEmptyObject(Vr)||zr){const ln={...Vr,...zr&&isBoolean(Jt)?{isValid:Jt}:{},errors:st.errors,name:Qt};st={...st,...ln},gt.state.next(ln)}wt(!1)},Ft=async Qt=>it.resolver(ut,it.context,getResolverOptions(Qt||ht.mount,lt,it.criteriaMode,it.shouldUseNativeValidation)),Lt=async Qt=>{const{errors:Jt}=await Ft(Qt);if(Qt)for(const pr of Qt){const Vr=get(Jt,pr);Vr?set$1(st.errors,pr,Vr):unset(st.errors,pr)}else st.errors=Jt;return Jt},Pt=async(Qt,Jt,pr={valid:!0})=>{for(const Vr in Qt){const Wr=Qt[Vr];if(Wr){const{_f:zr,...ln}=Wr;if(zr){const xn=ht.array.has(zr.name),yn=await validateField(Wr,ut,vt,it.shouldUseNativeValidation&&!Jt,xn);if(yn[zr.name]&&(pr.valid=!1,Jt))break;!Jt&&(get(yn,zr.name)?xn?updateFieldArrayRootError(st.errors,yn,zr.name):set$1(st.errors,zr.name,yn[zr.name]):unset(st.errors,zr.name))}ln&&await Pt(ln,Jt,pr)}}return pr.valid},Ot=()=>{for(const Qt of ht.unMount){const Jt=get(lt,Qt);Jt&&(Jt._f.refs?Jt._f.refs.every(pr=>!live(pr)):!live(Jt._f.ref))&&Sr(Qt)}ht.unMount=new Set},Nt=(Qt,Jt)=>(Qt&&Jt&&set$1(ut,Qt,Jt),!deepEqual(Xt(),ct)),$t=(Qt,Jt,pr)=>generateWatchOutput(Qt,ht,{...dt.mount?ut:isUndefined(Jt)?ct:isString(Qt)?{[Qt]:Jt}:Jt},pr,Jt),Vt=Qt=>compact(get(dt.mount?ut:ct,Qt,nt.shouldUnregister?get(ct,Qt,[]):[])),Ut=(Qt,Jt,pr={})=>{const Vr=get(lt,Qt);let Wr=Jt;if(Vr){const zr=Vr._f;zr&&(!zr.disabled&&set$1(ut,Qt,getFieldValueAs(Jt,zr)),Wr=isHTMLElement$1(zr.ref)&&isNullOrUndefined(Jt)?"":Jt,isMultipleSelect(zr.ref)?[...zr.ref.options].forEach(ln=>ln.selected=Wr.includes(ln.value)):zr.refs?isCheckBoxInput(zr.ref)?zr.refs.length>1?zr.refs.forEach(ln=>(!ln.defaultChecked||!ln.disabled)&&(ln.checked=Array.isArray(Wr)?!!Wr.find(xn=>xn===ln.value):Wr===ln.value)):zr.refs[0]&&(zr.refs[0].checked=!!Wr):zr.refs.forEach(ln=>ln.checked=ln.value===Wr):isFileInput(zr.ref)?zr.ref.value="":(zr.ref.value=Wr,zr.ref.type||gt.values.next({name:Qt,values:{...ut}})))}(pr.shouldDirty||pr.shouldTouch)&&Dt(Qt,Wr,pr.shouldTouch,pr.shouldDirty,!0),pr.shouldValidate&&Kt(Qt)},zt=(Qt,Jt,pr)=>{for(const Vr in Jt){const Wr=Jt[Vr],zr=`${Qt}.${Vr}`,ln=get(lt,zr);(ht.array.has(Qt)||!isPrimitive(Wr)||ln&&!ln._f)&&!isDateObject(Wr)?zt(zr,Wr,pr):Ut(zr,Wr,pr)}},Bt=(Qt,Jt,pr={})=>{const Vr=get(lt,Qt),Wr=ht.array.has(Qt),zr=cloneObject(Jt);set$1(ut,Qt,zr),Wr?(gt.array.next({name:Qt,values:{...ut}}),(mt.isDirty||mt.dirtyFields)&&pr.shouldDirty&&gt.state.next({name:Qt,dirtyFields:getDirtyFields(ct,ut),isDirty:Nt(Qt,zr)})):Vr&&!Vr._f&&!isNullOrUndefined(zr)?zt(Qt,zr,pr):Ut(Qt,zr,pr),isWatched(Qt,ht)&&gt.state.next({...st}),gt.values.next({name:Qt,values:{...ut}}),!dt.mount&&rt()},Ht=async Qt=>{const Jt=Qt.target;let pr=Jt.name,Vr=!0;const Wr=get(lt,pr),zr=()=>Jt.type?getFieldValue(Wr._f):getEventValue(Qt),ln=xn=>{Vr=Number.isNaN(xn)||xn===get(ut,pr,xn)};if(Wr){let xn,yn;const Wn=zr(),Mn=Qt.type===EVENTS.BLUR||Qt.type===EVENTS.FOCUS_OUT,sn=!hasValidation(Wr._f)&&!it.resolver&&!get(st.errors,pr)&&!Wr._f.deps||skipValidation(Mn,get(st.touchedFields,pr),st.isSubmitted,yt,xt),qn=isWatched(pr,ht,Mn);set$1(ut,pr,Wn),Mn?(Wr._f.onBlur&&Wr._f.onBlur(Qt),pt&&pt(0)):Wr._f.onChange&&Wr._f.onChange(Qt);const Gr=Dt(pr,Wn,Mn,!1),qr=!isEmptyObject(Gr)||qn;if(!Mn&&gt.values.next({name:pr,type:Qt.type,values:{...ut}}),sn)return mt.isValid&&Et(),qr&&gt.state.next({name:pr,...qn?{}:Gr});if(!Mn&&qn&&gt.state.next({...st}),wt(!0),it.resolver){const{errors:wn}=await Ft([pr]);if(ln(Wn),Vr){const Cr=schemaErrorLookup(st.errors,lt,pr),nr=schemaErrorLookup(wn,lt,Cr.name||pr);xn=nr.error,pr=nr.name,yn=isEmptyObject(wn)}}else xn=(await validateField(Wr,ut,vt,it.shouldUseNativeValidation))[pr],ln(Wn),Vr&&(xn?yn=!1:mt.isValid&&(yn=await Pt(lt,!0)));Vr&&(Wr._f.deps&&Kt(Wr._f.deps),jt(pr,yn,xn,Gr))}},Gt=(Qt,Jt)=>{if(get(st.errors,Jt)&&Qt.focus)return Qt.focus(),1},Kt=async(Qt,Jt={})=>{let pr,Vr;const Wr=convertToArrayPayload(Qt);if(wt(!0),it.resolver){const zr=await Lt(isUndefined(Qt)?Qt:Wr);pr=isEmptyObject(zr),Vr=Qt?!Wr.some(ln=>get(zr,ln)):pr}else Qt?(Vr=(await Promise.all(Wr.map(async zr=>{const ln=get(lt,zr);return await Pt(ln&&ln._f?{[zr]:ln}:ln)}))).every(Boolean),!(!Vr&&!st.isValid)&&Et()):Vr=pr=await Pt(lt);return gt.state.next({...!isString(Qt)||mt.isValid&&pr!==st.isValid?{}:{name:Qt},...it.resolver||!Qt?{isValid:pr}:{},errors:st.errors,isValidating:!1}),Jt.shouldFocus&&!Vr&&iterateFieldsByAction(lt,Gt,Qt?Wr:ht.mount),Vr},Xt=Qt=>{const Jt={...ct,...dt.mount?ut:{}};return isUndefined(Qt)?Jt:isString(Qt)?get(Jt,Qt):Qt.map(pr=>get(Jt,pr))},or=(Qt,Jt)=>({invalid:!!get((Jt||st).errors,Qt),isDirty:!!get((Jt||st).dirtyFields,Qt),isTouched:!!get((Jt||st).touchedFields,Qt),error:get((Jt||st).errors,Qt)}),tr=Qt=>{Qt&&convertToArrayPayload(Qt).forEach(Jt=>unset(st.errors,Jt)),gt.state.next({errors:Qt?st.errors:{}})},dr=(Qt,Jt,pr)=>{const Vr=(get(lt,Qt,{_f:{}})._f||{}).ref;set$1(st.errors,Qt,{...Jt,ref:Vr}),gt.state.next({name:Qt,errors:st.errors,isValid:!1}),pr&&pr.shouldFocus&&Vr&&Vr.focus&&Vr.focus()},fr=(Qt,Jt)=>isFunction$1(Qt)?gt.values.subscribe({next:pr=>Qt($t(void 0,Jt),pr)}):$t(Qt,Jt,!0),Sr=(Qt,Jt={})=>{for(const pr of Qt?convertToArrayPayload(Qt):ht.mount)ht.mount.delete(pr),ht.array.delete(pr),Jt.keepValue||(unset(lt,pr),unset(ut,pr)),!Jt.keepError&&unset(st.errors,pr),!Jt.keepDirty&&unset(st.dirtyFields,pr),!Jt.keepTouched&&unset(st.touchedFields,pr),!it.shouldUnregister&&!Jt.keepDefaultValue&&unset(ct,pr);gt.values.next({values:{...ut}}),gt.state.next({...st,...Jt.keepDirty?{isDirty:Nt()}:{}}),!Jt.keepIsValid&&Et()},vr=({disabled:Qt,name:Jt,field:pr,fields:Vr,value:Wr})=>{if(isBoolean(Qt)){const zr=Qt?void 0:isUndefined(Wr)?getFieldValue(pr?pr._f:get(Vr,Jt)._f):Wr;set$1(ut,Jt,zr),Dt(Jt,zr,!1,!1,!0)}},mr=(Qt,Jt={})=>{let pr=get(lt,Qt);const Vr=isBoolean(Jt.disabled);return set$1(lt,Qt,{...pr||{},_f:{...pr&&pr._f?pr._f:{ref:{name:Qt}},name:Qt,mount:!0,...Jt}}),ht.mount.add(Qt),pr?vr({field:pr,disabled:Jt.disabled,name:Qt,value:Jt.value}):At(Qt,!0,Jt.value),{...Vr?{disabled:Jt.disabled}:{},...it.progressive?{required:!!Jt.required,min:getRuleValue(Jt.min),max:getRuleValue(Jt.max),minLength:getRuleValue(Jt.minLength),maxLength:getRuleValue(Jt.maxLength),pattern:getRuleValue(Jt.pattern)}:{},name:Qt,onChange:Ht,onBlur:Ht,ref:Wr=>{if(Wr){mr(Qt,Jt),pr=get(lt,Qt);const zr=isUndefined(Wr.value)&&Wr.querySelectorAll&&Wr.querySelectorAll("input,select,textarea")[0]||Wr,ln=isRadioOrCheckbox(zr),xn=pr._f.refs||[];if(ln?xn.find(yn=>yn===zr):zr===pr._f.ref)return;set$1(lt,Qt,{_f:{...pr._f,...ln?{refs:[...xn.filter(live),zr,...Array.isArray(get(ct,Qt))?[{}]:[]],ref:{type:zr.type,name:Qt}}:{ref:zr}}}),At(Qt,!1,void 0,zr)}else pr=get(lt,Qt,{}),pr._f&&(pr._f.mount=!1),(it.shouldUnregister||Jt.shouldUnregister)&&!(isNameInFieldArray(ht.array,Qt)&&dt.action)&&ht.unMount.add(Qt)}}},hr=()=>it.shouldFocusError&&iterateFieldsByAction(lt,Gt,ht.mount),gr=Qt=>{isBoolean(Qt)&&(gt.state.next({disabled:Qt}),iterateFieldsByAction(lt,(Jt,pr)=>{let Vr=Qt;const Wr=get(lt,pr);Wr&&isBoolean(Wr._f.disabled)&&(Vr||(Vr=Wr._f.disabled)),Jt.disabled=Vr},0,!1))},lr=(Qt,Jt)=>async pr=>{pr&&(pr.preventDefault&&pr.preventDefault(),pr.persist&&pr.persist());let Vr=cloneObject(ut);if(gt.state.next({isSubmitting:!0}),it.resolver){const{errors:Wr,values:zr}=await Ft();st.errors=Wr,Vr=zr}else await Pt(lt);unset(st.errors,"root"),isEmptyObject(st.errors)?(gt.state.next({errors:{}}),await Qt(Vr,pr)):(Jt&&await Jt({...st.errors},pr),hr(),setTimeout(hr)),gt.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(st.errors),submitCount:st.submitCount+1,errors:st.errors})},Ir=(Qt,Jt={})=>{get(lt,Qt)&&(isUndefined(Jt.defaultValue)?Bt(Qt,cloneObject(get(ct,Qt))):(Bt(Qt,Jt.defaultValue),set$1(ct,Qt,cloneObject(Jt.defaultValue))),Jt.keepTouched||unset(st.touchedFields,Qt),Jt.keepDirty||(unset(st.dirtyFields,Qt),st.isDirty=Jt.defaultValue?Nt(Qt,cloneObject(get(ct,Qt))):Nt()),Jt.keepError||(unset(st.errors,Qt),mt.isValid&&Et()),gt.state.next({...st}))},wr=(Qt,Jt={})=>{const pr=Qt?cloneObject(Qt):ct,Vr=cloneObject(pr),Wr=Qt&&!isEmptyObject(Qt)?Vr:ct;if(Jt.keepDefaultValues||(ct=pr),!Jt.keepValues){if(Jt.keepDirtyValues)for(const zr of ht.mount)get(st.dirtyFields,zr)?set$1(Wr,zr,get(ut,zr)):Bt(zr,get(Wr,zr));else{if(isWeb&&isUndefined(Qt))for(const zr of ht.mount){const ln=get(lt,zr);if(ln&&ln._f){const xn=Array.isArray(ln._f.refs)?ln._f.refs[0]:ln._f.ref;if(isHTMLElement$1(xn)){const yn=xn.closest("form");if(yn){yn.reset();break}}}}lt={}}ut=nt.shouldUnregister?Jt.keepDefaultValues?cloneObject(ct):{}:cloneObject(Wr),gt.array.next({values:{...Wr}}),gt.values.next({values:{...Wr}})}ht={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!dt.mount&&rt(),dt.mount=!mt.isValid||!!Jt.keepIsValid,dt.watch=!!nt.shouldUnregister,gt.state.next({submitCount:Jt.keepSubmitCount?st.submitCount:0,isDirty:Jt.keepDirty?st.isDirty:!!(Jt.keepDefaultValues&&!deepEqual(Qt,ct)),isSubmitted:Jt.keepIsSubmitted?st.isSubmitted:!1,dirtyFields:Jt.keepDirtyValues?st.dirtyFields:Jt.keepDefaultValues&&Qt?getDirtyFields(ct,Qt):{},touchedFields:Jt.keepTouched?st.touchedFields:{},errors:Jt.keepErrors?st.errors:{},isSubmitSuccessful:Jt.keepIsSubmitSuccessful?st.isSubmitSuccessful:!1,isSubmitting:!1})},Fr=(Qt,Jt)=>wr(isFunction$1(Qt)?Qt(ut):Qt,Jt);return{control:{register:mr,unregister:Sr,getFieldState:or,handleSubmit:lr,setError:dr,_executeSchema:Ft,_getWatch:$t,_getDirty:Nt,_updateValid:Et,_removeUnmounted:Ot,_updateFieldArray:Rt,_updateDisabledField:vr,_getFieldArray:Vt,_reset:wr,_resetDefaultValues:()=>isFunction$1(it.defaultValues)&&it.defaultValues().then(Qt=>{Fr(Qt,it.resetOptions),gt.state.next({isLoading:!1})}),_updateFormState:Qt=>{st={...st,...Qt}},_disableForm:gr,_subjects:gt,_proxyFormState:mt,_setErrors:It,get _fields(){return lt},get _formValues(){return ut},get _state(){return dt},set _state(Qt){dt=Qt},get _defaultValues(){return ct},get _names(){return ht},set _names(Qt){ht=Qt},get _formState(){return st},set _formState(Qt){st=Qt},get _options(){return it},set _options(Qt){it={...it,...Qt}}},trigger:Kt,register:mr,handleSubmit:lr,watch:fr,setValue:Bt,getValues:Xt,reset:Fr,resetField:Ir,clearErrors:tr,unregister:Sr,setError:dr,setFocus:(Qt,Jt={})=>{const pr=get(lt,Qt),Vr=pr&&pr._f;if(Vr){const Wr=Vr.refs?Vr.refs[0]:Vr.ref;Wr.focus&&(Wr.focus(),Jt.shouldSelect&&Wr.select())}},getFieldState:or}}function useForm(nt={}){const rt=e$2.useRef(),it=e$2.useRef(),[st,lt]=e$2.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$1(nt.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:nt.errors||{},disabled:nt.disabled||!1,defaultValues:isFunction$1(nt.defaultValues)?void 0:nt.defaultValues});rt.current||(rt.current={...createFormControl(nt,()=>lt(ut=>({...ut}))),formState:st});const ct=rt.current.control;return ct._options=nt,useSubscribe({subject:ct._subjects.state,next:ut=>{shouldRenderFormState(ut,ct._proxyFormState,ct._updateFormState,!0)&&lt({...ct._formState})}}),e$2.useEffect(()=>ct._disableForm(nt.disabled),[ct,nt.disabled]),e$2.useEffect(()=>{if(ct._proxyFormState.isDirty){const ut=ct._getDirty();ut!==st.isDirty&&ct._subjects.state.next({isDirty:ut})}},[ct,st.isDirty]),e$2.useEffect(()=>{nt.values&&!deepEqual(nt.values,it.current)?(ct._reset(nt.values,ct._options.resetOptions),it.current=nt.values,lt(ut=>({...ut}))):ct._resetDefaultValues()},[nt.values,ct]),e$2.useEffect(()=>{nt.errors&&ct._setErrors(nt.errors)},[nt.errors,ct]),e$2.useEffect(()=>{ct._state.mount||(ct._updateValid(),ct._state.mount=!0),ct._state.watch&&(ct._state.watch=!1,ct._subjects.state.next({...ct._formState})),ct._removeUnmounted()}),rt.current.formState=getProxyFormState(st,ct),rt.current}const ChangeNicknameModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),[ct,ut]=Recoil_index_22(userState),{register:dt,handleSubmit:ht,watch:pt}=useForm({mode:"onSubmit"}),ft=pt("nickname"),mt=()=>{axios({method:"get",url:`${lt}api/users/${ct.info.userId}/nickname?nickname=${ft}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(xt=>{xt.data.data_header.success_code===0?alert("변경 가능합니다."):alert("닉네임이 중복됩니다")})},gt=xt=>{axios({method:"patch",url:`${lt}api/users/${ct.info.userId}/nickname`,headers:{Authorization:`Bearer ${ct.token}`},data:{nickname:xt.nickname}}).then(()=>{ut({token:ct.token,info:{...ct.info,nickname:xt.nickname}}),st({type:null,data:null})})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:it.type==="changeNickname",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("h1",{className:"mb-4 font-semibold text-center",children:"닉네임 변경"}),jsxRuntimeExports.jsxs("form",{onSubmit:ht(gt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{placeholder:"닉네임을 변경해주세요",...dt("nickname"),type:"text",defaultValue:rt,className:"p-2 text-sm text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:mt,value:"중복검사",className:"w-1/3 p-1 bg-gray-400 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeNicknameModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ChangeGenderModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState);Recoil_index_22(baseUrlState);const{register:lt,handleSubmit:ct}=useForm({mode:"onSubmit"});return jsxRuntimeExports.jsx(Modal,{className:"fixed transform  -translate-y-1/2 top-1/2 inset-x-12",isOpen:it.type==="changeGender",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("h1",{className:"mb-4 font-semibold text-center",children:"성별을 알려주세요"}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-center",children:jsxRuntimeExports.jsxs("select",{...lt("gender"),className:"p-2 text-center border border-gray-400 rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"now",children:rt}),jsxRuntimeExports.jsx("option",{value:"another",children:rt==="남자"?"여자":"남자"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeGenderModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const today=new Date,selectedDateState=Recoil_index_8({key:"selectedDateState",default:[today.getFullYear(),today.getMonth()+1,today.getDate()]}),selectedDayState=Recoil_index_8({key:"selectedDayState",default:""}),SelfInputFoodModal=({onClose:nt})=>{const[rt,it]=Recoil_index_22(modalState),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(selectedDateState),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(""),[pt,ft]=reactExports.useState(""),[mt,gt]=reactExports.useState(""),[xt,yt]=reactExports.useState(""),[vt,St]=reactExports.useState(""),Et=new Date(lt[0],lt[1]-1,lt[2]),wt=9*60*60*1e3,Rt=new Date(Et.getTime()+wt),Tt=async()=>{console.log(ct),console.log(rt.data),console.log(dt),console.log(pt),console.log(mt),console.log(xt),console.log(vt),await axios.post(`${st}api/management/food/add`,{name:ct,category:rt.data,servingSize:dt,calorie:pt,carbohydrate:mt,protein:xt,lipid:vt,date:Rt}).then(Pt=>{console.log("음식 직접 추가하기 성공")}).catch(Pt=>{console.log(Pt)}),it({type:null,data:null})},It=()=>{const Pt=Ot=>{ut(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"식품 명"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})},At=()=>{const Pt=Ot=>{ht(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"식품 양"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"g 단위로 입력해주세요.",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})},Dt=()=>{const Pt=Ot=>{ft(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"칼로리"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})},jt=()=>{const Pt=Ot=>{gt(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"탄수화물"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})},Ft=()=>{const Pt=Ot=>{yt(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"단백질"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})},Lt=()=>{const Pt=Ot=>{St(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"지방"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Pt})]})};return jsxRuntimeExports.jsx(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0",isOpen:rt.type==="selfInputFood",ariaHideApp:!1,onRequestClose:()=>it({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4",children:[jsxRuntimeExports.jsx("p",{className:"pb-2 font-semibold",children:"음식 직접입력"}),It(),At(),Dt(),jt(),Ft(),Lt(),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:nt,className:"py-1 bg-white border border-teal-700 rounded-md basis-1/2",children:"취소"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(),className:"py-1 text-white bg-teal-700 border rounded-md basis-1/2",children:"추가하기"})]})]})})};SelfInputFoodModal.propTypes={onClose:propTypesExports.PropTypes.func};const SignUpModal=({onClose:nt})=>{const[rt,it]=Recoil_index_22(modalState),st=Recoil_index_20(baseUrlState),{register:lt,handleSubmit:ct,watch:ut,getValues:dt,setError:ht,clearErrors:pt,formState:{errors:ft}}=useForm({mode:"onChange"}),mt=xt=>{axios({method:"post",url:`${st}api/auth/signup`,data:{email:xt.email,password:xt.password,name:xt.name,gender:xt.gender,birth_date:xt.birth_date}}).then(()=>{alert("회원가입이 완료되었습니다."),it({type:null,data:null})})},gt=()=>{const xt=ut("email");axios({method:"get",url:`${st}api/auth?email=${xt}`}).then(yt=>{yt.data.data_header.success_code?alert("이미 가입한 이메일입니다."):alert("가입 가능한 이메일입니다.")})};return reactExports.useEffect(()=>{ut("password")!==ut("passwordCheck")&&ut("passwordCheck")?ht("passwordCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):pt("passwordCheck")},[ut("password"),ut("passwordCheck")]),jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 overflow-auto inset-x-12",isOpen:rt.type==="signup",ariaHideApp:!1,onRequestClose:()=>it({type:null,data:null}),children:jsxRuntimeExports.jsxs("form",{onSubmit:ct(mt),className:"flex flex-col gap-2 p-4 bg-white border border-teal-700 rounded-md",children:[jsxRuntimeExports.jsx("h1",{className:"pb-2 text-lg text-center text-teal-700 underline underline-offset-4",children:"회원가입"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",children:"이메일"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",...lt("email",{required:!0}),className:"px-2 border rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:gt,value:"중복확인",className:"w-1/2 mx-auto text-white bg-teal-700 border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",children:"이름"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",...lt("name"),className:"px-2 border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",children:"비밀번호"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",autoComplete:"on",...lt("password",{required:!0,pattern:{value:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,20}$/,message:"영문, 숫자, 특수문자 포함 8 ~ 20자로 입력해주세요"}}),className:"px-2 border rounded-md"}),ft.password&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:ft.password.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"passwordCheck",children:"비밀번호 확인"}),jsxRuntimeExports.jsx("input",{id:"passwordCheck",type:"password",autoComplete:"on",...lt("passwordCheck",{required:!0,validate:{matchPassword:xt=>{const{password:yt}=dt();return console.log(yt,xt),yt===xt||"비밀번호가 일치하지 않습니다"}}}),className:"px-2 border rounded-md"}),ft.passwordCheck&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:ft.passwordCheck.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"성별"}),jsxRuntimeExports.jsxs("select",{name:"gender",...lt("gender"),className:"text-center border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"MALE",className:"text-xs",children:"남자"}),jsxRuntimeExports.jsx("option",{value:"FEMALE",className:"text-xs",children:"여자"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"생년월일"}),jsxRuntimeExports.jsx("input",{type:"date",...lt("birth_date",{required:!0}),className:"text-center border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-4 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",className:"text-white bg-teal-700 rounded-md"})]})]})})};SignUpModal.propTypes={onClose:propTypesExports.PropTypes.func};const Input=({type:nt,value:rt,placeholder:it,onChange:st})=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:nt,value:rt,placeholder:it,onChange:st,className:"p-2 border border-gray-500 rounded-md"})});Input.propTypes={type:PropTypes.string,value:PropTypes.string,placeholder:PropTypes.string,onChange:PropTypes.func};Input.defaultProps={placeholder:"입력해 주세요."};const RoutineCreateModal=({onClose:nt})=>{const rt=Recoil_index_20(baseUrlState),it=Recoil_index_20(userState),[st,lt]=Recoil_index_22(modalState),[ct,ut]=reactExports.useState(""),dt=ft=>{ut(ft.target.value)},ht=async()=>{await axios.post(`${rt}api/management/routine/addroutine`,{userId:it.info.userId,title:ct}).then(ft=>{console.log("루틴 생성 성공")}).catch(ft=>{console.log(ft)})},pt=()=>{ht()};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8",isOpen:st.type==="routineCreate",ariaHideApp:!1,onRequestClose:()=>lt({type:null,data:null}),children:jsxRuntimeExports.jsxs("form",{className:"flex flex-col gap-4 p-4 bg-white border-2 border-gray-400 rounded-xl",onSubmit:pt,children:[jsxRuntimeExports.jsx("p",{className:"mx-auto font-semibold",children:"새로운 루틴 만들기"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"나만의 루틴을 만들어보세요!"}),jsxRuntimeExports.jsx(Input,{value:ct,onChange:dt,placeholder:"루틴 이름을 입력하세요"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"bg-white border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"루틴 생성",className:"p-2 text-white bg-teal-700 rounded-md"})]})]})})};RoutineCreateModal.propTypes={onClose:propTypesExports.PropTypes.func};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=e$2.createContext&&e$2.createContext(DefaultContext),_excluded$2=["attr","size","title"];function _objectWithoutProperties$1(nt,rt){if(nt==null)return{};var it=_objectWithoutPropertiesLoose$1(nt,rt),st,lt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(nt);for(lt=0;lt<ct.length;lt++)st=ct[lt],!(rt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(it[st]=nt[st])}return it}function _objectWithoutPropertiesLoose$1(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$1.apply(this,arguments)}function ownKeys$1(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(lt){return Object.getOwnPropertyDescriptor(nt,lt).enumerable})),it.push.apply(it,st)}return it}function _objectSpread(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys$1(Object(it),!0).forEach(function(st){_defineProperty$1(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys$1(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _defineProperty$1(nt,rt,it){return rt=_toPropertyKey$1(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _toPropertyKey$1(nt){var rt=_toPrimitive$1(nt,"string");return typeof rt=="symbol"?rt:String(rt)}function _toPrimitive$1(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function Tree2Element(nt){return nt&&nt.map((rt,it)=>e$2.createElement(rt.tag,_objectSpread({key:it},rt.attr),Tree2Element(rt.child)))}function GenIcon(nt){return rt=>e$2.createElement(IconBase,_extends$1({attr:_objectSpread({},nt.attr)},rt),Tree2Element(nt.child))}function IconBase(nt){var rt=it=>{var{attr:st,size:lt,title:ct}=nt,ut=_objectWithoutProperties$1(nt,_excluded$2),dt=lt||it.size||"1em",ht;return it.className&&(ht=it.className),nt.className&&(ht=(ht?ht+" ":"")+nt.className),e$2.createElement("svg",_extends$1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},it.attr,st,ut,{className:ht,style:_objectSpread(_objectSpread({color:nt.color||it.color},it.style),nt.style),height:dt,width:dt,xmlns:"http://www.w3.org/2000/svg"}),ct&&e$2.createElement("title",null,ct),nt.children)};return IconContext!==void 0?e$2.createElement(IconContext.Consumer,null,it=>rt(it)):rt(DefaultContext)}function BsFillTrash3Fill(nt){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"},child:[]}]})(nt)}function BsAlarm(nt){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5z"},child:[]},{tag:"path",attr:{d:"M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1h-3zm1.038 3.018a6.093 6.093 0 0 1 .924 0 6 6 0 1 1-.924 0zM0 3.5c0 .753.333 1.429.86 1.887A8.035 8.035 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5zM13.5 1c-.753 0-1.429.333-1.887.86a8.035 8.035 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1z"},child:[]}]})(nt)}function FaRegCopy(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(nt)}function FaRegEdit(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"},child:[]}]})(nt)}const NextButton=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6"})})}),selectedRoutineState=Recoil_index_8({key:"selectedRoutineState",default:[]}),selectedRoutineInfoState=Recoil_index_8({key:"selectedRoutineInfoState",default:[]}),RoutineEditMenuModal=({onClose:nt})=>{const rt=Recoil_index_20(baseUrlState),[it,st]=Recoil_index_22(modalState),[lt,ct]=Recoil_index_22(selectedRoutineState),ut=Recoil_index_20(selectedRoutineInfoState),dt=()=>{const ht=async()=>{await axios.delete(`${rt}api/management/routine/delete/${ut.routineId}`).then(pt=>{console.log(lt.title+" 루틴 삭제 성공"),st({type:null,data:null}),ct([])}).catch(pt=>{console.log(pt)})};confirm("해당 루틴을 삭제하시겠습니까?")&&ht()};return jsxRuntimeExports.jsx(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0",isOpen:it.type==="routineEditMenu",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"col-start-2 font-semibold text-center",children:"설정"}),jsxRuntimeExports.jsx("div",{className:"flex flex-row-reverse",children:jsxRuntimeExports.jsx(XMarkIcon$1,{className:"w-6 h-6",onClick:nt})})]}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine/edit",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:nt,children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(FaRegEdit,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"편집"})]}),jsxRuntimeExports.jsx(NextButton,{})]})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(FaRegCopy,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"복제"})]}),jsxRuntimeExports.jsx(NextButton,{})]}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-red-500",onClick:()=>dt(),children:[jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"삭제"})]})]})})};RoutineEditMenuModal.propTypes={onClose:propTypesExports.PropTypes.func};const ChallengeMenuModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),{challengeId:ut}=useParams(),dt=async ht=>{ht.preventDefault(),await axios.delete(`${lt}api/challenge/${ut}`).then(()=>{window.location.replace("/challenge")})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",isOpen:it.type==="challengeMenu",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap h-40 bg-white border-2 border-gray-400 w-60 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",onClick:()=>st({type:null,data:null}),children:ct.info.role==="ROLE_ADMIN"?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-center w-full gap-6",onClick:()=>st({type:null,data:null}),children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:jsxRuntimeExports.jsx(Link,{to:`/challenge/${ut}/update`,state:{value:rt},className:"flex items-center justify-center w-10/12 h-10 text-white bg-teal-700 border-2 rounded-md",children:"수정하기"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"w-10/12 h-10 text-white border-2 rounded-md bg-rose-600",children:"삭제하기"})})]}):jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("p",{children:"권한이 없습니다."})})})})})};ChallengeMenuModal.propTypes={onClose:propTypesExports.PropTypes.func};const ChangeHeightModal=({onClose:nt,data:rt})=>{const{register:it,handleSubmit:st,watch:lt}=useForm({mode:"onSubmit"}),ct=Recoil_index_20(baseUrlState),[ut,dt]=Recoil_index_22(modalState),[ht,pt]=Recoil_index_22(userState),ft=lt("height"),mt=()=>{axios({method:"patch",url:`${ct}api/users/${ht.info.userId}/height`,headers:{Authorization:`Bearer ${ht.token}`},data:{height:ft}}).then(gt=>{gt.data.data_header.success_code===0&&(pt({token:ht.token,info:{...ht.info,height:ft}}),dt({type:null,data:null}))})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:ut.type==="changeHeight",ariaHideApp:!1,onRequestClose:()=>dt({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"mb-4 font-semibold text-center",children:"신장"}),jsxRuntimeExports.jsxs("form",{onSubmit:st(mt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[jsxRuntimeExports.jsx("input",{type:"text",...it("height"),defaultValue:rt,className:"w-1/3 p-1 text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("p",{children:"cm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeHeightModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ChangeWeightModal=({onClose:nt,data:rt})=>{const{register:it,handleSubmit:st,watch:lt}=useForm({mode:"onSubmit"}),ct=Recoil_index_20(baseUrlState),[ut,dt]=Recoil_index_22(modalState),[ht,pt]=Recoil_index_22(userState),ft=lt("weight"),mt=()=>{axios({method:"patch",url:`${ct}api/users/${ht.info.userId}/weight`,headers:{Authorization:`Bearer ${ht.token}`},data:{weight:ft}}).then(gt=>{gt.data.data_header.success_code===0?(pt({token:ht.token,info:{...ht.info,weight:ft}}),dt({type:null,data:null})):dt({type:null,data:null})})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:ut.type==="changeWeight",ariaHideApp:!1,onRequestClose:()=>dt({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"mb-4 font-semibold text-center",children:"체중"}),jsxRuntimeExports.jsxs("form",{onSubmit:st(mt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[jsxRuntimeExports.jsx("input",{type:"text",...it("weight"),defaultValue:rt,className:"w-1/3 p-1 text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("p",{children:"kg"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeWeightModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const RoutineDetailModal=({onClose:nt})=>{var ft;const rt=Recoil_index_20(baseUrlState),it=Recoil_index_20(userState),st=Recoil_index_20(selectedDateState),[lt,ct]=Recoil_index_22(modalState),ut=Recoil_index_20(selectedRoutineState),dt=Recoil_index_20(selectedRoutineInfoState),ht=useNavigate(),pt=async mt=>{mt.preventDefault(),await axios.get(`${rt}api/management/routine/addTrainings?user_id=${it.info.userId}&routine_id=${ut.routineId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(gt=>{console.log("루틴 -> 오늘 운동에 등록"),ct({type:null,data:null}),ht(`/diary/training/${st[0]}/${st[1]}/${st[2]}`)}).catch(gt=>{console.log(gt)})};return jsxRuntimeExports.jsxs(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0 max-h-[600px]",isOpen:lt.type==="routineDetail",ariaHideApp:!1,onRequestClose:()=>ct({type:null,data:null}),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4 bottom-16",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"col-start-2 col-end-5 font-semibold text-center",children:dt.title}),jsxRuntimeExports.jsx("div",{className:"flex flex-row-reverse",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine/edit",children:jsxRuntimeExports.jsx("p",{onClick:nt,className:"text-gray-500",children:"편집"})})})]}),jsxRuntimeExports.jsx("div",{className:"mb-16",children:(ft=ut.routine_training_list)==null?void 0:ft.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 my-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:mt.image,alt:"img",className:"w-16 h-16"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pl-4",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:gt+1})," ",mt.name]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[mt.category," | ",mt.sets.length,"세트 |"," ",mt.sets.reduce((xt,yt)=>xt+yt.count*yt.kg,0),"kg"]})]})]}),jsxRuntimeExports.jsx("hr",{})]},gt))})]}),jsxRuntimeExports.jsx("form",{onSubmit:pt,className:"fixed bottom-0 w-full bg-white",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 border rounded-md",children:jsxRuntimeExports.jsx("button",{type:"submit",className:"",children:"운동 시작하기"})})})]})};RoutineDetailModal.propTypes={onClose:propTypesExports.PropTypes.func};const ModelDetail=({name:nt,value:rt,onChange:it,disabled:st,css:lt})=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[jsxRuntimeExports.jsx("div",{className:`col-span-3 p-1 text-center text-white ${lt} rounded-xl`,children:nt}),jsxRuntimeExports.jsx("input",{type:"text",value:rt,onChange:it,disabled:st,className:`col-span-4 p-1 text-center border border-teal-700 rounded-xl ${st?"text-gray-500":""}`})]});ModelDetail.propTypes={name:propTypesExports.PropTypes.string,value:propTypesExports.PropTypes.string,onChange:propTypesExports.PropTypes.func,disabled:propTypesExports.PropTypes.bool,css:propTypesExports.PropTypes.string};const toggleDiaryState=Recoil_index_8({key:"toggleDiaryState",default:"left"}),toggleState=Recoil_index_8({key:"toggleState",default:"left"}),toggleModelState=Recoil_index_8({key:"toggleModelState",default:"left"}),inbodyListState=Recoil_index_8({key:"inbodyListState",default:[]}),selectedInbodyState=Recoil_index_8({key:"selectedInbodyState",default:[]}),targetInbodyState=Recoil_index_8({key:"targetInbodyState",default:[]}),loadingState=Recoil_index_8({key:"loadingState",default:!1}),muscleRoundState=Recoil_index_8({key:"muscleRoundState",default:{20:25,21:25,22:25,23:25,24:25,25:25,26:25,27:28,28:28,29:28,30:30,31:30,32:33,33:33,34:33,35:35,36:35,37:35,38:40,39:40,40:40,41:40,42:40,43:45,44:45,45:45,46:45,47:45,48:50,49:50,50:50,51:50,52:50,53:55,54:55,55:55,56:55,57:55,58:60,59:60,60:60,61:60,62:60,63:60,64:60,65:60}}),isValidMuscleState=Recoil_index_8({key:"isValidMuscleState",default:{60:[25,28,30,33,35],70:[25,30,35,40],80:[25,30,35,40,45],90:[25,30,35,40,45,50],100:[30,35,40,45,50,55],110:[30,35,40,45,50,55,60]}}),ModelDetailModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),ut=Recoil_index_20(toggleModelState),[dt,ht]=Recoil_index_22(selectedInbodyState),[pt,ft]=Recoil_index_22(targetInbodyState),mt=Recoil_index_24(loadingState),[gt,xt]=reactExports.useState(dt!=null&&dt.inbody_id?dt.height+" cm":"0 cm"),[yt,vt]=reactExports.useState(ut==="left"?dt!=null&&dt.inbody_id?dt.weight+" kg":"0 kg":pt!=null&&pt.weight?pt.weight+" kg":dt!=null&&dt.inbody_id?dt.weight+" kg":"0 kg"),[St,Et]=reactExports.useState(ut==="left"?dt!=null&&dt.inbody_id?dt.muscle+" kg":"0 kg":pt!=null&&pt.muscle?pt.muscle+" kg":dt!=null&&dt.inbody_id?dt.muscle+" kg":"0 kg"),[wt,Rt]=reactExports.useState(dt!=null&&dt.inbody_id?dt.fat_mass+" kg":"0 kg"),[Tt,It]=reactExports.useState(ut==="left"?dt!=null&&dt.inbody_id?dt.fat_per+" %":"0 %":pt!=null&&pt.fat_per?pt.fat_per+" %":dt!=null&&dt.inbody_id?dt.fat_per+" %":"0 %"),[At,Dt]=reactExports.useState(dt!=null&&dt.inbody_id?dt.tbw+" kg":"0 kg"),[jt,Ft]=reactExports.useState(dt!=null&&dt.inbody_id?dt.bmi:0),[Lt,Pt]=reactExports.useState(dt!=null&&dt.inbody_id?dt.bmr+" kcal":"0 kcal"),Ot=vr=>{xt(vr.target.value)},Nt=vr=>{vt(vr.target.value)},$t=vr=>{Et(vr.target.value)},Vt=vr=>{Rt(vr.target.value)},Ut=vr=>{It(vr.target.value)},zt=vr=>{Dt(vr.target.value)},Bt=vr=>{Ft(vr.target.value)},Ht=vr=>{Pt(vr.target.value)},Gt=vr=>{vr.preventDefault(),axios({method:"post",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`},data:{height:parseFloat(gt,10),weight:parseFloat(yt,10),bmr:parseInt(Lt,10),muscle:parseFloat(St,10),tbw:parseFloat(At,10),whr:0,bmi:parseFloat(jt,10),score:0,date:new Date,fat_mass:parseFloat(wt,10),fat_per:parseFloat(Tt,10)}}).then(mr=>{alert("인바디 등록 성공"),axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(hr=>{const gr=hr.data.data_body[hr.data.data_body.length-1].inbody_id;axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}/${gr}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(lr=>{ht(lr.data.data_body),st({type:null,data:null}),window.location.reload("/")}).catch(lr=>{console.log(lr)})}).catch(hr=>{console.log(hr)})}).catch(mr=>{console.log(mr)})},Kt=Recoil_index_20(muscleRoundState),Xt=Recoil_index_20(isValidMuscleState),or=vr=>Kt[vr],tr=vr=>Xt[vr],dr=()=>{var mr;mt(!0);let vr=Math.round(parseFloat(yt,10)/10)*10;(mr=tr(vr))!=null&&mr.includes(or(parseFloat(St,10)))?(st({type:null,data:null}),setTimeout(()=>{ft({weight:parseFloat(yt,10),muscle:parseFloat(St,10),fat_per:parseFloat(Tt,10)}),mt(!1)},3e3)):(alert("정확한 데이터를 입력해 주시길 바랍니다."),mt(!1))},fr=()=>{st({type:"modelHistory",data:""})},Sr=()=>{alert("목표 모델 생성을 위해 체중, 골격근량, 체지방율을 입력해주세요.")};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8",isOpen:it.type==="modelDetail",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-white border-2 border-teal-700 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-2 pb-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"ml-2 text-2xl font-semibold text-teal-700 underline underline-offset-4",children:"인바디 정보"}),ut==="left"?jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-500",children:jsxRuntimeExports.jsx("button",{onClick:fr,className:"p-1 border-4 rounded-full",children:"히스토리"})}):jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(ExclamationTriangleIcon$3,{onClick:Sr,className:"w-6 h-6 mr-2 text-rose-500"})})]}),jsxRuntimeExports.jsx(ModelDetail,{name:"키",value:gt,onChange:Ot,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"체중",value:yt,onChange:Nt,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"골격근량",value:St,onChange:$t,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"체지방율",value:Tt,onChange:Ut,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"체지방량",value:wt,onChange:Vt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"체수분",value:At,onChange:zt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"BMI",value:String(jt),onChange:Bt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"기초대사량",value:Lt,onChange:Ht,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4 pb-2",children:[jsxRuntimeExports.jsx("input",{type:"button",value:"나가기",onClick:nt,className:"p-1 text-teal-700 border border-teal-700 rounded-xl"}),jsxRuntimeExports.jsx("input",{type:"button",value:ut==="left"?"등록하기":"예측하기",onClick:ut==="left"?Gt:dr,className:"p-1 text-white bg-teal-700 border rounded-xl"})]})]})})};ModelDetailModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const{persistAtom}=recoilPersist_1({key:"pinNumber",storage:sessionStorage}),pinNumberState=Recoil_index_8({key:"pinNumber",default:!1,effects_UNSTABLE:[persistAtom]}),PinNumberModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),[ct,ut]=Recoil_index_22(userState),[dt,ht]=reactExports.useState(""),[pt,ft]=reactExports.useState(""),[mt,gt]=reactExports.useState(""),xt=Recoil_index_24(pinNumberState),yt=Rt=>{ht(Rt.currentTarget.value)},vt=Rt=>{ft(Rt.currentTarget.value)},St=Rt=>{Rt.preventDefault(),dt!==pt?alert("PIN 번호가 일치하지 않습니다."):axios({method:"post",url:`${lt}api/users/${ct.info.userId}/pin`,headers:{Authorization:`Bearer ${ct.token}`},data:{new_pin:dt,new_pin_check:pt}}).then(()=>{ut({token:ct.token,info:{...ct.info,pin:dt}}),alert("PIN 번호가 등록 되었습니다."),st({type:null,data:null})})},Et=Rt=>{gt(Rt.currentTarget.value)},wt=Rt=>{Rt.preventDefault(),axios({method:"post",url:`${lt}api/users/${ct.info.userId}/pin/check`,headers:{Authorization:`Bearer ${ct.token}`},data:{current_pin:mt}}).then(Tt=>{Tt.data.data_header.success_code===1?alert("PIN 번호가 일치하지 않습니다."):(xt(!0),st({type:null,data:null}))})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",isOpen:it.type==="pinNumber",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap h-40 bg-white border-2 border-gray-400 w-60 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:ct.info.pin?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{children:"핀번호를 입력하세요"}),jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap justify-center",onSubmit:wt,children:[jsxRuntimeExports.jsx("input",{type:"password",value:mt,onChange:Et,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"핀 번호를 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-1/3 p-1 mt-2 text-white bg-teal-700 rounded-md",children:"입력"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{children:"핀번호를 생성하세요"}),jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap justify-center",onSubmit:St,children:[jsxRuntimeExports.jsx("input",{type:"password",value:dt,onChange:yt,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"핀 번호를 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("input",{type:"password",value:pt,onChange:vt,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"다시 한번 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-1/2 p-1 mt-2 text-white bg-teal-700 rounded-md",children:"생성하기"})]})]})})})})};PinNumberModal.propTypes={onClose:propTypesExports.PropTypes.func};const ModelHistoryModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),[ut,dt]=Recoil_index_22(inbodyListState),ht=Recoil_index_24(selectedInbodyState),pt=mt=>{axios({method:"delete",url:`${lt}api/inbody/${ct.info.userId}/${mt.inbody_id}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(gt=>{axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(xt=>{dt(xt.data.data_body)})}).catch(gt=>{console.log(gt)})},ft=mt=>{axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}/${mt.inbody_id}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(gt=>{ht(gt.data.data_body)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ut.length||ht([])},[ut]),jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8 overflow-auto bg-white border-2 border-teal-700 rounded-xl p-4",isOpen:it.type==="modelHistory",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-2 pb-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"ml-2 text-2xl font-semibold text-teal-700 underline underline-offset-4",children:"인바디 정보"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-500",children:jsxRuntimeExports.jsx("button",{onClick:()=>st({type:"modelDetail",data:null}),className:"p-1 border-4 rounded-full",children:"돌아가기"})})]}),ut.length?jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 h-[400px] mb-4",children:ut.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{onClick:()=>ft(mt),className:"text-lg font-semibold",children:mt.date.substring(0,10)}),jsxRuntimeExports.jsx(BsFillTrash3Fill,{onClick:()=>pt(mt),className:"w-5 h-5"})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["키 : ",mt.height,"cm / "]}),jsxRuntimeExports.jsxs("p",{children:["골격근량 : ",mt.muscle,"kg"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["체중 : ",mt.weight,"kg / "]}),jsxRuntimeExports.jsxs("p",{children:["체지방량 : ",mt.fat_mass,"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"mt-2"})]},gt))}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 h-[400px] mb-4 items-center justify-center",children:[jsxRuntimeExports.jsx("p",{children:"등록된 인바디 정보가 없습니다."}),jsxRuntimeExports.jsx("p",{onClick:()=>st({type:"modelDetail",data:null}),className:"font-semibold text-teal-700",children:"등록하러 가기"})]})]})})};ModelHistoryModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ModalManager=()=>{const[nt,rt]=Recoil_index_22(modalState),it=()=>{rt({type:null,data:null})};switch(nt.type){case"signup":return jsxRuntimeExports.jsx(SignUpModal,{onClose:it});case"changeNickname":return jsxRuntimeExports.jsx(ChangeNicknameModal,{onClose:it,data:nt.data});case"changeGender":return jsxRuntimeExports.jsx(ChangeGenderModal,{onClose:it,data:nt.data});case"changeHeight":return jsxRuntimeExports.jsx(ChangeHeightModal,{onClose:it,data:nt.data});case"changeWeight":return jsxRuntimeExports.jsx(ChangeWeightModal,{onClose:it,data:nt.data});case"selfInputFood":return jsxRuntimeExports.jsx(SelfInputFoodModal,{onClose:it,data:nt.data});case"routineCreate":return jsxRuntimeExports.jsx(RoutineCreateModal,{onClose:it,data:nt.data});case"routineEditMenu":return jsxRuntimeExports.jsx(RoutineEditMenuModal,{onClose:it,data:nt.data});case"challengeMenu":return jsxRuntimeExports.jsx(ChallengeMenuModal,{onClose:it,data:nt.data});case"routineDetail":return jsxRuntimeExports.jsx(RoutineDetailModal,{onClose:it,data:nt.data});case"modelDetail":return jsxRuntimeExports.jsx(ModelDetailModal,{onClose:it,data:nt.data});case"pinNumber":return jsxRuntimeExports.jsx(PinNumberModal,{onClose:it,data:nt.data});case"modelHistory":return jsxRuntimeExports.jsx(ModelHistoryModal,{onClose:it,data:nt.data});default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}};function App(){return jsxRuntimeExports.jsxs("div",{children:[localStorage.getItem("isLogin")==="true"?jsxRuntimeExports.jsx(BottomNavbar,{}):jsxRuntimeExports.jsx(LoginPage,{}),ModalManager()]})}const Menu=({menus:nt})=>jsxRuntimeExports.jsx("div",{children:nt.map(rt=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[rt.menuicon,jsxRuntimeExports.jsx("p",{children:rt.menutitle}),jsxRuntimeExports.jsx(Link,{to:rt.menuurl,children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6"})})]},rt.menutitle))});Menu.propTypes={id:propTypesExports.PropTypes.string,menus:propTypesExports.PropTypes.array};const Menus=()=>{const nt=[{category:"비밀번호",list:[{menuicon:jsxRuntimeExports.jsx(LockClosedIcon$1,{className:"w-6 h-6"}),menutitle:"비밀번호 변경",menuurl:"/mypage/passwordchange"},{menuicon:jsxRuntimeExports.jsx(Squares2X2Icon$1,{className:"w-6 h-6"}),menutitle:"PIN 번호 변경",menuurl:"/mypage/pinchange"}]},{category:"서비스",list:[{menuicon:jsxRuntimeExports.jsx(MegaphoneIcon$1,{className:"w-6 h-6"}),menutitle:"공지사항",menuurl:"/mypage/notice"},{menuicon:jsxRuntimeExports.jsx(QuestionMarkCircleIcon$1,{className:"w-6 h-6"}),menutitle:"자주 묻는 질문",menuurl:"/mypage/FAQ"}]},{category:"탈퇴",list:[{menuicon:jsxRuntimeExports.jsx(ExclamationCircleIcon$1,{className:"w-6 h-6"}),menutitle:"회원 탈퇴",menuurl:"/mypage/delete"}]}];return jsxRuntimeExports.jsx("div",{className:"flex flex-col divide-y-2 divide-gray-300",children:nt.map(rt=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-6",children:[jsxRuntimeExports.jsx("div",{className:"m-2 font-semibold",children:rt.category}),jsxRuntimeExports.jsx(Menu,{menus:rt.list})]},rt.category))})};function uuid(){const nt=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let rt=[];for(let it=0;it<36;it++)it===8||it===13||it===18||it===23?rt[it]="-":rt[it]=nt[Math.ceil(Math.random()*nt.length-1)];return rt.join("")}var uuid_1=uuid;const uuid$1=getDefaultExportFromCjs(uuid_1),getHttpHandlerExtensionConfiguration=nt=>{let rt=nt.httpHandler;return{setHttpHandler(it){rt=it},httpHandler(){return rt},updateHttpClientConfig(it,st){rt.updateHttpClientConfig(it,st)},httpHandlerConfigs(){return rt.httpHandlerConfigs()}}},resolveHttpHandlerRuntimeConfig=nt=>({httpHandler:nt.httpHandler()});var HttpAuthLocation;(function(nt){nt.HEADER="header",nt.QUERY="query"})(HttpAuthLocation||(HttpAuthLocation={}));var HttpApiKeyAuthLocation;(function(nt){nt.HEADER="header",nt.QUERY="query"})(HttpApiKeyAuthLocation||(HttpApiKeyAuthLocation={}));var EndpointURLScheme;(function(nt){nt.HTTP="http",nt.HTTPS="https"})(EndpointURLScheme||(EndpointURLScheme={}));var AlgorithmId;(function(nt){nt.MD5="md5",nt.CRC32="crc32",nt.CRC32C="crc32c",nt.SHA1="sha1",nt.SHA256="sha256"})(AlgorithmId||(AlgorithmId={}));var FieldPosition;(function(nt){nt[nt.HEADER=0]="HEADER",nt[nt.TRAILER=1]="TRAILER"})(FieldPosition||(FieldPosition={}));const SMITHY_CONTEXT_KEY="__smithy_context";var IniSectionType;(function(nt){nt.PROFILE="profile",nt.SSO_SESSION="sso-session",nt.SERVICES="services"})(IniSectionType||(IniSectionType={}));var RequestHandlerProtocol;(function(nt){nt.HTTP_0_9="http/0.9",nt.HTTP_1_0="http/1.0",nt.TDS_8_0="tds/8.0"})(RequestHandlerProtocol||(RequestHandlerProtocol={}));class HttpRequest{constructor(rt){this.method=rt.method||"GET",this.hostname=rt.hostname||"localhost",this.port=rt.port,this.query=rt.query||{},this.headers=rt.headers||{},this.body=rt.body,this.protocol=rt.protocol?rt.protocol.slice(-1)!==":"?`${rt.protocol}:`:rt.protocol:"https:",this.path=rt.path?rt.path.charAt(0)!=="/"?`/${rt.path}`:rt.path:"/",this.username=rt.username,this.password=rt.password,this.fragment=rt.fragment}static isInstance(rt){if(!rt)return!1;const it=rt;return"method"in it&&"protocol"in it&&"hostname"in it&&"path"in it&&typeof it.query=="object"&&typeof it.headers=="object"}clone(){const rt=new HttpRequest({...this,headers:{...this.headers}});return rt.query&&(rt.query=cloneQuery$1(rt.query)),rt}}function cloneQuery$1(nt){return Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return{...rt,[it]:Array.isArray(st)?[...st]:st}},{})}class HttpResponse{constructor(rt){this.statusCode=rt.statusCode,this.reason=rt.reason,this.headers=rt.headers||{},this.body=rt.body}static isInstance(rt){if(!rt)return!1;const it=rt;return typeof it.statusCode=="number"&&typeof it.headers=="object"}}function addExpectContinueMiddleware(nt){return rt=>async it=>{const{request:st}=it;return HttpRequest.isInstance(st)&&st.body&&nt.runtime==="node"&&(st.headers={...st.headers,Expect:"100-continue"}),rt({...it,request:st})}}const addExpectContinueMiddlewareOptions={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},getAddExpectContinuePlugin=nt=>({applyToStack:rt=>{rt.add(addExpectContinueMiddleware(nt),addExpectContinueMiddlewareOptions)}});function resolveHostHeaderConfig(nt){return nt}const hostHeaderMiddleware=nt=>rt=>async it=>{if(!HttpRequest.isInstance(it.request))return rt(it);const{request:st}=it,{handlerProtocol:lt=""}=nt.requestHandler.metadata||{};if(lt.indexOf("h2")>=0&&!st.headers[":authority"])delete st.headers.host,st.headers[":authority"]=st.hostname+(st.port?":"+st.port:"");else if(!st.headers.host){let ct=st.hostname;st.port!=null&&(ct+=`:${st.port}`),st.headers.host=ct}return rt(it)},hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},getHostHeaderPlugin=nt=>({applyToStack:rt=>{rt.add(hostHeaderMiddleware(nt),hostHeaderMiddlewareOptions)}}),loggerMiddleware=()=>(nt,rt)=>async it=>{var st,lt;try{const ct=await nt(it),{clientName:ut,commandName:dt,logger:ht,dynamoDbDocumentClientOptions:pt={}}=rt,{overrideInputFilterSensitiveLog:ft,overrideOutputFilterSensitiveLog:mt}=pt,gt=ft??rt.inputFilterSensitiveLog,xt=mt??rt.outputFilterSensitiveLog,{$metadata:yt,...vt}=ct.output;return(st=ht==null?void 0:ht.info)==null||st.call(ht,{clientName:ut,commandName:dt,input:gt(it.input),output:xt(vt),metadata:yt}),ct}catch(ct){const{clientName:ut,commandName:dt,logger:ht,dynamoDbDocumentClientOptions:pt={}}=rt,{overrideInputFilterSensitiveLog:ft}=pt,mt=ft??rt.inputFilterSensitiveLog;throw(lt=ht==null?void 0:ht.error)==null||lt.call(ht,{clientName:ut,commandName:dt,input:mt(it.input),error:ct,metadata:ct.$metadata}),ct}},loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},getLoggerPlugin=nt=>({applyToStack:rt=>{rt.add(loggerMiddleware(),loggerMiddlewareOptions)}});var define_process_env_default={};const TRACE_ID_HEADER_NAME="X-Amzn-Trace-Id",ENV_LAMBDA_FUNCTION_NAME="AWS_LAMBDA_FUNCTION_NAME",ENV_TRACE_ID="_X_AMZN_TRACE_ID",recursionDetectionMiddleware=nt=>rt=>async it=>{const{request:st}=it;if(!HttpRequest.isInstance(st)||nt.runtime!=="node"||st.headers.hasOwnProperty(TRACE_ID_HEADER_NAME))return rt(it);const lt=define_process_env_default[ENV_LAMBDA_FUNCTION_NAME],ct=define_process_env_default[ENV_TRACE_ID],ut=dt=>typeof dt=="string"&&dt.length>0;return ut(lt)&&ut(ct)&&(st.headers[TRACE_ID_HEADER_NAME]=ct),rt({...it,request:st})},addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},getRecursionDetectionPlugin=nt=>({applyToStack:rt=>{rt.add(recursionDetectionMiddleware(nt),addRecursionDetectionMiddlewareOptions)}});class NoOpLogger{trace(){}debug(){}info(){}warn(){}error(){}}const getAllAliases=(nt,rt)=>{const it=[];if(nt&&it.push(nt),rt)for(const st of rt)it.push(st);return it},getMiddlewareNameWithAliases=(nt,rt)=>`${nt||"anonymous"}${rt&&rt.length>0?` (a.k.a. ${rt.join(",")})`:""}`,constructStack=()=>{let nt=[],rt=[],it=!1;const st=new Set,lt=mt=>mt.sort((gt,xt)=>stepWeights[xt.step]-stepWeights[gt.step]||priorityWeights[xt.priority||"normal"]-priorityWeights[gt.priority||"normal"]),ct=mt=>{let gt=!1;const xt=yt=>{const vt=getAllAliases(yt.name,yt.aliases);if(vt.includes(mt)){gt=!0;for(const St of vt)st.delete(St);return!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},ut=mt=>{let gt=!1;const xt=yt=>{if(yt.middleware===mt){gt=!0;for(const vt of getAllAliases(yt.name,yt.aliases))st.delete(vt);return!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},dt=mt=>{var gt;return nt.forEach(xt=>{mt.add(xt.middleware,{...xt})}),rt.forEach(xt=>{mt.addRelativeTo(xt.middleware,{...xt})}),(gt=mt.identifyOnResolve)==null||gt.call(mt,ft.identifyOnResolve()),mt},ht=mt=>{const gt=[];return mt.before.forEach(xt=>{xt.before.length===0&&xt.after.length===0?gt.push(xt):gt.push(...ht(xt))}),gt.push(mt),mt.after.reverse().forEach(xt=>{xt.before.length===0&&xt.after.length===0?gt.push(xt):gt.push(...ht(xt))}),gt},pt=(mt=!1)=>{const gt=[],xt=[],yt={};return nt.forEach(St=>{const Et={...St,before:[],after:[]};for(const wt of getAllAliases(Et.name,Et.aliases))yt[wt]=Et;gt.push(Et)}),rt.forEach(St=>{const Et={...St,before:[],after:[]};for(const wt of getAllAliases(Et.name,Et.aliases))yt[wt]=Et;xt.push(Et)}),xt.forEach(St=>{if(St.toMiddleware){const Et=yt[St.toMiddleware];if(Et===void 0){if(mt)return;throw new Error(`${St.toMiddleware} is not found when adding ${getMiddlewareNameWithAliases(St.name,St.aliases)} middleware ${St.relation} ${St.toMiddleware}`)}St.relation==="after"&&Et.after.push(St),St.relation==="before"&&Et.before.push(St)}}),lt(gt).map(ht).reduce((St,Et)=>(St.push(...Et),St),[])},ft={add:(mt,gt={})=>{const{name:xt,override:yt,aliases:vt}=gt,St={step:"initialize",priority:"normal",middleware:mt,...gt},Et=getAllAliases(xt,vt);if(Et.length>0){if(Et.some(wt=>st.has(wt))){if(!yt)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(xt,vt)}'`);for(const wt of Et){const Rt=nt.findIndex(It=>{var At;return It.name===wt||((At=It.aliases)==null?void 0:At.some(Dt=>Dt===wt))});if(Rt===-1)continue;const Tt=nt[Rt];if(Tt.step!==St.step||St.priority!==Tt.priority)throw new Error(`"${getMiddlewareNameWithAliases(Tt.name,Tt.aliases)}" middleware with ${Tt.priority} priority in ${Tt.step} step cannot be overridden by "${getMiddlewareNameWithAliases(xt,vt)}" middleware with ${St.priority} priority in ${St.step} step.`);nt.splice(Rt,1)}}for(const wt of Et)st.add(wt)}nt.push(St)},addRelativeTo:(mt,gt)=>{const{name:xt,override:yt,aliases:vt}=gt,St={middleware:mt,...gt},Et=getAllAliases(xt,vt);if(Et.length>0){if(Et.some(wt=>st.has(wt))){if(!yt)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(xt,vt)}'`);for(const wt of Et){const Rt=rt.findIndex(It=>{var At;return It.name===wt||((At=It.aliases)==null?void 0:At.some(Dt=>Dt===wt))});if(Rt===-1)continue;const Tt=rt[Rt];if(Tt.toMiddleware!==St.toMiddleware||Tt.relation!==St.relation)throw new Error(`"${getMiddlewareNameWithAliases(Tt.name,Tt.aliases)}" middleware ${Tt.relation} "${Tt.toMiddleware}" middleware cannot be overridden by "${getMiddlewareNameWithAliases(xt,vt)}" middleware ${St.relation} "${St.toMiddleware}" middleware.`);rt.splice(Rt,1)}}for(const wt of Et)st.add(wt)}rt.push(St)},clone:()=>dt(constructStack()),use:mt=>{mt.applyToStack(ft)},remove:mt=>typeof mt=="string"?ct(mt):ut(mt),removeByTag:mt=>{let gt=!1;const xt=yt=>{const{tags:vt,name:St,aliases:Et}=yt;if(vt&&vt.includes(mt)){const wt=getAllAliases(St,Et);for(const Rt of wt)st.delete(Rt);return gt=!0,!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},concat:mt=>{var xt;const gt=dt(constructStack());return gt.use(mt),gt.identifyOnResolve(it||gt.identifyOnResolve()||(((xt=mt.identifyOnResolve)==null?void 0:xt.call(mt))??!1)),gt},applyToStack:dt,identify:()=>pt(!0).map(mt=>{const gt=mt.step??mt.relation+" "+mt.toMiddleware;return getMiddlewareNameWithAliases(mt.name,mt.aliases)+" - "+gt}),identifyOnResolve(mt){return typeof mt=="boolean"&&(it=mt),it},resolve:(mt,gt)=>{for(const xt of pt().map(yt=>yt.middleware).reverse())mt=xt(mt,gt);return it&&console.log(ft.identify()),mt}};return ft},stepWeights={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},priorityWeights={high:3,normal:2,low:1};class Client{constructor(rt){this.middlewareStack=constructStack(),this.config=rt}send(rt,it,st){const lt=typeof it!="function"?it:void 0,ct=typeof it=="function"?it:st,ut=rt.resolveMiddleware(this.middlewareStack,this.config,lt);if(ct)ut(rt).then(dt=>ct(null,dt.output),dt=>ct(dt)).catch(()=>{});else return ut(rt).then(dt=>dt.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const alphabetByEncoding={},alphabetByValue=new Array(64);for(let nt=0,rt=65,it=90;nt+rt<=it;nt++){const st=String.fromCharCode(nt+rt);alphabetByEncoding[st]=nt,alphabetByValue[nt]=st}for(let nt=0,rt=97,it=122;nt+rt<=it;nt++){const st=String.fromCharCode(nt+rt),lt=nt+26;alphabetByEncoding[st]=lt,alphabetByValue[lt]=st}for(let nt=0;nt<10;nt++){alphabetByEncoding[nt.toString(10)]=nt+52;const rt=nt.toString(10),it=nt+52;alphabetByEncoding[rt]=it,alphabetByValue[it]=rt}alphabetByEncoding["+"]=62;alphabetByValue[62]="+";alphabetByEncoding["/"]=63;alphabetByValue[63]="/";const bitsPerLetter=6,bitsPerByte=8,maxLetterValue=63,fromBase64=nt=>{let rt=nt.length/4*3;nt.slice(-2)==="=="?rt-=2:nt.slice(-1)==="="&&rt--;const it=new ArrayBuffer(rt),st=new DataView(it);for(let lt=0;lt<nt.length;lt+=4){let ct=0,ut=0;for(let pt=lt,ft=lt+3;pt<=ft;pt++)if(nt[pt]!=="="){if(!(nt[pt]in alphabetByEncoding))throw new TypeError(`Invalid character ${nt[pt]} in base64 string.`);ct|=alphabetByEncoding[nt[pt]]<<(ft-pt)*bitsPerLetter,ut+=bitsPerLetter}else ct>>=bitsPerLetter;const dt=lt/4*3;ct>>=ut%bitsPerByte;const ht=Math.floor(ut/bitsPerByte);for(let pt=0;pt<ht;pt++){const ft=(ht-pt-1)*bitsPerByte;st.setUint8(dt+pt,(ct&255<<ft)>>ft)}}return new Uint8Array(it)};function toBase64(nt){let rt="";for(let it=0;it<nt.length;it+=3){let st=0,lt=0;for(let ut=it,dt=Math.min(it+3,nt.length);ut<dt;ut++)st|=nt[ut]<<(dt-ut-1)*bitsPerByte,lt+=bitsPerByte;const ct=Math.ceil(lt/bitsPerLetter);st<<=ct*bitsPerLetter-lt;for(let ut=1;ut<=ct;ut++){const dt=(ct-ut)*bitsPerLetter;rt+=alphabetByValue[(st&maxLetterValue<<dt)>>dt]}rt+="==".slice(0,4-ct)}return rt}const fromUtf8$3=nt=>new TextEncoder().encode(nt),toUint8Array=nt=>typeof nt=="string"?fromUtf8$3(nt):ArrayBuffer.isView(nt)?new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(nt),toUtf8$3=nt=>new TextDecoder("utf-8").decode(nt);function transformToString(nt,rt="utf-8"){return rt==="base64"?toBase64(nt):toUtf8$3(nt)}function transformFromString(nt,rt){return rt==="base64"?Uint8ArrayBlobAdapter.mutate(fromBase64(nt)):Uint8ArrayBlobAdapter.mutate(fromUtf8$3(nt))}class Uint8ArrayBlobAdapter extends Uint8Array{static fromString(rt,it="utf-8"){switch(typeof rt){case"string":return transformFromString(rt,it);default:throw new Error(`Unsupported conversion from ${typeof rt} to Uint8ArrayBlobAdapter.`)}}static mutate(rt){return Object.setPrototypeOf(rt,Uint8ArrayBlobAdapter.prototype),rt}transformToString(rt="utf-8"){return transformToString(this,rt)}}const getAwsChunkedEncodingStream=(nt,rt)=>{const{base64Encoder:it,bodyLengthChecker:st,checksumAlgorithmFn:lt,checksumLocationName:ct,streamHasher:ut}=rt,dt=it!==void 0&&st!==void 0&&lt!==void 0&&ct!==void 0&&ut!==void 0,ht=dt?ut(lt,nt):void 0,pt=nt.getReader();return new ReadableStream({async pull(ft){const{value:mt,done:gt}=await pt.read();if(gt){if(ft.enqueue(`0\r
`),dt){const xt=it(await ht);ft.enqueue(`${ct}:${xt}\r
`),ft.enqueue(`\r
`)}ft.close()}else ft.enqueue(`${(st(mt)||0).toString(16)}\r
${mt}\r
`)}})},escapeUri=nt=>encodeURIComponent(nt).replace(/[!'()*]/g,hexEncode),hexEncode=nt=>`%${nt.charCodeAt(0).toString(16).toUpperCase()}`;function buildQueryString(nt){const rt=[];for(let it of Object.keys(nt).sort()){const st=nt[it];if(it=escapeUri(it),Array.isArray(st))for(let lt=0,ct=st.length;lt<ct;lt++)rt.push(`${it}=${escapeUri(st[lt])}`);else{let lt=it;(st||typeof st=="string")&&(lt+=`=${escapeUri(st)}`),rt.push(lt)}}return rt.join("&")}function requestTimeout(nt=0){return new Promise((rt,it)=>{nt&&setTimeout(()=>{const st=new Error(`Request did not complete within ${nt} ms`);st.name="TimeoutError",it(st)},nt)})}const keepAliveSupport={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class FetchHttpHandler{static create(rt){return typeof(rt==null?void 0:rt.handle)=="function"?rt:new FetchHttpHandler(rt)}constructor(rt){typeof rt=="function"?this.configProvider=rt().then(it=>it||{}):(this.config=rt??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(rt,{abortSignal:it}={}){this.config||(this.config=await this.configProvider);const st=this.config.requestTimeout,lt=this.config.keepAlive===!0;if(it!=null&&it.aborted){const vt=new Error("Request aborted");return vt.name="AbortError",Promise.reject(vt)}let ct=rt.path;const ut=buildQueryString(rt.query||{});ut&&(ct+=`?${ut}`),rt.fragment&&(ct+=`#${rt.fragment}`);let dt="";if(rt.username!=null||rt.password!=null){const vt=rt.username??"",St=rt.password??"";dt=`${vt}:${St}@`}const{port:ht,method:pt}=rt,ft=`${rt.protocol}//${dt}${rt.hostname}${ht?`:${ht}`:""}${ct}`,gt={body:pt==="GET"||pt==="HEAD"?void 0:rt.body,headers:new Headers(rt.headers),method:pt};typeof AbortController<"u"&&(gt.signal=it),keepAliveSupport.supported&&(gt.keepalive=lt);const xt=new Request(ft,gt),yt=[fetch(xt).then(vt=>{const St=vt.headers,Et={};for(const Rt of St.entries())Et[Rt[0]]=Rt[1];return vt.body!=null?{response:new HttpResponse({headers:Et,reason:vt.statusText,statusCode:vt.status,body:vt.body})}:vt.blob().then(Rt=>({response:new HttpResponse({headers:Et,reason:vt.statusText,statusCode:vt.status,body:Rt})}))}),requestTimeout(st)];return it&&yt.push(new Promise((vt,St)=>{it.onabort=()=>{const Et=new Error("Request aborted");Et.name="AbortError",St(Et)}})),Promise.race(yt)}updateHttpClientConfig(rt,it){this.config=void 0,this.configProvider=this.configProvider.then(st=>(st[rt]=it,st))}httpHandlerConfigs(){return this.config??{}}}const streamCollector=nt=>typeof Blob=="function"&&nt instanceof Blob?collectBlob(nt):collectStream(nt);async function collectBlob(nt){const rt=await readToBase64(nt),it=fromBase64(rt);return new Uint8Array(it)}async function collectStream(nt){let rt=new Uint8Array(0);const it=nt.getReader();let st=!1;for(;!st;){const{done:lt,value:ct}=await it.read();if(ct){const ut=rt;rt=new Uint8Array(ut.length+ct.length),rt.set(ut),rt.set(ct,ut.length)}st=lt}return rt}function readToBase64(nt){return new Promise((rt,it)=>{const st=new FileReader;st.onloadend=()=>{if(st.readyState!==2)return it(new Error("Reader aborted too early"));const lt=st.result??"",ct=lt.indexOf(","),ut=ct>-1?ct+1:lt.length;rt(lt.substring(ut))},st.onabort=()=>it(new Error("Read aborted")),st.onerror=()=>it(st.error),st.readAsDataURL(nt)})}const SHORT_TO_HEX={},HEX_TO_SHORT={};for(let nt=0;nt<256;nt++){let rt=nt.toString(16).toLowerCase();rt.length===1&&(rt=`0${rt}`),SHORT_TO_HEX[nt]=rt,HEX_TO_SHORT[rt]=nt}function fromHex(nt){if(nt.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const rt=new Uint8Array(nt.length/2);for(let it=0;it<nt.length;it+=2){const st=nt.slice(it,it+2).toLowerCase();if(st in HEX_TO_SHORT)rt[it/2]=HEX_TO_SHORT[st];else throw new Error(`Cannot decode unrecognized sequence ${st} as hexadecimal`)}return rt}function toHex(nt){let rt="";for(let it=0;it<nt.byteLength;it++)rt+=SHORT_TO_HEX[nt[it]];return rt}const ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED="The stream has already been transformed.",sdkStreamMixin=nt=>{var lt,ct;if(!isBlobInstance(nt)&&!isReadableStreamInstance(nt)){const ut=((ct=(lt=nt==null?void 0:nt.__proto__)==null?void 0:lt.constructor)==null?void 0:ct.name)||nt;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${ut}`)}let rt=!1;const it=async()=>{if(rt)throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);return rt=!0,await streamCollector(nt)},st=ut=>{if(typeof ut.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return ut.stream()};return Object.assign(nt,{transformToByteArray:it,transformToString:async ut=>{const dt=await it();if(ut==="base64")return toBase64(dt);if(ut==="hex")return toHex(dt);if(ut===void 0||ut==="utf8"||ut==="utf-8")return toUtf8$3(dt);if(typeof TextDecoder=="function")return new TextDecoder(ut).decode(dt);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(rt)throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);if(rt=!0,isBlobInstance(nt))return st(nt);if(isReadableStreamInstance(nt))return nt;throw new Error(`Cannot transform payload to web stream, got ${nt}`)}})},isBlobInstance=nt=>typeof Blob=="function"&&nt instanceof Blob,isReadableStreamInstance=nt=>typeof ReadableStream=="function"&&nt instanceof ReadableStream,collectBody=async(nt=new Uint8Array,rt)=>{if(nt instanceof Uint8Array)return Uint8ArrayBlobAdapter.mutate(nt);if(!nt)return Uint8ArrayBlobAdapter.mutate(new Uint8Array);const it=rt.streamCollector(nt);return Uint8ArrayBlobAdapter.mutate(await it)};class Command{constructor(){this.middlewareStack=constructStack()}static classBuilder(){return new ClassBuilder}resolveMiddlewareWithContext(rt,it,st,{middlewareFn:lt,clientName:ct,commandName:ut,inputFilterSensitiveLog:dt,outputFilterSensitiveLog:ht,smithyContext:pt,additionalContext:ft,CommandCtor:mt}){for(const St of lt.bind(this)(mt,rt,it,st))this.middlewareStack.use(St);const gt=rt.concat(this.middlewareStack),{logger:xt}=it,yt={logger:xt,clientName:ct,commandName:ut,inputFilterSensitiveLog:dt,outputFilterSensitiveLog:ht,[SMITHY_CONTEXT_KEY]:{...pt},...ft},{requestHandler:vt}=it;return gt.resolve(St=>vt.handle(St.request,st||{}),yt)}}class ClassBuilder{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=rt=>rt,this._outputFilterSensitiveLog=rt=>rt,this._serializer=null,this._deserializer=null}init(rt){this._init=rt}ep(rt){return this._ep=rt,this}m(rt){return this._middlewareFn=rt,this}s(rt,it,st={}){return this._smithyContext={service:rt,operation:it,...st},this}c(rt={}){return this._additionalContext=rt,this}n(rt,it){return this._clientName=rt,this._commandName=it,this}f(rt=st=>st,it=st=>st){return this._inputFilterSensitiveLog=rt,this._outputFilterSensitiveLog=it,this}ser(rt){return this._serializer=rt,this}de(rt){return this._deserializer=rt,this}build(){const rt=this;let it;return it=class extends Command{static getEndpointParameterInstructions(){return rt._ep}constructor(st){super(),this.input=st,this.serialize=rt._serializer,this.deserialize=rt._deserializer,rt._init(this)}resolveMiddleware(st,lt,ct){return this.resolveMiddlewareWithContext(st,lt,ct,{CommandCtor:it,middlewareFn:rt._middlewareFn,clientName:rt._clientName,commandName:rt._commandName,inputFilterSensitiveLog:rt._inputFilterSensitiveLog,outputFilterSensitiveLog:rt._outputFilterSensitiveLog,smithyContext:rt._smithyContext,additionalContext:rt._additionalContext})}}}}const SENSITIVE_STRING="***SensitiveInformation***",parseBoolean=nt=>{switch(nt){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${nt}"`)}},expectNumber=nt=>{if(nt!=null){if(typeof nt=="string"){const rt=parseFloat(nt);if(!Number.isNaN(rt))return String(rt)!==String(nt)&&logger.warn(stackTraceWarning(`Expected number but observed string: ${nt}`)),rt}if(typeof nt=="number")return nt;throw new TypeError(`Expected number, got ${typeof nt}: ${nt}`)}},MAX_FLOAT=Math.ceil(2**127*(2-2**-23)),expectFloat32=nt=>{const rt=expectNumber(nt);if(rt!==void 0&&!Number.isNaN(rt)&&rt!==1/0&&rt!==-1/0&&Math.abs(rt)>MAX_FLOAT)throw new TypeError(`Expected 32-bit float, got ${nt}`);return rt},expectLong=nt=>{if(nt!=null){if(Number.isInteger(nt)&&!Number.isNaN(nt))return nt;throw new TypeError(`Expected integer, got ${typeof nt}: ${nt}`)}},expectShort=nt=>expectSizedInt(nt,16),expectByte=nt=>expectSizedInt(nt,8),expectSizedInt=(nt,rt)=>{const it=expectLong(nt);if(it!==void 0&&castInt(it,rt)!==it)throw new TypeError(`Expected ${rt}-bit integer, got ${nt}`);return it},castInt=(nt,rt)=>{switch(rt){case 32:return Int32Array.of(nt)[0];case 16:return Int16Array.of(nt)[0];case 8:return Int8Array.of(nt)[0]}},expectNonNull=(nt,rt)=>{if(nt==null)throw rt?new TypeError(`Expected a non-null value for ${rt}`):new TypeError("Expected a non-null value");return nt},expectObject=nt=>{if(nt==null)return;if(typeof nt=="object"&&!Array.isArray(nt))return nt;const rt=Array.isArray(nt)?"array":typeof nt;throw new TypeError(`Expected object, got ${rt}: ${nt}`)},expectString=nt=>{if(nt!=null){if(typeof nt=="string")return nt;if(["boolean","number","bigint"].includes(typeof nt))return logger.warn(stackTraceWarning(`Expected string, got ${typeof nt}: ${nt}`)),String(nt);throw new TypeError(`Expected string, got ${typeof nt}: ${nt}`)}},strictParseFloat32=nt=>expectFloat32(typeof nt=="string"?parseNumber(nt):nt),NUMBER_REGEX=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,parseNumber=nt=>{const rt=nt.match(NUMBER_REGEX);if(rt===null||rt[0].length!==nt.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(nt)},strictParseShort=nt=>expectShort(typeof nt=="string"?parseNumber(nt):nt),strictParseByte=nt=>expectByte(typeof nt=="string"?parseNumber(nt):nt),stackTraceWarning=nt=>String(new TypeError(nt).stack||nt).split(`
`).slice(0,5).filter(rt=>!rt.includes("stackTraceWarning")).join(`
`),logger={warn:console.warn},DAYS=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function dateToUtcString(nt){const rt=nt.getUTCFullYear(),it=nt.getUTCMonth(),st=nt.getUTCDay(),lt=nt.getUTCDate(),ct=nt.getUTCHours(),ut=nt.getUTCMinutes(),dt=nt.getUTCSeconds(),ht=lt<10?`0${lt}`:`${lt}`,pt=ct<10?`0${ct}`:`${ct}`,ft=ut<10?`0${ut}`:`${ut}`,mt=dt<10?`0${dt}`:`${dt}`;return`${DAYS[st]}, ${ht} ${MONTHS[it]} ${rt} ${pt}:${ft}:${mt} GMT`}const RFC3339_WITH_OFFSET=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),parseRfc3339DateTimeWithOffset=nt=>{if(nt==null)return;if(typeof nt!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const rt=RFC3339_WITH_OFFSET.exec(nt);if(!rt)throw new TypeError("Invalid RFC-3339 date-time value");const[it,st,lt,ct,ut,dt,ht,pt,ft]=rt,mt=strictParseShort(stripLeadingZeroes(st)),gt=parseDateValue(lt,"month",1,12),xt=parseDateValue(ct,"day",1,31),yt=buildDate(mt,gt,xt,{hours:ut,minutes:dt,seconds:ht,fractionalMilliseconds:pt});return ft.toUpperCase()!="Z"&&yt.setTime(yt.getTime()-parseOffsetToMilliseconds(ft)),yt},buildDate=(nt,rt,it,st)=>{const lt=rt-1;return validateDayOfMonth(nt,lt,it),new Date(Date.UTC(nt,lt,it,parseDateValue(st.hours,"hour",0,23),parseDateValue(st.minutes,"minute",0,59),parseDateValue(st.seconds,"seconds",0,60),parseMilliseconds(st.fractionalMilliseconds)))},DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],validateDayOfMonth=(nt,rt,it)=>{let st=DAYS_IN_MONTH[rt];if(rt===1&&isLeapYear(nt)&&(st=29),it>st)throw new TypeError(`Invalid day for ${MONTHS[rt]} in ${nt}: ${it}`)},isLeapYear=nt=>nt%4===0&&(nt%100!==0||nt%400===0),parseDateValue=(nt,rt,it,st)=>{const lt=strictParseByte(stripLeadingZeroes(nt));if(lt<it||lt>st)throw new TypeError(`${rt} must be between ${it} and ${st}, inclusive`);return lt},parseMilliseconds=nt=>nt==null?0:strictParseFloat32("0."+nt)*1e3,parseOffsetToMilliseconds=nt=>{const rt=nt[0];let it=1;if(rt=="+")it=1;else if(rt=="-")it=-1;else throw new TypeError(`Offset direction, ${rt}, must be "+" or "-"`);const st=Number(nt.substring(1,3)),lt=Number(nt.substring(4,6));return it*(st*60+lt)*60*1e3},stripLeadingZeroes=nt=>{let rt=0;for(;rt<nt.length-1&&nt.charAt(rt)==="0";)rt++;return rt===0?nt:nt.slice(rt)};class ServiceException extends Error{constructor(rt){super(rt.message),Object.setPrototypeOf(this,ServiceException.prototype),this.name=rt.name,this.$fault=rt.$fault,this.$metadata=rt.$metadata}}const decorateServiceException=(nt,rt={})=>{Object.entries(rt).filter(([,st])=>st!==void 0).forEach(([st,lt])=>{(nt[st]==null||nt[st]==="")&&(nt[st]=lt)});const it=nt.message||nt.Message||"UnknownError";return nt.message=it,delete nt.Message,nt},throwDefaultError$1=({output:nt,parsedBody:rt,exceptionCtor:it,errorCode:st})=>{const lt=deserializeMetadata$1(nt),ct=lt.httpStatusCode?lt.httpStatusCode+"":void 0,ut=new it({name:(rt==null?void 0:rt.code)||(rt==null?void 0:rt.Code)||st||ct||"UnknownError",$fault:"client",$metadata:lt});throw decorateServiceException(ut,rt)},withBaseException=nt=>({output:rt,parsedBody:it,errorCode:st})=>{throwDefaultError$1({output:rt,parsedBody:it,exceptionCtor:nt,errorCode:st})},deserializeMetadata$1=nt=>({httpStatusCode:nt.statusCode,requestId:nt.headers["x-amzn-requestid"]??nt.headers["x-amzn-request-id"]??nt.headers["x-amz-request-id"],extendedRequestId:nt.headers["x-amz-id-2"],cfId:nt.headers["x-amz-cf-id"]}),loadConfigsForDefaultMode=nt=>{switch(nt){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},getChecksumConfiguration=nt=>{const rt=[];for(const it in AlgorithmId){const st=AlgorithmId[it];nt[st]!==void 0&&rt.push({algorithmId:()=>st,checksumConstructor:()=>nt[st]})}return{_checksumAlgorithms:rt,addChecksumAlgorithm(it){this._checksumAlgorithms.push(it)},checksumAlgorithms(){return this._checksumAlgorithms}}},resolveChecksumRuntimeConfig=nt=>{const rt={};return nt.checksumAlgorithms().forEach(it=>{rt[it.algorithmId()]=it.checksumConstructor()}),rt},getRetryConfiguration=nt=>{let rt=nt.retryStrategy;return{setRetryStrategy(it){rt=it},retryStrategy(){return rt}}},resolveRetryRuntimeConfig=nt=>{const rt={};return rt.retryStrategy=nt.retryStrategy(),rt},getDefaultExtensionConfiguration=nt=>({...getChecksumConfiguration(nt),...getRetryConfiguration(nt)}),resolveDefaultRuntimeConfig=nt=>({...resolveChecksumRuntimeConfig(nt),...resolveRetryRuntimeConfig(nt)});function extendedEncodeURIComponent(nt){return encodeURIComponent(nt).replace(/[!'()*]/g,function(rt){return"%"+rt.charCodeAt(0).toString(16).toUpperCase()})}const getValueFromTextNode=nt=>{const rt="#text";for(const it in nt)nt.hasOwnProperty(it)&&nt[it][rt]!==void 0?nt[it]=nt[it][rt]:typeof nt[it]=="object"&&nt[it]!==null&&(nt[it]=getValueFromTextNode(nt[it]));return nt},StringWrapper=function(){const nt=Object.getPrototypeOf(this).constructor,rt=Function.bind.apply(String,[null,...arguments]),it=new rt;return Object.setPrototypeOf(it,nt.prototype),it};StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(StringWrapper,String);function map$2(nt,rt,it){let st,lt,ct;if(typeof rt>"u"&&typeof it>"u")st={},ct=nt;else{if(st=nt,typeof rt=="function")return lt=rt,ct=it,mapWithFilter(st,lt,ct);ct=rt}for(const ut of Object.keys(ct)){if(!Array.isArray(ct[ut])){st[ut]=ct[ut];continue}applyInstruction(st,null,ct,ut)}return st}const mapWithFilter=(nt,rt,it)=>map$2(nt,Object.entries(it).reduce((st,[lt,ct])=>(Array.isArray(ct)?st[lt]=ct:typeof ct=="function"?st[lt]=[rt,ct()]:st[lt]=[rt,ct],st),{})),applyInstruction=(nt,rt,it,st)=>{if(rt!==null){let ut=it[st];typeof ut=="function"&&(ut=[,ut]);const[dt=nonNullish,ht=pass,pt=st]=ut;(typeof dt=="function"&&dt(rt[pt])||typeof dt!="function"&&dt)&&(nt[st]=ht(rt[pt]));return}let[lt,ct]=it[st];if(typeof ct=="function"){let ut;const dt=lt===void 0&&(ut=ct())!=null,ht=typeof lt=="function"&&!!lt(void 0)||typeof lt!="function"&&!!lt;dt?nt[st]=ut:ht&&(nt[st]=ct())}else{const ut=lt===void 0&&ct!=null,dt=typeof lt=="function"&&!!lt(ct)||typeof lt!="function"&&!!lt;(ut||dt)&&(nt[st]=ct)}},nonNullish=nt=>nt!=null,pass=nt=>nt,resolvedPath=(nt,rt,it,st,lt,ct)=>{if(rt!=null&&rt[it]!==void 0){const ut=st();if(ut.length<=0)throw new Error("Empty value provided for input HTTP label: "+it+".");nt=nt.replace(lt,ct?ut.split("/").map(dt=>extendedEncodeURIComponent(dt)).join("/"):extendedEncodeURIComponent(ut))}else throw new Error("No value provided for input HTTP label: "+it+".");return nt},CONTENT_LENGTH_HEADER$1="content-length";function checkContentLengthHeader(){return(nt,rt)=>async it=>{var lt;const{request:st}=it;if(HttpRequest.isInstance(st)&&!(CONTENT_LENGTH_HEADER$1 in st.headers)){const ct="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((lt=rt==null?void 0:rt.logger)==null?void 0:lt.warn)=="function"&&!(rt.logger instanceof NoOpLogger)?rt.logger.warn(ct):console.warn(ct)}return nt({...it})}}const checkContentLengthHeaderMiddlewareOptions={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},getCheckContentLengthHeaderPlugin=nt=>({applyToStack:rt=>{rt.add(checkContentLengthHeader(),checkContentLengthHeaderMiddlewareOptions)}}),regionRedirectEndpointMiddleware=nt=>(rt,it)=>async st=>{const lt=await nt.region(),ct=nt.region;it.__s3RegionRedirect&&(nt.region=async()=>(nt.region=ct,it.__s3RegionRedirect));const ut=await rt(st);if(it.__s3RegionRedirect){const dt=await nt.region();if(lt!==dt)throw new Error("Region was not restored following S3 region redirect.")}return ut},regionRedirectEndpointMiddlewareOptions={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function regionRedirectMiddleware(nt){return(rt,it)=>async st=>{var lt,ct;try{return await rt(st)}catch(ut){if(nt.followRegionRedirects&&((lt=ut==null?void 0:ut.$metadata)==null?void 0:lt.httpStatusCode)===301){try{const dt=ut.$response.headers["x-amz-bucket-region"];(ct=it.logger)==null||ct.debug(`Redirecting from ${await nt.region()} to ${dt}`),it.__s3RegionRedirect=dt}catch(dt){throw new Error("Region redirect failed: "+dt)}return rt(st)}else throw ut}}}const regionRedirectMiddlewareOptions={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},getRegionRedirectMiddlewarePlugin=nt=>({applyToStack:rt=>{rt.add(regionRedirectMiddleware(nt),regionRedirectMiddlewareOptions),rt.addRelativeTo(regionRedirectEndpointMiddleware(nt),regionRedirectEndpointMiddlewareOptions)}});class S3ExpressIdentityCache{constructor(rt={}){this.data=rt,this.lastPurgeTime=Date.now()}get(rt){const it=this.data[rt];if(it)return it}set(rt,it){return this.data[rt]=it,it}delete(rt){delete this.data[rt]}async purgeExpired(){const rt=Date.now();if(!(this.lastPurgeTime+S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>rt))for(const it in this.data){const st=this.data[it];if(!st.isRefreshing){const lt=await st.identity;lt.expiration&&lt.expiration.getTime()<rt&&delete this.data[it]}}}}S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;class S3ExpressIdentityCacheEntry{constructor(rt,it=!1,st=Date.now()){this._identity=rt,this.isRefreshing=it,this.accessed=st}get identity(){return this.accessed=Date.now(),this._identity}}class S3ExpressIdentityProviderImpl{constructor(rt,it=new S3ExpressIdentityCache){this.createSessionFn=rt,this.cache=it}async getS3ExpressIdentity(rt,it){const st=it.Bucket,{cache:lt}=this,ct=lt.get(st);return ct?ct.identity.then(ut=>{var pt,ft;return(((pt=ut.expiration)==null?void 0:pt.getTime())??0)<Date.now()?lt.set(st,new S3ExpressIdentityCacheEntry(this.getIdentity(st))).identity:((((ft=ut.expiration)==null?void 0:ft.getTime())??0)<Date.now()+S3ExpressIdentityProviderImpl.REFRESH_WINDOW_MS&&!ct.isRefreshing&&(ct.isRefreshing=!0,this.getIdentity(st).then(mt=>{lt.set(st,new S3ExpressIdentityCacheEntry(Promise.resolve(mt)))})),ut)}):lt.set(st,new S3ExpressIdentityCacheEntry(this.getIdentity(st))).identity}async getIdentity(rt){var lt,ct;await this.cache.purgeExpired().catch(ut=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+ut)});const it=await this.createSessionFn(rt);if(!((lt=it.Credentials)!=null&&lt.AccessKeyId)||!((ct=it.Credentials)!=null&&ct.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:it.Credentials.AccessKeyId,secretAccessKey:it.Credentials.SecretAccessKey,sessionToken:it.Credentials.SessionToken,expiration:it.Credentials.Expiration?new Date(it.Credentials.Expiration):void 0}}}S3ExpressIdentityProviderImpl.REFRESH_WINDOW_MS=6e4;var build$7={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(nt,rt){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$6(nt,rt)};function __extends$6(nt,rt){extendStatics$6(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$6=function(){return __assign$6=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$6.apply(this,arguments)};function __rest$6(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$6(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$6(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$6(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$6(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$6(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$6(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$6(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$6(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$6(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$6(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$6(arguments[rt]));return nt}function __spreadArrays$6(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$6(nt){return this instanceof __await$6?(this.v=nt,this):new __await$6(nt)}function __asyncGenerator$6(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$6?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$6(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$6(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$6(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$6=="function"?__values$6(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$6(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$6(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$6(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$6(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$6(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$6},__asyncDelegator:__asyncDelegator$6,__asyncGenerator:__asyncGenerator$6,__asyncValues:__asyncValues$6,__await:__await$6,__awaiter:__awaiter$6,__classPrivateFieldGet:__classPrivateFieldGet$6,__classPrivateFieldSet:__classPrivateFieldSet$6,__createBinding:__createBinding$6,__decorate:__decorate$6,__exportStar:__exportStar$6,__extends:__extends$6,__generator:__generator$6,__importDefault:__importDefault$6,__importStar:__importStar$6,__makeTemplateObject:__makeTemplateObject$6,__metadata:__metadata$6,__param:__param$6,__read:__read$6,__rest:__rest$6,__spread:__spread$6,__spreadArrays:__spreadArrays$6,__values:__values$6},Symbol.toStringTag,{value:"Module"})),require$$0$6=getAugmentedNamespace(tslib_es6$6);var build$6={},convertToBuffer$1={};const fromUtf8$2=nt=>{const rt=[];for(let it=0,st=nt.length;it<st;it++){const lt=nt.charCodeAt(it);if(lt<128)rt.push(lt);else if(lt<2048)rt.push(lt>>6|192,lt&63|128);else if(it+1<nt.length&&(lt&64512)===55296&&(nt.charCodeAt(it+1)&64512)===56320){const ct=65536+((lt&1023)<<10)+(nt.charCodeAt(++it)&1023);rt.push(ct>>18|240,ct>>12&63|128,ct>>6&63|128,ct&63|128)}else rt.push(lt>>12|224,lt>>6&63|128,lt&63|128)}return Uint8Array.from(rt)},toUtf8$2=nt=>{let rt="";for(let it=0,st=nt.length;it<st;it++){const lt=nt[it];if(lt<128)rt+=String.fromCharCode(lt);else if(192<=lt&&lt<224){const ct=nt[++it];rt+=String.fromCharCode((lt&31)<<6|ct&63)}else if(240<=lt&&lt<365){const ut="%"+[lt,nt[++it],nt[++it],nt[++it]].map(dt=>dt.toString(16)).join("%");rt+=decodeURIComponent(ut)}else rt+=String.fromCharCode((lt&15)<<12|(nt[++it]&63)<<6|nt[++it]&63)}return rt};function fromUtf8$1(nt){return new TextEncoder().encode(nt)}function toUtf8$1(nt){return new TextDecoder("utf-8").decode(nt)}const fromUtf8=nt=>typeof TextEncoder=="function"?fromUtf8$1(nt):fromUtf8$2(nt),toUtf8=nt=>typeof TextDecoder=="function"?toUtf8$1(nt):toUtf8$2(nt),distEs$1=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8,toUtf8},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(distEs$1);var hasRequiredConvertToBuffer;function requireConvertToBuffer(){if(hasRequiredConvertToBuffer)return convertToBuffer$1;hasRequiredConvertToBuffer=1,Object.defineProperty(convertToBuffer$1,"__esModule",{value:!0}),convertToBuffer$1.convertToBuffer=void 0;var nt=require$$2$1,rt=typeof Buffer<"u"&&Buffer.from?function(st){return Buffer.from(st,"utf8")}:nt.fromUtf8;function it(st){return st instanceof Uint8Array?st:typeof st=="string"?rt(st):ArrayBuffer.isView(st)?new Uint8Array(st.buffer,st.byteOffset,st.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(st)}return convertToBuffer$1.convertToBuffer=it,convertToBuffer$1}var isEmptyData$3={},hasRequiredIsEmptyData$2;function requireIsEmptyData$2(){if(hasRequiredIsEmptyData$2)return isEmptyData$3;hasRequiredIsEmptyData$2=1,Object.defineProperty(isEmptyData$3,"__esModule",{value:!0}),isEmptyData$3.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$3.isEmptyData=nt,isEmptyData$3}var numToUint8={},hasRequiredNumToUint8;function requireNumToUint8(){if(hasRequiredNumToUint8)return numToUint8;hasRequiredNumToUint8=1,Object.defineProperty(numToUint8,"__esModule",{value:!0}),numToUint8.numToUint8=void 0;function nt(rt){return new Uint8Array([(rt&4278190080)>>24,(rt&16711680)>>16,(rt&65280)>>8,rt&255])}return numToUint8.numToUint8=nt,numToUint8}var uint32ArrayFrom={},hasRequiredUint32ArrayFrom;function requireUint32ArrayFrom(){if(hasRequiredUint32ArrayFrom)return uint32ArrayFrom;hasRequiredUint32ArrayFrom=1,Object.defineProperty(uint32ArrayFrom,"__esModule",{value:!0}),uint32ArrayFrom.uint32ArrayFrom=void 0;function nt(rt){if(!Uint32Array.from){for(var it=new Uint32Array(rt.length),st=0;st<rt.length;)it[st]=rt[st],st+=1;return it}return Uint32Array.from(rt)}return uint32ArrayFrom.uint32ArrayFrom=nt,uint32ArrayFrom}var hasRequiredBuild$5;function requireBuild$5(){return hasRequiredBuild$5||(hasRequiredBuild$5=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.uint32ArrayFrom=nt.numToUint8=nt.isEmptyData=nt.convertToBuffer=void 0;var rt=requireConvertToBuffer();Object.defineProperty(nt,"convertToBuffer",{enumerable:!0,get:function(){return rt.convertToBuffer}});var it=requireIsEmptyData$2();Object.defineProperty(nt,"isEmptyData",{enumerable:!0,get:function(){return it.isEmptyData}});var st=requireNumToUint8();Object.defineProperty(nt,"numToUint8",{enumerable:!0,get:function(){return st.numToUint8}});var lt=requireUint32ArrayFrom();Object.defineProperty(nt,"uint32ArrayFrom",{enumerable:!0,get:function(){return lt.uint32ArrayFrom}})}(build$6)),build$6}var aws_crc32={},hasRequiredAws_crc32;function requireAws_crc32(){if(hasRequiredAws_crc32)return aws_crc32;hasRequiredAws_crc32=1,Object.defineProperty(aws_crc32,"__esModule",{value:!0}),aws_crc32.AwsCrc32=void 0;var nt=require$$0$6,rt=requireBuild$5(),it=requireBuild$4(),st=function(){function lt(){this.crc32=new it.Crc32}return lt.prototype.update=function(ct){(0,rt.isEmptyData)(ct)||this.crc32.update((0,rt.convertToBuffer)(ct))},lt.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(ct){return[2,(0,rt.numToUint8)(this.crc32.digest())]})})},lt.prototype.reset=function(){this.crc32=new it.Crc32},lt}();return aws_crc32.AwsCrc32=st,aws_crc32}var hasRequiredBuild$4;function requireBuild$4(){return hasRequiredBuild$4||(hasRequiredBuild$4=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.AwsCrc32=nt.Crc32=nt.crc32=void 0;var rt=require$$0$6,it=requireBuild$5();function st(ht){return new lt().update(ht).digest()}nt.crc32=st;var lt=function(){function ht(){this.checksum=4294967295}return ht.prototype.update=function(pt){var ft,mt;try{for(var gt=rt.__values(pt),xt=gt.next();!xt.done;xt=gt.next()){var yt=xt.value;this.checksum=this.checksum>>>8^ut[(this.checksum^yt)&255]}}catch(vt){ft={error:vt}}finally{try{xt&&!xt.done&&(mt=gt.return)&&mt.call(gt)}finally{if(ft)throw ft.error}}return this},ht.prototype.digest=function(){return(this.checksum^4294967295)>>>0},ht}();nt.Crc32=lt;var ct=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],ut=(0,it.uint32ArrayFrom)(ct),dt=requireAws_crc32();Object.defineProperty(nt,"AwsCrc32",{enumerable:!0,get:function(){return dt.AwsCrc32}})}(build$7)),build$7}var buildExports$1=requireBuild$4();class Int64{constructor(rt){if(this.bytes=rt,rt.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(rt){if(rt>9223372036854776e3||rt<-9223372036854776e3)throw new Error(`${rt} is too large (or, if negative, too small) to represent as an Int64`);const it=new Uint8Array(8);for(let st=7,lt=Math.abs(Math.round(rt));st>-1&&lt>0;st--,lt/=256)it[st]=lt;return rt<0&&negate(it),new Int64(it)}valueOf(){const rt=this.bytes.slice(0),it=rt[0]&128;return it&&negate(rt),parseInt(toHex(rt),16)*(it?-1:1)}toString(){return String(this.valueOf())}}function negate(nt){for(let rt=0;rt<8;rt++)nt[rt]^=255;for(let rt=7;rt>-1&&(nt[rt]++,nt[rt]===0);rt--);}class HeaderMarshaller{constructor(rt,it){this.toUtf8=rt,this.fromUtf8=it}format(rt){const it=[];for(const ct of Object.keys(rt)){const ut=this.fromUtf8(ct);it.push(Uint8Array.from([ut.byteLength]),ut,this.formatHeaderValue(rt[ct]))}const st=new Uint8Array(it.reduce((ct,ut)=>ct+ut.byteLength,0));let lt=0;for(const ct of it)st.set(ct,lt),lt+=ct.byteLength;return st}formatHeaderValue(rt){switch(rt.type){case"boolean":return Uint8Array.from([rt.value?0:1]);case"byte":return Uint8Array.from([2,rt.value]);case"short":const it=new DataView(new ArrayBuffer(3));return it.setUint8(0,3),it.setInt16(1,rt.value,!1),new Uint8Array(it.buffer);case"integer":const st=new DataView(new ArrayBuffer(5));return st.setUint8(0,4),st.setInt32(1,rt.value,!1),new Uint8Array(st.buffer);case"long":const lt=new Uint8Array(9);return lt[0]=5,lt.set(rt.value.bytes,1),lt;case"binary":const ct=new DataView(new ArrayBuffer(3+rt.value.byteLength));ct.setUint8(0,6),ct.setUint16(1,rt.value.byteLength,!1);const ut=new Uint8Array(ct.buffer);return ut.set(rt.value,3),ut;case"string":const dt=this.fromUtf8(rt.value),ht=new DataView(new ArrayBuffer(3+dt.byteLength));ht.setUint8(0,7),ht.setUint16(1,dt.byteLength,!1);const pt=new Uint8Array(ht.buffer);return pt.set(dt,3),pt;case"timestamp":const ft=new Uint8Array(9);return ft[0]=8,ft.set(Int64.fromNumber(rt.value.valueOf()).bytes,1),ft;case"uuid":if(!UUID_PATTERN.test(rt.value))throw new Error(`Invalid UUID received: ${rt.value}`);const mt=new Uint8Array(17);return mt[0]=9,mt.set(fromHex(rt.value.replace(/\-/g,"")),1),mt}}parse(rt){const it={};let st=0;for(;st<rt.byteLength;){const lt=rt.getUint8(st++),ct=this.toUtf8(new Uint8Array(rt.buffer,rt.byteOffset+st,lt));switch(st+=lt,rt.getUint8(st++)){case 0:it[ct]={type:BOOLEAN_TAG,value:!0};break;case 1:it[ct]={type:BOOLEAN_TAG,value:!1};break;case 2:it[ct]={type:BYTE_TAG,value:rt.getInt8(st++)};break;case 3:it[ct]={type:SHORT_TAG,value:rt.getInt16(st,!1)},st+=2;break;case 4:it[ct]={type:INT_TAG,value:rt.getInt32(st,!1)},st+=4;break;case 5:it[ct]={type:LONG_TAG,value:new Int64(new Uint8Array(rt.buffer,rt.byteOffset+st,8))},st+=8;break;case 6:const ut=rt.getUint16(st,!1);st+=2,it[ct]={type:BINARY_TAG,value:new Uint8Array(rt.buffer,rt.byteOffset+st,ut)},st+=ut;break;case 7:const dt=rt.getUint16(st,!1);st+=2,it[ct]={type:STRING_TAG,value:this.toUtf8(new Uint8Array(rt.buffer,rt.byteOffset+st,dt))},st+=dt;break;case 8:it[ct]={type:TIMESTAMP_TAG,value:new Date(new Int64(new Uint8Array(rt.buffer,rt.byteOffset+st,8)).valueOf())},st+=8;break;case 9:const ht=new Uint8Array(rt.buffer,rt.byteOffset+st,16);st+=16,it[ct]={type:UUID_TAG,value:`${toHex(ht.subarray(0,4))}-${toHex(ht.subarray(4,6))}-${toHex(ht.subarray(6,8))}-${toHex(ht.subarray(8,10))}-${toHex(ht.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return it}}var HEADER_VALUE_TYPE;(function(nt){nt[nt.boolTrue=0]="boolTrue",nt[nt.boolFalse=1]="boolFalse",nt[nt.byte=2]="byte",nt[nt.short=3]="short",nt[nt.integer=4]="integer",nt[nt.long=5]="long",nt[nt.byteArray=6]="byteArray",nt[nt.string=7]="string",nt[nt.timestamp=8]="timestamp",nt[nt.uuid=9]="uuid"})(HEADER_VALUE_TYPE||(HEADER_VALUE_TYPE={}));const BOOLEAN_TAG="boolean",BYTE_TAG="byte",SHORT_TAG="short",INT_TAG="integer",LONG_TAG="long",BINARY_TAG="binary",STRING_TAG="string",TIMESTAMP_TAG="timestamp",UUID_TAG="uuid",UUID_PATTERN=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,PRELUDE_MEMBER_LENGTH=4,PRELUDE_LENGTH=PRELUDE_MEMBER_LENGTH*2,CHECKSUM_LENGTH=4,MINIMUM_MESSAGE_LENGTH=PRELUDE_LENGTH+CHECKSUM_LENGTH*2;function splitMessage({byteLength:nt,byteOffset:rt,buffer:it}){if(nt<MINIMUM_MESSAGE_LENGTH)throw new Error("Provided message too short to accommodate event stream message overhead");const st=new DataView(it,rt,nt),lt=st.getUint32(0,!1);if(nt!==lt)throw new Error("Reported message length does not match received message length");const ct=st.getUint32(PRELUDE_MEMBER_LENGTH,!1),ut=st.getUint32(PRELUDE_LENGTH,!1),dt=st.getUint32(nt-CHECKSUM_LENGTH,!1),ht=new buildExports$1.Crc32().update(new Uint8Array(it,rt,PRELUDE_LENGTH));if(ut!==ht.digest())throw new Error(`The prelude checksum specified in the message (${ut}) does not match the calculated CRC32 checksum (${ht.digest()})`);if(ht.update(new Uint8Array(it,rt+PRELUDE_LENGTH,nt-(PRELUDE_LENGTH+CHECKSUM_LENGTH))),dt!==ht.digest())throw new Error(`The message checksum (${ht.digest()}) did not match the expected value of ${dt}`);return{headers:new DataView(it,rt+PRELUDE_LENGTH+CHECKSUM_LENGTH,ct),body:new Uint8Array(it,rt+PRELUDE_LENGTH+CHECKSUM_LENGTH+ct,lt-ct-(PRELUDE_LENGTH+CHECKSUM_LENGTH+CHECKSUM_LENGTH))}}class EventStreamCodec{constructor(rt,it){this.headerMarshaller=new HeaderMarshaller(rt,it),this.messageBuffer=[],this.isEndOfStream=!1}feed(rt){this.messageBuffer.push(this.decode(rt))}endOfStream(){this.isEndOfStream=!0}getMessage(){const rt=this.messageBuffer.pop(),it=this.isEndOfStream;return{getMessage(){return rt},isEndOfStream(){return it}}}getAvailableMessages(){const rt=this.messageBuffer;this.messageBuffer=[];const it=this.isEndOfStream;return{getMessages(){return rt},isEndOfStream(){return it}}}encode({headers:rt,body:it}){const st=this.headerMarshaller.format(rt),lt=st.byteLength+it.byteLength+16,ct=new Uint8Array(lt),ut=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),dt=new buildExports$1.Crc32;return ut.setUint32(0,lt,!1),ut.setUint32(4,st.byteLength,!1),ut.setUint32(8,dt.update(ct.subarray(0,8)).digest(),!1),ct.set(st,12),ct.set(it,st.byteLength+12),ut.setUint32(lt-4,dt.update(ct.subarray(8,lt-4)).digest(),!1),ct}decode(rt){const{headers:it,body:st}=splitMessage(rt);return{headers:this.headerMarshaller.parse(it),body:st}}formatHeaders(rt){return this.headerMarshaller.format(rt)}}class MessageDecoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.inputStream)yield this.options.decoder.decode(rt)}}class MessageEncoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.messageStream)yield this.options.encoder.encode(rt);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class SmithyMessageDecoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.messageStream){const it=await this.options.deserializer(rt);it!==void 0&&(yield it)}}}class SmithyMessageEncoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.inputStream)yield this.options.serializer(rt)}}const getSmithyContext=nt=>nt[SMITHY_CONTEXT_KEY]||(nt[SMITHY_CONTEXT_KEY]={}),normalizeProvider=nt=>{if(typeof nt=="function")return nt;const rt=Promise.resolve(nt);return()=>rt},ALGORITHM_QUERY_PARAM="X-Amz-Algorithm",CREDENTIAL_QUERY_PARAM="X-Amz-Credential",AMZ_DATE_QUERY_PARAM="X-Amz-Date",SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders",EXPIRES_QUERY_PARAM="X-Amz-Expires",SIGNATURE_QUERY_PARAM="X-Amz-Signature",TOKEN_QUERY_PARAM="X-Amz-Security-Token",AUTH_HEADER="authorization",AMZ_DATE_HEADER=AMZ_DATE_QUERY_PARAM.toLowerCase(),DATE_HEADER="date",GENERATED_HEADERS=[AUTH_HEADER,AMZ_DATE_HEADER,DATE_HEADER],SIGNATURE_HEADER=SIGNATURE_QUERY_PARAM.toLowerCase(),SHA256_HEADER="x-amz-content-sha256",TOKEN_HEADER=TOKEN_QUERY_PARAM.toLowerCase(),ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PROXY_HEADER_PATTERN=/^proxy-/,SEC_HEADER_PATTERN=/^sec-/,ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256",EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD",UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD",MAX_CACHE_SIZE=50,KEY_TYPE_IDENTIFIER="aws4_request",MAX_PRESIGNED_TTL=60*60*24*7,signingKeyCache={},cacheQueue=[],createScope=(nt,rt,it)=>`${nt}/${rt}/${it}/${KEY_TYPE_IDENTIFIER}`,getSigningKey=async(nt,rt,it,st,lt)=>{const ct=await hmac(nt,rt.secretAccessKey,rt.accessKeyId),ut=`${it}:${st}:${lt}:${toHex(ct)}:${rt.sessionToken}`;if(ut in signingKeyCache)return signingKeyCache[ut];for(cacheQueue.push(ut);cacheQueue.length>MAX_CACHE_SIZE;)delete signingKeyCache[cacheQueue.shift()];let dt=`AWS4${rt.secretAccessKey}`;for(const ht of[it,st,lt,KEY_TYPE_IDENTIFIER])dt=await hmac(nt,dt,ht);return signingKeyCache[ut]=dt},hmac=(nt,rt,it)=>{const st=new nt(rt);return st.update(toUint8Array(it)),st.digest()},getCanonicalHeaders=({headers:nt},rt,it)=>{const st={};for(const lt of Object.keys(nt).sort()){if(nt[lt]==null)continue;const ct=lt.toLowerCase();(ct in ALWAYS_UNSIGNABLE_HEADERS||rt!=null&&rt.has(ct)||PROXY_HEADER_PATTERN.test(ct)||SEC_HEADER_PATTERN.test(ct))&&(!it||it&&!it.has(ct))||(st[ct]=nt[lt].trim().replace(/\s+/g," "))}return st},getCanonicalQuery=({query:nt={}})=>{const rt=[],it={};for(const st of Object.keys(nt).sort()){if(st.toLowerCase()===SIGNATURE_HEADER)continue;rt.push(st);const lt=nt[st];typeof lt=="string"?it[st]=`${escapeUri(st)}=${escapeUri(lt)}`:Array.isArray(lt)&&(it[st]=lt.slice(0).reduce((ct,ut)=>ct.concat([`${escapeUri(st)}=${escapeUri(ut)}`]),[]).sort().join("&"))}return rt.map(st=>it[st]).filter(st=>st).join("&")},isArrayBuffer=nt=>typeof ArrayBuffer=="function"&&nt instanceof ArrayBuffer||Object.prototype.toString.call(nt)==="[object ArrayBuffer]",getPayloadHash=async({headers:nt,body:rt},it)=>{for(const st of Object.keys(nt))if(st.toLowerCase()===SHA256_HEADER)return nt[st];if(rt==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof rt=="string"||ArrayBuffer.isView(rt)||isArrayBuffer(rt)){const st=new it;return st.update(toUint8Array(rt)),toHex(await st.digest())}return UNSIGNED_PAYLOAD},hasHeader$1=(nt,rt)=>{nt=nt.toLowerCase();for(const it of Object.keys(rt))if(nt===it.toLowerCase())return!0;return!1},cloneRequest=({headers:nt,query:rt,...it})=>({...it,headers:{...nt},query:rt?cloneQuery(rt):void 0}),cloneQuery=nt=>Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return{...rt,[it]:Array.isArray(st)?[...st]:st}},{}),moveHeadersToQuery=(nt,rt={})=>{var lt;const{headers:it,query:st={}}=typeof nt.clone=="function"?nt.clone():cloneRequest(nt);for(const ct of Object.keys(it)){const ut=ct.toLowerCase();ut.slice(0,6)==="x-amz-"&&!((lt=rt.unhoistableHeaders)!=null&&lt.has(ut))&&(st[ct]=it[ct],delete it[ct])}return{...nt,headers:it,query:st}},prepareRequest=nt=>{nt=typeof nt.clone=="function"?nt.clone():cloneRequest(nt);for(const rt of Object.keys(nt.headers))GENERATED_HEADERS.indexOf(rt.toLowerCase())>-1&&delete nt.headers[rt];return nt},iso8601=nt=>toDate(nt).toISOString().replace(/\.\d{3}Z$/,"Z"),toDate=nt=>typeof nt=="number"?new Date(nt*1e3):typeof nt=="string"?Number(nt)?new Date(Number(nt)*1e3):new Date(nt):nt;class SignatureV4{constructor({applyChecksum:rt,credentials:it,region:st,service:lt,sha256:ct,uriEscapePath:ut=!0}){this.headerMarshaller=new HeaderMarshaller(toUtf8$3,fromUtf8$3),this.service=lt,this.sha256=ct,this.uriEscapePath=ut,this.applyChecksum=typeof rt=="boolean"?rt:!0,this.regionProvider=normalizeProvider(st),this.credentialProvider=normalizeProvider(it)}async presign(rt,it={}){const{signingDate:st=new Date,expiresIn:lt=3600,unsignableHeaders:ct,unhoistableHeaders:ut,signableHeaders:dt,signingRegion:ht,signingService:pt}=it,ft=await this.credentialProvider();this.validateResolvedCredentials(ft);const mt=ht??await this.regionProvider(),{longDate:gt,shortDate:xt}=formatDate(st);if(lt>MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const yt=createScope(xt,mt,pt??this.service),vt=moveHeadersToQuery(prepareRequest(rt),{unhoistableHeaders:ut});ft.sessionToken&&(vt.query[TOKEN_QUERY_PARAM]=ft.sessionToken),vt.query[ALGORITHM_QUERY_PARAM]=ALGORITHM_IDENTIFIER,vt.query[CREDENTIAL_QUERY_PARAM]=`${ft.accessKeyId}/${yt}`,vt.query[AMZ_DATE_QUERY_PARAM]=gt,vt.query[EXPIRES_QUERY_PARAM]=lt.toString(10);const St=getCanonicalHeaders(vt,ct,dt);return vt.query[SIGNED_HEADERS_QUERY_PARAM]=getCanonicalHeaderList(St),vt.query[SIGNATURE_QUERY_PARAM]=await this.getSignature(gt,yt,this.getSigningKey(ft,mt,xt,pt),this.createCanonicalRequest(vt,St,await getPayloadHash(rt,this.sha256))),vt}async sign(rt,it){return typeof rt=="string"?this.signString(rt,it):rt.headers&&rt.payload?this.signEvent(rt,it):rt.message?this.signMessage(rt,it):this.signRequest(rt,it)}async signEvent({headers:rt,payload:it},{signingDate:st=new Date,priorSignature:lt,signingRegion:ct,signingService:ut}){const dt=ct??await this.regionProvider(),{shortDate:ht,longDate:pt}=formatDate(st),ft=createScope(ht,dt,ut??this.service),mt=await getPayloadHash({headers:{},body:it},this.sha256),gt=new this.sha256;gt.update(rt);const xt=toHex(await gt.digest()),yt=[EVENT_ALGORITHM_IDENTIFIER,pt,ft,lt,xt,mt].join(`
`);return this.signString(yt,{signingDate:st,signingRegion:dt,signingService:ut})}async signMessage(rt,{signingDate:it=new Date,signingRegion:st,signingService:lt}){return this.signEvent({headers:this.headerMarshaller.format(rt.message.headers),payload:rt.message.body},{signingDate:it,signingRegion:st,signingService:lt,priorSignature:rt.priorSignature}).then(ut=>({message:rt.message,signature:ut}))}async signString(rt,{signingDate:it=new Date,signingRegion:st,signingService:lt}={}){const ct=await this.credentialProvider();this.validateResolvedCredentials(ct);const ut=st??await this.regionProvider(),{shortDate:dt}=formatDate(it),ht=new this.sha256(await this.getSigningKey(ct,ut,dt,lt));return ht.update(toUint8Array(rt)),toHex(await ht.digest())}async signRequest(rt,{signingDate:it=new Date,signableHeaders:st,unsignableHeaders:lt,signingRegion:ct,signingService:ut}={}){const dt=await this.credentialProvider();this.validateResolvedCredentials(dt);const ht=ct??await this.regionProvider(),pt=prepareRequest(rt),{longDate:ft,shortDate:mt}=formatDate(it),gt=createScope(mt,ht,ut??this.service);pt.headers[AMZ_DATE_HEADER]=ft,dt.sessionToken&&(pt.headers[TOKEN_HEADER]=dt.sessionToken);const xt=await getPayloadHash(pt,this.sha256);!hasHeader$1(SHA256_HEADER,pt.headers)&&this.applyChecksum&&(pt.headers[SHA256_HEADER]=xt);const yt=getCanonicalHeaders(pt,lt,st),vt=await this.getSignature(ft,gt,this.getSigningKey(dt,ht,mt,ut),this.createCanonicalRequest(pt,yt,xt));return pt.headers[AUTH_HEADER]=`${ALGORITHM_IDENTIFIER} Credential=${dt.accessKeyId}/${gt}, SignedHeaders=${getCanonicalHeaderList(yt)}, Signature=${vt}`,pt}createCanonicalRequest(rt,it,st){const lt=Object.keys(it).sort();return`${rt.method}
${this.getCanonicalPath(rt)}
${getCanonicalQuery(rt)}
${lt.map(ct=>`${ct}:${it[ct]}`).join(`
`)}

${lt.join(";")}
${st}`}async createStringToSign(rt,it,st){const lt=new this.sha256;lt.update(toUint8Array(st));const ct=await lt.digest();return`${ALGORITHM_IDENTIFIER}
${rt}
${it}
${toHex(ct)}`}getCanonicalPath({path:rt}){if(this.uriEscapePath){const it=[];for(const ct of rt.split("/"))(ct==null?void 0:ct.length)!==0&&ct!=="."&&(ct===".."?it.pop():it.push(ct));const st=`${rt!=null&&rt.startsWith("/")?"/":""}${it.join("/")}${it.length>0&&(rt!=null&&rt.endsWith("/"))?"/":""}`;return encodeURIComponent(st).replace(/%2F/g,"/")}return rt}async getSignature(rt,it,st,lt){const ct=await this.createStringToSign(rt,it,lt),ut=new this.sha256(await st);return ut.update(toUint8Array(ct)),toHex(await ut.digest())}getSigningKey(rt,it,st,lt){return getSigningKey(this.sha256,rt,st,it,lt||this.service)}validateResolvedCredentials(rt){if(typeof rt!="object"||typeof rt.accessKeyId!="string"||typeof rt.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const formatDate=nt=>{const rt=iso8601(nt).replace(/[\-:]/g,"");return{longDate:rt,shortDate:rt.slice(0,8)}},getCanonicalHeaderList=nt=>Object.keys(nt).sort().join(";");var SelectorType;(function(nt){nt.ENV="env",nt.CONFIG="shared config entry"})(SelectorType||(SelectorType={}));const S3_EXPRESS_BUCKET_TYPE="Directory",S3_EXPRESS_BACKEND="S3Express",S3_EXPRESS_AUTH_SCHEME="sigv4-s3express",SESSION_TOKEN_QUERY_PARAM="X-Amz-S3session-Token",SESSION_TOKEN_HEADER=SESSION_TOKEN_QUERY_PARAM.toLowerCase();class SignatureV4S3Express extends SignatureV4{async signWithCredentials(rt,it,st){const lt=getCredentialsWithoutSessionToken(it);rt.headers[SESSION_TOKEN_HEADER]=it.sessionToken;const ct=this;return setSingleOverride(ct,lt),ct.signRequest(rt,st??{})}async presignWithCredentials(rt,it,st){const lt=getCredentialsWithoutSessionToken(it);return delete rt.headers[SESSION_TOKEN_HEADER],rt.headers[SESSION_TOKEN_QUERY_PARAM]=it.sessionToken,rt.query=rt.query??{},rt.query[SESSION_TOKEN_QUERY_PARAM]=it.sessionToken,setSingleOverride(this,lt),this.presign(rt,st)}}function getCredentialsWithoutSessionToken(nt){return{accessKeyId:nt.accessKeyId,secretAccessKey:nt.secretAccessKey,expiration:nt.expiration}}function setSingleOverride(nt,rt){const it=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),st=nt.credentialProvider,lt=()=>(clearTimeout(it),nt.credentialProvider=st,Promise.resolve(rt));nt.credentialProvider=lt}const s3ExpressMiddleware=nt=>(rt,it)=>async st=>{var lt,ct,ut,dt,ht;if(it.endpointV2){const pt=it.endpointV2,ft=((ut=(ct=(lt=pt.properties)==null?void 0:lt.authSchemes)==null?void 0:ct[0])==null?void 0:ut.name)===S3_EXPRESS_AUTH_SCHEME;if((((dt=pt.properties)==null?void 0:dt.backend)===S3_EXPRESS_BACKEND||((ht=pt.properties)==null?void 0:ht.bucketType)===S3_EXPRESS_BUCKET_TYPE)&&(it.isS3ExpressBucket=!0),ft){const gt=st.input.Bucket;if(gt){const xt=await nt.s3ExpressIdentityProvider.getS3ExpressIdentity(await nt.credentials(),{Bucket:gt});it.s3ExpressIdentity=xt,HttpRequest.isInstance(st.request)&&xt.sessionToken&&(st.request.headers[SESSION_TOKEN_HEADER]=xt.sessionToken)}}}return rt(st)},s3ExpressMiddlewareOptions={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},getS3ExpressPlugin=nt=>({applyToStack:rt=>{rt.add(s3ExpressMiddleware(nt),s3ExpressMiddlewareOptions)}}),resolveS3Config=(nt,{session:rt})=>{const[it,st]=rt;return{...nt,forcePathStyle:nt.forcePathStyle??!1,useAccelerateEndpoint:nt.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:nt.disableMultiregionAccessPoints??!1,followRegionRedirects:nt.followRegionRedirects??!1,s3ExpressIdentityProvider:nt.s3ExpressIdentityProvider??new S3ExpressIdentityProviderImpl(async lt=>it().send(new st({Bucket:lt,SessionMode:"ReadWrite"})))}},validate$1=nt=>typeof nt=="string"&&nt.indexOf("arn:")===0&&nt.split(":").length>=6;function validateBucketNameMiddleware(){return nt=>async rt=>{const{input:{Bucket:it}}=rt;if(typeof it=="string"&&!validate$1(it)&&it.indexOf("/")>=0){const st=new Error(`Bucket name shouldn't contain '/', received '${it}'`);throw st.name="InvalidBucketName",st}return nt({...rt})}}const validateBucketNameMiddlewareOptions={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},getValidateBucketNamePlugin=nt=>({applyToStack:rt=>{rt.add(validateBucketNameMiddleware(),validateBucketNameMiddlewareOptions)}}),memoize=(nt,rt,it)=>{let st,lt,ct,ut=!1;const dt=async()=>{lt||(lt=nt());try{st=await lt,ct=!0,ut=!1}finally{lt=void 0}return st};return rt===void 0?async ht=>((!ct||ht!=null&&ht.forceRefresh)&&(st=await dt()),st):async ht=>((!ct||ht!=null&&ht.forceRefresh)&&(st=await dt()),ut?st:it&&!it(st)?(ut=!0,st):(rt(st)&&await dt(),st))},CREDENTIAL_EXPIRE_WINDOW=3e5,resolveAwsAuthConfig=nt=>{const rt=nt.credentials?normalizeCredentialProvider(nt.credentials):nt.credentialDefaultProvider(Object.assign({},nt,{parentClientConfig:nt})),{signingEscapePath:it=!0,systemClockOffset:st=nt.systemClockOffset||0,sha256:lt}=nt;let ct;return nt.signer?ct=normalizeProvider(nt.signer):nt.regionInfoProvider?ct=()=>normalizeProvider(nt.region)().then(async ut=>[await nt.regionInfoProvider(ut,{useFipsEndpoint:await nt.useFipsEndpoint(),useDualstackEndpoint:await nt.useDualstackEndpoint()})||{},ut]).then(([ut,dt])=>{const{signingRegion:ht,signingService:pt}=ut;nt.signingRegion=nt.signingRegion||ht||dt,nt.signingName=nt.signingName||pt||nt.serviceId;const ft={...nt,credentials:rt,region:nt.signingRegion,service:nt.signingName,sha256:lt,uriEscapePath:it},mt=nt.signerConstructor||SignatureV4;return new mt(ft)}):ct=async ut=>{ut=Object.assign({},{name:"sigv4",signingName:nt.signingName||nt.defaultSigningName,signingRegion:await normalizeProvider(nt.region)(),properties:{}},ut);const dt=ut.signingRegion,ht=ut.signingName;nt.signingRegion=nt.signingRegion||dt,nt.signingName=nt.signingName||ht||nt.serviceId;const pt={...nt,credentials:rt,region:nt.signingRegion,service:nt.signingName,sha256:lt,uriEscapePath:it},ft=nt.signerConstructor||SignatureV4;return new ft(pt)},{...nt,systemClockOffset:st,signingEscapePath:it,credentials:rt,signer:ct}},normalizeCredentialProvider=nt=>typeof nt=="function"?memoize(nt,rt=>rt.expiration!==void 0&&rt.expiration.getTime()-Date.now()<CREDENTIAL_EXPIRE_WINDOW,rt=>rt.expiration!==void 0):normalizeProvider(nt),getSkewCorrectedDate=nt=>new Date(Date.now()+nt),isClockSkewed=(nt,rt)=>Math.abs(getSkewCorrectedDate(rt).getTime()-nt)>=3e5,getUpdatedSystemClockOffset=(nt,rt)=>{const it=Date.parse(nt);return isClockSkewed(it,rt)?it-Date.now():rt},awsAuthMiddleware=nt=>(rt,it)=>async function(st){var mt,gt,xt,yt;if(!HttpRequest.isInstance(st.request))return rt(st);const lt=(xt=(gt=(mt=it.endpointV2)==null?void 0:mt.properties)==null?void 0:gt.authSchemes)==null?void 0:xt[0],ct=(lt==null?void 0:lt.name)==="sigv4a"?(yt=lt==null?void 0:lt.signingRegionSet)==null?void 0:yt.join(","):void 0,ut=await nt.signer(lt);let dt;const ht={signingDate:getSkewCorrectedDate(nt.systemClockOffset),signingRegion:ct||it.signing_region,signingService:it.signing_service};if(it.s3ExpressIdentity){if(dt=await ut.signWithCredentials(st.request,it.s3ExpressIdentity,ht),dt.headers["X-Amz-Security-Token"]||dt.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.")}else dt=await ut.sign(st.request,ht);const pt=await rt({...st,request:dt}).catch(vt=>{const St=vt.ServerTime??getDateHeader(vt.$response);throw St&&(nt.systemClockOffset=getUpdatedSystemClockOffset(St,nt.systemClockOffset)),vt}),ft=getDateHeader(pt.response);return ft&&(nt.systemClockOffset=getUpdatedSystemClockOffset(ft,nt.systemClockOffset)),pt},getDateHeader=nt=>{var rt,it;return HttpResponse.isInstance(nt)?((rt=nt.headers)==null?void 0:rt.date)??((it=nt.headers)==null?void 0:it.Date):void 0},awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},getAwsAuthPlugin=nt=>({applyToStack:rt=>{rt.addRelativeTo(awsAuthMiddleware(nt),awsAuthMiddlewareOptions)}});function resolveUserAgentConfig(nt){return{...nt,customUserAgent:typeof nt.customUserAgent=="string"?[[nt.customUserAgent]]:nt.customUserAgent}}const IP_V4_REGEX=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),isIpAddress=nt=>IP_V4_REGEX.test(nt)||nt.startsWith("[")&&nt.endsWith("]"),VALID_HOST_LABEL_REGEX=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),isValidHostLabel=(nt,rt=!1)=>{if(!rt)return VALID_HOST_LABEL_REGEX.test(nt);const it=nt.split(".");for(const st of it)if(!isValidHostLabel(st))return!1;return!0},customEndpointFunctions={},debugId="endpoints";function toDebugString(nt){return typeof nt!="object"||nt==null?nt:"ref"in nt?`$${toDebugString(nt.ref)}`:"fn"in nt?`${nt.fn}(${(nt.argv||[]).map(toDebugString).join(", ")})`:JSON.stringify(nt,null,2)}class EndpointError extends Error{constructor(rt){super(rt),this.name="EndpointError"}}const booleanEquals=(nt,rt)=>nt===rt,getAttrPathList=nt=>{const rt=nt.split("."),it=[];for(const st of rt){const lt=st.indexOf("[");if(lt!==-1){if(st.indexOf("]")!==st.length-1)throw new EndpointError(`Path: '${nt}' does not end with ']'`);const ct=st.slice(lt+1,-1);if(Number.isNaN(parseInt(ct)))throw new EndpointError(`Invalid array index: '${ct}' in path: '${nt}'`);lt!==0&&it.push(st.slice(0,lt)),it.push(ct)}else it.push(st)}return it},getAttr=(nt,rt)=>getAttrPathList(rt).reduce((it,st)=>{if(typeof it!="object")throw new EndpointError(`Index '${st}' in '${rt}' not found in '${JSON.stringify(nt)}'`);return Array.isArray(it)?it[parseInt(st)]:it[st]},nt),isSet=nt=>nt!=null,not=nt=>!nt,DEFAULT_PORTS={[EndpointURLScheme.HTTP]:80,[EndpointURLScheme.HTTPS]:443},parseURL=nt=>{const rt=(()=>{try{if(nt instanceof URL)return nt;if(typeof nt=="object"&&"hostname"in nt){const{hostname:gt,port:xt,protocol:yt="",path:vt="",query:St={}}=nt,Et=new URL(`${yt}//${gt}${xt?`:${xt}`:""}${vt}`);return Et.search=Object.entries(St).map(([wt,Rt])=>`${wt}=${Rt}`).join("&"),Et}return new URL(nt)}catch{return null}})();if(!rt)return console.error(`Unable to parse ${JSON.stringify(nt)} as a whatwg URL.`),null;const it=rt.href,{host:st,hostname:lt,pathname:ct,protocol:ut,search:dt}=rt;if(dt)return null;const ht=ut.slice(0,-1);if(!Object.values(EndpointURLScheme).includes(ht))return null;const pt=isIpAddress(lt),ft=it.includes(`${st}:${DEFAULT_PORTS[ht]}`)||typeof nt=="string"&&nt.includes(`${st}:${DEFAULT_PORTS[ht]}`),mt=`${st}${ft?`:${DEFAULT_PORTS[ht]}`:""}`;return{scheme:ht,authority:mt,path:ct,normalizedPath:ct.endsWith("/")?ct:`${ct}/`,isIp:pt}},stringEquals=(nt,rt)=>nt===rt,substring=(nt,rt,it,st)=>rt>=it||nt.length<it?null:st?nt.substring(nt.length-it,nt.length-rt):nt.substring(rt,it),uriEncode=nt=>encodeURIComponent(nt).replace(/[!*'()]/g,rt=>`%${rt.charCodeAt(0).toString(16).toUpperCase()}`),endpointFunctions={booleanEquals,getAttr,isSet,isValidHostLabel,not,parseURL,stringEquals,substring,uriEncode},evaluateTemplate=(nt,rt)=>{const it=[],st={...rt.endpointParams,...rt.referenceRecord};let lt=0;for(;lt<nt.length;){const ct=nt.indexOf("{",lt);if(ct===-1){it.push(nt.slice(lt));break}it.push(nt.slice(lt,ct));const ut=nt.indexOf("}",ct);if(ut===-1){it.push(nt.slice(ct));break}nt[ct+1]==="{"&&nt[ut+1]==="}"&&(it.push(nt.slice(ct+1,ut)),lt=ut+2);const dt=nt.substring(ct+1,ut);if(dt.includes("#")){const[ht,pt]=dt.split("#");it.push(getAttr(st[ht],pt))}else it.push(st[dt]);lt=ut+1}return it.join("")},getReferenceValue=({ref:nt},rt)=>({...rt.endpointParams,...rt.referenceRecord})[nt],evaluateExpression=(nt,rt,it)=>{if(typeof nt=="string")return evaluateTemplate(nt,it);if(nt.fn)return callFunction(nt,it);if(nt.ref)return getReferenceValue(nt,it);throw new EndpointError(`'${rt}': ${String(nt)} is not a string, function or reference.`)},callFunction=({fn:nt,argv:rt},it)=>{const st=rt.map(ct=>["boolean","number"].includes(typeof ct)?ct:evaluateExpression(ct,"arg",it)),lt=nt.split(".");return lt[0]in customEndpointFunctions&&lt[1]!=null?customEndpointFunctions[lt[0]][lt[1]](...st):endpointFunctions[nt](...st)},evaluateCondition=({assign:nt,...rt},it)=>{var lt,ct;if(nt&&nt in it.referenceRecord)throw new EndpointError(`'${nt}' is already defined in Reference Record.`);const st=callFunction(rt,it);return(ct=(lt=it.logger)==null?void 0:lt.debug)==null||ct.call(lt,debugId,`evaluateCondition: ${toDebugString(rt)} = ${toDebugString(st)}`),{result:st===""?!0:!!st,...nt!=null&&{toAssign:{name:nt,value:st}}}},evaluateConditions=(nt=[],rt)=>{var st,lt;const it={};for(const ct of nt){const{result:ut,toAssign:dt}=evaluateCondition(ct,{...rt,referenceRecord:{...rt.referenceRecord,...it}});if(!ut)return{result:ut};dt&&(it[dt.name]=dt.value,(lt=(st=rt.logger)==null?void 0:st.debug)==null||lt.call(st,debugId,`assign: ${dt.name} := ${toDebugString(dt.value)}`))}return{result:!0,referenceRecord:it}},getEndpointHeaders=(nt,rt)=>Object.entries(nt).reduce((it,[st,lt])=>({...it,[st]:lt.map(ct=>{const ut=evaluateExpression(ct,"Header value entry",rt);if(typeof ut!="string")throw new EndpointError(`Header '${st}' value '${ut}' is not a string`);return ut})}),{}),getEndpointProperty=(nt,rt)=>{if(Array.isArray(nt))return nt.map(it=>getEndpointProperty(it,rt));switch(typeof nt){case"string":return evaluateTemplate(nt,rt);case"object":if(nt===null)throw new EndpointError(`Unexpected endpoint property: ${nt}`);return getEndpointProperties(nt,rt);case"boolean":return nt;default:throw new EndpointError(`Unexpected endpoint property type: ${typeof nt}`)}},getEndpointProperties=(nt,rt)=>Object.entries(nt).reduce((it,[st,lt])=>({...it,[st]:getEndpointProperty(lt,rt)}),{}),getEndpointUrl=(nt,rt)=>{const it=evaluateExpression(nt,"Endpoint URL",rt);if(typeof it=="string")try{return new URL(it)}catch(st){throw console.error(`Failed to construct URL with ${it}`,st),st}throw new EndpointError(`Endpoint URL must be a string, got ${typeof it}`)},evaluateEndpointRule=(nt,rt)=>{var ft,mt;const{conditions:it,endpoint:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(!lt)return;const ut={...rt,referenceRecord:{...rt.referenceRecord,...ct}},{url:dt,properties:ht,headers:pt}=st;return(mt=(ft=rt.logger)==null?void 0:ft.debug)==null||mt.call(ft,debugId,`Resolving endpoint from template: ${toDebugString(st)}`),{...pt!=null&&{headers:getEndpointHeaders(pt,ut)},...ht!=null&&{properties:getEndpointProperties(ht,ut)},url:getEndpointUrl(dt,ut)}},evaluateErrorRule=(nt,rt)=>{const{conditions:it,error:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(lt)throw new EndpointError(evaluateExpression(st,"Error",{...rt,referenceRecord:{...rt.referenceRecord,...ct}}))},evaluateTreeRule=(nt,rt)=>{const{conditions:it,rules:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(lt)return evaluateRules(st,{...rt,referenceRecord:{...rt.referenceRecord,...ct}})},evaluateRules=(nt,rt)=>{for(const it of nt)if(it.type==="endpoint"){const st=evaluateEndpointRule(it,rt);if(st)return st}else if(it.type==="error")evaluateErrorRule(it,rt);else if(it.type==="tree"){const st=evaluateTreeRule(it,rt);if(st)return st}else throw new EndpointError(`Unknown endpoint rule: ${it}`);throw new EndpointError("Rules evaluation failed")},resolveEndpoint=(nt,rt)=>{var pt,ft,mt,gt,xt;const{endpointParams:it,logger:st}=rt,{parameters:lt,rules:ct}=nt;(ft=(pt=rt.logger)==null?void 0:pt.debug)==null||ft.call(pt,`${debugId} Initial EndpointParams: ${toDebugString(it)}`);const ut=Object.entries(lt).filter(([,yt])=>yt.default!=null).map(([yt,vt])=>[yt,vt.default]);if(ut.length>0)for(const[yt,vt]of ut)it[yt]=it[yt]??vt;const dt=Object.entries(lt).filter(([,yt])=>yt.required).map(([yt])=>yt);for(const yt of dt)if(it[yt]==null)throw new EndpointError(`Missing required parameter: '${yt}'`);const ht=evaluateRules(ct,{endpointParams:it,logger:st,referenceRecord:{}});if((mt=rt.endpointParams)!=null&&mt.Endpoint)try{const yt=new URL(rt.endpointParams.Endpoint),{protocol:vt,port:St}=yt;ht.url.protocol=vt,ht.url.port=St}catch{}return(xt=(gt=rt.logger)==null?void 0:gt.debug)==null||xt.call(gt,`${debugId} Resolved endpoint: ${toDebugString(ht)}`),ht},isVirtualHostableS3Bucket=(nt,rt=!1)=>{if(rt){for(const it of nt.split("."))if(!isVirtualHostableS3Bucket(it))return!1;return!0}return!(!isValidHostLabel(nt)||nt.length<3||nt.length>63||nt!==nt.toLowerCase()||isIpAddress(nt))},parseArn=nt=>{const rt=nt.split(":");if(rt.length<6)return null;const[it,st,lt,ct,ut,...dt]=rt;return it!=="arn"||st===""||lt===""||dt[0]===""?null:{partition:st,service:lt,region:ct,accountId:ut,resourceId:dt[0].includes("/")?dt[0].split("/"):dt}},partitions=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version$3="1.1",partitionsInfo={partitions,version:version$3};let selectedPartitionsInfo=partitionsInfo;const partition=nt=>{const{partitions:rt}=selectedPartitionsInfo;for(const st of rt){const{regions:lt,outputs:ct}=st;for(const[ut,dt]of Object.entries(lt))if(ut===nt)return{...ct,...dt}}for(const st of rt){const{regionRegex:lt,outputs:ct}=st;if(new RegExp(lt).test(nt))return{...ct}}const it=rt.find(st=>st.id==="aws");if(!it)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...it.outputs}},awsEndpointFunctions={isVirtualHostableS3Bucket,parseArn,partition};customEndpointFunctions.aws=awsEndpointFunctions;const USER_AGENT="user-agent",X_AMZ_USER_AGENT="x-amz-user-agent",SPACE=" ",UA_NAME_SEPARATOR="/",UA_NAME_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,UA_VALUE_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,UA_ESCAPE_CHAR="-",userAgentMiddleware=nt=>(rt,it)=>async st=>{var mt,gt;const{request:lt}=st;if(!HttpRequest.isInstance(lt))return rt(st);const{headers:ct}=lt,ut=((mt=it==null?void 0:it.userAgent)==null?void 0:mt.map(escapeUserAgent))||[],dt=(await nt.defaultUserAgentProvider()).map(escapeUserAgent),ht=((gt=nt==null?void 0:nt.customUserAgent)==null?void 0:gt.map(escapeUserAgent))||[],pt=[].concat([...dt,...ut,...ht]).join(SPACE),ft=[...dt.filter(xt=>xt.startsWith("aws-sdk-")),...ht].join(SPACE);return nt.runtime!=="browser"?(ft&&(ct[X_AMZ_USER_AGENT]=ct[X_AMZ_USER_AGENT]?`${ct[USER_AGENT]} ${ft}`:ft),ct[USER_AGENT]=pt):ct[X_AMZ_USER_AGENT]=pt,rt({...st,request:lt})},escapeUserAgent=nt=>{var ut;const rt=nt[0].split(UA_NAME_SEPARATOR).map(dt=>dt.replace(UA_NAME_ESCAPE_REGEX,UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR),it=(ut=nt[1])==null?void 0:ut.replace(UA_VALUE_ESCAPE_REGEX,UA_ESCAPE_CHAR),st=rt.indexOf(UA_NAME_SEPARATOR),lt=rt.substring(0,st);let ct=rt.substring(st+1);return lt==="api"&&(ct=ct.toLowerCase()),[lt,ct,it].filter(dt=>dt&&dt.length>0).reduce((dt,ht,pt)=>{switch(pt){case 0:return ht;case 1:return`${dt}/${ht}`;default:return`${dt}#${ht}`}},"")},getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},getUserAgentPlugin=nt=>({applyToStack:rt=>{rt.add(userAgentMiddleware(nt),getUserAgentMiddlewareOptions)}}),DEFAULT_USE_DUALSTACK_ENDPOINT=!1,DEFAULT_USE_FIPS_ENDPOINT=!1,isFipsRegion=nt=>typeof nt=="string"&&(nt.startsWith("fips-")||nt.endsWith("-fips")),getRealRegion=nt=>isFipsRegion(nt)?["fips-aws-global","aws-fips"].includes(nt)?"us-east-1":nt.replace(/fips-(dkr-|prod-)?|-fips/,""):nt,resolveRegionConfig=nt=>{const{region:rt,useFipsEndpoint:it}=nt;if(!rt)throw new Error("Region is missing");return{...nt,region:async()=>{if(typeof rt=="string")return getRealRegion(rt);const st=await rt();return getRealRegion(st)},useFipsEndpoint:async()=>{const st=typeof rt=="string"?rt:await rt();return isFipsRegion(st)?!0:typeof it!="function"?Promise.resolve(!!it):it()}}},resolveEventStreamSerdeConfig=nt=>({...nt,eventStreamMarshaller:nt.eventStreamSerdeProvider(nt)}),CONTENT_LENGTH_HEADER="content-length";function contentLengthMiddleware(nt){return rt=>async it=>{const st=it.request;if(HttpRequest.isInstance(st)){const{body:lt,headers:ct}=st;if(lt&&Object.keys(ct).map(ut=>ut.toLowerCase()).indexOf(CONTENT_LENGTH_HEADER)===-1)try{const ut=nt(lt);st.headers={...st.headers,[CONTENT_LENGTH_HEADER]:String(ut)}}catch{}}return rt({...it,request:st})}}const contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},getContentLengthPlugin=nt=>({applyToStack:rt=>{rt.add(contentLengthMiddleware(nt.bodyLengthChecker),contentLengthMiddlewareOptions)}}),resolveParamsForS3=async nt=>{const rt=(nt==null?void 0:nt.Bucket)||"";if(typeof nt.Bucket=="string"&&(nt.Bucket=rt.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),isArnBucketName(rt)){if(nt.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!isDnsCompatibleBucketName(rt)||rt.indexOf(".")!==-1&&!String(nt.Endpoint).startsWith("http:")||rt.toLowerCase()!==rt||rt.length<3)&&(nt.ForcePathStyle=!0);return nt.DisableMultiRegionAccessPoints&&(nt.disableMultiRegionAccessPoints=!0,nt.DisableMRAP=!0),nt},DOMAIN_PATTERN=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,IP_ADDRESS_PATTERN=/(\d+\.){3}\d+/,DOTS_PATTERN=/\.\./,isDnsCompatibleBucketName=nt=>DOMAIN_PATTERN.test(nt)&&!IP_ADDRESS_PATTERN.test(nt)&&!DOTS_PATTERN.test(nt),isArnBucketName=nt=>{const[rt,it,st,lt,ct,ut]=nt.split(":"),dt=rt==="arn"&&nt.split(":").length>=6,ht=[rt,it,st,ct,ut].filter(Boolean).length===5;if(dt&&!ht)throw new Error(`Invalid ARN: ${nt} was an invalid ARN.`);return rt==="arn"&&!!it&&!!st&&!!ct&&!!ut},createConfigValueProvider=(nt,rt,it)=>{const st=async()=>{const lt=it[nt]??it[rt];return typeof lt=="function"?lt():lt};return nt==="credentialScope"||rt==="CredentialScope"?async()=>{const lt=typeof it.credentials=="function"?await it.credentials():it.credentials;return(lt==null?void 0:lt.credentialScope)??(lt==null?void 0:lt.CredentialScope)}:nt==="endpoint"||rt==="endpoint"?async()=>{const lt=await st();if(lt&&typeof lt=="object"){if("url"in lt)return lt.url.href;if("hostname"in lt){const{protocol:ct,hostname:ut,port:dt,path:ht}=lt;return`${ct}//${ut}${dt?":"+dt:""}${ht}`}}return lt}:st},getEndpointFromConfig=async nt=>{};function parseQueryString(nt){const rt={};if(nt=nt.replace(/^\?/,""),nt)for(const it of nt.split("&")){let[st,lt=null]=it.split("=");st=decodeURIComponent(st),lt&&(lt=decodeURIComponent(lt)),st in rt?Array.isArray(rt[st])?rt[st].push(lt):rt[st]=[rt[st],lt]:rt[st]=lt}return rt}const parseUrl=nt=>{if(typeof nt=="string")return parseUrl(new URL(nt));const{hostname:rt,pathname:it,port:st,protocol:lt,search:ct}=nt;let ut;return ct&&(ut=parseQueryString(ct)),{hostname:rt,port:st?parseInt(st):void 0,protocol:lt,path:it,query:ut}},toEndpointV1=nt=>typeof nt=="object"?"url"in nt?parseUrl(nt.url):nt:parseUrl(nt),getEndpointFromInstructions=async(nt,rt,it,st)=>{if(!it.endpoint){const ut=await getEndpointFromConfig(it.serviceId||"");ut&&(it.endpoint=()=>Promise.resolve(toEndpointV1(ut)))}const lt=await resolveParams(nt,rt,it);if(typeof it.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return it.endpointProvider(lt,st)},resolveParams=async(nt,rt,it)=>{var ct;const st={},lt=((ct=rt==null?void 0:rt.getEndpointParameterInstructions)==null?void 0:ct.call(rt))||{};for(const[ut,dt]of Object.entries(lt))switch(dt.type){case"staticContextParams":st[ut]=dt.value;break;case"contextParams":st[ut]=nt[dt.name];break;case"clientContextParams":case"builtInParams":st[ut]=await createConfigValueProvider(dt.name,ut,it)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(dt))}return Object.keys(lt).length===0&&Object.assign(st,it),String(it.serviceId).toLowerCase()==="s3"&&await resolveParamsForS3(st),st},endpointMiddleware=({config:nt,instructions:rt})=>(it,st)=>async lt=>{var dt,ht,pt;const ct=await getEndpointFromInstructions(lt.input,{getEndpointParameterInstructions(){return rt}},{...nt},st);st.endpointV2=ct,st.authSchemes=(dt=ct.properties)==null?void 0:dt.authSchemes;const ut=(ht=st.authSchemes)==null?void 0:ht[0];if(ut){st.signing_region=ut.signingRegion,st.signing_service=ut.signingName;const ft=getSmithyContext(st),mt=(pt=ft==null?void 0:ft.selectedHttpAuthScheme)==null?void 0:pt.httpAuthOption;mt&&(mt.signingProperties=Object.assign(mt.signingProperties||{},{signing_region:ut.signingRegion,signingRegion:ut.signingRegion,signing_service:ut.signingName,signingName:ut.signingName,signingRegionSet:ut.signingRegionSet},ut.properties))}return it({...lt})},deserializerMiddleware=(nt,rt)=>(it,st)=>async lt=>{const{response:ct}=await it(lt);try{const ut=await rt(ct,nt);return{response:ct,output:ut}}catch(ut){if(Object.defineProperty(ut,"$response",{value:ct}),!("$metadata"in ut)){const dt="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";ut.message+=`
  `+dt}throw ut}},serializerMiddleware=(nt,rt)=>(it,st)=>async lt=>{var dt;const ct=(dt=st.endpointV2)!=null&&dt.url&&nt.urlParser?async()=>nt.urlParser(st.endpointV2.url):nt.endpoint;if(!ct)throw new Error("No valid endpoint provider available.");const ut=await rt(lt.input,{...nt,endpoint:ct});return it({...lt,request:ut})},deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function getSerdePlugin(nt,rt,it){return{applyToStack:st=>{st.add(deserializerMiddleware(nt,it),deserializerMiddlewareOption),st.add(serializerMiddleware(nt,rt),serializerMiddlewareOption)}}}const endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:serializerMiddlewareOption.name},getEndpointPlugin=(nt,rt)=>({applyToStack:it=>{it.addRelativeTo(endpointMiddleware({config:nt,instructions:rt}),endpointMiddlewareOptions)}}),resolveEndpointConfig=nt=>{const rt=nt.tls??!0,{endpoint:it}=nt,st=it!=null?async()=>toEndpointV1(await normalizeProvider(it)()):void 0;return{...nt,endpoint:st,tls:rt,isCustomEndpoint:!!it,useDualstackEndpoint:normalizeProvider(nt.useDualstackEndpoint??!1),useFipsEndpoint:normalizeProvider(nt.useFipsEndpoint??!1)}};var RETRY_MODES;(function(nt){nt.STANDARD="standard",nt.ADAPTIVE="adaptive"})(RETRY_MODES||(RETRY_MODES={}));const DEFAULT_MAX_ATTEMPTS=3,DEFAULT_RETRY_MODE=RETRY_MODES.STANDARD,THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],TRANSIENT_ERROR_CODES=["TimeoutError","RequestTimeout","RequestTimeoutException"],TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504],NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],isThrottlingError=nt=>{var rt,it;return((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)===429||THROTTLING_ERROR_CODES.includes(nt.name)||((it=nt.$retryable)==null?void 0:it.throttling)==!0},isTransientError=nt=>{var rt;return TRANSIENT_ERROR_CODES.includes(nt.name)||NODEJS_TIMEOUT_ERROR_CODES.includes((nt==null?void 0:nt.code)||"")||TRANSIENT_ERROR_STATUS_CODES.includes(((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)||0)},isServerError=nt=>{var rt;if(((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)!==void 0){const it=nt.$metadata.httpStatusCode;return 500<=it&&it<=599&&!isTransientError(nt)}return!1};class DefaultRateLimiter{constructor(rt){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(rt==null?void 0:rt.beta)??.7,this.minCapacity=(rt==null?void 0:rt.minCapacity)??1,this.minFillRate=(rt==null?void 0:rt.minFillRate)??.5,this.scaleConstant=(rt==null?void 0:rt.scaleConstant)??.4,this.smooth=(rt==null?void 0:rt.smooth)??.8;const it=this.getCurrentTimeInSeconds();this.lastThrottleTime=it,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(rt){if(this.enabled){if(this.refillTokenBucket(),rt>this.currentCapacity){const it=(rt-this.currentCapacity)/this.fillRate*1e3;await new Promise(st=>setTimeout(st,it))}this.currentCapacity=this.currentCapacity-rt}}refillTokenBucket(){const rt=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=rt;return}const it=(rt-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+it),this.lastTimestamp=rt}updateClientSendingRate(rt){let it;if(this.updateMeasuredRate(),isThrottlingError(rt)){const lt=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=lt,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),it=this.cubicThrottle(lt),this.enableTokenBucket()}else this.calculateTimeWindow(),it=this.cubicSuccess(this.getCurrentTimeInSeconds());const st=Math.min(it,2*this.measuredTxRate);this.updateTokenBucketRate(st)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(rt){return this.getPrecise(rt*this.beta)}cubicSuccess(rt){return this.getPrecise(this.scaleConstant*Math.pow(rt-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(rt){this.refillTokenBucket(),this.fillRate=Math.max(rt,this.minFillRate),this.maxCapacity=Math.max(rt,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const rt=this.getCurrentTimeInSeconds(),it=Math.floor(rt*2)/2;if(this.requestCount++,it>this.lastTxRateBucket){const st=this.requestCount/(it-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(st*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=it}}getPrecise(rt){return parseFloat(rt.toFixed(8))}}const DEFAULT_RETRY_DELAY_BASE=100,MAXIMUM_RETRY_DELAY=20*1e3,THROTTLING_RETRY_DELAY_BASE=500,INITIAL_RETRY_TOKENS=500,RETRY_COST=5,TIMEOUT_RETRY_COST=10,NO_RETRY_INCREMENT=1,INVOCATION_ID_HEADER="amz-sdk-invocation-id",REQUEST_HEADER="amz-sdk-request",getDefaultRetryBackoffStrategy=()=>{let nt=DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:st=>Math.floor(Math.min(MAXIMUM_RETRY_DELAY,Math.random()*2**st*nt)),setDelayBase:st=>{nt=st}}},createDefaultRetryToken=({retryDelay:nt,retryCount:rt,retryCost:it})=>({getRetryCount:()=>rt,getRetryDelay:()=>Math.min(MAXIMUM_RETRY_DELAY,nt),getRetryCost:()=>it});class StandardRetryStrategy{constructor(rt){this.maxAttempts=rt,this.mode=RETRY_MODES.STANDARD,this.capacity=INITIAL_RETRY_TOKENS,this.retryBackoffStrategy=getDefaultRetryBackoffStrategy(),this.maxAttemptsProvider=typeof rt=="function"?rt:async()=>rt}async acquireInitialRetryToken(rt){return createDefaultRetryToken({retryDelay:DEFAULT_RETRY_DELAY_BASE,retryCount:0})}async refreshRetryTokenForRetry(rt,it){const st=await this.getMaxAttempts();if(this.shouldRetry(rt,it,st)){const lt=it.errorType;this.retryBackoffStrategy.setDelayBase(lt==="THROTTLING"?THROTTLING_RETRY_DELAY_BASE:DEFAULT_RETRY_DELAY_BASE);const ct=this.retryBackoffStrategy.computeNextBackoffDelay(rt.getRetryCount()),ut=it.retryAfterHint?Math.max(it.retryAfterHint.getTime()-Date.now()||0,ct):ct,dt=this.getCapacityCost(lt);return this.capacity-=dt,createDefaultRetryToken({retryDelay:ut,retryCount:rt.getRetryCount()+1,retryCost:dt})}throw new Error("No retry token available")}recordSuccess(rt){this.capacity=Math.max(INITIAL_RETRY_TOKENS,this.capacity+(rt.getRetryCost()??NO_RETRY_INCREMENT))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${DEFAULT_MAX_ATTEMPTS}`),DEFAULT_MAX_ATTEMPTS}}shouldRetry(rt,it,st){return rt.getRetryCount()+1<st&&this.capacity>=this.getCapacityCost(it.errorType)&&this.isRetryableError(it.errorType)}getCapacityCost(rt){return rt==="TRANSIENT"?TIMEOUT_RETRY_COST:RETRY_COST}isRetryableError(rt){return rt==="THROTTLING"||rt==="TRANSIENT"}}class AdaptiveRetryStrategy{constructor(rt,it){this.maxAttemptsProvider=rt,this.mode=RETRY_MODES.ADAPTIVE;const{rateLimiter:st}=it??{};this.rateLimiter=st??new DefaultRateLimiter,this.standardRetryStrategy=new StandardRetryStrategy(rt)}async acquireInitialRetryToken(rt){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(rt)}async refreshRetryTokenForRetry(rt,it){return this.rateLimiter.updateClientSendingRate(it),this.standardRetryStrategy.refreshRetryTokenForRetry(rt,it)}recordSuccess(rt){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(rt)}}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(nt){return typeof nt=="string"&&REGEX.test(nt)}var byteToHex=[];for(var i$7=0;i$7<256;++i$7)byteToHex.push((i$7+256).toString(16).substr(1));function stringify(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=(byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]).toLowerCase();if(!validate(it))throw TypeError("Stringified UUID is invalid");return it}function v4(nt,rt,it){nt=nt||{};var st=nt.random||(nt.rng||rng)();if(st[6]=st[6]&15|64,st[8]=st[8]&63|128,rt){it=it||0;for(var lt=0;lt<16;++lt)rt[it+lt]=st[lt];return rt}return stringify(st)}const asSdkError=nt=>nt instanceof Error?nt:nt instanceof Object?Object.assign(new Error,nt):typeof nt=="string"?new Error(nt):new Error(`AWS SDK error wrapper for ${nt}`),resolveRetryConfig=nt=>{const{retryStrategy:rt}=nt,it=normalizeProvider(nt.maxAttempts??DEFAULT_MAX_ATTEMPTS);return{...nt,maxAttempts:it,retryStrategy:async()=>rt||(await normalizeProvider(nt.retryMode)()===RETRY_MODES.ADAPTIVE?new AdaptiveRetryStrategy(it):new StandardRetryStrategy(it))}},isStreamingPayload=nt=>(nt==null?void 0:nt.body)instanceof ReadableStream,retryMiddleware=nt=>(rt,it)=>async st=>{var ut;let lt=await nt.retryStrategy();const ct=await nt.maxAttempts();if(isRetryStrategyV2(lt)){lt=lt;let dt=await lt.acquireInitialRetryToken(it.partition_id),ht=new Error,pt=0,ft=0;const{request:mt}=st,gt=HttpRequest.isInstance(mt);for(gt&&(mt.headers[INVOCATION_ID_HEADER]=v4());;)try{gt&&(mt.headers[REQUEST_HEADER]=`attempt=${pt+1}; max=${ct}`);const{response:xt,output:yt}=await rt(st);return lt.recordSuccess(dt),yt.$metadata.attempts=pt+1,yt.$metadata.totalRetryDelay=ft,{response:xt,output:yt}}catch(xt){const yt=getRetryErrorInfo(xt);if(ht=asSdkError(xt),gt&&isStreamingPayload(mt))throw(ut=it.logger instanceof NoOpLogger?console:it.logger)==null||ut.warn("An error was encountered in a non-retryable streaming request."),ht;try{dt=await lt.refreshRetryTokenForRetry(dt,yt)}catch{throw ht.$metadata||(ht.$metadata={}),ht.$metadata.attempts=pt+1,ht.$metadata.totalRetryDelay=ft,ht}pt=dt.getRetryCount();const vt=dt.getRetryDelay();ft+=vt,await new Promise(St=>setTimeout(St,vt))}}else return lt=lt,lt!=null&&lt.mode&&(it.userAgent=[...it.userAgent||[],["cfg/retry-mode",lt.mode]]),lt.retry(rt,st)},isRetryStrategyV2=nt=>typeof nt.acquireInitialRetryToken<"u"&&typeof nt.refreshRetryTokenForRetry<"u"&&typeof nt.recordSuccess<"u",getRetryErrorInfo=nt=>{const rt={errorType:getRetryErrorType(nt)},it=getRetryAfterHint(nt.$response);return it&&(rt.retryAfterHint=it),rt},getRetryErrorType=nt=>isThrottlingError(nt)?"THROTTLING":isTransientError(nt)?"TRANSIENT":isServerError(nt)?"SERVER_ERROR":"CLIENT_ERROR",retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},getRetryPlugin=nt=>({applyToStack:rt=>{rt.add(retryMiddleware(nt),retryMiddlewareOptions)}}),getRetryAfterHint=nt=>{if(!HttpResponse.isInstance(nt))return;const rt=Object.keys(nt.headers).find(ct=>ct.toLowerCase()==="retry-after");if(!rt)return;const it=nt.headers[rt],st=Number(it);return Number.isNaN(st)?new Date(it):new Date(st*1e3)},resolveClientEndpointParameters=nt=>({...nt,useFipsEndpoint:nt.useFipsEndpoint??!1,useDualstackEndpoint:nt.useDualstackEndpoint??!1,forcePathStyle:nt.forcePathStyle??!1,useAccelerateEndpoint:nt.useAccelerateEndpoint??!1,useGlobalEndpoint:nt.useGlobalEndpoint??!1,disableMultiregionAccessPoints:nt.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),commonParams={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class S3ServiceException extends ServiceException{constructor(rt){super(rt),Object.setPrototypeOf(this,S3ServiceException.prototype)}}class NoSuchUpload extends S3ServiceException{constructor(rt){super({name:"NoSuchUpload",$fault:"client",...rt}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,NoSuchUpload.prototype)}}class ObjectNotInActiveTierError extends S3ServiceException{constructor(rt){super({name:"ObjectNotInActiveTierError",$fault:"client",...rt}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,ObjectNotInActiveTierError.prototype)}}class BucketAlreadyExists extends S3ServiceException{constructor(rt){super({name:"BucketAlreadyExists",$fault:"client",...rt}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,BucketAlreadyExists.prototype)}}class BucketAlreadyOwnedByYou extends S3ServiceException{constructor(rt){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...rt}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,BucketAlreadyOwnedByYou.prototype)}}class NoSuchBucket extends S3ServiceException{constructor(rt){super({name:"NoSuchBucket",$fault:"client",...rt}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,NoSuchBucket.prototype)}}var AnalyticsFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(AnalyticsFilter||(AnalyticsFilter={}));var LifecycleRuleFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.ObjectSizeGreaterThan!==void 0?it.ObjectSizeGreaterThan(rt.ObjectSizeGreaterThan):rt.ObjectSizeLessThan!==void 0?it.ObjectSizeLessThan(rt.ObjectSizeLessThan):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(LifecycleRuleFilter||(LifecycleRuleFilter={}));var MetricsFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.AccessPointArn!==void 0?it.AccessPointArn(rt.AccessPointArn):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(MetricsFilter||(MetricsFilter={}));var ReplicationRuleFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(ReplicationRuleFilter||(ReplicationRuleFilter={}));class InvalidObjectState extends S3ServiceException{constructor(rt){super({name:"InvalidObjectState",$fault:"client",...rt}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,InvalidObjectState.prototype),this.StorageClass=rt.StorageClass,this.AccessTier=rt.AccessTier}}class NoSuchKey extends S3ServiceException{constructor(rt){super({name:"NoSuchKey",$fault:"client",...rt}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,NoSuchKey.prototype)}}class NotFound extends S3ServiceException{constructor(rt){super({name:"NotFound",$fault:"client",...rt}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,NotFound.prototype)}}const SessionCredentialsFilterSensitiveLog=nt=>({...nt,...nt.SecretAccessKey&&{SecretAccessKey:SENSITIVE_STRING},...nt.SessionToken&&{SessionToken:SENSITIVE_STRING}}),CreateSessionOutputFilterSensitiveLog=nt=>({...nt,...nt.Credentials&&{Credentials:SessionCredentialsFilterSensitiveLog(nt.Credentials)}});endpointMiddlewareOptions.name;serializerMiddlewareOption.name;retryMiddlewareOptions.name;function requestBuilder(nt,rt){return new RequestBuilder(nt,rt)}class RequestBuilder{constructor(rt,it){this.input=rt,this.context=it,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:rt,protocol:it="https",port:st,path:lt}=await this.context.endpoint();this.path=lt;for(const ct of this.resolvePathStack)ct(this.path);return new HttpRequest({protocol:it,hostname:this.hostname||rt,port:st,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(rt){return this.hostname=rt,this}bp(rt){return this.resolvePathStack.push(it=>{this.path=`${it!=null&&it.endsWith("/")?it.slice(0,-1):it||""}`+rt}),this}p(rt,it,st,lt){return this.resolvePathStack.push(ct=>{this.path=resolvedPath(ct,this.input,rt,it,st,lt)}),this}h(rt){return this.headers=rt,this}q(rt){return this.query=rt,this}b(rt){return this.body=rt,this}m(rt){return this.method=rt,this}}var validator$2={},util$3={};(function(nt){const rt=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",it=rt+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",st="["+rt+"]["+it+"]*",lt=new RegExp("^"+st+"$"),ct=function(dt,ht){const pt=[];let ft=ht.exec(dt);for(;ft;){const mt=[];mt.startIndex=ht.lastIndex-ft[0].length;const gt=ft.length;for(let xt=0;xt<gt;xt++)mt.push(ft[xt]);pt.push(mt),ft=ht.exec(dt)}return pt},ut=function(dt){const ht=lt.exec(dt);return!(ht===null||typeof ht>"u")};nt.isExist=function(dt){return typeof dt<"u"},nt.isEmptyObject=function(dt){return Object.keys(dt).length===0},nt.merge=function(dt,ht,pt){if(ht){const ft=Object.keys(ht),mt=ft.length;for(let gt=0;gt<mt;gt++)pt==="strict"?dt[ft[gt]]=[ht[ft[gt]]]:dt[ft[gt]]=ht[ft[gt]]}},nt.getValue=function(dt){return nt.isExist(dt)?dt:""},nt.isName=ut,nt.getAllMatches=ct,nt.nameRegexp=st})(util$3);const util$2=util$3,defaultOptions$2={allowBooleanAttributes:!1,unpairedTags:[]};validator$2.validate=function(nt,rt){rt=Object.assign({},defaultOptions$2,rt);const it=[];let st=!1,lt=!1;nt[0]==="\uFEFF"&&(nt=nt.substr(1));for(let ct=0;ct<nt.length;ct++)if(nt[ct]==="<"&&nt[ct+1]==="?"){if(ct+=2,ct=readPI(nt,ct),ct.err)return ct}else if(nt[ct]==="<"){let ut=ct;if(ct++,nt[ct]==="!"){ct=readCommentAndCDATA(nt,ct);continue}else{let dt=!1;nt[ct]==="/"&&(dt=!0,ct++);let ht="";for(;ct<nt.length&&nt[ct]!==">"&&nt[ct]!==" "&&nt[ct]!=="	"&&nt[ct]!==`
`&&nt[ct]!=="\r";ct++)ht+=nt[ct];if(ht=ht.trim(),ht[ht.length-1]==="/"&&(ht=ht.substring(0,ht.length-1),ct--),!validateTagName(ht)){let mt;return ht.trim().length===0?mt="Invalid space after '<'.":mt="Tag '"+ht+"' is an invalid name.",getErrorObject("InvalidTag",mt,getLineNumberForPosition(nt,ct))}const pt=readAttributeStr(nt,ct);if(pt===!1)return getErrorObject("InvalidAttr","Attributes for '"+ht+"' have open quote.",getLineNumberForPosition(nt,ct));let ft=pt.value;if(ct=pt.index,ft[ft.length-1]==="/"){const mt=ct-ft.length;ft=ft.substring(0,ft.length-1);const gt=validateAttributeString(ft,rt);if(gt===!0)st=!0;else return getErrorObject(gt.err.code,gt.err.msg,getLineNumberForPosition(nt,mt+gt.err.line))}else if(dt)if(pt.tagClosed){if(ft.trim().length>0)return getErrorObject("InvalidTag","Closing tag '"+ht+"' can't have attributes or invalid starting.",getLineNumberForPosition(nt,ut));{const mt=it.pop();if(ht!==mt.tagName){let gt=getLineNumberForPosition(nt,mt.tagStartPos);return getErrorObject("InvalidTag","Expected closing tag '"+mt.tagName+"' (opened in line "+gt.line+", col "+gt.col+") instead of closing tag '"+ht+"'.",getLineNumberForPosition(nt,ut))}it.length==0&&(lt=!0)}}else return getErrorObject("InvalidTag","Closing tag '"+ht+"' doesn't have proper closing.",getLineNumberForPosition(nt,ct));else{const mt=validateAttributeString(ft,rt);if(mt!==!0)return getErrorObject(mt.err.code,mt.err.msg,getLineNumberForPosition(nt,ct-ft.length+mt.err.line));if(lt===!0)return getErrorObject("InvalidXml","Multiple possible root nodes found.",getLineNumberForPosition(nt,ct));rt.unpairedTags.indexOf(ht)!==-1||it.push({tagName:ht,tagStartPos:ut}),st=!0}for(ct++;ct<nt.length;ct++)if(nt[ct]==="<")if(nt[ct+1]==="!"){ct++,ct=readCommentAndCDATA(nt,ct);continue}else if(nt[ct+1]==="?"){if(ct=readPI(nt,++ct),ct.err)return ct}else break;else if(nt[ct]==="&"){const mt=validateAmpersand(nt,ct);if(mt==-1)return getErrorObject("InvalidChar","char '&' is not expected.",getLineNumberForPosition(nt,ct));ct=mt}else if(lt===!0&&!isWhiteSpace(nt[ct]))return getErrorObject("InvalidXml","Extra text at the end",getLineNumberForPosition(nt,ct));nt[ct]==="<"&&ct--}}else{if(isWhiteSpace(nt[ct]))continue;return getErrorObject("InvalidChar","char '"+nt[ct]+"' is not expected.",getLineNumberForPosition(nt,ct))}if(st){if(it.length==1)return getErrorObject("InvalidTag","Unclosed tag '"+it[0].tagName+"'.",getLineNumberForPosition(nt,it[0].tagStartPos));if(it.length>0)return getErrorObject("InvalidXml","Invalid '"+JSON.stringify(it.map(ct=>ct.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return getErrorObject("InvalidXml","Start tag expected.",1);return!0};function isWhiteSpace(nt){return nt===" "||nt==="	"||nt===`
`||nt==="\r"}function readPI(nt,rt){const it=rt;for(;rt<nt.length;rt++)if(nt[rt]=="?"||nt[rt]==" "){const st=nt.substr(it,rt-it);if(rt>5&&st==="xml")return getErrorObject("InvalidXml","XML declaration allowed only at the start of the document.",getLineNumberForPosition(nt,rt));if(nt[rt]=="?"&&nt[rt+1]==">"){rt++;break}else continue}return rt}function readCommentAndCDATA(nt,rt){if(nt.length>rt+5&&nt[rt+1]==="-"&&nt[rt+2]==="-"){for(rt+=3;rt<nt.length;rt++)if(nt[rt]==="-"&&nt[rt+1]==="-"&&nt[rt+2]===">"){rt+=2;break}}else if(nt.length>rt+8&&nt[rt+1]==="D"&&nt[rt+2]==="O"&&nt[rt+3]==="C"&&nt[rt+4]==="T"&&nt[rt+5]==="Y"&&nt[rt+6]==="P"&&nt[rt+7]==="E"){let it=1;for(rt+=8;rt<nt.length;rt++)if(nt[rt]==="<")it++;else if(nt[rt]===">"&&(it--,it===0))break}else if(nt.length>rt+9&&nt[rt+1]==="["&&nt[rt+2]==="C"&&nt[rt+3]==="D"&&nt[rt+4]==="A"&&nt[rt+5]==="T"&&nt[rt+6]==="A"&&nt[rt+7]==="["){for(rt+=8;rt<nt.length;rt++)if(nt[rt]==="]"&&nt[rt+1]==="]"&&nt[rt+2]===">"){rt+=2;break}}return rt}const doubleQuote='"',singleQuote="'";function readAttributeStr(nt,rt){let it="",st="",lt=!1;for(;rt<nt.length;rt++){if(nt[rt]===doubleQuote||nt[rt]===singleQuote)st===""?st=nt[rt]:st!==nt[rt]||(st="");else if(nt[rt]===">"&&st===""){lt=!0;break}it+=nt[rt]}return st!==""?!1:{value:it,index:rt,tagClosed:lt}}const validAttrStrRegxp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function validateAttributeString(nt,rt){const it=util$2.getAllMatches(nt,validAttrStrRegxp),st={};for(let lt=0;lt<it.length;lt++){if(it[lt][1].length===0)return getErrorObject("InvalidAttr","Attribute '"+it[lt][2]+"' has no space in starting.",getPositionFromMatch(it[lt]));if(it[lt][3]!==void 0&&it[lt][4]===void 0)return getErrorObject("InvalidAttr","Attribute '"+it[lt][2]+"' is without value.",getPositionFromMatch(it[lt]));if(it[lt][3]===void 0&&!rt.allowBooleanAttributes)return getErrorObject("InvalidAttr","boolean attribute '"+it[lt][2]+"' is not allowed.",getPositionFromMatch(it[lt]));const ct=it[lt][2];if(!validateAttrName(ct))return getErrorObject("InvalidAttr","Attribute '"+ct+"' is an invalid name.",getPositionFromMatch(it[lt]));if(!st.hasOwnProperty(ct))st[ct]=1;else return getErrorObject("InvalidAttr","Attribute '"+ct+"' is repeated.",getPositionFromMatch(it[lt]))}return!0}function validateNumberAmpersand(nt,rt){let it=/\d/;for(nt[rt]==="x"&&(rt++,it=/[\da-fA-F]/);rt<nt.length;rt++){if(nt[rt]===";")return rt;if(!nt[rt].match(it))break}return-1}function validateAmpersand(nt,rt){if(rt++,nt[rt]===";")return-1;if(nt[rt]==="#")return rt++,validateNumberAmpersand(nt,rt);let it=0;for(;rt<nt.length;rt++,it++)if(!(nt[rt].match(/\w/)&&it<20)){if(nt[rt]===";")break;return-1}return rt}function getErrorObject(nt,rt,it){return{err:{code:nt,msg:rt,line:it.line||it,col:it.col}}}function validateAttrName(nt){return util$2.isName(nt)}function validateTagName(nt){return util$2.isName(nt)}function getLineNumberForPosition(nt,rt){const it=nt.substring(0,rt).split(/\r?\n/);return{line:it.length,col:it[it.length-1].length+1}}function getPositionFromMatch(nt){return nt.startIndex+nt[1].length}var OptionsBuilder={};const defaultOptions$1={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(nt,rt){return rt},attributeValueProcessor:function(nt,rt){return rt},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(nt,rt,it){return nt}},buildOptions$1=function(nt){return Object.assign({},defaultOptions$1,nt)};OptionsBuilder.buildOptions=buildOptions$1;OptionsBuilder.defaultOptions=defaultOptions$1;class XmlNode{constructor(rt){this.tagname=rt,this.child=[],this[":@"]={}}add(rt,it){rt==="__proto__"&&(rt="#__proto__"),this.child.push({[rt]:it})}addChild(rt){rt.tagname==="__proto__"&&(rt.tagname="#__proto__"),rt[":@"]&&Object.keys(rt[":@"]).length>0?this.child.push({[rt.tagname]:rt.child,":@":rt[":@"]}):this.child.push({[rt.tagname]:rt.child})}}var xmlNode$1=XmlNode;const util$1=util$3;function readDocType$1(nt,rt){const it={};if(nt[rt+3]==="O"&&nt[rt+4]==="C"&&nt[rt+5]==="T"&&nt[rt+6]==="Y"&&nt[rt+7]==="P"&&nt[rt+8]==="E"){rt=rt+9;let st=1,lt=!1,ct=!1,ut="";for(;rt<nt.length;rt++)if(nt[rt]==="<"&&!ct){if(lt&&isEntity(nt,rt))rt+=7,[entityName,val,rt]=readEntityExp(nt,rt+1),val.indexOf("&")===-1&&(it[validateEntityName(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(lt&&isElement$1(nt,rt))rt+=8;else if(lt&&isAttlist(nt,rt))rt+=8;else if(lt&&isNotation(nt,rt))rt+=9;else if(isComment)ct=!0;else throw new Error("Invalid DOCTYPE");st++,ut=""}else if(nt[rt]===">"){if(ct?nt[rt-1]==="-"&&nt[rt-2]==="-"&&(ct=!1,st--):st--,st===0)break}else nt[rt]==="["?lt=!0:ut+=nt[rt];if(st!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:it,i:rt}}function readEntityExp(nt,rt){let it="";for(;rt<nt.length&&nt[rt]!=="'"&&nt[rt]!=='"';rt++)it+=nt[rt];if(it=it.trim(),it.indexOf(" ")!==-1)throw new Error("External entites are not supported");const st=nt[rt++];let lt="";for(;rt<nt.length&&nt[rt]!==st;rt++)lt+=nt[rt];return[it,lt,rt]}function isComment(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="-"&&nt[rt+3]==="-"}function isEntity(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="E"&&nt[rt+3]==="N"&&nt[rt+4]==="T"&&nt[rt+5]==="I"&&nt[rt+6]==="T"&&nt[rt+7]==="Y"}function isElement$1(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="E"&&nt[rt+3]==="L"&&nt[rt+4]==="E"&&nt[rt+5]==="M"&&nt[rt+6]==="E"&&nt[rt+7]==="N"&&nt[rt+8]==="T"}function isAttlist(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="A"&&nt[rt+3]==="T"&&nt[rt+4]==="T"&&nt[rt+5]==="L"&&nt[rt+6]==="I"&&nt[rt+7]==="S"&&nt[rt+8]==="T"}function isNotation(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="N"&&nt[rt+3]==="O"&&nt[rt+4]==="T"&&nt[rt+5]==="A"&&nt[rt+6]==="T"&&nt[rt+7]==="I"&&nt[rt+8]==="O"&&nt[rt+9]==="N"}function validateEntityName(nt){if(util$1.isName(nt))return nt;throw new Error(`Invalid entity name ${nt}`)}var DocTypeReader=readDocType$1;const hexRegex=/^[-+]?0x[a-fA-F0-9]+$/,numRegex=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const consider={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function toNumber$1(nt,rt={}){if(rt=Object.assign({},consider,rt),!nt||typeof nt!="string")return nt;let it=nt.trim();if(rt.skipLike!==void 0&&rt.skipLike.test(it))return nt;if(rt.hex&&hexRegex.test(it))return Number.parseInt(it,16);{const st=numRegex.exec(it);if(st){const lt=st[1],ct=st[2];let ut=trimZeros(st[3]);const dt=st[4]||st[6];if(!rt.leadingZeros&&ct.length>0&&lt&&it[2]!==".")return nt;if(!rt.leadingZeros&&ct.length>0&&!lt&&it[1]!==".")return nt;{const ht=Number(it),pt=""+ht;return pt.search(/[eE]/)!==-1||dt?rt.eNotation?ht:nt:it.indexOf(".")!==-1?pt==="0"&&ut===""||pt===ut||lt&&pt==="-"+ut?ht:nt:ct?ut===pt||lt+ut===pt?ht:nt:it===pt||it===lt+pt?ht:nt}}else return nt}}function trimZeros(nt){return nt&&nt.indexOf(".")!==-1&&(nt=nt.replace(/0+$/,""),nt==="."?nt="0":nt[0]==="."?nt="0"+nt:nt[nt.length-1]==="."&&(nt=nt.substr(0,nt.length-1))),nt}var strnum=toNumber$1;const util=util$3,xmlNode=xmlNode$1,readDocType=DocTypeReader,toNumber=strnum;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,util.nameRegexp);let OrderedObjParser$1=class{constructor(rt){this.options=rt,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=addExternalEntities,this.parseXml=parseXml,this.parseTextData=parseTextData,this.resolveNameSpace=resolveNameSpace,this.buildAttributesMap=buildAttributesMap,this.isItStopNode=isItStopNode,this.replaceEntitiesValue=replaceEntitiesValue$1,this.readStopNodeData=readStopNodeData,this.saveTextToParentTag=saveTextToParentTag,this.addChild=addChild}};function addExternalEntities(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];this.lastEntities[st]={regex:new RegExp("&"+st+";","g"),val:nt[st]}}}function parseTextData(nt,rt,it,st,lt,ct,ut){if(nt!==void 0&&(this.options.trimValues&&!st&&(nt=nt.trim()),nt.length>0)){ut||(nt=this.replaceEntitiesValue(nt));const dt=this.options.tagValueProcessor(rt,nt,it,lt,ct);return dt==null?nt:typeof dt!=typeof nt||dt!==nt?dt:this.options.trimValues?parseValue(nt,this.options.parseTagValue,this.options.numberParseOptions):nt.trim()===nt?parseValue(nt,this.options.parseTagValue,this.options.numberParseOptions):nt}}function resolveNameSpace(nt){if(this.options.removeNSPrefix){const rt=nt.split(":"),it=nt.charAt(0)==="/"?"/":"";if(rt[0]==="xmlns")return"";rt.length===2&&(nt=it+rt[1])}return nt}const attrsRegx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function buildAttributesMap(nt,rt,it){if(!this.options.ignoreAttributes&&typeof nt=="string"){const st=util.getAllMatches(nt,attrsRegx),lt=st.length,ct={};for(let ut=0;ut<lt;ut++){const dt=this.resolveNameSpace(st[ut][1]);let ht=st[ut][4],pt=this.options.attributeNamePrefix+dt;if(dt.length)if(this.options.transformAttributeName&&(pt=this.options.transformAttributeName(pt)),pt==="__proto__"&&(pt="#__proto__"),ht!==void 0){this.options.trimValues&&(ht=ht.trim()),ht=this.replaceEntitiesValue(ht);const ft=this.options.attributeValueProcessor(dt,ht,rt);ft==null?ct[pt]=ht:typeof ft!=typeof ht||ft!==ht?ct[pt]=ft:ct[pt]=parseValue(ht,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ct[pt]=!0)}if(!Object.keys(ct).length)return;if(this.options.attributesGroupName){const ut={};return ut[this.options.attributesGroupName]=ct,ut}return ct}}const parseXml=function(nt){nt=nt.replace(/\r\n?/g,`
`);const rt=new xmlNode("!xml");let it=rt,st="",lt="";for(let ct=0;ct<nt.length;ct++)if(nt[ct]==="<")if(nt[ct+1]==="/"){const dt=findClosingIndex(nt,">",ct,"Closing Tag is not closed.");let ht=nt.substring(ct+2,dt).trim();if(this.options.removeNSPrefix){const mt=ht.indexOf(":");mt!==-1&&(ht=ht.substr(mt+1))}this.options.transformTagName&&(ht=this.options.transformTagName(ht)),it&&(st=this.saveTextToParentTag(st,it,lt));const pt=lt.substring(lt.lastIndexOf(".")+1);if(ht&&this.options.unpairedTags.indexOf(ht)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${ht}>`);let ft=0;pt&&this.options.unpairedTags.indexOf(pt)!==-1?(ft=lt.lastIndexOf(".",lt.lastIndexOf(".")-1),this.tagsNodeStack.pop()):ft=lt.lastIndexOf("."),lt=lt.substring(0,ft),it=this.tagsNodeStack.pop(),st="",ct=dt}else if(nt[ct+1]==="?"){let dt=readTagExp(nt,ct,!1,"?>");if(!dt)throw new Error("Pi Tag is not closed.");if(st=this.saveTextToParentTag(st,it,lt),!(this.options.ignoreDeclaration&&dt.tagName==="?xml"||this.options.ignorePiTags)){const ht=new xmlNode(dt.tagName);ht.add(this.options.textNodeName,""),dt.tagName!==dt.tagExp&&dt.attrExpPresent&&(ht[":@"]=this.buildAttributesMap(dt.tagExp,lt,dt.tagName)),this.addChild(it,ht,lt)}ct=dt.closeIndex+1}else if(nt.substr(ct+1,3)==="!--"){const dt=findClosingIndex(nt,"-->",ct+4,"Comment is not closed.");if(this.options.commentPropName){const ht=nt.substring(ct+4,dt-2);st=this.saveTextToParentTag(st,it,lt),it.add(this.options.commentPropName,[{[this.options.textNodeName]:ht}])}ct=dt}else if(nt.substr(ct+1,2)==="!D"){const dt=readDocType(nt,ct);this.docTypeEntities=dt.entities,ct=dt.i}else if(nt.substr(ct+1,2)==="!["){const dt=findClosingIndex(nt,"]]>",ct,"CDATA is not closed.")-2,ht=nt.substring(ct+9,dt);if(st=this.saveTextToParentTag(st,it,lt),this.options.cdataPropName)it.add(this.options.cdataPropName,[{[this.options.textNodeName]:ht}]);else{let pt=this.parseTextData(ht,it.tagname,lt,!0,!1,!0);pt==null&&(pt=""),it.add(this.options.textNodeName,pt)}ct=dt+2}else{let dt=readTagExp(nt,ct,this.options.removeNSPrefix),ht=dt.tagName,pt=dt.tagExp,ft=dt.attrExpPresent,mt=dt.closeIndex;this.options.transformTagName&&(ht=this.options.transformTagName(ht)),it&&st&&it.tagname!=="!xml"&&(st=this.saveTextToParentTag(st,it,lt,!1));const gt=it;if(gt&&this.options.unpairedTags.indexOf(gt.tagname)!==-1&&(it=this.tagsNodeStack.pop(),lt=lt.substring(0,lt.lastIndexOf("."))),ht!==rt.tagname&&(lt+=lt?"."+ht:ht),this.isItStopNode(this.options.stopNodes,lt,ht)){let xt="";if(pt.length>0&&pt.lastIndexOf("/")===pt.length-1)ct=dt.closeIndex;else if(this.options.unpairedTags.indexOf(ht)!==-1)ct=dt.closeIndex;else{const vt=this.readStopNodeData(nt,ht,mt+1);if(!vt)throw new Error(`Unexpected end of ${ht}`);ct=vt.i,xt=vt.tagContent}const yt=new xmlNode(ht);ht!==pt&&ft&&(yt[":@"]=this.buildAttributesMap(pt,lt,ht)),xt&&(xt=this.parseTextData(xt,ht,lt,!0,ft,!0,!0)),lt=lt.substr(0,lt.lastIndexOf(".")),yt.add(this.options.textNodeName,xt),this.addChild(it,yt,lt)}else{if(pt.length>0&&pt.lastIndexOf("/")===pt.length-1){ht[ht.length-1]==="/"?(ht=ht.substr(0,ht.length-1),pt=ht):pt=pt.substr(0,pt.length-1),this.options.transformTagName&&(ht=this.options.transformTagName(ht));const xt=new xmlNode(ht);ht!==pt&&ft&&(xt[":@"]=this.buildAttributesMap(pt,lt,ht)),this.addChild(it,xt,lt),lt=lt.substr(0,lt.lastIndexOf("."))}else{const xt=new xmlNode(ht);this.tagsNodeStack.push(it),ht!==pt&&ft&&(xt[":@"]=this.buildAttributesMap(pt,lt,ht)),this.addChild(it,xt,lt),it=xt}st="",ct=mt}}else st+=nt[ct];return rt.child};function addChild(nt,rt,it){const st=this.options.updateTag(rt.tagname,it,rt[":@"]);st===!1||(typeof st=="string"&&(rt.tagname=st),nt.addChild(rt))}const replaceEntitiesValue$1=function(nt){if(this.options.processEntities){for(let rt in this.docTypeEntities){const it=this.docTypeEntities[rt];nt=nt.replace(it.regx,it.val)}for(let rt in this.lastEntities){const it=this.lastEntities[rt];nt=nt.replace(it.regex,it.val)}if(this.options.htmlEntities)for(let rt in this.htmlEntities){const it=this.htmlEntities[rt];nt=nt.replace(it.regex,it.val)}nt=nt.replace(this.ampEntity.regex,this.ampEntity.val)}return nt};function saveTextToParentTag(nt,rt,it,st){return nt&&(st===void 0&&(st=Object.keys(rt.child).length===0),nt=this.parseTextData(nt,rt.tagname,it,!1,rt[":@"]?Object.keys(rt[":@"]).length!==0:!1,st),nt!==void 0&&nt!==""&&rt.add(this.options.textNodeName,nt),nt=""),nt}function isItStopNode(nt,rt,it){const st="*."+it;for(const lt in nt){const ct=nt[lt];if(st===ct||rt===ct)return!0}return!1}function tagExpWithClosingIndex(nt,rt,it=">"){let st,lt="";for(let ct=rt;ct<nt.length;ct++){let ut=nt[ct];if(st)ut===st&&(st="");else if(ut==='"'||ut==="'")st=ut;else if(ut===it[0])if(it[1]){if(nt[ct+1]===it[1])return{data:lt,index:ct}}else return{data:lt,index:ct};else ut==="	"&&(ut=" ");lt+=ut}}function findClosingIndex(nt,rt,it,st){const lt=nt.indexOf(rt,it);if(lt===-1)throw new Error(st);return lt+rt.length-1}function readTagExp(nt,rt,it,st=">"){const lt=tagExpWithClosingIndex(nt,rt+1,st);if(!lt)return;let ct=lt.data;const ut=lt.index,dt=ct.search(/\s/);let ht=ct,pt=!0;if(dt!==-1&&(ht=ct.substr(0,dt).replace(/\s\s*$/,""),ct=ct.substr(dt+1)),it){const ft=ht.indexOf(":");ft!==-1&&(ht=ht.substr(ft+1),pt=ht!==lt.data.substr(ft+1))}return{tagName:ht,tagExp:ct,closeIndex:ut,attrExpPresent:pt}}function readStopNodeData(nt,rt,it){const st=it;let lt=1;for(;it<nt.length;it++)if(nt[it]==="<")if(nt[it+1]==="/"){const ct=findClosingIndex(nt,">",it,`${rt} is not closed`);if(nt.substring(it+2,ct).trim()===rt&&(lt--,lt===0))return{tagContent:nt.substring(st,it),i:ct};it=ct}else if(nt[it+1]==="?")it=findClosingIndex(nt,"?>",it+1,"StopNode is not closed.");else if(nt.substr(it+1,3)==="!--")it=findClosingIndex(nt,"-->",it+3,"StopNode is not closed.");else if(nt.substr(it+1,2)==="![")it=findClosingIndex(nt,"]]>",it,"StopNode is not closed.")-2;else{const ct=readTagExp(nt,it,">");ct&&((ct&&ct.tagName)===rt&&ct.tagExp[ct.tagExp.length-1]!=="/"&&lt++,it=ct.closeIndex)}}function parseValue(nt,rt,it){if(rt&&typeof nt=="string"){const st=nt.trim();return st==="true"?!0:st==="false"?!1:toNumber(nt,it)}else return util.isExist(nt)?nt:""}var OrderedObjParser_1=OrderedObjParser$1,node2json={};function prettify$1(nt,rt){return compress(nt,rt)}function compress(nt,rt,it){let st;const lt={};for(let ct=0;ct<nt.length;ct++){const ut=nt[ct],dt=propName$1(ut);let ht="";if(it===void 0?ht=dt:ht=it+"."+dt,dt===rt.textNodeName)st===void 0?st=ut[dt]:st+=""+ut[dt];else{if(dt===void 0)continue;if(ut[dt]){let pt=compress(ut[dt],rt,ht);const ft=isLeafTag(pt,rt);ut[":@"]?assignAttributes(pt,ut[":@"],ht,rt):Object.keys(pt).length===1&&pt[rt.textNodeName]!==void 0&&!rt.alwaysCreateTextNode?pt=pt[rt.textNodeName]:Object.keys(pt).length===0&&(rt.alwaysCreateTextNode?pt[rt.textNodeName]="":pt=""),lt[dt]!==void 0&&lt.hasOwnProperty(dt)?(Array.isArray(lt[dt])||(lt[dt]=[lt[dt]]),lt[dt].push(pt)):rt.isArray(dt,ht,ft)?lt[dt]=[pt]:lt[dt]=pt}}}return typeof st=="string"?st.length>0&&(lt[rt.textNodeName]=st):st!==void 0&&(lt[rt.textNodeName]=st),lt}function propName$1(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];if(st!==":@")return st}}function assignAttributes(nt,rt,it,st){if(rt){const lt=Object.keys(rt),ct=lt.length;for(let ut=0;ut<ct;ut++){const dt=lt[ut];st.isArray(dt,it+"."+dt,!0,!0)?nt[dt]=[rt[dt]]:nt[dt]=rt[dt]}}}function isLeafTag(nt,rt){const{textNodeName:it}=rt,st=Object.keys(nt).length;return!!(st===0||st===1&&(nt[it]||typeof nt[it]=="boolean"||nt[it]===0))}node2json.prettify=prettify$1;const{buildOptions}=OptionsBuilder,OrderedObjParser=OrderedObjParser_1,{prettify}=node2json,validator$1=validator$2;let XMLParser$1=class{constructor(rt){this.externalEntities={},this.options=buildOptions(rt)}parse(rt,it){if(typeof rt!="string")if(rt.toString)rt=rt.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(it){it===!0&&(it={});const ct=validator$1.validate(rt,it);if(ct!==!0)throw Error(`${ct.err.msg}:${ct.err.line}:${ct.err.col}`)}const st=new OrderedObjParser(this.options);st.addExternalEntities(this.externalEntities);const lt=st.parseXml(rt);return this.options.preserveOrder||lt===void 0?lt:prettify(lt,this.options)}addEntity(rt,it){if(it.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(rt.indexOf("&")!==-1||rt.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(it==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[rt]=it}};var XMLParser_1=XMLParser$1;const EOL=`
`;function toXml(nt,rt){let it="";return rt.format&&rt.indentBy.length>0&&(it=EOL),arrToStr(nt,rt,"",it)}function arrToStr(nt,rt,it,st){let lt="",ct=!1;for(let ut=0;ut<nt.length;ut++){const dt=nt[ut],ht=propName(dt);let pt="";if(it.length===0?pt=ht:pt=`${it}.${ht}`,ht===rt.textNodeName){let yt=dt[ht];isStopNode(pt,rt)||(yt=rt.tagValueProcessor(ht,yt),yt=replaceEntitiesValue(yt,rt)),ct&&(lt+=st),lt+=yt,ct=!1;continue}else if(ht===rt.cdataPropName){ct&&(lt+=st),lt+=`<![CDATA[${dt[ht][0][rt.textNodeName]}]]>`,ct=!1;continue}else if(ht===rt.commentPropName){lt+=st+`<!--${dt[ht][0][rt.textNodeName]}-->`,ct=!0;continue}else if(ht[0]==="?"){const yt=attr_to_str(dt[":@"],rt),vt=ht==="?xml"?"":st;let St=dt[ht][0][rt.textNodeName];St=St.length!==0?" "+St:"",lt+=vt+`<${ht}${St}${yt}?>`,ct=!0;continue}let ft=st;ft!==""&&(ft+=rt.indentBy);const mt=attr_to_str(dt[":@"],rt),gt=st+`<${ht}${mt}`,xt=arrToStr(dt[ht],rt,pt,ft);rt.unpairedTags.indexOf(ht)!==-1?rt.suppressUnpairedNode?lt+=gt+">":lt+=gt+"/>":(!xt||xt.length===0)&&rt.suppressEmptyNode?lt+=gt+"/>":xt&&xt.endsWith(">")?lt+=gt+`>${xt}${st}</${ht}>`:(lt+=gt+">",xt&&st!==""&&(xt.includes("/>")||xt.includes("</"))?lt+=st+rt.indentBy+xt+st:lt+=xt,lt+=`</${ht}>`),ct=!0}return lt}function propName(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];if(st!==":@")return st}}function attr_to_str(nt,rt){let it="";if(nt&&!rt.ignoreAttributes)for(let st in nt){let lt=rt.attributeValueProcessor(st,nt[st]);lt=replaceEntitiesValue(lt,rt),lt===!0&&rt.suppressBooleanAttributes?it+=` ${st.substr(rt.attributeNamePrefix.length)}`:it+=` ${st.substr(rt.attributeNamePrefix.length)}="${lt}"`}return it}function isStopNode(nt,rt){nt=nt.substr(0,nt.length-rt.textNodeName.length-1);let it=nt.substr(nt.lastIndexOf(".")+1);for(let st in rt.stopNodes)if(rt.stopNodes[st]===nt||rt.stopNodes[st]==="*."+it)return!0;return!1}function replaceEntitiesValue(nt,rt){if(nt&&nt.length>0&&rt.processEntities)for(let it=0;it<rt.entities.length;it++){const st=rt.entities[it];nt=nt.replace(st.regex,st.val)}return nt}var orderedJs2Xml=toXml;const buildFromOrderedJs=orderedJs2Xml,defaultOptions={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(nt,rt){return rt},attributeValueProcessor:function(nt,rt){return rt},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Builder(nt){this.options=Object.assign({},defaultOptions,nt),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.processTextOrObjNode=processTextOrObjNode,this.options.format?(this.indentate=indentate,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Builder.prototype.build=function(nt){return this.options.preserveOrder?buildFromOrderedJs(nt,this.options):(Array.isArray(nt)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(nt={[this.options.arrayNodeName]:nt}),this.j2x(nt,0).val)};Builder.prototype.j2x=function(nt,rt){let it="",st="";for(let lt in nt)if(!(typeof nt[lt]>"u"))if(nt[lt]===null)lt[0]==="?"?st+=this.indentate(rt)+"<"+lt+"?"+this.tagEndChar:st+=this.indentate(rt)+"<"+lt+"/"+this.tagEndChar;else if(nt[lt]instanceof Date)st+=this.buildTextValNode(nt[lt],lt,"",rt);else if(typeof nt[lt]!="object"){const ct=this.isAttribute(lt);if(ct)it+=this.buildAttrPairStr(ct,""+nt[lt]);else if(lt===this.options.textNodeName){let ut=this.options.tagValueProcessor(lt,""+nt[lt]);st+=this.replaceEntitiesValue(ut)}else st+=this.buildTextValNode(nt[lt],lt,"",rt)}else if(Array.isArray(nt[lt])){const ct=nt[lt].length;let ut="";for(let dt=0;dt<ct;dt++){const ht=nt[lt][dt];typeof ht>"u"||(ht===null?lt[0]==="?"?st+=this.indentate(rt)+"<"+lt+"?"+this.tagEndChar:st+=this.indentate(rt)+"<"+lt+"/"+this.tagEndChar:typeof ht=="object"?this.options.oneListGroup?ut+=this.j2x(ht,rt+1).val:ut+=this.processTextOrObjNode(ht,lt,rt):ut+=this.buildTextValNode(ht,lt,"",rt))}this.options.oneListGroup&&(ut=this.buildObjectNode(ut,lt,"",rt)),st+=ut}else if(this.options.attributesGroupName&&lt===this.options.attributesGroupName){const ct=Object.keys(nt[lt]),ut=ct.length;for(let dt=0;dt<ut;dt++)it+=this.buildAttrPairStr(ct[dt],""+nt[lt][ct[dt]])}else st+=this.processTextOrObjNode(nt[lt],lt,rt);return{attrStr:it,val:st}};Builder.prototype.buildAttrPairStr=function(nt,rt){return rt=this.options.attributeValueProcessor(nt,""+rt),rt=this.replaceEntitiesValue(rt),this.options.suppressBooleanAttributes&&rt==="true"?" "+nt:" "+nt+'="'+rt+'"'};function processTextOrObjNode(nt,rt,it){const st=this.j2x(nt,it+1);return nt[this.options.textNodeName]!==void 0&&Object.keys(nt).length===1?this.buildTextValNode(nt[this.options.textNodeName],rt,st.attrStr,it):this.buildObjectNode(st.val,rt,st.attrStr,it)}Builder.prototype.buildObjectNode=function(nt,rt,it,st){if(nt==="")return rt[0]==="?"?this.indentate(st)+"<"+rt+it+"?"+this.tagEndChar:this.indentate(st)+"<"+rt+it+this.closeTag(rt)+this.tagEndChar;{let lt="</"+rt+this.tagEndChar,ct="";return rt[0]==="?"&&(ct="?",lt=""),it&&nt.indexOf("<")===-1?this.indentate(st)+"<"+rt+it+ct+">"+nt+lt:this.options.commentPropName!==!1&&rt===this.options.commentPropName&&ct.length===0?this.indentate(st)+`<!--${nt}-->`+this.newLine:this.indentate(st)+"<"+rt+it+ct+this.tagEndChar+nt+this.indentate(st)+lt}};Builder.prototype.closeTag=function(nt){let rt="";return this.options.unpairedTags.indexOf(nt)!==-1?this.options.suppressUnpairedNode||(rt="/"):this.options.suppressEmptyNode?rt="/":rt=`></${nt}`,rt};Builder.prototype.buildTextValNode=function(nt,rt,it,st){if(this.options.cdataPropName!==!1&&rt===this.options.cdataPropName)return this.indentate(st)+`<![CDATA[${nt}]]>`+this.newLine;if(this.options.commentPropName!==!1&&rt===this.options.commentPropName)return this.indentate(st)+`<!--${nt}-->`+this.newLine;if(rt[0]==="?")return this.indentate(st)+"<"+rt+it+"?"+this.tagEndChar;{let lt=this.options.tagValueProcessor(rt,nt);return lt=this.replaceEntitiesValue(lt),lt===""?this.indentate(st)+"<"+rt+it+this.closeTag(rt)+this.tagEndChar:this.indentate(st)+"<"+rt+it+">"+lt+"</"+rt+this.tagEndChar}};Builder.prototype.replaceEntitiesValue=function(nt){if(nt&&nt.length>0&&this.options.processEntities)for(let rt=0;rt<this.options.entities.length;rt++){const it=this.options.entities[rt];nt=nt.replace(it.regex,it.val)}return nt};function indentate(nt){return this.options.indentBy.repeat(nt)}function isAttribute(nt){return nt.startsWith(this.options.attributeNamePrefix)?nt.substr(this.attrPrefixLen):!1}var json2xml=Builder;const validator=validator$2,XMLParser=XMLParser_1,XMLBuilder=json2xml;var fxp={XMLParser,XMLValidator:validator,XMLBuilder};class ObjectAlreadyInActiveTierError extends S3ServiceException{constructor(rt){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...rt}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,ObjectAlreadyInActiveTierError.prototype)}}var SelectObjectContentEventStream;(function(nt){nt.visit=(rt,it)=>rt.Records!==void 0?it.Records(rt.Records):rt.Stats!==void 0?it.Stats(rt.Stats):rt.Progress!==void 0?it.Progress(rt.Progress):rt.Cont!==void 0?it.Cont(rt.Cont):rt.End!==void 0?it.End(rt.End):it._(rt.$unknown[0],rt.$unknown[1])})(SelectObjectContentEventStream||(SelectObjectContentEventStream={}));const PutObjectOutputFilterSensitiveLog=nt=>({...nt,...nt.SSEKMSKeyId&&{SSEKMSKeyId:SENSITIVE_STRING},...nt.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:SENSITIVE_STRING}}),PutObjectRequestFilterSensitiveLog=nt=>({...nt,...nt.SSECustomerKey&&{SSECustomerKey:SENSITIVE_STRING},...nt.SSEKMSKeyId&&{SSEKMSKeyId:SENSITIVE_STRING},...nt.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:SENSITIVE_STRING}}),se_CreateSessionCommand=async(nt,rt)=>{const it=requestBuilder(nt,rt),st=map$2({},isSerializableHeaderValue,{[_xacsm]:nt[_SM]});it.bp("/"),it.p("Bucket",()=>nt.Bucket,"{Bucket}",!1);const lt=map$2({[_s]:[,""]});return it.m("GET").h(st).q(lt).b(void 0),it.build()},se_PutObjectCommand=async(nt,rt)=>{const it=requestBuilder(nt,rt),st=map$2({},isSerializableHeaderValue,{[_ct]:nt[_CT]||"application/octet-stream",[_xaa]:nt[_ACL],[_cc]:nt[_CC],[_cd]:nt[_CD],[_ce]:nt[_CE],[_cl]:nt[_CL],[_cl_]:[()=>isSerializableHeaderValue(nt[_CLo]),()=>nt[_CLo].toString()],[_cm]:nt[_CMD],[_xasca]:nt[_CA],[_xacc]:nt[_CCRC],[_xacc_]:nt[_CCRCC],[_xacs]:nt[_CSHA],[_xacs_]:nt[_CSHAh],[_e$1]:[()=>isSerializableHeaderValue(nt[_E]),()=>dateToUtcString(nt[_E]).toString()],[_xagfc]:nt[_GFC],[_xagr]:nt[_GR],[_xagra]:nt[_GRACP],[_xagwa]:nt[_GWACP],[_xasse]:nt[_SSE],[_xasc]:nt[_SC],[_xawrl]:nt[_WRL],[_xasseca]:nt[_SSECA],[_xasseck]:nt[_SSECK],[_xasseckm]:nt[_SSECKMD],[_xasseakki]:nt[_SSEKMSKI],[_xassec]:nt[_SSEKMSEC],[_xassebke]:[()=>isSerializableHeaderValue(nt[_BKE]),()=>nt[_BKE].toString()],[_xarp]:nt[_RP],[_xat]:nt[_T],[_xaolm]:nt[_OLM],[_xaolrud]:[()=>isSerializableHeaderValue(nt[_OLRUD]),()=>(nt[_OLRUD].toISOString().split(".")[0]+"Z").toString()],[_xaollh]:nt[_OLLHS],[_xaebo]:nt[_EBO],...nt.Metadata!==void 0&&Object.keys(nt.Metadata).reduce((dt,ht)=>(dt[`x-amz-meta-${ht.toLowerCase()}`]=nt.Metadata[ht],dt),{})});it.bp("/{Key+}"),it.p("Bucket",()=>nt.Bucket,"{Bucket}",!1),it.p("Key",()=>nt.Key,"{Key+}",!0);const lt=map$2({[_xi]:[,"PutObject"]});let ct,ut;return nt.Body!==void 0&&(ut=nt.Body,ct=ut),it.m("PUT").h(st).q(lt).b(ct),it.build()},de_CreateSessionCommand=async(nt,rt)=>{if(nt.statusCode!==200&&nt.statusCode>=300)return de_CommandError(nt,rt);const it=map$2({$metadata:deserializeMetadata(nt)}),st=expectNonNull(expectObject(await parseBody(nt.body,rt)),"body");return st[_C]!=null&&(it[_C]=de_SessionCredentials(st[_C])),it},de_PutObjectCommand=async(nt,rt)=>{if(nt.statusCode!==200&&nt.statusCode>=300)return de_CommandError(nt,rt);const it=map$2({$metadata:deserializeMetadata(nt),[_Exp]:[,nt.headers[_xae]],[_ETa]:[,nt.headers[_eta]],[_CCRC]:[,nt.headers[_xacc]],[_CCRCC]:[,nt.headers[_xacc_]],[_CSHA]:[,nt.headers[_xacs]],[_CSHAh]:[,nt.headers[_xacs_]],[_SSE]:[,nt.headers[_xasse]],[_VI]:[,nt.headers[_xavi]],[_SSECA]:[,nt.headers[_xasseca]],[_SSECKMD]:[,nt.headers[_xasseckm]],[_SSEKMSKI]:[,nt.headers[_xasseakki]],[_SSEKMSEC]:[,nt.headers[_xassec]],[_BKE]:[()=>nt.headers[_xassebke]!==void 0,()=>parseBoolean(nt.headers[_xassebke])],[_RC]:[,nt.headers[_xarc]]});return await collectBody(nt.body,rt),it},de_CommandError=async(nt,rt)=>{const it={...nt,body:await parseErrorBody(nt.body,rt)},st=loadRestXmlErrorCode(nt,it.body);switch(st){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await de_NoSuchUploadRes(it);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await de_ObjectNotInActiveTierErrorRes(it);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await de_BucketAlreadyExistsRes(it);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await de_BucketAlreadyOwnedByYouRes(it);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await de_NoSuchBucketRes(it);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await de_InvalidObjectStateRes(it);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await de_NoSuchKeyRes(it);case"NotFound":case"com.amazonaws.s3#NotFound":throw await de_NotFoundRes(it);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await de_ObjectAlreadyInActiveTierErrorRes(it);default:const lt=it.body;return throwDefaultError({output:nt,parsedBody:lt,errorCode:st})}},throwDefaultError=withBaseException(S3ServiceException),de_BucketAlreadyExistsRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new BucketAlreadyExists({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_BucketAlreadyOwnedByYouRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new BucketAlreadyOwnedByYou({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_InvalidObjectStateRes=async(nt,rt)=>{const it=map$2({}),st=nt.body;st[_AT]!=null&&(it[_AT]=expectString(st[_AT])),st[_SC]!=null&&(it[_SC]=expectString(st[_SC]));const lt=new InvalidObjectState({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(lt,nt.body)},de_NoSuchBucketRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchBucket({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NoSuchKeyRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchKey({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NoSuchUploadRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchUpload({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NotFoundRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NotFound({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_ObjectAlreadyInActiveTierErrorRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new ObjectAlreadyInActiveTierError({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_ObjectNotInActiveTierErrorRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new ObjectNotInActiveTierError({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_SessionCredentials=(nt,rt)=>{const it={};return nt[_AKI]!=null&&(it[_AKI]=expectString(nt[_AKI])),nt[_SAK]!=null&&(it[_SAK]=expectString(nt[_SAK])),nt[_ST]!=null&&(it[_ST]=expectString(nt[_ST])),nt[_Exp]!=null&&(it[_Exp]=expectNonNull(parseRfc3339DateTimeWithOffset(nt[_Exp]))),it},deserializeMetadata=nt=>({httpStatusCode:nt.statusCode,requestId:nt.headers["x-amzn-requestid"]??nt.headers["x-amzn-request-id"]??nt.headers["x-amz-request-id"],extendedRequestId:nt.headers["x-amz-id-2"],cfId:nt.headers["x-amz-cf-id"]}),collectBodyString=(nt,rt)=>collectBody(nt,rt).then(it=>rt.utf8Encoder(it)),isSerializableHeaderValue=nt=>nt!=null&&nt!==""&&(!Object.getOwnPropertyNames(nt).includes("length")||nt.length!=0)&&(!Object.getOwnPropertyNames(nt).includes("size")||nt.size!=0),_ACL="ACL",_AKI="AccessKeyId",_AT="AccessTier",_BKE="BucketKeyEnabled",_C="Credentials",_CA="ChecksumAlgorithm",_CC="CacheControl",_CCRC="ChecksumCRC32",_CCRCC="ChecksumCRC32C",_CD="ContentDisposition",_CE="ContentEncoding",_CL="ContentLanguage",_CLo="ContentLength",_CMD="ContentMD5",_CSHA="ChecksumSHA1",_CSHAh="ChecksumSHA256",_CT="ContentType",_E="Expires",_EBO="ExpectedBucketOwner",_ETa="ETag",_Exp="Expiration",_GFC="GrantFullControl",_GR="GrantRead",_GRACP="GrantReadACP",_GWACP="GrantWriteACP",_OLLHS="ObjectLockLegalHoldStatus",_OLM="ObjectLockMode",_OLRUD="ObjectLockRetainUntilDate",_RC="RequestCharged",_RP="RequestPayer",_SAK="SecretAccessKey",_SC="StorageClass",_SM="SessionMode",_SSE="ServerSideEncryption",_SSECA="SSECustomerAlgorithm",_SSECK="SSECustomerKey",_SSECKMD="SSECustomerKeyMD5",_SSEKMSEC="SSEKMSEncryptionContext",_SSEKMSKI="SSEKMSKeyId",_ST="SessionToken",_T="Tagging",_VI="VersionId",_WRL="WebsiteRedirectLocation",_cc="cache-control",_cd="content-disposition",_ce="content-encoding",_cl="content-language",_cl_="content-length",_cm="content-md5",_ct="content-type",_e$1="expires",_eta="etag",_s="session",_xaa="x-amz-acl",_xacc="x-amz-checksum-crc32",_xacc_="x-amz-checksum-crc32c",_xacs="x-amz-checksum-sha1",_xacs_="x-amz-checksum-sha256",_xacsm="x-amz-create-session-mode",_xae="x-amz-expiration",_xaebo="x-amz-expected-bucket-owner",_xagfc="x-amz-grant-full-control",_xagr="x-amz-grant-read",_xagra="x-amz-grant-read-acp",_xagwa="x-amz-grant-write-acp",_xaollh="x-amz-object-lock-legal-hold",_xaolm="x-amz-object-lock-mode",_xaolrud="x-amz-object-lock-retain-until-date",_xarc="x-amz-request-charged",_xarp="x-amz-request-payer",_xasc="x-amz-storage-class",_xasca="x-amz-sdk-checksum-algorithm",_xasse="x-amz-server-side-encryption",_xasseakki="x-amz-server-side-encryption-aws-kms-key-id",_xassebke="x-amz-server-side-encryption-bucket-key-enabled",_xassec="x-amz-server-side-encryption-context",_xasseca="x-amz-server-side-encryption-customer-algorithm",_xasseck="x-amz-server-side-encryption-customer-key",_xasseckm="x-amz-server-side-encryption-customer-key-md5",_xat="x-amz-tagging",_xavi="x-amz-version-id",_xawrl="x-amz-website-redirect-location",_xi="x-id",parseBody=(nt,rt)=>collectBodyString(nt,rt).then(it=>{if(it.length){const st=new fxp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(ht,pt)=>pt.trim()===""&&pt.includes(`
`)?"":void 0});st.addEntity("#xD","\r"),st.addEntity("#10",`
`);const lt=st.parse(it),ct="#text",ut=Object.keys(lt)[0],dt=lt[ut];return dt[ct]&&(dt[ut]=dt[ct],delete dt[ct]),getValueFromTextNode(dt)}return{}}),parseErrorBody=async(nt,rt)=>{const it=await parseBody(nt,rt);return it.Error&&(it.Error.message=it.Error.message??it.Error.Message),it},loadRestXmlErrorCode=(nt,rt)=>{if((rt==null?void 0:rt.Code)!==void 0)return rt.Code;if(nt.statusCode==404)return"NotFound"};class CreateSessionCommand extends Command.classBuilder().ep({...commonParams,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(rt,it,st,lt){return[getSerdePlugin(st,this.serialize,this.deserialize),getEndpointPlugin(st,rt.getEndpointParameterInstructions())]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(void 0,CreateSessionOutputFilterSensitiveLog).ser(se_CreateSessionCommand).de(de_CreateSessionCommand).build(){}const name="@aws-sdk/client-s3",description="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version$2="3.511.0",scripts={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"yarn test:e2e:node && yarn test:e2e:browser","test:e2e:browser":"ts-mocha test/**/*.browser.ispec.ts && karma start karma.conf.js","test:e2e:node":"jest --c jest.config.e2e.js","test:unit":"ts-mocha test/unit/**/*.spec.ts"},main$1="./dist-cjs/index.js",types="./dist-types/index.d.ts",module="./dist-es/index.js",sideEffects=!1,dependencies={"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.511.0","@aws-sdk/core":"3.511.0","@aws-sdk/credential-provider-node":"3.511.0","@aws-sdk/middleware-bucket-endpoint":"3.511.0","@aws-sdk/middleware-expect-continue":"3.511.0","@aws-sdk/middleware-flexible-checksums":"3.511.0","@aws-sdk/middleware-host-header":"3.511.0","@aws-sdk/middleware-location-constraint":"3.511.0","@aws-sdk/middleware-logger":"3.511.0","@aws-sdk/middleware-recursion-detection":"3.511.0","@aws-sdk/middleware-sdk-s3":"3.511.0","@aws-sdk/middleware-signing":"3.511.0","@aws-sdk/middleware-ssec":"3.511.0","@aws-sdk/middleware-user-agent":"3.511.0","@aws-sdk/region-config-resolver":"3.511.0","@aws-sdk/signature-v4-multi-region":"3.511.0","@aws-sdk/types":"3.511.0","@aws-sdk/util-endpoints":"3.511.0","@aws-sdk/util-user-agent-browser":"3.511.0","@aws-sdk/util-user-agent-node":"3.511.0","@aws-sdk/xml-builder":"3.496.0","@smithy/config-resolver":"^2.1.1","@smithy/core":"^1.3.1","@smithy/eventstream-serde-browser":"^2.1.1","@smithy/eventstream-serde-config-resolver":"^2.1.1","@smithy/eventstream-serde-node":"^2.1.1","@smithy/fetch-http-handler":"^2.4.1","@smithy/hash-blob-browser":"^2.1.1","@smithy/hash-node":"^2.1.1","@smithy/hash-stream-node":"^2.1.1","@smithy/invalid-dependency":"^2.1.1","@smithy/md5-js":"^2.1.1","@smithy/middleware-content-length":"^2.1.1","@smithy/middleware-endpoint":"^2.4.1","@smithy/middleware-retry":"^2.1.1","@smithy/middleware-serde":"^2.1.1","@smithy/middleware-stack":"^2.1.1","@smithy/node-config-provider":"^2.2.1","@smithy/node-http-handler":"^2.3.1","@smithy/protocol-http":"^3.1.1","@smithy/smithy-client":"^2.3.1","@smithy/types":"^2.9.1","@smithy/url-parser":"^2.1.1","@smithy/util-base64":"^2.1.1","@smithy/util-body-length-browser":"^2.1.1","@smithy/util-body-length-node":"^2.2.1","@smithy/util-defaults-mode-browser":"^2.1.1","@smithy/util-defaults-mode-node":"^2.1.1","@smithy/util-endpoints":"^1.1.1","@smithy/util-retry":"^2.1.1","@smithy/util-stream":"^2.1.1","@smithy/util-utf8":"^2.1.1","@smithy/util-waiter":"^2.1.1","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies={"@aws-sdk/signature-v4-crt":"3.511.0","@smithy/service-client-documentation-generator":"^2.1.1","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines={node:">=14.0.0"},typesVersions={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files=["dist-*/**"],author={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license="Apache-2.0",browser={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},homepage="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},packageInfo={name,description,version:version$2,scripts,main:main$1,types,module,sideEffects,dependencies,devDependencies,engines,typesVersions,files,author,license,browser,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage,repository};var build$5={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(nt,rt){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$5(nt,rt)};function __extends$5(nt,rt){extendStatics$5(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$5=function(){return __assign$5=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$5.apply(this,arguments)};function __rest$5(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$5(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$5(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$5(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$5(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$5(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$5(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$5(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$5(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$5(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$5(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$5(arguments[rt]));return nt}function __spreadArrays$5(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$5(nt){return this instanceof __await$5?(this.v=nt,this):new __await$5(nt)}function __asyncGenerator$5(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$5?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$5(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$5(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$5(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$5=="function"?__values$5(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$5(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$5(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$5(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$5(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$5(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$5},__asyncDelegator:__asyncDelegator$5,__asyncGenerator:__asyncGenerator$5,__asyncValues:__asyncValues$5,__await:__await$5,__awaiter:__awaiter$5,__classPrivateFieldGet:__classPrivateFieldGet$5,__classPrivateFieldSet:__classPrivateFieldSet$5,__createBinding:__createBinding$5,__decorate:__decorate$5,__exportStar:__exportStar$5,__extends:__extends$5,__generator:__generator$5,__importDefault:__importDefault$5,__importStar:__importStar$5,__makeTemplateObject:__makeTemplateObject$5,__metadata:__metadata$5,__param:__param$5,__read:__read$5,__rest:__rest$5,__spread:__spread$5,__spreadArrays:__spreadArrays$5,__values:__values$5},Symbol.toStringTag,{value:"Module"})),require$$0$5=getAugmentedNamespace(tslib_es6$5);var crossPlatformSha1={},ie11Sha1={},isEmptyData$2={},hasRequiredIsEmptyData$1;function requireIsEmptyData$1(){if(hasRequiredIsEmptyData$1)return isEmptyData$2;hasRequiredIsEmptyData$1=1,Object.defineProperty(isEmptyData$2,"__esModule",{value:!0}),isEmptyData$2.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$2.isEmptyData=nt,isEmptyData$2}var constants$3={},hasRequiredConstants$2;function requireConstants$2(){return hasRequiredConstants$2||(hasRequiredConstants$2=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.EMPTY_DATA_SHA_1=nt.SHA_1_HMAC_ALGO=nt.SHA_1_HASH=void 0,nt.SHA_1_HASH={name:"SHA-1"},nt.SHA_1_HMAC_ALGO={name:"HMAC",hash:nt.SHA_1_HASH},nt.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(constants$3)),constants$3}const fallbackWindow={};function locateWindow(){return typeof window<"u"?window:typeof self<"u"?self:fallbackWindow}const distEs=Object.freeze(Object.defineProperty({__proto__:null,locateWindow},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(distEs);var hasRequiredIe11Sha1;function requireIe11Sha1(){if(hasRequiredIe11Sha1)return ie11Sha1;hasRequiredIe11Sha1=1,Object.defineProperty(ie11Sha1,"__esModule",{value:!0}),ie11Sha1.Sha1=void 0;var nt=requireIsEmptyData$1(),rt=requireConstants$2(),it=require$$2$1,st=require$$5,lt=function(){function dt(ht){this.secret=ht,this.reset()}return dt.prototype.update=function(ht){var pt=this;(0,nt.isEmptyData)(ht)||(this.operation=this.operation.then(function(ft){return ft.onerror=function(){pt.operation=Promise.reject(new Error("Error encountered updating hash"))},ft.process(ut(ht)),ft}),this.operation.catch(function(){}))},dt.prototype.digest=function(){return this.operation.then(function(ht){return new Promise(function(pt,ft){ht.onerror=function(){ft(new Error("Error encountered finalizing hash"))},ht.oncomplete=function(){ht.result&&pt(new Uint8Array(ht.result)),ft(new Error("Error encountered finalizing hash"))},ht.finish()})})},dt.prototype.reset=function(){this.secret?(this.operation=ct(this.secret).then(function(ht){return(0,st.locateWindow)().msCrypto.subtle.sign(rt.SHA_1_HMAC_ALGO,ht)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,st.locateWindow)().msCrypto.subtle.digest("SHA-1"))},dt}();ie11Sha1.Sha1=lt;function ct(dt){return new Promise(function(ht,pt){var ft=(0,st.locateWindow)().msCrypto.subtle.importKey("raw",ut(dt),rt.SHA_1_HMAC_ALGO,!1,["sign"]);ft.oncomplete=function(){ft.result&&ht(ft.result),pt(new Error("ImportKey completed without importing key."))},ft.onerror=function(){pt(new Error("ImportKey failed to import key."))}})}function ut(dt){return typeof dt=="string"?(0,it.fromUtf8)(dt):ArrayBuffer.isView(dt)?new Uint8Array(dt.buffer,dt.byteOffset,dt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(dt)}return ie11Sha1}var webCryptoSha1={},hasRequiredWebCryptoSha1;function requireWebCryptoSha1(){if(hasRequiredWebCryptoSha1)return webCryptoSha1;hasRequiredWebCryptoSha1=1,Object.defineProperty(webCryptoSha1,"__esModule",{value:!0}),webCryptoSha1.Sha1=void 0;var nt=require$$2$1,rt=requireIsEmptyData$1(),it=requireConstants$2(),st=require$$5,lt=function(){function ut(dt){this.toHash=new Uint8Array(0),dt!==void 0&&(this.key=new Promise(function(ht,pt){(0,st.locateWindow)().crypto.subtle.importKey("raw",ct(dt),it.SHA_1_HMAC_ALGO,!1,["sign"]).then(ht,pt)}),this.key.catch(function(){}))}return ut.prototype.update=function(dt){if(!(0,rt.isEmptyData)(dt)){var ht=ct(dt),pt=new Uint8Array(this.toHash.byteLength+ht.byteLength);pt.set(this.toHash,0),pt.set(ht,this.toHash.byteLength),this.toHash=pt}},ut.prototype.digest=function(){var dt=this;return this.key?this.key.then(function(ht){return(0,st.locateWindow)().crypto.subtle.sign(it.SHA_1_HMAC_ALGO,ht,dt.toHash).then(function(pt){return new Uint8Array(pt)})}):(0,rt.isEmptyData)(this.toHash)?Promise.resolve(it.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,st.locateWindow)().crypto.subtle.digest(it.SHA_1_HASH,dt.toHash)}).then(function(ht){return Promise.resolve(new Uint8Array(ht))})},ut.prototype.reset=function(){this.toHash=new Uint8Array(0)},ut}();webCryptoSha1.Sha1=lt;function ct(ut){return typeof ut=="string"?(0,nt.fromUtf8)(ut):ArrayBuffer.isView(ut)?new Uint8Array(ut.buffer,ut.byteOffset,ut.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(ut)}return webCryptoSha1}var build$4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$4=function(nt,rt){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$4(nt,rt)};function __extends$4(nt,rt){extendStatics$4(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$4=function(){return __assign$4=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$4.apply(this,arguments)};function __rest$4(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$4(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$4(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$4(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$4(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$4(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$4(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$4(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$4(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$4(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$4(arguments[rt]));return nt}function __spreadArrays$4(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$4(nt){return this instanceof __await$4?(this.v=nt,this):new __await$4(nt)}function __asyncGenerator$4(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$4?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$4(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$4(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$4(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$4=="function"?__values$4(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$4(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$4(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$4(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$4(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$4(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$4=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$4},__asyncDelegator:__asyncDelegator$4,__asyncGenerator:__asyncGenerator$4,__asyncValues:__asyncValues$4,__await:__await$4,__awaiter:__awaiter$4,__classPrivateFieldGet:__classPrivateFieldGet$4,__classPrivateFieldSet:__classPrivateFieldSet$4,__createBinding:__createBinding$4,__decorate:__decorate$4,__exportStar:__exportStar$4,__extends:__extends$4,__generator:__generator$4,__importDefault:__importDefault$4,__importStar:__importStar$4,__makeTemplateObject:__makeTemplateObject$4,__metadata:__metadata$4,__param:__param$4,__read:__read$4,__rest:__rest$4,__spread:__spread$4,__spreadArrays:__spreadArrays$4,__values:__values$4},Symbol.toStringTag,{value:"Module"})),require$$0$4=getAugmentedNamespace(tslib_es6$4);var supportsWebCrypto={},hasRequiredSupportsWebCrypto;function requireSupportsWebCrypto(){if(hasRequiredSupportsWebCrypto)return supportsWebCrypto;hasRequiredSupportsWebCrypto=1,Object.defineProperty(supportsWebCrypto,"__esModule",{value:!0}),supportsWebCrypto.supportsZeroByteGCM=supportsWebCrypto.supportsSubtleCrypto=supportsWebCrypto.supportsSecureRandom=supportsWebCrypto.supportsWebCrypto=void 0;var nt=require$$0$4,rt=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function it(ut){if(st(ut)&&typeof ut.crypto.subtle=="object"){var dt=ut.crypto.subtle;return lt(dt)}return!1}supportsWebCrypto.supportsWebCrypto=it;function st(ut){if(typeof ut=="object"&&typeof ut.crypto=="object"){var dt=ut.crypto.getRandomValues;return typeof dt=="function"}return!1}supportsWebCrypto.supportsSecureRandom=st;function lt(ut){return ut&&rt.every(function(dt){return typeof ut[dt]=="function"})}supportsWebCrypto.supportsSubtleCrypto=lt;function ct(ut){return nt.__awaiter(this,void 0,void 0,function(){var dt,ht;return nt.__generator(this,function(pt){switch(pt.label){case 0:if(!lt(ut))return[2,!1];pt.label=1;case 1:return pt.trys.push([1,4,,5]),[4,ut.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return dt=pt.sent(),[4,ut.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},dt,new Uint8Array(0))];case 3:return ht=pt.sent(),[2,ht.byteLength===16];case 4:return pt.sent(),[2,!1];case 5:return[2]}})})}return supportsWebCrypto.supportsZeroByteGCM=ct,supportsWebCrypto}var hasRequiredBuild$3;function requireBuild$3(){return hasRequiredBuild$3||(hasRequiredBuild$3=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$4;rt.__exportStar(requireSupportsWebCrypto(),nt)}(build$4)),build$4}var build$3={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(nt,rt){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$3(nt,rt)};function __extends$3(nt,rt){extendStatics$3(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$3=function(){return __assign$3=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$3.apply(this,arguments)};function __rest$3(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$3(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$3(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$3(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$3(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$3(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$3(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$3(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$3(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$3(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$3(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$3(arguments[rt]));return nt}function __spreadArrays$3(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$3(nt){return this instanceof __await$3?(this.v=nt,this):new __await$3(nt)}function __asyncGenerator$3(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$3?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$3(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$3(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$3(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$3=="function"?__values$3(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$3(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$3(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$3(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$3(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$3(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$3},__asyncDelegator:__asyncDelegator$3,__asyncGenerator:__asyncGenerator$3,__asyncValues:__asyncValues$3,__await:__await$3,__awaiter:__awaiter$3,__classPrivateFieldGet:__classPrivateFieldGet$3,__classPrivateFieldSet:__classPrivateFieldSet$3,__createBinding:__createBinding$3,__decorate:__decorate$3,__exportStar:__exportStar$3,__extends:__extends$3,__generator:__generator$3,__importDefault:__importDefault$3,__importStar:__importStar$3,__makeTemplateObject:__makeTemplateObject$3,__metadata:__metadata$3,__param:__param$3,__read:__read$3,__rest:__rest$3,__spread:__spread$3,__spreadArrays:__spreadArrays$3,__values:__values$3},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(tslib_es6$3);var CryptoOperation={},hasRequiredCryptoOperation;function requireCryptoOperation(){return hasRequiredCryptoOperation||(hasRequiredCryptoOperation=1,Object.defineProperty(CryptoOperation,"__esModule",{value:!0})),CryptoOperation}var Key={},hasRequiredKey;function requireKey(){return hasRequiredKey||(hasRequiredKey=1,Object.defineProperty(Key,"__esModule",{value:!0})),Key}var KeyOperation={},hasRequiredKeyOperation;function requireKeyOperation(){return hasRequiredKeyOperation||(hasRequiredKeyOperation=1,Object.defineProperty(KeyOperation,"__esModule",{value:!0})),KeyOperation}var MsSubtleCrypto={},hasRequiredMsSubtleCrypto;function requireMsSubtleCrypto(){return hasRequiredMsSubtleCrypto||(hasRequiredMsSubtleCrypto=1,Object.defineProperty(MsSubtleCrypto,"__esModule",{value:!0})),MsSubtleCrypto}var MsWindow={},hasRequiredMsWindow;function requireMsWindow(){if(hasRequiredMsWindow)return MsWindow;hasRequiredMsWindow=1,Object.defineProperty(MsWindow,"__esModule",{value:!0}),MsWindow.isMsWindow=void 0;var nt=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function rt(st){return"MSInputMethodContext"in st&&"msCrypto"in st}function it(st){if(rt(st)&&st.msCrypto.subtle!==void 0){var lt=st.msCrypto,ct=lt.getRandomValues,ut=lt.subtle;return nt.map(function(dt){return ut[dt]}).concat(ct).every(function(dt){return typeof dt=="function"})}return!1}return MsWindow.isMsWindow=it,MsWindow}var hasRequiredBuild$2;function requireBuild$2(){return hasRequiredBuild$2||(hasRequiredBuild$2=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$3;rt.__exportStar(requireCryptoOperation(),nt),rt.__exportStar(requireKey(),nt),rt.__exportStar(requireKeyOperation(),nt),rt.__exportStar(requireMsSubtleCrypto(),nt),rt.__exportStar(requireMsWindow(),nt)}(build$3)),build$3}var hasRequiredCrossPlatformSha1;function requireCrossPlatformSha1(){if(hasRequiredCrossPlatformSha1)return crossPlatformSha1;hasRequiredCrossPlatformSha1=1,Object.defineProperty(crossPlatformSha1,"__esModule",{value:!0}),crossPlatformSha1.Sha1=void 0;var nt=requireIe11Sha1(),rt=requireWebCryptoSha1(),it=requireBuild$3(),st=requireBuild$2(),lt=require$$5,ct=requireBuild$5(),ut=function(){function dt(ht){if((0,it.supportsWebCrypto)((0,lt.locateWindow)()))this.hash=new rt.Sha1(ht);else if((0,st.isMsWindow)((0,lt.locateWindow)()))this.hash=new nt.Sha1(ht);else throw new Error("SHA1 not supported")}return dt.prototype.update=function(ht,pt){this.hash.update((0,ct.convertToBuffer)(ht))},dt.prototype.digest=function(){return this.hash.digest()},dt.prototype.reset=function(){this.hash.reset()},dt}();return crossPlatformSha1.Sha1=ut,crossPlatformSha1}(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.WebCryptoSha1=nt.Ie11Sha1=void 0;var rt=require$$0$5;rt.__exportStar(requireCrossPlatformSha1(),nt);var it=requireIe11Sha1();Object.defineProperty(nt,"Ie11Sha1",{enumerable:!0,get:function(){return it.Sha1}});var st=requireWebCryptoSha1();Object.defineProperty(nt,"WebCryptoSha1",{enumerable:!0,get:function(){return st.Sha1}})})(build$5);var build$2={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$2=function(nt,rt){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$2(nt,rt)};function __extends$2(nt,rt){extendStatics$2(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$2=function(){return __assign$2=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$2.apply(this,arguments)};function __rest$2(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$2(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$2(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$2(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$2(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$2(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$2(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$2(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$2(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$2(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$2(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$2(arguments[rt]));return nt}function __spreadArrays$2(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$2(nt){return this instanceof __await$2?(this.v=nt,this):new __await$2(nt)}function __asyncGenerator$2(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$2?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$2(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$2(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$2(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$2=="function"?__values$2(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$2(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$2(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$2(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$2(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$2(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$2},__asyncDelegator:__asyncDelegator$2,__asyncGenerator:__asyncGenerator$2,__asyncValues:__asyncValues$2,__await:__await$2,__awaiter:__awaiter$2,__classPrivateFieldGet:__classPrivateFieldGet$2,__classPrivateFieldSet:__classPrivateFieldSet$2,__createBinding:__createBinding$2,__decorate:__decorate$2,__exportStar:__exportStar$2,__extends:__extends$2,__generator:__generator$2,__importDefault:__importDefault$2,__importStar:__importStar$2,__makeTemplateObject:__makeTemplateObject$2,__metadata:__metadata$2,__param:__param$2,__read:__read$2,__rest:__rest$2,__spread:__spread$2,__spreadArrays:__spreadArrays$2,__values:__values$2},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(tslib_es6$2);var crossPlatformSha256={},ie11Sha256={},isEmptyData$1={},hasRequiredIsEmptyData;function requireIsEmptyData(){if(hasRequiredIsEmptyData)return isEmptyData$1;hasRequiredIsEmptyData=1,Object.defineProperty(isEmptyData$1,"__esModule",{value:!0}),isEmptyData$1.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$1.isEmptyData=nt,isEmptyData$1}var constants$2={},hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.EMPTY_DATA_SHA_256=nt.SHA_256_HMAC_ALGO=nt.SHA_256_HASH=void 0,nt.SHA_256_HASH={name:"SHA-256"},nt.SHA_256_HMAC_ALGO={name:"HMAC",hash:nt.SHA_256_HASH},nt.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(constants$2)),constants$2}var hasRequiredIe11Sha256;function requireIe11Sha256(){if(hasRequiredIe11Sha256)return ie11Sha256;hasRequiredIe11Sha256=1,Object.defineProperty(ie11Sha256,"__esModule",{value:!0}),ie11Sha256.Sha256=void 0;var nt=requireIsEmptyData(),rt=requireConstants$1(),it=require$$2$1,st=require$$5,lt=function(){function dt(ht){this.secret=ht,this.reset()}return dt.prototype.update=function(ht){var pt=this;(0,nt.isEmptyData)(ht)||(this.operation=this.operation.then(function(ft){return ft.onerror=function(){pt.operation=Promise.reject(new Error("Error encountered updating hash"))},ft.process(ut(ht)),ft}),this.operation.catch(function(){}))},dt.prototype.digest=function(){return this.operation.then(function(ht){return new Promise(function(pt,ft){ht.onerror=function(){ft(new Error("Error encountered finalizing hash"))},ht.oncomplete=function(){ht.result&&pt(new Uint8Array(ht.result)),ft(new Error("Error encountered finalizing hash"))},ht.finish()})})},dt.prototype.reset=function(){this.secret?(this.operation=ct(this.secret).then(function(ht){return(0,st.locateWindow)().msCrypto.subtle.sign(rt.SHA_256_HMAC_ALGO,ht)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,st.locateWindow)().msCrypto.subtle.digest("SHA-256"))},dt}();ie11Sha256.Sha256=lt;function ct(dt){return new Promise(function(ht,pt){var ft=(0,st.locateWindow)().msCrypto.subtle.importKey("raw",ut(dt),rt.SHA_256_HMAC_ALGO,!1,["sign"]);ft.oncomplete=function(){ft.result&&ht(ft.result),pt(new Error("ImportKey completed without importing key."))},ft.onerror=function(){pt(new Error("ImportKey failed to import key."))}})}function ut(dt){return typeof dt=="string"?(0,it.fromUtf8)(dt):ArrayBuffer.isView(dt)?new Uint8Array(dt.buffer,dt.byteOffset,dt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(dt)}return ie11Sha256}var webCryptoSha256={},hasRequiredWebCryptoSha256;function requireWebCryptoSha256(){if(hasRequiredWebCryptoSha256)return webCryptoSha256;hasRequiredWebCryptoSha256=1,Object.defineProperty(webCryptoSha256,"__esModule",{value:!0}),webCryptoSha256.Sha256=void 0;var nt=requireBuild$5(),rt=requireConstants$1(),it=require$$5,st=function(){function lt(ct){this.toHash=new Uint8Array(0),this.secret=ct,this.reset()}return lt.prototype.update=function(ct){if(!(0,nt.isEmptyData)(ct)){var ut=(0,nt.convertToBuffer)(ct),dt=new Uint8Array(this.toHash.byteLength+ut.byteLength);dt.set(this.toHash,0),dt.set(ut,this.toHash.byteLength),this.toHash=dt}},lt.prototype.digest=function(){var ct=this;return this.key?this.key.then(function(ut){return(0,it.locateWindow)().crypto.subtle.sign(rt.SHA_256_HMAC_ALGO,ut,ct.toHash).then(function(dt){return new Uint8Array(dt)})}):(0,nt.isEmptyData)(this.toHash)?Promise.resolve(rt.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,it.locateWindow)().crypto.subtle.digest(rt.SHA_256_HASH,ct.toHash)}).then(function(ut){return Promise.resolve(new Uint8Array(ut))})},lt.prototype.reset=function(){var ct=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(ut,dt){(0,it.locateWindow)().crypto.subtle.importKey("raw",(0,nt.convertToBuffer)(ct.secret),rt.SHA_256_HMAC_ALGO,!1,["sign"]).then(ut,dt)}),this.key.catch(function(){}))},lt}();return webCryptoSha256.Sha256=st,webCryptoSha256}var build$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(nt,rt){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$1(nt,rt)};function __extends$1(nt,rt){extendStatics$1(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$1=function(){return __assign$1=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$1.apply(this,arguments)};function __rest$1(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$1(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$1(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$1(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$1(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator$1(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding$1(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$1(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$1(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$1(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$1(arguments[rt]));return nt}function __spreadArrays$1(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$1(nt){return this instanceof __await$1?(this.v=nt,this):new __await$1(nt)}function __asyncGenerator$1(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$1?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$1(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$1(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$1(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$1=="function"?__values$1(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject$1(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$1(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$1(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$1(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$1(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$1},__asyncDelegator:__asyncDelegator$1,__asyncGenerator:__asyncGenerator$1,__asyncValues:__asyncValues$1,__await:__await$1,__awaiter:__awaiter$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldSet:__classPrivateFieldSet$1,__createBinding:__createBinding$1,__decorate:__decorate$1,__exportStar:__exportStar$1,__extends:__extends$1,__generator:__generator$1,__importDefault:__importDefault$1,__importStar:__importStar$1,__makeTemplateObject:__makeTemplateObject$1,__metadata:__metadata$1,__param:__param$1,__read:__read$1,__rest:__rest$1,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__values:__values$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(tslib_es6$1);var jsSha256={},constants$1={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.MAX_HASHABLE_LENGTH=constants$1.INIT=constants$1.KEY=constants$1.DIGEST_LENGTH=constants$1.BLOCK_SIZE=void 0,constants$1.BLOCK_SIZE=64,constants$1.DIGEST_LENGTH=32,constants$1.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),constants$1.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],constants$1.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),constants$1}var RawSha256={},hasRequiredRawSha256;function requireRawSha256(){if(hasRequiredRawSha256)return RawSha256;hasRequiredRawSha256=1,Object.defineProperty(RawSha256,"__esModule",{value:!0}),RawSha256.RawSha256=void 0;var nt=requireConstants(),rt=function(){function it(){this.state=Int32Array.from(nt.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return it.prototype.update=function(st){if(this.finished)throw new Error("Attempted to update an already finished hash.");var lt=0,ct=st.byteLength;if(this.bytesHashed+=ct,this.bytesHashed*8>nt.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;ct>0;)this.buffer[this.bufferLength++]=st[lt++],ct--,this.bufferLength===nt.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},it.prototype.digest=function(){if(!this.finished){var st=this.bytesHashed*8,lt=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),ct=this.bufferLength;if(lt.setUint8(this.bufferLength++,128),ct%nt.BLOCK_SIZE>=nt.BLOCK_SIZE-8){for(var ut=this.bufferLength;ut<nt.BLOCK_SIZE;ut++)lt.setUint8(ut,0);this.hashBuffer(),this.bufferLength=0}for(var ut=this.bufferLength;ut<nt.BLOCK_SIZE-8;ut++)lt.setUint8(ut,0);lt.setUint32(nt.BLOCK_SIZE-8,Math.floor(st/4294967296),!0),lt.setUint32(nt.BLOCK_SIZE-4,st),this.hashBuffer(),this.finished=!0}for(var dt=new Uint8Array(nt.DIGEST_LENGTH),ut=0;ut<8;ut++)dt[ut*4]=this.state[ut]>>>24&255,dt[ut*4+1]=this.state[ut]>>>16&255,dt[ut*4+2]=this.state[ut]>>>8&255,dt[ut*4+3]=this.state[ut]>>>0&255;return dt},it.prototype.hashBuffer=function(){for(var st=this,lt=st.buffer,ct=st.state,ut=ct[0],dt=ct[1],ht=ct[2],pt=ct[3],ft=ct[4],mt=ct[5],gt=ct[6],xt=ct[7],yt=0;yt<nt.BLOCK_SIZE;yt++){if(yt<16)this.temp[yt]=(lt[yt*4]&255)<<24|(lt[yt*4+1]&255)<<16|(lt[yt*4+2]&255)<<8|lt[yt*4+3]&255;else{var vt=this.temp[yt-2],St=(vt>>>17|vt<<15)^(vt>>>19|vt<<13)^vt>>>10;vt=this.temp[yt-15];var Et=(vt>>>7|vt<<25)^(vt>>>18|vt<<14)^vt>>>3;this.temp[yt]=(St+this.temp[yt-7]|0)+(Et+this.temp[yt-16]|0)}var wt=(((ft>>>6|ft<<26)^(ft>>>11|ft<<21)^(ft>>>25|ft<<7))+(ft&mt^~ft&gt)|0)+(xt+(nt.KEY[yt]+this.temp[yt]|0)|0)|0,Rt=((ut>>>2|ut<<30)^(ut>>>13|ut<<19)^(ut>>>22|ut<<10))+(ut&dt^ut&ht^dt&ht)|0;xt=gt,gt=mt,mt=ft,ft=pt+wt|0,pt=ht,ht=dt,dt=ut,ut=wt+Rt|0}ct[0]+=ut,ct[1]+=dt,ct[2]+=ht,ct[3]+=pt,ct[4]+=ft,ct[5]+=mt,ct[6]+=gt,ct[7]+=xt},it}();return RawSha256.RawSha256=rt,RawSha256}var hasRequiredJsSha256;function requireJsSha256(){if(hasRequiredJsSha256)return jsSha256;hasRequiredJsSha256=1,Object.defineProperty(jsSha256,"__esModule",{value:!0}),jsSha256.Sha256=void 0;var nt=require$$0$1,rt=requireConstants(),it=requireRawSha256(),st=requireBuild$5(),lt=function(){function ut(dt){this.secret=dt,this.hash=new it.RawSha256,this.reset()}return ut.prototype.update=function(dt){if(!((0,st.isEmptyData)(dt)||this.error))try{this.hash.update((0,st.convertToBuffer)(dt))}catch(ht){this.error=ht}},ut.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},ut.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(dt){return[2,this.digestSync()]})})},ut.prototype.reset=function(){if(this.hash=new it.RawSha256,this.secret){this.outer=new it.RawSha256;var dt=ct(this.secret),ht=new Uint8Array(rt.BLOCK_SIZE);ht.set(dt);for(var pt=0;pt<rt.BLOCK_SIZE;pt++)dt[pt]^=54,ht[pt]^=92;this.hash.update(dt),this.outer.update(ht);for(var pt=0;pt<dt.byteLength;pt++)dt[pt]=0}},ut}();jsSha256.Sha256=lt;function ct(ut){var dt=(0,st.convertToBuffer)(ut);if(dt.byteLength>rt.BLOCK_SIZE){var ht=new it.RawSha256;ht.update(dt),dt=ht.digest()}var pt=new Uint8Array(rt.BLOCK_SIZE);return pt.set(dt),pt}return jsSha256}var hasRequiredBuild$1;function requireBuild$1(){return hasRequiredBuild$1||(hasRequiredBuild$1=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$1;rt.__exportStar(requireJsSha256(),nt)}(build$1)),build$1}var hasRequiredCrossPlatformSha256;function requireCrossPlatformSha256(){if(hasRequiredCrossPlatformSha256)return crossPlatformSha256;hasRequiredCrossPlatformSha256=1,Object.defineProperty(crossPlatformSha256,"__esModule",{value:!0}),crossPlatformSha256.Sha256=void 0;var nt=requireIe11Sha256(),rt=requireWebCryptoSha256(),it=requireBuild$1(),st=requireBuild$3(),lt=requireBuild$2(),ct=require$$5,ut=requireBuild$5(),dt=function(){function ht(pt){(0,st.supportsWebCrypto)((0,ct.locateWindow)())?this.hash=new rt.Sha256(pt):(0,lt.isMsWindow)((0,ct.locateWindow)())?this.hash=new nt.Sha256(pt):this.hash=new it.Sha256(pt)}return ht.prototype.update=function(pt,ft){this.hash.update((0,ut.convertToBuffer)(pt))},ht.prototype.digest=function(){return this.hash.digest()},ht.prototype.reset=function(){this.hash.reset()},ht}();return crossPlatformSha256.Sha256=dt,crossPlatformSha256}(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.WebCryptoSha256=nt.Ie11Sha256=void 0;var rt=require$$0$2;rt.__exportStar(requireCrossPlatformSha256(),nt);var it=requireIe11Sha256();Object.defineProperty(nt,"Ie11Sha256",{enumerable:!0,get:function(){return it.Sha256}});var st=requireWebCryptoSha256();Object.defineProperty(nt,"WebCryptoSha256",{enumerable:!0,get:function(){return st.Sha256}})})(build$2);const BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(rt,it){const st=it.match(rt);return st&&st.length>0&&st[1]||""}static getSecondMatch(rt,it){const st=it.match(rt);return st&&st.length>1&&st[2]||""}static matchAndReturnConst(rt,it,st){if(rt.test(it))return st}static getWindowsVersionName(rt){switch(rt){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(rt){const it=rt.split(".").splice(0,2).map(st=>parseInt(st,10)||0);if(it.push(0),it[0]===10)switch(it[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(rt){const it=rt.split(".").splice(0,2).map(st=>parseInt(st,10)||0);if(it.push(0),!(it[0]===1&&it[1]<5)){if(it[0]===1&&it[1]<6)return"Cupcake";if(it[0]===1&&it[1]>=6)return"Donut";if(it[0]===2&&it[1]<2)return"Eclair";if(it[0]===2&&it[1]===2)return"Froyo";if(it[0]===2&&it[1]>2)return"Gingerbread";if(it[0]===3)return"Honeycomb";if(it[0]===4&&it[1]<1)return"Ice Cream Sandwich";if(it[0]===4&&it[1]<4)return"Jelly Bean";if(it[0]===4&&it[1]>=4)return"KitKat";if(it[0]===5)return"Lollipop";if(it[0]===6)return"Marshmallow";if(it[0]===7)return"Nougat";if(it[0]===8)return"Oreo";if(it[0]===9)return"Pie"}}static getVersionPrecision(rt){return rt.split(".").length}static compareVersions(rt,it,st=!1){const lt=Utils.getVersionPrecision(rt),ct=Utils.getVersionPrecision(it);let ut=Math.max(lt,ct),dt=0;const ht=Utils.map([rt,it],pt=>{const ft=ut-Utils.getVersionPrecision(pt),mt=pt+new Array(ft+1).join(".0");return Utils.map(mt.split("."),gt=>new Array(20-gt.length).join("0")+gt).reverse()});for(st&&(dt=ut-Math.min(lt,ct)),ut-=1;ut>=dt;){if(ht[0][ut]>ht[1][ut])return 1;if(ht[0][ut]===ht[1][ut]){if(ut===dt)return 0;ut-=1}else if(ht[0][ut]<ht[1][ut])return-1}}static map(rt,it){const st=[];let lt;if(Array.prototype.map)return Array.prototype.map.call(rt,it);for(lt=0;lt<rt.length;lt+=1)st.push(it(rt[lt]));return st}static find(rt,it){let st,lt;if(Array.prototype.find)return Array.prototype.find.call(rt,it);for(st=0,lt=rt.length;st<lt;st+=1){const ct=rt[st];if(it(ct,st))return ct}}static assign(rt,...it){const st=rt;let lt,ct;if(Object.assign)return Object.assign(rt,...it);for(lt=0,ct=it.length;lt<ct;lt+=1){const ut=it[lt];typeof ut=="object"&&ut!==null&&Object.keys(ut).forEach(ht=>{st[ht]=ut[ht]})}return rt}static getBrowserAlias(rt){return BROWSER_ALIASES_MAP[rt]}static getBrowserTypeByAlias(rt){return BROWSER_MAP[rt]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(nt){const rt={name:"Googlebot"},it=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/opera/i],describe(nt){const rt={name:"Opera"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/opr\/|opios/i],describe(nt){const rt={name:"Opera"},it=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/SamsungBrowser/i],describe(nt){const rt={name:"Samsung Internet for Android"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/Whale/i],describe(nt){const rt={name:"NAVER Whale Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/MZBrowser/i],describe(nt){const rt={name:"MZ Browser"},it=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/focus/i],describe(nt){const rt={name:"Focus"},it=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/swing/i],describe(nt){const rt={name:"Swing"},it=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/coast/i],describe(nt){const rt={name:"Opera Coast"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(nt){const rt={name:"Opera Touch"},it=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/yabrowser/i],describe(nt){const rt={name:"Yandex Browser"},it=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/ucbrowser/i],describe(nt){const rt={name:"UC Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/Maxthon|mxios/i],describe(nt){const rt={name:"Maxthon"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/epiphany/i],describe(nt){const rt={name:"Epiphany"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/puffin/i],describe(nt){const rt={name:"Puffin"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/sleipnir/i],describe(nt){const rt={name:"Sleipnir"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/k-meleon/i],describe(nt){const rt={name:"K-Meleon"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/micromessenger/i],describe(nt){const rt={name:"WeChat"},it=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/qqbrowser/i],describe(nt){const rt={name:/qqbrowserlite/i.test(nt)?"QQ Browser Lite":"QQ Browser"},it=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/msie|trident/i],describe(nt){const rt={name:"Internet Explorer"},it=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/\sedg\//i],describe(nt){const rt={name:"Microsoft Edge"},it=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/edg([ea]|ios)/i],describe(nt){const rt={name:"Microsoft Edge"},it=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/vivaldi/i],describe(nt){const rt={name:"Vivaldi"},it=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/seamonkey/i],describe(nt){const rt={name:"SeaMonkey"},it=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/sailfish/i],describe(nt){const rt={name:"Sailfish"},it=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,nt);return it&&(rt.version=it),rt}},{test:[/silk/i],describe(nt){const rt={name:"Amazon Silk"},it=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/phantom/i],describe(nt){const rt={name:"PhantomJS"},it=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/slimerjs/i],describe(nt){const rt={name:"SlimerJS"},it=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(nt){const rt={name:"BlackBerry"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/(web|hpw)[o0]s/i],describe(nt){const rt={name:"WebOS Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/bada/i],describe(nt){const rt={name:"Bada"},it=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/tizen/i],describe(nt){const rt={name:"Tizen"},it=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/qupzilla/i],describe(nt){const rt={name:"QupZilla"},it=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/firefox|iceweasel|fxios/i],describe(nt){const rt={name:"Firefox"},it=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/electron/i],describe(nt){const rt={name:"Electron"},it=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/MiuiBrowser/i],describe(nt){const rt={name:"Miui"},it=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/chromium/i],describe(nt){const rt={name:"Chromium"},it=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/chrome|crios|crmo/i],describe(nt){const rt={name:"Chrome"},it=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/GSA/i],describe(nt){const rt={name:"Google Search"},it=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){const rt=!nt.test(/like android/i),it=nt.test(/android/i);return rt&&it},describe(nt){const rt={name:"Android Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/playstation 4/i],describe(nt){const rt={name:"PlayStation 4"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/safari|applewebkit/i],describe(nt){const rt={name:"Safari"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/.*/i],describe(nt){const rt=/^(.*)\/(.*) /,it=/^(.*)\/(.*)[ \t]\((.*)/,lt=nt.search("\\(")!==-1?it:rt;return{name:Utils.getFirstMatch(lt,nt),version:Utils.getSecondMatch(lt,nt)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(nt){const rt=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,nt);return{name:OS_MAP.Roku,version:rt}}},{test:[/windows phone/i],describe(nt){const rt=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,nt);return{name:OS_MAP.WindowsPhone,version:rt}}},{test:[/windows /i],describe(nt){const rt=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,nt),it=Utils.getWindowsVersionName(rt);return{name:OS_MAP.Windows,version:rt,versionName:it}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(nt){const rt={name:OS_MAP.iOS},it=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,nt);return it&&(rt.version=it),rt}},{test:[/macintosh/i],describe(nt){const rt=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,nt).replace(/[_\s]/g,"."),it=Utils.getMacOSVersionName(rt),st={name:OS_MAP.MacOS,version:rt};return it&&(st.versionName=it),st}},{test:[/(ipod|iphone|ipad)/i],describe(nt){const rt=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,nt).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:rt}}},{test(nt){const rt=!nt.test(/like android/i),it=nt.test(/android/i);return rt&&it},describe(nt){const rt=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,nt),it=Utils.getAndroidVersionName(rt),st={name:OS_MAP.Android,version:rt};return it&&(st.versionName=it),st}},{test:[/(web|hpw)[o0]s/i],describe(nt){const rt=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,nt),it={name:OS_MAP.WebOS};return rt&&rt.length&&(it.version=rt),it}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(nt){const rt=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,nt)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,nt)||Utils.getFirstMatch(/\bbb(\d+)/i,nt);return{name:OS_MAP.BlackBerry,version:rt}}},{test:[/bada/i],describe(nt){const rt=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,nt);return{name:OS_MAP.Bada,version:rt}}},{test:[/tizen/i],describe(nt){const rt=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,nt);return{name:OS_MAP.Tizen,version:rt}}},{test:[/linux/i],describe(){return{name:OS_MAP.Linux}}},{test:[/CrOS/],describe(){return{name:OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe(nt){const rt=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,nt);return{name:OS_MAP.PlayStation4,version:rt}}}],platformParsersList=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(nt){const rt=Utils.getFirstMatch(/(can-l01)/i,nt)&&"Nova",it={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return rt&&(it.model=rt),it}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:PLATFORMS_MAP.tablet}}},{test(nt){const rt=nt.test(/ipod|iphone/i),it=nt.test(/like (ipod|iphone)/i);return rt&&!it},describe(nt){const rt=Utils.getFirstMatch(/(ipod|iphone)/i,nt);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:rt}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getBrowserName(!0)==="blackberry"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test(nt){return nt.getBrowserName(!0)==="bada"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getBrowserName()==="windows phone"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test(nt){const rt=Number(String(nt.getOSVersion()).split(".")[0]);return nt.getOSName(!0)==="android"&&rt>=3},describe(){return{type:PLATFORMS_MAP.tablet}}},{test(nt){return nt.getOSName(!0)==="android"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getOSName(!0)==="macos"},describe(){return{type:PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test(nt){return nt.getOSName(!0)==="windows"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(nt){return nt.getOSName(!0)==="linux"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(nt){return nt.getOSName(!0)==="playstation 4"},describe(){return{type:PLATFORMS_MAP.tv}}},{test(nt){return nt.getOSName(!0)==="roku"},describe(){return{type:PLATFORMS_MAP.tv}}}],enginesParsersList=[{test(nt){return nt.getBrowserName(!0)==="microsoft edge"},describe(nt){if(/\sedg\//i.test(nt))return{name:ENGINE_MAP.Blink};const it=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,nt);return{name:ENGINE_MAP.EdgeHTML,version:it}}},{test:[/trident/i],describe(nt){const rt={name:ENGINE_MAP.Trident},it=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){return nt.test(/presto/i)},describe(nt){const rt={name:ENGINE_MAP.Presto},it=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){const rt=nt.test(/gecko/i),it=nt.test(/like gecko/i);return rt&&!it},describe(nt){const rt={name:ENGINE_MAP.Gecko},it=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe(nt){const rt={name:ENGINE_MAP.WebKit},it=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}}];class Parser{constructor(rt,it=!1){if(rt==null||rt==="")throw new Error("UserAgent parameter can't be empty");this._ua=rt,this.parsedResult={},it!==!0&&this.parse()}getUA(){return this._ua}test(rt){return rt.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const rt=Utils.find(browsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.browser=rt.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(rt){return rt?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const rt=Utils.find(osParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.os=rt.describe(this.getUA())),this.parsedResult.os}getOSName(rt){const{name:it}=this.getOS();return rt?String(it).toLowerCase()||"":it||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(rt=!1){const{type:it}=this.getPlatform();return rt?String(it).toLowerCase()||"":it||""}parsePlatform(){this.parsedResult.platform={};const rt=Utils.find(platformParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.platform=rt.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(rt){return rt?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const rt=Utils.find(enginesParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.engine=rt.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(rt){const it={};let st=0;const lt={};let ct=0;if(Object.keys(rt).forEach(dt=>{const ht=rt[dt];typeof ht=="string"?(lt[dt]=ht,ct+=1):typeof ht=="object"&&(it[dt]=ht,st+=1)}),st>0){const dt=Object.keys(it),ht=Utils.find(dt,ft=>this.isOS(ft));if(ht){const ft=this.satisfies(it[ht]);if(ft!==void 0)return ft}const pt=Utils.find(dt,ft=>this.isPlatform(ft));if(pt){const ft=this.satisfies(it[pt]);if(ft!==void 0)return ft}}if(ct>0){const dt=Object.keys(lt),ht=Utils.find(dt,pt=>this.isBrowser(pt,!0));if(ht!==void 0)return this.compareVersion(lt[ht])}}isBrowser(rt,it=!1){const st=this.getBrowserName().toLowerCase();let lt=rt.toLowerCase();const ct=Utils.getBrowserTypeByAlias(lt);return it&&ct&&(lt=ct.toLowerCase()),lt===st}compareVersion(rt){let it=[0],st=rt,lt=!1;const ct=this.getBrowserVersion();if(typeof ct=="string")return rt[0]===">"||rt[0]==="<"?(st=rt.substr(1),rt[1]==="="?(lt=!0,st=rt.substr(2)):it=[],rt[0]===">"?it.push(1):it.push(-1)):rt[0]==="="?st=rt.substr(1):rt[0]==="~"&&(lt=!0,st=rt.substr(1)),it.indexOf(Utils.compareVersions(ct,st,lt))>-1}isOS(rt){return this.getOSName(!0)===String(rt).toLowerCase()}isPlatform(rt){return this.getPlatformType(!0)===String(rt).toLowerCase()}isEngine(rt){return this.getEngineName(!0)===String(rt).toLowerCase()}is(rt,it=!1){return this.isBrowser(rt,it)||this.isOS(rt)||this.isPlatform(rt)}some(rt=[]){return rt.some(it=>this.is(it))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bowser{static getParser(rt,it=!1){if(typeof rt!="string")throw new Error("UserAgent should be a string");return new Parser(rt,it)}static parse(rt){return new Parser(rt).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}const defaultUserAgent=({serviceId:nt,clientVersion:rt})=>async()=>{var lt,ct,ut,dt,ht;const it=typeof window<"u"&&((lt=window==null?void 0:window.navigator)!=null&&lt.userAgent)?Bowser.parse(window.navigator.userAgent):void 0,st=[["aws-sdk-js",rt],["ua","2.0"],[`os/${((ct=it==null?void 0:it.os)==null?void 0:ct.name)||"other"}`,(ut=it==null?void 0:it.os)==null?void 0:ut.version],["lang/js"],["md/browser",`${((dt=it==null?void 0:it.browser)==null?void 0:dt.name)??"unknown"}_${((ht=it==null?void 0:it.browser)==null?void 0:ht.version)??"unknown"}`]];return nt&&st.push([`api/${nt}`,rt]),st};function getChunkedStream(nt){let rt=0,it=0,st=null,lt=null;const ct=dt=>{if(typeof dt!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+dt);rt=dt,it=4,st=new Uint8Array(dt),new DataView(st.buffer).setUint32(0,dt,!1)},ut=async function*(){const dt=nt[Symbol.asyncIterator]();for(;;){const{value:ht,done:pt}=await dt.next();if(pt){if(rt)if(rt===it)yield st;else throw new Error("Truncated event message received.");else return;return}const ft=ht.length;let mt=0;for(;mt<ft;){if(!st){const xt=ft-mt;lt||(lt=new Uint8Array(4));const yt=Math.min(4-it,xt);if(lt.set(ht.slice(mt,mt+yt),it),it+=yt,mt+=yt,it<4)break;ct(new DataView(lt.buffer).getUint32(0,!1)),lt=null}const gt=Math.min(rt-it,ft-mt);st.set(ht.slice(mt,mt+gt),it),it+=gt,mt+=gt,rt&&rt===it&&(yield st,st=null,rt=0,it=0)}}};return{[Symbol.asyncIterator]:ut}}function getMessageUnmarshaller(nt,rt){return async function(it){const{value:st}=it.headers[":message-type"];if(st==="error"){const lt=new Error(it.headers[":error-message"].value||"UnknownError");throw lt.name=it.headers[":error-code"].value,lt}else if(st==="exception"){const lt=it.headers[":exception-type"].value,ct={[lt]:it},ut=await nt(ct);if(ut.$unknown){const dt=new Error(rt(it.body));throw dt.name=lt,dt}throw ut[lt]}else if(st==="event"){const lt={[it.headers[":event-type"].value]:it},ct=await nt(lt);return ct.$unknown?void 0:ct}else throw Error(`Unrecognizable event type: ${it.headers[":event-type"].value}`)}}let EventStreamMarshaller$1=class{constructor({utf8Encoder:rt,utf8Decoder:it}){this.eventStreamCodec=new EventStreamCodec(rt,it),this.utfEncoder=rt}deserialize(rt,it){const st=getChunkedStream(rt);return new SmithyMessageDecoderStream({messageStream:new MessageDecoderStream({inputStream:st,decoder:this.eventStreamCodec}),deserializer:getMessageUnmarshaller(it,this.utfEncoder)})}serialize(rt,it){return new MessageEncoderStream({messageStream:new SmithyMessageEncoderStream({inputStream:rt,serializer:it}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const readableStreamtoIterable=nt=>({[Symbol.asyncIterator]:async function*(){const rt=nt.getReader();try{for(;;){const{done:it,value:st}=await rt.read();if(it)return;yield st}}finally{rt.releaseLock()}}}),iterableToReadableStream=nt=>{const rt=nt[Symbol.asyncIterator]();return new ReadableStream({async pull(it){const{done:st,value:lt}=await rt.next();if(st)return it.close();it.enqueue(lt)}})};class EventStreamMarshaller{constructor({utf8Encoder:rt,utf8Decoder:it}){this.universalMarshaller=new EventStreamMarshaller$1({utf8Decoder:it,utf8Encoder:rt})}deserialize(rt,it){const st=isReadableStream(rt)?readableStreamtoIterable(rt):rt;return this.universalMarshaller.deserialize(st,it)}serialize(rt,it){const st=this.universalMarshaller.serialize(rt,it);return typeof ReadableStream=="function"?iterableToReadableStream(st):st}}const isReadableStream=nt=>typeof ReadableStream=="function"&&nt instanceof ReadableStream,eventStreamSerdeProvider=nt=>new EventStreamMarshaller(nt);function blobReader(nt,rt,it=1024*1024){return new Promise((st,lt)=>{const ct=new FileReader;ct.addEventListener("error",lt),ct.addEventListener("abort",lt);const ut=nt.size;let dt=0;function ht(){if(dt>=ut){st();return}ct.readAsArrayBuffer(nt.slice(dt,Math.min(ut,dt+it)))}ct.addEventListener("load",pt=>{const ft=pt.target.result;rt(new Uint8Array(ft)),dt+=ft.byteLength,ht()}),ht()})}const blobHasher=async function(rt,it){const st=new rt;return await blobReader(it,lt=>{st.update(lt)}),st.digest()},invalidProvider=nt=>()=>Promise.reject(nt),BLOCK_SIZE=64,DIGEST_LENGTH=16,INIT=[1732584193,4023233417,2562383102,271733878];class Md5{constructor(){this.reset()}update(rt){if(isEmptyData(rt))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const it=convertToBuffer(rt);let st=0,{byteLength:lt}=it;for(this.bytesHashed+=lt;lt>0;)this.buffer.setUint8(this.bufferLength++,it[st++]),lt--,this.bufferLength===BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:it,bufferLength:st,bytesHashed:lt}=this,ct=lt*8;if(it.setUint8(this.bufferLength++,128),st%BLOCK_SIZE>=BLOCK_SIZE-8){for(let ut=this.bufferLength;ut<BLOCK_SIZE;ut++)it.setUint8(ut,0);this.hashBuffer(),this.bufferLength=0}for(let ut=this.bufferLength;ut<BLOCK_SIZE-8;ut++)it.setUint8(ut,0);it.setUint32(BLOCK_SIZE-8,ct>>>0,!0),it.setUint32(BLOCK_SIZE-4,Math.floor(ct/4294967296),!0),this.hashBuffer(),this.finished=!0}const rt=new DataView(new ArrayBuffer(DIGEST_LENGTH));for(let it=0;it<4;it++)rt.setUint32(it*4,this.state[it],!0);return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength)}hashBuffer(){const{buffer:rt,state:it}=this;let st=it[0],lt=it[1],ct=it[2],ut=it[3];st=ff(st,lt,ct,ut,rt.getUint32(0,!0),7,3614090360),ut=ff(ut,st,lt,ct,rt.getUint32(4,!0),12,3905402710),ct=ff(ct,ut,st,lt,rt.getUint32(8,!0),17,606105819),lt=ff(lt,ct,ut,st,rt.getUint32(12,!0),22,3250441966),st=ff(st,lt,ct,ut,rt.getUint32(16,!0),7,4118548399),ut=ff(ut,st,lt,ct,rt.getUint32(20,!0),12,1200080426),ct=ff(ct,ut,st,lt,rt.getUint32(24,!0),17,2821735955),lt=ff(lt,ct,ut,st,rt.getUint32(28,!0),22,4249261313),st=ff(st,lt,ct,ut,rt.getUint32(32,!0),7,1770035416),ut=ff(ut,st,lt,ct,rt.getUint32(36,!0),12,2336552879),ct=ff(ct,ut,st,lt,rt.getUint32(40,!0),17,4294925233),lt=ff(lt,ct,ut,st,rt.getUint32(44,!0),22,2304563134),st=ff(st,lt,ct,ut,rt.getUint32(48,!0),7,1804603682),ut=ff(ut,st,lt,ct,rt.getUint32(52,!0),12,4254626195),ct=ff(ct,ut,st,lt,rt.getUint32(56,!0),17,2792965006),lt=ff(lt,ct,ut,st,rt.getUint32(60,!0),22,1236535329),st=gg(st,lt,ct,ut,rt.getUint32(4,!0),5,4129170786),ut=gg(ut,st,lt,ct,rt.getUint32(24,!0),9,3225465664),ct=gg(ct,ut,st,lt,rt.getUint32(44,!0),14,643717713),lt=gg(lt,ct,ut,st,rt.getUint32(0,!0),20,3921069994),st=gg(st,lt,ct,ut,rt.getUint32(20,!0),5,3593408605),ut=gg(ut,st,lt,ct,rt.getUint32(40,!0),9,38016083),ct=gg(ct,ut,st,lt,rt.getUint32(60,!0),14,3634488961),lt=gg(lt,ct,ut,st,rt.getUint32(16,!0),20,3889429448),st=gg(st,lt,ct,ut,rt.getUint32(36,!0),5,568446438),ut=gg(ut,st,lt,ct,rt.getUint32(56,!0),9,3275163606),ct=gg(ct,ut,st,lt,rt.getUint32(12,!0),14,4107603335),lt=gg(lt,ct,ut,st,rt.getUint32(32,!0),20,1163531501),st=gg(st,lt,ct,ut,rt.getUint32(52,!0),5,2850285829),ut=gg(ut,st,lt,ct,rt.getUint32(8,!0),9,4243563512),ct=gg(ct,ut,st,lt,rt.getUint32(28,!0),14,1735328473),lt=gg(lt,ct,ut,st,rt.getUint32(48,!0),20,2368359562),st=hh(st,lt,ct,ut,rt.getUint32(20,!0),4,4294588738),ut=hh(ut,st,lt,ct,rt.getUint32(32,!0),11,2272392833),ct=hh(ct,ut,st,lt,rt.getUint32(44,!0),16,1839030562),lt=hh(lt,ct,ut,st,rt.getUint32(56,!0),23,4259657740),st=hh(st,lt,ct,ut,rt.getUint32(4,!0),4,2763975236),ut=hh(ut,st,lt,ct,rt.getUint32(16,!0),11,1272893353),ct=hh(ct,ut,st,lt,rt.getUint32(28,!0),16,4139469664),lt=hh(lt,ct,ut,st,rt.getUint32(40,!0),23,3200236656),st=hh(st,lt,ct,ut,rt.getUint32(52,!0),4,681279174),ut=hh(ut,st,lt,ct,rt.getUint32(0,!0),11,3936430074),ct=hh(ct,ut,st,lt,rt.getUint32(12,!0),16,3572445317),lt=hh(lt,ct,ut,st,rt.getUint32(24,!0),23,76029189),st=hh(st,lt,ct,ut,rt.getUint32(36,!0),4,3654602809),ut=hh(ut,st,lt,ct,rt.getUint32(48,!0),11,3873151461),ct=hh(ct,ut,st,lt,rt.getUint32(60,!0),16,530742520),lt=hh(lt,ct,ut,st,rt.getUint32(8,!0),23,3299628645),st=ii(st,lt,ct,ut,rt.getUint32(0,!0),6,4096336452),ut=ii(ut,st,lt,ct,rt.getUint32(28,!0),10,1126891415),ct=ii(ct,ut,st,lt,rt.getUint32(56,!0),15,2878612391),lt=ii(lt,ct,ut,st,rt.getUint32(20,!0),21,4237533241),st=ii(st,lt,ct,ut,rt.getUint32(48,!0),6,1700485571),ut=ii(ut,st,lt,ct,rt.getUint32(12,!0),10,2399980690),ct=ii(ct,ut,st,lt,rt.getUint32(40,!0),15,4293915773),lt=ii(lt,ct,ut,st,rt.getUint32(4,!0),21,2240044497),st=ii(st,lt,ct,ut,rt.getUint32(32,!0),6,1873313359),ut=ii(ut,st,lt,ct,rt.getUint32(60,!0),10,4264355552),ct=ii(ct,ut,st,lt,rt.getUint32(24,!0),15,2734768916),lt=ii(lt,ct,ut,st,rt.getUint32(52,!0),21,1309151649),st=ii(st,lt,ct,ut,rt.getUint32(16,!0),6,4149444226),ut=ii(ut,st,lt,ct,rt.getUint32(44,!0),10,3174756917),ct=ii(ct,ut,st,lt,rt.getUint32(8,!0),15,718787259),lt=ii(lt,ct,ut,st,rt.getUint32(36,!0),21,3951481745),it[0]=st+it[0]&4294967295,it[1]=lt+it[1]&4294967295,it[2]=ct+it[2]&4294967295,it[3]=ut+it[3]&4294967295}reset(){this.state=Uint32Array.from(INIT),this.buffer=new DataView(new ArrayBuffer(BLOCK_SIZE)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function cmn(nt,rt,it,st,lt,ct){return rt=(rt+nt&4294967295)+(st+ct&4294967295)&4294967295,(rt<<lt|rt>>>32-lt)+it&4294967295}function ff(nt,rt,it,st,lt,ct,ut){return cmn(rt&it|~rt&st,nt,rt,lt,ct,ut)}function gg(nt,rt,it,st,lt,ct,ut){return cmn(rt&st|it&~st,nt,rt,lt,ct,ut)}function hh(nt,rt,it,st,lt,ct,ut){return cmn(rt^it^st,nt,rt,lt,ct,ut)}function ii(nt,rt,it,st,lt,ct,ut){return cmn(it^(rt|~st),nt,rt,lt,ct,ut)}function isEmptyData(nt){return typeof nt=="string"?nt.length===0:nt.byteLength===0}function convertToBuffer(nt){return typeof nt=="string"?fromUtf8$3(nt):ArrayBuffer.isView(nt)?new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(nt)}const TEXT_ENCODER=typeof TextEncoder=="function"?new TextEncoder:null,calculateBodyLength=nt=>{if(typeof nt=="string"){if(TEXT_ENCODER)return TEXT_ENCODER.encode(nt).byteLength;let rt=nt.length;for(let it=rt-1;it>=0;it--){const st=nt.charCodeAt(it);st>127&&st<=2047?rt++:st>2047&&st<=65535&&(rt+=2),st>=56320&&st<=57343&&it--}return rt}else{if(typeof nt.byteLength=="number")return nt.byteLength;if(typeof nt.size=="number")return nt.size}throw new Error(`Body Length computation failed for ${nt}`)},signatureV4CrtContainer={CrtSignerV4:null};class SignatureV4MultiRegion{constructor(rt){this.sigv4Signer=new SignatureV4S3Express(rt),this.signerOptions=rt}async sign(rt,it={}){if(it.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(rt,it)}return this.sigv4Signer.sign(rt,it)}async signWithCredentials(rt,it,st={}){if(st.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(rt,it,st)}return this.sigv4Signer.signWithCredentials(rt,it,st)}async presign(rt,it={}){if(it.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(rt,it)}return this.sigv4Signer.presign(rt,it)}async presignWithCredentials(rt,it,st={}){if(st.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(rt,it,st)}getSigv4aSigner(){if(!this.sigv4aSigner){let rt=null;try{if(rt=signatureV4CrtContainer.CrtSignerV4,typeof rt!="function")throw new Error}catch(it){throw it.message=`${it.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,it}this.sigv4aSigner=new rt({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const cc="required",cd="type",ce="conditions",cf="fn",cg="argv",ch="ref",ci="assign",cj="url",ck="properties",cl="backend",cm="authSchemes",cn="disableDoubleEncoding",co="signingName",cp="signingRegion",cq="headers",a$5=!1,b$5=!0,c$6="isSet",d$7="booleanEquals",e$1="error",f$6="aws.partition",g$1="stringEquals",h$4="getAttr",i$6="name",j$1="substring",k$2="bucketSuffix",l$6="parseURL",m$4="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",n$4="endpoint",o$6="tree",p$4="aws.isVirtualHostableS3Bucket",q$1="{url#scheme}://{Bucket}.{url#authority}{url#path}",r$4="not",s$9="{url#scheme}://{url#authority}{url#path}",t$7="hardwareType",u$6="regionPrefix",v$3="bucketAliasSuffix",w$3="outpostId",x$3="isValidHostLabel",y$5="s3-outposts",z$1="s3",A$1="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",B$1="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",C$2="https://{Bucket}.s3.{partitionResult#dnsSuffix}",D$3="aws.parseArn",E$1="bucketArn",F$3="arnType",G$1="",H$1="s3-object-lambda",I$8="accesspoint",J="accessPointName",K="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",L="mrapPartition",M$4="outpostType",N$3="arnPrefix",O$2="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",P$2="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Q$1="https://s3.{partitionResult#dnsSuffix}",R$2={[cc]:!1,[cd]:"String"},S$6={[cc]:!0,default:!1,[cd]:"Boolean"},T$4={[cc]:!1,[cd]:"Boolean"},U$3={[cf]:d$7,[cg]:[{[ch]:"Accelerate"},!0]},V={[cf]:d$7,[cg]:[{[ch]:"UseFIPS"},!0]},W={[cf]:d$7,[cg]:[{[ch]:"UseDualStack"},!0]},X$1={[cf]:c$6,[cg]:[{[ch]:"Endpoint"}]},Y$1={[cf]:f$6,[cg]:[{[ch]:"Region"}],[ci]:"partitionResult"},Z$1={[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[{[ch]:"partitionResult"},i$6]},"aws-cn"]},aa={[cf]:c$6,[cg]:[{[ch]:"Bucket"}]},ab={[ch]:"Bucket"},ac={[cf]:l$6,[cg]:[{[ch]:"Endpoint"}],[ci]:"url"},ad={[cf]:d$7,[cg]:[{[cf]:h$4,[cg]:[{[ch]:"url"},"isIp"]},!0]},ae$1={[ch]:"url"},af={[cf]:"uriEncode",[cg]:[ab],[ci]:"uri_encoded_bucket"},ag={[cl]:"S3Express",[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:"s3express",[cp]:"{Region}"}]},ah={},ai={[cf]:p$4,[cg]:[ab,!1]},aj={[e$1]:"S3Express bucket name is not a valid virtual hostable name.",[cd]:e$1},ak={[cl]:"S3Express",[cm]:[{[cn]:!0,[i$6]:"sigv4-s3express",[co]:"s3express",[cp]:"{Region}"}]},al={[cf]:c$6,[cg]:[{[ch]:"UseS3ExpressControlEndpoint"}]},am={[cf]:d$7,[cg]:[{[ch]:"UseS3ExpressControlEndpoint"},!0]},an={[cf]:r$4,[cg]:[X$1]},ao={[e$1]:"Unrecognized S3Express bucket name format.",[cd]:e$1},ap={[cf]:r$4,[cg]:[aa]},aq={[ch]:t$7},ar={[ce]:[an],[e$1]:"Expected a endpoint to be specified but no endpoint was found",[cd]:e$1},as={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:y$5,[cp]:"{Region}"}]},at={[cf]:d$7,[cg]:[{[ch]:"ForcePathStyle"},!1]},au={[ch]:"ForcePathStyle"},av={[cf]:d$7,[cg]:[{[ch]:"Accelerate"},!1]},aw={[cf]:g$1,[cg]:[{[ch]:"Region"},"aws-global"]},ax={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"us-east-1"}]},ay={[cf]:r$4,[cg]:[aw]},az={[cf]:d$7,[cg]:[{[ch]:"UseGlobalEndpoint"},!0]},aA={[cj]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:{[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{Region}"}]},[cq]:{}},aB={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{Region}"}]},aC={[cf]:d$7,[cg]:[{[ch]:"UseGlobalEndpoint"},!1]},aD={[cf]:d$7,[cg]:[{[ch]:"UseDualStack"},!1]},aE={[cj]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aF={[cf]:d$7,[cg]:[{[ch]:"UseFIPS"},!1]},aG={[cj]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aH={[cj]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aI={[cf]:d$7,[cg]:[{[cf]:h$4,[cg]:[ae$1,"isIp"]},!1]},aJ={[cj]:A$1,[ck]:aB,[cq]:{}},aK={[cj]:q$1,[ck]:aB,[cq]:{}},aL={[n$4]:aK,[cd]:n$4},aM={[cj]:B$1,[ck]:aB,[cq]:{}},aN={[cj]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aO={[e$1]:"Invalid region: region was not a valid DNS name.",[cd]:e$1},aP={[ch]:E$1},aQ={[ch]:F$3},aR={[cf]:h$4,[cg]:[aP,"service"]},aS={[ch]:J},aT={[ce]:[W],[e$1]:"S3 Object Lambda does not support Dual-stack",[cd]:e$1},aU={[ce]:[U$3],[e$1]:"S3 Object Lambda does not support S3 Accelerate",[cd]:e$1},aV={[ce]:[{[cf]:c$6,[cg]:[{[ch]:"DisableAccessPoints"}]},{[cf]:d$7,[cg]:[{[ch]:"DisableAccessPoints"},!0]}],[e$1]:"Access points are not supported for this operation",[cd]:e$1},aW={[ce]:[{[cf]:c$6,[cg]:[{[ch]:"UseArnRegion"}]},{[cf]:d$7,[cg]:[{[ch]:"UseArnRegion"},!1]},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},"{Region}"]}]}],[e$1]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[cd]:e$1},aX={[cf]:h$4,[cg]:[{[ch]:"bucketPartition"},i$6]},aY={[cf]:h$4,[cg]:[aP,"accountId"]},aZ={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:H$1,[cp]:"{bucketArn#region}"}]},ba={[e$1]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[cd]:e$1},bb={[e$1]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[cd]:e$1},bc={[e$1]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[cd]:e$1},bd={[e$1]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[cd]:e$1},be={[e$1]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[cd]:e$1},bf={[e$1]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[cd]:e$1},bg={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{bucketArn#region}"}]},bh={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:y$5,[cp]:"{bucketArn#region}"}]},bi={[cf]:D$3,[cg]:[ab]},bj={[cj]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bk={[cj]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bl={[cj]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bm={[cj]:O$2,[ck]:aB,[cq]:{}},bn={[cj]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bo={[ch]:"UseObjectLambdaEndpoint"},bp={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:H$1,[cp]:"{Region}"}]},bq={[cj]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},br={[cj]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bs={[cj]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bt={[cj]:s$9,[ck]:aB,[cq]:{}},bu={[cj]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bv=[{[ch]:"Region"}],bw=[{[ch]:"Endpoint"}],bx=[ab],by=[W],bz=[U$3],bA=[X$1,ac],bB=[{[cf]:c$6,[cg]:[{[ch]:"DisableS3ExpressSessionAuth"}]},{[cf]:d$7,[cg]:[{[ch]:"DisableS3ExpressSessionAuth"},!0]}],bC=[ad],bD=[af],bE=[ai],bF=[V],bG=[{[cf]:j$1,[cg]:[ab,6,14,!0],[ci]:"s3expressAvailabilityZoneId"},{[cf]:j$1,[cg]:[ab,14,16,!0],[ci]:"s3expressAvailabilityZoneDelim"},{[cf]:g$1,[cg]:[{[ch]:"s3expressAvailabilityZoneDelim"},"--"]}],bH=[{[ce]:[V],[n$4]:{[cj]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ag,[cq]:{}},[cd]:n$4},{[n$4]:{[cj]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ag,[cq]:{}},[cd]:n$4}],bI=[{[cf]:j$1,[cg]:[ab,6,15,!0],[ci]:"s3expressAvailabilityZoneId"},{[cf]:j$1,[cg]:[ab,15,17,!0],[ci]:"s3expressAvailabilityZoneDelim"},{[cf]:g$1,[cg]:[{[ch]:"s3expressAvailabilityZoneDelim"},"--"]}],bJ=[{[ce]:[V],[n$4]:{[cj]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ak,[cq]:{}},[cd]:n$4},{[n$4]:{[cj]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ak,[cq]:{}},[cd]:n$4}],bK=[aa],bL=[{[cf]:x$3,[cg]:[{[ch]:w$3},!1]}],bM=[{[cf]:g$1,[cg]:[{[ch]:u$6},"beta"]}],bN=[Y$1],bO=[{[cf]:x$3,[cg]:[{[ch]:"Region"},!1]}],bP=[{[cf]:g$1,[cg]:[{[ch]:"Region"},"us-east-1"]}],bQ=[{[cf]:g$1,[cg]:[aQ,I$8]}],bR=[{[cf]:h$4,[cg]:[aP,"resourceId[1]"],[ci]:J},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[aS,G$1]}]}],bS=[aP,"resourceId[1]"],bT=[{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},G$1]}]}],bU=[{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[{[cf]:h$4,[cg]:[aP,"resourceId[2]"]}]}]}],bV=[aP,"resourceId[2]"],bW=[{[cf]:f$6,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]}],[ci]:"bucketPartition"}],bX=[{[cf]:g$1,[cg]:[aX,{[cf]:h$4,[cg]:[{[ch]:"partitionResult"},i$6]}]}],bY=[{[cf]:x$3,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},!0]}],bZ=[{[cf]:x$3,[cg]:[aY,!1]}],ca=[{[cf]:x$3,[cg]:[aS,!1]}],cb=[{[cf]:x$3,[cg]:[{[ch]:"Region"},!0]}],_data={version:"1.0",parameters:{Bucket:R$2,Region:R$2,UseFIPS:S$6,UseDualStack:S$6,Endpoint:R$2,ForcePathStyle:S$6,Accelerate:S$6,UseGlobalEndpoint:S$6,UseObjectLambdaEndpoint:T$4,Key:R$2,Prefix:R$2,DisableAccessPoints:T$4,DisableMultiRegionAccessPoints:S$6,UseArnRegion:T$4,UseS3ExpressControlEndpoint:T$4,DisableS3ExpressSessionAuth:T$4},rules:[{[ce]:[{[cf]:c$6,[cg]:bv}],rules:[{[ce]:[U$3,V],error:"Accelerate cannot be used with FIPS",[cd]:e$1},{[ce]:[W,X$1],error:"Cannot set dual-stack in combination with a custom endpoint.",[cd]:e$1},{[ce]:[X$1,V],error:"A custom endpoint cannot be combined with FIPS",[cd]:e$1},{[ce]:[X$1,U$3],error:"A custom endpoint cannot be combined with S3 Accelerate",[cd]:e$1},{[ce]:[V,Y$1,Z$1],error:"Partition does not support FIPS",[cd]:e$1},{[ce]:[aa,{[cf]:j$1,[cg]:[ab,0,6,b$5],[ci]:k$2},{[cf]:g$1,[cg]:[{[ch]:k$2},"--x-s3"]}],rules:[{[ce]:by,error:"S3Express does not support Dual-stack.",[cd]:e$1},{[ce]:bz,error:"S3Express does not support S3 Accelerate.",[cd]:e$1},{[ce]:bA,rules:[{[ce]:bB,rules:[{[ce]:bC,rules:[{[ce]:bD,rules:[{endpoint:{[cj]:m$4,[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{endpoint:{[cj]:q$1,[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6},aj],[cd]:o$6},{[ce]:bC,rules:[{[ce]:bD,rules:[{endpoint:{[cj]:m$4,[ck]:ak,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{endpoint:{[cj]:q$1,[ck]:ak,[cq]:ah},[cd]:n$4}],[cd]:o$6},aj],[cd]:o$6},{[ce]:[al,am],rules:[{[ce]:[af,an],rules:[{[ce]:bF,endpoint:{[cj]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[ck]:ag,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{[ce]:bB,rules:[{[ce]:bG,rules:bH,[cd]:o$6},{[ce]:bI,rules:bH,[cd]:o$6},ao],[cd]:o$6},{[ce]:bG,rules:bJ,[cd]:o$6},{[ce]:bI,rules:bJ,[cd]:o$6},ao],[cd]:o$6},aj],[cd]:o$6},{[ce]:[ap,al,am],rules:[{[ce]:bA,endpoint:{[cj]:s$9,[ck]:ag,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://s3express-control-fips.{Region}.amazonaws.com",[ck]:ag,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3express-control.{Region}.amazonaws.com",[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6},{[ce]:[aa,{[cf]:j$1,[cg]:[ab,49,50,b$5],[ci]:t$7},{[cf]:j$1,[cg]:[ab,8,12,b$5],[ci]:u$6},{[cf]:j$1,[cg]:[ab,0,7,b$5],[ci]:v$3},{[cf]:j$1,[cg]:[ab,32,49,b$5],[ci]:w$3},{[cf]:f$6,[cg]:bv,[ci]:"regionPartition"},{[cf]:g$1,[cg]:[{[ch]:v$3},"--op-s3"]}],rules:[{[ce]:bL,rules:[{[ce]:[{[cf]:g$1,[cg]:[aq,"e"]}],rules:[{[ce]:bM,rules:[ar,{[ce]:bA,endpoint:{[cj]:"https://{Bucket}.ec2.{url#authority}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{endpoint:{[cj]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{[ce]:[{[cf]:g$1,[cg]:[aq,"o"]}],rules:[{[ce]:bM,rules:[ar,{[ce]:bA,endpoint:{[cj]:"https://{Bucket}.op-{outpostId}.{url#authority}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{endpoint:{[cj]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[cd]:e$1}],[cd]:o$6},{[ce]:bK,rules:[{[ce]:[X$1,{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[{[cf]:l$6,[cg]:bw}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[cd]:e$1},{[ce]:[at,ai],rules:[{[ce]:bN,rules:[{[ce]:bO,rules:[{[ce]:[U$3,Z$1],error:"S3 Accelerate cannot be used in this region",[cd]:e$1},{[ce]:[W,V,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,V,av,an,ay,az],rules:[{endpoint:aA,[cd]:n$4}],[cd]:o$6},{[ce]:[W,V,av,an,ay,aC],endpoint:aA,[cd]:n$4},{[ce]:[aD,V,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,V,av,an,ay,az],rules:[{endpoint:aE,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,V,av,an,ay,aC],endpoint:aE,[cd]:n$4},{[ce]:[W,aF,U$3,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,aF,U$3,an,ay,az],rules:[{endpoint:aG,[cd]:n$4}],[cd]:o$6},{[ce]:[W,aF,U$3,an,ay,aC],endpoint:aG,[cd]:n$4},{[ce]:[W,aF,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,aF,av,an,ay,az],rules:[{endpoint:aH,[cd]:n$4}],[cd]:o$6},{[ce]:[W,aF,av,an,ay,aC],endpoint:aH,[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,ad,aw],endpoint:{[cj]:A$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,aI,aw],endpoint:{[cj]:q$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,ad,ay,az],rules:[{[ce]:bP,endpoint:aJ,[cd]:n$4},{endpoint:aJ,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,av,X$1,ac,aI,ay,az],rules:[{[ce]:bP,endpoint:aK,[cd]:n$4},aL],[cd]:o$6},{[ce]:[aD,aF,av,X$1,ac,ad,ay,aC],endpoint:aJ,[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,aI,ay,aC],endpoint:aK,[cd]:n$4},{[ce]:[aD,aF,U$3,an,aw],endpoint:{[cj]:B$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,U$3,an,ay,az],rules:[{[ce]:bP,endpoint:aM,[cd]:n$4},{endpoint:aM,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,U$3,an,ay,aC],endpoint:aM,[cd]:n$4},{[ce]:[aD,aF,av,an,aw],endpoint:{[cj]:C$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,an,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:C$2,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:aN,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,av,an,ay,aC],endpoint:aN,[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[X$1,ac,{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[ae$1,"scheme"]},"http"]},{[cf]:p$4,[cg]:[ab,b$5]},at,aF,aD,av],rules:[{[ce]:bN,rules:[{[ce]:bO,rules:[aL],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[at,{[cf]:D$3,[cg]:bx,[ci]:E$1}],rules:[{[ce]:[{[cf]:h$4,[cg]:[aP,"resourceId[0]"],[ci]:F$3},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[aQ,G$1]}]}],rules:[{[ce]:[{[cf]:g$1,[cg]:[aR,H$1]}],rules:[{[ce]:bQ,rules:[{[ce]:bR,rules:[aT,aU,{[ce]:bT,rules:[aV,{[ce]:bU,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:bX,rules:[{[ce]:bY,rules:[{[ce]:[{[cf]:g$1,[cg]:[aY,G$1]}],error:"Invalid ARN: Missing account id",[cd]:e$1},{[ce]:bZ,rules:[{[ce]:ca,rules:[{[ce]:bA,endpoint:{[cj]:K,[ck]:aZ,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:aZ,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:aZ,[cq]:ah},[cd]:n$4}],[cd]:o$6},ba],[cd]:o$6},bb],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},be],[cd]:o$6},{error:"Invalid ARN: bucket ARN is missing a region",[cd]:e$1}],[cd]:o$6},bf],[cd]:o$6},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[cd]:e$1}],[cd]:o$6},{[ce]:bQ,rules:[{[ce]:bR,rules:[{[ce]:bT,rules:[{[ce]:bQ,rules:[{[ce]:bT,rules:[aV,{[ce]:bU,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:[{[cf]:g$1,[cg]:[aX,"{partitionResult#name}"]}],rules:[{[ce]:bY,rules:[{[ce]:[{[cf]:g$1,[cg]:[aR,z$1]}],rules:[{[ce]:bZ,rules:[{[ce]:ca,rules:[{[ce]:bz,error:"Access Points do not support S3 Accelerate",[cd]:e$1},{[ce]:[V,W],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[V,aD],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,W],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,X$1,ac],endpoint:{[cj]:K,[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4}],[cd]:o$6},ba],[cd]:o$6},bb],[cd]:o$6},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[cd]:e$1}],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},be],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{[ce]:[{[cf]:x$3,[cg]:[aS,b$5]}],rules:[{[ce]:by,error:"S3 MRAP does not support dual-stack",[cd]:e$1},{[ce]:bF,error:"S3 MRAP does not support FIPS",[cd]:e$1},{[ce]:bz,error:"S3 MRAP does not support S3 Accelerate",[cd]:e$1},{[ce]:[{[cf]:d$7,[cg]:[{[ch]:"DisableMultiRegionAccessPoints"},b$5]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[cd]:e$1},{[ce]:[{[cf]:f$6,[cg]:bv,[ci]:L}],rules:[{[ce]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[{[ch]:L},i$6]},{[cf]:h$4,[cg]:[aP,"partition"]}]}],rules:[{endpoint:{[cj]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[ck]:{[cm]:[{[cn]:b$5,name:"sigv4a",[co]:z$1,signingRegionSet:["*"]}]},[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[cd]:e$1}],[cd]:o$6}],[cd]:o$6},{error:"Invalid Access Point Name",[cd]:e$1}],[cd]:o$6},bf],[cd]:o$6},{[ce]:[{[cf]:g$1,[cg]:[aR,y$5]}],rules:[{[ce]:by,error:"S3 Outposts does not support Dual-stack",[cd]:e$1},{[ce]:bF,error:"S3 Outposts does not support FIPS",[cd]:e$1},{[ce]:bz,error:"S3 Outposts does not support S3 Accelerate",[cd]:e$1},{[ce]:[{[cf]:c$6,[cg]:[{[cf]:h$4,[cg]:[aP,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[cd]:e$1},{[ce]:[{[cf]:h$4,[cg]:bS,[ci]:w$3}],rules:[{[ce]:bL,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:bX,rules:[{[ce]:bY,rules:[{[ce]:bZ,rules:[{[ce]:[{[cf]:h$4,[cg]:bV,[ci]:M$4}],rules:[{[ce]:[{[cf]:h$4,[cg]:[aP,"resourceId[3]"],[ci]:J}],rules:[{[ce]:[{[cf]:g$1,[cg]:[{[ch]:M$4},I$8]}],rules:[{[ce]:bA,endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[ck]:bh,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bh,[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: expected an access point name",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: Expected a 4-component resource",[cd]:e$1}],[cd]:o$6},bb],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: The Outpost Id was not set",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: No ARN type specified",[cd]:e$1}],[cd]:o$6},{[ce]:[{[cf]:j$1,[cg]:[ab,0,4,a$5],[ci]:N$3},{[cf]:g$1,[cg]:[{[ch]:N$3},"arn:"]},{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[bi]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[cd]:e$1},{[ce]:[{[cf]:d$7,[cg]:[au,b$5]},bi],error:"Path-style addressing cannot be used with ARN buckets",[cd]:e$1},{[ce]:bD,rules:[{[ce]:bN,rules:[{[ce]:[av],rules:[{[ce]:[W,an,V,aw],endpoint:{[cj]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,an,V,ay,az],rules:[{endpoint:bj,[cd]:n$4}],[cd]:o$6},{[ce]:[W,an,V,ay,aC],endpoint:bj,[cd]:n$4},{[ce]:[aD,an,V,aw],endpoint:{[cj]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,an,V,ay,az],rules:[{endpoint:bk,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,an,V,ay,aC],endpoint:bk,[cd]:n$4},{[ce]:[W,an,aF,aw],endpoint:{[cj]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,an,aF,ay,az],rules:[{endpoint:bl,[cd]:n$4}],[cd]:o$6},{[ce]:[W,an,aF,ay,aC],endpoint:bl,[cd]:n$4},{[ce]:[aD,X$1,ac,aF,aw],endpoint:{[cj]:O$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,X$1,ac,aF,ay,az],rules:[{[ce]:bP,endpoint:bm,[cd]:n$4},{endpoint:bm,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,X$1,ac,aF,ay,aC],endpoint:bm,[cd]:n$4},{[ce]:[aD,an,aF,aw],endpoint:{[cj]:P$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,an,aF,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:P$2,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:bn,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,an,aF,ay,aC],endpoint:bn,[cd]:n$4}],[cd]:o$6},{error:"Path-style addressing cannot be used with S3 Accelerate",[cd]:e$1}],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{[ce]:[{[cf]:c$6,[cg]:[bo]},{[cf]:d$7,[cg]:[bo,b$5]}],rules:[{[ce]:bN,rules:[{[ce]:cb,rules:[aT,aU,{[ce]:bA,endpoint:{[cj]:s$9,[ck]:bp,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:bp,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[ck]:bp,[cq]:ah},[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[ap],rules:[{[ce]:bN,rules:[{[ce]:cb,rules:[{[ce]:[V,W,an,aw],endpoint:{[cj]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[V,W,an,ay,az],rules:[{endpoint:bq,[cd]:n$4}],[cd]:o$6},{[ce]:[V,W,an,ay,aC],endpoint:bq,[cd]:n$4},{[ce]:[V,aD,an,aw],endpoint:{[cj]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[V,aD,an,ay,az],rules:[{endpoint:br,[cd]:n$4}],[cd]:o$6},{[ce]:[V,aD,an,ay,aC],endpoint:br,[cd]:n$4},{[ce]:[aF,W,an,aw],endpoint:{[cj]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,W,an,ay,az],rules:[{endpoint:bs,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,W,an,ay,aC],endpoint:bs,[cd]:n$4},{[ce]:[aF,aD,X$1,ac,aw],endpoint:{[cj]:s$9,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,X$1,ac,ay,az],rules:[{[ce]:bP,endpoint:bt,[cd]:n$4},{endpoint:bt,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,aD,X$1,ac,ay,aC],endpoint:bt,[cd]:n$4},{[ce]:[aF,aD,an,aw],endpoint:{[cj]:Q$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,an,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:Q$1,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:bu,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,aD,an,ay,aC],endpoint:bu,[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{error:"A region must be set when sending requests to S3.",[cd]:e$1}]},ruleSet=_data,defaultEndpointResolver=(nt,rt={})=>resolveEndpoint(ruleSet,{endpointParams:nt,logger:rt.logger}),getRuntimeConfig$1=nt=>({apiVersion:"2006-03-01",base64Decoder:(nt==null?void 0:nt.base64Decoder)??fromBase64,base64Encoder:(nt==null?void 0:nt.base64Encoder)??toBase64,disableHostPrefix:(nt==null?void 0:nt.disableHostPrefix)??!1,endpointProvider:(nt==null?void 0:nt.endpointProvider)??defaultEndpointResolver,extensions:(nt==null?void 0:nt.extensions)??[],getAwsChunkedEncodingStream:(nt==null?void 0:nt.getAwsChunkedEncodingStream)??getAwsChunkedEncodingStream,logger:(nt==null?void 0:nt.logger)??new NoOpLogger,sdkStreamMixin:(nt==null?void 0:nt.sdkStreamMixin)??sdkStreamMixin,serviceId:(nt==null?void 0:nt.serviceId)??"S3",signerConstructor:(nt==null?void 0:nt.signerConstructor)??SignatureV4MultiRegion,signingEscapePath:(nt==null?void 0:nt.signingEscapePath)??!1,urlParser:(nt==null?void 0:nt.urlParser)??parseUrl,useArnRegion:(nt==null?void 0:nt.useArnRegion)??!1,utf8Decoder:(nt==null?void 0:nt.utf8Decoder)??fromUtf8$3,utf8Encoder:(nt==null?void 0:nt.utf8Encoder)??toUtf8$3}),DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"],resolveDefaultsModeConfig=({defaultsMode:nt}={})=>memoize(async()=>{const rt=typeof nt=="function"?await nt():nt;switch(rt==null?void 0:rt.toLowerCase()){case"auto":return Promise.resolve(isMobileBrowser()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(rt==null?void 0:rt.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${DEFAULTS_MODE_OPTIONS.join(", ")}, got ${rt}`)}}),isMobileBrowser=()=>{var it,st;const nt=typeof window<"u"&&((it=window==null?void 0:window.navigator)!=null&&it.userAgent)?Bowser.parse(window.navigator.userAgent):void 0,rt=(st=nt==null?void 0:nt.platform)==null?void 0:st.type;return rt==="tablet"||rt==="mobile"},getRuntimeConfig=nt=>{const rt=resolveDefaultsModeConfig(nt),it=()=>rt().then(loadConfigsForDefaultMode),st=getRuntimeConfig$1(nt);return{...st,...nt,runtime:"browser",defaultsMode:rt,bodyLengthChecker:(nt==null?void 0:nt.bodyLengthChecker)??calculateBodyLength,credentialDefaultProvider:(nt==null?void 0:nt.credentialDefaultProvider)??(lt=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(nt==null?void 0:nt.defaultUserAgentProvider)??defaultUserAgent({serviceId:st.serviceId,clientVersion:packageInfo.version}),eventStreamSerdeProvider:(nt==null?void 0:nt.eventStreamSerdeProvider)??eventStreamSerdeProvider,maxAttempts:(nt==null?void 0:nt.maxAttempts)??DEFAULT_MAX_ATTEMPTS,md5:(nt==null?void 0:nt.md5)??Md5,region:(nt==null?void 0:nt.region)??invalidProvider("Region is missing"),requestHandler:(nt==null?void 0:nt.requestHandler)??new FetchHttpHandler(it),retryMode:(nt==null?void 0:nt.retryMode)??(async()=>(await it()).retryMode||DEFAULT_RETRY_MODE),sha1:(nt==null?void 0:nt.sha1)??build$5.Sha1,sha256:(nt==null?void 0:nt.sha256)??build$2.Sha256,streamCollector:(nt==null?void 0:nt.streamCollector)??streamCollector,streamHasher:(nt==null?void 0:nt.streamHasher)??blobHasher,useDualstackEndpoint:(nt==null?void 0:nt.useDualstackEndpoint)??(()=>Promise.resolve(DEFAULT_USE_DUALSTACK_ENDPOINT)),useFipsEndpoint:(nt==null?void 0:nt.useFipsEndpoint)??(()=>Promise.resolve(DEFAULT_USE_FIPS_ENDPOINT))}},getAwsRegionExtensionConfiguration=nt=>{let rt=async()=>{if(nt.region===void 0)throw new Error("Region is missing from runtimeConfig");const it=nt.region;return typeof it=="string"?it:it()};return{setRegion(it){rt=it},region(){return rt}}},resolveAwsRegionExtensionConfiguration=nt=>({region:nt.region()}),asPartial=nt=>nt,resolveRuntimeExtensions=(nt,rt)=>{const it={...asPartial(getAwsRegionExtensionConfiguration(nt)),...asPartial(getDefaultExtensionConfiguration(nt)),...asPartial(getHttpHandlerExtensionConfiguration(nt))};return rt.forEach(st=>st.configure(it)),{...nt,...resolveAwsRegionExtensionConfiguration(it),...resolveDefaultRuntimeConfig(it),...resolveHttpHandlerRuntimeConfig(it)}};class S3Client extends Client{constructor(...[rt]){const it=getRuntimeConfig(rt||{}),st=resolveClientEndpointParameters(it),lt=resolveRegionConfig(st),ct=resolveEndpointConfig(lt),ut=resolveRetryConfig(ct),dt=ut,ht=resolveAwsAuthConfig(dt),pt=resolveS3Config(ht,{session:[()=>this,CreateSessionCommand]}),ft=resolveUserAgentConfig(pt),mt=resolveEventStreamSerdeConfig(ft),gt=resolveRuntimeExtensions(mt,(rt==null?void 0:rt.extensions)||[]);super(gt),this.config=gt,this.middlewareStack.use(getRetryPlugin(this.config)),this.middlewareStack.use(getContentLengthPlugin(this.config)),this.middlewareStack.use(getHostHeaderPlugin(this.config)),this.middlewareStack.use(getLoggerPlugin(this.config)),this.middlewareStack.use(getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(getAwsAuthPlugin(this.config)),this.middlewareStack.use(getValidateBucketNamePlugin(this.config)),this.middlewareStack.use(getAddExpectContinuePlugin(this.config)),this.middlewareStack.use(getRegionRedirectMiddlewarePlugin(this.config)),this.middlewareStack.use(getS3ExpressPlugin(this.config)),this.middlewareStack.use(getUserAgentPlugin(this.config))}destroy(){super.destroy()}}function ssecMiddleware(nt){return rt=>async it=>{const st={...it.input},lt=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const ct of lt){const ut=st[ct.target];if(ut){let dt;typeof ut=="string"?/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ut)?dt=nt.base64Decoder(ut):(dt=nt.utf8Decoder(ut),st[ct.target]=nt.base64Encoder(dt)):(dt=ArrayBuffer.isView(ut)?new Uint8Array(ut.buffer,ut.byteOffset,ut.byteLength):new Uint8Array(ut),st[ct.target]=nt.base64Encoder(dt));const ht=new nt.md5;ht.update(dt),st[ct.hash]=nt.base64Encoder(await ht.digest())}}return rt({...it,input:st})}}const ssecMiddlewareOptions={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},getSsecPlugin=nt=>({applyToStack:rt=>{rt.add(ssecMiddleware(nt),ssecMiddlewareOptions)}});var ChecksumAlgorithm;(function(nt){nt.MD5="MD5",nt.CRC32="CRC32",nt.CRC32C="CRC32C",nt.SHA1="SHA1",nt.SHA256="SHA256"})(ChecksumAlgorithm||(ChecksumAlgorithm={}));var ChecksumLocation;(function(nt){nt.HEADER="header",nt.TRAILER="trailer"})(ChecksumLocation||(ChecksumLocation={}));const DEFAULT_CHECKSUM_ALGORITHM=ChecksumAlgorithm.MD5,S3_EXPRESS_DEFAULT_CHECKSUM_ALGORITHM=ChecksumAlgorithm.CRC32,CLIENT_SUPPORTED_ALGORITHMS=[ChecksumAlgorithm.CRC32,ChecksumAlgorithm.CRC32C,ChecksumAlgorithm.SHA1,ChecksumAlgorithm.SHA256],PRIORITY_ORDER_ALGORITHMS=[ChecksumAlgorithm.CRC32,ChecksumAlgorithm.CRC32C,ChecksumAlgorithm.SHA1,ChecksumAlgorithm.SHA256],getChecksumAlgorithmForRequest=(nt,{requestChecksumRequired:rt,requestAlgorithmMember:it},st)=>{const lt=st?S3_EXPRESS_DEFAULT_CHECKSUM_ALGORITHM:DEFAULT_CHECKSUM_ALGORITHM;if(!it||!nt[it])return rt?lt:void 0;const ct=nt[it];if(!CLIENT_SUPPORTED_ALGORITHMS.includes(ct))throw new Error(`The checksum algorithm "${ct}" is not supported by the client. Select one of ${CLIENT_SUPPORTED_ALGORITHMS}.`);return ct},getChecksumLocationName=nt=>nt===ChecksumAlgorithm.MD5?"content-md5":`x-amz-checksum-${nt.toLowerCase()}`,hasHeader=(nt,rt)=>{const it=nt.toLowerCase();for(const st of Object.keys(rt))if(it===st.toLowerCase())return!0;return!1},isStreaming=nt=>nt!==void 0&&typeof nt!="string"&&!ArrayBuffer.isView(nt)&&!isArrayBuffer(nt);var build={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(nt,rt){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics(nt,rt)};function __extends(nt,rt){extendStatics(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign=function(){return __assign=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign.apply(this,arguments)};function __rest(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(ft){try{pt(st.next(ft))}catch(mt){ut(mt)}}function ht(ft){try{pt(st.throw(ft))}catch(mt){ut(mt)}}function pt(ft){ft.done?ct(ft.value):lt(ft.value).then(dt,ht)}pt((st=st.apply(nt,rt||[])).next())})}function __generator(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(pt){return function(ft){return ht([pt,ft])}}function ht(pt){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=pt[0]&2?lt.return:pt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,pt[1])).done)return ct;switch(lt=0,ct&&(pt=[pt[0]&2,ct.value]),pt[0]){case 0:case 1:ct=pt;break;case 4:return it.label++,{value:pt[1],done:!1};case 5:it.label++,lt=pt[1],pt=[0];continue;case 7:pt=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pt[0]===6||pt[0]===2)){it=0;continue}if(pt[0]===3&&(!ct||pt[1]>ct[0]&&pt[1]<ct[3])){it.label=pt[1];break}if(pt[0]===6&&it.label<ct[1]){it.label=ct[1],ct=pt;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(pt);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}pt=rt.call(nt,it)}catch(ft){pt=[6,ft],lt=0}finally{st=ct=0}if(pt[0]&5)throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}}function __createBinding(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read(arguments[rt]));return nt}function __spreadArrays(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await(nt){return this instanceof __await?(this.v=nt,this):new __await(nt)}function __asyncGenerator(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await?Promise.resolve(gt.value.v).then(pt,ft):mt(ct[0][2],gt)}function pt(gt){dt("next",gt)}function ft(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values=="function"?__values(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(pt){ct({value:pt,done:dt})},ut)}}function __makeTemplateObject(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter,__classPrivateFieldGet,__classPrivateFieldSet,__createBinding,__decorate,__exportStar,__extends,__generator,__importDefault,__importStar,__makeTemplateObject,__metadata,__param,__read,__rest,__spread,__spreadArrays,__values},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(tslib_es6);var aws_crc32c={},hasRequiredAws_crc32c;function requireAws_crc32c(){if(hasRequiredAws_crc32c)return aws_crc32c;hasRequiredAws_crc32c=1,Object.defineProperty(aws_crc32c,"__esModule",{value:!0}),aws_crc32c.AwsCrc32c=void 0;var nt=require$$0,rt=requireBuild$5(),it=requireBuild(),st=function(){function lt(){this.crc32c=new it.Crc32c}return lt.prototype.update=function(ct){(0,rt.isEmptyData)(ct)||this.crc32c.update((0,rt.convertToBuffer)(ct))},lt.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(ct){return[2,(0,rt.numToUint8)(this.crc32c.digest())]})})},lt.prototype.reset=function(){this.crc32c=new it.Crc32c},lt}();return aws_crc32c.AwsCrc32c=st,aws_crc32c}var hasRequiredBuild;function requireBuild(){return hasRequiredBuild||(hasRequiredBuild=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.AwsCrc32c=nt.Crc32c=nt.crc32c=void 0;var rt=require$$0,it=requireBuild$5();function st(ht){return new lt().update(ht).digest()}nt.crc32c=st;var lt=function(){function ht(){this.checksum=4294967295}return ht.prototype.update=function(pt){var ft,mt;try{for(var gt=rt.__values(pt),xt=gt.next();!xt.done;xt=gt.next()){var yt=xt.value;this.checksum=this.checksum>>>8^ut[(this.checksum^yt)&255]}}catch(vt){ft={error:vt}}finally{try{xt&&!xt.done&&(mt=gt.return)&&mt.call(gt)}finally{if(ft)throw ft.error}}return this},ht.prototype.digest=function(){return(this.checksum^4294967295)>>>0},ht}();nt.Crc32c=lt;var ct=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],ut=(0,it.uint32ArrayFrom)(ct),dt=requireAws_crc32c();Object.defineProperty(nt,"AwsCrc32c",{enumerable:!0,get:function(){return dt.AwsCrc32c}})}(build)),build}var buildExports=requireBuild();const selectChecksumAlgorithmFunction=(nt,rt)=>({[ChecksumAlgorithm.MD5]:rt.md5,[ChecksumAlgorithm.CRC32]:buildExports$1.AwsCrc32,[ChecksumAlgorithm.CRC32C]:buildExports.AwsCrc32c,[ChecksumAlgorithm.SHA1]:rt.sha1,[ChecksumAlgorithm.SHA256]:rt.sha256})[nt],stringHasher=(nt,rt)=>{const it=new nt;return it.update(toUint8Array(rt||"")),it.digest()},flexibleChecksumsMiddlewareOptions={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},flexibleChecksumsMiddleware=(nt,rt)=>(it,st)=>async lt=>{if(!HttpRequest.isInstance(lt.request))return it(lt);const{request:ct}=lt,{body:ut,headers:dt}=ct,{base64Encoder:ht,streamHasher:pt}=nt,{input:ft,requestChecksumRequired:mt,requestAlgorithmMember:gt}=rt,xt=getChecksumAlgorithmForRequest(ft,{requestChecksumRequired:mt,requestAlgorithmMember:gt},!!st.isS3ExpressBucket);let yt=ut,vt=dt;if(xt){const Et=getChecksumLocationName(xt),wt=selectChecksumAlgorithmFunction(xt,nt);if(isStreaming(ut)){const{getAwsChunkedEncodingStream:Rt,bodyLengthChecker:Tt}=nt;yt=Rt(ut,{base64Encoder:ht,bodyLengthChecker:Tt,checksumLocationName:Et,checksumAlgorithmFn:wt,streamHasher:pt}),vt={...dt,"content-encoding":dt["content-encoding"]?`${dt["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":dt["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Et},delete vt["content-length"]}else if(!hasHeader(Et,dt)){const Rt=await stringHasher(wt,ut);vt={...dt,[Et]:ht(Rt)}}}return await it({...lt,request:{...ct,headers:vt,body:yt}})},getChecksumAlgorithmListForResponse=(nt=[])=>{const rt=[];for(const it of PRIORITY_ORDER_ALGORITHMS)!nt.includes(it)||!CLIENT_SUPPORTED_ALGORITHMS.includes(it)||rt.push(it);return rt},isChecksumWithPartNumber=nt=>{const rt=nt.lastIndexOf("-");if(rt!==-1){const it=nt.slice(rt+1);if(!it.startsWith("0")){const st=parseInt(it,10);if(!isNaN(st)&&st>=1&&st<=1e4)return!0}}return!1};function createReadStreamOnBuffer(nt){return new Blob([nt]).stream()}const getChecksum=async(nt,{streamHasher:rt,checksumAlgorithmFn:it,base64Encoder:st})=>{const lt=isStreaming(nt)?rt(it,nt):stringHasher(it,nt);return st(await lt)},validateChecksumFromResponse=async(nt,{config:rt,responseAlgorithms:it})=>{const st=getChecksumAlgorithmListForResponse(it),{body:lt,headers:ct}=nt;for(const ut of st){const dt=getChecksumLocationName(ut),ht=ct[dt];if(ht){const pt=selectChecksumAlgorithmFunction(ut,rt),{streamHasher:ft,base64Encoder:mt}=rt,gt=await getChecksum(lt,{streamHasher:ft,checksumAlgorithmFn:pt,base64Encoder:mt});if(gt===ht)break;throw new Error(`Checksum mismatch: expected "${gt}" but received "${ht}" in response header "${dt}".`)}}},flexibleChecksumsResponseMiddlewareOptions={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},flexibleChecksumsResponseMiddleware=(nt,rt)=>(it,st)=>async lt=>{if(!HttpRequest.isInstance(lt.request))return it(lt);const ct=lt.input,ut=await it(lt),dt=ut.response;let ht;const{requestValidationModeMember:pt,responseAlgorithms:ft}=rt;if(pt&&ct[pt]==="ENABLED"){const{clientName:mt,commandName:gt}=st;if(mt==="S3Client"&&gt==="GetObjectCommand"&&getChecksumAlgorithmListForResponse(ft).every(vt=>{const St=getChecksumLocationName(vt),Et=dt.headers[St];return!Et||isChecksumWithPartNumber(Et)}))return ut;const yt=isStreaming(dt.body);yt&&(ht=await nt.streamCollector(dt.body),dt.body=createReadStreamOnBuffer(ht)),await validateChecksumFromResponse(ut.response,{config:nt,responseAlgorithms:ft}),yt&&ht&&(dt.body=createReadStreamOnBuffer(ht))}return ut},getFlexibleChecksumsPlugin=(nt,rt)=>({applyToStack:it=>{it.add(flexibleChecksumsMiddleware(nt,rt),flexibleChecksumsMiddlewareOptions),it.addRelativeTo(flexibleChecksumsResponseMiddleware(nt,rt),flexibleChecksumsResponseMiddlewareOptions)}});class PutObjectCommand extends Command.classBuilder().ep({...commonParams,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(rt,it,st,lt){return[getSerdePlugin(st,this.serialize,this.deserialize),getEndpointPlugin(st,rt.getEndpointParameterInstructions()),getCheckContentLengthHeaderPlugin(),getSsecPlugin(st),getFlexibleChecksumsPlugin(st,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1})]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(PutObjectRequestFilterSensitiveLog,PutObjectOutputFilterSensitiveLog).ser(se_PutObjectCommand).de(de_PutObjectCommand).build(){}const Profile=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(userState),[st,lt]=reactExports.useState({}),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(!1),pt=reactExports.useRef(null),ft="ap-northeast-2",mt="3dbody-image",gt=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload("/")},xt=new S3Client({region:ft,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),yt=async vt=>{if(console.log("프로필 변경"),vt.target.files[0])lt(vt.target.files[0]),ut(`${uuid$1()}_${vt.currentTarget.files[0].name}`),ht(!0);else{ht(!1);return}};return reactExports.useEffect(()=>{let vt="";if(dt){ct.includes("jpg")||ct.includes("jpeg")?vt="image/jpeg":ct.includes("png")?vt="image/png":ct.includes("gif")&&(vt="image/gif");const St={Bucket:mt,Key:ct,Body:st,ContentType:vt};xt.send(new PutObjectCommand(St)).then(()=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/profile-image`,headers:{Authorization:`Bearer ${rt.token}`},data:{profile_image:`https://do9nz79ez57wg.cloudfront.net/${ct}`}}).then(Et=>{Et.data.data_header.success_code===0&&it({token:rt.token,info:{...rt.info,profile_image:`https://do9nz79ez57wg.cloudfront.net/${ct}`}})})})}},[st]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center p-4 pb-6 bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center",children:[jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/jpg,image/png,image/jpeg",name:"profile_img",onChange:yt,ref:pt}),jsxRuntimeExports.jsx("img",{className:"w-1/4 m-2 border rounded-full object-fit:corver",src:rt.info.profile_image?rt.info.profile_image:"/challenge/기본이미지.jpg",alt:"기본 이미지",onClick:()=>{pt.current.click()}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2 m-2",children:[jsxRuntimeExports.jsxs("h3",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:rt.info.nickname}),"님"]}),jsxRuntimeExports.jsx(Link,{to:"/mypage/myinfo",children:jsxRuntimeExports.jsx(PencilSquareIcon$1,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center m-2",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-2 py-1 border rounded-md border-teal-700",buttonName:"로그아웃",onClick:gt})})]})},MyPage=()=>jsxRuntimeExports.jsx("div",{className:"h-screen bg-gray-100",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Profile,{}),jsxRuntimeExports.jsx("hr",{className:"bg-gray-500"}),jsxRuntimeExports.jsx(Menus,{})]})}),BackButton=()=>{const nt=useNavigate(),rt=()=>{nt(-1)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 my-4 text-blue-500",onClick:rt})})})},MyInfo=({category:nt,data:rt,modalname:it})=>{const[st,lt]=Recoil_index_22(modalState);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("div",{children:nt}),jsxRuntimeExports.jsx("div",{onClick:ct=>{lt({type:it,data:ct.currentTarget.innerText})},children:rt})]}),jsxRuntimeExports.jsx("hr",{})]})};MyInfo.propTypes={category:propTypesExports.PropTypes.string,data:propTypesExports.PropTypes.any,modalname:propTypesExports.PropTypes.string};const PageTitle=({pageTitle:nt})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4 font-semibold",children:nt}),jsxRuntimeExports.jsx("hr",{})]});PageTitle.propTypes={pageTitle:PropTypes.string};const MyInfoPage=()=>{const nt=Recoil_index_20(userState);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"회원 정보 수정"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4 ",children:[jsxRuntimeExports.jsx(MyInfo,{category:"이메일",data:nt.info.email}),jsxRuntimeExports.jsx(MyInfo,{category:"이름",data:nt.info.name}),jsxRuntimeExports.jsx(MyInfo,{category:"닉네임",data:nt.info.nickname,modalname:"changeNickname"}),jsxRuntimeExports.jsx(MyInfo,{category:"성별",data:nt.info.gender==="MALE"?"남자":"여자",modalname:"changeGender"}),jsxRuntimeExports.jsx(MyInfo,{category:"신장",data:nt.info.height,modalname:"changeHeight"}),jsxRuntimeExports.jsx(MyInfo,{category:"체중",data:nt.info.weight,modalname:"changeWeight"}),jsxRuntimeExports.jsx(MyInfo,{category:"생년월일",data:nt.info.birth_date})]})]})},Notice=({notice:nt})=>{const rt=nt.createdAt.substring(0,10);return jsxRuntimeExports.jsxs("div",{className:"flex p-2 text-white bg-teal-700 border rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"basis-1/3",children:rt}),jsxRuntimeExports.jsx("p",{className:"basis-2/3",children:nt.title})]})};Notice.propTypes={notice:propTypesExports.PropTypes.object};const NoticePage=()=>{const[nt,rt]=reactExports.useState(null),it=Recoil_index_20(baseUrlState),st=async()=>await axios.get(`${it}api/notice/posts/list`).then(lt=>{rt(lt.data.map(ct=>jsxRuntimeExports.jsx(Notice,{notice:ct},ct.postId)))});return reactExports.useEffect(()=>{st()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"공지사항"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 m-4",children:nt})]})},NoticeDetailPage=()=>jsxRuntimeExports.jsx("div",{}),FAQ=({question:nt})=>jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"flex content-center justify-center w-9/12 text-white bg-teal-700 border rounded-xl",children:jsxRuntimeExports.jsx(Link,{className:"m-2",to:`/mypage/FAQ/${nt.postId}`,children:nt.title})})});FAQ.propTypes={question:propTypesExports.PropTypes.object};const FAQPage=()=>{const[nt,rt]=reactExports.useState(null),it=Recoil_index_20(baseUrlState),st=async()=>await axios.get(`${it}api/faq/posts/list`).then(lt=>{rt(lt.data.map(ct=>jsxRuntimeExports.jsx(FAQ,{question:ct},ct.postId)))});return reactExports.useEffect(()=>{st()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"FAQ"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 m-4",children:nt})]})},CalendarMonth=()=>{const[nt,rt]=Recoil_index_22(selectedDateState),[it,st]=reactExports.useState(new Date(nt[0],nt[1]-1,nt[2])),[lt,ct]=reactExports.useState([]),ut=["일","월","화","수","목","금","토"],dt=Recoil_index_24(selectedDayState);reactExports.useEffect(()=>{ht()},[it]);const ht=()=>{const yt=new Date(it.getFullYear(),it.getMonth(),1),vt=new Date(it.getFullYear(),it.getMonth()+1,0),St=yt.getDay(),Et=vt.getDate(),wt=St>0?new Array(St).fill(null).map((It,At)=>[new Date(it.getFullYear(),it.getMonth(),0).getDate()-St+At+1,"prev"]):[],Rt=new Array(Et).fill(null).map((It,At)=>[At+1,"cur"]),Tt=new Array(7-(vt.getDay()+1)).fill(null).map((It,At)=>[At+1,"next"]);ct([...wt,...Rt,...Tt])},pt=()=>{st(new Date(it.getFullYear(),it.getMonth()-1,1))},ft=()=>{st(new Date(it.getFullYear(),it.getMonth()+1,1))},mt=yt=>{const vt=new Date;return it.getFullYear()===vt.getFullYear()&&it.getMonth()===vt.getMonth()&&yt===vt.getDate()},gt=yt=>{yt[1]==="cur"?rt([it.getFullYear(),it.getMonth()+1,yt[0]]):yt[1]==="prev"?(rt([it.getMonth()===0?it.getFullYear()-1:it.getFullYear(),it.getMonth()===0?12:it.getMonth(),yt[0]]),pt()):yt[1]==="next"&&(rt([it.getMonth()===11?it.getFullYear()+1:it.getFullYear(),it.getMonth()===11?1:it.getMonth()+2,yt[0]]),ft())},xt=yt=>it.getFullYear()===nt[0]&&it.getMonth()+1===nt[1]&&yt[0]===nt[2]&&yt[1]==="cur";return reactExports.useEffect(()=>{const yt=new Date(nt[0],nt[1]-1,nt[2]);dt(ut[yt.getDay()])},[nt]),jsxRuntimeExports.jsxs("div",{className:"max-w-screen-sm mx-auto mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4",children:[jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6",onClick:pt}),jsxRuntimeExports.jsx("span",{className:"font-bold text-gray-800",children:it.toLocaleDateString("ko-KR",{year:"numeric",month:"short"})}),jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6",onClick:ft})]}),jsxRuntimeExports.jsxs("table",{className:"w-full mx-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-red-500",children:"일"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"월"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"화"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"수"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"목"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"금"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-blue-500",children:"토"})]})}),jsxRuntimeExports.jsx("tbody",{children:lt.reduce((yt,vt,St)=>(St%7===0?yt.push([vt]):yt[yt.length-1].push(vt),yt),[]).map((yt,vt)=>jsxRuntimeExports.jsx("tr",{children:yt.map((St,Et)=>jsxRuntimeExports.jsx("td",{onClick:()=>gt(St),className:`
                      text-center
                      ${St[1]!=="cur"?"text-gray-300":""}
                      ${mt(St[0])?"font-semibold text-teal-700":""}
                    `,children:jsxRuntimeExports.jsx("div",{className:`
                        flex justify-center items-center
                        ${xt(St)?"bg-teal-700 rounded-full text-white":""}
                        w-8 h-8
                        mx-auto
                      `,children:St[0]})},Et))},vt))})]})]})},ToggleTap=({leftTitle:nt,rightTitle:rt,state:it})=>{const[st,lt]=Recoil_index_22(it),ct=()=>{lt("left")},ut=()=>{lt("right")};return jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full border border-teal-700 rounded-md",children:[jsxRuntimeExports.jsx("div",{className:`w-1/2 text-center ${st==="left"?"bg-teal-700 text-white rounded":null}`,onClick:()=>ct(),children:nt}),jsxRuntimeExports.jsx("div",{className:`w-1/2 text-center ${st==="right"?"bg-teal-700 text-white rounded":null}`,onClick:()=>ut(),children:rt})]})})};ToggleTap.propTypes={leftTitle:PropTypes.string,rightTitle:PropTypes.string,state:PropTypes.object};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function round$1(nt){return nt+.5|0}const lim=(nt,rt,it)=>Math.max(Math.min(nt,it),rt);function p2b(nt){return lim(round$1(nt*2.55),0,255)}function n2b(nt){return lim(round$1(nt*255),0,255)}function b2n(nt){return lim(round$1(nt/2.55)/100,0,1)}function n2p(nt){return lim(round$1(nt*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=nt=>hex[nt&15],h2=nt=>hex[(nt&240)>>4]+hex[nt&15],eq=nt=>(nt&240)>>4===(nt&15),isShort=nt=>eq(nt.r)&&eq(nt.g)&&eq(nt.b)&&eq(nt.a);function hexParse(nt){var rt=nt.length,it;return nt[0]==="#"&&(rt===4||rt===5?it={r:255&map$1[nt[1]]*17,g:255&map$1[nt[2]]*17,b:255&map$1[nt[3]]*17,a:rt===5?map$1[nt[4]]*17:255}:(rt===7||rt===9)&&(it={r:map$1[nt[1]]<<4|map$1[nt[2]],g:map$1[nt[3]]<<4|map$1[nt[4]],b:map$1[nt[5]]<<4|map$1[nt[6]],a:rt===9?map$1[nt[7]]<<4|map$1[nt[8]]:255})),it}const alpha=(nt,rt)=>nt<255?rt(nt):"";function hexString(nt){var rt=isShort(nt)?h1:h2;return nt?"#"+rt(nt.r)+rt(nt.g)+rt(nt.b)+alpha(nt.a,rt):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(nt,rt,it){const st=rt*Math.min(it,1-it),lt=(ct,ut=(ct+nt/30)%12)=>it-st*Math.max(Math.min(ut-3,9-ut,1),-1);return[lt(0),lt(8),lt(4)]}function hsv2rgbn(nt,rt,it){const st=(lt,ct=(lt+nt/60)%6)=>it-it*rt*Math.max(Math.min(ct,4-ct,1),0);return[st(5),st(3),st(1)]}function hwb2rgbn(nt,rt,it){const st=hsl2rgbn(nt,1,.5);let lt;for(rt+it>1&&(lt=1/(rt+it),rt*=lt,it*=lt),lt=0;lt<3;lt++)st[lt]*=1-rt-it,st[lt]+=rt;return st}function hueValue(nt,rt,it,st,lt){return nt===lt?(rt-it)/st+(rt<it?6:0):rt===lt?(it-nt)/st+2:(nt-rt)/st+4}function rgb2hsl(nt){const it=nt.r/255,st=nt.g/255,lt=nt.b/255,ct=Math.max(it,st,lt),ut=Math.min(it,st,lt),dt=(ct+ut)/2;let ht,pt,ft;return ct!==ut&&(ft=ct-ut,pt=dt>.5?ft/(2-ct-ut):ft/(ct+ut),ht=hueValue(it,st,lt,ft,ct),ht=ht*60+.5),[ht|0,pt||0,dt]}function calln(nt,rt,it,st){return(Array.isArray(rt)?nt(rt[0],rt[1],rt[2]):nt(rt,it,st)).map(n2b)}function hsl2rgb(nt,rt,it){return calln(hsl2rgbn,nt,rt,it)}function hwb2rgb(nt,rt,it){return calln(hwb2rgbn,nt,rt,it)}function hsv2rgb(nt,rt,it){return calln(hsv2rgbn,nt,rt,it)}function hue(nt){return(nt%360+360)%360}function hueParse(nt){const rt=HUE_RE.exec(nt);let it=255,st;if(!rt)return;rt[5]!==st&&(it=rt[6]?p2b(+rt[5]):n2b(+rt[5]));const lt=hue(+rt[2]),ct=+rt[3]/100,ut=+rt[4]/100;return rt[1]==="hwb"?st=hwb2rgb(lt,ct,ut):rt[1]==="hsv"?st=hsv2rgb(lt,ct,ut):st=hsl2rgb(lt,ct,ut),{r:st[0],g:st[1],b:st[2],a:it}}function rotate(nt,rt){var it=rgb2hsl(nt);it[0]=hue(it[0]+rt),it=hsl2rgb(it),nt.r=it[0],nt.g=it[1],nt.b=it[2]}function hslString(nt){if(!nt)return;const rt=rgb2hsl(nt),it=rt[0],st=n2p(rt[1]),lt=n2p(rt[2]);return nt.a<255?`hsla(${it}, ${st}%, ${lt}%, ${b2n(nt.a)})`:`hsl(${it}, ${st}%, ${lt}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const nt={},rt=Object.keys(names$1),it=Object.keys(map);let st,lt,ct,ut,dt;for(st=0;st<rt.length;st++){for(ut=dt=rt[st],lt=0;lt<it.length;lt++)ct=it[lt],dt=dt.replace(ct,map[ct]);ct=parseInt(names$1[ut],16),nt[dt]=[ct>>16&255,ct>>8&255,ct&255]}return nt}let names;function nameParse(nt){names||(names=unpack(),names.transparent=[0,0,0,0]);const rt=names[nt.toLowerCase()];return rt&&{r:rt[0],g:rt[1],b:rt[2],a:rt.length===4?rt[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(nt){const rt=RGB_RE.exec(nt);let it=255,st,lt,ct;if(rt){if(rt[7]!==st){const ut=+rt[7];it=rt[8]?p2b(ut):lim(ut*255,0,255)}return st=+rt[1],lt=+rt[3],ct=+rt[5],st=255&(rt[2]?p2b(st):lim(st,0,255)),lt=255&(rt[4]?p2b(lt):lim(lt,0,255)),ct=255&(rt[6]?p2b(ct):lim(ct,0,255)),{r:st,g:lt,b:ct,a:it}}}function rgbString(nt){return nt&&(nt.a<255?`rgba(${nt.r}, ${nt.g}, ${nt.b}, ${b2n(nt.a)})`:`rgb(${nt.r}, ${nt.g}, ${nt.b})`)}const to=nt=>nt<=.0031308?nt*12.92:Math.pow(nt,1/2.4)*1.055-.055,from=nt=>nt<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4);function interpolate$1(nt,rt,it){const st=from(b2n(nt.r)),lt=from(b2n(nt.g)),ct=from(b2n(nt.b));return{r:n2b(to(st+it*(from(b2n(rt.r))-st))),g:n2b(to(lt+it*(from(b2n(rt.g))-lt))),b:n2b(to(ct+it*(from(b2n(rt.b))-ct))),a:nt.a+it*(rt.a-nt.a)}}function modHSL(nt,rt,it){if(nt){let st=rgb2hsl(nt);st[rt]=Math.max(0,Math.min(st[rt]+st[rt]*it,rt===0?360:1)),st=hsl2rgb(st),nt.r=st[0],nt.g=st[1],nt.b=st[2]}}function clone$1(nt,rt){return nt&&Object.assign(rt||{},nt)}function fromObject(nt){var rt={r:0,g:0,b:0,a:255};return Array.isArray(nt)?nt.length>=3&&(rt={r:nt[0],g:nt[1],b:nt[2],a:255},nt.length>3&&(rt.a=n2b(nt[3]))):(rt=clone$1(nt,{r:0,g:0,b:0,a:1}),rt.a=n2b(rt.a)),rt}function functionParse(nt){return nt.charAt(0)==="r"?rgbParse(nt):hueParse(nt)}let Color$1=class gv{constructor(rt){if(rt instanceof gv)return rt;const it=typeof rt;let st;it==="object"?st=fromObject(rt):it==="string"&&(st=hexParse(rt)||nameParse(rt)||functionParse(rt)),this._rgb=st,this._valid=!!st}get valid(){return this._valid}get rgb(){var rt=clone$1(this._rgb);return rt&&(rt.a=b2n(rt.a)),rt}set rgb(rt){this._rgb=fromObject(rt)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(rt,it){if(rt){const st=this.rgb,lt=rt.rgb;let ct;const ut=it===ct?.5:it,dt=2*ut-1,ht=st.a-lt.a,pt=((dt*ht===-1?dt:(dt+ht)/(1+dt*ht))+1)/2;ct=1-pt,st.r=255&pt*st.r+ct*lt.r+.5,st.g=255&pt*st.g+ct*lt.g+.5,st.b=255&pt*st.b+ct*lt.b+.5,st.a=ut*st.a+(1-ut)*lt.a,this.rgb=st}return this}interpolate(rt,it){return rt&&(this._rgb=interpolate$1(this._rgb,rt._rgb,it)),this}clone(){return new gv(this.rgb)}alpha(rt){return this._rgb.a=n2b(rt),this}clearer(rt){const it=this._rgb;return it.a*=1-rt,this}greyscale(){const rt=this._rgb,it=round$1(rt.r*.3+rt.g*.59+rt.b*.11);return rt.r=rt.g=rt.b=it,this}opaquer(rt){const it=this._rgb;return it.a*=1+rt,this}negate(){const rt=this._rgb;return rt.r=255-rt.r,rt.g=255-rt.g,rt.b=255-rt.b,this}lighten(rt){return modHSL(this._rgb,2,rt),this}darken(rt){return modHSL(this._rgb,2,-rt),this}saturate(rt){return modHSL(this._rgb,1,rt),this}desaturate(rt){return modHSL(this._rgb,1,-rt),this}rotate(rt){return rotate(this._rgb,rt),this}};/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function noop$1(){}const uid=(()=>{let nt=0;return()=>nt++})();function isNullOrUndef(nt){return nt===null||typeof nt>"u"}function isArray(nt){if(Array.isArray&&Array.isArray(nt))return!0;const rt=Object.prototype.toString.call(nt);return rt.slice(0,7)==="[object"&&rt.slice(-6)==="Array]"}function isObject(nt){return nt!==null&&Object.prototype.toString.call(nt)==="[object Object]"}function isNumberFinite(nt){return(typeof nt=="number"||nt instanceof Number)&&isFinite(+nt)}function finiteOrDefault(nt,rt){return isNumberFinite(nt)?nt:rt}function valueOrDefault(nt,rt){return typeof nt>"u"?rt:nt}const toDimension=(nt,rt)=>typeof nt=="string"&&nt.endsWith("%")?parseFloat(nt)/100*rt:+nt;function callback(nt,rt,it){if(nt&&typeof nt.call=="function")return nt.apply(it,rt)}function each(nt,rt,it,st){let lt,ct,ut;if(isArray(nt))if(ct=nt.length,st)for(lt=ct-1;lt>=0;lt--)rt.call(it,nt[lt],lt);else for(lt=0;lt<ct;lt++)rt.call(it,nt[lt],lt);else if(isObject(nt))for(ut=Object.keys(nt),ct=ut.length,lt=0;lt<ct;lt++)rt.call(it,nt[ut[lt]],ut[lt])}function _elementsEqual(nt,rt){let it,st,lt,ct;if(!nt||!rt||nt.length!==rt.length)return!1;for(it=0,st=nt.length;it<st;++it)if(lt=nt[it],ct=rt[it],lt.datasetIndex!==ct.datasetIndex||lt.index!==ct.index)return!1;return!0}function clone(nt){if(isArray(nt))return nt.map(clone);if(isObject(nt)){const rt=Object.create(null),it=Object.keys(nt),st=it.length;let lt=0;for(;lt<st;++lt)rt[it[lt]]=clone(nt[it[lt]]);return rt}return nt}function isValidKey(nt){return["__proto__","prototype","constructor"].indexOf(nt)===-1}function _merger(nt,rt,it,st){if(!isValidKey(nt))return;const lt=rt[nt],ct=it[nt];isObject(lt)&&isObject(ct)?merge(lt,ct,st):rt[nt]=clone(ct)}function merge(nt,rt,it){const st=isArray(rt)?rt:[rt],lt=st.length;if(!isObject(nt))return nt;it=it||{};const ct=it.merger||_merger;let ut;for(let dt=0;dt<lt;++dt){if(ut=st[dt],!isObject(ut))continue;const ht=Object.keys(ut);for(let pt=0,ft=ht.length;pt<ft;++pt)ct(ht[pt],nt,ut,it)}return nt}function mergeIf(nt,rt){return merge(nt,rt,{merger:_mergerIf})}function _mergerIf(nt,rt,it){if(!isValidKey(nt))return;const st=rt[nt],lt=it[nt];isObject(st)&&isObject(lt)?mergeIf(st,lt):Object.prototype.hasOwnProperty.call(rt,nt)||(rt[nt]=clone(lt))}const keyResolvers={"":nt=>nt,x:nt=>nt.x,y:nt=>nt.y};function _splitKey(nt){const rt=nt.split("."),it=[];let st="";for(const lt of rt)st+=lt,st.endsWith("\\")?st=st.slice(0,-1)+".":(it.push(st),st="");return it}function _getKeyResolver(nt){const rt=_splitKey(nt);return it=>{for(const st of rt){if(st==="")break;it=it&&it[st]}return it}}function resolveObjectKey(nt,rt){return(keyResolvers[rt]||(keyResolvers[rt]=_getKeyResolver(rt)))(nt)}function _capitalize(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}const defined=nt=>typeof nt<"u",isFunction=nt=>typeof nt=="function",setsEqual=(nt,rt)=>{if(nt.size!==rt.size)return!1;for(const it of nt)if(!rt.has(it))return!1;return!0};function _isClickEvent(nt){return nt.type==="mouseup"||nt.type==="click"||nt.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign$1=Math.sign;function almostEquals(nt,rt,it){return Math.abs(nt-rt)<it}function niceNum(nt){const rt=Math.round(nt);nt=almostEquals(nt,rt,nt/1e3)?rt:nt;const it=Math.pow(10,Math.floor(log10(nt))),st=nt/it;return(st<=1?1:st<=2?2:st<=5?5:10)*it}function _factorize(nt){const rt=[],it=Math.sqrt(nt);let st;for(st=1;st<it;st++)nt%st===0&&(rt.push(st),rt.push(nt/st));return it===(it|0)&&rt.push(it),rt.sort((lt,ct)=>lt-ct).pop(),rt}function isNumber(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)}function almostWhole(nt,rt){const it=Math.round(nt);return it-rt<=nt&&it+rt>=nt}function _setMinAndMaxByKey(nt,rt,it){let st,lt,ct;for(st=0,lt=nt.length;st<lt;st++)ct=nt[st][it],isNaN(ct)||(rt.min=Math.min(rt.min,ct),rt.max=Math.max(rt.max,ct))}function toRadians(nt){return nt*(PI/180)}function toDegrees(nt){return nt*(180/PI)}function _decimalPlaces(nt){if(!isNumberFinite(nt))return;let rt=1,it=0;for(;Math.round(nt*rt)/rt!==nt;)rt*=10,it++;return it}function getAngleFromPoint(nt,rt){const it=rt.x-nt.x,st=rt.y-nt.y,lt=Math.sqrt(it*it+st*st);let ct=Math.atan2(st,it);return ct<-.5*PI&&(ct+=TAU),{angle:ct,distance:lt}}function distanceBetweenPoints(nt,rt){return Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2))}function _angleDiff(nt,rt){return(nt-rt+PITAU)%TAU-PI}function _normalizeAngle(nt){return(nt%TAU+TAU)%TAU}function _angleBetween(nt,rt,it,st){const lt=_normalizeAngle(nt),ct=_normalizeAngle(rt),ut=_normalizeAngle(it),dt=_normalizeAngle(ct-lt),ht=_normalizeAngle(ut-lt),pt=_normalizeAngle(lt-ct),ft=_normalizeAngle(lt-ut);return lt===ct||lt===ut||st&&ct===ut||dt>ht&&pt<ft}function _limitValue(nt,rt,it){return Math.max(rt,Math.min(it,nt))}function _int16Range(nt){return _limitValue(nt,-32768,32767)}function _isBetween(nt,rt,it,st=1e-6){return nt>=Math.min(rt,it)-st&&nt<=Math.max(rt,it)+st}function _lookup(nt,rt,it){it=it||(ut=>nt[ut]<rt);let st=nt.length-1,lt=0,ct;for(;st-lt>1;)ct=lt+st>>1,it(ct)?lt=ct:st=ct;return{lo:lt,hi:st}}const _lookupByKey=(nt,rt,it,st)=>_lookup(nt,it,st?lt=>{const ct=nt[lt][rt];return ct<it||ct===it&&nt[lt+1][rt]===it}:lt=>nt[lt][rt]<it),_rlookupByKey=(nt,rt,it)=>_lookup(nt,it,st=>nt[st][rt]>=it);function _filterBetween(nt,rt,it){let st=0,lt=nt.length;for(;st<lt&&nt[st]<rt;)st++;for(;lt>st&&nt[lt-1]>it;)lt--;return st>0||lt<nt.length?nt.slice(st,lt):nt}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(nt,rt){if(nt._chartjs){nt._chartjs.listeners.push(rt);return}Object.defineProperty(nt,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[rt]}}),arrayEvents.forEach(it=>{const st="_onData"+_capitalize(it),lt=nt[it];Object.defineProperty(nt,it,{configurable:!0,enumerable:!1,value(...ct){const ut=lt.apply(this,ct);return nt._chartjs.listeners.forEach(dt=>{typeof dt[st]=="function"&&dt[st](...ct)}),ut}})})}function unlistenArrayEvents(nt,rt){const it=nt._chartjs;if(!it)return;const st=it.listeners,lt=st.indexOf(rt);lt!==-1&&st.splice(lt,1),!(st.length>0)&&(arrayEvents.forEach(ct=>{delete nt[ct]}),delete nt._chartjs)}function _arrayUnique(nt){const rt=new Set(nt);return rt.size===nt.length?nt:Array.from(rt)}const requestAnimFrame=function(){return typeof window>"u"?function(nt){return nt()}:window.requestAnimationFrame}();function throttled(nt,rt){let it=[],st=!1;return function(...lt){it=lt,st||(st=!0,requestAnimFrame.call(window,()=>{st=!1,nt.apply(rt,it)}))}}function debounce$2(nt,rt){let it;return function(...st){return rt?(clearTimeout(it),it=setTimeout(nt,rt,st)):nt.apply(this,st),rt}}const _toLeftRightCenter=nt=>nt==="start"?"left":nt==="end"?"right":"center",_alignStartEnd=(nt,rt,it)=>nt==="start"?rt:nt==="end"?it:(rt+it)/2,_textX=(nt,rt,it,st)=>nt===(st?"left":"right")?it:nt==="center"?(rt+it)/2:rt;function _getStartAndCountOfVisiblePoints(nt,rt,it){const st=rt.length;let lt=0,ct=st;if(nt._sorted){const{iScale:ut,_parsed:dt}=nt,ht=ut.axis,{min:pt,max:ft,minDefined:mt,maxDefined:gt}=ut.getUserBounds();mt&&(lt=_limitValue(Math.min(_lookupByKey(dt,ht,pt).lo,it?st:_lookupByKey(rt,ht,ut.getPixelForValue(pt)).lo),0,st-1)),gt?ct=_limitValue(Math.max(_lookupByKey(dt,ut.axis,ft,!0).hi+1,it?0:_lookupByKey(rt,ht,ut.getPixelForValue(ft),!0).hi+1),lt,st)-lt:ct=st-lt}return{start:lt,count:ct}}function _scaleRangesChanged(nt){const{xScale:rt,yScale:it,_scaleRanges:st}=nt,lt={xmin:rt.min,xmax:rt.max,ymin:it.min,ymax:it.max};if(!st)return nt._scaleRanges=lt,!0;const ct=st.xmin!==rt.min||st.xmax!==rt.max||st.ymin!==it.min||st.ymax!==it.max;return Object.assign(st,lt),ct}const atEdge=nt=>nt===0||nt===1,elasticIn=(nt,rt,it)=>-(Math.pow(2,10*(nt-=1))*Math.sin((nt-rt)*TAU/it)),elasticOut=(nt,rt,it)=>Math.pow(2,-10*nt)*Math.sin((nt-rt)*TAU/it)+1,effects={linear:nt=>nt,easeInQuad:nt=>nt*nt,easeOutQuad:nt=>-nt*(nt-2),easeInOutQuad:nt=>(nt/=.5)<1?.5*nt*nt:-.5*(--nt*(nt-2)-1),easeInCubic:nt=>nt*nt*nt,easeOutCubic:nt=>(nt-=1)*nt*nt+1,easeInOutCubic:nt=>(nt/=.5)<1?.5*nt*nt*nt:.5*((nt-=2)*nt*nt+2),easeInQuart:nt=>nt*nt*nt*nt,easeOutQuart:nt=>-((nt-=1)*nt*nt*nt-1),easeInOutQuart:nt=>(nt/=.5)<1?.5*nt*nt*nt*nt:-.5*((nt-=2)*nt*nt*nt-2),easeInQuint:nt=>nt*nt*nt*nt*nt,easeOutQuint:nt=>(nt-=1)*nt*nt*nt*nt+1,easeInOutQuint:nt=>(nt/=.5)<1?.5*nt*nt*nt*nt*nt:.5*((nt-=2)*nt*nt*nt*nt+2),easeInSine:nt=>-Math.cos(nt*HALF_PI)+1,easeOutSine:nt=>Math.sin(nt*HALF_PI),easeInOutSine:nt=>-.5*(Math.cos(PI*nt)-1),easeInExpo:nt=>nt===0?0:Math.pow(2,10*(nt-1)),easeOutExpo:nt=>nt===1?1:-Math.pow(2,-10*nt)+1,easeInOutExpo:nt=>atEdge(nt)?nt:nt<.5?.5*Math.pow(2,10*(nt*2-1)):.5*(-Math.pow(2,-10*(nt*2-1))+2),easeInCirc:nt=>nt>=1?nt:-(Math.sqrt(1-nt*nt)-1),easeOutCirc:nt=>Math.sqrt(1-(nt-=1)*nt),easeInOutCirc:nt=>(nt/=.5)<1?-.5*(Math.sqrt(1-nt*nt)-1):.5*(Math.sqrt(1-(nt-=2)*nt)+1),easeInElastic:nt=>atEdge(nt)?nt:elasticIn(nt,.075,.3),easeOutElastic:nt=>atEdge(nt)?nt:elasticOut(nt,.075,.3),easeInOutElastic(nt){return atEdge(nt)?nt:nt<.5?.5*elasticIn(nt*2,.1125,.45):.5+.5*elasticOut(nt*2-1,.1125,.45)},easeInBack(nt){return nt*nt*((1.70158+1)*nt-1.70158)},easeOutBack(nt){return(nt-=1)*nt*((1.70158+1)*nt+1.70158)+1},easeInOutBack(nt){let rt=1.70158;return(nt/=.5)<1?.5*(nt*nt*(((rt*=1.525)+1)*nt-rt)):.5*((nt-=2)*nt*(((rt*=1.525)+1)*nt+rt)+2)},easeInBounce:nt=>1-effects.easeOutBounce(1-nt),easeOutBounce(nt){return nt<1/2.75?7.5625*nt*nt:nt<2/2.75?7.5625*(nt-=1.5/2.75)*nt+.75:nt<2.5/2.75?7.5625*(nt-=2.25/2.75)*nt+.9375:7.5625*(nt-=2.625/2.75)*nt+.984375},easeInOutBounce:nt=>nt<.5?effects.easeInBounce(nt*2)*.5:effects.easeOutBounce(nt*2-1)*.5+.5};function isPatternOrGradient(nt){if(nt&&typeof nt=="object"){const rt=nt.toString();return rt==="[object CanvasPattern]"||rt==="[object CanvasGradient]"}return!1}function color(nt){return isPatternOrGradient(nt)?nt:new Color$1(nt)}function getHoverColor(nt){return isPatternOrGradient(nt)?nt:new Color$1(nt).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(nt){nt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),nt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:rt=>rt!=="onProgress"&&rt!=="onComplete"&&rt!=="fn"}),nt.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),nt.describe("animations",{_fallback:"animation"}),nt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:rt=>rt|0}}}})}function applyLayoutsDefaults(nt){nt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(nt,rt){rt=rt||{};const it=nt+JSON.stringify(rt);let st=intlCache.get(it);return st||(st=new Intl.NumberFormat(nt,rt),intlCache.set(it,st)),st}function formatNumber(nt,rt,it){return getNumberFormat(rt,it).format(nt)}const formatters={values(nt){return isArray(nt)?nt:""+nt},numeric(nt,rt,it){if(nt===0)return"0";const st=this.chart.options.locale;let lt,ct=nt;if(it.length>1){const pt=Math.max(Math.abs(it[0].value),Math.abs(it[it.length-1].value));(pt<1e-4||pt>1e15)&&(lt="scientific"),ct=calculateDelta(nt,it)}const ut=log10(Math.abs(ct)),dt=isNaN(ut)?1:Math.max(Math.min(-1*Math.floor(ut),20),0),ht={notation:lt,minimumFractionDigits:dt,maximumFractionDigits:dt};return Object.assign(ht,this.options.ticks.format),formatNumber(nt,st,ht)},logarithmic(nt,rt,it){if(nt===0)return"0";const st=it[rt].significand||nt/Math.pow(10,Math.floor(log10(nt)));return[1,2,3,5,10,15].includes(st)||rt>.8*it.length?formatters.numeric.call(this,nt,rt,it):""}};function calculateDelta(nt,rt){let it=rt.length>3?rt[2].value-rt[1].value:rt[1].value-rt[0].value;return Math.abs(it)>=1&&nt!==Math.floor(nt)&&(it=nt-Math.floor(nt)),it}var Ticks={formatters};function applyScaleDefaults(nt){nt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(rt,it)=>it.lineWidth,tickColor:(rt,it)=>it.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),nt.route("scale.ticks","color","","color"),nt.route("scale.grid","color","","borderColor"),nt.route("scale.border","color","","borderColor"),nt.route("scale.title","color","","color"),nt.describe("scale",{_fallback:!1,_scriptable:rt=>!rt.startsWith("before")&&!rt.startsWith("after")&&rt!=="callback"&&rt!=="parser",_indexable:rt=>rt!=="borderDash"&&rt!=="tickBorderDash"&&rt!=="dash"}),nt.describe("scales",{_fallback:"scale"}),nt.describe("scale.ticks",{_scriptable:rt=>rt!=="backdropPadding"&&rt!=="callback",_indexable:rt=>rt!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(nt,rt){if(!rt)return nt;const it=rt.split(".");for(let st=0,lt=it.length;st<lt;++st){const ct=it[st];nt=nt[ct]||(nt[ct]=Object.create(null))}return nt}function set(nt,rt,it){return typeof rt=="string"?merge(getScope$1(nt,rt),it):merge(getScope$1(nt,""),rt)}class Defaults{constructor(rt,it){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=st=>st.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(st,lt)=>getHoverColor(lt.backgroundColor),this.hoverBorderColor=(st,lt)=>getHoverColor(lt.borderColor),this.hoverColor=(st,lt)=>getHoverColor(lt.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(rt),this.apply(it)}set(rt,it){return set(this,rt,it)}get(rt){return getScope$1(this,rt)}describe(rt,it){return set(descriptors,rt,it)}override(rt,it){return set(overrides,rt,it)}route(rt,it,st,lt){const ct=getScope$1(this,rt),ut=getScope$1(this,st),dt="_"+it;Object.defineProperties(ct,{[dt]:{value:ct[it],writable:!0},[it]:{enumerable:!0,get(){const ht=this[dt],pt=ut[lt];return isObject(ht)?Object.assign({},pt,ht):valueOrDefault(ht,pt)},set(ht){this[dt]=ht}}})}apply(rt){rt.forEach(it=>it(this))}}var defaults=new Defaults({_scriptable:nt=>!nt.startsWith("on"),_indexable:nt=>nt!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(nt){return!nt||isNullOrUndef(nt.size)||isNullOrUndef(nt.family)?null:(nt.style?nt.style+" ":"")+(nt.weight?nt.weight+" ":"")+nt.size+"px "+nt.family}function _measureText(nt,rt,it,st,lt){let ct=rt[lt];return ct||(ct=rt[lt]=nt.measureText(lt).width,it.push(lt)),ct>st&&(st=ct),st}function _longestText(nt,rt,it,st){st=st||{};let lt=st.data=st.data||{},ct=st.garbageCollect=st.garbageCollect||[];st.font!==rt&&(lt=st.data={},ct=st.garbageCollect=[],st.font=rt),nt.save(),nt.font=rt;let ut=0;const dt=it.length;let ht,pt,ft,mt,gt;for(ht=0;ht<dt;ht++)if(mt=it[ht],mt!=null&&!isArray(mt))ut=_measureText(nt,lt,ct,ut,mt);else if(isArray(mt))for(pt=0,ft=mt.length;pt<ft;pt++)gt=mt[pt],gt!=null&&!isArray(gt)&&(ut=_measureText(nt,lt,ct,ut,gt));nt.restore();const xt=ct.length/2;if(xt>it.length){for(ht=0;ht<xt;ht++)delete lt[ct[ht]];ct.splice(0,xt)}return ut}function _alignPixel(nt,rt,it){const st=nt.currentDevicePixelRatio,lt=it!==0?Math.max(it/2,.5):0;return Math.round((rt-lt)*st)/st+lt}function clearCanvas(nt,rt){rt=rt||nt.getContext("2d"),rt.save(),rt.resetTransform(),rt.clearRect(0,0,nt.width,nt.height),rt.restore()}function drawPoint(nt,rt,it,st){drawPointLegend(nt,rt,it,st,null)}function drawPointLegend(nt,rt,it,st,lt){let ct,ut,dt,ht,pt,ft,mt,gt;const xt=rt.pointStyle,yt=rt.rotation,vt=rt.radius;let St=(yt||0)*RAD_PER_DEG;if(xt&&typeof xt=="object"&&(ct=xt.toString(),ct==="[object HTMLImageElement]"||ct==="[object HTMLCanvasElement]")){nt.save(),nt.translate(it,st),nt.rotate(St),nt.drawImage(xt,-xt.width/2,-xt.height/2,xt.width,xt.height),nt.restore();return}if(!(isNaN(vt)||vt<=0)){switch(nt.beginPath(),xt){default:lt?nt.ellipse(it,st,lt/2,vt,0,0,TAU):nt.arc(it,st,vt,0,TAU),nt.closePath();break;case"triangle":ft=lt?lt/2:vt,nt.moveTo(it+Math.sin(St)*ft,st-Math.cos(St)*vt),St+=TWO_THIRDS_PI,nt.lineTo(it+Math.sin(St)*ft,st-Math.cos(St)*vt),St+=TWO_THIRDS_PI,nt.lineTo(it+Math.sin(St)*ft,st-Math.cos(St)*vt),nt.closePath();break;case"rectRounded":pt=vt*.516,ht=vt-pt,ut=Math.cos(St+QUARTER_PI)*ht,mt=Math.cos(St+QUARTER_PI)*(lt?lt/2-pt:ht),dt=Math.sin(St+QUARTER_PI)*ht,gt=Math.sin(St+QUARTER_PI)*(lt?lt/2-pt:ht),nt.arc(it-mt,st-dt,pt,St-PI,St-HALF_PI),nt.arc(it+gt,st-ut,pt,St-HALF_PI,St),nt.arc(it+mt,st+dt,pt,St,St+HALF_PI),nt.arc(it-gt,st+ut,pt,St+HALF_PI,St+PI),nt.closePath();break;case"rect":if(!yt){ht=Math.SQRT1_2*vt,ft=lt?lt/2:ht,nt.rect(it-ft,st-ht,2*ft,2*ht);break}St+=QUARTER_PI;case"rectRot":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+gt,st-ut),nt.lineTo(it+mt,st+dt),nt.lineTo(it-gt,st+ut),nt.closePath();break;case"crossRot":St+=QUARTER_PI;case"cross":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut);break;case"star":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut),St+=QUARTER_PI,mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut);break;case"line":ut=lt?lt/2:Math.cos(St)*vt,dt=Math.sin(St)*vt,nt.moveTo(it-ut,st-dt),nt.lineTo(it+ut,st+dt);break;case"dash":nt.moveTo(it,st),nt.lineTo(it+Math.cos(St)*(lt?lt/2:vt),st+Math.sin(St)*vt);break;case!1:nt.closePath();break}nt.fill(),rt.borderWidth>0&&nt.stroke()}}function _isPointInArea(nt,rt,it){return it=it||.5,!rt||nt&&nt.x>rt.left-it&&nt.x<rt.right+it&&nt.y>rt.top-it&&nt.y<rt.bottom+it}function clipArea(nt,rt){nt.save(),nt.beginPath(),nt.rect(rt.left,rt.top,rt.right-rt.left,rt.bottom-rt.top),nt.clip()}function unclipArea(nt){nt.restore()}function _steppedLineTo(nt,rt,it,st,lt){if(!rt)return nt.lineTo(it.x,it.y);if(lt==="middle"){const ct=(rt.x+it.x)/2;nt.lineTo(ct,rt.y),nt.lineTo(ct,it.y)}else lt==="after"!=!!st?nt.lineTo(rt.x,it.y):nt.lineTo(it.x,rt.y);nt.lineTo(it.x,it.y)}function _bezierCurveTo(nt,rt,it,st){if(!rt)return nt.lineTo(it.x,it.y);nt.bezierCurveTo(st?rt.cp1x:rt.cp2x,st?rt.cp1y:rt.cp2y,st?it.cp2x:it.cp1x,st?it.cp2y:it.cp1y,it.x,it.y)}function setRenderOpts(nt,rt){rt.translation&&nt.translate(rt.translation[0],rt.translation[1]),isNullOrUndef(rt.rotation)||nt.rotate(rt.rotation),rt.color&&(nt.fillStyle=rt.color),rt.textAlign&&(nt.textAlign=rt.textAlign),rt.textBaseline&&(nt.textBaseline=rt.textBaseline)}function decorateText(nt,rt,it,st,lt){if(lt.strikethrough||lt.underline){const ct=nt.measureText(st),ut=rt-ct.actualBoundingBoxLeft,dt=rt+ct.actualBoundingBoxRight,ht=it-ct.actualBoundingBoxAscent,pt=it+ct.actualBoundingBoxDescent,ft=lt.strikethrough?(ht+pt)/2:pt;nt.strokeStyle=nt.fillStyle,nt.beginPath(),nt.lineWidth=lt.decorationWidth||2,nt.moveTo(ut,ft),nt.lineTo(dt,ft),nt.stroke()}}function drawBackdrop(nt,rt){const it=nt.fillStyle;nt.fillStyle=rt.color,nt.fillRect(rt.left,rt.top,rt.width,rt.height),nt.fillStyle=it}function renderText(nt,rt,it,st,lt,ct={}){const ut=isArray(rt)?rt:[rt],dt=ct.strokeWidth>0&&ct.strokeColor!=="";let ht,pt;for(nt.save(),nt.font=lt.string,setRenderOpts(nt,ct),ht=0;ht<ut.length;++ht)pt=ut[ht],ct.backdrop&&drawBackdrop(nt,ct.backdrop),dt&&(ct.strokeColor&&(nt.strokeStyle=ct.strokeColor),isNullOrUndef(ct.strokeWidth)||(nt.lineWidth=ct.strokeWidth),nt.strokeText(pt,it,st,ct.maxWidth)),nt.fillText(pt,it,st,ct.maxWidth),decorateText(nt,it,st,pt,ct),st+=Number(lt.lineHeight);nt.restore()}function addRoundedRectPath(nt,rt){const{x:it,y:st,w:lt,h:ct,radius:ut}=rt;nt.arc(it+ut.topLeft,st+ut.topLeft,ut.topLeft,1.5*PI,PI,!0),nt.lineTo(it,st+ct-ut.bottomLeft),nt.arc(it+ut.bottomLeft,st+ct-ut.bottomLeft,ut.bottomLeft,PI,HALF_PI,!0),nt.lineTo(it+lt-ut.bottomRight,st+ct),nt.arc(it+lt-ut.bottomRight,st+ct-ut.bottomRight,ut.bottomRight,HALF_PI,0,!0),nt.lineTo(it+lt,st+ut.topRight),nt.arc(it+lt-ut.topRight,st+ut.topRight,ut.topRight,0,-HALF_PI,!0),nt.lineTo(it+ut.topLeft,st)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(nt,rt){const it=(""+nt).match(LINE_HEIGHT);if(!it||it[1]==="normal")return rt*1.2;switch(nt=+it[2],it[3]){case"px":return nt;case"%":nt/=100;break}return rt*nt}const numberOrZero=nt=>+nt||0;function _readValueToProps(nt,rt){const it={},st=isObject(rt),lt=st?Object.keys(rt):rt,ct=isObject(nt)?st?ut=>valueOrDefault(nt[ut],nt[rt[ut]]):ut=>nt[ut]:()=>nt;for(const ut of lt)it[ut]=numberOrZero(ct(ut));return it}function toTRBL(nt){return _readValueToProps(nt,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(nt){return _readValueToProps(nt,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(nt){const rt=toTRBL(nt);return rt.width=rt.left+rt.right,rt.height=rt.top+rt.bottom,rt}function toFont(nt,rt){nt=nt||{},rt=rt||defaults.font;let it=valueOrDefault(nt.size,rt.size);typeof it=="string"&&(it=parseInt(it,10));let st=valueOrDefault(nt.style,rt.style);st&&!(""+st).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+st+'"'),st=void 0);const lt={family:valueOrDefault(nt.family,rt.family),lineHeight:toLineHeight(valueOrDefault(nt.lineHeight,rt.lineHeight),it),size:it,style:st,weight:valueOrDefault(nt.weight,rt.weight),string:""};return lt.string=toFontString(lt),lt}function resolve$1(nt,rt,it,st){let lt=!0,ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct)if(dt=nt[ct],dt!==void 0&&(rt!==void 0&&typeof dt=="function"&&(dt=dt(rt),lt=!1),it!==void 0&&isArray(dt)&&(dt=dt[it%dt.length],lt=!1),dt!==void 0))return st&&!lt&&(st.cacheable=!1),dt}function _addGrace(nt,rt,it){const{min:st,max:lt}=nt,ct=toDimension(rt,(lt-st)/2),ut=(dt,ht)=>it&&dt===0?0:dt+ht;return{min:ut(st,-Math.abs(ct)),max:ut(lt,ct)}}function createContext(nt,rt){return Object.assign(Object.create(nt),rt)}function _createResolver(nt,rt=[""],it,st,lt=()=>nt[0]){const ct=it||nt;typeof st>"u"&&(st=_resolve("_fallback",nt));const ut={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:nt,_rootScopes:ct,_fallback:st,_getTarget:lt,override:dt=>_createResolver([dt,...nt],rt,ct,st)};return new Proxy(ut,{deleteProperty(dt,ht){return delete dt[ht],delete dt._keys,delete nt[0][ht],!0},get(dt,ht){return _cached(dt,ht,()=>_resolveWithPrefixes(ht,rt,nt,dt))},getOwnPropertyDescriptor(dt,ht){return Reflect.getOwnPropertyDescriptor(dt._scopes[0],ht)},getPrototypeOf(){return Reflect.getPrototypeOf(nt[0])},has(dt,ht){return getKeysFromAllScopes(dt).includes(ht)},ownKeys(dt){return getKeysFromAllScopes(dt)},set(dt,ht,pt){const ft=dt._storage||(dt._storage=lt());return dt[ht]=ft[ht]=pt,delete dt._keys,!0}})}function _attachContext(nt,rt,it,st){const lt={_cacheable:!1,_proxy:nt,_context:rt,_subProxy:it,_stack:new Set,_descriptors:_descriptors(nt,st),setContext:ct=>_attachContext(nt,ct,it,st),override:ct=>_attachContext(nt.override(ct),rt,it,st)};return new Proxy(lt,{deleteProperty(ct,ut){return delete ct[ut],delete nt[ut],!0},get(ct,ut,dt){return _cached(ct,ut,()=>_resolveWithContext(ct,ut,dt))},getOwnPropertyDescriptor(ct,ut){return ct._descriptors.allKeys?Reflect.has(nt,ut)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(nt,ut)},getPrototypeOf(){return Reflect.getPrototypeOf(nt)},has(ct,ut){return Reflect.has(nt,ut)},ownKeys(){return Reflect.ownKeys(nt)},set(ct,ut,dt){return nt[ut]=dt,delete ct[ut],!0}})}function _descriptors(nt,rt={scriptable:!0,indexable:!0}){const{_scriptable:it=rt.scriptable,_indexable:st=rt.indexable,_allKeys:lt=rt.allKeys}=nt;return{allKeys:lt,scriptable:it,indexable:st,isScriptable:isFunction(it)?it:()=>it,isIndexable:isFunction(st)?st:()=>st}}const readKey=(nt,rt)=>nt?nt+_capitalize(rt):rt,needsSubResolver=(nt,rt)=>isObject(rt)&&nt!=="adapters"&&(Object.getPrototypeOf(rt)===null||rt.constructor===Object);function _cached(nt,rt,it){if(Object.prototype.hasOwnProperty.call(nt,rt))return nt[rt];const st=it();return nt[rt]=st,st}function _resolveWithContext(nt,rt,it){const{_proxy:st,_context:lt,_subProxy:ct,_descriptors:ut}=nt;let dt=st[rt];return isFunction(dt)&&ut.isScriptable(rt)&&(dt=_resolveScriptable(rt,dt,nt,it)),isArray(dt)&&dt.length&&(dt=_resolveArray(rt,dt,nt,ut.isIndexable)),needsSubResolver(rt,dt)&&(dt=_attachContext(dt,lt,ct&&ct[rt],ut)),dt}function _resolveScriptable(nt,rt,it,st){const{_proxy:lt,_context:ct,_subProxy:ut,_stack:dt}=it;if(dt.has(nt))throw new Error("Recursion detected: "+Array.from(dt).join("->")+"->"+nt);dt.add(nt);let ht=rt(ct,ut||st);return dt.delete(nt),needsSubResolver(nt,ht)&&(ht=createSubResolver(lt._scopes,lt,nt,ht)),ht}function _resolveArray(nt,rt,it,st){const{_proxy:lt,_context:ct,_subProxy:ut,_descriptors:dt}=it;if(typeof ct.index<"u"&&st(nt))return rt[ct.index%rt.length];if(isObject(rt[0])){const ht=rt,pt=lt._scopes.filter(ft=>ft!==ht);rt=[];for(const ft of ht){const mt=createSubResolver(pt,lt,nt,ft);rt.push(_attachContext(mt,ct,ut&&ut[nt],dt))}}return rt}function resolveFallback(nt,rt,it){return isFunction(nt)?nt(rt,it):nt}const getScope=(nt,rt)=>nt===!0?rt:typeof nt=="string"?resolveObjectKey(rt,nt):void 0;function addScopes(nt,rt,it,st,lt){for(const ct of rt){const ut=getScope(it,ct);if(ut){nt.add(ut);const dt=resolveFallback(ut._fallback,it,lt);if(typeof dt<"u"&&dt!==it&&dt!==st)return dt}else if(ut===!1&&typeof st<"u"&&it!==st)return null}return!1}function createSubResolver(nt,rt,it,st){const lt=rt._rootScopes,ct=resolveFallback(rt._fallback,it,st),ut=[...nt,...lt],dt=new Set;dt.add(st);let ht=addScopesFromKey(dt,ut,it,ct||it,st);return ht===null||typeof ct<"u"&&ct!==it&&(ht=addScopesFromKey(dt,ut,ct,ht,st),ht===null)?!1:_createResolver(Array.from(dt),[""],lt,ct,()=>subGetTarget(rt,it,st))}function addScopesFromKey(nt,rt,it,st,lt){for(;it;)it=addScopes(nt,rt,it,st,lt);return it}function subGetTarget(nt,rt,it){const st=nt._getTarget();rt in st||(st[rt]={});const lt=st[rt];return isArray(lt)&&isObject(it)?it:lt||{}}function _resolveWithPrefixes(nt,rt,it,st){let lt;for(const ct of rt)if(lt=_resolve(readKey(ct,nt),it),typeof lt<"u")return needsSubResolver(nt,lt)?createSubResolver(it,st,nt,lt):lt}function _resolve(nt,rt){for(const it of rt){if(!it)continue;const st=it[nt];if(typeof st<"u")return st}}function getKeysFromAllScopes(nt){let rt=nt._keys;return rt||(rt=nt._keys=resolveKeysFromAllScopes(nt._scopes)),rt}function resolveKeysFromAllScopes(nt){const rt=new Set;for(const it of nt)for(const st of Object.keys(it).filter(lt=>!lt.startsWith("_")))rt.add(st);return Array.from(rt)}const EPSILON=Number.EPSILON||1e-14,getPoint=(nt,rt)=>rt<nt.length&&!nt[rt].skip&&nt[rt],getValueAxis=nt=>nt==="x"?"y":"x";function splineCurve(nt,rt,it,st){const lt=nt.skip?rt:nt,ct=rt,ut=it.skip?rt:it,dt=distanceBetweenPoints(ct,lt),ht=distanceBetweenPoints(ut,ct);let pt=dt/(dt+ht),ft=ht/(dt+ht);pt=isNaN(pt)?0:pt,ft=isNaN(ft)?0:ft;const mt=st*pt,gt=st*ft;return{previous:{x:ct.x-mt*(ut.x-lt.x),y:ct.y-mt*(ut.y-lt.y)},next:{x:ct.x+gt*(ut.x-lt.x),y:ct.y+gt*(ut.y-lt.y)}}}function monotoneAdjust(nt,rt,it){const st=nt.length;let lt,ct,ut,dt,ht,pt=getPoint(nt,0);for(let ft=0;ft<st-1;++ft)if(ht=pt,pt=getPoint(nt,ft+1),!(!ht||!pt)){if(almostEquals(rt[ft],0,EPSILON)){it[ft]=it[ft+1]=0;continue}lt=it[ft]/rt[ft],ct=it[ft+1]/rt[ft],dt=Math.pow(lt,2)+Math.pow(ct,2),!(dt<=9)&&(ut=3/Math.sqrt(dt),it[ft]=lt*ut*rt[ft],it[ft+1]=ct*ut*rt[ft])}}function monotoneCompute(nt,rt,it="x"){const st=getValueAxis(it),lt=nt.length;let ct,ut,dt,ht=getPoint(nt,0);for(let pt=0;pt<lt;++pt){if(ut=dt,dt=ht,ht=getPoint(nt,pt+1),!dt)continue;const ft=dt[it],mt=dt[st];ut&&(ct=(ft-ut[it])/3,dt[`cp1${it}`]=ft-ct,dt[`cp1${st}`]=mt-ct*rt[pt]),ht&&(ct=(ht[it]-ft)/3,dt[`cp2${it}`]=ft+ct,dt[`cp2${st}`]=mt+ct*rt[pt])}}function splineCurveMonotone(nt,rt="x"){const it=getValueAxis(rt),st=nt.length,lt=Array(st).fill(0),ct=Array(st);let ut,dt,ht,pt=getPoint(nt,0);for(ut=0;ut<st;++ut)if(dt=ht,ht=pt,pt=getPoint(nt,ut+1),!!ht){if(pt){const ft=pt[rt]-ht[rt];lt[ut]=ft!==0?(pt[it]-ht[it])/ft:0}ct[ut]=dt?pt?sign$1(lt[ut-1])!==sign$1(lt[ut])?0:(lt[ut-1]+lt[ut])/2:lt[ut-1]:lt[ut]}monotoneAdjust(nt,lt,ct),monotoneCompute(nt,ct,rt)}function capControlPoint(nt,rt,it){return Math.max(Math.min(nt,it),rt)}function capBezierPoints(nt,rt){let it,st,lt,ct,ut,dt=_isPointInArea(nt[0],rt);for(it=0,st=nt.length;it<st;++it)ut=ct,ct=dt,dt=it<st-1&&_isPointInArea(nt[it+1],rt),ct&&(lt=nt[it],ut&&(lt.cp1x=capControlPoint(lt.cp1x,rt.left,rt.right),lt.cp1y=capControlPoint(lt.cp1y,rt.top,rt.bottom)),dt&&(lt.cp2x=capControlPoint(lt.cp2x,rt.left,rt.right),lt.cp2y=capControlPoint(lt.cp2y,rt.top,rt.bottom)))}function _updateBezierControlPoints(nt,rt,it,st,lt){let ct,ut,dt,ht;if(rt.spanGaps&&(nt=nt.filter(pt=>!pt.skip)),rt.cubicInterpolationMode==="monotone")splineCurveMonotone(nt,lt);else{let pt=st?nt[nt.length-1]:nt[0];for(ct=0,ut=nt.length;ct<ut;++ct)dt=nt[ct],ht=splineCurve(pt,dt,nt[Math.min(ct+1,ut-(st?0:1))%ut],rt.tension),dt.cp1x=ht.previous.x,dt.cp1y=ht.previous.y,dt.cp2x=ht.next.x,dt.cp2y=ht.next.y,pt=dt}rt.capBezierPoints&&capBezierPoints(nt,it)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(nt){let rt=nt.parentNode;return rt&&rt.toString()==="[object ShadowRoot]"&&(rt=rt.host),rt}function parseMaxStyle(nt,rt,it){let st;return typeof nt=="string"?(st=parseInt(nt,10),nt.indexOf("%")!==-1&&(st=st/100*rt.parentNode[it])):st=nt,st}const getComputedStyle$2=nt=>nt.ownerDocument.defaultView.getComputedStyle(nt,null);function getStyle(nt,rt){return getComputedStyle$2(nt).getPropertyValue(rt)}const positions=["top","right","bottom","left"];function getPositionedStyle(nt,rt,it){const st={};it=it?"-"+it:"";for(let lt=0;lt<4;lt++){const ct=positions[lt];st[ct]=parseFloat(nt[rt+"-"+ct+it])||0}return st.width=st.left+st.right,st.height=st.top+st.bottom,st}const useOffsetPos=(nt,rt,it)=>(nt>0||rt>0)&&(!it||!it.shadowRoot);function getCanvasPosition(nt,rt){const it=nt.touches,st=it&&it.length?it[0]:nt,{offsetX:lt,offsetY:ct}=st;let ut=!1,dt,ht;if(useOffsetPos(lt,ct,nt.target))dt=lt,ht=ct;else{const pt=rt.getBoundingClientRect();dt=st.clientX-pt.left,ht=st.clientY-pt.top,ut=!0}return{x:dt,y:ht,box:ut}}function getRelativePosition(nt,rt){if("native"in nt)return nt;const{canvas:it,currentDevicePixelRatio:st}=rt,lt=getComputedStyle$2(it),ct=lt.boxSizing==="border-box",ut=getPositionedStyle(lt,"padding"),dt=getPositionedStyle(lt,"border","width"),{x:ht,y:pt,box:ft}=getCanvasPosition(nt,it),mt=ut.left+(ft&&dt.left),gt=ut.top+(ft&&dt.top);let{width:xt,height:yt}=rt;return ct&&(xt-=ut.width+dt.width,yt-=ut.height+dt.height),{x:Math.round((ht-mt)/xt*it.width/st),y:Math.round((pt-gt)/yt*it.height/st)}}function getContainerSize(nt,rt,it){let st,lt;if(rt===void 0||it===void 0){const ct=_getParentNode(nt);if(!ct)rt=nt.clientWidth,it=nt.clientHeight;else{const ut=ct.getBoundingClientRect(),dt=getComputedStyle$2(ct),ht=getPositionedStyle(dt,"border","width"),pt=getPositionedStyle(dt,"padding");rt=ut.width-pt.width-ht.width,it=ut.height-pt.height-ht.height,st=parseMaxStyle(dt.maxWidth,ct,"clientWidth"),lt=parseMaxStyle(dt.maxHeight,ct,"clientHeight")}}return{width:rt,height:it,maxWidth:st||INFINITY,maxHeight:lt||INFINITY}}const round1=nt=>Math.round(nt*10)/10;function getMaximumSize(nt,rt,it,st){const lt=getComputedStyle$2(nt),ct=getPositionedStyle(lt,"margin"),ut=parseMaxStyle(lt.maxWidth,nt,"clientWidth")||INFINITY,dt=parseMaxStyle(lt.maxHeight,nt,"clientHeight")||INFINITY,ht=getContainerSize(nt,rt,it);let{width:pt,height:ft}=ht;if(lt.boxSizing==="content-box"){const gt=getPositionedStyle(lt,"border","width"),xt=getPositionedStyle(lt,"padding");pt-=xt.width+gt.width,ft-=xt.height+gt.height}return pt=Math.max(0,pt-ct.width),ft=Math.max(0,st?pt/st:ft-ct.height),pt=round1(Math.min(pt,ut,ht.maxWidth)),ft=round1(Math.min(ft,dt,ht.maxHeight)),pt&&!ft&&(ft=round1(pt/2)),(rt!==void 0||it!==void 0)&&st&&ht.height&&ft>ht.height&&(ft=ht.height,pt=round1(Math.floor(ft*st))),{width:pt,height:ft}}function retinaScale(nt,rt,it){const st=rt||1,lt=Math.floor(nt.height*st),ct=Math.floor(nt.width*st);nt.height=Math.floor(nt.height),nt.width=Math.floor(nt.width);const ut=nt.canvas;return ut.style&&(it||!ut.style.height&&!ut.style.width)&&(ut.style.height=`${nt.height}px`,ut.style.width=`${nt.width}px`),nt.currentDevicePixelRatio!==st||ut.height!==lt||ut.width!==ct?(nt.currentDevicePixelRatio=st,ut.height=lt,ut.width=ct,nt.ctx.setTransform(st,0,0,st,0,0),!0):!1}const supportsEventListenerOptions=function(){let nt=!1;try{const rt={get passive(){return nt=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,rt),window.removeEventListener("test",null,rt))}catch{}return nt}();function readUsedSize(nt,rt){const it=getStyle(nt,rt),st=it&&it.match(/^(\d+)(\.\d+)?px$/);return st?+st[1]:void 0}function _pointInLine(nt,rt,it,st){return{x:nt.x+it*(rt.x-nt.x),y:nt.y+it*(rt.y-nt.y)}}function _steppedInterpolation(nt,rt,it,st){return{x:nt.x+it*(rt.x-nt.x),y:st==="middle"?it<.5?nt.y:rt.y:st==="after"?it<1?nt.y:rt.y:it>0?rt.y:nt.y}}function _bezierInterpolation(nt,rt,it,st){const lt={x:nt.cp2x,y:nt.cp2y},ct={x:rt.cp1x,y:rt.cp1y},ut=_pointInLine(nt,lt,it),dt=_pointInLine(lt,ct,it),ht=_pointInLine(ct,rt,it),pt=_pointInLine(ut,dt,it),ft=_pointInLine(dt,ht,it);return _pointInLine(pt,ft,it)}const getRightToLeftAdapter=function(nt,rt){return{x(it){return nt+nt+rt-it},setWidth(it){rt=it},textAlign(it){return it==="center"?it:it==="right"?"left":"right"},xPlus(it,st){return it-st},leftForLtr(it,st){return it-st}}},getLeftToRightAdapter=function(){return{x(nt){return nt},setWidth(nt){},textAlign(nt){return nt},xPlus(nt,rt){return nt+rt},leftForLtr(nt,rt){return nt}}};function getRtlAdapter(nt,rt,it){return nt?getRightToLeftAdapter(rt,it):getLeftToRightAdapter()}function overrideTextDirection(nt,rt){let it,st;(rt==="ltr"||rt==="rtl")&&(it=nt.canvas.style,st=[it.getPropertyValue("direction"),it.getPropertyPriority("direction")],it.setProperty("direction",rt,"important"),nt.prevTextDirection=st)}function restoreTextDirection(nt,rt){rt!==void 0&&(delete nt.prevTextDirection,nt.canvas.style.setProperty("direction",rt[0],rt[1]))}function propertyFn(nt){return nt==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(rt,it)=>rt-it,normalize:rt=>rt}}function normalizeSegment({start:nt,end:rt,count:it,loop:st,style:lt}){return{start:nt%it,end:rt%it,loop:st&&(rt-nt+1)%it===0,style:lt}}function getSegment(nt,rt,it){const{property:st,start:lt,end:ct}=it,{between:ut,normalize:dt}=propertyFn(st),ht=rt.length;let{start:pt,end:ft,loop:mt}=nt,gt,xt;if(mt){for(pt+=ht,ft+=ht,gt=0,xt=ht;gt<xt&&ut(dt(rt[pt%ht][st]),lt,ct);++gt)pt--,ft--;pt%=ht,ft%=ht}return ft<pt&&(ft+=ht),{start:pt,end:ft,loop:mt,style:nt.style}}function _boundSegment(nt,rt,it){if(!it)return[nt];const{property:st,start:lt,end:ct}=it,ut=rt.length,{compare:dt,between:ht,normalize:pt}=propertyFn(st),{start:ft,end:mt,loop:gt,style:xt}=getSegment(nt,rt,it),yt=[];let vt=!1,St=null,Et,wt,Rt;const Tt=()=>ht(lt,Rt,Et)&&dt(lt,Rt)!==0,It=()=>dt(ct,Et)===0||ht(ct,Rt,Et),At=()=>vt||Tt(),Dt=()=>!vt||It();for(let jt=ft,Ft=ft;jt<=mt;++jt)wt=rt[jt%ut],!wt.skip&&(Et=pt(wt[st]),Et!==Rt&&(vt=ht(Et,lt,ct),St===null&&At()&&(St=dt(Et,lt)===0?jt:Ft),St!==null&&Dt()&&(yt.push(normalizeSegment({start:St,end:jt,loop:gt,count:ut,style:xt})),St=null),Ft=jt,Rt=Et));return St!==null&&yt.push(normalizeSegment({start:St,end:mt,loop:gt,count:ut,style:xt})),yt}function _boundSegments(nt,rt){const it=[],st=nt.segments;for(let lt=0;lt<st.length;lt++){const ct=_boundSegment(st[lt],nt.points,rt);ct.length&&it.push(...ct)}return it}function findStartAndEnd(nt,rt,it,st){let lt=0,ct=rt-1;if(it&&!st)for(;lt<rt&&!nt[lt].skip;)lt++;for(;lt<rt&&nt[lt].skip;)lt++;for(lt%=rt,it&&(ct+=lt);ct>lt&&nt[ct%rt].skip;)ct--;return ct%=rt,{start:lt,end:ct}}function solidSegments(nt,rt,it,st){const lt=nt.length,ct=[];let ut=rt,dt=nt[rt],ht;for(ht=rt+1;ht<=it;++ht){const pt=nt[ht%lt];pt.skip||pt.stop?dt.skip||(st=!1,ct.push({start:rt%lt,end:(ht-1)%lt,loop:st}),rt=ut=pt.stop?ht:null):(ut=ht,dt.skip&&(rt=ht)),dt=pt}return ut!==null&&ct.push({start:rt%lt,end:ut%lt,loop:st}),ct}function _computeSegments(nt,rt){const it=nt.points,st=nt.options.spanGaps,lt=it.length;if(!lt)return[];const ct=!!nt._loop,{start:ut,end:dt}=findStartAndEnd(it,lt,ct,st);if(st===!0)return splitByStyles(nt,[{start:ut,end:dt,loop:ct}],it,rt);const ht=dt<ut?dt+lt:dt,pt=!!nt._fullLoop&&ut===0&&dt===lt-1;return splitByStyles(nt,solidSegments(it,ut,ht,pt),it,rt)}function splitByStyles(nt,rt,it,st){return!st||!st.setContext||!it?rt:doSplitByStyles(nt,rt,it,st)}function doSplitByStyles(nt,rt,it,st){const lt=nt._chart.getContext(),ct=readStyle(nt.options),{_datasetIndex:ut,options:{spanGaps:dt}}=nt,ht=it.length,pt=[];let ft=ct,mt=rt[0].start,gt=mt;function xt(yt,vt,St,Et){const wt=dt?-1:1;if(yt!==vt){for(yt+=ht;it[yt%ht].skip;)yt-=wt;for(;it[vt%ht].skip;)vt+=wt;yt%ht!==vt%ht&&(pt.push({start:yt%ht,end:vt%ht,loop:St,style:Et}),ft=Et,mt=vt%ht)}}for(const yt of rt){mt=dt?mt:yt.start;let vt=it[mt%ht],St;for(gt=mt+1;gt<=yt.end;gt++){const Et=it[gt%ht];St=readStyle(st.setContext(createContext(lt,{type:"segment",p0:vt,p1:Et,p0DataIndex:(gt-1)%ht,p1DataIndex:gt%ht,datasetIndex:ut}))),styleChanged(St,ft)&&xt(mt,gt-1,yt.loop,ft),vt=Et,ft=St}mt<gt-1&&xt(mt,gt-1,yt.loop,ft)}return pt}function readStyle(nt){return{backgroundColor:nt.backgroundColor,borderCapStyle:nt.borderCapStyle,borderDash:nt.borderDash,borderDashOffset:nt.borderDashOffset,borderJoinStyle:nt.borderJoinStyle,borderWidth:nt.borderWidth,borderColor:nt.borderColor}}function styleChanged(nt,rt){if(!rt)return!1;const it=[],st=function(lt,ct){return isPatternOrGradient(ct)?(it.includes(ct)||it.push(ct),it.indexOf(ct)):ct};return JSON.stringify(nt,st)!==JSON.stringify(rt,st)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(rt,it,st,lt){const ct=it.listeners[lt],ut=it.duration;ct.forEach(dt=>dt({chart:rt,initial:it.initial,numSteps:ut,currentStep:Math.min(st-it.start,ut)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(rt=Date.now()){let it=0;this._charts.forEach((st,lt)=>{if(!st.running||!st.items.length)return;const ct=st.items;let ut=ct.length-1,dt=!1,ht;for(;ut>=0;--ut)ht=ct[ut],ht._active?(ht._total>st.duration&&(st.duration=ht._total),ht.tick(rt),dt=!0):(ct[ut]=ct[ct.length-1],ct.pop());dt&&(lt.draw(),this._notify(lt,st,rt,"progress")),ct.length||(st.running=!1,this._notify(lt,st,rt,"complete"),st.initial=!1),it+=ct.length}),this._lastDate=rt,it===0&&(this._running=!1)}_getAnims(rt){const it=this._charts;let st=it.get(rt);return st||(st={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},it.set(rt,st)),st}listen(rt,it,st){this._getAnims(rt).listeners[it].push(st)}add(rt,it){!it||!it.length||this._getAnims(rt).items.push(...it)}has(rt){return this._getAnims(rt).items.length>0}start(rt){const it=this._charts.get(rt);it&&(it.running=!0,it.start=Date.now(),it.duration=it.items.reduce((st,lt)=>Math.max(st,lt._duration),0),this._refresh())}running(rt){if(!this._running)return!1;const it=this._charts.get(rt);return!(!it||!it.running||!it.items.length)}stop(rt){const it=this._charts.get(rt);if(!it||!it.items.length)return;const st=it.items;let lt=st.length-1;for(;lt>=0;--lt)st[lt].cancel();it.items=[],this._notify(rt,it,Date.now(),"complete")}remove(rt){return this._charts.delete(rt)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(nt,rt,it){return it>.5?rt:nt},color(nt,rt,it){const st=color(nt||transparent),lt=st.valid&&color(rt||transparent);return lt&&lt.valid?lt.mix(st,it).hexString():rt},number(nt,rt,it){return nt+(rt-nt)*it}};class Animation{constructor(rt,it,st,lt){const ct=it[st];lt=resolve$1([rt.to,lt,ct,rt.from]);const ut=resolve$1([rt.from,ct,lt]);this._active=!0,this._fn=rt.fn||interpolators[rt.type||typeof ut],this._easing=effects[rt.easing]||effects.linear,this._start=Math.floor(Date.now()+(rt.delay||0)),this._duration=this._total=Math.floor(rt.duration),this._loop=!!rt.loop,this._target=it,this._prop=st,this._from=ut,this._to=lt,this._promises=void 0}active(){return this._active}update(rt,it,st){if(this._active){this._notify(!1);const lt=this._target[this._prop],ct=st-this._start,ut=this._duration-ct;this._start=st,this._duration=Math.floor(Math.max(ut,rt.duration)),this._total+=ct,this._loop=!!rt.loop,this._to=resolve$1([rt.to,it,lt,rt.from]),this._from=resolve$1([rt.from,lt,it])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(rt){const it=rt-this._start,st=this._duration,lt=this._prop,ct=this._from,ut=this._loop,dt=this._to;let ht;if(this._active=ct!==dt&&(ut||it<st),!this._active){this._target[lt]=dt,this._notify(!0);return}if(it<0){this._target[lt]=ct;return}ht=it/st%2,ht=ut&&ht>1?2-ht:ht,ht=this._easing(Math.min(1,Math.max(0,ht))),this._target[lt]=this._fn(ct,dt,ht)}wait(){const rt=this._promises||(this._promises=[]);return new Promise((it,st)=>{rt.push({res:it,rej:st})})}_notify(rt){const it=rt?"res":"rej",st=this._promises||[];for(let lt=0;lt<st.length;lt++)st[lt][it]()}}class Animations{constructor(rt,it){this._chart=rt,this._properties=new Map,this.configure(it)}configure(rt){if(!isObject(rt))return;const it=Object.keys(defaults.animation),st=this._properties;Object.getOwnPropertyNames(rt).forEach(lt=>{const ct=rt[lt];if(!isObject(ct))return;const ut={};for(const dt of it)ut[dt]=ct[dt];(isArray(ct.properties)&&ct.properties||[lt]).forEach(dt=>{(dt===lt||!st.has(dt))&&st.set(dt,ut)})})}_animateOptions(rt,it){const st=it.options,lt=resolveTargetOptions(rt,st);if(!lt)return[];const ct=this._createAnimations(lt,st);return st.$shared&&awaitAll(rt.options.$animations,st).then(()=>{rt.options=st},()=>{}),ct}_createAnimations(rt,it){const st=this._properties,lt=[],ct=rt.$animations||(rt.$animations={}),ut=Object.keys(it),dt=Date.now();let ht;for(ht=ut.length-1;ht>=0;--ht){const pt=ut[ht];if(pt.charAt(0)==="$")continue;if(pt==="options"){lt.push(...this._animateOptions(rt,it));continue}const ft=it[pt];let mt=ct[pt];const gt=st.get(pt);if(mt)if(gt&&mt.active()){mt.update(gt,ft,dt);continue}else mt.cancel();if(!gt||!gt.duration){rt[pt]=ft;continue}ct[pt]=mt=new Animation(gt,rt,pt,ft),lt.push(mt)}return lt}update(rt,it){if(this._properties.size===0){Object.assign(rt,it);return}const st=this._createAnimations(rt,it);if(st.length)return animator.add(this._chart,st),!0}}function awaitAll(nt,rt){const it=[],st=Object.keys(rt);for(let lt=0;lt<st.length;lt++){const ct=nt[st[lt]];ct&&ct.active()&&it.push(ct.wait())}return Promise.all(it)}function resolveTargetOptions(nt,rt){if(!rt)return;let it=nt.options;if(!it){nt.options=rt;return}return it.$shared&&(nt.options=it=Object.assign({},it,{$shared:!1,$animations:{}})),it}function scaleClip(nt,rt){const it=nt&&nt.options||{},st=it.reverse,lt=it.min===void 0?rt:0,ct=it.max===void 0?rt:0;return{start:st?ct:lt,end:st?lt:ct}}function defaultClip(nt,rt,it){if(it===!1)return!1;const st=scaleClip(nt,it),lt=scaleClip(rt,it);return{top:lt.end,right:st.end,bottom:lt.start,left:st.start}}function toClip(nt){let rt,it,st,lt;return isObject(nt)?(rt=nt.top,it=nt.right,st=nt.bottom,lt=nt.left):rt=it=st=lt=nt,{top:rt,right:it,bottom:st,left:lt,disabled:nt===!1}}function getSortedDatasetIndices(nt,rt){const it=[],st=nt._getSortedDatasetMetas(rt);let lt,ct;for(lt=0,ct=st.length;lt<ct;++lt)it.push(st[lt].index);return it}function applyStack(nt,rt,it,st={}){const lt=nt.keys,ct=st.mode==="single";let ut,dt,ht,pt;if(rt!==null){for(ut=0,dt=lt.length;ut<dt;++ut){if(ht=+lt[ut],ht===it){if(st.all)continue;break}pt=nt.values[ht],isNumberFinite(pt)&&(ct||rt===0||sign$1(rt)===sign$1(pt))&&(rt+=pt)}return rt}}function convertObjectDataToArray(nt){const rt=Object.keys(nt),it=new Array(rt.length);let st,lt,ct;for(st=0,lt=rt.length;st<lt;++st)ct=rt[st],it[st]={x:ct,y:nt[ct]};return it}function isStacked(nt,rt){const it=nt&&nt.options.stacked;return it||it===void 0&&rt.stack!==void 0}function getStackKey(nt,rt,it){return`${nt.id}.${rt.id}.${it.stack||it.type}`}function getUserBounds(nt){const{min:rt,max:it,minDefined:st,maxDefined:lt}=nt.getUserBounds();return{min:st?rt:Number.NEGATIVE_INFINITY,max:lt?it:Number.POSITIVE_INFINITY}}function getOrCreateStack(nt,rt,it){const st=nt[rt]||(nt[rt]={});return st[it]||(st[it]={})}function getLastIndexInStack(nt,rt,it,st){for(const lt of rt.getMatchingVisibleMetas(st).reverse()){const ct=nt[lt.index];if(it&&ct>0||!it&&ct<0)return lt.index}return null}function updateStacks(nt,rt){const{chart:it,_cachedMeta:st}=nt,lt=it._stacks||(it._stacks={}),{iScale:ct,vScale:ut,index:dt}=st,ht=ct.axis,pt=ut.axis,ft=getStackKey(ct,ut,st),mt=rt.length;let gt;for(let xt=0;xt<mt;++xt){const yt=rt[xt],{[ht]:vt,[pt]:St}=yt,Et=yt._stacks||(yt._stacks={});gt=Et[pt]=getOrCreateStack(lt,ft,vt),gt[dt]=St,gt._top=getLastIndexInStack(gt,ut,!0,st.type),gt._bottom=getLastIndexInStack(gt,ut,!1,st.type);const wt=gt._visualValues||(gt._visualValues={});wt[dt]=St}}function getFirstScaleId(nt,rt){const it=nt.scales;return Object.keys(it).filter(st=>it[st].axis===rt).shift()}function createDatasetContext(nt,rt){return createContext(nt,{active:!1,dataset:void 0,datasetIndex:rt,index:rt,mode:"default",type:"dataset"})}function createDataContext(nt,rt,it){return createContext(nt,{active:!1,dataIndex:rt,parsed:void 0,raw:void 0,element:it,index:rt,mode:"default",type:"data"})}function clearStacks(nt,rt){const it=nt.controller.index,st=nt.vScale&&nt.vScale.axis;if(st){rt=rt||nt._parsed;for(const lt of rt){const ct=lt._stacks;if(!ct||ct[st]===void 0||ct[st][it]===void 0)return;delete ct[st][it],ct[st]._visualValues!==void 0&&ct[st]._visualValues[it]!==void 0&&delete ct[st]._visualValues[it]}}}const isDirectUpdateMode=nt=>nt==="reset"||nt==="none",cloneIfNotShared=(nt,rt)=>rt?nt:Object.assign({},nt),createStack=(nt,rt,it)=>nt&&!rt.hidden&&rt._stacked&&{keys:getSortedDatasetIndices(it,!0),values:null};class DatasetController{constructor(rt,it){this.chart=rt,this._ctx=rt.ctx,this.index=it,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const rt=this._cachedMeta;this.configure(),this.linkScales(),rt._stacked=isStacked(rt.vScale,rt),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(rt){this.index!==rt&&clearStacks(this._cachedMeta),this.index=rt}linkScales(){const rt=this.chart,it=this._cachedMeta,st=this.getDataset(),lt=(mt,gt,xt,yt)=>mt==="x"?gt:mt==="r"?yt:xt,ct=it.xAxisID=valueOrDefault(st.xAxisID,getFirstScaleId(rt,"x")),ut=it.yAxisID=valueOrDefault(st.yAxisID,getFirstScaleId(rt,"y")),dt=it.rAxisID=valueOrDefault(st.rAxisID,getFirstScaleId(rt,"r")),ht=it.indexAxis,pt=it.iAxisID=lt(ht,ct,ut,dt),ft=it.vAxisID=lt(ht,ut,ct,dt);it.xScale=this.getScaleForId(ct),it.yScale=this.getScaleForId(ut),it.rScale=this.getScaleForId(dt),it.iScale=this.getScaleForId(pt),it.vScale=this.getScaleForId(ft)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(rt){return this.chart.scales[rt]}_getOtherScale(rt){const it=this._cachedMeta;return rt===it.iScale?it.vScale:it.iScale}reset(){this._update("reset")}_destroy(){const rt=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),rt._stacked&&clearStacks(rt)}_dataCheck(){const rt=this.getDataset(),it=rt.data||(rt.data=[]),st=this._data;if(isObject(it))this._data=convertObjectDataToArray(it);else if(st!==it){if(st){unlistenArrayEvents(st,this);const lt=this._cachedMeta;clearStacks(lt),lt._parsed=[]}it&&Object.isExtensible(it)&&listenArrayEvents(it,this),this._syncList=[],this._data=it}}addElements(){const rt=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(rt.dataset=new this.datasetElementType)}buildOrUpdateElements(rt){const it=this._cachedMeta,st=this.getDataset();let lt=!1;this._dataCheck();const ct=it._stacked;it._stacked=isStacked(it.vScale,it),it.stack!==st.stack&&(lt=!0,clearStacks(it),it.stack=st.stack),this._resyncElements(rt),(lt||ct!==it._stacked)&&updateStacks(this,it._parsed)}configure(){const rt=this.chart.config,it=rt.datasetScopeKeys(this._type),st=rt.getOptionScopes(this.getDataset(),it,!0);this.options=rt.createResolver(st,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(rt,it){const{_cachedMeta:st,_data:lt}=this,{iScale:ct,_stacked:ut}=st,dt=ct.axis;let ht=rt===0&&it===lt.length?!0:st._sorted,pt=rt>0&&st._parsed[rt-1],ft,mt,gt;if(this._parsing===!1)st._parsed=lt,st._sorted=!0,gt=lt;else{isArray(lt[rt])?gt=this.parseArrayData(st,lt,rt,it):isObject(lt[rt])?gt=this.parseObjectData(st,lt,rt,it):gt=this.parsePrimitiveData(st,lt,rt,it);const xt=()=>mt[dt]===null||pt&&mt[dt]<pt[dt];for(ft=0;ft<it;++ft)st._parsed[ft+rt]=mt=gt[ft],ht&&(xt()&&(ht=!1),pt=mt);st._sorted=ht}ut&&updateStacks(this,gt)}parsePrimitiveData(rt,it,st,lt){const{iScale:ct,vScale:ut}=rt,dt=ct.axis,ht=ut.axis,pt=ct.getLabels(),ft=ct===ut,mt=new Array(lt);let gt,xt,yt;for(gt=0,xt=lt;gt<xt;++gt)yt=gt+st,mt[gt]={[dt]:ft||ct.parse(pt[yt],yt),[ht]:ut.parse(it[yt],yt)};return mt}parseArrayData(rt,it,st,lt){const{xScale:ct,yScale:ut}=rt,dt=new Array(lt);let ht,pt,ft,mt;for(ht=0,pt=lt;ht<pt;++ht)ft=ht+st,mt=it[ft],dt[ht]={x:ct.parse(mt[0],ft),y:ut.parse(mt[1],ft)};return dt}parseObjectData(rt,it,st,lt){const{xScale:ct,yScale:ut}=rt,{xAxisKey:dt="x",yAxisKey:ht="y"}=this._parsing,pt=new Array(lt);let ft,mt,gt,xt;for(ft=0,mt=lt;ft<mt;++ft)gt=ft+st,xt=it[gt],pt[ft]={x:ct.parse(resolveObjectKey(xt,dt),gt),y:ut.parse(resolveObjectKey(xt,ht),gt)};return pt}getParsed(rt){return this._cachedMeta._parsed[rt]}getDataElement(rt){return this._cachedMeta.data[rt]}applyStack(rt,it,st){const lt=this.chart,ct=this._cachedMeta,ut=it[rt.axis],dt={keys:getSortedDatasetIndices(lt,!0),values:it._stacks[rt.axis]._visualValues};return applyStack(dt,ut,ct.index,{mode:st})}updateRangeFromParsed(rt,it,st,lt){const ct=st[it.axis];let ut=ct===null?NaN:ct;const dt=lt&&st._stacks[it.axis];lt&&dt&&(lt.values=dt,ut=applyStack(lt,ct,this._cachedMeta.index)),rt.min=Math.min(rt.min,ut),rt.max=Math.max(rt.max,ut)}getMinMax(rt,it){const st=this._cachedMeta,lt=st._parsed,ct=st._sorted&&rt===st.iScale,ut=lt.length,dt=this._getOtherScale(rt),ht=createStack(it,st,this.chart),pt={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ft,max:mt}=getUserBounds(dt);let gt,xt;function yt(){xt=lt[gt];const vt=xt[dt.axis];return!isNumberFinite(xt[rt.axis])||ft>vt||mt<vt}for(gt=0;gt<ut&&!(!yt()&&(this.updateRangeFromParsed(pt,rt,xt,ht),ct));++gt);if(ct){for(gt=ut-1;gt>=0;--gt)if(!yt()){this.updateRangeFromParsed(pt,rt,xt,ht);break}}return pt}getAllParsedValues(rt){const it=this._cachedMeta._parsed,st=[];let lt,ct,ut;for(lt=0,ct=it.length;lt<ct;++lt)ut=it[lt][rt.axis],isNumberFinite(ut)&&st.push(ut);return st}getMaxOverflow(){return!1}getLabelAndValue(rt){const it=this._cachedMeta,st=it.iScale,lt=it.vScale,ct=this.getParsed(rt);return{label:st?""+st.getLabelForValue(ct[st.axis]):"",value:lt?""+lt.getLabelForValue(ct[lt.axis]):""}}_update(rt){const it=this._cachedMeta;this.update(rt||"default"),it._clip=toClip(valueOrDefault(this.options.clip,defaultClip(it.xScale,it.yScale,this.getMaxOverflow())))}update(rt){}draw(){const rt=this._ctx,it=this.chart,st=this._cachedMeta,lt=st.data||[],ct=it.chartArea,ut=[],dt=this._drawStart||0,ht=this._drawCount||lt.length-dt,pt=this.options.drawActiveElementsOnTop;let ft;for(st.dataset&&st.dataset.draw(rt,ct,dt,ht),ft=dt;ft<dt+ht;++ft){const mt=lt[ft];mt.hidden||(mt.active&&pt?ut.push(mt):mt.draw(rt,ct))}for(ft=0;ft<ut.length;++ft)ut[ft].draw(rt,ct)}getStyle(rt,it){const st=it?"active":"default";return rt===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(st):this.resolveDataElementOptions(rt||0,st)}getContext(rt,it,st){const lt=this.getDataset();let ct;if(rt>=0&&rt<this._cachedMeta.data.length){const ut=this._cachedMeta.data[rt];ct=ut.$context||(ut.$context=createDataContext(this.getContext(),rt,ut)),ct.parsed=this.getParsed(rt),ct.raw=lt.data[rt],ct.index=ct.dataIndex=rt}else ct=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),ct.dataset=lt,ct.index=ct.datasetIndex=this.index;return ct.active=!!it,ct.mode=st,ct}resolveDatasetElementOptions(rt){return this._resolveElementOptions(this.datasetElementType.id,rt)}resolveDataElementOptions(rt,it){return this._resolveElementOptions(this.dataElementType.id,it,rt)}_resolveElementOptions(rt,it="default",st){const lt=it==="active",ct=this._cachedDataOpts,ut=rt+"-"+it,dt=ct[ut],ht=this.enableOptionSharing&&defined(st);if(dt)return cloneIfNotShared(dt,ht);const pt=this.chart.config,ft=pt.datasetElementScopeKeys(this._type,rt),mt=lt?[`${rt}Hover`,"hover",rt,""]:[rt,""],gt=pt.getOptionScopes(this.getDataset(),ft),xt=Object.keys(defaults.elements[rt]),yt=()=>this.getContext(st,lt,it),vt=pt.resolveNamedOptions(gt,xt,yt,mt);return vt.$shared&&(vt.$shared=ht,ct[ut]=Object.freeze(cloneIfNotShared(vt,ht))),vt}_resolveAnimations(rt,it,st){const lt=this.chart,ct=this._cachedDataOpts,ut=`animation-${it}`,dt=ct[ut];if(dt)return dt;let ht;if(lt.options.animation!==!1){const ft=this.chart.config,mt=ft.datasetAnimationScopeKeys(this._type,it),gt=ft.getOptionScopes(this.getDataset(),mt);ht=ft.createResolver(gt,this.getContext(rt,st,it))}const pt=new Animations(lt,ht&&ht.animations);return ht&&ht._cacheable&&(ct[ut]=Object.freeze(pt)),pt}getSharedOptions(rt){if(rt.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},rt))}includeOptions(rt,it){return!it||isDirectUpdateMode(rt)||this.chart._animationsDisabled}_getSharedOptions(rt,it){const st=this.resolveDataElementOptions(rt,it),lt=this._sharedOptions,ct=this.getSharedOptions(st),ut=this.includeOptions(it,ct)||ct!==lt;return this.updateSharedOptions(ct,it,st),{sharedOptions:ct,includeOptions:ut}}updateElement(rt,it,st,lt){isDirectUpdateMode(lt)?Object.assign(rt,st):this._resolveAnimations(it,lt).update(rt,st)}updateSharedOptions(rt,it,st){rt&&!isDirectUpdateMode(it)&&this._resolveAnimations(void 0,it).update(rt,st)}_setStyle(rt,it,st,lt){rt.active=lt;const ct=this.getStyle(it,lt);this._resolveAnimations(it,st,lt).update(rt,{options:!lt&&this.getSharedOptions(ct)||ct})}removeHoverStyle(rt,it,st){this._setStyle(rt,st,"active",!1)}setHoverStyle(rt,it,st){this._setStyle(rt,st,"active",!0)}_removeDatasetHoverStyle(){const rt=this._cachedMeta.dataset;rt&&this._setStyle(rt,void 0,"active",!1)}_setDatasetHoverStyle(){const rt=this._cachedMeta.dataset;rt&&this._setStyle(rt,void 0,"active",!0)}_resyncElements(rt){const it=this._data,st=this._cachedMeta.data;for(const[dt,ht,pt]of this._syncList)this[dt](ht,pt);this._syncList=[];const lt=st.length,ct=it.length,ut=Math.min(ct,lt);ut&&this.parse(0,ut),ct>lt?this._insertElements(lt,ct-lt,rt):ct<lt&&this._removeElements(ct,lt-ct)}_insertElements(rt,it,st=!0){const lt=this._cachedMeta,ct=lt.data,ut=rt+it;let dt;const ht=pt=>{for(pt.length+=it,dt=pt.length-1;dt>=ut;dt--)pt[dt]=pt[dt-it]};for(ht(ct),dt=rt;dt<ut;++dt)ct[dt]=new this.dataElementType;this._parsing&&ht(lt._parsed),this.parse(rt,it),st&&this.updateElements(ct,rt,it,"reset")}updateElements(rt,it,st,lt){}_removeElements(rt,it){const st=this._cachedMeta;if(this._parsing){const lt=st._parsed.splice(rt,it);st._stacked&&clearStacks(st,lt)}st.data.splice(rt,it)}_sync(rt){if(this._parsing)this._syncList.push(rt);else{const[it,st,lt]=rt;this[it](st,lt)}this.chart._dataChanges.push([this.index,...rt])}_onDataPush(){const rt=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-rt,rt])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(rt,it){it&&this._sync(["_removeElements",rt,it]);const st=arguments.length-2;st&&this._sync(["_insertElements",rt,st])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}uo(DatasetController,"defaults",{}),uo(DatasetController,"datasetElementType",null),uo(DatasetController,"dataElementType",null);class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(rt){const it=this._cachedMeta,{dataset:st,data:lt=[],_dataset:ct}=it,ut=this.chart._animationsDisabled;let{start:dt,count:ht}=_getStartAndCountOfVisiblePoints(it,lt,ut);this._drawStart=dt,this._drawCount=ht,_scaleRangesChanged(it)&&(dt=0,ht=lt.length),st._chart=this.chart,st._datasetIndex=this.index,st._decimated=!!ct._decimated,st.points=lt;const pt=this.resolveDatasetElementOptions(rt);this.options.showLine||(pt.borderWidth=0),pt.segment=this.options.segment,this.updateElement(st,void 0,{animated:!ut,options:pt},rt),this.updateElements(lt,dt,ht,rt)}updateElements(rt,it,st,lt){const ct=lt==="reset",{iScale:ut,vScale:dt,_stacked:ht,_dataset:pt}=this._cachedMeta,{sharedOptions:ft,includeOptions:mt}=this._getSharedOptions(it,lt),gt=ut.axis,xt=dt.axis,{spanGaps:yt,segment:vt}=this.options,St=isNumber(yt)?yt:Number.POSITIVE_INFINITY,Et=this.chart._animationsDisabled||ct||lt==="none",wt=it+st,Rt=rt.length;let Tt=it>0&&this.getParsed(it-1);for(let It=0;It<Rt;++It){const At=rt[It],Dt=Et?At:{};if(It<it||It>=wt){Dt.skip=!0;continue}const jt=this.getParsed(It),Ft=isNullOrUndef(jt[xt]),Lt=Dt[gt]=ut.getPixelForValue(jt[gt],It),Pt=Dt[xt]=ct||Ft?dt.getBasePixel():dt.getPixelForValue(ht?this.applyStack(dt,jt,ht):jt[xt],It);Dt.skip=isNaN(Lt)||isNaN(Pt)||Ft,Dt.stop=It>0&&Math.abs(jt[gt]-Tt[gt])>St,vt&&(Dt.parsed=jt,Dt.raw=pt.data[It]),mt&&(Dt.options=ft||this.resolveDataElementOptions(It,At.active?"active":lt)),Et||this.updateElement(At,It,Dt,lt),Tt=jt}}getMaxOverflow(){const rt=this._cachedMeta,it=rt.dataset,st=it.options&&it.options.borderWidth||0,lt=rt.data||[];if(!lt.length)return st;const ct=lt[0].size(this.resolveDataElementOptions(0)),ut=lt[lt.length-1].size(this.resolveDataElementOptions(lt.length-1));return Math.max(st,ct,ut)/2}draw(){const rt=this._cachedMeta;rt.dataset.updateControlPoints(this.chart.chartArea,rt.iScale.axis),super.draw()}}uo(LineController,"id","line"),uo(LineController,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),uo(LineController,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(rt){uo(this,"options");this.options=rt||{}}static override(rt){Object.assign(DateAdapterBase.prototype,rt)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(nt,rt,it,st){const{controller:lt,data:ct,_sorted:ut}=nt,dt=lt._cachedMeta.iScale;if(dt&&rt===dt.axis&&rt!=="r"&&ut&&ct.length){const ht=dt._reversePixels?_rlookupByKey:_lookupByKey;if(st){if(lt._sharedOptions){const pt=ct[0],ft=typeof pt.getRange=="function"&&pt.getRange(rt);if(ft){const mt=ht(ct,rt,it-ft),gt=ht(ct,rt,it+ft);return{lo:mt.lo,hi:gt.hi}}}}else return ht(ct,rt,it)}return{lo:0,hi:ct.length-1}}function evaluateInteractionItems(nt,rt,it,st,lt){const ct=nt.getSortedVisibleDatasetMetas(),ut=it[rt];for(let dt=0,ht=ct.length;dt<ht;++dt){const{index:pt,data:ft}=ct[dt],{lo:mt,hi:gt}=binarySearch(ct[dt],rt,ut,lt);for(let xt=mt;xt<=gt;++xt){const yt=ft[xt];yt.skip||st(yt,pt,xt)}}}function getDistanceMetricForAxis(nt){const rt=nt.indexOf("x")!==-1,it=nt.indexOf("y")!==-1;return function(st,lt){const ct=rt?Math.abs(st.x-lt.x):0,ut=it?Math.abs(st.y-lt.y):0;return Math.sqrt(Math.pow(ct,2)+Math.pow(ut,2))}}function getIntersectItems(nt,rt,it,st,lt){const ct=[];return!lt&&!nt.isPointInArea(rt)||evaluateInteractionItems(nt,it,rt,function(dt,ht,pt){!lt&&!_isPointInArea(dt,nt.chartArea,0)||dt.inRange(rt.x,rt.y,st)&&ct.push({element:dt,datasetIndex:ht,index:pt})},!0),ct}function getNearestRadialItems(nt,rt,it,st){let lt=[];function ct(ut,dt,ht){const{startAngle:pt,endAngle:ft}=ut.getProps(["startAngle","endAngle"],st),{angle:mt}=getAngleFromPoint(ut,{x:rt.x,y:rt.y});_angleBetween(mt,pt,ft)&&lt.push({element:ut,datasetIndex:dt,index:ht})}return evaluateInteractionItems(nt,it,rt,ct),lt}function getNearestCartesianItems(nt,rt,it,st,lt,ct){let ut=[];const dt=getDistanceMetricForAxis(it);let ht=Number.POSITIVE_INFINITY;function pt(ft,mt,gt){const xt=ft.inRange(rt.x,rt.y,lt);if(st&&!xt)return;const yt=ft.getCenterPoint(lt);if(!(!!ct||nt.isPointInArea(yt))&&!xt)return;const St=dt(rt,yt);St<ht?(ut=[{element:ft,datasetIndex:mt,index:gt}],ht=St):St===ht&&ut.push({element:ft,datasetIndex:mt,index:gt})}return evaluateInteractionItems(nt,it,rt,pt),ut}function getNearestItems(nt,rt,it,st,lt,ct){return!ct&&!nt.isPointInArea(rt)?[]:it==="r"&&!st?getNearestRadialItems(nt,rt,it,lt):getNearestCartesianItems(nt,rt,it,st,lt,ct)}function getAxisItems(nt,rt,it,st,lt){const ct=[],ut=it==="x"?"inXRange":"inYRange";let dt=!1;return evaluateInteractionItems(nt,it,rt,(ht,pt,ft)=>{ht[ut](rt[it],lt)&&(ct.push({element:ht,datasetIndex:pt,index:ft}),dt=dt||ht.inRange(rt.x,rt.y,lt))}),st&&!dt?[]:ct}var Interaction={evaluateInteractionItems,modes:{index(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"x",ut=it.includeInvisible||!1,dt=it.intersect?getIntersectItems(nt,lt,ct,st,ut):getNearestItems(nt,lt,ct,!1,st,ut),ht=[];return dt.length?(nt.getSortedVisibleDatasetMetas().forEach(pt=>{const ft=dt[0].index,mt=pt.data[ft];mt&&!mt.skip&&ht.push({element:mt,datasetIndex:pt.index,index:ft})}),ht):[]},dataset(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;let dt=it.intersect?getIntersectItems(nt,lt,ct,st,ut):getNearestItems(nt,lt,ct,!1,st,ut);if(dt.length>0){const ht=dt[0].datasetIndex,pt=nt.getDatasetMeta(ht).data;dt=[];for(let ft=0;ft<pt.length;++ft)dt.push({element:pt[ft],datasetIndex:ht,index:ft})}return dt},point(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;return getIntersectItems(nt,lt,ct,st,ut)},nearest(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;return getNearestItems(nt,lt,ct,it.intersect,st,ut)},x(nt,rt,it,st){const lt=getRelativePosition(rt,nt);return getAxisItems(nt,lt,"x",it.intersect,st)},y(nt,rt,it,st){const lt=getRelativePosition(rt,nt);return getAxisItems(nt,lt,"y",it.intersect,st)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(nt,rt){return nt.filter(it=>it.pos===rt)}function filterDynamicPositionByAxis(nt,rt){return nt.filter(it=>STATIC_POSITIONS.indexOf(it.pos)===-1&&it.box.axis===rt)}function sortByWeight(nt,rt){return nt.sort((it,st)=>{const lt=rt?st:it,ct=rt?it:st;return lt.weight===ct.weight?lt.index-ct.index:lt.weight-ct.weight})}function wrapBoxes(nt){const rt=[];let it,st,lt,ct,ut,dt;for(it=0,st=(nt||[]).length;it<st;++it)lt=nt[it],{position:ct,options:{stack:ut,stackWeight:dt=1}}=lt,rt.push({index:it,box:lt,pos:ct,horizontal:lt.isHorizontal(),weight:lt.weight,stack:ut&&ct+ut,stackWeight:dt});return rt}function buildStacks(nt){const rt={};for(const it of nt){const{stack:st,pos:lt,stackWeight:ct}=it;if(!st||!STATIC_POSITIONS.includes(lt))continue;const ut=rt[st]||(rt[st]={count:0,placed:0,weight:0,size:0});ut.count++,ut.weight+=ct}return rt}function setLayoutDims(nt,rt){const it=buildStacks(nt),{vBoxMaxWidth:st,hBoxMaxHeight:lt}=rt;let ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct){dt=nt[ct];const{fullSize:ht}=dt.box,pt=it[dt.stack],ft=pt&&dt.stackWeight/pt.weight;dt.horizontal?(dt.width=ft?ft*st:ht&&rt.availableWidth,dt.height=lt):(dt.width=st,dt.height=ft?ft*lt:ht&&rt.availableHeight)}return it}function buildLayoutBoxes(nt){const rt=wrapBoxes(nt),it=sortByWeight(rt.filter(pt=>pt.box.fullSize),!0),st=sortByWeight(filterByPosition(rt,"left"),!0),lt=sortByWeight(filterByPosition(rt,"right")),ct=sortByWeight(filterByPosition(rt,"top"),!0),ut=sortByWeight(filterByPosition(rt,"bottom")),dt=filterDynamicPositionByAxis(rt,"x"),ht=filterDynamicPositionByAxis(rt,"y");return{fullSize:it,leftAndTop:st.concat(ct),rightAndBottom:lt.concat(ht).concat(ut).concat(dt),chartArea:filterByPosition(rt,"chartArea"),vertical:st.concat(lt).concat(ht),horizontal:ct.concat(ut).concat(dt)}}function getCombinedMax(nt,rt,it,st){return Math.max(nt[it],rt[it])+Math.max(nt[st],rt[st])}function updateMaxPadding(nt,rt){nt.top=Math.max(nt.top,rt.top),nt.left=Math.max(nt.left,rt.left),nt.bottom=Math.max(nt.bottom,rt.bottom),nt.right=Math.max(nt.right,rt.right)}function updateDims(nt,rt,it,st){const{pos:lt,box:ct}=it,ut=nt.maxPadding;if(!isObject(lt)){it.size&&(nt[lt]-=it.size);const mt=st[it.stack]||{size:0,count:1};mt.size=Math.max(mt.size,it.horizontal?ct.height:ct.width),it.size=mt.size/mt.count,nt[lt]+=it.size}ct.getPadding&&updateMaxPadding(ut,ct.getPadding());const dt=Math.max(0,rt.outerWidth-getCombinedMax(ut,nt,"left","right")),ht=Math.max(0,rt.outerHeight-getCombinedMax(ut,nt,"top","bottom")),pt=dt!==nt.w,ft=ht!==nt.h;return nt.w=dt,nt.h=ht,it.horizontal?{same:pt,other:ft}:{same:ft,other:pt}}function handleMaxPadding(nt){const rt=nt.maxPadding;function it(st){const lt=Math.max(rt[st]-nt[st],0);return nt[st]+=lt,lt}nt.y+=it("top"),nt.x+=it("left"),it("right"),it("bottom")}function getMargins(nt,rt){const it=rt.maxPadding;function st(lt){const ct={left:0,top:0,right:0,bottom:0};return lt.forEach(ut=>{ct[ut]=Math.max(rt[ut],it[ut])}),ct}return st(nt?["left","right"]:["top","bottom"])}function fitBoxes(nt,rt,it,st){const lt=[];let ct,ut,dt,ht,pt,ft;for(ct=0,ut=nt.length,pt=0;ct<ut;++ct){dt=nt[ct],ht=dt.box,ht.update(dt.width||rt.w,dt.height||rt.h,getMargins(dt.horizontal,rt));const{same:mt,other:gt}=updateDims(rt,it,dt,st);pt|=mt&&lt.length,ft=ft||gt,ht.fullSize||lt.push(dt)}return pt&&fitBoxes(lt,rt,it,st)||ft}function setBoxDims(nt,rt,it,st,lt){nt.top=it,nt.left=rt,nt.right=rt+st,nt.bottom=it+lt,nt.width=st,nt.height=lt}function placeBoxes(nt,rt,it,st){const lt=it.padding;let{x:ct,y:ut}=rt;for(const dt of nt){const ht=dt.box,pt=st[dt.stack]||{count:1,placed:0,weight:1},ft=dt.stackWeight/pt.weight||1;if(dt.horizontal){const mt=rt.w*ft,gt=pt.size||ht.height;defined(pt.start)&&(ut=pt.start),ht.fullSize?setBoxDims(ht,lt.left,ut,it.outerWidth-lt.right-lt.left,gt):setBoxDims(ht,rt.left+pt.placed,ut,mt,gt),pt.start=ut,pt.placed+=mt,ut=ht.bottom}else{const mt=rt.h*ft,gt=pt.size||ht.width;defined(pt.start)&&(ct=pt.start),ht.fullSize?setBoxDims(ht,ct,lt.top,gt,it.outerHeight-lt.bottom-lt.top):setBoxDims(ht,ct,rt.top+pt.placed,gt,mt),pt.start=ct,pt.placed+=mt,ct=ht.right}}rt.x=ct,rt.y=ut}var layouts={addBox(nt,rt){nt.boxes||(nt.boxes=[]),rt.fullSize=rt.fullSize||!1,rt.position=rt.position||"top",rt.weight=rt.weight||0,rt._layers=rt._layers||function(){return[{z:0,draw(it){rt.draw(it)}}]},nt.boxes.push(rt)},removeBox(nt,rt){const it=nt.boxes?nt.boxes.indexOf(rt):-1;it!==-1&&nt.boxes.splice(it,1)},configure(nt,rt,it){rt.fullSize=it.fullSize,rt.position=it.position,rt.weight=it.weight},update(nt,rt,it,st){if(!nt)return;const lt=toPadding(nt.options.layout.padding),ct=Math.max(rt-lt.width,0),ut=Math.max(it-lt.height,0),dt=buildLayoutBoxes(nt.boxes),ht=dt.vertical,pt=dt.horizontal;each(nt.boxes,vt=>{typeof vt.beforeLayout=="function"&&vt.beforeLayout()});const ft=ht.reduce((vt,St)=>St.box.options&&St.box.options.display===!1?vt:vt+1,0)||1,mt=Object.freeze({outerWidth:rt,outerHeight:it,padding:lt,availableWidth:ct,availableHeight:ut,vBoxMaxWidth:ct/2/ft,hBoxMaxHeight:ut/2}),gt=Object.assign({},lt);updateMaxPadding(gt,toPadding(st));const xt=Object.assign({maxPadding:gt,w:ct,h:ut,x:lt.left,y:lt.top},lt),yt=setLayoutDims(ht.concat(pt),mt);fitBoxes(dt.fullSize,xt,mt,yt),fitBoxes(ht,xt,mt,yt),fitBoxes(pt,xt,mt,yt)&&fitBoxes(ht,xt,mt,yt),handleMaxPadding(xt),placeBoxes(dt.leftAndTop,xt,mt,yt),xt.x+=xt.w,xt.y+=xt.h,placeBoxes(dt.rightAndBottom,xt,mt,yt),nt.chartArea={left:xt.left,top:xt.top,right:xt.left+xt.w,bottom:xt.top+xt.h,height:xt.h,width:xt.w},each(dt.chartArea,vt=>{const St=vt.box;Object.assign(St,nt.chartArea),St.update(xt.w,xt.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(rt,it){}releaseContext(rt){return!1}addEventListener(rt,it,st){}removeEventListener(rt,it,st){}getDevicePixelRatio(){return 1}getMaximumSize(rt,it,st,lt){return it=Math.max(0,it||rt.width),st=st||rt.height,{width:it,height:Math.max(0,lt?Math.floor(it/lt):st)}}isAttached(rt){return!0}updateConfig(rt){}}class BasicPlatform extends BasePlatform{acquireContext(rt){return rt&&rt.getContext&&rt.getContext("2d")||null}updateConfig(rt){rt.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=nt=>nt===null||nt==="";function initCanvas(nt,rt){const it=nt.style,st=nt.getAttribute("height"),lt=nt.getAttribute("width");if(nt[EXPANDO_KEY]={initial:{height:st,width:lt,style:{display:it.display,height:it.height,width:it.width}}},it.display=it.display||"block",it.boxSizing=it.boxSizing||"border-box",isNullOrEmpty(lt)){const ct=readUsedSize(nt,"width");ct!==void 0&&(nt.width=ct)}if(isNullOrEmpty(st))if(nt.style.height==="")nt.height=nt.width/(rt||2);else{const ct=readUsedSize(nt,"height");ct!==void 0&&(nt.height=ct)}return nt}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(nt,rt,it){nt.addEventListener(rt,it,eventListenerOptions)}function removeListener(nt,rt,it){nt.canvas.removeEventListener(rt,it,eventListenerOptions)}function fromNativeEvent(nt,rt){const it=EVENT_TYPES[nt.type]||nt.type,{x:st,y:lt}=getRelativePosition(nt,rt);return{type:it,chart:rt,native:nt,x:st!==void 0?st:null,y:lt!==void 0?lt:null}}function nodeListContains(nt,rt){for(const it of nt)if(it===rt||it.contains(rt))return!0}function createAttachObserver(nt,rt,it){const st=nt.canvas,lt=new MutationObserver(ct=>{let ut=!1;for(const dt of ct)ut=ut||nodeListContains(dt.addedNodes,st),ut=ut&&!nodeListContains(dt.removedNodes,st);ut&&it()});return lt.observe(document,{childList:!0,subtree:!0}),lt}function createDetachObserver(nt,rt,it){const st=nt.canvas,lt=new MutationObserver(ct=>{let ut=!1;for(const dt of ct)ut=ut||nodeListContains(dt.removedNodes,st),ut=ut&&!nodeListContains(dt.addedNodes,st);ut&&it()});return lt.observe(document,{childList:!0,subtree:!0}),lt}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const nt=window.devicePixelRatio;nt!==oldDevicePixelRatio&&(oldDevicePixelRatio=nt,drpListeningCharts.forEach((rt,it)=>{it.currentDevicePixelRatio!==nt&&rt()}))}function listenDevicePixelRatioChanges(nt,rt){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(nt,rt)}function unlistenDevicePixelRatioChanges(nt){drpListeningCharts.delete(nt),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(nt,rt,it){const st=nt.canvas,lt=st&&_getParentNode(st);if(!lt)return;const ct=throttled((dt,ht)=>{const pt=lt.clientWidth;it(dt,ht),pt<lt.clientWidth&&it()},window),ut=new ResizeObserver(dt=>{const ht=dt[0],pt=ht.contentRect.width,ft=ht.contentRect.height;pt===0&&ft===0||ct(pt,ft)});return ut.observe(lt),listenDevicePixelRatioChanges(nt,ct),ut}function releaseObserver(nt,rt,it){it&&it.disconnect(),rt==="resize"&&unlistenDevicePixelRatioChanges(nt)}function createProxyAndListen(nt,rt,it){const st=nt.canvas,lt=throttled(ct=>{nt.ctx!==null&&it(fromNativeEvent(ct,nt))},nt);return addListener(st,rt,lt),lt}class DomPlatform extends BasePlatform{acquireContext(rt,it){const st=rt&&rt.getContext&&rt.getContext("2d");return st&&st.canvas===rt?(initCanvas(rt,it),st):null}releaseContext(rt){const it=rt.canvas;if(!it[EXPANDO_KEY])return!1;const st=it[EXPANDO_KEY].initial;["height","width"].forEach(ct=>{const ut=st[ct];isNullOrUndef(ut)?it.removeAttribute(ct):it.setAttribute(ct,ut)});const lt=st.style||{};return Object.keys(lt).forEach(ct=>{it.style[ct]=lt[ct]}),it.width=it.width,delete it[EXPANDO_KEY],!0}addEventListener(rt,it,st){this.removeEventListener(rt,it);const lt=rt.$proxies||(rt.$proxies={}),ut={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[it]||createProxyAndListen;lt[it]=ut(rt,it,st)}removeEventListener(rt,it){const st=rt.$proxies||(rt.$proxies={}),lt=st[it];if(!lt)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[it]||removeListener)(rt,it,lt),st[it]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(rt,it,st,lt){return getMaximumSize(rt,it,st,lt)}isAttached(rt){const it=_getParentNode(rt);return!!(it&&it.isConnected)}}function _detectPlatform(nt){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&nt instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var _g;let Element$1=(_g=class{constructor(){uo(this,"x");uo(this,"y");uo(this,"active",!1);uo(this,"options");uo(this,"$animations")}tooltipPosition(rt){const{x:it,y:st}=this.getProps(["x","y"],rt);return{x:it,y:st}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(rt,it){const st=this.$animations;if(!it||!st)return this;const lt={};return rt.forEach(ct=>{lt[ct]=st[ct]&&st[ct].active()?st[ct]._to:this[ct]}),lt}},uo(_g,"defaults",{}),uo(_g,"defaultRoutes"),_g);function autoSkip(nt,rt){const it=nt.options.ticks,st=determineMaxTicks(nt),lt=Math.min(it.maxTicksLimit||st,st),ct=it.major.enabled?getMajorIndices(rt):[],ut=ct.length,dt=ct[0],ht=ct[ut-1],pt=[];if(ut>lt)return skipMajors(rt,pt,ct,ut/lt),pt;const ft=calculateSpacing(ct,rt,lt);if(ut>0){let mt,gt;const xt=ut>1?Math.round((ht-dt)/(ut-1)):null;for(skip(rt,pt,ft,isNullOrUndef(xt)?0:dt-xt,dt),mt=0,gt=ut-1;mt<gt;mt++)skip(rt,pt,ft,ct[mt],ct[mt+1]);return skip(rt,pt,ft,ht,isNullOrUndef(xt)?rt.length:ht+xt),pt}return skip(rt,pt,ft),pt}function determineMaxTicks(nt){const rt=nt.options.offset,it=nt._tickSize(),st=nt._length/it+(rt?0:1),lt=nt._maxLength/it;return Math.floor(Math.min(st,lt))}function calculateSpacing(nt,rt,it){const st=getEvenSpacing(nt),lt=rt.length/it;if(!st)return Math.max(lt,1);const ct=_factorize(st);for(let ut=0,dt=ct.length-1;ut<dt;ut++){const ht=ct[ut];if(ht>lt)return ht}return Math.max(lt,1)}function getMajorIndices(nt){const rt=[];let it,st;for(it=0,st=nt.length;it<st;it++)nt[it].major&&rt.push(it);return rt}function skipMajors(nt,rt,it,st){let lt=0,ct=it[0],ut;for(st=Math.ceil(st),ut=0;ut<nt.length;ut++)ut===ct&&(rt.push(nt[ut]),lt++,ct=it[lt*st])}function skip(nt,rt,it,st,lt){const ct=valueOrDefault(st,0),ut=Math.min(valueOrDefault(lt,nt.length),nt.length);let dt=0,ht,pt,ft;for(it=Math.ceil(it),lt&&(ht=lt-st,it=ht/Math.floor(ht/it)),ft=ct;ft<0;)dt++,ft=Math.round(ct+dt*it);for(pt=Math.max(ct,0);pt<ut;pt++)pt===ft&&(rt.push(nt[pt]),dt++,ft=Math.round(ct+dt*it))}function getEvenSpacing(nt){const rt=nt.length;let it,st;if(rt<2)return!1;for(st=nt[0],it=1;it<rt;++it)if(nt[it]-nt[it-1]!==st)return!1;return st}const reverseAlign=nt=>nt==="left"?"right":nt==="right"?"left":nt,offsetFromEdge=(nt,rt,it)=>rt==="top"||rt==="left"?nt[rt]+it:nt[rt]-it,getTicksLimit=(nt,rt)=>Math.min(rt||nt,nt);function sample(nt,rt){const it=[],st=nt.length/rt,lt=nt.length;let ct=0;for(;ct<lt;ct+=st)it.push(nt[Math.floor(ct)]);return it}function getPixelForGridLine(nt,rt,it){const st=nt.ticks.length,lt=Math.min(rt,st-1),ct=nt._startPixel,ut=nt._endPixel,dt=1e-6;let ht=nt.getPixelForTick(lt),pt;if(!(it&&(st===1?pt=Math.max(ht-ct,ut-ht):rt===0?pt=(nt.getPixelForTick(1)-ht)/2:pt=(ht-nt.getPixelForTick(lt-1))/2,ht+=lt<rt?pt:-pt,ht<ct-dt||ht>ut+dt)))return ht}function garbageCollect(nt,rt){each(nt,it=>{const st=it.gc,lt=st.length/2;let ct;if(lt>rt){for(ct=0;ct<lt;++ct)delete it.data[st[ct]];st.splice(0,lt)}})}function getTickMarkLength(nt){return nt.drawTicks?nt.tickLength:0}function getTitleHeight(nt,rt){if(!nt.display)return 0;const it=toFont(nt.font,rt),st=toPadding(nt.padding);return(isArray(nt.text)?nt.text.length:1)*it.lineHeight+st.height}function createScaleContext(nt,rt){return createContext(nt,{scale:rt,type:"scale"})}function createTickContext(nt,rt,it){return createContext(nt,{tick:it,index:rt,type:"tick"})}function titleAlign(nt,rt,it){let st=_toLeftRightCenter(nt);return(it&&rt!=="right"||!it&&rt==="right")&&(st=reverseAlign(st)),st}function titleArgs(nt,rt,it,st){const{top:lt,left:ct,bottom:ut,right:dt,chart:ht}=nt,{chartArea:pt,scales:ft}=ht;let mt=0,gt,xt,yt;const vt=ut-lt,St=dt-ct;if(nt.isHorizontal()){if(xt=_alignStartEnd(st,ct,dt),isObject(it)){const Et=Object.keys(it)[0],wt=it[Et];yt=ft[Et].getPixelForValue(wt)+vt-rt}else it==="center"?yt=(pt.bottom+pt.top)/2+vt-rt:yt=offsetFromEdge(nt,it,rt);gt=dt-ct}else{if(isObject(it)){const Et=Object.keys(it)[0],wt=it[Et];xt=ft[Et].getPixelForValue(wt)-St+rt}else it==="center"?xt=(pt.left+pt.right)/2-St+rt:xt=offsetFromEdge(nt,it,rt);yt=_alignStartEnd(st,ut,lt),mt=it==="left"?-HALF_PI:HALF_PI}return{titleX:xt,titleY:yt,maxWidth:gt,rotation:mt}}class Scale extends Element$1{constructor(rt){super(),this.id=rt.id,this.type=rt.type,this.options=void 0,this.ctx=rt.ctx,this.chart=rt.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(rt){this.options=rt.setContext(this.getContext()),this.axis=rt.axis,this._userMin=this.parse(rt.min),this._userMax=this.parse(rt.max),this._suggestedMin=this.parse(rt.suggestedMin),this._suggestedMax=this.parse(rt.suggestedMax)}parse(rt,it){return rt}getUserBounds(){let{_userMin:rt,_userMax:it,_suggestedMin:st,_suggestedMax:lt}=this;return rt=finiteOrDefault(rt,Number.POSITIVE_INFINITY),it=finiteOrDefault(it,Number.NEGATIVE_INFINITY),st=finiteOrDefault(st,Number.POSITIVE_INFINITY),lt=finiteOrDefault(lt,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(rt,st),max:finiteOrDefault(it,lt),minDefined:isNumberFinite(rt),maxDefined:isNumberFinite(it)}}getMinMax(rt){let{min:it,max:st,minDefined:lt,maxDefined:ct}=this.getUserBounds(),ut;if(lt&&ct)return{min:it,max:st};const dt=this.getMatchingVisibleMetas();for(let ht=0,pt=dt.length;ht<pt;++ht)ut=dt[ht].controller.getMinMax(this,rt),lt||(it=Math.min(it,ut.min)),ct||(st=Math.max(st,ut.max));return it=ct&&it>st?st:it,st=lt&&it>st?it:st,{min:finiteOrDefault(it,finiteOrDefault(st,it)),max:finiteOrDefault(st,finiteOrDefault(it,st))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const rt=this.chart.data;return this.options.labels||(this.isHorizontal()?rt.xLabels:rt.yLabels)||rt.labels||[]}getLabelItems(rt=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(rt))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(rt,it,st){const{beginAtZero:lt,grace:ct,ticks:ut}=this.options,dt=ut.sampleSize;this.beforeUpdate(),this.maxWidth=rt,this.maxHeight=it,this._margins=st=Object.assign({left:0,right:0,top:0,bottom:0},st),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+st.left+st.right:this.height+st.top+st.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,ct,lt),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const ht=dt<this.ticks.length;this._convertTicksToLabels(ht?sample(this.ticks,dt):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),ut.display&&(ut.autoSkip||ut.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),ht&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let rt=this.options.reverse,it,st;this.isHorizontal()?(it=this.left,st=this.right):(it=this.top,st=this.bottom,rt=!rt),this._startPixel=it,this._endPixel=st,this._reversePixels=rt,this._length=st-it,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(rt){this.chart.notifyPlugins(rt,this.getContext()),callback(this.options[rt],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(rt){const it=this.options.ticks;let st,lt,ct;for(st=0,lt=rt.length;st<lt;st++)ct=rt[st],ct.label=callback(it.callback,[ct.value,st,rt],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const rt=this.options,it=rt.ticks,st=getTicksLimit(this.ticks.length,rt.ticks.maxTicksLimit),lt=it.minRotation||0,ct=it.maxRotation;let ut=lt,dt,ht,pt;if(!this._isVisible()||!it.display||lt>=ct||st<=1||!this.isHorizontal()){this.labelRotation=lt;return}const ft=this._getLabelSizes(),mt=ft.widest.width,gt=ft.highest.height,xt=_limitValue(this.chart.width-mt,0,this.maxWidth);dt=rt.offset?this.maxWidth/st:xt/(st-1),mt+6>dt&&(dt=xt/(st-(rt.offset?.5:1)),ht=this.maxHeight-getTickMarkLength(rt.grid)-it.padding-getTitleHeight(rt.title,this.chart.options.font),pt=Math.sqrt(mt*mt+gt*gt),ut=toDegrees(Math.min(Math.asin(_limitValue((ft.highest.height+6)/dt,-1,1)),Math.asin(_limitValue(ht/pt,-1,1))-Math.asin(_limitValue(gt/pt,-1,1)))),ut=Math.max(lt,Math.min(ct,ut))),this.labelRotation=ut}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const rt={width:0,height:0},{chart:it,options:{ticks:st,title:lt,grid:ct}}=this,ut=this._isVisible(),dt=this.isHorizontal();if(ut){const ht=getTitleHeight(lt,it.options.font);if(dt?(rt.width=this.maxWidth,rt.height=getTickMarkLength(ct)+ht):(rt.height=this.maxHeight,rt.width=getTickMarkLength(ct)+ht),st.display&&this.ticks.length){const{first:pt,last:ft,widest:mt,highest:gt}=this._getLabelSizes(),xt=st.padding*2,yt=toRadians(this.labelRotation),vt=Math.cos(yt),St=Math.sin(yt);if(dt){const Et=st.mirror?0:St*mt.width+vt*gt.height;rt.height=Math.min(this.maxHeight,rt.height+Et+xt)}else{const Et=st.mirror?0:vt*mt.width+St*gt.height;rt.width=Math.min(this.maxWidth,rt.width+Et+xt)}this._calculatePadding(pt,ft,St,vt)}}this._handleMargins(),dt?(this.width=this._length=it.width-this._margins.left-this._margins.right,this.height=rt.height):(this.width=rt.width,this.height=this._length=it.height-this._margins.top-this._margins.bottom)}_calculatePadding(rt,it,st,lt){const{ticks:{align:ct,padding:ut},position:dt}=this.options,ht=this.labelRotation!==0,pt=dt!=="top"&&this.axis==="x";if(this.isHorizontal()){const ft=this.getPixelForTick(0)-this.left,mt=this.right-this.getPixelForTick(this.ticks.length-1);let gt=0,xt=0;ht?pt?(gt=lt*rt.width,xt=st*it.height):(gt=st*rt.height,xt=lt*it.width):ct==="start"?xt=it.width:ct==="end"?gt=rt.width:ct!=="inner"&&(gt=rt.width/2,xt=it.width/2),this.paddingLeft=Math.max((gt-ft+ut)*this.width/(this.width-ft),0),this.paddingRight=Math.max((xt-mt+ut)*this.width/(this.width-mt),0)}else{let ft=it.height/2,mt=rt.height/2;ct==="start"?(ft=0,mt=rt.height):ct==="end"&&(ft=it.height,mt=0),this.paddingTop=ft+ut,this.paddingBottom=mt+ut}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:rt,position:it}=this.options;return it==="top"||it==="bottom"||rt==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(rt){this.beforeTickToLabelConversion(),this.generateTickLabels(rt);let it,st;for(it=0,st=rt.length;it<st;it++)isNullOrUndef(rt[it].label)&&(rt.splice(it,1),st--,it--);this.afterTickToLabelConversion()}_getLabelSizes(){let rt=this._labelSizes;if(!rt){const it=this.options.ticks.sampleSize;let st=this.ticks;it<st.length&&(st=sample(st,it)),this._labelSizes=rt=this._computeLabelSizes(st,st.length,this.options.ticks.maxTicksLimit)}return rt}_computeLabelSizes(rt,it,st){const{ctx:lt,_longestTextCache:ct}=this,ut=[],dt=[],ht=Math.floor(it/getTicksLimit(it,st));let pt=0,ft=0,mt,gt,xt,yt,vt,St,Et,wt,Rt,Tt,It;for(mt=0;mt<it;mt+=ht){if(yt=rt[mt].label,vt=this._resolveTickFontOptions(mt),lt.font=St=vt.string,Et=ct[St]=ct[St]||{data:{},gc:[]},wt=vt.lineHeight,Rt=Tt=0,!isNullOrUndef(yt)&&!isArray(yt))Rt=_measureText(lt,Et.data,Et.gc,Rt,yt),Tt=wt;else if(isArray(yt))for(gt=0,xt=yt.length;gt<xt;++gt)It=yt[gt],!isNullOrUndef(It)&&!isArray(It)&&(Rt=_measureText(lt,Et.data,Et.gc,Rt,It),Tt+=wt);ut.push(Rt),dt.push(Tt),pt=Math.max(Rt,pt),ft=Math.max(Tt,ft)}garbageCollect(ct,it);const At=ut.indexOf(pt),Dt=dt.indexOf(ft),jt=Ft=>({width:ut[Ft]||0,height:dt[Ft]||0});return{first:jt(0),last:jt(it-1),widest:jt(At),highest:jt(Dt),widths:ut,heights:dt}}getLabelForValue(rt){return rt}getPixelForValue(rt,it){return NaN}getValueForPixel(rt){}getPixelForTick(rt){const it=this.ticks;return rt<0||rt>it.length-1?null:this.getPixelForValue(it[rt].value)}getPixelForDecimal(rt){this._reversePixels&&(rt=1-rt);const it=this._startPixel+rt*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,it,0):it)}getDecimalForPixel(rt){const it=(rt-this._startPixel)/this._length;return this._reversePixels?1-it:it}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:rt,max:it}=this;return rt<0&&it<0?it:rt>0&&it>0?rt:0}getContext(rt){const it=this.ticks||[];if(rt>=0&&rt<it.length){const st=it[rt];return st.$context||(st.$context=createTickContext(this.getContext(),rt,st))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const rt=this.options.ticks,it=toRadians(this.labelRotation),st=Math.abs(Math.cos(it)),lt=Math.abs(Math.sin(it)),ct=this._getLabelSizes(),ut=rt.autoSkipPadding||0,dt=ct?ct.widest.width+ut:0,ht=ct?ct.highest.height+ut:0;return this.isHorizontal()?ht*st>dt*lt?dt/st:ht/lt:ht*lt<dt*st?ht/st:dt/lt}_isVisible(){const rt=this.options.display;return rt!=="auto"?!!rt:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(rt){const it=this.axis,st=this.chart,lt=this.options,{grid:ct,position:ut,border:dt}=lt,ht=ct.offset,pt=this.isHorizontal(),mt=this.ticks.length+(ht?1:0),gt=getTickMarkLength(ct),xt=[],yt=dt.setContext(this.getContext()),vt=yt.display?yt.width:0,St=vt/2,Et=function(Ut){return _alignPixel(st,Ut,vt)};let wt,Rt,Tt,It,At,Dt,jt,Ft,Lt,Pt,Ot,Nt;if(ut==="top")wt=Et(this.bottom),Dt=this.bottom-gt,Ft=wt-St,Pt=Et(rt.top)+St,Nt=rt.bottom;else if(ut==="bottom")wt=Et(this.top),Pt=rt.top,Nt=Et(rt.bottom)-St,Dt=wt+St,Ft=this.top+gt;else if(ut==="left")wt=Et(this.right),At=this.right-gt,jt=wt-St,Lt=Et(rt.left)+St,Ot=rt.right;else if(ut==="right")wt=Et(this.left),Lt=rt.left,Ot=Et(rt.right)-St,At=wt+St,jt=this.left+gt;else if(it==="x"){if(ut==="center")wt=Et((rt.top+rt.bottom)/2+.5);else if(isObject(ut)){const Ut=Object.keys(ut)[0],zt=ut[Ut];wt=Et(this.chart.scales[Ut].getPixelForValue(zt))}Pt=rt.top,Nt=rt.bottom,Dt=wt+St,Ft=Dt+gt}else if(it==="y"){if(ut==="center")wt=Et((rt.left+rt.right)/2);else if(isObject(ut)){const Ut=Object.keys(ut)[0],zt=ut[Ut];wt=Et(this.chart.scales[Ut].getPixelForValue(zt))}At=wt-St,jt=At-gt,Lt=rt.left,Ot=rt.right}const $t=valueOrDefault(lt.ticks.maxTicksLimit,mt),Vt=Math.max(1,Math.ceil(mt/$t));for(Rt=0;Rt<mt;Rt+=Vt){const Ut=this.getContext(Rt),zt=ct.setContext(Ut),Bt=dt.setContext(Ut),Ht=zt.lineWidth,Gt=zt.color,Kt=Bt.dash||[],Xt=Bt.dashOffset,or=zt.tickWidth,tr=zt.tickColor,dr=zt.tickBorderDash||[],fr=zt.tickBorderDashOffset;Tt=getPixelForGridLine(this,Rt,ht),Tt!==void 0&&(It=_alignPixel(st,Tt,Ht),pt?At=jt=Lt=Ot=It:Dt=Ft=Pt=Nt=It,xt.push({tx1:At,ty1:Dt,tx2:jt,ty2:Ft,x1:Lt,y1:Pt,x2:Ot,y2:Nt,width:Ht,color:Gt,borderDash:Kt,borderDashOffset:Xt,tickWidth:or,tickColor:tr,tickBorderDash:dr,tickBorderDashOffset:fr}))}return this._ticksLength=mt,this._borderValue=wt,xt}_computeLabelItems(rt){const it=this.axis,st=this.options,{position:lt,ticks:ct}=st,ut=this.isHorizontal(),dt=this.ticks,{align:ht,crossAlign:pt,padding:ft,mirror:mt}=ct,gt=getTickMarkLength(st.grid),xt=gt+ft,yt=mt?-ft:xt,vt=-toRadians(this.labelRotation),St=[];let Et,wt,Rt,Tt,It,At,Dt,jt,Ft,Lt,Pt,Ot,Nt="middle";if(lt==="top")At=this.bottom-yt,Dt=this._getXAxisLabelAlignment();else if(lt==="bottom")At=this.top+yt,Dt=this._getXAxisLabelAlignment();else if(lt==="left"){const Vt=this._getYAxisLabelAlignment(gt);Dt=Vt.textAlign,It=Vt.x}else if(lt==="right"){const Vt=this._getYAxisLabelAlignment(gt);Dt=Vt.textAlign,It=Vt.x}else if(it==="x"){if(lt==="center")At=(rt.top+rt.bottom)/2+xt;else if(isObject(lt)){const Vt=Object.keys(lt)[0],Ut=lt[Vt];At=this.chart.scales[Vt].getPixelForValue(Ut)+xt}Dt=this._getXAxisLabelAlignment()}else if(it==="y"){if(lt==="center")It=(rt.left+rt.right)/2-xt;else if(isObject(lt)){const Vt=Object.keys(lt)[0],Ut=lt[Vt];It=this.chart.scales[Vt].getPixelForValue(Ut)}Dt=this._getYAxisLabelAlignment(gt).textAlign}it==="y"&&(ht==="start"?Nt="top":ht==="end"&&(Nt="bottom"));const $t=this._getLabelSizes();for(Et=0,wt=dt.length;Et<wt;++Et){Rt=dt[Et],Tt=Rt.label;const Vt=ct.setContext(this.getContext(Et));jt=this.getPixelForTick(Et)+ct.labelOffset,Ft=this._resolveTickFontOptions(Et),Lt=Ft.lineHeight,Pt=isArray(Tt)?Tt.length:1;const Ut=Pt/2,zt=Vt.color,Bt=Vt.textStrokeColor,Ht=Vt.textStrokeWidth;let Gt=Dt;ut?(It=jt,Dt==="inner"&&(Et===wt-1?Gt=this.options.reverse?"left":"right":Et===0?Gt=this.options.reverse?"right":"left":Gt="center"),lt==="top"?pt==="near"||vt!==0?Ot=-Pt*Lt+Lt/2:pt==="center"?Ot=-$t.highest.height/2-Ut*Lt+Lt:Ot=-$t.highest.height+Lt/2:pt==="near"||vt!==0?Ot=Lt/2:pt==="center"?Ot=$t.highest.height/2-Ut*Lt:Ot=$t.highest.height-Pt*Lt,mt&&(Ot*=-1),vt!==0&&!Vt.showLabelBackdrop&&(It+=Lt/2*Math.sin(vt))):(At=jt,Ot=(1-Pt)*Lt/2);let Kt;if(Vt.showLabelBackdrop){const Xt=toPadding(Vt.backdropPadding),or=$t.heights[Et],tr=$t.widths[Et];let dr=Ot-Xt.top,fr=0-Xt.left;switch(Nt){case"middle":dr-=or/2;break;case"bottom":dr-=or;break}switch(Dt){case"center":fr-=tr/2;break;case"right":fr-=tr;break;case"inner":Et===wt-1?fr-=tr:Et>0&&(fr-=tr/2);break}Kt={left:fr,top:dr,width:tr+Xt.width,height:or+Xt.height,color:Vt.backdropColor}}St.push({label:Tt,font:Ft,textOffset:Ot,options:{rotation:vt,color:zt,strokeColor:Bt,strokeWidth:Ht,textAlign:Gt,textBaseline:Nt,translation:[It,At],backdrop:Kt}})}return St}_getXAxisLabelAlignment(){const{position:rt,ticks:it}=this.options;if(-toRadians(this.labelRotation))return rt==="top"?"left":"right";let lt="center";return it.align==="start"?lt="left":it.align==="end"?lt="right":it.align==="inner"&&(lt="inner"),lt}_getYAxisLabelAlignment(rt){const{position:it,ticks:{crossAlign:st,mirror:lt,padding:ct}}=this.options,ut=this._getLabelSizes(),dt=rt+ct,ht=ut.widest.width;let pt,ft;return it==="left"?lt?(ft=this.right+ct,st==="near"?pt="left":st==="center"?(pt="center",ft+=ht/2):(pt="right",ft+=ht)):(ft=this.right-dt,st==="near"?pt="right":st==="center"?(pt="center",ft-=ht/2):(pt="left",ft=this.left)):it==="right"?lt?(ft=this.left+ct,st==="near"?pt="right":st==="center"?(pt="center",ft-=ht/2):(pt="left",ft-=ht)):(ft=this.left+dt,st==="near"?pt="left":st==="center"?(pt="center",ft+=ht/2):(pt="right",ft=this.right)):pt="right",{textAlign:pt,x:ft}}_computeLabelArea(){if(this.options.ticks.mirror)return;const rt=this.chart,it=this.options.position;if(it==="left"||it==="right")return{top:0,left:this.left,bottom:rt.height,right:this.right};if(it==="top"||it==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:rt.width}}drawBackground(){const{ctx:rt,options:{backgroundColor:it},left:st,top:lt,width:ct,height:ut}=this;it&&(rt.save(),rt.fillStyle=it,rt.fillRect(st,lt,ct,ut),rt.restore())}getLineWidthForValue(rt){const it=this.options.grid;if(!this._isVisible()||!it.display)return 0;const lt=this.ticks.findIndex(ct=>ct.value===rt);return lt>=0?it.setContext(this.getContext(lt)).lineWidth:0}drawGrid(rt){const it=this.options.grid,st=this.ctx,lt=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(rt));let ct,ut;const dt=(ht,pt,ft)=>{!ft.width||!ft.color||(st.save(),st.lineWidth=ft.width,st.strokeStyle=ft.color,st.setLineDash(ft.borderDash||[]),st.lineDashOffset=ft.borderDashOffset,st.beginPath(),st.moveTo(ht.x,ht.y),st.lineTo(pt.x,pt.y),st.stroke(),st.restore())};if(it.display)for(ct=0,ut=lt.length;ct<ut;++ct){const ht=lt[ct];it.drawOnChartArea&&dt({x:ht.x1,y:ht.y1},{x:ht.x2,y:ht.y2},ht),it.drawTicks&&dt({x:ht.tx1,y:ht.ty1},{x:ht.tx2,y:ht.ty2},{color:ht.tickColor,width:ht.tickWidth,borderDash:ht.tickBorderDash,borderDashOffset:ht.tickBorderDashOffset})}}drawBorder(){const{chart:rt,ctx:it,options:{border:st,grid:lt}}=this,ct=st.setContext(this.getContext()),ut=st.display?ct.width:0;if(!ut)return;const dt=lt.setContext(this.getContext(0)).lineWidth,ht=this._borderValue;let pt,ft,mt,gt;this.isHorizontal()?(pt=_alignPixel(rt,this.left,ut)-ut/2,ft=_alignPixel(rt,this.right,dt)+dt/2,mt=gt=ht):(mt=_alignPixel(rt,this.top,ut)-ut/2,gt=_alignPixel(rt,this.bottom,dt)+dt/2,pt=ft=ht),it.save(),it.lineWidth=ct.width,it.strokeStyle=ct.color,it.beginPath(),it.moveTo(pt,mt),it.lineTo(ft,gt),it.stroke(),it.restore()}drawLabels(rt){if(!this.options.ticks.display)return;const st=this.ctx,lt=this._computeLabelArea();lt&&clipArea(st,lt);const ct=this.getLabelItems(rt);for(const ut of ct){const dt=ut.options,ht=ut.font,pt=ut.label,ft=ut.textOffset;renderText(st,pt,0,ft,ht,dt)}lt&&unclipArea(st)}drawTitle(){const{ctx:rt,options:{position:it,title:st,reverse:lt}}=this;if(!st.display)return;const ct=toFont(st.font),ut=toPadding(st.padding),dt=st.align;let ht=ct.lineHeight/2;it==="bottom"||it==="center"||isObject(it)?(ht+=ut.bottom,isArray(st.text)&&(ht+=ct.lineHeight*(st.text.length-1))):ht+=ut.top;const{titleX:pt,titleY:ft,maxWidth:mt,rotation:gt}=titleArgs(this,ht,it,dt);renderText(rt,st.text,0,0,ct,{color:st.color,maxWidth:mt,rotation:gt,textAlign:titleAlign(dt,it,lt),textBaseline:"middle",translation:[pt,ft]})}draw(rt){this._isVisible()&&(this.drawBackground(),this.drawGrid(rt),this.drawBorder(),this.drawTitle(),this.drawLabels(rt))}_layers(){const rt=this.options,it=rt.ticks&&rt.ticks.z||0,st=valueOrDefault(rt.grid&&rt.grid.z,-1),lt=valueOrDefault(rt.border&&rt.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:it,draw:ct=>{this.draw(ct)}}]:[{z:st,draw:ct=>{this.drawBackground(),this.drawGrid(ct),this.drawTitle()}},{z:lt,draw:()=>{this.drawBorder()}},{z:it,draw:ct=>{this.drawLabels(ct)}}]}getMatchingVisibleMetas(rt){const it=this.chart.getSortedVisibleDatasetMetas(),st=this.axis+"AxisID",lt=[];let ct,ut;for(ct=0,ut=it.length;ct<ut;++ct){const dt=it[ct];dt[st]===this.id&&(!rt||dt.type===rt)&&lt.push(dt)}return lt}_resolveTickFontOptions(rt){const it=this.options.ticks.setContext(this.getContext(rt));return toFont(it.font)}_maxDigits(){const rt=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/rt}}class TypedRegistry{constructor(rt,it,st){this.type=rt,this.scope=it,this.override=st,this.items=Object.create(null)}isForType(rt){return Object.prototype.isPrototypeOf.call(this.type.prototype,rt.prototype)}register(rt){const it=Object.getPrototypeOf(rt);let st;isIChartComponent(it)&&(st=this.register(it));const lt=this.items,ct=rt.id,ut=this.scope+"."+ct;if(!ct)throw new Error("class does not have id: "+rt);return ct in lt||(lt[ct]=rt,registerDefaults(rt,ut,st),this.override&&defaults.override(rt.id,rt.overrides)),ut}get(rt){return this.items[rt]}unregister(rt){const it=this.items,st=rt.id,lt=this.scope;st in it&&delete it[st],lt&&st in defaults[lt]&&(delete defaults[lt][st],this.override&&delete overrides[st])}}function registerDefaults(nt,rt,it){const st=merge(Object.create(null),[it?defaults.get(it):{},defaults.get(rt),nt.defaults]);defaults.set(rt,st),nt.defaultRoutes&&routeDefaults(rt,nt.defaultRoutes),nt.descriptors&&defaults.describe(rt,nt.descriptors)}function routeDefaults(nt,rt){Object.keys(rt).forEach(it=>{const st=it.split("."),lt=st.pop(),ct=[nt].concat(st).join("."),ut=rt[it].split("."),dt=ut.pop(),ht=ut.join(".");defaults.route(ct,lt,ht,dt)})}function isIChartComponent(nt){return"id"in nt&&"defaults"in nt}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...rt){this._each("register",rt)}remove(...rt){this._each("unregister",rt)}addControllers(...rt){this._each("register",rt,this.controllers)}addElements(...rt){this._each("register",rt,this.elements)}addPlugins(...rt){this._each("register",rt,this.plugins)}addScales(...rt){this._each("register",rt,this.scales)}getController(rt){return this._get(rt,this.controllers,"controller")}getElement(rt){return this._get(rt,this.elements,"element")}getPlugin(rt){return this._get(rt,this.plugins,"plugin")}getScale(rt){return this._get(rt,this.scales,"scale")}removeControllers(...rt){this._each("unregister",rt,this.controllers)}removeElements(...rt){this._each("unregister",rt,this.elements)}removePlugins(...rt){this._each("unregister",rt,this.plugins)}removeScales(...rt){this._each("unregister",rt,this.scales)}_each(rt,it,st){[...it].forEach(lt=>{const ct=st||this._getRegistryForType(lt);st||ct.isForType(lt)||ct===this.plugins&&lt.id?this._exec(rt,ct,lt):each(lt,ut=>{const dt=st||this._getRegistryForType(ut);this._exec(rt,dt,ut)})})}_exec(rt,it,st){const lt=_capitalize(rt);callback(st["before"+lt],[],st),it[rt](st),callback(st["after"+lt],[],st)}_getRegistryForType(rt){for(let it=0;it<this._typedRegistries.length;it++){const st=this._typedRegistries[it];if(st.isForType(rt))return st}return this.plugins}_get(rt,it,st){const lt=it.get(rt);if(lt===void 0)throw new Error('"'+rt+'" is not a registered '+st+".");return lt}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(rt,it,st,lt){it==="beforeInit"&&(this._init=this._createDescriptors(rt,!0),this._notify(this._init,rt,"install"));const ct=lt?this._descriptors(rt).filter(lt):this._descriptors(rt),ut=this._notify(ct,rt,it,st);return it==="afterDestroy"&&(this._notify(ct,rt,"stop"),this._notify(this._init,rt,"uninstall")),ut}_notify(rt,it,st,lt){lt=lt||{};for(const ct of rt){const ut=ct.plugin,dt=ut[st],ht=[it,lt,ct.options];if(callback(dt,ht,ut)===!1&&lt.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(rt){if(this._cache)return this._cache;const it=this._cache=this._createDescriptors(rt);return this._notifyStateChanges(rt),it}_createDescriptors(rt,it){const st=rt&&rt.config,lt=valueOrDefault(st.options&&st.options.plugins,{}),ct=allPlugins(st);return lt===!1&&!it?[]:createDescriptors(rt,ct,lt,it)}_notifyStateChanges(rt){const it=this._oldCache||[],st=this._cache,lt=(ct,ut)=>ct.filter(dt=>!ut.some(ht=>dt.plugin.id===ht.plugin.id));this._notify(lt(it,st),rt,"stop"),this._notify(lt(st,it),rt,"start")}}function allPlugins(nt){const rt={},it=[],st=Object.keys(registry.plugins.items);for(let ct=0;ct<st.length;ct++)it.push(registry.getPlugin(st[ct]));const lt=nt.plugins||[];for(let ct=0;ct<lt.length;ct++){const ut=lt[ct];it.indexOf(ut)===-1&&(it.push(ut),rt[ut.id]=!0)}return{plugins:it,localIds:rt}}function getOpts(nt,rt){return!rt&&nt===!1?null:nt===!0?{}:nt}function createDescriptors(nt,{plugins:rt,localIds:it},st,lt){const ct=[],ut=nt.getContext();for(const dt of rt){const ht=dt.id,pt=getOpts(st[ht],lt);pt!==null&&ct.push({plugin:dt,options:pluginOpts(nt.config,{plugin:dt,local:it[ht]},pt,ut)})}return ct}function pluginOpts(nt,{plugin:rt,local:it},st,lt){const ct=nt.pluginScopeKeys(rt),ut=nt.getOptionScopes(st,ct);return it&&rt.defaults&&ut.push(rt.defaults),nt.createResolver(ut,lt,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(nt,rt){const it=defaults.datasets[nt]||{};return((rt.datasets||{})[nt]||{}).indexAxis||rt.indexAxis||it.indexAxis||"x"}function getAxisFromDefaultScaleID(nt,rt){let it=nt;return nt==="_index_"?it=rt:nt==="_value_"&&(it=rt==="x"?"y":"x"),it}function getDefaultScaleIDFromAxis(nt,rt){return nt===rt?"_index_":"_value_"}function idMatchesAxis(nt){if(nt==="x"||nt==="y"||nt==="r")return nt}function axisFromPosition(nt){if(nt==="top"||nt==="bottom")return"x";if(nt==="left"||nt==="right")return"y"}function determineAxis(nt,...rt){if(idMatchesAxis(nt))return nt;for(const it of rt){const st=it.axis||axisFromPosition(it.position)||nt.length>1&&idMatchesAxis(nt[0].toLowerCase());if(st)return st}throw new Error(`Cannot determine type of '${nt}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(nt,rt,it){if(it[rt+"AxisID"]===nt)return{axis:rt}}function retrieveAxisFromDatasets(nt,rt){if(rt.data&&rt.data.datasets){const it=rt.data.datasets.filter(st=>st.xAxisID===nt||st.yAxisID===nt);if(it.length)return getAxisFromDataset(nt,"x",it[0])||getAxisFromDataset(nt,"y",it[0])}return{}}function mergeScaleConfig(nt,rt){const it=overrides[nt.type]||{scales:{}},st=rt.scales||{},lt=getIndexAxis(nt.type,rt),ct=Object.create(null);return Object.keys(st).forEach(ut=>{const dt=st[ut];if(!isObject(dt))return console.error(`Invalid scale configuration for scale: ${ut}`);if(dt._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${ut}`);const ht=determineAxis(ut,dt,retrieveAxisFromDatasets(ut,nt),defaults.scales[dt.type]),pt=getDefaultScaleIDFromAxis(ht,lt),ft=it.scales||{};ct[ut]=mergeIf(Object.create(null),[{axis:ht},dt,ft[ht],ft[pt]])}),nt.data.datasets.forEach(ut=>{const dt=ut.type||nt.type,ht=ut.indexAxis||getIndexAxis(dt,rt),ft=(overrides[dt]||{}).scales||{};Object.keys(ft).forEach(mt=>{const gt=getAxisFromDefaultScaleID(mt,ht),xt=ut[gt+"AxisID"]||gt;ct[xt]=ct[xt]||Object.create(null),mergeIf(ct[xt],[{axis:gt},st[xt],ft[mt]])})}),Object.keys(ct).forEach(ut=>{const dt=ct[ut];mergeIf(dt,[defaults.scales[dt.type],defaults.scale])}),ct}function initOptions(nt){const rt=nt.options||(nt.options={});rt.plugins=valueOrDefault(rt.plugins,{}),rt.scales=mergeScaleConfig(nt,rt)}function initData(nt){return nt=nt||{},nt.datasets=nt.datasets||[],nt.labels=nt.labels||[],nt}function initConfig(nt){return nt=nt||{},nt.data=initData(nt.data),initOptions(nt),nt}const keyCache=new Map,keysCached=new Set;function cachedKeys(nt,rt){let it=keyCache.get(nt);return it||(it=rt(),keyCache.set(nt,it),keysCached.add(it)),it}const addIfFound=(nt,rt,it)=>{const st=resolveObjectKey(rt,it);st!==void 0&&nt.add(st)};class Config{constructor(rt){this._config=initConfig(rt),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(rt){this._config.type=rt}get data(){return this._config.data}set data(rt){this._config.data=initData(rt)}get options(){return this._config.options}set options(rt){this._config.options=rt}get plugins(){return this._config.plugins}update(){const rt=this._config;this.clearCache(),initOptions(rt)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(rt){return cachedKeys(rt,()=>[[`datasets.${rt}`,""]])}datasetAnimationScopeKeys(rt,it){return cachedKeys(`${rt}.transition.${it}`,()=>[[`datasets.${rt}.transitions.${it}`,`transitions.${it}`],[`datasets.${rt}`,""]])}datasetElementScopeKeys(rt,it){return cachedKeys(`${rt}-${it}`,()=>[[`datasets.${rt}.elements.${it}`,`datasets.${rt}`,`elements.${it}`,""]])}pluginScopeKeys(rt){const it=rt.id,st=this.type;return cachedKeys(`${st}-plugin-${it}`,()=>[[`plugins.${it}`,...rt.additionalOptionScopes||[]]])}_cachedScopes(rt,it){const st=this._scopeCache;let lt=st.get(rt);return(!lt||it)&&(lt=new Map,st.set(rt,lt)),lt}getOptionScopes(rt,it,st){const{options:lt,type:ct}=this,ut=this._cachedScopes(rt,st),dt=ut.get(it);if(dt)return dt;const ht=new Set;it.forEach(ft=>{rt&&(ht.add(rt),ft.forEach(mt=>addIfFound(ht,rt,mt))),ft.forEach(mt=>addIfFound(ht,lt,mt)),ft.forEach(mt=>addIfFound(ht,overrides[ct]||{},mt)),ft.forEach(mt=>addIfFound(ht,defaults,mt)),ft.forEach(mt=>addIfFound(ht,descriptors,mt))});const pt=Array.from(ht);return pt.length===0&&pt.push(Object.create(null)),keysCached.has(it)&&ut.set(it,pt),pt}chartOptionScopes(){const{options:rt,type:it}=this;return[rt,overrides[it]||{},defaults.datasets[it]||{},{type:it},defaults,descriptors]}resolveNamedOptions(rt,it,st,lt=[""]){const ct={$shared:!0},{resolver:ut,subPrefixes:dt}=getResolver(this._resolverCache,rt,lt);let ht=ut;if(needContext(ut,it)){ct.$shared=!1,st=isFunction(st)?st():st;const pt=this.createResolver(rt,st,dt);ht=_attachContext(ut,st,pt)}for(const pt of it)ct[pt]=ht[pt];return ct}createResolver(rt,it,st=[""],lt){const{resolver:ct}=getResolver(this._resolverCache,rt,st);return isObject(it)?_attachContext(ct,it,void 0,lt):ct}}function getResolver(nt,rt,it){let st=nt.get(rt);st||(st=new Map,nt.set(rt,st));const lt=it.join();let ct=st.get(lt);return ct||(ct={resolver:_createResolver(rt,it),subPrefixes:it.filter(dt=>!dt.toLowerCase().includes("hover"))},st.set(lt,ct)),ct}const hasFunction=nt=>isObject(nt)&&Object.getOwnPropertyNames(nt).some(rt=>isFunction(nt[rt]));function needContext(nt,rt){const{isScriptable:it,isIndexable:st}=_descriptors(nt);for(const lt of rt){const ct=it(lt),ut=st(lt),dt=(ut||ct)&&nt[lt];if(ct&&(isFunction(dt)||hasFunction(dt))||ut&&isArray(dt))return!0}return!1}var version$1="4.4.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(nt,rt){return nt==="top"||nt==="bottom"||KNOWN_POSITIONS.indexOf(nt)===-1&&rt==="x"}function compare2Level(nt,rt){return function(it,st){return it[nt]===st[nt]?it[rt]-st[rt]:it[nt]-st[nt]}}function onAnimationsComplete(nt){const rt=nt.chart,it=rt.options.animation;rt.notifyPlugins("afterRender"),callback(it&&it.onComplete,[nt],rt)}function onAnimationProgress(nt){const rt=nt.chart,it=rt.options.animation;callback(it&&it.onProgress,[nt],rt)}function getCanvas(nt){return _isDomSupported()&&typeof nt=="string"?nt=document.getElementById(nt):nt&&nt.length&&(nt=nt[0]),nt&&nt.canvas&&(nt=nt.canvas),nt}const instances={},getChart=nt=>{const rt=getCanvas(nt);return Object.values(instances).filter(it=>it.canvas===rt).pop()};function moveNumericKeys(nt,rt,it){const st=Object.keys(nt);for(const lt of st){const ct=+lt;if(ct>=rt){const ut=nt[lt];delete nt[lt],(it>0||ct>rt)&&(nt[ct+it]=ut)}}}function determineLastEvent(nt,rt,it,st){return!it||nt.type==="mouseout"?null:st?rt:nt}function getSizeForArea(nt,rt,it){return nt.options.clip?nt[it]:rt[it]}function getDatasetArea(nt,rt){const{xScale:it,yScale:st}=nt;return it&&st?{left:getSizeForArea(it,rt,"left"),right:getSizeForArea(it,rt,"right"),top:getSizeForArea(st,rt,"top"),bottom:getSizeForArea(st,rt,"bottom")}:rt}var im;let Chart$1=(im=class{static register(...rt){registry.add(...rt),invalidatePlugins()}static unregister(...rt){registry.remove(...rt),invalidatePlugins()}constructor(rt,it){const st=this.config=new Config(it),lt=getCanvas(rt),ct=getChart(lt);if(ct)throw new Error("Canvas is already in use. Chart with ID '"+ct.id+"' must be destroyed before the canvas with ID '"+ct.canvas.id+"' can be reused.");const ut=st.createResolver(st.chartOptionScopes(),this.getContext());this.platform=new(st.platform||_detectPlatform(lt)),this.platform.updateConfig(st);const dt=this.platform.acquireContext(lt,ut.aspectRatio),ht=dt&&dt.canvas,pt=ht&&ht.height,ft=ht&&ht.width;if(this.id=uid(),this.ctx=dt,this.canvas=ht,this.width=ft,this.height=pt,this._options=ut,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce$2(mt=>this.update(mt),ut.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!dt||!ht){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:rt,maintainAspectRatio:it},width:st,height:lt,_aspectRatio:ct}=this;return isNullOrUndef(rt)?it&&ct?ct:lt?st/lt:null:rt}get data(){return this.config.data}set data(rt){this.config.data=rt}get options(){return this._options}set options(rt){this.config.options=rt}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(rt,it){animator.running(this)?this._resizeBeforeDraw={width:rt,height:it}:this._resize(rt,it)}_resize(rt,it){const st=this.options,lt=this.canvas,ct=st.maintainAspectRatio&&this.aspectRatio,ut=this.platform.getMaximumSize(lt,rt,it,ct),dt=st.devicePixelRatio||this.platform.getDevicePixelRatio(),ht=this.width?"resize":"attach";this.width=ut.width,this.height=ut.height,this._aspectRatio=this.aspectRatio,retinaScale(this,dt,!0)&&(this.notifyPlugins("resize",{size:ut}),callback(st.onResize,[this,ut],this),this.attached&&this._doResize(ht)&&this.render())}ensureScalesHaveIDs(){const it=this.options.scales||{};each(it,(st,lt)=>{st.id=lt})}buildOrUpdateScales(){const rt=this.options,it=rt.scales,st=this.scales,lt=Object.keys(st).reduce((ut,dt)=>(ut[dt]=!1,ut),{});let ct=[];it&&(ct=ct.concat(Object.keys(it).map(ut=>{const dt=it[ut],ht=determineAxis(ut,dt),pt=ht==="r",ft=ht==="x";return{options:dt,dposition:pt?"chartArea":ft?"bottom":"left",dtype:pt?"radialLinear":ft?"category":"linear"}}))),each(ct,ut=>{const dt=ut.options,ht=dt.id,pt=determineAxis(ht,dt),ft=valueOrDefault(dt.type,ut.dtype);(dt.position===void 0||positionIsHorizontal(dt.position,pt)!==positionIsHorizontal(ut.dposition))&&(dt.position=ut.dposition),lt[ht]=!0;let mt=null;if(ht in st&&st[ht].type===ft)mt=st[ht];else{const gt=registry.getScale(ft);mt=new gt({id:ht,type:ft,ctx:this.ctx,chart:this}),st[mt.id]=mt}mt.init(dt,rt)}),each(lt,(ut,dt)=>{ut||delete st[dt]}),each(st,ut=>{layouts.configure(this,ut,ut.options),layouts.addBox(this,ut)})}_updateMetasets(){const rt=this._metasets,it=this.data.datasets.length,st=rt.length;if(rt.sort((lt,ct)=>lt.index-ct.index),st>it){for(let lt=it;lt<st;++lt)this._destroyDatasetMeta(lt);rt.splice(it,st-it)}this._sortedMetasets=rt.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:rt,data:{datasets:it}}=this;rt.length>it.length&&delete this._stacks,rt.forEach((st,lt)=>{it.filter(ct=>ct===st._dataset).length===0&&this._destroyDatasetMeta(lt)})}buildOrUpdateControllers(){const rt=[],it=this.data.datasets;let st,lt;for(this._removeUnreferencedMetasets(),st=0,lt=it.length;st<lt;st++){const ct=it[st];let ut=this.getDatasetMeta(st);const dt=ct.type||this.config.type;if(ut.type&&ut.type!==dt&&(this._destroyDatasetMeta(st),ut=this.getDatasetMeta(st)),ut.type=dt,ut.indexAxis=ct.indexAxis||getIndexAxis(dt,this.options),ut.order=ct.order||0,ut.index=st,ut.label=""+ct.label,ut.visible=this.isDatasetVisible(st),ut.controller)ut.controller.updateIndex(st),ut.controller.linkScales();else{const ht=registry.getController(dt),{datasetElementType:pt,dataElementType:ft}=defaults.datasets[dt];Object.assign(ht,{dataElementType:registry.getElement(ft),datasetElementType:pt&&registry.getElement(pt)}),ut.controller=new ht(this,st),rt.push(ut.controller)}}return this._updateMetasets(),rt}_resetElements(){each(this.data.datasets,(rt,it)=>{this.getDatasetMeta(it).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(rt){const it=this.config;it.update();const st=this._options=it.createResolver(it.chartOptionScopes(),this.getContext()),lt=this._animationsDisabled=!st.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:rt,cancelable:!0})===!1)return;const ct=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let ut=0;for(let pt=0,ft=this.data.datasets.length;pt<ft;pt++){const{controller:mt}=this.getDatasetMeta(pt),gt=!lt&&ct.indexOf(mt)===-1;mt.buildOrUpdateElements(gt),ut=Math.max(+mt.getMaxOverflow(),ut)}ut=this._minPadding=st.layout.autoPadding?ut:0,this._updateLayout(ut),lt||each(ct,pt=>{pt.reset()}),this._updateDatasets(rt),this.notifyPlugins("afterUpdate",{mode:rt}),this._layers.sort(compare2Level("z","_idx"));const{_active:dt,_lastEvent:ht}=this;ht?this._eventHandler(ht,!0):dt.length&&this._updateHoverStyles(dt,dt,!0),this.render()}_updateScales(){each(this.scales,rt=>{layouts.removeBox(this,rt)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const rt=this.options,it=new Set(Object.keys(this._listeners)),st=new Set(rt.events);(!setsEqual(it,st)||!!this._responsiveListeners!==rt.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:rt}=this,it=this._getUniformDataChanges()||[];for(const{method:st,start:lt,count:ct}of it){const ut=st==="_removeElements"?-ct:ct;moveNumericKeys(rt,lt,ut)}}_getUniformDataChanges(){const rt=this._dataChanges;if(!rt||!rt.length)return;this._dataChanges=[];const it=this.data.datasets.length,st=ct=>new Set(rt.filter(ut=>ut[0]===ct).map((ut,dt)=>dt+","+ut.splice(1).join(","))),lt=st(0);for(let ct=1;ct<it;ct++)if(!setsEqual(lt,st(ct)))return;return Array.from(lt).map(ct=>ct.split(",")).map(ct=>({method:ct[1],start:+ct[2],count:+ct[3]}))}_updateLayout(rt){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,rt);const it=this.chartArea,st=it.width<=0||it.height<=0;this._layers=[],each(this.boxes,lt=>{st&&lt.position==="chartArea"||(lt.configure&&lt.configure(),this._layers.push(...lt._layers()))},this),this._layers.forEach((lt,ct)=>{lt._idx=ct}),this.notifyPlugins("afterLayout")}_updateDatasets(rt){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:rt,cancelable:!0})!==!1){for(let it=0,st=this.data.datasets.length;it<st;++it)this.getDatasetMeta(it).controller.configure();for(let it=0,st=this.data.datasets.length;it<st;++it)this._updateDataset(it,isFunction(rt)?rt({datasetIndex:it}):rt);this.notifyPlugins("afterDatasetsUpdate",{mode:rt})}}_updateDataset(rt,it){const st=this.getDatasetMeta(rt),lt={meta:st,index:rt,mode:it,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",lt)!==!1&&(st.controller._update(it),lt.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",lt))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let rt;if(this._resizeBeforeDraw){const{width:st,height:lt}=this._resizeBeforeDraw;this._resize(st,lt),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const it=this._layers;for(rt=0;rt<it.length&&it[rt].z<=0;++rt)it[rt].draw(this.chartArea);for(this._drawDatasets();rt<it.length;++rt)it[rt].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(rt){const it=this._sortedMetasets,st=[];let lt,ct;for(lt=0,ct=it.length;lt<ct;++lt){const ut=it[lt];(!rt||ut.visible)&&st.push(ut)}return st}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const rt=this.getSortedVisibleDatasetMetas();for(let it=rt.length-1;it>=0;--it)this._drawDataset(rt[it]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(rt){const it=this.ctx,st=rt._clip,lt=!st.disabled,ct=getDatasetArea(rt,this.chartArea),ut={meta:rt,index:rt.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",ut)!==!1&&(lt&&clipArea(it,{left:st.left===!1?0:ct.left-st.left,right:st.right===!1?this.width:ct.right+st.right,top:st.top===!1?0:ct.top-st.top,bottom:st.bottom===!1?this.height:ct.bottom+st.bottom}),rt.controller.draw(),lt&&unclipArea(it),ut.cancelable=!1,this.notifyPlugins("afterDatasetDraw",ut))}isPointInArea(rt){return _isPointInArea(rt,this.chartArea,this._minPadding)}getElementsAtEventForMode(rt,it,st,lt){const ct=Interaction.modes[it];return typeof ct=="function"?ct(this,rt,st,lt):[]}getDatasetMeta(rt){const it=this.data.datasets[rt],st=this._metasets;let lt=st.filter(ct=>ct&&ct._dataset===it).pop();return lt||(lt={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:it&&it.order||0,index:rt,_dataset:it,_parsed:[],_sorted:!1},st.push(lt)),lt}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(rt){const it=this.data.datasets[rt];if(!it)return!1;const st=this.getDatasetMeta(rt);return typeof st.hidden=="boolean"?!st.hidden:!it.hidden}setDatasetVisibility(rt,it){const st=this.getDatasetMeta(rt);st.hidden=!it}toggleDataVisibility(rt){this._hiddenIndices[rt]=!this._hiddenIndices[rt]}getDataVisibility(rt){return!this._hiddenIndices[rt]}_updateVisibility(rt,it,st){const lt=st?"show":"hide",ct=this.getDatasetMeta(rt),ut=ct.controller._resolveAnimations(void 0,lt);defined(it)?(ct.data[it].hidden=!st,this.update()):(this.setDatasetVisibility(rt,st),ut.update(ct,{visible:st}),this.update(dt=>dt.datasetIndex===rt?lt:void 0))}hide(rt,it){this._updateVisibility(rt,it,!1)}show(rt,it){this._updateVisibility(rt,it,!0)}_destroyDatasetMeta(rt){const it=this._metasets[rt];it&&it.controller&&it.controller._destroy(),delete this._metasets[rt]}_stop(){let rt,it;for(this.stop(),animator.remove(this),rt=0,it=this.data.datasets.length;rt<it;++rt)this._destroyDatasetMeta(rt)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:rt,ctx:it}=this;this._stop(),this.config.clearCache(),rt&&(this.unbindEvents(),clearCanvas(rt,it),this.platform.releaseContext(it),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...rt){return this.canvas.toDataURL(...rt)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const rt=this._listeners,it=this.platform,st=(ct,ut)=>{it.addEventListener(this,ct,ut),rt[ct]=ut},lt=(ct,ut,dt)=>{ct.offsetX=ut,ct.offsetY=dt,this._eventHandler(ct)};each(this.options.events,ct=>st(ct,lt))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const rt=this._responsiveListeners,it=this.platform,st=(ht,pt)=>{it.addEventListener(this,ht,pt),rt[ht]=pt},lt=(ht,pt)=>{rt[ht]&&(it.removeEventListener(this,ht,pt),delete rt[ht])},ct=(ht,pt)=>{this.canvas&&this.resize(ht,pt)};let ut;const dt=()=>{lt("attach",dt),this.attached=!0,this.resize(),st("resize",ct),st("detach",ut)};ut=()=>{this.attached=!1,lt("resize",ct),this._stop(),this._resize(0,0),st("attach",dt)},it.isAttached(this.canvas)?dt():ut()}unbindEvents(){each(this._listeners,(rt,it)=>{this.platform.removeEventListener(this,it,rt)}),this._listeners={},each(this._responsiveListeners,(rt,it)=>{this.platform.removeEventListener(this,it,rt)}),this._responsiveListeners=void 0}updateHoverStyle(rt,it,st){const lt=st?"set":"remove";let ct,ut,dt,ht;for(it==="dataset"&&(ct=this.getDatasetMeta(rt[0].datasetIndex),ct.controller["_"+lt+"DatasetHoverStyle"]()),dt=0,ht=rt.length;dt<ht;++dt){ut=rt[dt];const pt=ut&&this.getDatasetMeta(ut.datasetIndex).controller;pt&&pt[lt+"HoverStyle"](ut.element,ut.datasetIndex,ut.index)}}getActiveElements(){return this._active||[]}setActiveElements(rt){const it=this._active||[],st=rt.map(({datasetIndex:ct,index:ut})=>{const dt=this.getDatasetMeta(ct);if(!dt)throw new Error("No dataset found at index "+ct);return{datasetIndex:ct,element:dt.data[ut],index:ut}});!_elementsEqual(st,it)&&(this._active=st,this._lastEvent=null,this._updateHoverStyles(st,it))}notifyPlugins(rt,it,st){return this._plugins.notify(this,rt,it,st)}isPluginEnabled(rt){return this._plugins._cache.filter(it=>it.plugin.id===rt).length===1}_updateHoverStyles(rt,it,st){const lt=this.options.hover,ct=(ht,pt)=>ht.filter(ft=>!pt.some(mt=>ft.datasetIndex===mt.datasetIndex&&ft.index===mt.index)),ut=ct(it,rt),dt=st?rt:ct(rt,it);ut.length&&this.updateHoverStyle(ut,lt.mode,!1),dt.length&&lt.mode&&this.updateHoverStyle(dt,lt.mode,!0)}_eventHandler(rt,it){const st={event:rt,replay:it,cancelable:!0,inChartArea:this.isPointInArea(rt)},lt=ut=>(ut.options.events||this.options.events).includes(rt.native.type);if(this.notifyPlugins("beforeEvent",st,lt)===!1)return;const ct=this._handleEvent(rt,it,st.inChartArea);return st.cancelable=!1,this.notifyPlugins("afterEvent",st,lt),(ct||st.changed)&&this.render(),this}_handleEvent(rt,it,st){const{_active:lt=[],options:ct}=this,ut=it,dt=this._getActiveElements(rt,lt,st,ut),ht=_isClickEvent(rt),pt=determineLastEvent(rt,this._lastEvent,st,ht);st&&(this._lastEvent=null,callback(ct.onHover,[rt,dt,this],this),ht&&callback(ct.onClick,[rt,dt,this],this));const ft=!_elementsEqual(dt,lt);return(ft||it)&&(this._active=dt,this._updateHoverStyles(dt,lt,it)),this._lastEvent=pt,ft}_getActiveElements(rt,it,st,lt){if(rt.type==="mouseout")return[];if(!st)return it;const ct=this.options.hover;return this.getElementsAtEventForMode(rt,ct.mode,ct,lt)}},uo(im,"defaults",defaults),uo(im,"instances",instances),uo(im,"overrides",overrides),uo(im,"registry",registry),uo(im,"version",version$1),uo(im,"getChart",getChart),im);function invalidatePlugins(){return each(Chart$1.instances,nt=>nt._plugins.invalidate())}function setStyle(nt,rt,it=rt){nt.lineCap=valueOrDefault(it.borderCapStyle,rt.borderCapStyle),nt.setLineDash(valueOrDefault(it.borderDash,rt.borderDash)),nt.lineDashOffset=valueOrDefault(it.borderDashOffset,rt.borderDashOffset),nt.lineJoin=valueOrDefault(it.borderJoinStyle,rt.borderJoinStyle),nt.lineWidth=valueOrDefault(it.borderWidth,rt.borderWidth),nt.strokeStyle=valueOrDefault(it.borderColor,rt.borderColor)}function lineTo(nt,rt,it){nt.lineTo(it.x,it.y)}function getLineMethod(nt){return nt.stepped?_steppedLineTo:nt.tension||nt.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(nt,rt,it={}){const st=nt.length,{start:lt=0,end:ct=st-1}=it,{start:ut,end:dt}=rt,ht=Math.max(lt,ut),pt=Math.min(ct,dt),ft=lt<ut&&ct<ut||lt>dt&&ct>dt;return{count:st,start:ht,loop:rt.loop,ilen:pt<ht&&!ft?st+pt-ht:pt-ht}}function pathSegment(nt,rt,it,st){const{points:lt,options:ct}=rt,{count:ut,start:dt,loop:ht,ilen:pt}=pathVars(lt,it,st),ft=getLineMethod(ct);let{move:mt=!0,reverse:gt}=st||{},xt,yt,vt;for(xt=0;xt<=pt;++xt)yt=lt[(dt+(gt?pt-xt:xt))%ut],!yt.skip&&(mt?(nt.moveTo(yt.x,yt.y),mt=!1):ft(nt,vt,yt,gt,ct.stepped),vt=yt);return ht&&(yt=lt[(dt+(gt?pt:0))%ut],ft(nt,vt,yt,gt,ct.stepped)),!!ht}function fastPathSegment(nt,rt,it,st){const lt=rt.points,{count:ct,start:ut,ilen:dt}=pathVars(lt,it,st),{move:ht=!0,reverse:pt}=st||{};let ft=0,mt=0,gt,xt,yt,vt,St,Et;const wt=Tt=>(ut+(pt?dt-Tt:Tt))%ct,Rt=()=>{vt!==St&&(nt.lineTo(ft,St),nt.lineTo(ft,vt),nt.lineTo(ft,Et))};for(ht&&(xt=lt[wt(0)],nt.moveTo(xt.x,xt.y)),gt=0;gt<=dt;++gt){if(xt=lt[wt(gt)],xt.skip)continue;const Tt=xt.x,It=xt.y,At=Tt|0;At===yt?(It<vt?vt=It:It>St&&(St=It),ft=(mt*ft+Tt)/++mt):(Rt(),nt.lineTo(Tt,It),yt=At,mt=0,vt=St=It),Et=It}Rt()}function _getSegmentMethod(nt){const rt=nt.options,it=rt.borderDash&&rt.borderDash.length;return!nt._decimated&&!nt._loop&&!rt.tension&&rt.cubicInterpolationMode!=="monotone"&&!rt.stepped&&!it?fastPathSegment:pathSegment}function _getInterpolationMethod(nt){return nt.stepped?_steppedInterpolation:nt.tension||nt.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(nt,rt,it,st){let lt=rt._path;lt||(lt=rt._path=new Path2D,rt.path(lt,it,st)&&lt.closePath()),setStyle(nt,rt.options),nt.stroke(lt)}function strokePathDirect(nt,rt,it,st){const{segments:lt,options:ct}=rt,ut=_getSegmentMethod(rt);for(const dt of lt)setStyle(nt,ct,dt.style),nt.beginPath(),ut(nt,rt,dt,{start:it,end:it+st-1})&&nt.closePath(),nt.stroke()}const usePath2D=typeof Path2D=="function";function draw(nt,rt,it,st){usePath2D&&!rt.options.segment?strokePathWithCache(nt,rt,it,st):strokePathDirect(nt,rt,it,st)}class LineElement extends Element$1{constructor(rt){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,rt&&Object.assign(this,rt)}updateControlPoints(rt,it){const st=this.options;if((st.tension||st.cubicInterpolationMode==="monotone")&&!st.stepped&&!this._pointsUpdated){const lt=st.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,st,rt,lt,it),this._pointsUpdated=!0}}set points(rt){this._points=rt,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const rt=this.segments,it=this.points;return rt.length&&it[rt[0].start]}last(){const rt=this.segments,it=this.points,st=rt.length;return st&&it[rt[st-1].end]}interpolate(rt,it){const st=this.options,lt=rt[it],ct=this.points,ut=_boundSegments(this,{property:it,start:lt,end:lt});if(!ut.length)return;const dt=[],ht=_getInterpolationMethod(st);let pt,ft;for(pt=0,ft=ut.length;pt<ft;++pt){const{start:mt,end:gt}=ut[pt],xt=ct[mt],yt=ct[gt];if(xt===yt){dt.push(xt);continue}const vt=Math.abs((lt-xt[it])/(yt[it]-xt[it])),St=ht(xt,yt,vt,st.stepped);St[it]=rt[it],dt.push(St)}return dt.length===1?dt[0]:dt}pathSegment(rt,it,st){return _getSegmentMethod(this)(rt,this,it,st)}path(rt,it,st){const lt=this.segments,ct=_getSegmentMethod(this);let ut=this._loop;it=it||0,st=st||this.points.length-it;for(const dt of lt)ut&=ct(rt,this,dt,{start:it,end:it+st-1});return!!ut}draw(rt,it,st,lt){const ct=this.options||{};(this.points||[]).length&&ct.borderWidth&&(rt.save(),draw(rt,this,st,lt),rt.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}uo(LineElement,"id","line"),uo(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),uo(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),uo(LineElement,"descriptors",{_scriptable:!0,_indexable:rt=>rt!=="borderDash"&&rt!=="fill"});function inRange$1(nt,rt,it,st){const lt=nt.options,{[it]:ct}=nt.getProps([it],st);return Math.abs(rt-ct)<lt.radius+lt.hitRadius}class PointElement extends Element$1{constructor(it){super();uo(this,"parsed");uo(this,"skip");uo(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,it&&Object.assign(this,it)}inRange(it,st,lt){const ct=this.options,{x:ut,y:dt}=this.getProps(["x","y"],lt);return Math.pow(it-ut,2)+Math.pow(st-dt,2)<Math.pow(ct.hitRadius+ct.radius,2)}inXRange(it,st){return inRange$1(this,it,"x",st)}inYRange(it,st){return inRange$1(this,it,"y",st)}getCenterPoint(it){const{x:st,y:lt}=this.getProps(["x","y"],it);return{x:st,y:lt}}size(it){it=it||this.options||{};let st=it.radius||0;st=Math.max(st,st&&it.hoverRadius||0);const lt=st&&it.borderWidth||0;return(st+lt)*2}draw(it,st){const lt=this.options;this.skip||lt.radius<.1||!_isPointInArea(this,st,this.size(lt)/2)||(it.strokeStyle=lt.borderColor,it.lineWidth=lt.borderWidth,it.fillStyle=lt.backgroundColor,drawPoint(it,lt,this.x,this.y))}getRange(){const it=this.options||{};return it.radius+it.hitRadius}}uo(PointElement,"id","point"),uo(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),uo(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const getBoxSize=(nt,rt)=>{let{boxHeight:it=rt,boxWidth:st=rt}=nt;return nt.usePointStyle&&(it=Math.min(it,rt),st=nt.pointStyleWidth||Math.min(st,rt)),{boxWidth:st,boxHeight:it,itemHeight:Math.max(rt,it)}},itemsEqual=(nt,rt)=>nt!==null&&rt!==null&&nt.datasetIndex===rt.datasetIndex&&nt.index===rt.index;class Legend extends Element$1{constructor(rt){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=rt.chart,this.options=rt.options,this.ctx=rt.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(rt,it,st){this.maxWidth=rt,this.maxHeight=it,this._margins=st,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const rt=this.options.labels||{};let it=callback(rt.generateLabels,[this.chart],this)||[];rt.filter&&(it=it.filter(st=>rt.filter(st,this.chart.data))),rt.sort&&(it=it.sort((st,lt)=>rt.sort(st,lt,this.chart.data))),this.options.reverse&&it.reverse(),this.legendItems=it}fit(){const{options:rt,ctx:it}=this;if(!rt.display){this.width=this.height=0;return}const st=rt.labels,lt=toFont(st.font),ct=lt.size,ut=this._computeTitleHeight(),{boxWidth:dt,itemHeight:ht}=getBoxSize(st,ct);let pt,ft;it.font=lt.string,this.isHorizontal()?(pt=this.maxWidth,ft=this._fitRows(ut,ct,dt,ht)+10):(ft=this.maxHeight,pt=this._fitCols(ut,lt,dt,ht)+10),this.width=Math.min(pt,rt.maxWidth||this.maxWidth),this.height=Math.min(ft,rt.maxHeight||this.maxHeight)}_fitRows(rt,it,st,lt){const{ctx:ct,maxWidth:ut,options:{labels:{padding:dt}}}=this,ht=this.legendHitBoxes=[],pt=this.lineWidths=[0],ft=lt+dt;let mt=rt;ct.textAlign="left",ct.textBaseline="middle";let gt=-1,xt=-ft;return this.legendItems.forEach((yt,vt)=>{const St=st+it/2+ct.measureText(yt.text).width;(vt===0||pt[pt.length-1]+St+2*dt>ut)&&(mt+=ft,pt[pt.length-(vt>0?0:1)]=0,xt+=ft,gt++),ht[vt]={left:0,top:xt,row:gt,width:St,height:lt},pt[pt.length-1]+=St+dt}),mt}_fitCols(rt,it,st,lt){const{ctx:ct,maxHeight:ut,options:{labels:{padding:dt}}}=this,ht=this.legendHitBoxes=[],pt=this.columnSizes=[],ft=ut-rt;let mt=dt,gt=0,xt=0,yt=0,vt=0;return this.legendItems.forEach((St,Et)=>{const{itemWidth:wt,itemHeight:Rt}=calculateItemSize(st,it,ct,St,lt);Et>0&&xt+Rt+2*dt>ft&&(mt+=gt+dt,pt.push({width:gt,height:xt}),yt+=gt+dt,vt++,gt=xt=0),ht[Et]={left:yt,top:xt,col:vt,width:wt,height:Rt},gt=Math.max(gt,wt),xt+=Rt+dt}),mt+=gt,pt.push({width:gt,height:xt}),mt}adjustHitBoxes(){if(!this.options.display)return;const rt=this._computeTitleHeight(),{legendHitBoxes:it,options:{align:st,labels:{padding:lt},rtl:ct}}=this,ut=getRtlAdapter(ct,this.left,this.width);if(this.isHorizontal()){let dt=0,ht=_alignStartEnd(st,this.left+lt,this.right-this.lineWidths[dt]);for(const pt of it)dt!==pt.row&&(dt=pt.row,ht=_alignStartEnd(st,this.left+lt,this.right-this.lineWidths[dt])),pt.top+=this.top+rt+lt,pt.left=ut.leftForLtr(ut.x(ht),pt.width),ht+=pt.width+lt}else{let dt=0,ht=_alignStartEnd(st,this.top+rt+lt,this.bottom-this.columnSizes[dt].height);for(const pt of it)pt.col!==dt&&(dt=pt.col,ht=_alignStartEnd(st,this.top+rt+lt,this.bottom-this.columnSizes[dt].height)),pt.top=ht,pt.left+=this.left+lt,pt.left=ut.leftForLtr(ut.x(pt.left),pt.width),ht+=pt.height+lt}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const rt=this.ctx;clipArea(rt,this),this._draw(),unclipArea(rt)}}_draw(){const{options:rt,columnSizes:it,lineWidths:st,ctx:lt}=this,{align:ct,labels:ut}=rt,dt=defaults.color,ht=getRtlAdapter(rt.rtl,this.left,this.width),pt=toFont(ut.font),{padding:ft}=ut,mt=pt.size,gt=mt/2;let xt;this.drawTitle(),lt.textAlign=ht.textAlign("left"),lt.textBaseline="middle",lt.lineWidth=.5,lt.font=pt.string;const{boxWidth:yt,boxHeight:vt,itemHeight:St}=getBoxSize(ut,mt),Et=function(At,Dt,jt){if(isNaN(yt)||yt<=0||isNaN(vt)||vt<0)return;lt.save();const Ft=valueOrDefault(jt.lineWidth,1);if(lt.fillStyle=valueOrDefault(jt.fillStyle,dt),lt.lineCap=valueOrDefault(jt.lineCap,"butt"),lt.lineDashOffset=valueOrDefault(jt.lineDashOffset,0),lt.lineJoin=valueOrDefault(jt.lineJoin,"miter"),lt.lineWidth=Ft,lt.strokeStyle=valueOrDefault(jt.strokeStyle,dt),lt.setLineDash(valueOrDefault(jt.lineDash,[])),ut.usePointStyle){const Lt={radius:vt*Math.SQRT2/2,pointStyle:jt.pointStyle,rotation:jt.rotation,borderWidth:Ft},Pt=ht.xPlus(At,yt/2),Ot=Dt+gt;drawPointLegend(lt,Lt,Pt,Ot,ut.pointStyleWidth&&yt)}else{const Lt=Dt+Math.max((mt-vt)/2,0),Pt=ht.leftForLtr(At,yt),Ot=toTRBLCorners(jt.borderRadius);lt.beginPath(),Object.values(Ot).some(Nt=>Nt!==0)?addRoundedRectPath(lt,{x:Pt,y:Lt,w:yt,h:vt,radius:Ot}):lt.rect(Pt,Lt,yt,vt),lt.fill(),Ft!==0&&lt.stroke()}lt.restore()},wt=function(At,Dt,jt){renderText(lt,jt.text,At,Dt+St/2,pt,{strikethrough:jt.hidden,textAlign:ht.textAlign(jt.textAlign)})},Rt=this.isHorizontal(),Tt=this._computeTitleHeight();Rt?xt={x:_alignStartEnd(ct,this.left+ft,this.right-st[0]),y:this.top+ft+Tt,line:0}:xt={x:this.left+ft,y:_alignStartEnd(ct,this.top+Tt+ft,this.bottom-it[0].height),line:0},overrideTextDirection(this.ctx,rt.textDirection);const It=St+ft;this.legendItems.forEach((At,Dt)=>{lt.strokeStyle=At.fontColor,lt.fillStyle=At.fontColor;const jt=lt.measureText(At.text).width,Ft=ht.textAlign(At.textAlign||(At.textAlign=ut.textAlign)),Lt=yt+gt+jt;let Pt=xt.x,Ot=xt.y;ht.setWidth(this.width),Rt?Dt>0&&Pt+Lt+ft>this.right&&(Ot=xt.y+=It,xt.line++,Pt=xt.x=_alignStartEnd(ct,this.left+ft,this.right-st[xt.line])):Dt>0&&Ot+It>this.bottom&&(Pt=xt.x=Pt+it[xt.line].width+ft,xt.line++,Ot=xt.y=_alignStartEnd(ct,this.top+Tt+ft,this.bottom-it[xt.line].height));const Nt=ht.x(Pt);if(Et(Nt,Ot,At),Pt=_textX(Ft,Pt+yt+gt,Rt?Pt+Lt:this.right,rt.rtl),wt(ht.x(Pt),Ot,At),Rt)xt.x+=Lt+ft;else if(typeof At.text!="string"){const $t=pt.lineHeight;xt.y+=calculateLegendItemHeight(At,$t)+ft}else xt.y+=It}),restoreTextDirection(this.ctx,rt.textDirection)}drawTitle(){const rt=this.options,it=rt.title,st=toFont(it.font),lt=toPadding(it.padding);if(!it.display)return;const ct=getRtlAdapter(rt.rtl,this.left,this.width),ut=this.ctx,dt=it.position,ht=st.size/2,pt=lt.top+ht;let ft,mt=this.left,gt=this.width;if(this.isHorizontal())gt=Math.max(...this.lineWidths),ft=this.top+pt,mt=_alignStartEnd(rt.align,mt,this.right-gt);else{const yt=this.columnSizes.reduce((vt,St)=>Math.max(vt,St.height),0);ft=pt+_alignStartEnd(rt.align,this.top,this.bottom-yt-rt.labels.padding-this._computeTitleHeight())}const xt=_alignStartEnd(dt,mt,mt+gt);ut.textAlign=ct.textAlign(_toLeftRightCenter(dt)),ut.textBaseline="middle",ut.strokeStyle=it.color,ut.fillStyle=it.color,ut.font=st.string,renderText(ut,it.text,xt,ft,st)}_computeTitleHeight(){const rt=this.options.title,it=toFont(rt.font),st=toPadding(rt.padding);return rt.display?it.lineHeight+st.height:0}_getLegendItemAt(rt,it){let st,lt,ct;if(_isBetween(rt,this.left,this.right)&&_isBetween(it,this.top,this.bottom)){for(ct=this.legendHitBoxes,st=0;st<ct.length;++st)if(lt=ct[st],_isBetween(rt,lt.left,lt.left+lt.width)&&_isBetween(it,lt.top,lt.top+lt.height))return this.legendItems[st]}return null}handleEvent(rt){const it=this.options;if(!isListened(rt.type,it))return;const st=this._getLegendItemAt(rt.x,rt.y);if(rt.type==="mousemove"||rt.type==="mouseout"){const lt=this._hoveredItem,ct=itemsEqual(lt,st);lt&&!ct&&callback(it.onLeave,[rt,lt,this],this),this._hoveredItem=st,st&&!ct&&callback(it.onHover,[rt,st,this],this)}else st&&callback(it.onClick,[rt,st,this],this)}}function calculateItemSize(nt,rt,it,st,lt){const ct=calculateItemWidth(st,nt,rt,it),ut=calculateItemHeight(lt,st,rt.lineHeight);return{itemWidth:ct,itemHeight:ut}}function calculateItemWidth(nt,rt,it,st){let lt=nt.text;return lt&&typeof lt!="string"&&(lt=lt.reduce((ct,ut)=>ct.length>ut.length?ct:ut)),rt+it.size/2+st.measureText(lt).width}function calculateItemHeight(nt,rt,it){let st=nt;return typeof rt.text!="string"&&(st=calculateLegendItemHeight(rt,it)),st}function calculateLegendItemHeight(nt,rt){const it=nt.text?nt.text.length:0;return rt*it}function isListened(nt,rt){return!!((nt==="mousemove"||nt==="mouseout")&&(rt.onHover||rt.onLeave)||rt.onClick&&(nt==="click"||nt==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(nt,rt,it){const st=nt.legend=new Legend({ctx:nt.ctx,options:it,chart:nt});layouts.configure(nt,st,it),layouts.addBox(nt,st)},stop(nt){layouts.removeBox(nt,nt.legend),delete nt.legend},beforeUpdate(nt,rt,it){const st=nt.legend;layouts.configure(nt,st,it),st.options=it},afterUpdate(nt){const rt=nt.legend;rt.buildLabels(),rt.adjustHitBoxes()},afterEvent(nt,rt){rt.replay||nt.legend.handleEvent(rt.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(nt,rt,it){const st=rt.datasetIndex,lt=it.chart;lt.isDatasetVisible(st)?(lt.hide(st),rt.hidden=!0):(lt.show(st),rt.hidden=!1)},onHover:null,onLeave:null,labels:{color:nt=>nt.chart.options.color,boxWidth:40,padding:10,generateLabels(nt){const rt=nt.data.datasets,{labels:{usePointStyle:it,pointStyle:st,textAlign:lt,color:ct,useBorderRadius:ut,borderRadius:dt}}=nt.legend.options;return nt._getSortedDatasetMetas().map(ht=>{const pt=ht.controller.getStyle(it?0:void 0),ft=toPadding(pt.borderWidth);return{text:rt[ht.index].label,fillStyle:pt.backgroundColor,fontColor:ct,hidden:!ht.visible,lineCap:pt.borderCapStyle,lineDash:pt.borderDash,lineDashOffset:pt.borderDashOffset,lineJoin:pt.borderJoinStyle,lineWidth:(ft.width+ft.height)/4,strokeStyle:pt.borderColor,pointStyle:st||pt.pointStyle,rotation:pt.rotation,textAlign:lt||pt.textAlign,borderRadius:ut&&(dt||pt.borderRadius),datasetIndex:ht.index}},this)}},title:{color:nt=>nt.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:nt=>!nt.startsWith("on"),labels:{_scriptable:nt=>!["generateLabels","filter","sort"].includes(nt)}}};class Title extends Element$1{constructor(rt){super(),this.chart=rt.chart,this.options=rt.options,this.ctx=rt.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(rt,it){const st=this.options;if(this.left=0,this.top=0,!st.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=rt,this.height=this.bottom=it;const lt=isArray(st.text)?st.text.length:1;this._padding=toPadding(st.padding);const ct=lt*toFont(st.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=ct:this.width=ct}isHorizontal(){const rt=this.options.position;return rt==="top"||rt==="bottom"}_drawArgs(rt){const{top:it,left:st,bottom:lt,right:ct,options:ut}=this,dt=ut.align;let ht=0,pt,ft,mt;return this.isHorizontal()?(ft=_alignStartEnd(dt,st,ct),mt=it+rt,pt=ct-st):(ut.position==="left"?(ft=st+rt,mt=_alignStartEnd(dt,lt,it),ht=PI*-.5):(ft=ct-rt,mt=_alignStartEnd(dt,it,lt),ht=PI*.5),pt=lt-it),{titleX:ft,titleY:mt,maxWidth:pt,rotation:ht}}draw(){const rt=this.ctx,it=this.options;if(!it.display)return;const st=toFont(it.font),ct=st.lineHeight/2+this._padding.top,{titleX:ut,titleY:dt,maxWidth:ht,rotation:pt}=this._drawArgs(ct);renderText(rt,it.text,0,0,st,{color:it.color,maxWidth:ht,rotation:pt,textAlign:_toLeftRightCenter(it.align),textBaseline:"middle",translation:[ut,dt]})}}function createTitle(nt,rt){const it=new Title({ctx:nt.ctx,options:rt,chart:nt});layouts.configure(nt,it,rt),layouts.addBox(nt,it),nt.titleBlock=it}var plugin_title={id:"title",_element:Title,start(nt,rt,it){createTitle(nt,it)},stop(nt){const rt=nt.titleBlock;layouts.removeBox(nt,rt),delete nt.titleBlock},beforeUpdate(nt,rt,it){const st=nt.titleBlock;layouts.configure(nt,st,it),st.options=it},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(nt){if(!nt.length)return!1;let rt,it,st=0,lt=0,ct=0;for(rt=0,it=nt.length;rt<it;++rt){const ut=nt[rt].element;if(ut&&ut.hasValue()){const dt=ut.tooltipPosition();st+=dt.x,lt+=dt.y,++ct}}return{x:st/ct,y:lt/ct}},nearest(nt,rt){if(!nt.length)return!1;let it=rt.x,st=rt.y,lt=Number.POSITIVE_INFINITY,ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct){const ht=nt[ct].element;if(ht&&ht.hasValue()){const pt=ht.getCenterPoint(),ft=distanceBetweenPoints(rt,pt);ft<lt&&(lt=ft,dt=ht)}}if(dt){const ht=dt.tooltipPosition();it=ht.x,st=ht.y}return{x:it,y:st}}};function pushOrConcat(nt,rt){return rt&&(isArray(rt)?Array.prototype.push.apply(nt,rt):nt.push(rt)),nt}function splitNewlines(nt){return(typeof nt=="string"||nt instanceof String)&&nt.indexOf(`
`)>-1?nt.split(`
`):nt}function createTooltipItem(nt,rt){const{element:it,datasetIndex:st,index:lt}=rt,ct=nt.getDatasetMeta(st).controller,{label:ut,value:dt}=ct.getLabelAndValue(lt);return{chart:nt,label:ut,parsed:ct.getParsed(lt),raw:nt.data.datasets[st].data[lt],formattedValue:dt,dataset:ct.getDataset(),dataIndex:lt,datasetIndex:st,element:it}}function getTooltipSize(nt,rt){const it=nt.chart.ctx,{body:st,footer:lt,title:ct}=nt,{boxWidth:ut,boxHeight:dt}=rt,ht=toFont(rt.bodyFont),pt=toFont(rt.titleFont),ft=toFont(rt.footerFont),mt=ct.length,gt=lt.length,xt=st.length,yt=toPadding(rt.padding);let vt=yt.height,St=0,Et=st.reduce((Tt,It)=>Tt+It.before.length+It.lines.length+It.after.length,0);if(Et+=nt.beforeBody.length+nt.afterBody.length,mt&&(vt+=mt*pt.lineHeight+(mt-1)*rt.titleSpacing+rt.titleMarginBottom),Et){const Tt=rt.displayColors?Math.max(dt,ht.lineHeight):ht.lineHeight;vt+=xt*Tt+(Et-xt)*ht.lineHeight+(Et-1)*rt.bodySpacing}gt&&(vt+=rt.footerMarginTop+gt*ft.lineHeight+(gt-1)*rt.footerSpacing);let wt=0;const Rt=function(Tt){St=Math.max(St,it.measureText(Tt).width+wt)};return it.save(),it.font=pt.string,each(nt.title,Rt),it.font=ht.string,each(nt.beforeBody.concat(nt.afterBody),Rt),wt=rt.displayColors?ut+2+rt.boxPadding:0,each(st,Tt=>{each(Tt.before,Rt),each(Tt.lines,Rt),each(Tt.after,Rt)}),wt=0,it.font=ft.string,each(nt.footer,Rt),it.restore(),St+=yt.width,{width:St,height:vt}}function determineYAlign(nt,rt){const{y:it,height:st}=rt;return it<st/2?"top":it>nt.height-st/2?"bottom":"center"}function doesNotFitWithAlign(nt,rt,it,st){const{x:lt,width:ct}=st,ut=it.caretSize+it.caretPadding;if(nt==="left"&&lt+ct+ut>rt.width||nt==="right"&&lt-ct-ut<0)return!0}function determineXAlign(nt,rt,it,st){const{x:lt,width:ct}=it,{width:ut,chartArea:{left:dt,right:ht}}=nt;let pt="center";return st==="center"?pt=lt<=(dt+ht)/2?"left":"right":lt<=ct/2?pt="left":lt>=ut-ct/2&&(pt="right"),doesNotFitWithAlign(pt,nt,rt,it)&&(pt="center"),pt}function determineAlignment(nt,rt,it){const st=it.yAlign||rt.yAlign||determineYAlign(nt,it);return{xAlign:it.xAlign||rt.xAlign||determineXAlign(nt,rt,it,st),yAlign:st}}function alignX(nt,rt){let{x:it,width:st}=nt;return rt==="right"?it-=st:rt==="center"&&(it-=st/2),it}function alignY(nt,rt,it){let{y:st,height:lt}=nt;return rt==="top"?st+=it:rt==="bottom"?st-=lt+it:st-=lt/2,st}function getBackgroundPoint(nt,rt,it,st){const{caretSize:lt,caretPadding:ct,cornerRadius:ut}=nt,{xAlign:dt,yAlign:ht}=it,pt=lt+ct,{topLeft:ft,topRight:mt,bottomLeft:gt,bottomRight:xt}=toTRBLCorners(ut);let yt=alignX(rt,dt);const vt=alignY(rt,ht,pt);return ht==="center"?dt==="left"?yt+=pt:dt==="right"&&(yt-=pt):dt==="left"?yt-=Math.max(ft,gt)+lt:dt==="right"&&(yt+=Math.max(mt,xt)+lt),{x:_limitValue(yt,0,st.width-rt.width),y:_limitValue(vt,0,st.height-rt.height)}}function getAlignedX(nt,rt,it){const st=toPadding(it.padding);return rt==="center"?nt.x+nt.width/2:rt==="right"?nt.x+nt.width-st.right:nt.x+st.left}function getBeforeAfterBodyLines(nt){return pushOrConcat([],splitNewlines(nt))}function createTooltipContext(nt,rt,it){return createContext(nt,{tooltip:rt,tooltipItems:it,type:"tooltip"})}function overrideCallbacks(nt,rt){const it=rt&&rt.dataset&&rt.dataset.tooltip&&rt.dataset.tooltip.callbacks;return it?nt.override(it):nt}const defaultCallbacks={beforeTitle:noop$1,title(nt){if(nt.length>0){const rt=nt[0],it=rt.chart.data.labels,st=it?it.length:0;if(this&&this.options&&this.options.mode==="dataset")return rt.dataset.label||"";if(rt.label)return rt.label;if(st>0&&rt.dataIndex<st)return it[rt.dataIndex]}return""},afterTitle:noop$1,beforeBody:noop$1,beforeLabel:noop$1,label(nt){if(this&&this.options&&this.options.mode==="dataset")return nt.label+": "+nt.formattedValue||nt.formattedValue;let rt=nt.dataset.label||"";rt&&(rt+=": ");const it=nt.formattedValue;return isNullOrUndef(it)||(rt+=it),rt},labelColor(nt){const it=nt.chart.getDatasetMeta(nt.datasetIndex).controller.getStyle(nt.dataIndex);return{borderColor:it.borderColor,backgroundColor:it.backgroundColor,borderWidth:it.borderWidth,borderDash:it.borderDash,borderDashOffset:it.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(nt){const it=nt.chart.getDatasetMeta(nt.datasetIndex).controller.getStyle(nt.dataIndex);return{pointStyle:it.pointStyle,rotation:it.rotation}},afterLabel:noop$1,afterBody:noop$1,beforeFooter:noop$1,footer:noop$1,afterFooter:noop$1};function invokeCallbackWithFallback(nt,rt,it,st){const lt=nt[rt].call(it,st);return typeof lt>"u"?defaultCallbacks[rt].call(it,st):lt}class Tooltip extends Element$1{constructor(rt){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=rt.chart,this.options=rt.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(rt){this.options=rt,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const rt=this._cachedAnimations;if(rt)return rt;const it=this.chart,st=this.options.setContext(this.getContext()),lt=st.enabled&&it.options.animation&&st.animations,ct=new Animations(this.chart,lt);return lt._cacheable&&(this._cachedAnimations=Object.freeze(ct)),ct}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(rt,it){const{callbacks:st}=it,lt=invokeCallbackWithFallback(st,"beforeTitle",this,rt),ct=invokeCallbackWithFallback(st,"title",this,rt),ut=invokeCallbackWithFallback(st,"afterTitle",this,rt);let dt=[];return dt=pushOrConcat(dt,splitNewlines(lt)),dt=pushOrConcat(dt,splitNewlines(ct)),dt=pushOrConcat(dt,splitNewlines(ut)),dt}getBeforeBody(rt,it){return getBeforeAfterBodyLines(invokeCallbackWithFallback(it.callbacks,"beforeBody",this,rt))}getBody(rt,it){const{callbacks:st}=it,lt=[];return each(rt,ct=>{const ut={before:[],lines:[],after:[]},dt=overrideCallbacks(st,ct);pushOrConcat(ut.before,splitNewlines(invokeCallbackWithFallback(dt,"beforeLabel",this,ct))),pushOrConcat(ut.lines,invokeCallbackWithFallback(dt,"label",this,ct)),pushOrConcat(ut.after,splitNewlines(invokeCallbackWithFallback(dt,"afterLabel",this,ct))),lt.push(ut)}),lt}getAfterBody(rt,it){return getBeforeAfterBodyLines(invokeCallbackWithFallback(it.callbacks,"afterBody",this,rt))}getFooter(rt,it){const{callbacks:st}=it,lt=invokeCallbackWithFallback(st,"beforeFooter",this,rt),ct=invokeCallbackWithFallback(st,"footer",this,rt),ut=invokeCallbackWithFallback(st,"afterFooter",this,rt);let dt=[];return dt=pushOrConcat(dt,splitNewlines(lt)),dt=pushOrConcat(dt,splitNewlines(ct)),dt=pushOrConcat(dt,splitNewlines(ut)),dt}_createItems(rt){const it=this._active,st=this.chart.data,lt=[],ct=[],ut=[];let dt=[],ht,pt;for(ht=0,pt=it.length;ht<pt;++ht)dt.push(createTooltipItem(this.chart,it[ht]));return rt.filter&&(dt=dt.filter((ft,mt,gt)=>rt.filter(ft,mt,gt,st))),rt.itemSort&&(dt=dt.sort((ft,mt)=>rt.itemSort(ft,mt,st))),each(dt,ft=>{const mt=overrideCallbacks(rt.callbacks,ft);lt.push(invokeCallbackWithFallback(mt,"labelColor",this,ft)),ct.push(invokeCallbackWithFallback(mt,"labelPointStyle",this,ft)),ut.push(invokeCallbackWithFallback(mt,"labelTextColor",this,ft))}),this.labelColors=lt,this.labelPointStyles=ct,this.labelTextColors=ut,this.dataPoints=dt,dt}update(rt,it){const st=this.options.setContext(this.getContext()),lt=this._active;let ct,ut=[];if(!lt.length)this.opacity!==0&&(ct={opacity:0});else{const dt=positioners[st.position].call(this,lt,this._eventPosition);ut=this._createItems(st),this.title=this.getTitle(ut,st),this.beforeBody=this.getBeforeBody(ut,st),this.body=this.getBody(ut,st),this.afterBody=this.getAfterBody(ut,st),this.footer=this.getFooter(ut,st);const ht=this._size=getTooltipSize(this,st),pt=Object.assign({},dt,ht),ft=determineAlignment(this.chart,st,pt),mt=getBackgroundPoint(st,pt,ft,this.chart);this.xAlign=ft.xAlign,this.yAlign=ft.yAlign,ct={opacity:1,x:mt.x,y:mt.y,width:ht.width,height:ht.height,caretX:dt.x,caretY:dt.y}}this._tooltipItems=ut,this.$context=void 0,ct&&this._resolveAnimations().update(this,ct),rt&&st.external&&st.external.call(this,{chart:this.chart,tooltip:this,replay:it})}drawCaret(rt,it,st,lt){const ct=this.getCaretPosition(rt,st,lt);it.lineTo(ct.x1,ct.y1),it.lineTo(ct.x2,ct.y2),it.lineTo(ct.x3,ct.y3)}getCaretPosition(rt,it,st){const{xAlign:lt,yAlign:ct}=this,{caretSize:ut,cornerRadius:dt}=st,{topLeft:ht,topRight:pt,bottomLeft:ft,bottomRight:mt}=toTRBLCorners(dt),{x:gt,y:xt}=rt,{width:yt,height:vt}=it;let St,Et,wt,Rt,Tt,It;return ct==="center"?(Tt=xt+vt/2,lt==="left"?(St=gt,Et=St-ut,Rt=Tt+ut,It=Tt-ut):(St=gt+yt,Et=St+ut,Rt=Tt-ut,It=Tt+ut),wt=St):(lt==="left"?Et=gt+Math.max(ht,ft)+ut:lt==="right"?Et=gt+yt-Math.max(pt,mt)-ut:Et=this.caretX,ct==="top"?(Rt=xt,Tt=Rt-ut,St=Et-ut,wt=Et+ut):(Rt=xt+vt,Tt=Rt+ut,St=Et+ut,wt=Et-ut),It=Rt),{x1:St,x2:Et,x3:wt,y1:Rt,y2:Tt,y3:It}}drawTitle(rt,it,st){const lt=this.title,ct=lt.length;let ut,dt,ht;if(ct){const pt=getRtlAdapter(st.rtl,this.x,this.width);for(rt.x=getAlignedX(this,st.titleAlign,st),it.textAlign=pt.textAlign(st.titleAlign),it.textBaseline="middle",ut=toFont(st.titleFont),dt=st.titleSpacing,it.fillStyle=st.titleColor,it.font=ut.string,ht=0;ht<ct;++ht)it.fillText(lt[ht],pt.x(rt.x),rt.y+ut.lineHeight/2),rt.y+=ut.lineHeight+dt,ht+1===ct&&(rt.y+=st.titleMarginBottom-dt)}}_drawColorBox(rt,it,st,lt,ct){const ut=this.labelColors[st],dt=this.labelPointStyles[st],{boxHeight:ht,boxWidth:pt}=ct,ft=toFont(ct.bodyFont),mt=getAlignedX(this,"left",ct),gt=lt.x(mt),xt=ht<ft.lineHeight?(ft.lineHeight-ht)/2:0,yt=it.y+xt;if(ct.usePointStyle){const vt={radius:Math.min(pt,ht)/2,pointStyle:dt.pointStyle,rotation:dt.rotation,borderWidth:1},St=lt.leftForLtr(gt,pt)+pt/2,Et=yt+ht/2;rt.strokeStyle=ct.multiKeyBackground,rt.fillStyle=ct.multiKeyBackground,drawPoint(rt,vt,St,Et),rt.strokeStyle=ut.borderColor,rt.fillStyle=ut.backgroundColor,drawPoint(rt,vt,St,Et)}else{rt.lineWidth=isObject(ut.borderWidth)?Math.max(...Object.values(ut.borderWidth)):ut.borderWidth||1,rt.strokeStyle=ut.borderColor,rt.setLineDash(ut.borderDash||[]),rt.lineDashOffset=ut.borderDashOffset||0;const vt=lt.leftForLtr(gt,pt),St=lt.leftForLtr(lt.xPlus(gt,1),pt-2),Et=toTRBLCorners(ut.borderRadius);Object.values(Et).some(wt=>wt!==0)?(rt.beginPath(),rt.fillStyle=ct.multiKeyBackground,addRoundedRectPath(rt,{x:vt,y:yt,w:pt,h:ht,radius:Et}),rt.fill(),rt.stroke(),rt.fillStyle=ut.backgroundColor,rt.beginPath(),addRoundedRectPath(rt,{x:St,y:yt+1,w:pt-2,h:ht-2,radius:Et}),rt.fill()):(rt.fillStyle=ct.multiKeyBackground,rt.fillRect(vt,yt,pt,ht),rt.strokeRect(vt,yt,pt,ht),rt.fillStyle=ut.backgroundColor,rt.fillRect(St,yt+1,pt-2,ht-2))}rt.fillStyle=this.labelTextColors[st]}drawBody(rt,it,st){const{body:lt}=this,{bodySpacing:ct,bodyAlign:ut,displayColors:dt,boxHeight:ht,boxWidth:pt,boxPadding:ft}=st,mt=toFont(st.bodyFont);let gt=mt.lineHeight,xt=0;const yt=getRtlAdapter(st.rtl,this.x,this.width),vt=function(jt){it.fillText(jt,yt.x(rt.x+xt),rt.y+gt/2),rt.y+=gt+ct},St=yt.textAlign(ut);let Et,wt,Rt,Tt,It,At,Dt;for(it.textAlign=ut,it.textBaseline="middle",it.font=mt.string,rt.x=getAlignedX(this,St,st),it.fillStyle=st.bodyColor,each(this.beforeBody,vt),xt=dt&&St!=="right"?ut==="center"?pt/2+ft:pt+2+ft:0,Tt=0,At=lt.length;Tt<At;++Tt){for(Et=lt[Tt],wt=this.labelTextColors[Tt],it.fillStyle=wt,each(Et.before,vt),Rt=Et.lines,dt&&Rt.length&&(this._drawColorBox(it,rt,Tt,yt,st),gt=Math.max(mt.lineHeight,ht)),It=0,Dt=Rt.length;It<Dt;++It)vt(Rt[It]),gt=mt.lineHeight;each(Et.after,vt)}xt=0,gt=mt.lineHeight,each(this.afterBody,vt),rt.y-=ct}drawFooter(rt,it,st){const lt=this.footer,ct=lt.length;let ut,dt;if(ct){const ht=getRtlAdapter(st.rtl,this.x,this.width);for(rt.x=getAlignedX(this,st.footerAlign,st),rt.y+=st.footerMarginTop,it.textAlign=ht.textAlign(st.footerAlign),it.textBaseline="middle",ut=toFont(st.footerFont),it.fillStyle=st.footerColor,it.font=ut.string,dt=0;dt<ct;++dt)it.fillText(lt[dt],ht.x(rt.x),rt.y+ut.lineHeight/2),rt.y+=ut.lineHeight+st.footerSpacing}}drawBackground(rt,it,st,lt){const{xAlign:ct,yAlign:ut}=this,{x:dt,y:ht}=rt,{width:pt,height:ft}=st,{topLeft:mt,topRight:gt,bottomLeft:xt,bottomRight:yt}=toTRBLCorners(lt.cornerRadius);it.fillStyle=lt.backgroundColor,it.strokeStyle=lt.borderColor,it.lineWidth=lt.borderWidth,it.beginPath(),it.moveTo(dt+mt,ht),ut==="top"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+pt-gt,ht),it.quadraticCurveTo(dt+pt,ht,dt+pt,ht+gt),ut==="center"&&ct==="right"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+pt,ht+ft-yt),it.quadraticCurveTo(dt+pt,ht+ft,dt+pt-yt,ht+ft),ut==="bottom"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+xt,ht+ft),it.quadraticCurveTo(dt,ht+ft,dt,ht+ft-xt),ut==="center"&&ct==="left"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt,ht+mt),it.quadraticCurveTo(dt,ht,dt+mt,ht),it.closePath(),it.fill(),lt.borderWidth>0&&it.stroke()}_updateAnimationTarget(rt){const it=this.chart,st=this.$animations,lt=st&&st.x,ct=st&&st.y;if(lt||ct){const ut=positioners[rt.position].call(this,this._active,this._eventPosition);if(!ut)return;const dt=this._size=getTooltipSize(this,rt),ht=Object.assign({},ut,this._size),pt=determineAlignment(it,rt,ht),ft=getBackgroundPoint(rt,ht,pt,it);(lt._to!==ft.x||ct._to!==ft.y)&&(this.xAlign=pt.xAlign,this.yAlign=pt.yAlign,this.width=dt.width,this.height=dt.height,this.caretX=ut.x,this.caretY=ut.y,this._resolveAnimations().update(this,ft))}}_willRender(){return!!this.opacity}draw(rt){const it=this.options.setContext(this.getContext());let st=this.opacity;if(!st)return;this._updateAnimationTarget(it);const lt={width:this.width,height:this.height},ct={x:this.x,y:this.y};st=Math.abs(st)<.001?0:st;const ut=toPadding(it.padding),dt=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;it.enabled&&dt&&(rt.save(),rt.globalAlpha=st,this.drawBackground(ct,rt,lt,it),overrideTextDirection(rt,it.textDirection),ct.y+=ut.top,this.drawTitle(ct,rt,it),this.drawBody(ct,rt,it),this.drawFooter(ct,rt,it),restoreTextDirection(rt,it.textDirection),rt.restore())}getActiveElements(){return this._active||[]}setActiveElements(rt,it){const st=this._active,lt=rt.map(({datasetIndex:dt,index:ht})=>{const pt=this.chart.getDatasetMeta(dt);if(!pt)throw new Error("Cannot find a dataset at index "+dt);return{datasetIndex:dt,element:pt.data[ht],index:ht}}),ct=!_elementsEqual(st,lt),ut=this._positionChanged(lt,it);(ct||ut)&&(this._active=lt,this._eventPosition=it,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(rt,it,st=!0){if(it&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const lt=this.options,ct=this._active||[],ut=this._getActiveElements(rt,ct,it,st),dt=this._positionChanged(ut,rt),ht=it||!_elementsEqual(ut,ct)||dt;return ht&&(this._active=ut,(lt.enabled||lt.external)&&(this._eventPosition={x:rt.x,y:rt.y},this.update(!0,it))),ht}_getActiveElements(rt,it,st,lt){const ct=this.options;if(rt.type==="mouseout")return[];if(!lt)return it.filter(dt=>this.chart.data.datasets[dt.datasetIndex]&&this.chart.getDatasetMeta(dt.datasetIndex).controller.getParsed(dt.index)!==void 0);const ut=this.chart.getElementsAtEventForMode(rt,ct.mode,ct,st);return ct.reverse&&ut.reverse(),ut}_positionChanged(rt,it){const{caretX:st,caretY:lt,options:ct}=this,ut=positioners[ct.position].call(this,rt,it);return ut!==!1&&(st!==ut.x||lt!==ut.y)}}uo(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(nt,rt,it){it&&(nt.tooltip=new Tooltip({chart:nt,options:it}))},beforeUpdate(nt,rt,it){nt.tooltip&&nt.tooltip.initialize(it)},reset(nt,rt,it){nt.tooltip&&nt.tooltip.initialize(it)},afterDraw(nt){const rt=nt.tooltip;if(rt&&rt._willRender()){const it={tooltip:rt};if(nt.notifyPlugins("beforeTooltipDraw",{...it,cancelable:!0})===!1)return;rt.draw(nt.ctx),nt.notifyPlugins("afterTooltipDraw",it)}},afterEvent(nt,rt){if(nt.tooltip){const it=rt.replay;nt.tooltip.handleEvent(rt.event,it,rt.inChartArea)&&(rt.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(nt,rt)=>rt.bodyFont.size,boxWidth:(nt,rt)=>rt.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:nt=>nt!=="filter"&&nt!=="itemSort"&&nt!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(nt,rt,it,st)=>(typeof rt=="string"?(it=nt.push(rt)-1,st.unshift({index:it,label:rt})):isNaN(rt)&&(it=null),it);function findOrAddLabel(nt,rt,it,st){const lt=nt.indexOf(rt);if(lt===-1)return addIfString(nt,rt,it,st);const ct=nt.lastIndexOf(rt);return lt!==ct?it:lt}const validIndex=(nt,rt)=>nt===null?null:_limitValue(Math.round(nt),0,rt);function _getLabelForValue(nt){const rt=this.getLabels();return nt>=0&&nt<rt.length?rt[nt]:nt}class CategoryScale extends Scale{constructor(rt){super(rt),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(rt){const it=this._addedLabels;if(it.length){const st=this.getLabels();for(const{index:lt,label:ct}of it)st[lt]===ct&&st.splice(lt,1);this._addedLabels=[]}super.init(rt)}parse(rt,it){if(isNullOrUndef(rt))return null;const st=this.getLabels();return it=isFinite(it)&&st[it]===rt?it:findOrAddLabel(st,rt,valueOrDefault(it,rt),this._addedLabels),validIndex(it,st.length-1)}determineDataLimits(){const{minDefined:rt,maxDefined:it}=this.getUserBounds();let{min:st,max:lt}=this.getMinMax(!0);this.options.bounds==="ticks"&&(rt||(st=0),it||(lt=this.getLabels().length-1)),this.min=st,this.max=lt}buildTicks(){const rt=this.min,it=this.max,st=this.options.offset,lt=[];let ct=this.getLabels();ct=rt===0&&it===ct.length-1?ct:ct.slice(rt,it+1),this._valueRange=Math.max(ct.length-(st?0:1),1),this._startValue=this.min-(st?.5:0);for(let ut=rt;ut<=it;ut++)lt.push({value:ut});return lt}getLabelForValue(rt){return _getLabelForValue.call(this,rt)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(rt){return typeof rt!="number"&&(rt=this.parse(rt)),rt===null?NaN:this.getPixelForDecimal((rt-this._startValue)/this._valueRange)}getPixelForTick(rt){const it=this.ticks;return rt<0||rt>it.length-1?null:this.getPixelForValue(it[rt].value)}getValueForPixel(rt){return Math.round(this._startValue+this.getDecimalForPixel(rt)*this._valueRange)}getBasePixel(){return this.bottom}}uo(CategoryScale,"id","category"),uo(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(nt,rt){const it=[],{bounds:lt,step:ct,min:ut,max:dt,precision:ht,count:pt,maxTicks:ft,maxDigits:mt,includeBounds:gt}=nt,xt=ct||1,yt=ft-1,{min:vt,max:St}=rt,Et=!isNullOrUndef(ut),wt=!isNullOrUndef(dt),Rt=!isNullOrUndef(pt),Tt=(St-vt)/(mt+1);let It=niceNum((St-vt)/yt/xt)*xt,At,Dt,jt,Ft;if(It<1e-14&&!Et&&!wt)return[{value:vt},{value:St}];Ft=Math.ceil(St/It)-Math.floor(vt/It),Ft>yt&&(It=niceNum(Ft*It/yt/xt)*xt),isNullOrUndef(ht)||(At=Math.pow(10,ht),It=Math.ceil(It*At)/At),lt==="ticks"?(Dt=Math.floor(vt/It)*It,jt=Math.ceil(St/It)*It):(Dt=vt,jt=St),Et&&wt&&ct&&almostWhole((dt-ut)/ct,It/1e3)?(Ft=Math.round(Math.min((dt-ut)/It,ft)),It=(dt-ut)/Ft,Dt=ut,jt=dt):Rt?(Dt=Et?ut:Dt,jt=wt?dt:jt,Ft=pt-1,It=(jt-Dt)/Ft):(Ft=(jt-Dt)/It,almostEquals(Ft,Math.round(Ft),It/1e3)?Ft=Math.round(Ft):Ft=Math.ceil(Ft));const Lt=Math.max(_decimalPlaces(It),_decimalPlaces(Dt));At=Math.pow(10,isNullOrUndef(ht)?Lt:ht),Dt=Math.round(Dt*At)/At,jt=Math.round(jt*At)/At;let Pt=0;for(Et&&(gt&&Dt!==ut?(it.push({value:ut}),Dt<ut&&Pt++,almostEquals(Math.round((Dt+Pt*It)*At)/At,ut,relativeLabelSize(ut,Tt,nt))&&Pt++):Dt<ut&&Pt++);Pt<Ft;++Pt){const Ot=Math.round((Dt+Pt*It)*At)/At;if(wt&&Ot>dt)break;it.push({value:Ot})}return wt&&gt&&jt!==dt?it.length&&almostEquals(it[it.length-1].value,dt,relativeLabelSize(dt,Tt,nt))?it[it.length-1].value=dt:it.push({value:dt}):(!wt||jt===dt)&&it.push({value:jt}),it}function relativeLabelSize(nt,rt,{horizontal:it,minRotation:st}){const lt=toRadians(st),ct=(it?Math.sin(lt):Math.cos(lt))||.001,ut=.75*rt*(""+nt).length;return Math.min(rt/ct,ut)}class LinearScaleBase extends Scale{constructor(rt){super(rt),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(rt,it){return isNullOrUndef(rt)||(typeof rt=="number"||rt instanceof Number)&&!isFinite(+rt)?null:+rt}handleTickRangeOptions(){const{beginAtZero:rt}=this.options,{minDefined:it,maxDefined:st}=this.getUserBounds();let{min:lt,max:ct}=this;const ut=ht=>lt=it?lt:ht,dt=ht=>ct=st?ct:ht;if(rt){const ht=sign$1(lt),pt=sign$1(ct);ht<0&&pt<0?dt(0):ht>0&&pt>0&&ut(0)}if(lt===ct){let ht=ct===0?1:Math.abs(ct*.05);dt(ct+ht),rt||ut(lt-ht)}this.min=lt,this.max=ct}getTickLimit(){const rt=this.options.ticks;let{maxTicksLimit:it,stepSize:st}=rt,lt;return st?(lt=Math.ceil(this.max/st)-Math.floor(this.min/st)+1,lt>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${st} would result generating up to ${lt} ticks. Limiting to 1000.`),lt=1e3)):(lt=this.computeTickLimit(),it=it||11),it&&(lt=Math.min(it,lt)),lt}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const rt=this.options,it=rt.ticks;let st=this.getTickLimit();st=Math.max(2,st);const lt={maxTicks:st,bounds:rt.bounds,min:rt.min,max:rt.max,precision:it.precision,step:it.stepSize,count:it.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:it.minRotation||0,includeBounds:it.includeBounds!==!1},ct=this._range||this,ut=generateTicks$1(lt,ct);return rt.bounds==="ticks"&&_setMinAndMaxByKey(ut,this,"value"),rt.reverse?(ut.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ut}configure(){const rt=this.ticks;let it=this.min,st=this.max;if(super.configure(),this.options.offset&&rt.length){const lt=(st-it)/Math.max(rt.length-1,1)/2;it-=lt,st+=lt}this._startValue=it,this._endValue=st,this._valueRange=st-it}getLabelForValue(rt){return formatNumber(rt,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!0);this.min=isNumberFinite(rt)?rt:0,this.max=isNumberFinite(it)?it:1,this.handleTickRangeOptions()}computeTickLimit(){const rt=this.isHorizontal(),it=rt?this.width:this.height,st=toRadians(this.options.ticks.minRotation),lt=(rt?Math.sin(st):Math.cos(st))||.001,ct=this._resolveTickFontOptions(0);return Math.ceil(it/Math.min(40,ct.lineHeight/lt))}getPixelForValue(rt){return rt===null?NaN:this.getPixelForDecimal((rt-this._startValue)/this._valueRange)}getValueForPixel(rt){return this._startValue+this.getDecimalForPixel(rt)*this._valueRange}}uo(LinearScale,"id","linear"),uo(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=nt=>Math.floor(log10(nt)),changeExponent=(nt,rt)=>Math.pow(10,log10Floor(nt)+rt);function isMajor(nt){return nt/Math.pow(10,log10Floor(nt))===1}function steps(nt,rt,it){const st=Math.pow(10,it),lt=Math.floor(nt/st);return Math.ceil(rt/st)-lt}function startExp(nt,rt){const it=rt-nt;let st=log10Floor(it);for(;steps(nt,rt,st)>10;)st++;for(;steps(nt,rt,st)<10;)st--;return Math.min(st,log10Floor(nt))}function generateTicks(nt,{min:rt,max:it}){rt=finiteOrDefault(nt.min,rt);const st=[],lt=log10Floor(rt);let ct=startExp(rt,it),ut=ct<0?Math.pow(10,Math.abs(ct)):1;const dt=Math.pow(10,ct),ht=lt>ct?Math.pow(10,lt):0,pt=Math.round((rt-ht)*ut)/ut,ft=Math.floor((rt-ht)/dt/10)*dt*10;let mt=Math.floor((pt-ft)/Math.pow(10,ct)),gt=finiteOrDefault(nt.min,Math.round((ht+ft+mt*Math.pow(10,ct))*ut)/ut);for(;gt<it;)st.push({value:gt,major:isMajor(gt),significand:mt}),mt>=10?mt=mt<15?15:20:mt++,mt>=20&&(ct++,mt=2,ut=ct>=0?1:ut),gt=Math.round((ht+ft+mt*Math.pow(10,ct))*ut)/ut;const xt=finiteOrDefault(nt.max,gt);return st.push({value:xt,major:isMajor(xt),significand:mt}),st}class LogarithmicScale extends Scale{constructor(rt){super(rt),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(rt,it){const st=LinearScaleBase.prototype.parse.apply(this,[rt,it]);if(st===0){this._zero=!0;return}return isNumberFinite(st)&&st>0?st:null}determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!0);this.min=isNumberFinite(rt)?Math.max(0,rt):null,this.max=isNumberFinite(it)?Math.max(0,it):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=rt===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:rt,maxDefined:it}=this.getUserBounds();let st=this.min,lt=this.max;const ct=dt=>st=rt?st:dt,ut=dt=>lt=it?lt:dt;st===lt&&(st<=0?(ct(1),ut(10)):(ct(changeExponent(st,-1)),ut(changeExponent(lt,1)))),st<=0&&ct(changeExponent(lt,-1)),lt<=0&&ut(changeExponent(st,1)),this.min=st,this.max=lt}buildTicks(){const rt=this.options,it={min:this._userMin,max:this._userMax},st=generateTicks(it,this);return rt.bounds==="ticks"&&_setMinAndMaxByKey(st,this,"value"),rt.reverse?(st.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),st}getLabelForValue(rt){return rt===void 0?"0":formatNumber(rt,this.chart.options.locale,this.options.ticks.format)}configure(){const rt=this.min;super.configure(),this._startValue=log10(rt),this._valueRange=log10(this.max)-log10(rt)}getPixelForValue(rt){return(rt===void 0||rt===0)&&(rt=this.min),rt===null||isNaN(rt)?NaN:this.getPixelForDecimal(rt===this.min?0:(log10(rt)-this._startValue)/this._valueRange)}getValueForPixel(rt){const it=this.getDecimalForPixel(rt);return Math.pow(10,this._startValue+it*this._valueRange)}}uo(LogarithmicScale,"id","logarithmic"),uo(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(nt){const rt=nt.ticks;if(rt.display&&nt.display){const it=toPadding(rt.backdropPadding);return valueOrDefault(rt.font&&rt.font.size,defaults.font.size)+it.height}return 0}function measureLabelSize(nt,rt,it){return it=isArray(it)?it:[it],{w:_longestText(nt,rt.string,it),h:it.length*rt.lineHeight}}function determineLimits(nt,rt,it,st,lt){return nt===st||nt===lt?{start:rt-it/2,end:rt+it/2}:nt<st||nt>lt?{start:rt-it,end:rt}:{start:rt,end:rt+it}}function fitWithPointLabels(nt){const rt={l:nt.left+nt._padding.left,r:nt.right-nt._padding.right,t:nt.top+nt._padding.top,b:nt.bottom-nt._padding.bottom},it=Object.assign({},rt),st=[],lt=[],ct=nt._pointLabels.length,ut=nt.options.pointLabels,dt=ut.centerPointLabels?PI/ct:0;for(let ht=0;ht<ct;ht++){const pt=ut.setContext(nt.getPointLabelContext(ht));lt[ht]=pt.padding;const ft=nt.getPointPosition(ht,nt.drawingArea+lt[ht],dt),mt=toFont(pt.font),gt=measureLabelSize(nt.ctx,mt,nt._pointLabels[ht]);st[ht]=gt;const xt=_normalizeAngle(nt.getIndexAngle(ht)+dt),yt=Math.round(toDegrees(xt)),vt=determineLimits(yt,ft.x,gt.w,0,180),St=determineLimits(yt,ft.y,gt.h,90,270);updateLimits(it,rt,xt,vt,St)}nt.setCenterPoint(rt.l-it.l,it.r-rt.r,rt.t-it.t,it.b-rt.b),nt._pointLabelItems=buildPointLabelItems(nt,st,lt)}function updateLimits(nt,rt,it,st,lt){const ct=Math.abs(Math.sin(it)),ut=Math.abs(Math.cos(it));let dt=0,ht=0;st.start<rt.l?(dt=(rt.l-st.start)/ct,nt.l=Math.min(nt.l,rt.l-dt)):st.end>rt.r&&(dt=(st.end-rt.r)/ct,nt.r=Math.max(nt.r,rt.r+dt)),lt.start<rt.t?(ht=(rt.t-lt.start)/ut,nt.t=Math.min(nt.t,rt.t-ht)):lt.end>rt.b&&(ht=(lt.end-rt.b)/ut,nt.b=Math.max(nt.b,rt.b+ht))}function createPointLabelItem(nt,rt,it){const st=nt.drawingArea,{extra:lt,additionalAngle:ct,padding:ut,size:dt}=it,ht=nt.getPointPosition(rt,st+lt+ut,ct),pt=Math.round(toDegrees(_normalizeAngle(ht.angle+HALF_PI))),ft=yForAngle(ht.y,dt.h,pt),mt=getTextAlignForAngle(pt),gt=leftForTextAlign(ht.x,dt.w,mt);return{visible:!0,x:ht.x,y:ft,textAlign:mt,left:gt,top:ft,right:gt+dt.w,bottom:ft+dt.h}}function isNotOverlapped(nt,rt){if(!rt)return!0;const{left:it,top:st,right:lt,bottom:ct}=nt;return!(_isPointInArea({x:it,y:st},rt)||_isPointInArea({x:it,y:ct},rt)||_isPointInArea({x:lt,y:st},rt)||_isPointInArea({x:lt,y:ct},rt))}function buildPointLabelItems(nt,rt,it){const st=[],lt=nt._pointLabels.length,ct=nt.options,{centerPointLabels:ut,display:dt}=ct.pointLabels,ht={extra:getTickBackdropHeight(ct)/2,additionalAngle:ut?PI/lt:0};let pt;for(let ft=0;ft<lt;ft++){ht.padding=it[ft],ht.size=rt[ft];const mt=createPointLabelItem(nt,ft,ht);st.push(mt),dt==="auto"&&(mt.visible=isNotOverlapped(mt,pt),mt.visible&&(pt=mt))}return st}function getTextAlignForAngle(nt){return nt===0||nt===180?"center":nt<180?"left":"right"}function leftForTextAlign(nt,rt,it){return it==="right"?nt-=rt:it==="center"&&(nt-=rt/2),nt}function yForAngle(nt,rt,it){return it===90||it===270?nt-=rt/2:(it>270||it<90)&&(nt-=rt),nt}function drawPointLabelBox(nt,rt,it){const{left:st,top:lt,right:ct,bottom:ut}=it,{backdropColor:dt}=rt;if(!isNullOrUndef(dt)){const ht=toTRBLCorners(rt.borderRadius),pt=toPadding(rt.backdropPadding);nt.fillStyle=dt;const ft=st-pt.left,mt=lt-pt.top,gt=ct-st+pt.width,xt=ut-lt+pt.height;Object.values(ht).some(yt=>yt!==0)?(nt.beginPath(),addRoundedRectPath(nt,{x:ft,y:mt,w:gt,h:xt,radius:ht}),nt.fill()):nt.fillRect(ft,mt,gt,xt)}}function drawPointLabels(nt,rt){const{ctx:it,options:{pointLabels:st}}=nt;for(let lt=rt-1;lt>=0;lt--){const ct=nt._pointLabelItems[lt];if(!ct.visible)continue;const ut=st.setContext(nt.getPointLabelContext(lt));drawPointLabelBox(it,ut,ct);const dt=toFont(ut.font),{x:ht,y:pt,textAlign:ft}=ct;renderText(it,nt._pointLabels[lt],ht,pt+dt.lineHeight/2,dt,{color:ut.color,textAlign:ft,textBaseline:"middle"})}}function pathRadiusLine(nt,rt,it,st){const{ctx:lt}=nt;if(it)lt.arc(nt.xCenter,nt.yCenter,rt,0,TAU);else{let ct=nt.getPointPosition(0,rt);lt.moveTo(ct.x,ct.y);for(let ut=1;ut<st;ut++)ct=nt.getPointPosition(ut,rt),lt.lineTo(ct.x,ct.y)}}function drawRadiusLine(nt,rt,it,st,lt){const ct=nt.ctx,ut=rt.circular,{color:dt,lineWidth:ht}=rt;!ut&&!st||!dt||!ht||it<0||(ct.save(),ct.strokeStyle=dt,ct.lineWidth=ht,ct.setLineDash(lt.dash),ct.lineDashOffset=lt.dashOffset,ct.beginPath(),pathRadiusLine(nt,it,ut,st),ct.closePath(),ct.stroke(),ct.restore())}function createPointLabelContext(nt,rt,it){return createContext(nt,{label:it,index:rt,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(rt){super(rt),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const rt=this._padding=toPadding(getTickBackdropHeight(this.options)/2),it=this.width=this.maxWidth-rt.width,st=this.height=this.maxHeight-rt.height;this.xCenter=Math.floor(this.left+it/2+rt.left),this.yCenter=Math.floor(this.top+st/2+rt.top),this.drawingArea=Math.floor(Math.min(it,st)/2)}determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!1);this.min=isNumberFinite(rt)&&!isNaN(rt)?rt:0,this.max=isNumberFinite(it)&&!isNaN(it)?it:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(rt){LinearScaleBase.prototype.generateTickLabels.call(this,rt),this._pointLabels=this.getLabels().map((it,st)=>{const lt=callback(this.options.pointLabels.callback,[it,st],this);return lt||lt===0?lt:""}).filter((it,st)=>this.chart.getDataVisibility(st))}fit(){const rt=this.options;rt.display&&rt.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(rt,it,st,lt){this.xCenter+=Math.floor((rt-it)/2),this.yCenter+=Math.floor((st-lt)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(rt,it,st,lt))}getIndexAngle(rt){const it=TAU/(this._pointLabels.length||1),st=this.options.startAngle||0;return _normalizeAngle(rt*it+toRadians(st))}getDistanceFromCenterForValue(rt){if(isNullOrUndef(rt))return NaN;const it=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-rt)*it:(rt-this.min)*it}getValueForDistanceFromCenter(rt){if(isNullOrUndef(rt))return NaN;const it=rt/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-it:this.min+it}getPointLabelContext(rt){const it=this._pointLabels||[];if(rt>=0&&rt<it.length){const st=it[rt];return createPointLabelContext(this.getContext(),rt,st)}}getPointPosition(rt,it,st=0){const lt=this.getIndexAngle(rt)-HALF_PI+st;return{x:Math.cos(lt)*it+this.xCenter,y:Math.sin(lt)*it+this.yCenter,angle:lt}}getPointPositionForValue(rt,it){return this.getPointPosition(rt,this.getDistanceFromCenterForValue(it))}getBasePosition(rt){return this.getPointPositionForValue(rt||0,this.getBaseValue())}getPointLabelPosition(rt){const{left:it,top:st,right:lt,bottom:ct}=this._pointLabelItems[rt];return{left:it,top:st,right:lt,bottom:ct}}drawBackground(){const{backgroundColor:rt,grid:{circular:it}}=this.options;if(rt){const st=this.ctx;st.save(),st.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),it,this._pointLabels.length),st.closePath(),st.fillStyle=rt,st.fill(),st.restore()}}drawGrid(){const rt=this.ctx,it=this.options,{angleLines:st,grid:lt,border:ct}=it,ut=this._pointLabels.length;let dt,ht,pt;if(it.pointLabels.display&&drawPointLabels(this,ut),lt.display&&this.ticks.forEach((ft,mt)=>{if(mt!==0){ht=this.getDistanceFromCenterForValue(ft.value);const gt=this.getContext(mt),xt=lt.setContext(gt),yt=ct.setContext(gt);drawRadiusLine(this,xt,ht,ut,yt)}}),st.display){for(rt.save(),dt=ut-1;dt>=0;dt--){const ft=st.setContext(this.getPointLabelContext(dt)),{color:mt,lineWidth:gt}=ft;!gt||!mt||(rt.lineWidth=gt,rt.strokeStyle=mt,rt.setLineDash(ft.borderDash),rt.lineDashOffset=ft.borderDashOffset,ht=this.getDistanceFromCenterForValue(it.ticks.reverse?this.min:this.max),pt=this.getPointPosition(dt,ht),rt.beginPath(),rt.moveTo(this.xCenter,this.yCenter),rt.lineTo(pt.x,pt.y),rt.stroke())}rt.restore()}}drawBorder(){}drawLabels(){const rt=this.ctx,it=this.options,st=it.ticks;if(!st.display)return;const lt=this.getIndexAngle(0);let ct,ut;rt.save(),rt.translate(this.xCenter,this.yCenter),rt.rotate(lt),rt.textAlign="center",rt.textBaseline="middle",this.ticks.forEach((dt,ht)=>{if(ht===0&&!it.reverse)return;const pt=st.setContext(this.getContext(ht)),ft=toFont(pt.font);if(ct=this.getDistanceFromCenterForValue(this.ticks[ht].value),pt.showLabelBackdrop){rt.font=ft.string,ut=rt.measureText(dt.label).width,rt.fillStyle=pt.backdropColor;const mt=toPadding(pt.backdropPadding);rt.fillRect(-ut/2-mt.left,-ct-ft.size/2-mt.top,ut+mt.width,ft.size+mt.height)}renderText(rt,dt.label,0,-ct,ft,{color:pt.color,strokeColor:pt.textStrokeColor,strokeWidth:pt.textStrokeWidth})}),rt.restore()}drawTitle(){}}uo(RadialLinearScale,"id","radialLinear"),uo(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(rt){return rt},padding:5,centerPointLabels:!1}}),uo(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),uo(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(nt,rt){return nt-rt}function parse(nt,rt){if(isNullOrUndef(rt))return null;const it=nt._adapter,{parser:st,round:lt,isoWeekday:ct}=nt._parseOpts;let ut=rt;return typeof st=="function"&&(ut=st(ut)),isNumberFinite(ut)||(ut=typeof st=="string"?it.parse(ut,st):it.parse(ut)),ut===null?null:(lt&&(ut=lt==="week"&&(isNumber(ct)||ct===!0)?it.startOf(ut,"isoWeek",ct):it.startOf(ut,lt)),+ut)}function determineUnitForAutoTicks(nt,rt,it,st){const lt=UNITS.length;for(let ct=UNITS.indexOf(nt);ct<lt-1;++ct){const ut=INTERVALS[UNITS[ct]],dt=ut.steps?ut.steps:Number.MAX_SAFE_INTEGER;if(ut.common&&Math.ceil((it-rt)/(dt*ut.size))<=st)return UNITS[ct]}return UNITS[lt-1]}function determineUnitForFormatting(nt,rt,it,st,lt){for(let ct=UNITS.length-1;ct>=UNITS.indexOf(it);ct--){const ut=UNITS[ct];if(INTERVALS[ut].common&&nt._adapter.diff(lt,st,ut)>=rt-1)return ut}return UNITS[it?UNITS.indexOf(it):0]}function determineMajorUnit(nt){for(let rt=UNITS.indexOf(nt)+1,it=UNITS.length;rt<it;++rt)if(INTERVALS[UNITS[rt]].common)return UNITS[rt]}function addTick(nt,rt,it){if(!it)nt[rt]=!0;else if(it.length){const{lo:st,hi:lt}=_lookup(it,rt),ct=it[st]>=rt?it[st]:it[lt];nt[ct]=!0}}function setMajorTicks(nt,rt,it,st){const lt=nt._adapter,ct=+lt.startOf(rt[0].value,st),ut=rt[rt.length-1].value;let dt,ht;for(dt=ct;dt<=ut;dt=+lt.add(dt,1,st))ht=it[dt],ht>=0&&(rt[ht].major=!0);return rt}function ticksFromTimestamps(nt,rt,it){const st=[],lt={},ct=rt.length;let ut,dt;for(ut=0;ut<ct;++ut)dt=rt[ut],lt[dt]=ut,st.push({value:dt,major:!1});return ct===0||!it?st:setMajorTicks(nt,st,lt,it)}class TimeScale extends Scale{constructor(rt){super(rt),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(rt,it={}){const st=rt.time||(rt.time={}),lt=this._adapter=new adapters._date(rt.adapters.date);lt.init(it),mergeIf(st.displayFormats,lt.formats()),this._parseOpts={parser:st.parser,round:st.round,isoWeekday:st.isoWeekday},super.init(rt),this._normalized=it.normalized}parse(rt,it){return rt===void 0?null:parse(this,rt)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const rt=this.options,it=this._adapter,st=rt.time.unit||"day";let{min:lt,max:ct,minDefined:ut,maxDefined:dt}=this.getUserBounds();function ht(pt){!ut&&!isNaN(pt.min)&&(lt=Math.min(lt,pt.min)),!dt&&!isNaN(pt.max)&&(ct=Math.max(ct,pt.max))}(!ut||!dt)&&(ht(this._getLabelBounds()),(rt.bounds!=="ticks"||rt.ticks.source!=="labels")&&ht(this.getMinMax(!1))),lt=isNumberFinite(lt)&&!isNaN(lt)?lt:+it.startOf(Date.now(),st),ct=isNumberFinite(ct)&&!isNaN(ct)?ct:+it.endOf(Date.now(),st)+1,this.min=Math.min(lt,ct-1),this.max=Math.max(lt+1,ct)}_getLabelBounds(){const rt=this.getLabelTimestamps();let it=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY;return rt.length&&(it=rt[0],st=rt[rt.length-1]),{min:it,max:st}}buildTicks(){const rt=this.options,it=rt.time,st=rt.ticks,lt=st.source==="labels"?this.getLabelTimestamps():this._generate();rt.bounds==="ticks"&&lt.length&&(this.min=this._userMin||lt[0],this.max=this._userMax||lt[lt.length-1]);const ct=this.min,ut=this.max,dt=_filterBetween(lt,ct,ut);return this._unit=it.unit||(st.autoSkip?determineUnitForAutoTicks(it.minUnit,this.min,this.max,this._getLabelCapacity(ct)):determineUnitForFormatting(this,dt.length,it.minUnit,this.min,this.max)),this._majorUnit=!st.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(lt),rt.reverse&&dt.reverse(),ticksFromTimestamps(this,dt,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(rt=>+rt.value))}initOffsets(rt=[]){let it=0,st=0,lt,ct;this.options.offset&&rt.length&&(lt=this.getDecimalForValue(rt[0]),rt.length===1?it=1-lt:it=(this.getDecimalForValue(rt[1])-lt)/2,ct=this.getDecimalForValue(rt[rt.length-1]),rt.length===1?st=ct:st=(ct-this.getDecimalForValue(rt[rt.length-2]))/2);const ut=rt.length<3?.5:.25;it=_limitValue(it,0,ut),st=_limitValue(st,0,ut),this._offsets={start:it,end:st,factor:1/(it+1+st)}}_generate(){const rt=this._adapter,it=this.min,st=this.max,lt=this.options,ct=lt.time,ut=ct.unit||determineUnitForAutoTicks(ct.minUnit,it,st,this._getLabelCapacity(it)),dt=valueOrDefault(lt.ticks.stepSize,1),ht=ut==="week"?ct.isoWeekday:!1,pt=isNumber(ht)||ht===!0,ft={};let mt=it,gt,xt;if(pt&&(mt=+rt.startOf(mt,"isoWeek",ht)),mt=+rt.startOf(mt,pt?"day":ut),rt.diff(st,it,ut)>1e5*dt)throw new Error(it+" and "+st+" are too far apart with stepSize of "+dt+" "+ut);const yt=lt.ticks.source==="data"&&this.getDataTimestamps();for(gt=mt,xt=0;gt<st;gt=+rt.add(gt,dt,ut),xt++)addTick(ft,gt,yt);return(gt===st||lt.bounds==="ticks"||xt===1)&&addTick(ft,gt,yt),Object.keys(ft).sort(sorter).map(vt=>+vt)}getLabelForValue(rt){const it=this._adapter,st=this.options.time;return st.tooltipFormat?it.format(rt,st.tooltipFormat):it.format(rt,st.displayFormats.datetime)}format(rt,it){const lt=this.options.time.displayFormats,ct=this._unit,ut=it||lt[ct];return this._adapter.format(rt,ut)}_tickFormatFunction(rt,it,st,lt){const ct=this.options,ut=ct.ticks.callback;if(ut)return callback(ut,[rt,it,st],this);const dt=ct.time.displayFormats,ht=this._unit,pt=this._majorUnit,ft=ht&&dt[ht],mt=pt&&dt[pt],gt=st[it],xt=pt&&mt&&gt&&gt.major;return this._adapter.format(rt,lt||(xt?mt:ft))}generateTickLabels(rt){let it,st,lt;for(it=0,st=rt.length;it<st;++it)lt=rt[it],lt.label=this._tickFormatFunction(lt.value,it,rt)}getDecimalForValue(rt){return rt===null?NaN:(rt-this.min)/(this.max-this.min)}getPixelForValue(rt){const it=this._offsets,st=this.getDecimalForValue(rt);return this.getPixelForDecimal((it.start+st)*it.factor)}getValueForPixel(rt){const it=this._offsets,st=this.getDecimalForPixel(rt)/it.factor-it.end;return this.min+st*(this.max-this.min)}_getLabelSize(rt){const it=this.options.ticks,st=this.ctx.measureText(rt).width,lt=toRadians(this.isHorizontal()?it.maxRotation:it.minRotation),ct=Math.cos(lt),ut=Math.sin(lt),dt=this._resolveTickFontOptions(0).size;return{w:st*ct+dt*ut,h:st*ut+dt*ct}}_getLabelCapacity(rt){const it=this.options.time,st=it.displayFormats,lt=st[it.unit]||st.millisecond,ct=this._tickFormatFunction(rt,0,ticksFromTimestamps(this,[rt],this._majorUnit),lt),ut=this._getLabelSize(ct),dt=Math.floor(this.isHorizontal()?this.width/ut.w:this.height/ut.h)-1;return dt>0?dt:1}getDataTimestamps(){let rt=this._cache.data||[],it,st;if(rt.length)return rt;const lt=this.getMatchingVisibleMetas();if(this._normalized&&lt.length)return this._cache.data=lt[0].controller.getAllParsedValues(this);for(it=0,st=lt.length;it<st;++it)rt=rt.concat(lt[it].controller.getAllParsedValues(this));return this._cache.data=this.normalize(rt)}getLabelTimestamps(){const rt=this._cache.labels||[];let it,st;if(rt.length)return rt;const lt=this.getLabels();for(it=0,st=lt.length;it<st;++it)rt.push(parse(this,lt[it]));return this._cache.labels=this._normalized?rt:this.normalize(rt)}normalize(rt){return _arrayUnique(rt.sort(sorter))}}uo(TimeScale,"id","time"),uo(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(nt,rt,it){let st=0,lt=nt.length-1,ct,ut,dt,ht;it?(rt>=nt[st].pos&&rt<=nt[lt].pos&&({lo:st,hi:lt}=_lookupByKey(nt,"pos",rt)),{pos:ct,time:dt}=nt[st],{pos:ut,time:ht}=nt[lt]):(rt>=nt[st].time&&rt<=nt[lt].time&&({lo:st,hi:lt}=_lookupByKey(nt,"time",rt)),{time:ct,pos:dt}=nt[st],{time:ut,pos:ht}=nt[lt]);const pt=ut-ct;return pt?dt+(ht-dt)*(rt-ct)/pt:dt}class TimeSeriesScale extends TimeScale{constructor(rt){super(rt),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const rt=this._getTimestampsForTable(),it=this._table=this.buildLookupTable(rt);this._minPos=interpolate(it,this.min),this._tableRange=interpolate(it,this.max)-this._minPos,super.initOffsets(rt)}buildLookupTable(rt){const{min:it,max:st}=this,lt=[],ct=[];let ut,dt,ht,pt,ft;for(ut=0,dt=rt.length;ut<dt;++ut)pt=rt[ut],pt>=it&&pt<=st&&lt.push(pt);if(lt.length<2)return[{time:it,pos:0},{time:st,pos:1}];for(ut=0,dt=lt.length;ut<dt;++ut)ft=lt[ut+1],ht=lt[ut-1],pt=lt[ut],Math.round((ft+ht)/2)!==pt&&ct.push({time:pt,pos:ut/(dt-1)});return ct}_generate(){const rt=this.min,it=this.max;let st=super.getDataTimestamps();return(!st.includes(rt)||!st.length)&&st.splice(0,0,rt),(!st.includes(it)||st.length===1)&&st.push(it),st.sort((lt,ct)=>lt-ct)}_getTimestampsForTable(){let rt=this._cache.all||[];if(rt.length)return rt;const it=this.getDataTimestamps(),st=this.getLabelTimestamps();return it.length&&st.length?rt=this.normalize(it.concat(st)):rt=it.length?it:st,rt=this._cache.all=rt,rt}getDecimalForValue(rt){return(interpolate(this._table,rt)-this._minPos)/this._tableRange}getValueForPixel(rt){const it=this._offsets,st=this.getDecimalForPixel(rt)/it.factor-it.end;return interpolate(this._table,st*this._tableRange+this._minPos,!0)}}uo(TimeSeriesScale,"id","timeseries"),uo(TimeSeriesScale,"defaults",TimeScale.defaults);const defaultDatasetIdKey="label";function reforwardRef(nt,rt){typeof nt=="function"?nt(rt):nt&&(nt.current=rt)}function setOptions(nt,rt){const it=nt.options;it&&rt&&Object.assign(it,rt)}function setLabels(nt,rt){nt.labels=rt}function setDatasets(nt,rt){let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const st=[];nt.datasets=rt.map(lt=>{const ct=nt.datasets.find(ut=>ut[it]===lt[it]);return!ct||!lt.data||st.includes(ct)?{...lt}:(st.push(ct),Object.assign(ct,lt),ct)})}function cloneData(nt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const it={labels:[],datasets:[]};return setLabels(it,nt.labels),setDatasets(it,nt.datasets,rt),it}function ChartComponent(nt,rt){const{height:it=150,width:st=300,redraw:lt=!1,datasetIdKey:ct,type:ut,data:dt,options:ht,plugins:pt=[],fallbackContent:ft,updateMode:mt,...gt}=nt,xt=reactExports.useRef(null),yt=reactExports.useRef(),vt=()=>{xt.current&&(yt.current=new Chart$1(xt.current,{type:ut,data:cloneData(dt,ct),options:ht&&{...ht},plugins:pt}),reforwardRef(rt,yt.current))},St=()=>{reforwardRef(rt,null),yt.current&&(yt.current.destroy(),yt.current=null)};return reactExports.useEffect(()=>{!lt&&yt.current&&ht&&setOptions(yt.current,ht)},[lt,ht]),reactExports.useEffect(()=>{!lt&&yt.current&&setLabels(yt.current.config.data,dt.labels)},[lt,dt.labels]),reactExports.useEffect(()=>{!lt&&yt.current&&dt.datasets&&setDatasets(yt.current.config.data,dt.datasets,ct)},[lt,dt.datasets]),reactExports.useEffect(()=>{yt.current&&(lt?(St(),setTimeout(vt)):yt.current.update(mt))},[lt,ht,dt.labels,dt.datasets,mt]),reactExports.useEffect(()=>{yt.current&&(St(),setTimeout(vt))},[ut]),reactExports.useEffect(()=>(vt(),()=>St()),[]),e$2.createElement("canvas",Object.assign({ref:xt,role:"img",height:it,width:st},gt),ft)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(nt,rt){return Chart$1.register(rt),reactExports.forwardRef((it,st)=>e$2.createElement(Chart,Object.assign({},it,{ref:st,type:nt})))}const Line$1=createTypedChart("line",LineController);Chart$1.register(CategoryScale,LinearScale,PointElement,LineElement,plugin_title,plugin_tooltip,plugin_legend);const ChartBodyComposition=()=>{const nt=Recoil_index_20(inbodyListState),rt={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{axis:"x",position:"bottom",ticks:{minRotation:45,padding:5}},y:{axis:"y",display:!0,position:"left",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: kg"}},y_sub:{position:"right",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: %"}}}},st={labels:nt.map(lt=>lt.date.substring(5,10)),datasets:[{label:"골격근량",data:nt.map(lt=>lt.muscle),borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",yAxisID:"y"},{label:"체지방량",data:nt.map(lt=>lt.fat_mass),borderColor:"rgb(255, 205, 86)",backgroundColor:"rgba(255, 205, 86, 0.5)",yAxisID:"y"},{label:"체지방율",data:nt.map(lt=>lt.fat_per),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",yAxisID:"y_sub"}]};return jsxRuntimeExports.jsxs("div",{className:"px-2",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"px-4 py-1 italic font-semibold bg-white border border-gray-700 rounded-lg text-sky-300",children:"체성분 변화량"})}),jsxRuntimeExports.jsx(Line$1,{options:rt,data:st})]})};Chart$1.register(CategoryScale,LinearScale,PointElement,LineElement,plugin_title,plugin_tooltip,plugin_legend);const ChartWeight=()=>{const nt=Recoil_index_20(inbodyListState),rt={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{axis:"x",position:"bottom",ticks:{minRotation:45,padding:5}},y:{axis:"y",display:!0,position:"left",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: kg"}}}},st={labels:nt.map(lt=>lt.date.substring(5,10)),datasets:[{label:"체중",data:nt.map(lt=>lt.weight),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",yAxisID:"y"}]};return jsxRuntimeExports.jsxs("div",{className:"px-2 py-8 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"px-4 py-1 italic font-semibold bg-white border border-gray-700 rounded-lg text-rose-300",children:"체중 변화량"})}),jsxRuntimeExports.jsx(Line$1,{options:rt,data:st})]})},Graph=()=>jsxRuntimeExports.jsx("div",{className:"bg-[#C9DECF]/30 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-10",children:[jsxRuntimeExports.jsx(ChartWeight,{}),jsxRuntimeExports.jsx(ChartBodyComposition,{})]})}),userTrainingState=Recoil_index_8({key:"userTrainingState",default:[]}),userFoodState=Recoil_index_8({key:"userFoodState",default:[]});function FaDumbbell(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32V224v64V448c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V384H64c-17.7 0-32-14.3-32-32V288c-17.7 0-32-14.3-32-32s14.3-32 32-32V160c0-17.7 14.3-32 32-32H96V64zm448 0v64h32c17.7 0 32 14.3 32 32v64c17.7 0 32 14.3 32 32s-14.3 32-32 32v64c0 17.7-14.3 32-32 32H544v64c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32V288 224 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32zM416 224v64H224V224H416z"},child:[]}]})(nt)}function GiMeat(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.156 98.063c-4.05-.11-8.044 1.117-11.656 4-1.542 1.23-3.1 2.884-4.47 4.75-22.9 31.22-48.278 57.33-75.186 81-8.76 14.692 10.695 44.406 25.594 44.406 34.144-12.928 69.617-22.516 106.75-26.314 42.628-4.358 17.688-68.134-26.25-45.47 30.3-22.666 7.094-61.79-14.782-62.374zM310.47 108.156c-6.167-.108-12.215 1.172-17.595 4.28-1.576.912-3.042 1.948-4.406 3.095-.038-.056-.09-.13-.126-.186-79.912 66.402-116.334 73.468-158.22 86.844-6.886 2.2-12.27 7.18-16.5 15.5s-6.892 19.843-7.343 33.125c-.9 26.563 6.935 59.927 23.72 89.03 16.72 28.99 43.37 53.946 67.656 67.126 12.143 6.59 23.682 10.167 32.375 10.436 8.694.27 13.915-1.95 17.782-7.375 30.986-43.45 89.343-69.052 156.157-92.25-.005-.006.003-.023 0-.03 2.012-.663 3.967-1.51 5.842-2.594 8.2-4.738 13.535-12.897 16.282-22.125 2.747-9.227 3.22-19.75 2.03-31.25-.953-9.233-3.033-19.127-6.155-29.374-5.916 1.366-11.628 3.157-17.908 5.47 2.835 9.25 4.69 17.978 5.5 25.81 1.007 9.74.403 18.06-1.375 24.033-1.777 5.972-4.412 9.338-7.718 11.25-3.308 1.91-7.543 2.505-13.595 1.06-6.052-1.443-13.55-5.07-21.47-10.81-15.838-11.482-33.334-31.223-47.624-56-14.29-24.78-22.61-49.838-24.624-69.314-1.006-9.738-.403-18.027 1.375-24 1.78-5.973 4.414-9.37 7.72-11.28 1.653-.957 3.52-1.58 5.75-1.782.557-.05 1.147-.067 1.75-.063 1.81.014 3.824.272 6.094.814 6.05 1.444 13.518 5.04 21.437 10.78 8.218 5.957 16.884 14.166 25.314 24.126 5.07-4.055 9.34-8.25 13.406-13.188-8.97-10.46-18.366-19.26-27.75-26.062-9.354-6.78-18.733-11.61-28.094-13.844-2.34-.558-4.674-.935-7.03-1.125-.885-.07-1.776-.108-2.657-.124zm7.967 34.188c-.438.024-.86.063-1.28.125-17.327 2.54-14.97 36.035 5.03 74.56 20 38.528 50.52 67.576 67.844 65.032 5.995-.88 9.263-5.687 10.658-12.875-1.67 2.187-3.847 3.484-6.72 3.907-15.316 2.248-42.316-23.093-60-57.156-17.682-34.064-19.254-63.91-3.937-66.157 3.638-.53 7.69.417 12.345 2.782-8.68-6.8-17.353-10.583-23.938-10.218zM102 325.124c-16.555 1.844-35.304 3.26-57.063 4.376-49.128 2.523-25.555 71.576 30.094 52.22-49.365 29.9 3.86 86.927 26.97 46.75 10.362-18.016 21.88-33.79 34.375-47.814-8.42-9.644-16.078-20.224-22.563-31.47-4.52-7.835-8.462-15.898-11.812-24.06z"},child:[]}]})(nt)}function GiMuscleUp(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M165.906 18.688C15.593 59.28-42.187 198.55 92.72 245.375h-1.095c.635.086 1.274.186 1.906.28 8.985 3.077 18.83 5.733 29.532 7.94C173.36 273.35 209.74 321.22 212.69 368c-33.514 23.096-59.47 62.844-59.47 62.844L179.5 469.53 138.28 493h81.97c-40.425-40.435-11.76-85.906 36.125-85.906 48.54 0 73.945 48.112 36.156 85.906h81.126l-40.375-23.47 26.283-38.686s-26.376-40.4-60.282-63.406c3.204-46.602 39.5-94.167 89.595-113.844 10.706-2.207 20.546-4.86 29.53-7.938.633-.095 1.273-.195 1.908-.28h-1.125c134.927-46.82 77.163-186.094-73.157-226.69-40.722 39.37 6.54 101.683 43.626 56.877 36.9 69.08 8.603 127.587-72.28 83.406-11.88 24.492-34.213 41.374-60.688 41.374-26.703 0-49.168-17.167-60.97-42-81.774 45.38-110.512-13.372-73.437-82.78 37.09 44.805 84.35-17.508 43.626-56.876zm90.79 35.92c-27.388 0-51.33 27.556-51.33 63.61 0 36.056 23.942 62.995 51.33 62.995 27.387 0 51.327-26.94 51.327-62.994 0-36.058-23.94-63.61-51.328-63.61z"},child:[]}]})(nt)}const Description=({Title:nt,size:rt,subTitle:it,subsize:st,font:lt})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:`text-${rt} font-${lt} z-10`,children:nt}),jsxRuntimeExports.jsx("p",{className:`text-${st} text-gray-500 z-10`,children:it})]});Description.propTypes={Title:PropTypes.string,size:PropTypes.string,subTitle:PropTypes.string,subsize:PropTypes.string,font:PropTypes.string};Description.defaultProps={Title:"이전 운동 기록을 선택해주세요.",size:"base",subTitle:"최근 수행 순",subsize:"sm",font:"semibold"};const TrainingSummary=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userTrainingState),st=()=>localStorage.getItem(`date_${nt.join("-")}`),lt=()=>it.length,ct=()=>it.reduce((dt,ht)=>dt+ht.sets.reduce((pt,ft)=>pt+ft.count*ft.kg,0),0),ut=()=>{let dt=!0;return it.forEach(ht=>{ht.sets.forEach(pt=>{if(pt.is_finished===!1){dt=!1;return}})}),dt};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"relative px-4 pt-2 pb-4 border border-teal-700 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsxs("p",{className:"pb-2",children:[nt[1],"월 ",nt[2],"일 ",rt," - 운동요약"]}),ut()?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-gray-100 border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BsAlarm,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${st()?st():50}분`,subTitle:"운동 시간"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(FaDumbbell,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${lt()}개`,subTitle:"운동 개수"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(GiMuscleUp,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ct()}kg`,subTitle:"전체 볼륨"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center m-4",children:[jsxRuntimeExports.jsx(ExclamationTriangleIcon$1,{className:"w-6 h-6 text-red-500"}),jsxRuntimeExports.jsx(Description,{Title:"아직 완료되지 않은 운동입니다.",size:"sm",subTitle:"정보 확인을 위해 운동을 완료해주세요!",subsize:"xs",font:"medium"})]})]})})};function BiSolidBowlRice(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 10a3.58 3.58 0 0 0-1.8-3 3.66 3.66 0 0 0-3.63-3.13 3.86 3.86 0 0 0-1 .13 3.7 3.7 0 0 0-5.11 0 3.86 3.86 0 0 0-1-.13A3.66 3.66 0 0 0 4.81 7 3.58 3.58 0 0 0 3 10a1 1 0 0 0-1 1 10 10 0 0 0 5 8.66V21a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.34A10 10 0 0 0 22 11a1 1 0 0 0-1-1zM5 10a1.59 1.59 0 0 1 1.11-1.39l.83-.26-.16-.85a1.64 1.64 0 0 1 1.66-1.62 1.78 1.78 0 0 1 .83.2l.81.45.5-.77a1.71 1.71 0 0 1 2.84 0l.5.77.81-.45a1.78 1.78 0 0 1 .83-.2 1.65 1.65 0 0 1 1.67 1.6l-.16.85.82.28A1.59 1.59 0 0 1 19 10z"},child:[]}]})(nt)}function BiSolidCheese(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.16 2a1 1 0 0 0-.66.13l-12 7a.64.64 0 0 0-.13.1l-.1.08a1.17 1.17 0 0 0-.17.26.84.84 0 0 0-.1.43v10a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V10a8.08 8.08 0 0 0-6.84-8zm0 2.05A6.07 6.07 0 0 1 19.93 9H6.7zM6.5 18A1.5 1.5 0 1 1 8 16.5 1.5 1.5 0 0 1 6.5 18zm5-3a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5zm5.5 3a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"},child:[]}]})(nt)}const FoodSummary=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userFoodState),st=it.reduce((dt,ht)=>dt+ht.food.calorie*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),lt=it.reduce((dt,ht)=>dt+ht.food.carbohydrate*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),ct=it.reduce((dt,ht)=>dt+ht.food.protein*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),ut=it.reduce((dt,ht)=>dt+ht.food.lipid*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"relative px-4 pt-2 pb-4 border border-teal-700 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsxs("p",{className:"pb-2",children:[nt[1],"월 ",nt[2],"일 ",rt," - 식단요약"," ",jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["총 ",st,"kcal"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-gray-100 border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BiSolidBowlRice,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:lt+"g",subTitle:"탄수화물"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(GiMeat,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ct+"g",subTitle:"단백질"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BiSolidCheese,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ut+"g",subTitle:"지방"})]})]})]})})},DiaryPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),[lt,ct]=Recoil_index_22(userTrainingState),[ut,dt]=Recoil_index_22(userFoodState),ht=()=>jsxRuntimeExports.jsx(Link,{to:`/diary/training/${it[0]}/${it[1]}/${it[2]}`,children:lt.length?jsxRuntimeExports.jsx(TrainingSummary,{}):jsxRuntimeExports.jsx(Button,{btnCss:"p-2 w-full text-white text-lg border bg-teal-700 rounded-lg",buttonName:"운동 계획하기"})}),pt=async()=>{await axios.get(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(gt=>{ct(gt.data.user_training_list)}).catch(gt=>{console.log(gt)})},ft=()=>jsxRuntimeExports.jsx(Link,{to:`/diary/food/${it[0]}/${it[1]}/${it[2]}`,children:ut.length?jsxRuntimeExports.jsx(FoodSummary,{}):jsxRuntimeExports.jsx(Button,{btnCss:"p-2 w-full text-white text-lg border bg-teal-700 rounded-lg",buttonName:"식단 관리하기"})}),mt=async()=>{await axios.get(`${nt}api/management/food/list/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(gt=>{dt(gt.data)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{pt(),mt()},[it]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarMonth,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`my-4 ${st==="right"?"hidden":""}`}),jsxRuntimeExports.jsxs("div",{className:`flex flex-col gap-4 m-4 ${st==="right"?"hidden":""}`,children:[ht(),ft()]})]})},ChallengeCard=({challengeId:nt,challengeTitle:rt,challengeSummary:it,challengeThumbnail:st})=>jsxRuntimeExports.jsx("div",{className:"justify-self-center",children:jsxRuntimeExports.jsx(Link,{to:`/challenge/${nt}`,children:jsxRuntimeExports.jsx("div",{className:"card -z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-40 mt-3 h-52",children:jsxRuntimeExports.jsx("img",{className:"w-full h-full border-2 rounded-lg",src:st,alt:"썸네일"})}),jsxRuntimeExports.jsxs("div",{className:"w-40 mt-1",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold text-left truncate",children:rt}),jsxRuntimeExports.jsx("p",{className:"text-base text-left text-gray-400 truncate",children:it})]})]})})})});ChallengeCard.propTypes={challengeId:PropTypes.number,challengeTitle:PropTypes.string,challengeSummary:PropTypes.string,challengeThumbnail:PropTypes.string,challengeStartDate:PropTypes.string,challengeEndDate:PropTypes.string};const ChallengeParticipating=()=>{const[nt,rt]=reactExports.useState([]),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=async()=>{const ut=(await axios.get(`${it}api/challenge/list/${st.info.userId}`)).data;rt(ut)};reactExports.useEffect(()=>{lt()},[]);const ct=nt.map(ut=>jsxRuntimeExports.jsx(ChallengeCard,{challengeId:ut.challenge_id,challengeTitle:ut.title,challengeSummary:ut.summary,challengeThumbnail:ut.thumbnail,challengeStartDate:ut.start_date,challengeEndDate:ut.end_date},ut.challenge_id));return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 mb-16",children:ct.length?ct:st.info.role==="ROLE_ADMIN"?null:jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-3 text-center",children:"참여중인 챌린지가 없습니다."})}),jsxRuntimeExports.jsx("div",{className:st.info.role==="ROLE_ADMIN"?"fixed flex justify-center items-center bottom-20 right-6 w-16 h-16 border-2 rounded-full bg-teal-700":"hidden",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:"/challenge/registration",children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-8 h-8 text-white"})})})})]})},ChallengeCanParticipate=()=>{const[nt,rt]=reactExports.useState([]),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=async()=>{const ut=(await axios.get(`${it}api/challenge/list/proceeding`)).data;rt(ut)};reactExports.useEffect(()=>{lt()},[]);const ct=nt.map(ut=>jsxRuntimeExports.jsx(ChallengeCard,{challengeId:ut.challenge_id,challengeTitle:ut.title,challengeSummary:ut.summary,challengeThumbnail:ut.thumbnail,challengeStartDate:ut.start_date,challengeEndDate:ut.end_date},ut.challenge_id));return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 mb-16",children:ct.length?ct:st.info.role==="ROLE_ADMIN"?null:jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-3 text-center",children:"참여가능한 챌린지가 없습니다."})}),jsxRuntimeExports.jsx("div",{className:st.info.role==="ROLE_ADMIN"?"fixed flex justify-center items-center bottom-20 right-6 w-16 h-16 border-2 rounded-full bg-teal-700":"hidden",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:"/challenge/registration",children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-8 h-8 text-white"})})})})]})},Challenge=()=>{const nt=Recoil_index_20(toggleState);return jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"참여 가능",rightTitle:"참여 중",state:toggleState}),jsxRuntimeExports.jsx("hr",{className:"mt-4"})]}),nt==="left"?jsxRuntimeExports.jsx(ChallengeCanParticipate,{}):jsxRuntimeExports.jsx(ChallengeParticipating,{})]})},ChallengeDetailInfo=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState({}),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(userState),[ct,ut]=reactExports.useState(null),dt=async()=>{const vt=(await axios.get(`${st}api/challenge/detail/${nt}`)).data;it(vt)},ht=async()=>{await axios.get(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(vt=>{ut(vt.data)})};let pt=""+rt.start_date,ft=""+rt.end_date;const mt=pt.slice(0,10),gt=ft.slice(0,10),xt=async vt=>{vt.preventDefault(),await axios.post(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(()=>{ut(!0)})},yt=async vt=>{vt.preventDefault(),await axios.delete(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(()=>{ut(!1)})};return reactExports.useEffect(()=>{dt(),ht()},[rt]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mt-2 mb-2 ml-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx(CalendarIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsxs("p",{className:"text-lg",children:[mt," ~ ",gt]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx(UsersIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsxs("p",{className:"text-lg",children:[rt.entry,"명 참여"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(FlagIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsx("p",{className:"text-lg truncate",children:rt.summary})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:ct?jsxRuntimeExports.jsx("button",{onClick:yt,className:"w-10/12 p-2 mt-3 mb-4 text-center text-teal-700 bg-white border-2 border-teal-700 rounded-full",children:"참여중"}):jsxRuntimeExports.jsx("button",{onClick:xt,className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"참여하기"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"m-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl",children:"상세정보"}),rt.content]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:ct?jsxRuntimeExports.jsx(Link,{to:"/challenge/ongoing",className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"챌린지 시작하기"}):null})})]})},ChallengeComment=({content:nt,nickname:rt,commentId:it,userId:st,profileImage:lt})=>{const ct=Recoil_index_20(baseUrlState),ut=Recoil_index_20(userState),dt=async ht=>{ht.preventDefault(),await axios.delete(`${ct}api/comment/${it}`)};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mx-4 my-2 bg-gray-100 border-2 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("img",{src:lt||"/challenge/기본이미지.jpg",alt:"...",className:"w-10 h-10 m-1 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:rt}),jsxRuntimeExports.jsx("p",{children:nt})]})]}),st===ut.info.userId?jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{onClick:dt,children:jsxRuntimeExports.jsx(TrashIcon$1,{className:"w-5 h-5 mr-2"})})}):null]})})};ChallengeComment.propTypes={nickname:PropTypes.string,content:PropTypes.string,commentId:PropTypes.number,userId:PropTypes.number,profileImage:PropTypes.string};const ChallengeDetailComment=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState([]),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(userState),[ct,ut]=reactExports.useState(""),dt=async()=>{const mt=(await axios.get(`${st}api/comment/${nt}`)).data;it(mt)};reactExports.useEffect(()=>{dt()},[rt]);const ht=rt.map(mt=>jsxRuntimeExports.jsx(ChallengeComment,{content:mt.content,nickname:mt.nickname,commentId:mt.comment_id,userId:mt.user_id,profileImage:mt.profile_image},mt.comment_id)),pt=mt=>{ut(mt.currentTarget.value)},ft=async mt=>{mt.preventDefault(),await axios.post(`${st}api/comment/${nt}`,{content:ct,user_id:lt.info.userId}).then(()=>{ut("")})};return jsxRuntimeExports.jsxs("div",{children:[rt.length?jsxRuntimeExports.jsx("div",{children:ht}):jsxRuntimeExports.jsx("div",{className:"mt-10 text-center text-gray-500",children:"등록된 댓글이 없습니다."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"fixed w-screen p-4 bottom-11",children:jsxRuntimeExports.jsxs("form",{onSubmit:ft,className:"flex",children:[jsxRuntimeExports.jsx("input",{className:"pl-2 border rounded-lg border-slate-950",type:"text",value:ct,onChange:pt,placeholder:"댓글을 입력해주세요."}),jsxRuntimeExports.jsx("button",{className:"w-20 h-10 text-white bg-teal-700 border rounded-lg",children:"입력"})]})})]})},ChallengeDetail=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState("info"),[st,lt]=reactExports.useState({}),ct=Recoil_index_20(baseUrlState),ut=Recoil_index_24(modalState),dt=()=>{ut({type:"challengeMenu",data:st})},ht=()=>{it("info")},pt=()=>{it("comment")},ft=async()=>{const mt=(await axios.get(`${ct}api/challenge/detail/${nt}`)).data;lt(mt)};return reactExports.useEffect(()=>{ft()},[]),jsxRuntimeExports.jsxs("div",{className:"mb-16",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex justify-between w-full",children:[jsxRuntimeExports.jsx(BackButton,{}),jsxRuntimeExports.jsx("button",{onClick:dt,children:jsxRuntimeExports.jsx(EllipsisVerticalIcon$1,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:st.title}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("img",{src:st.image,alt:"...",className:"h-40 mx-auto"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex h-10",children:[jsxRuntimeExports.jsx("div",{className:`${rt==="info"?"font-bold border-b-teal-700":null} mr-1 ml-4 text-xl flex items-center border-2 border-white`,onClick:()=>ht(),children:"정보"}),jsxRuntimeExports.jsx("div",{className:`${rt==="comment"?"font-bold border-b-teal-700":"text-gray-600"} text-xl ml-1 flex items-center border-2 border-white`,onClick:()=>pt(),children:"댓글"})]})]}),jsxRuntimeExports.jsx("hr",{}),rt==="info"?jsxRuntimeExports.jsx(ChallengeDetailInfo,{}):jsxRuntimeExports.jsx(ChallengeDetailComment,{})]})},CalendarWeek=()=>{const[nt,rt]=Recoil_index_22(selectedDateState),[it,st]=reactExports.useState([]),lt=["일","월","화","수","목","금","토"],ct=Recoil_index_24(selectedDayState),ut=useNavigate();reactExports.useEffect(()=>{dt();const gt=new Date(nt[0],nt[1]-1,nt[2]);ct(lt[gt.getDay()])},[nt]);const dt=()=>{const gt=new Date(nt[0],nt[1]-1,nt[2]);gt.setDate(nt[2]-gt.getDay());const xt=[...Array(7)].map((yt,vt)=>{const St=new Date(gt);return St.setDate(gt.getDate()+vt),St});st(xt)},ht=()=>{rt(gt=>{const xt=new Date(gt[0],gt[1]-1,gt[2]);return xt.setDate(gt[2]-7),mt(xt),[xt.getFullYear(),xt.getMonth()+1,xt.getDate()]})},pt=()=>{rt(gt=>{const xt=new Date(gt[0],gt[1]-1,gt[2]);return xt.setDate(gt[2]+7),mt(xt),[xt.getFullYear(),xt.getMonth()+1,xt.getDate()]})},ft=()=>{const gt=new Date;mt(gt),rt([gt.getFullYear(),gt.getMonth()+1,gt.getDate()])},mt=gt=>{const xt=gt.getFullYear(),yt=gt.getMonth()+1,vt=gt.getDate();ut(window.location.href.includes("training")?`/diary/training/${xt}/${yt}/${vt}`:`/diary/food/${xt}/${yt}/${vt}`)};return jsxRuntimeExports.jsxs("div",{className:"max-w-screen-sm mx-auto mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary",children:jsxRuntimeExports.jsx(CalendarDaysIcon$3,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("span",{className:"mx-auto font-bold text-gray-800",children:[nt[1],"월 ",nt[2],"일"]}),jsxRuntimeExports.jsx(ArrowPathIcon$1,{className:"w-6 h-6",onClick:ft})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mx-4",children:[jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 ",onClick:ht}),jsxRuntimeExports.jsxs("table",{className:"w-full mx-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-red-500",children:"일"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"월"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"화"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"수"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"목"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"금"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-blue-500",children:"토"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx("tr",{children:it.map((gt,xt)=>jsxRuntimeExports.jsx("td",{onClick:()=>{mt(gt),rt([gt.getFullYear(),gt.getMonth()+1,gt.getDate()])},className:`
                    text-center 
                    ${gt.getMonth()!==nt[1]-1?"text-gray-300":""} 
                    `,children:jsxRuntimeExports.jsx("div",{className:`
                    flex justify-center items-center
                    w-8 h-8 mx-auto
                    ${gt.getDate()===nt[2]?"bg-teal-700 rounded-full text-white":""}
                  `,children:gt.getDate()})},xt))})})]}),jsxRuntimeExports.jsx(ChevronRightIcon$3,{className:"w-6 h-6",onClick:pt})]})]})},isRestState=Recoil_index_8({key:"isRestState",default:!1}),Rest=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_24(isRestState),lt=()=>{(async()=>{await axios.delete(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{console.log("휴식 해제 성공"),st(!1)}).catch(ut=>{console.log(ut)})})()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 pt-16",children:[jsxRuntimeExports.jsx("img",{src:"/diary/rest.jpg",alt:"img",className:"w-1/2 border rounded-full animate-bounce"}),jsxRuntimeExports.jsx("p",{children:"오늘은 운동 쉬는 날!"}),jsxRuntimeExports.jsx("p",{onClick:lt,className:"text-gray-500 underline ",children:"휴식 취소"})]})},Plan=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_24(isRestState),st=Recoil_index_20(selectedDateState),lt=Recoil_index_20(selectedDayState),ct=()=>{(async()=>{await axios.post(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(dt=>{console.log("휴식 등록 성공"),it(!0)}).catch(dt=>{console.log(dt)})})()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-white rounded-xl",children:[jsxRuntimeExports.jsx(Description,{Title:`${st[1]}월 ${st[2]}일 ${lt}`,subTitle:"운동을 직접 계획해보세요!"}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"불러오기"})})}),jsxRuntimeExports.jsx("div",{className:"p-1 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"운동 선택하기"})})})]})})]}),jsxRuntimeExports.jsx("div",{className:"relative p-4 bg-white border-white rounded-xl",children:jsxRuntimeExports.jsxs(Link,{to:"/diary/training/myroutine",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsx(Description,{Title:"나만의 루틴",subTitle:"루틴을 선택해주세요."})]})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{onClick:ct,className:"text-base text-gray-500 underline",children:"오늘은 쉴래요! 😥"})})]})},TrainingNoData=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=Recoil_index_22(isRestState),ct=async()=>{await axios.get(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{lt(ut.data)}).catch(ut=>{console.log(ut)})};return reactExports.useEffect(()=>{ct()},[it]),jsxRuntimeExports.jsx("div",{className:"pb-80",children:st?jsxRuntimeExports.jsx(Rest,{}):jsxRuntimeExports.jsx(Plan,{})})},TrainingSetBox=({set:nt,setIdx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(selectedDateState),lt=Recoil_index_24(userTrainingState),ct=Recoil_index_20(userState),[ut,dt]=reactExports.useState(nt.kg),[ht,pt]=reactExports.useState(nt.count),[ft,mt]=reactExports.useState(nt.is_finished),[gt,xt]=reactExports.useState(!0),yt=It=>{dt(It.target.value)},vt=It=>{pt(It.target.value)},St=()=>{const It=new Date;return It.setHours(It.getHours()+9),It.toJSON()<new Date(st[0],st[1]-1,st[2],9).toJSON()},Et=async()=>{await axios.put(`${it}api/management/training/user_training/${nt.user_training_id}`).then(It=>{mt(!ft)}).catch(It=>{console.log(It)})},wt=async It=>{It.preventDefault(),await axios.put(`${it}api/management/training/set`,{user_training_id:nt.user_training_id,kg:ut,count:nt.count}).then(At=>{xt(!gt)}).catch(At=>{console.log(At)})},Rt=async It=>{It.preventDefault(),await axios.put(`${it}api/management/training/set`,{user_training_id:nt.user_training_id,kg:nt.kg,count:ht}).then(At=>{xt(!gt)}).catch(At=>{console.log(At)})},Tt=async()=>{await axios.get(`${it}api/management/training?user_id=${ct.info.userId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(It=>{lt(It.data.user_training_list)}).catch(It=>{console.log(It)})};return reactExports.useEffect(()=>{Tt()},[gt,ft]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("td",{children:rt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:wt,onBlur:wt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ut,onChange:yt})})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:Rt,onBlur:Rt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ht,onChange:vt})})}),jsxRuntimeExports.jsx("td",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-5 h-5 mt-1 accent-teal-600",onChange:()=>Et(),checked:ft,disabled:St()})})]})};TrainingSetBox.propTypes={set:PropTypes.object,setIdx:PropTypes.number};const TrainingDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=Recoil_index_20(selectedDateState),ct=Recoil_index_24(userTrainingState),[ut,dt]=reactExports.useState(!0),ht=()=>nt.sets.reduce((St,Et)=>St+Et.count*Et.kg,0),pt=new Date(lt[0],lt[1]-1,lt[2]),ft=9*60*60*1e3,mt=new Date(pt.getTime()+ft).toISOString().split("T")[0],gt=async()=>{await axios.delete(`${it}api/management/training`,{data:{user_id:st.info.userId,training_id:nt.training_id,date:mt}}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},xt=async()=>{await axios.delete(`${it}api/management/training/set`,{data:{user_id:st.info.userId,training_id:nt.training_id,date:mt}}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},yt=async()=>{await axios.post(`${it}api/management/training/set`,{user_id:st.info.userId,training_id:nt.training_id,date:mt}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},vt=async()=>{await axios.get(`${it}api/management/training?user_id=${st.info.userId}&year=${lt[0]}&month=${lt[1]}&day=${lt[2]}`).then(St=>{ct(St.data.user_training_list)}).catch(St=>{console.log(St)})};return reactExports.useEffect(()=>{vt()},[ut]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:rt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:nt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:nt.name})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center me-2",onClick:()=>gt(),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[ht(),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400 ",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"}),jsxRuntimeExports.jsx("th",{children:"완료"})]})}),jsxRuntimeExports.jsx("tbody",{children:nt.sets.map((St,Et)=>jsxRuntimeExports.jsx("tr",{className:"text-center",children:jsxRuntimeExports.jsx(TrainingSetBox,{set:St,setIdx:Et})},Et))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-4 pb-2 text-center divide-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2",onClick:()=>xt(),children:[jsxRuntimeExports.jsx(MinusIcon$1,{className:"w-6 h-6"}),"세트 삭제"]}),jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2 text-teal-700",onClick:()=>yt(),children:[jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"}),"세트 추가"]})]})]})};TrainingDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const TrainingBottomBtn=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),[it,st]=Recoil_index_22(selectedDateState),lt=Recoil_index_20(userTrainingState),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(0),[pt,ft]=reactExports.useState(0),[mt,gt]=reactExports.useState(0),[xt,yt]=reactExports.useState(!!localStorage.getItem(`date_${it.join("-")}_finish`)),vt=()=>{const It=new Date;return It.getFullYear()===it[0]&&It.getMonth()===it[1]-1&&It.getDate()===it[2]},St=()=>{const It=new Date;return It.setHours(It.getHours()+9),It.toJSON()<new Date(it[0],it[1]-1,it[2],9).toJSON()},Et=()=>{ut(It=>!It)},wt=()=>{const It=Math.floor(dt/6e4);localStorage.setItem(`date_${it.join("-")}`,It===0?50:It),localStorage.setItem(`date_${it.join("-")}_finish`,!0),st([it[0],it[1],it[2]]),ut(!ct),yt(!xt)},Rt=()=>{console.log("localstorage - finish 삭제"),localStorage.removeItem(`date_${it.join("-")}_finish`),st([it[0],it[1],it[2]]),yt(!1)},Tt=async()=>{await axios.post(`${nt}api/management/routine/addroutine`,{userId:rt.info.userId,title:`${it[0]}년 ${it[1]}월 ${it[2]}일`}).then(It=>{axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(At=>{const Dt=At.data[At.data.length-1].routineId;axios.post(`${nt}api/management/routine/add?routine_id=${Dt}`,lt).then(jt=>{}).catch(jt=>{console.log(jt)})}).catch(At=>{console.log(At)})}).catch(It=>{console.log(It)})};return reactExports.useEffect(()=>{let It;return ct?It=setInterval(()=>{ht(At=>At+1e3)},1e3):clearInterval(It),()=>clearInterval(It)},[ct]),reactExports.useEffect(()=>{const It=Math.floor(dt/6e4),At=Math.floor(dt%6e4/1e3);ft(It),At<10?gt(At.toString().padStart(2,"0")):gt(At)},[dt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!vt()&&!St()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Button,{onClick:Rt,buttonName:"운동 편집"})}),jsxRuntimeExports.jsx("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Button,{btnCss:"text-sm",buttonName:`${it[1]}월 ${it[2]}일의 운동 완료`,onClick:wt})})]}),vt()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:[xt===!1&&ct===!1&&jsxRuntimeExports.jsxs("div",{className:"flex justify-center text-sm divide-x-2",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-1",buttonName:"운동추가"})}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-1",buttonName:"불러오기"})})]}),xt===!1&&ct===!0&&jsxRuntimeExports.jsx(Button,{buttonName:`${pt} : ${mt}`}),xt===!0&&jsxRuntimeExports.jsx(Button,{onClick:Rt,buttonName:"운동 편집"})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:[xt===!1&&ct===!1&&jsxRuntimeExports.jsx(Button,{onClick:Et,buttonName:"운동 시작"}),xt===!1&&ct===!0&&jsxRuntimeExports.jsx(Button,{onClick:wt,buttonName:"운동 완료"}),xt===!0&&jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx(Button,{buttonName:"루틴 저장",onClick:Tt})})]})]}),St()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"운동추가"})})}),jsxRuntimeExports.jsx("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"불러오기"})})})]})]})},TrainingData=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(selectedDayState),lt=Recoil_index_20(userTrainingState),[ct,ut]=reactExports.useState(!!localStorage.getItem(`date_${it.join("-")}_finish`)),dt=()=>{const gt=new Date;return gt.getFullYear()===it[0]&&gt.getMonth()===it[1]-1&&gt.getDate()===it[2]},ht=()=>localStorage.getItem(`date_${it.join("-")}`),pt=()=>lt.length,ft=()=>lt.reduce((gt,xt)=>gt+xt.sets.reduce((yt,vt)=>yt+vt.count*vt.kg,0),0),mt=async()=>{await axios.post(`${nt}api/management/routine/addroutine`,{userId:rt.info.userId,title:`${it[0]}년 ${it[1]}월 ${it[2]}일`}).then(gt=>{axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(xt=>{const yt=xt.data[xt.data.length-1].routineId;axios.post(`${nt}api/management/routine/add?routine_id=${yt}`,lt).then(vt=>{}).catch(vt=>{console.log(vt)})}).catch(xt=>{console.log(xt)})}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ut(!!localStorage.getItem(`date_${it.join("-")}_finish`))},[it]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ct&&jsxRuntimeExports.jsxs("div",{className:`flex flex-col gap-2 pt-2 mx-4 mb-32 ${lt.length===1?"pb-32":""}`,children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:[it[1],"월 ",it[2],"일 ",st," - 운동"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-white border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#E9E1D4]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BsAlarm,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ht()?ht():50}분`,subTitle:"운동 시간"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F5DDAD]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(FaDumbbell,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${pt()}개`,subTitle:"운동 개수"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F1BCAE]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(GiMuscleUp,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ft()}kg`,subTitle:"전체 볼륨"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[lt.map((gt,xt)=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 bg-white rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between",children:jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:xt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:gt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:gt.name})]})]})}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[gt.sets.reduce((yt,vt)=>yt+vt.count*vt.kg,0),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"}),jsxRuntimeExports.jsx("th",{children:"완료"})]})}),jsxRuntimeExports.jsx("tbody",{children:gt.sets.map((yt,vt)=>jsxRuntimeExports.jsxs("tr",{className:"text-center",children:[jsxRuntimeExports.jsx("td",{children:vt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("p",{className:"w-16 mx-auto font-semibold",children:yt.kg})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("p",{className:"w-16 mx-auto font-semibold",children:yt.count})}),jsxRuntimeExports.jsx("td",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-5 h-5 mt-1 accent-teal-600",checked:yt.is_finished,onChange:()=>{}})})]},vt))})]})]},xt)),jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx("div",{className:"pt-2 text-center text-gray-500 underline underline-offset-4",onClick:mt,children:"루틴 저장"})})]}),jsxRuntimeExports.jsx("div",{className:"mb-4"})]}),!ct&&jsxRuntimeExports.jsxs("div",{className:`flex flex-col gap-2 pt-2 mx-4 mb-32 ${lt.length===1?"pb-28":""}`,children:[jsxRuntimeExports.jsxs("div",{className:`flex justify-between ${dt()?"":"opacity-0"}`,onClick:()=>console.log("갤럭시 와치 데이터 연동"),children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"✅Galaxy Watch"}),jsxRuntimeExports.jsx(Button,{btnCss:"w-1/5 text-white bg-teal-700 rounded",buttonName:"전송"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between px-4 py-2 bg-white rounded-lg",children:[jsxRuntimeExports.jsx("p",{children:"전체 볼륨"}),jsxRuntimeExports.jsx("p",{children:ft()+" kg"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:lt.map((gt,xt)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white rounded-lg",children:jsxRuntimeExports.jsx(TrainingDetailBox,{data:gt,idx:xt})},xt))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-2 mb-4 text-center divide-x-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:"운동추가"}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:"불러오기"})]})]}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px] border-t",children:jsxRuntimeExports.jsx(TrainingBottomBtn,{})})]})},DiaryTrainingPage$1=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),[lt,ct]=Recoil_index_22(userTrainingState),ut=async()=>{await axios.get(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(dt=>{ct(dt.data.user_training_list)}).catch(dt=>{console.log(dt)})};return reactExports.useEffect(()=>{ut()},[it]),jsxRuntimeExports.jsxs("div",{className:"bg-[#C9DECF]/30",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-20 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarWeek,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`mt-4 ${st==="right"?"hidden":""}`})]}),jsxRuntimeExports.jsx("div",{className:`${st==="right"?"hidden":""}`,children:lt.length?jsxRuntimeExports.jsx(TrainingData,{}):jsxRuntimeExports.jsx(TrainingNoData,{})})]})},FoodByCategory=({category:nt,data:rt})=>jsxRuntimeExports.jsx(Link,{to:`/diary/food/${nt.substring(3)}`,children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between p-4 bg-white border-white rounded-xl",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Description,{Title:nt,subTitle:`${rt.reduce((it,st)=>it+st.food.calorie*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}kcal / ${rt.reduce((it,st)=>it+st.food.carbohydrate*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g / ${rt.reduce((it,st)=>it+st.food.protein*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g / ${rt.reduce((it,st)=>it+st.food.lipid*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g`})}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(NextButton,{})})]})});FoodByCategory.propTypes={category:PropTypes.string,data:PropTypes.array};const FoodData=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userFoodState),st=it.reduce((mt,gt)=>mt+gt.food.calorie*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),lt=it.reduce((mt,gt)=>mt+gt.food.carbohydrate*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),ct=it.reduce((mt,gt)=>mt+gt.food.protein*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),ut=it.reduce((mt,gt)=>mt+gt.food.lipid*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),dt=it.filter(mt=>mt.category==="아침"),ht=it.filter(mt=>mt.category==="점심"),pt=it.filter(mt=>mt.category==="저녁"),ft=it.filter(mt=>mt.category==="기타");return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pt-2 mx-4 mb-16",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:[nt[1],"월 ",nt[2],"일 ",rt," - 식단"]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white border-white rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 font-semibold divide-x-4",children:[jsxRuntimeExports.jsx("p",{className:"text-center",children:"총 칼로리"}),jsxRuntimeExports.jsxs("p",{className:"text-center",children:[st," kcal"]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-white border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#E9E1D4]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BiSolidBowlRice,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:lt+"g",subTitle:"탄수화물"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F5DDAD]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(GiMeat,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ct+"g",subTitle:"단백질"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F1BCAE]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BiSolidCheese,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ut+"g",subTitle:"지방"})]})]}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🍎 아침 식사",data:dt}),jsxRuntimeExports.jsx(FoodByCategory,{category:"☀️ 점심 식사",data:ht}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🌙 저녁 식사",data:pt}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🍪 기타 식사",data:ft})]})},DiaryTrainingPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),lt=Recoil_index_24(userFoodState),ct=async()=>{await axios.get(`${nt}api/management/food/list/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{lt(ut.data)}).catch(ut=>{console.log(ut)})};return reactExports.useEffect(()=>{ct()},[it]),jsxRuntimeExports.jsxs("div",{className:"bg-[#C9DECF]/30 pb-2",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarWeek,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`mt-4 ${st==="right"?"hidden":""}`})]}),jsxRuntimeExports.jsx("div",{className:`${st==="right"?"hidden":""}`,children:jsxRuntimeExports.jsx(FoodData,{})})]})};function _extends(){return _extends=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="161",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(rt,it){this._listeners===void 0&&(this._listeners={});const st=this._listeners;st[rt]===void 0&&(st[rt]=[]),st[rt].indexOf(it)===-1&&st[rt].push(it)}hasEventListener(rt,it){if(this._listeners===void 0)return!1;const st=this._listeners;return st[rt]!==void 0&&st[rt].indexOf(it)!==-1}removeEventListener(rt,it){if(this._listeners===void 0)return;const lt=this._listeners[rt];if(lt!==void 0){const ct=lt.indexOf(it);ct!==-1&&lt.splice(ct,1)}}dispatchEvent(rt){if(this._listeners===void 0)return;const st=this._listeners[rt.type];if(st!==void 0){rt.target=this;const lt=st.slice(0);for(let ct=0,ut=lt.length;ct<ut;ct++)lt[ct].call(this,rt);rt.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const nt=Math.random()*4294967295|0,rt=Math.random()*4294967295|0,it=Math.random()*4294967295|0,st=Math.random()*4294967295|0;return(_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]+"-"+_lut[rt&255]+_lut[rt>>8&255]+"-"+_lut[rt>>16&15|64]+_lut[rt>>24&255]+"-"+_lut[it&63|128]+_lut[it>>8&255]+"-"+_lut[it>>16&255]+_lut[it>>24&255]+_lut[st&255]+_lut[st>>8&255]+_lut[st>>16&255]+_lut[st>>24&255]).toLowerCase()}function clamp(nt,rt,it){return Math.max(rt,Math.min(it,nt))}function euclideanModulo(nt,rt){return(nt%rt+rt)%rt}function mapLinear(nt,rt,it,st,lt){return st+(nt-rt)*(lt-st)/(it-rt)}function inverseLerp(nt,rt,it){return nt!==rt?(it-nt)/(rt-nt):0}function lerp(nt,rt,it){return(1-it)*nt+it*rt}function damp(nt,rt,it,st){return lerp(nt,rt,1-Math.exp(-it*st))}function pingpong(nt,rt=1){return rt-Math.abs(euclideanModulo(nt,rt*2)-rt)}function smoothstep(nt,rt,it){return nt<=rt?0:nt>=it?1:(nt=(nt-rt)/(it-rt),nt*nt*(3-2*nt))}function smootherstep(nt,rt,it){return nt<=rt?0:nt>=it?1:(nt=(nt-rt)/(it-rt),nt*nt*nt*(nt*(nt*6-15)+10))}function randInt(nt,rt){return nt+Math.floor(Math.random()*(rt-nt+1))}function randFloat(nt,rt){return nt+Math.random()*(rt-nt)}function randFloatSpread(nt){return nt*(.5-Math.random())}function seededRandom(nt){nt!==void 0&&(_seed=nt);let rt=_seed+=1831565813;return rt=Math.imul(rt^rt>>>15,rt|1),rt^=rt+Math.imul(rt^rt>>>7,rt|61),((rt^rt>>>14)>>>0)/4294967296}function degToRad(nt){return nt*DEG2RAD}function radToDeg(nt){return nt*RAD2DEG}function isPowerOfTwo(nt){return(nt&nt-1)===0&&nt!==0}function ceilPowerOfTwo(nt){return Math.pow(2,Math.ceil(Math.log(nt)/Math.LN2))}function floorPowerOfTwo(nt){return Math.pow(2,Math.floor(Math.log(nt)/Math.LN2))}function setQuaternionFromProperEuler(nt,rt,it,st,lt){const ct=Math.cos,ut=Math.sin,dt=ct(it/2),ht=ut(it/2),pt=ct((rt+st)/2),ft=ut((rt+st)/2),mt=ct((rt-st)/2),gt=ut((rt-st)/2),xt=ct((st-rt)/2),yt=ut((st-rt)/2);switch(lt){case"XYX":nt.set(dt*ft,ht*mt,ht*gt,dt*pt);break;case"YZY":nt.set(ht*gt,dt*ft,ht*mt,dt*pt);break;case"ZXZ":nt.set(ht*mt,ht*gt,dt*ft,dt*pt);break;case"XZX":nt.set(dt*ft,ht*yt,ht*xt,dt*pt);break;case"YXY":nt.set(ht*xt,dt*ft,ht*yt,dt*pt);break;case"ZYZ":nt.set(ht*yt,ht*xt,dt*ft,dt*pt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+lt)}}function denormalize(nt,rt){switch(rt.constructor){case Float32Array:return nt;case Uint32Array:return nt/4294967295;case Uint16Array:return nt/65535;case Uint8Array:return nt/255;case Int32Array:return Math.max(nt/2147483647,-1);case Int16Array:return Math.max(nt/32767,-1);case Int8Array:return Math.max(nt/127,-1);default:throw new Error("Invalid component type.")}}function normalize(nt,rt){switch(rt.constructor){case Float32Array:return nt;case Uint32Array:return Math.round(nt*4294967295);case Uint16Array:return Math.round(nt*65535);case Uint8Array:return Math.round(nt*255);case Int32Array:return Math.round(nt*2147483647);case Int16Array:return Math.round(nt*32767);case Int8Array:return Math.round(nt*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(rt=0,it=0){Vector2.prototype.isVector2=!0,this.x=rt,this.y=it}get width(){return this.x}set width(rt){this.x=rt}get height(){return this.y}set height(rt){this.y=rt}set(rt,it){return this.x=rt,this.y=it,this}setScalar(rt){return this.x=rt,this.y=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y)}copy(rt){return this.x=rt.x,this.y=rt.y,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this}addScalar(rt){return this.x+=rt,this.y+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this}subScalar(rt){return this.x-=rt,this.y-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this}divide(rt){return this.x/=rt.x,this.y/=rt.y,this}divideScalar(rt){return this.multiplyScalar(1/rt)}applyMatrix3(rt){const it=this.x,st=this.y,lt=rt.elements;return this.x=lt[0]*it+lt[3]*st+lt[6],this.y=lt[1]*it+lt[4]*st+lt[7],this}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(rt){return this.x*rt.x+this.y*rt.y}cross(rt){return this.x*rt.y-this.y*rt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(rt){const it=Math.sqrt(this.lengthSq()*rt.lengthSq());if(it===0)return Math.PI/2;const st=this.dot(rt)/it;return Math.acos(clamp(st,-1,1))}distanceTo(rt){return Math.sqrt(this.distanceToSquared(rt))}distanceToSquared(rt){const it=this.x-rt.x,st=this.y-rt.y;return it*it+st*st}manhattanDistanceTo(rt){return Math.abs(this.x-rt.x)+Math.abs(this.y-rt.y)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this}equals(rt){return rt.x===this.x&&rt.y===this.y}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this}rotateAround(rt,it){const st=Math.cos(it),lt=Math.sin(it),ct=this.x-rt.x,ut=this.y-rt.y;return this.x=ct*st-ut*lt+rt.x,this.y=ct*lt+ut*st+rt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(rt,it,st,lt,ct,ut,dt,ht,pt){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],rt!==void 0&&this.set(rt,it,st,lt,ct,ut,dt,ht,pt)}set(rt,it,st,lt,ct,ut,dt,ht,pt){const ft=this.elements;return ft[0]=rt,ft[1]=lt,ft[2]=dt,ft[3]=it,ft[4]=ct,ft[5]=ht,ft[6]=st,ft[7]=ut,ft[8]=pt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(rt){const it=this.elements,st=rt.elements;return it[0]=st[0],it[1]=st[1],it[2]=st[2],it[3]=st[3],it[4]=st[4],it[5]=st[5],it[6]=st[6],it[7]=st[7],it[8]=st[8],this}extractBasis(rt,it,st){return rt.setFromMatrix3Column(this,0),it.setFromMatrix3Column(this,1),st.setFromMatrix3Column(this,2),this}setFromMatrix4(rt){const it=rt.elements;return this.set(it[0],it[4],it[8],it[1],it[5],it[9],it[2],it[6],it[10]),this}multiply(rt){return this.multiplyMatrices(this,rt)}premultiply(rt){return this.multiplyMatrices(rt,this)}multiplyMatrices(rt,it){const st=rt.elements,lt=it.elements,ct=this.elements,ut=st[0],dt=st[3],ht=st[6],pt=st[1],ft=st[4],mt=st[7],gt=st[2],xt=st[5],yt=st[8],vt=lt[0],St=lt[3],Et=lt[6],wt=lt[1],Rt=lt[4],Tt=lt[7],It=lt[2],At=lt[5],Dt=lt[8];return ct[0]=ut*vt+dt*wt+ht*It,ct[3]=ut*St+dt*Rt+ht*At,ct[6]=ut*Et+dt*Tt+ht*Dt,ct[1]=pt*vt+ft*wt+mt*It,ct[4]=pt*St+ft*Rt+mt*At,ct[7]=pt*Et+ft*Tt+mt*Dt,ct[2]=gt*vt+xt*wt+yt*It,ct[5]=gt*St+xt*Rt+yt*At,ct[8]=gt*Et+xt*Tt+yt*Dt,this}multiplyScalar(rt){const it=this.elements;return it[0]*=rt,it[3]*=rt,it[6]*=rt,it[1]*=rt,it[4]*=rt,it[7]*=rt,it[2]*=rt,it[5]*=rt,it[8]*=rt,this}determinant(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],pt=rt[7],ft=rt[8];return it*ut*ft-it*dt*pt-st*ct*ft+st*dt*ht+lt*ct*pt-lt*ut*ht}invert(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],pt=rt[7],ft=rt[8],mt=ft*ut-dt*pt,gt=dt*ht-ft*ct,xt=pt*ct-ut*ht,yt=it*mt+st*gt+lt*xt;if(yt===0)return this.set(0,0,0,0,0,0,0,0,0);const vt=1/yt;return rt[0]=mt*vt,rt[1]=(lt*pt-ft*st)*vt,rt[2]=(dt*st-lt*ut)*vt,rt[3]=gt*vt,rt[4]=(ft*it-lt*ht)*vt,rt[5]=(lt*ct-dt*it)*vt,rt[6]=xt*vt,rt[7]=(st*ht-pt*it)*vt,rt[8]=(ut*it-st*ct)*vt,this}transpose(){let rt;const it=this.elements;return rt=it[1],it[1]=it[3],it[3]=rt,rt=it[2],it[2]=it[6],it[6]=rt,rt=it[5],it[5]=it[7],it[7]=rt,this}getNormalMatrix(rt){return this.setFromMatrix4(rt).invert().transpose()}transposeIntoArray(rt){const it=this.elements;return rt[0]=it[0],rt[1]=it[3],rt[2]=it[6],rt[3]=it[1],rt[4]=it[4],rt[5]=it[7],rt[6]=it[2],rt[7]=it[5],rt[8]=it[8],this}setUvTransform(rt,it,st,lt,ct,ut,dt){const ht=Math.cos(ct),pt=Math.sin(ct);return this.set(st*ht,st*pt,-st*(ht*ut+pt*dt)+ut+rt,-lt*pt,lt*ht,-lt*(-pt*ut+ht*dt)+dt+it,0,0,1),this}scale(rt,it){return this.premultiply(_m3.makeScale(rt,it)),this}rotate(rt){return this.premultiply(_m3.makeRotation(-rt)),this}translate(rt,it){return this.premultiply(_m3.makeTranslation(rt,it)),this}makeTranslation(rt,it){return rt.isVector2?this.set(1,0,rt.x,0,1,rt.y,0,0,1):this.set(1,0,rt,0,1,it,0,0,1),this}makeRotation(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,-st,0,st,it,0,0,0,1),this}makeScale(rt,it){return this.set(rt,0,0,0,it,0,0,0,1),this}equals(rt){const it=this.elements,st=rt.elements;for(let lt=0;lt<9;lt++)if(it[lt]!==st[lt])return!1;return!0}fromArray(rt,it=0){for(let st=0;st<9;st++)this.elements[st]=rt[st+it];return this}toArray(rt=[],it=0){const st=this.elements;return rt[it]=st[0],rt[it+1]=st[1],rt[it+2]=st[2],rt[it+3]=st[3],rt[it+4]=st[4],rt[it+5]=st[5],rt[it+6]=st[6],rt[it+7]=st[7],rt[it+8]=st[8],rt}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(nt){for(let rt=nt.length-1;rt>=0;--rt)if(nt[rt]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(nt,rt){return new TYPED_ARRAYS[nt](rt)}function createElementNS(nt){return document.createElementNS("http://www.w3.org/1999/xhtml",nt)}function createCanvasElement(){const nt=createElementNS("canvas");return nt.style.display="block",nt}const _cache={};function warnOnce(nt){nt in _cache||(_cache[nt]=!0,console.warn(nt))}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,toReference:nt=>nt,fromReference:nt=>nt},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,toReference:nt=>nt.convertSRGBToLinear(),fromReference:nt=>nt.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,toReference:nt=>nt.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,toReference:nt=>nt.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(nt){if(!SUPPORTED_WORKING_COLOR_SPACES.has(nt))throw new Error(`Unsupported working color space, "${nt}".`);this._workingColorSpace=nt},convert:function(nt,rt,it){if(this.enabled===!1||rt===it||!rt||!it)return nt;const st=COLOR_SPACES[rt].toReference,lt=COLOR_SPACES[it].fromReference;return lt(st(nt))},fromWorkingColorSpace:function(nt,rt){return this.convert(nt,this._workingColorSpace,rt)},toWorkingColorSpace:function(nt,rt){return this.convert(nt,rt,this._workingColorSpace)},getPrimaries:function(nt){return COLOR_SPACES[nt].primaries},getTransfer:function(nt){return nt===NoColorSpace?LinearTransfer:COLOR_SPACES[nt].transfer}};function SRGBToLinear(nt){return nt<.04045?nt*.0773993808:Math.pow(nt*.9478672986+.0521327014,2.4)}function LinearToSRGB(nt){return nt<.0031308?nt*12.92:1.055*Math.pow(nt,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(rt){if(/^data:/i.test(rt.src)||typeof HTMLCanvasElement>"u")return rt.src;let it;if(rt instanceof HTMLCanvasElement)it=rt;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=rt.width,_canvas.height=rt.height;const st=_canvas.getContext("2d");rt instanceof ImageData?st.putImageData(rt,0,0):st.drawImage(rt,0,0,rt.width,rt.height),it=_canvas}return it.width>2048||it.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",rt),it.toDataURL("image/jpeg",.6)):it.toDataURL("image/png")}static sRGBToLinear(rt){if(typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&rt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&rt instanceof ImageBitmap){const it=createElementNS("canvas");it.width=rt.width,it.height=rt.height;const st=it.getContext("2d");st.drawImage(rt,0,0,rt.width,rt.height);const lt=st.getImageData(0,0,rt.width,rt.height),ct=lt.data;for(let ut=0;ut<ct.length;ut++)ct[ut]=SRGBToLinear(ct[ut]/255)*255;return st.putImageData(lt,0,0),it}else if(rt.data){const it=rt.data.slice(0);for(let st=0;st<it.length;st++)it instanceof Uint8Array||it instanceof Uint8ClampedArray?it[st]=Math.floor(SRGBToLinear(it[st]/255)*255):it[st]=SRGBToLinear(it[st]);return{data:it,width:rt.width,height:rt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),rt}}let _sourceId=0;class Source{constructor(rt=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=rt,this.dataReady=!0,this.version=0}set needsUpdate(rt){rt===!0&&this.version++}toJSON(rt){const it=rt===void 0||typeof rt=="string";if(!it&&rt.images[this.uuid]!==void 0)return rt.images[this.uuid];const st={uuid:this.uuid,url:""},lt=this.data;if(lt!==null){let ct;if(Array.isArray(lt)){ct=[];for(let ut=0,dt=lt.length;ut<dt;ut++)lt[ut].isDataTexture?ct.push(serializeImage(lt[ut].image)):ct.push(serializeImage(lt[ut]))}else ct=serializeImage(lt);st.url=ct}return it||(rt.images[this.uuid]=st),st}}function serializeImage(nt){return typeof HTMLImageElement<"u"&&nt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&nt instanceof ImageBitmap?ImageUtils.getDataURL(nt):nt.data?{data:Array.from(nt.data),width:nt.width,height:nt.height,type:nt.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(rt=Texture.DEFAULT_IMAGE,it=Texture.DEFAULT_MAPPING,st=ClampToEdgeWrapping,lt=ClampToEdgeWrapping,ct=LinearFilter,ut=LinearMipmapLinearFilter,dt=RGBAFormat,ht=UnsignedByteType,pt=Texture.DEFAULT_ANISOTROPY,ft=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(rt),this.mipmaps=[],this.mapping=it,this.channel=0,this.wrapS=st,this.wrapT=lt,this.magFilter=ct,this.minFilter=ut,this.anisotropy=pt,this.format=dt,this.internalFormat=null,this.type=ht,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof ft=="string"?this.colorSpace=ft:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=ft===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(rt=null){this.source.data=rt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(rt){return this.name=rt.name,this.source=rt.source,this.mipmaps=rt.mipmaps.slice(0),this.mapping=rt.mapping,this.channel=rt.channel,this.wrapS=rt.wrapS,this.wrapT=rt.wrapT,this.magFilter=rt.magFilter,this.minFilter=rt.minFilter,this.anisotropy=rt.anisotropy,this.format=rt.format,this.internalFormat=rt.internalFormat,this.type=rt.type,this.offset.copy(rt.offset),this.repeat.copy(rt.repeat),this.center.copy(rt.center),this.rotation=rt.rotation,this.matrixAutoUpdate=rt.matrixAutoUpdate,this.matrix.copy(rt.matrix),this.generateMipmaps=rt.generateMipmaps,this.premultiplyAlpha=rt.premultiplyAlpha,this.flipY=rt.flipY,this.unpackAlignment=rt.unpackAlignment,this.colorSpace=rt.colorSpace,this.userData=JSON.parse(JSON.stringify(rt.userData)),this.needsUpdate=!0,this}toJSON(rt){const it=rt===void 0||typeof rt=="string";if(!it&&rt.textures[this.uuid]!==void 0)return rt.textures[this.uuid];const st={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(rt).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(st.userData=this.userData),it||(rt.textures[this.uuid]=st),st}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(rt){if(this.mapping!==UVMapping)return rt;if(rt.applyMatrix3(this.matrix),rt.x<0||rt.x>1)switch(this.wrapS){case RepeatWrapping:rt.x=rt.x-Math.floor(rt.x);break;case ClampToEdgeWrapping:rt.x=rt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(rt.x)%2)===1?rt.x=Math.ceil(rt.x)-rt.x:rt.x=rt.x-Math.floor(rt.x);break}if(rt.y<0||rt.y>1)switch(this.wrapT){case RepeatWrapping:rt.y=rt.y-Math.floor(rt.y);break;case ClampToEdgeWrapping:rt.y=rt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(rt.y)%2)===1?rt.y=Math.ceil(rt.y)-rt.y:rt.y=rt.y-Math.floor(rt.y);break}return this.flipY&&(rt.y=1-rt.y),rt}set needsUpdate(rt){rt===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(rt){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=rt===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(rt=0,it=0,st=0,lt=1){Vector4.prototype.isVector4=!0,this.x=rt,this.y=it,this.z=st,this.w=lt}get width(){return this.z}set width(rt){this.z=rt}get height(){return this.w}set height(rt){this.w=rt}set(rt,it,st,lt){return this.x=rt,this.y=it,this.z=st,this.w=lt,this}setScalar(rt){return this.x=rt,this.y=rt,this.z=rt,this.w=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setZ(rt){return this.z=rt,this}setW(rt){return this.w=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;case 2:this.z=it;break;case 3:this.w=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(rt){return this.x=rt.x,this.y=rt.y,this.z=rt.z,this.w=rt.w!==void 0?rt.w:1,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this.z+=rt.z,this.w+=rt.w,this}addScalar(rt){return this.x+=rt,this.y+=rt,this.z+=rt,this.w+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this.z=rt.z+it.z,this.w=rt.w+it.w,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this.z+=rt.z*it,this.w+=rt.w*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this.z-=rt.z,this.w-=rt.w,this}subScalar(rt){return this.x-=rt,this.y-=rt,this.z-=rt,this.w-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this.z=rt.z-it.z,this.w=rt.w-it.w,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this.z*=rt.z,this.w*=rt.w,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this.z*=rt,this.w*=rt,this}applyMatrix4(rt){const it=this.x,st=this.y,lt=this.z,ct=this.w,ut=rt.elements;return this.x=ut[0]*it+ut[4]*st+ut[8]*lt+ut[12]*ct,this.y=ut[1]*it+ut[5]*st+ut[9]*lt+ut[13]*ct,this.z=ut[2]*it+ut[6]*st+ut[10]*lt+ut[14]*ct,this.w=ut[3]*it+ut[7]*st+ut[11]*lt+ut[15]*ct,this}divideScalar(rt){return this.multiplyScalar(1/rt)}setAxisAngleFromQuaternion(rt){this.w=2*Math.acos(rt.w);const it=Math.sqrt(1-rt.w*rt.w);return it<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=rt.x/it,this.y=rt.y/it,this.z=rt.z/it),this}setAxisAngleFromRotationMatrix(rt){let it,st,lt,ct;const ht=rt.elements,pt=ht[0],ft=ht[4],mt=ht[8],gt=ht[1],xt=ht[5],yt=ht[9],vt=ht[2],St=ht[6],Et=ht[10];if(Math.abs(ft-gt)<.01&&Math.abs(mt-vt)<.01&&Math.abs(yt-St)<.01){if(Math.abs(ft+gt)<.1&&Math.abs(mt+vt)<.1&&Math.abs(yt+St)<.1&&Math.abs(pt+xt+Et-3)<.1)return this.set(1,0,0,0),this;it=Math.PI;const Rt=(pt+1)/2,Tt=(xt+1)/2,It=(Et+1)/2,At=(ft+gt)/4,Dt=(mt+vt)/4,jt=(yt+St)/4;return Rt>Tt&&Rt>It?Rt<.01?(st=0,lt=.707106781,ct=.707106781):(st=Math.sqrt(Rt),lt=At/st,ct=Dt/st):Tt>It?Tt<.01?(st=.707106781,lt=0,ct=.707106781):(lt=Math.sqrt(Tt),st=At/lt,ct=jt/lt):It<.01?(st=.707106781,lt=.707106781,ct=0):(ct=Math.sqrt(It),st=Dt/ct,lt=jt/ct),this.set(st,lt,ct,it),this}let wt=Math.sqrt((St-yt)*(St-yt)+(mt-vt)*(mt-vt)+(gt-ft)*(gt-ft));return Math.abs(wt)<.001&&(wt=1),this.x=(St-yt)/wt,this.y=(mt-vt)/wt,this.z=(gt-ft)/wt,this.w=Math.acos((pt+xt+Et-1)/2),this}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this.z=Math.min(this.z,rt.z),this.w=Math.min(this.w,rt.w),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this.z=Math.max(this.z,rt.z),this.w=Math.max(this.w,rt.w),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this.z=Math.max(rt.z,Math.min(it.z,this.z)),this.w=Math.max(rt.w,Math.min(it.w,this.w)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this.z=Math.max(rt,Math.min(it,this.z)),this.w=Math.max(rt,Math.min(it,this.w)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(rt){return this.x*rt.x+this.y*rt.y+this.z*rt.z+this.w*rt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this.z+=(rt.z-this.z)*it,this.w+=(rt.w-this.w)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this.z=rt.z+(it.z-rt.z)*st,this.w=rt.w+(it.w-rt.w)*st,this}equals(rt){return rt.x===this.x&&rt.y===this.y&&rt.z===this.z&&rt.w===this.w}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this.z=rt[it+2],this.w=rt[it+3],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt[it+2]=this.z,rt[it+3]=this.w,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this.z=rt.getZ(it),this.w=rt.getW(it),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(rt=1,it=1,st={}){super(),this.isRenderTarget=!0,this.width=rt,this.height=it,this.depth=1,this.scissor=new Vector4(0,0,rt,it),this.scissorTest=!1,this.viewport=new Vector4(0,0,rt,it);const lt={width:rt,height:it,depth:1};st.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),st.colorSpace=st.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),st=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},st),this.texture=new Texture(lt,st.mapping,st.wrapS,st.wrapT,st.magFilter,st.minFilter,st.format,st.type,st.anisotropy,st.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=st.generateMipmaps,this.texture.internalFormat=st.internalFormat,this.depthBuffer=st.depthBuffer,this.stencilBuffer=st.stencilBuffer,this.depthTexture=st.depthTexture,this.samples=st.samples}setSize(rt,it,st=1){(this.width!==rt||this.height!==it||this.depth!==st)&&(this.width=rt,this.height=it,this.depth=st,this.texture.image.width=rt,this.texture.image.height=it,this.texture.image.depth=st,this.dispose()),this.viewport.set(0,0,rt,it),this.scissor.set(0,0,rt,it)}clone(){return new this.constructor().copy(this)}copy(rt){this.width=rt.width,this.height=rt.height,this.depth=rt.depth,this.scissor.copy(rt.scissor),this.scissorTest=rt.scissorTest,this.viewport.copy(rt.viewport),this.texture=rt.texture.clone(),this.texture.isRenderTargetTexture=!0;const it=Object.assign({},rt.texture.image);return this.texture.source=new Source(it),this.depthBuffer=rt.depthBuffer,this.stencilBuffer=rt.stencilBuffer,rt.depthTexture!==null&&(this.depthTexture=rt.depthTexture.clone()),this.samples=rt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(rt=1,it=1,st={}){super(rt,it,st),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(rt=null,it=1,st=1,lt=1){super(null),this.isDataArrayTexture=!0,this.image={data:rt,width:it,height:st,depth:lt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGLArrayRenderTarget=!0,this.depth=st,this.texture=new DataArrayTexture(null,rt,it,st),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(rt=null,it=1,st=1,lt=1){super(null),this.isData3DTexture=!0,this.image={data:rt,width:it,height:st,depth:lt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGL3DRenderTarget=!0,this.depth=st,this.texture=new Data3DTexture(null,rt,it,st),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGLMultipleRenderTargets=!0;const ct=this.texture;this.texture=[];for(let ut=0;ut<st;ut++)this.texture[ut]=ct.clone(),this.texture[ut].isRenderTargetTexture=!0}setSize(rt,it,st=1){if(this.width!==rt||this.height!==it||this.depth!==st){this.width=rt,this.height=it,this.depth=st;for(let lt=0,ct=this.texture.length;lt<ct;lt++)this.texture[lt].image.width=rt,this.texture[lt].image.height=it,this.texture[lt].image.depth=st;this.dispose()}this.viewport.set(0,0,rt,it),this.scissor.set(0,0,rt,it)}copy(rt){this.dispose(),this.width=rt.width,this.height=rt.height,this.depth=rt.depth,this.scissor.copy(rt.scissor),this.scissorTest=rt.scissorTest,this.viewport.copy(rt.viewport),this.depthBuffer=rt.depthBuffer,this.stencilBuffer=rt.stencilBuffer,rt.depthTexture!==null&&(this.depthTexture=rt.depthTexture.clone()),this.texture.length=0;for(let it=0,st=rt.texture.length;it<st;it++)this.texture[it]=rt.texture[it].clone(),this.texture[it].isRenderTargetTexture=!0;return this}}class Quaternion{constructor(rt=0,it=0,st=0,lt=1){this.isQuaternion=!0,this._x=rt,this._y=it,this._z=st,this._w=lt}static slerpFlat(rt,it,st,lt,ct,ut,dt){let ht=st[lt+0],pt=st[lt+1],ft=st[lt+2],mt=st[lt+3];const gt=ct[ut+0],xt=ct[ut+1],yt=ct[ut+2],vt=ct[ut+3];if(dt===0){rt[it+0]=ht,rt[it+1]=pt,rt[it+2]=ft,rt[it+3]=mt;return}if(dt===1){rt[it+0]=gt,rt[it+1]=xt,rt[it+2]=yt,rt[it+3]=vt;return}if(mt!==vt||ht!==gt||pt!==xt||ft!==yt){let St=1-dt;const Et=ht*gt+pt*xt+ft*yt+mt*vt,wt=Et>=0?1:-1,Rt=1-Et*Et;if(Rt>Number.EPSILON){const It=Math.sqrt(Rt),At=Math.atan2(It,Et*wt);St=Math.sin(St*At)/It,dt=Math.sin(dt*At)/It}const Tt=dt*wt;if(ht=ht*St+gt*Tt,pt=pt*St+xt*Tt,ft=ft*St+yt*Tt,mt=mt*St+vt*Tt,St===1-dt){const It=1/Math.sqrt(ht*ht+pt*pt+ft*ft+mt*mt);ht*=It,pt*=It,ft*=It,mt*=It}}rt[it]=ht,rt[it+1]=pt,rt[it+2]=ft,rt[it+3]=mt}static multiplyQuaternionsFlat(rt,it,st,lt,ct,ut){const dt=st[lt],ht=st[lt+1],pt=st[lt+2],ft=st[lt+3],mt=ct[ut],gt=ct[ut+1],xt=ct[ut+2],yt=ct[ut+3];return rt[it]=dt*yt+ft*mt+ht*xt-pt*gt,rt[it+1]=ht*yt+ft*gt+pt*mt-dt*xt,rt[it+2]=pt*yt+ft*xt+dt*gt-ht*mt,rt[it+3]=ft*yt-dt*mt-ht*gt-pt*xt,rt}get x(){return this._x}set x(rt){this._x=rt,this._onChangeCallback()}get y(){return this._y}set y(rt){this._y=rt,this._onChangeCallback()}get z(){return this._z}set z(rt){this._z=rt,this._onChangeCallback()}get w(){return this._w}set w(rt){this._w=rt,this._onChangeCallback()}set(rt,it,st,lt){return this._x=rt,this._y=it,this._z=st,this._w=lt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(rt){return this._x=rt.x,this._y=rt.y,this._z=rt.z,this._w=rt.w,this._onChangeCallback(),this}setFromEuler(rt,it=!0){const st=rt._x,lt=rt._y,ct=rt._z,ut=rt._order,dt=Math.cos,ht=Math.sin,pt=dt(st/2),ft=dt(lt/2),mt=dt(ct/2),gt=ht(st/2),xt=ht(lt/2),yt=ht(ct/2);switch(ut){case"XYZ":this._x=gt*ft*mt+pt*xt*yt,this._y=pt*xt*mt-gt*ft*yt,this._z=pt*ft*yt+gt*xt*mt,this._w=pt*ft*mt-gt*xt*yt;break;case"YXZ":this._x=gt*ft*mt+pt*xt*yt,this._y=pt*xt*mt-gt*ft*yt,this._z=pt*ft*yt-gt*xt*mt,this._w=pt*ft*mt+gt*xt*yt;break;case"ZXY":this._x=gt*ft*mt-pt*xt*yt,this._y=pt*xt*mt+gt*ft*yt,this._z=pt*ft*yt+gt*xt*mt,this._w=pt*ft*mt-gt*xt*yt;break;case"ZYX":this._x=gt*ft*mt-pt*xt*yt,this._y=pt*xt*mt+gt*ft*yt,this._z=pt*ft*yt-gt*xt*mt,this._w=pt*ft*mt+gt*xt*yt;break;case"YZX":this._x=gt*ft*mt+pt*xt*yt,this._y=pt*xt*mt+gt*ft*yt,this._z=pt*ft*yt-gt*xt*mt,this._w=pt*ft*mt-gt*xt*yt;break;case"XZY":this._x=gt*ft*mt-pt*xt*yt,this._y=pt*xt*mt-gt*ft*yt,this._z=pt*ft*yt+gt*xt*mt,this._w=pt*ft*mt+gt*xt*yt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ut)}return it===!0&&this._onChangeCallback(),this}setFromAxisAngle(rt,it){const st=it/2,lt=Math.sin(st);return this._x=rt.x*lt,this._y=rt.y*lt,this._z=rt.z*lt,this._w=Math.cos(st),this._onChangeCallback(),this}setFromRotationMatrix(rt){const it=rt.elements,st=it[0],lt=it[4],ct=it[8],ut=it[1],dt=it[5],ht=it[9],pt=it[2],ft=it[6],mt=it[10],gt=st+dt+mt;if(gt>0){const xt=.5/Math.sqrt(gt+1);this._w=.25/xt,this._x=(ft-ht)*xt,this._y=(ct-pt)*xt,this._z=(ut-lt)*xt}else if(st>dt&&st>mt){const xt=2*Math.sqrt(1+st-dt-mt);this._w=(ft-ht)/xt,this._x=.25*xt,this._y=(lt+ut)/xt,this._z=(ct+pt)/xt}else if(dt>mt){const xt=2*Math.sqrt(1+dt-st-mt);this._w=(ct-pt)/xt,this._x=(lt+ut)/xt,this._y=.25*xt,this._z=(ht+ft)/xt}else{const xt=2*Math.sqrt(1+mt-st-dt);this._w=(ut-lt)/xt,this._x=(ct+pt)/xt,this._y=(ht+ft)/xt,this._z=.25*xt}return this._onChangeCallback(),this}setFromUnitVectors(rt,it){let st=rt.dot(it)+1;return st<Number.EPSILON?(st=0,Math.abs(rt.x)>Math.abs(rt.z)?(this._x=-rt.y,this._y=rt.x,this._z=0,this._w=st):(this._x=0,this._y=-rt.z,this._z=rt.y,this._w=st)):(this._x=rt.y*it.z-rt.z*it.y,this._y=rt.z*it.x-rt.x*it.z,this._z=rt.x*it.y-rt.y*it.x,this._w=st),this.normalize()}angleTo(rt){return 2*Math.acos(Math.abs(clamp(this.dot(rt),-1,1)))}rotateTowards(rt,it){const st=this.angleTo(rt);if(st===0)return this;const lt=Math.min(1,it/st);return this.slerp(rt,lt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(rt){return this._x*rt._x+this._y*rt._y+this._z*rt._z+this._w*rt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let rt=this.length();return rt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(rt=1/rt,this._x=this._x*rt,this._y=this._y*rt,this._z=this._z*rt,this._w=this._w*rt),this._onChangeCallback(),this}multiply(rt){return this.multiplyQuaternions(this,rt)}premultiply(rt){return this.multiplyQuaternions(rt,this)}multiplyQuaternions(rt,it){const st=rt._x,lt=rt._y,ct=rt._z,ut=rt._w,dt=it._x,ht=it._y,pt=it._z,ft=it._w;return this._x=st*ft+ut*dt+lt*pt-ct*ht,this._y=lt*ft+ut*ht+ct*dt-st*pt,this._z=ct*ft+ut*pt+st*ht-lt*dt,this._w=ut*ft-st*dt-lt*ht-ct*pt,this._onChangeCallback(),this}slerp(rt,it){if(it===0)return this;if(it===1)return this.copy(rt);const st=this._x,lt=this._y,ct=this._z,ut=this._w;let dt=ut*rt._w+st*rt._x+lt*rt._y+ct*rt._z;if(dt<0?(this._w=-rt._w,this._x=-rt._x,this._y=-rt._y,this._z=-rt._z,dt=-dt):this.copy(rt),dt>=1)return this._w=ut,this._x=st,this._y=lt,this._z=ct,this;const ht=1-dt*dt;if(ht<=Number.EPSILON){const xt=1-it;return this._w=xt*ut+it*this._w,this._x=xt*st+it*this._x,this._y=xt*lt+it*this._y,this._z=xt*ct+it*this._z,this.normalize(),this}const pt=Math.sqrt(ht),ft=Math.atan2(pt,dt),mt=Math.sin((1-it)*ft)/pt,gt=Math.sin(it*ft)/pt;return this._w=ut*mt+this._w*gt,this._x=st*mt+this._x*gt,this._y=lt*mt+this._y*gt,this._z=ct*mt+this._z*gt,this._onChangeCallback(),this}slerpQuaternions(rt,it,st){return this.copy(rt).slerp(it,st)}random(){const rt=Math.random(),it=Math.sqrt(1-rt),st=Math.sqrt(rt),lt=2*Math.PI*Math.random(),ct=2*Math.PI*Math.random();return this.set(it*Math.cos(lt),st*Math.sin(ct),st*Math.cos(ct),it*Math.sin(lt))}equals(rt){return rt._x===this._x&&rt._y===this._y&&rt._z===this._z&&rt._w===this._w}fromArray(rt,it=0){return this._x=rt[it],this._y=rt[it+1],this._z=rt[it+2],this._w=rt[it+3],this._onChangeCallback(),this}toArray(rt=[],it=0){return rt[it]=this._x,rt[it+1]=this._y,rt[it+2]=this._z,rt[it+3]=this._w,rt}fromBufferAttribute(rt,it){return this._x=rt.getX(it),this._y=rt.getY(it),this._z=rt.getZ(it),this._w=rt.getW(it),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(rt){return this._onChangeCallback=rt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(rt=0,it=0,st=0){Vector3.prototype.isVector3=!0,this.x=rt,this.y=it,this.z=st}set(rt,it,st){return st===void 0&&(st=this.z),this.x=rt,this.y=it,this.z=st,this}setScalar(rt){return this.x=rt,this.y=rt,this.z=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setZ(rt){return this.z=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;case 2:this.z=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(rt){return this.x=rt.x,this.y=rt.y,this.z=rt.z,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this.z+=rt.z,this}addScalar(rt){return this.x+=rt,this.y+=rt,this.z+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this.z=rt.z+it.z,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this.z+=rt.z*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this.z-=rt.z,this}subScalar(rt){return this.x-=rt,this.y-=rt,this.z-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this.z=rt.z-it.z,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this.z*=rt.z,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this.z*=rt,this}multiplyVectors(rt,it){return this.x=rt.x*it.x,this.y=rt.y*it.y,this.z=rt.z*it.z,this}applyEuler(rt){return this.applyQuaternion(_quaternion$4.setFromEuler(rt))}applyAxisAngle(rt,it){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(rt,it))}applyMatrix3(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements;return this.x=ct[0]*it+ct[3]*st+ct[6]*lt,this.y=ct[1]*it+ct[4]*st+ct[7]*lt,this.z=ct[2]*it+ct[5]*st+ct[8]*lt,this}applyNormalMatrix(rt){return this.applyMatrix3(rt).normalize()}applyMatrix4(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements,ut=1/(ct[3]*it+ct[7]*st+ct[11]*lt+ct[15]);return this.x=(ct[0]*it+ct[4]*st+ct[8]*lt+ct[12])*ut,this.y=(ct[1]*it+ct[5]*st+ct[9]*lt+ct[13])*ut,this.z=(ct[2]*it+ct[6]*st+ct[10]*lt+ct[14])*ut,this}applyQuaternion(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.x,ut=rt.y,dt=rt.z,ht=rt.w,pt=2*(ut*lt-dt*st),ft=2*(dt*it-ct*lt),mt=2*(ct*st-ut*it);return this.x=it+ht*pt+ut*mt-dt*ft,this.y=st+ht*ft+dt*pt-ct*mt,this.z=lt+ht*mt+ct*ft-ut*pt,this}project(rt){return this.applyMatrix4(rt.matrixWorldInverse).applyMatrix4(rt.projectionMatrix)}unproject(rt){return this.applyMatrix4(rt.projectionMatrixInverse).applyMatrix4(rt.matrixWorld)}transformDirection(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements;return this.x=ct[0]*it+ct[4]*st+ct[8]*lt,this.y=ct[1]*it+ct[5]*st+ct[9]*lt,this.z=ct[2]*it+ct[6]*st+ct[10]*lt,this.normalize()}divide(rt){return this.x/=rt.x,this.y/=rt.y,this.z/=rt.z,this}divideScalar(rt){return this.multiplyScalar(1/rt)}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this.z=Math.min(this.z,rt.z),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this.z=Math.max(this.z,rt.z),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this.z=Math.max(rt.z,Math.min(it.z,this.z)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this.z=Math.max(rt,Math.min(it,this.z)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(rt){return this.x*rt.x+this.y*rt.y+this.z*rt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this.z+=(rt.z-this.z)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this.z=rt.z+(it.z-rt.z)*st,this}cross(rt){return this.crossVectors(this,rt)}crossVectors(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=it.x,dt=it.y,ht=it.z;return this.x=lt*ht-ct*dt,this.y=ct*ut-st*ht,this.z=st*dt-lt*ut,this}projectOnVector(rt){const it=rt.lengthSq();if(it===0)return this.set(0,0,0);const st=rt.dot(this)/it;return this.copy(rt).multiplyScalar(st)}projectOnPlane(rt){return _vector$c.copy(this).projectOnVector(rt),this.sub(_vector$c)}reflect(rt){return this.sub(_vector$c.copy(rt).multiplyScalar(2*this.dot(rt)))}angleTo(rt){const it=Math.sqrt(this.lengthSq()*rt.lengthSq());if(it===0)return Math.PI/2;const st=this.dot(rt)/it;return Math.acos(clamp(st,-1,1))}distanceTo(rt){return Math.sqrt(this.distanceToSquared(rt))}distanceToSquared(rt){const it=this.x-rt.x,st=this.y-rt.y,lt=this.z-rt.z;return it*it+st*st+lt*lt}manhattanDistanceTo(rt){return Math.abs(this.x-rt.x)+Math.abs(this.y-rt.y)+Math.abs(this.z-rt.z)}setFromSpherical(rt){return this.setFromSphericalCoords(rt.radius,rt.phi,rt.theta)}setFromSphericalCoords(rt,it,st){const lt=Math.sin(it)*rt;return this.x=lt*Math.sin(st),this.y=Math.cos(it)*rt,this.z=lt*Math.cos(st),this}setFromCylindrical(rt){return this.setFromCylindricalCoords(rt.radius,rt.theta,rt.y)}setFromCylindricalCoords(rt,it,st){return this.x=rt*Math.sin(it),this.y=st,this.z=rt*Math.cos(it),this}setFromMatrixPosition(rt){const it=rt.elements;return this.x=it[12],this.y=it[13],this.z=it[14],this}setFromMatrixScale(rt){const it=this.setFromMatrixColumn(rt,0).length(),st=this.setFromMatrixColumn(rt,1).length(),lt=this.setFromMatrixColumn(rt,2).length();return this.x=it,this.y=st,this.z=lt,this}setFromMatrixColumn(rt,it){return this.fromArray(rt.elements,it*4)}setFromMatrix3Column(rt,it){return this.fromArray(rt.elements,it*3)}setFromEuler(rt){return this.x=rt._x,this.y=rt._y,this.z=rt._z,this}setFromColor(rt){return this.x=rt.r,this.y=rt.g,this.z=rt.b,this}equals(rt){return rt.x===this.x&&rt.y===this.y&&rt.z===this.z}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this.z=rt[it+2],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt[it+2]=this.z,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this.z=rt.getZ(it),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const rt=(Math.random()-.5)*2,it=Math.random()*Math.PI*2,st=Math.sqrt(1-rt**2);return this.x=st*Math.cos(it),this.y=st*Math.sin(it),this.z=rt,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(rt=new Vector3(1/0,1/0,1/0),it=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=rt,this.max=it}set(rt,it){return this.min.copy(rt),this.max.copy(it),this}setFromArray(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it+=3)this.expandByPoint(_vector$b.fromArray(rt,it));return this}setFromBufferAttribute(rt){this.makeEmpty();for(let it=0,st=rt.count;it<st;it++)this.expandByPoint(_vector$b.fromBufferAttribute(rt,it));return this}setFromPoints(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it++)this.expandByPoint(rt[it]);return this}setFromCenterAndSize(rt,it){const st=_vector$b.copy(it).multiplyScalar(.5);return this.min.copy(rt).sub(st),this.max.copy(rt).add(st),this}setFromObject(rt,it=!1){return this.makeEmpty(),this.expandByObject(rt,it)}clone(){return new this.constructor().copy(this)}copy(rt){return this.min.copy(rt.min),this.max.copy(rt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(rt){return this.isEmpty()?rt.set(0,0,0):rt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(rt){return this.isEmpty()?rt.set(0,0,0):rt.subVectors(this.max,this.min)}expandByPoint(rt){return this.min.min(rt),this.max.max(rt),this}expandByVector(rt){return this.min.sub(rt),this.max.add(rt),this}expandByScalar(rt){return this.min.addScalar(-rt),this.max.addScalar(rt),this}expandByObject(rt,it=!1){rt.updateWorldMatrix(!1,!1);const st=rt.geometry;if(st!==void 0){const ct=st.getAttribute("position");if(it===!0&&ct!==void 0&&rt.isInstancedMesh!==!0)for(let ut=0,dt=ct.count;ut<dt;ut++)rt.isMesh===!0?rt.getVertexPosition(ut,_vector$b):_vector$b.fromBufferAttribute(ct,ut),_vector$b.applyMatrix4(rt.matrixWorld),this.expandByPoint(_vector$b);else rt.boundingBox!==void 0?(rt.boundingBox===null&&rt.computeBoundingBox(),_box$4.copy(rt.boundingBox)):(st.boundingBox===null&&st.computeBoundingBox(),_box$4.copy(st.boundingBox)),_box$4.applyMatrix4(rt.matrixWorld),this.union(_box$4)}const lt=rt.children;for(let ct=0,ut=lt.length;ct<ut;ct++)this.expandByObject(lt[ct],it);return this}containsPoint(rt){return!(rt.x<this.min.x||rt.x>this.max.x||rt.y<this.min.y||rt.y>this.max.y||rt.z<this.min.z||rt.z>this.max.z)}containsBox(rt){return this.min.x<=rt.min.x&&rt.max.x<=this.max.x&&this.min.y<=rt.min.y&&rt.max.y<=this.max.y&&this.min.z<=rt.min.z&&rt.max.z<=this.max.z}getParameter(rt,it){return it.set((rt.x-this.min.x)/(this.max.x-this.min.x),(rt.y-this.min.y)/(this.max.y-this.min.y),(rt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(rt){return!(rt.max.x<this.min.x||rt.min.x>this.max.x||rt.max.y<this.min.y||rt.min.y>this.max.y||rt.max.z<this.min.z||rt.min.z>this.max.z)}intersectsSphere(rt){return this.clampPoint(rt.center,_vector$b),_vector$b.distanceToSquared(rt.center)<=rt.radius*rt.radius}intersectsPlane(rt){let it,st;return rt.normal.x>0?(it=rt.normal.x*this.min.x,st=rt.normal.x*this.max.x):(it=rt.normal.x*this.max.x,st=rt.normal.x*this.min.x),rt.normal.y>0?(it+=rt.normal.y*this.min.y,st+=rt.normal.y*this.max.y):(it+=rt.normal.y*this.max.y,st+=rt.normal.y*this.min.y),rt.normal.z>0?(it+=rt.normal.z*this.min.z,st+=rt.normal.z*this.max.z):(it+=rt.normal.z*this.max.z,st+=rt.normal.z*this.min.z),it<=-rt.constant&&st>=-rt.constant}intersectsTriangle(rt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(rt.a,_center),_v1$7.subVectors(rt.b,_center),_v2$4.subVectors(rt.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let it=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(it,_v0$2,_v1$7,_v2$4,_extents)||(it=[1,0,0,0,1,0,0,0,1],!satForAxes(it,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),it=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(it,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(rt,it){return it.copy(rt).clamp(this.min,this.max)}distanceToPoint(rt){return this.clampPoint(rt,_vector$b).distanceTo(rt)}getBoundingSphere(rt){return this.isEmpty()?rt.makeEmpty():(this.getCenter(rt.center),rt.radius=this.getSize(_vector$b).length()*.5),rt}intersect(rt){return this.min.max(rt.min),this.max.min(rt.max),this.isEmpty()&&this.makeEmpty(),this}union(rt){return this.min.min(rt.min),this.max.max(rt.max),this}applyMatrix4(rt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(rt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(rt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(rt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(rt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(rt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(rt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(rt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(rt),this.setFromPoints(_points),this)}translate(rt){return this.min.add(rt),this.max.add(rt),this}equals(rt){return rt.min.equals(this.min)&&rt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(nt,rt,it,st,lt){for(let ct=0,ut=nt.length-3;ct<=ut;ct+=3){_testAxis.fromArray(nt,ct);const dt=lt.x*Math.abs(_testAxis.x)+lt.y*Math.abs(_testAxis.y)+lt.z*Math.abs(_testAxis.z),ht=rt.dot(_testAxis),pt=it.dot(_testAxis),ft=st.dot(_testAxis);if(Math.max(-Math.max(ht,pt,ft),Math.min(ht,pt,ft))>dt)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(rt=new Vector3,it=-1){this.isSphere=!0,this.center=rt,this.radius=it}set(rt,it){return this.center.copy(rt),this.radius=it,this}setFromPoints(rt,it){const st=this.center;it!==void 0?st.copy(it):_box$3.setFromPoints(rt).getCenter(st);let lt=0;for(let ct=0,ut=rt.length;ct<ut;ct++)lt=Math.max(lt,st.distanceToSquared(rt[ct]));return this.radius=Math.sqrt(lt),this}copy(rt){return this.center.copy(rt.center),this.radius=rt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(rt){return rt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(rt){return rt.distanceTo(this.center)-this.radius}intersectsSphere(rt){const it=this.radius+rt.radius;return rt.center.distanceToSquared(this.center)<=it*it}intersectsBox(rt){return rt.intersectsSphere(this)}intersectsPlane(rt){return Math.abs(rt.distanceToPoint(this.center))<=this.radius}clampPoint(rt,it){const st=this.center.distanceToSquared(rt);return it.copy(rt),st>this.radius*this.radius&&(it.sub(this.center).normalize(),it.multiplyScalar(this.radius).add(this.center)),it}getBoundingBox(rt){return this.isEmpty()?(rt.makeEmpty(),rt):(rt.set(this.center,this.center),rt.expandByScalar(this.radius),rt)}applyMatrix4(rt){return this.center.applyMatrix4(rt),this.radius=this.radius*rt.getMaxScaleOnAxis(),this}translate(rt){return this.center.add(rt),this}expandByPoint(rt){if(this.isEmpty())return this.center.copy(rt),this.radius=0,this;_v1$6.subVectors(rt,this.center);const it=_v1$6.lengthSq();if(it>this.radius*this.radius){const st=Math.sqrt(it),lt=(st-this.radius)*.5;this.center.addScaledVector(_v1$6,lt/st),this.radius+=lt}return this}union(rt){return rt.isEmpty()?this:this.isEmpty()?(this.copy(rt),this):(this.center.equals(rt.center)===!0?this.radius=Math.max(this.radius,rt.radius):(_v2$3.subVectors(rt.center,this.center).setLength(rt.radius),this.expandByPoint(_v1$6.copy(rt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(rt.center).sub(_v2$3))),this)}equals(rt){return rt.center.equals(this.center)&&rt.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(rt=new Vector3,it=new Vector3(0,0,-1)){this.origin=rt,this.direction=it}set(rt,it){return this.origin.copy(rt),this.direction.copy(it),this}copy(rt){return this.origin.copy(rt.origin),this.direction.copy(rt.direction),this}at(rt,it){return it.copy(this.origin).addScaledVector(this.direction,rt)}lookAt(rt){return this.direction.copy(rt).sub(this.origin).normalize(),this}recast(rt){return this.origin.copy(this.at(rt,_vector$a)),this}closestPointToPoint(rt,it){it.subVectors(rt,this.origin);const st=it.dot(this.direction);return st<0?it.copy(this.origin):it.copy(this.origin).addScaledVector(this.direction,st)}distanceToPoint(rt){return Math.sqrt(this.distanceSqToPoint(rt))}distanceSqToPoint(rt){const it=_vector$a.subVectors(rt,this.origin).dot(this.direction);return it<0?this.origin.distanceToSquared(rt):(_vector$a.copy(this.origin).addScaledVector(this.direction,it),_vector$a.distanceToSquared(rt))}distanceSqToSegment(rt,it,st,lt){_segCenter.copy(rt).add(it).multiplyScalar(.5),_segDir.copy(it).sub(rt).normalize(),_diff.copy(this.origin).sub(_segCenter);const ct=rt.distanceTo(it)*.5,ut=-this.direction.dot(_segDir),dt=_diff.dot(this.direction),ht=-_diff.dot(_segDir),pt=_diff.lengthSq(),ft=Math.abs(1-ut*ut);let mt,gt,xt,yt;if(ft>0)if(mt=ut*ht-dt,gt=ut*dt-ht,yt=ct*ft,mt>=0)if(gt>=-yt)if(gt<=yt){const vt=1/ft;mt*=vt,gt*=vt,xt=mt*(mt+ut*gt+2*dt)+gt*(ut*mt+gt+2*ht)+pt}else gt=ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+pt;else gt=-ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+pt;else gt<=-yt?(mt=Math.max(0,-(-ut*ct+dt)),gt=mt>0?-ct:Math.min(Math.max(-ct,-ht),ct),xt=-mt*mt+gt*(gt+2*ht)+pt):gt<=yt?(mt=0,gt=Math.min(Math.max(-ct,-ht),ct),xt=gt*(gt+2*ht)+pt):(mt=Math.max(0,-(ut*ct+dt)),gt=mt>0?ct:Math.min(Math.max(-ct,-ht),ct),xt=-mt*mt+gt*(gt+2*ht)+pt);else gt=ut>0?-ct:ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+pt;return st&&st.copy(this.origin).addScaledVector(this.direction,mt),lt&&lt.copy(_segCenter).addScaledVector(_segDir,gt),xt}intersectSphere(rt,it){_vector$a.subVectors(rt.center,this.origin);const st=_vector$a.dot(this.direction),lt=_vector$a.dot(_vector$a)-st*st,ct=rt.radius*rt.radius;if(lt>ct)return null;const ut=Math.sqrt(ct-lt),dt=st-ut,ht=st+ut;return ht<0?null:dt<0?this.at(ht,it):this.at(dt,it)}intersectsSphere(rt){return this.distanceSqToPoint(rt.center)<=rt.radius*rt.radius}distanceToPlane(rt){const it=rt.normal.dot(this.direction);if(it===0)return rt.distanceToPoint(this.origin)===0?0:null;const st=-(this.origin.dot(rt.normal)+rt.constant)/it;return st>=0?st:null}intersectPlane(rt,it){const st=this.distanceToPlane(rt);return st===null?null:this.at(st,it)}intersectsPlane(rt){const it=rt.distanceToPoint(this.origin);return it===0||rt.normal.dot(this.direction)*it<0}intersectBox(rt,it){let st,lt,ct,ut,dt,ht;const pt=1/this.direction.x,ft=1/this.direction.y,mt=1/this.direction.z,gt=this.origin;return pt>=0?(st=(rt.min.x-gt.x)*pt,lt=(rt.max.x-gt.x)*pt):(st=(rt.max.x-gt.x)*pt,lt=(rt.min.x-gt.x)*pt),ft>=0?(ct=(rt.min.y-gt.y)*ft,ut=(rt.max.y-gt.y)*ft):(ct=(rt.max.y-gt.y)*ft,ut=(rt.min.y-gt.y)*ft),st>ut||ct>lt||((ct>st||isNaN(st))&&(st=ct),(ut<lt||isNaN(lt))&&(lt=ut),mt>=0?(dt=(rt.min.z-gt.z)*mt,ht=(rt.max.z-gt.z)*mt):(dt=(rt.max.z-gt.z)*mt,ht=(rt.min.z-gt.z)*mt),st>ht||dt>lt)||((dt>st||st!==st)&&(st=dt),(ht<lt||lt!==lt)&&(lt=ht),lt<0)?null:this.at(st>=0?st:lt,it)}intersectsBox(rt){return this.intersectBox(rt,_vector$a)!==null}intersectTriangle(rt,it,st,lt,ct){_edge1.subVectors(it,rt),_edge2.subVectors(st,rt),_normal$1.crossVectors(_edge1,_edge2);let ut=this.direction.dot(_normal$1),dt;if(ut>0){if(lt)return null;dt=1}else if(ut<0)dt=-1,ut=-ut;else return null;_diff.subVectors(this.origin,rt);const ht=dt*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ht<0)return null;const pt=dt*this.direction.dot(_edge1.cross(_diff));if(pt<0||ht+pt>ut)return null;const ft=-dt*_diff.dot(_normal$1);return ft<0?null:this.at(ft/ut,ct)}applyMatrix4(rt){return this.origin.applyMatrix4(rt),this.direction.transformDirection(rt),this}equals(rt){return rt.origin.equals(this.origin)&&rt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(rt,it,st,lt,ct,ut,dt,ht,pt,ft,mt,gt,xt,yt,vt,St){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rt!==void 0&&this.set(rt,it,st,lt,ct,ut,dt,ht,pt,ft,mt,gt,xt,yt,vt,St)}set(rt,it,st,lt,ct,ut,dt,ht,pt,ft,mt,gt,xt,yt,vt,St){const Et=this.elements;return Et[0]=rt,Et[4]=it,Et[8]=st,Et[12]=lt,Et[1]=ct,Et[5]=ut,Et[9]=dt,Et[13]=ht,Et[2]=pt,Et[6]=ft,Et[10]=mt,Et[14]=gt,Et[3]=xt,Et[7]=yt,Et[11]=vt,Et[15]=St,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(rt){const it=this.elements,st=rt.elements;return it[0]=st[0],it[1]=st[1],it[2]=st[2],it[3]=st[3],it[4]=st[4],it[5]=st[5],it[6]=st[6],it[7]=st[7],it[8]=st[8],it[9]=st[9],it[10]=st[10],it[11]=st[11],it[12]=st[12],it[13]=st[13],it[14]=st[14],it[15]=st[15],this}copyPosition(rt){const it=this.elements,st=rt.elements;return it[12]=st[12],it[13]=st[13],it[14]=st[14],this}setFromMatrix3(rt){const it=rt.elements;return this.set(it[0],it[3],it[6],0,it[1],it[4],it[7],0,it[2],it[5],it[8],0,0,0,0,1),this}extractBasis(rt,it,st){return rt.setFromMatrixColumn(this,0),it.setFromMatrixColumn(this,1),st.setFromMatrixColumn(this,2),this}makeBasis(rt,it,st){return this.set(rt.x,it.x,st.x,0,rt.y,it.y,st.y,0,rt.z,it.z,st.z,0,0,0,0,1),this}extractRotation(rt){const it=this.elements,st=rt.elements,lt=1/_v1$5.setFromMatrixColumn(rt,0).length(),ct=1/_v1$5.setFromMatrixColumn(rt,1).length(),ut=1/_v1$5.setFromMatrixColumn(rt,2).length();return it[0]=st[0]*lt,it[1]=st[1]*lt,it[2]=st[2]*lt,it[3]=0,it[4]=st[4]*ct,it[5]=st[5]*ct,it[6]=st[6]*ct,it[7]=0,it[8]=st[8]*ut,it[9]=st[9]*ut,it[10]=st[10]*ut,it[11]=0,it[12]=0,it[13]=0,it[14]=0,it[15]=1,this}makeRotationFromEuler(rt){const it=this.elements,st=rt.x,lt=rt.y,ct=rt.z,ut=Math.cos(st),dt=Math.sin(st),ht=Math.cos(lt),pt=Math.sin(lt),ft=Math.cos(ct),mt=Math.sin(ct);if(rt.order==="XYZ"){const gt=ut*ft,xt=ut*mt,yt=dt*ft,vt=dt*mt;it[0]=ht*ft,it[4]=-ht*mt,it[8]=pt,it[1]=xt+yt*pt,it[5]=gt-vt*pt,it[9]=-dt*ht,it[2]=vt-gt*pt,it[6]=yt+xt*pt,it[10]=ut*ht}else if(rt.order==="YXZ"){const gt=ht*ft,xt=ht*mt,yt=pt*ft,vt=pt*mt;it[0]=gt+vt*dt,it[4]=yt*dt-xt,it[8]=ut*pt,it[1]=ut*mt,it[5]=ut*ft,it[9]=-dt,it[2]=xt*dt-yt,it[6]=vt+gt*dt,it[10]=ut*ht}else if(rt.order==="ZXY"){const gt=ht*ft,xt=ht*mt,yt=pt*ft,vt=pt*mt;it[0]=gt-vt*dt,it[4]=-ut*mt,it[8]=yt+xt*dt,it[1]=xt+yt*dt,it[5]=ut*ft,it[9]=vt-gt*dt,it[2]=-ut*pt,it[6]=dt,it[10]=ut*ht}else if(rt.order==="ZYX"){const gt=ut*ft,xt=ut*mt,yt=dt*ft,vt=dt*mt;it[0]=ht*ft,it[4]=yt*pt-xt,it[8]=gt*pt+vt,it[1]=ht*mt,it[5]=vt*pt+gt,it[9]=xt*pt-yt,it[2]=-pt,it[6]=dt*ht,it[10]=ut*ht}else if(rt.order==="YZX"){const gt=ut*ht,xt=ut*pt,yt=dt*ht,vt=dt*pt;it[0]=ht*ft,it[4]=vt-gt*mt,it[8]=yt*mt+xt,it[1]=mt,it[5]=ut*ft,it[9]=-dt*ft,it[2]=-pt*ft,it[6]=xt*mt+yt,it[10]=gt-vt*mt}else if(rt.order==="XZY"){const gt=ut*ht,xt=ut*pt,yt=dt*ht,vt=dt*pt;it[0]=ht*ft,it[4]=-mt,it[8]=pt*ft,it[1]=gt*mt+vt,it[5]=ut*ft,it[9]=xt*mt-yt,it[2]=yt*mt-xt,it[6]=dt*ft,it[10]=vt*mt+gt}return it[3]=0,it[7]=0,it[11]=0,it[12]=0,it[13]=0,it[14]=0,it[15]=1,this}makeRotationFromQuaternion(rt){return this.compose(_zero,rt,_one)}lookAt(rt,it,st){const lt=this.elements;return _z.subVectors(rt,it),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(st,_z),_x.lengthSq()===0&&(Math.abs(st.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(st,_z)),_x.normalize(),_y.crossVectors(_z,_x),lt[0]=_x.x,lt[4]=_y.x,lt[8]=_z.x,lt[1]=_x.y,lt[5]=_y.y,lt[9]=_z.y,lt[2]=_x.z,lt[6]=_y.z,lt[10]=_z.z,this}multiply(rt){return this.multiplyMatrices(this,rt)}premultiply(rt){return this.multiplyMatrices(rt,this)}multiplyMatrices(rt,it){const st=rt.elements,lt=it.elements,ct=this.elements,ut=st[0],dt=st[4],ht=st[8],pt=st[12],ft=st[1],mt=st[5],gt=st[9],xt=st[13],yt=st[2],vt=st[6],St=st[10],Et=st[14],wt=st[3],Rt=st[7],Tt=st[11],It=st[15],At=lt[0],Dt=lt[4],jt=lt[8],Ft=lt[12],Lt=lt[1],Pt=lt[5],Ot=lt[9],Nt=lt[13],$t=lt[2],Vt=lt[6],Ut=lt[10],zt=lt[14],Bt=lt[3],Ht=lt[7],Gt=lt[11],Kt=lt[15];return ct[0]=ut*At+dt*Lt+ht*$t+pt*Bt,ct[4]=ut*Dt+dt*Pt+ht*Vt+pt*Ht,ct[8]=ut*jt+dt*Ot+ht*Ut+pt*Gt,ct[12]=ut*Ft+dt*Nt+ht*zt+pt*Kt,ct[1]=ft*At+mt*Lt+gt*$t+xt*Bt,ct[5]=ft*Dt+mt*Pt+gt*Vt+xt*Ht,ct[9]=ft*jt+mt*Ot+gt*Ut+xt*Gt,ct[13]=ft*Ft+mt*Nt+gt*zt+xt*Kt,ct[2]=yt*At+vt*Lt+St*$t+Et*Bt,ct[6]=yt*Dt+vt*Pt+St*Vt+Et*Ht,ct[10]=yt*jt+vt*Ot+St*Ut+Et*Gt,ct[14]=yt*Ft+vt*Nt+St*zt+Et*Kt,ct[3]=wt*At+Rt*Lt+Tt*$t+It*Bt,ct[7]=wt*Dt+Rt*Pt+Tt*Vt+It*Ht,ct[11]=wt*jt+Rt*Ot+Tt*Ut+It*Gt,ct[15]=wt*Ft+Rt*Nt+Tt*zt+It*Kt,this}multiplyScalar(rt){const it=this.elements;return it[0]*=rt,it[4]*=rt,it[8]*=rt,it[12]*=rt,it[1]*=rt,it[5]*=rt,it[9]*=rt,it[13]*=rt,it[2]*=rt,it[6]*=rt,it[10]*=rt,it[14]*=rt,it[3]*=rt,it[7]*=rt,it[11]*=rt,it[15]*=rt,this}determinant(){const rt=this.elements,it=rt[0],st=rt[4],lt=rt[8],ct=rt[12],ut=rt[1],dt=rt[5],ht=rt[9],pt=rt[13],ft=rt[2],mt=rt[6],gt=rt[10],xt=rt[14],yt=rt[3],vt=rt[7],St=rt[11],Et=rt[15];return yt*(+ct*ht*mt-lt*pt*mt-ct*dt*gt+st*pt*gt+lt*dt*xt-st*ht*xt)+vt*(+it*ht*xt-it*pt*gt+ct*ut*gt-lt*ut*xt+lt*pt*ft-ct*ht*ft)+St*(+it*pt*mt-it*dt*xt-ct*ut*mt+st*ut*xt+ct*dt*ft-st*pt*ft)+Et*(-lt*dt*ft-it*ht*mt+it*dt*gt+lt*ut*mt-st*ut*gt+st*ht*ft)}transpose(){const rt=this.elements;let it;return it=rt[1],rt[1]=rt[4],rt[4]=it,it=rt[2],rt[2]=rt[8],rt[8]=it,it=rt[6],rt[6]=rt[9],rt[9]=it,it=rt[3],rt[3]=rt[12],rt[12]=it,it=rt[7],rt[7]=rt[13],rt[13]=it,it=rt[11],rt[11]=rt[14],rt[14]=it,this}setPosition(rt,it,st){const lt=this.elements;return rt.isVector3?(lt[12]=rt.x,lt[13]=rt.y,lt[14]=rt.z):(lt[12]=rt,lt[13]=it,lt[14]=st),this}invert(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],pt=rt[7],ft=rt[8],mt=rt[9],gt=rt[10],xt=rt[11],yt=rt[12],vt=rt[13],St=rt[14],Et=rt[15],wt=mt*St*pt-vt*gt*pt+vt*ht*xt-dt*St*xt-mt*ht*Et+dt*gt*Et,Rt=yt*gt*pt-ft*St*pt-yt*ht*xt+ut*St*xt+ft*ht*Et-ut*gt*Et,Tt=ft*vt*pt-yt*mt*pt+yt*dt*xt-ut*vt*xt-ft*dt*Et+ut*mt*Et,It=yt*mt*ht-ft*vt*ht-yt*dt*gt+ut*vt*gt+ft*dt*St-ut*mt*St,At=it*wt+st*Rt+lt*Tt+ct*It;if(At===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Dt=1/At;return rt[0]=wt*Dt,rt[1]=(vt*gt*ct-mt*St*ct-vt*lt*xt+st*St*xt+mt*lt*Et-st*gt*Et)*Dt,rt[2]=(dt*St*ct-vt*ht*ct+vt*lt*pt-st*St*pt-dt*lt*Et+st*ht*Et)*Dt,rt[3]=(mt*ht*ct-dt*gt*ct-mt*lt*pt+st*gt*pt+dt*lt*xt-st*ht*xt)*Dt,rt[4]=Rt*Dt,rt[5]=(ft*St*ct-yt*gt*ct+yt*lt*xt-it*St*xt-ft*lt*Et+it*gt*Et)*Dt,rt[6]=(yt*ht*ct-ut*St*ct-yt*lt*pt+it*St*pt+ut*lt*Et-it*ht*Et)*Dt,rt[7]=(ut*gt*ct-ft*ht*ct+ft*lt*pt-it*gt*pt-ut*lt*xt+it*ht*xt)*Dt,rt[8]=Tt*Dt,rt[9]=(yt*mt*ct-ft*vt*ct-yt*st*xt+it*vt*xt+ft*st*Et-it*mt*Et)*Dt,rt[10]=(ut*vt*ct-yt*dt*ct+yt*st*pt-it*vt*pt-ut*st*Et+it*dt*Et)*Dt,rt[11]=(ft*dt*ct-ut*mt*ct-ft*st*pt+it*mt*pt+ut*st*xt-it*dt*xt)*Dt,rt[12]=It*Dt,rt[13]=(ft*vt*lt-yt*mt*lt+yt*st*gt-it*vt*gt-ft*st*St+it*mt*St)*Dt,rt[14]=(yt*dt*lt-ut*vt*lt-yt*st*ht+it*vt*ht+ut*st*St-it*dt*St)*Dt,rt[15]=(ut*mt*lt-ft*dt*lt+ft*st*ht-it*mt*ht-ut*st*gt+it*dt*gt)*Dt,this}scale(rt){const it=this.elements,st=rt.x,lt=rt.y,ct=rt.z;return it[0]*=st,it[4]*=lt,it[8]*=ct,it[1]*=st,it[5]*=lt,it[9]*=ct,it[2]*=st,it[6]*=lt,it[10]*=ct,it[3]*=st,it[7]*=lt,it[11]*=ct,this}getMaxScaleOnAxis(){const rt=this.elements,it=rt[0]*rt[0]+rt[1]*rt[1]+rt[2]*rt[2],st=rt[4]*rt[4]+rt[5]*rt[5]+rt[6]*rt[6],lt=rt[8]*rt[8]+rt[9]*rt[9]+rt[10]*rt[10];return Math.sqrt(Math.max(it,st,lt))}makeTranslation(rt,it,st){return rt.isVector3?this.set(1,0,0,rt.x,0,1,0,rt.y,0,0,1,rt.z,0,0,0,1):this.set(1,0,0,rt,0,1,0,it,0,0,1,st,0,0,0,1),this}makeRotationX(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(1,0,0,0,0,it,-st,0,0,st,it,0,0,0,0,1),this}makeRotationY(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,0,st,0,0,1,0,0,-st,0,it,0,0,0,0,1),this}makeRotationZ(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,-st,0,0,st,it,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(rt,it){const st=Math.cos(it),lt=Math.sin(it),ct=1-st,ut=rt.x,dt=rt.y,ht=rt.z,pt=ct*ut,ft=ct*dt;return this.set(pt*ut+st,pt*dt-lt*ht,pt*ht+lt*dt,0,pt*dt+lt*ht,ft*dt+st,ft*ht-lt*ut,0,pt*ht-lt*dt,ft*ht+lt*ut,ct*ht*ht+st,0,0,0,0,1),this}makeScale(rt,it,st){return this.set(rt,0,0,0,0,it,0,0,0,0,st,0,0,0,0,1),this}makeShear(rt,it,st,lt,ct,ut){return this.set(1,st,ct,0,rt,1,ut,0,it,lt,1,0,0,0,0,1),this}compose(rt,it,st){const lt=this.elements,ct=it._x,ut=it._y,dt=it._z,ht=it._w,pt=ct+ct,ft=ut+ut,mt=dt+dt,gt=ct*pt,xt=ct*ft,yt=ct*mt,vt=ut*ft,St=ut*mt,Et=dt*mt,wt=ht*pt,Rt=ht*ft,Tt=ht*mt,It=st.x,At=st.y,Dt=st.z;return lt[0]=(1-(vt+Et))*It,lt[1]=(xt+Tt)*It,lt[2]=(yt-Rt)*It,lt[3]=0,lt[4]=(xt-Tt)*At,lt[5]=(1-(gt+Et))*At,lt[6]=(St+wt)*At,lt[7]=0,lt[8]=(yt+Rt)*Dt,lt[9]=(St-wt)*Dt,lt[10]=(1-(gt+vt))*Dt,lt[11]=0,lt[12]=rt.x,lt[13]=rt.y,lt[14]=rt.z,lt[15]=1,this}decompose(rt,it,st){const lt=this.elements;let ct=_v1$5.set(lt[0],lt[1],lt[2]).length();const ut=_v1$5.set(lt[4],lt[5],lt[6]).length(),dt=_v1$5.set(lt[8],lt[9],lt[10]).length();this.determinant()<0&&(ct=-ct),rt.x=lt[12],rt.y=lt[13],rt.z=lt[14],_m1$2.copy(this);const pt=1/ct,ft=1/ut,mt=1/dt;return _m1$2.elements[0]*=pt,_m1$2.elements[1]*=pt,_m1$2.elements[2]*=pt,_m1$2.elements[4]*=ft,_m1$2.elements[5]*=ft,_m1$2.elements[6]*=ft,_m1$2.elements[8]*=mt,_m1$2.elements[9]*=mt,_m1$2.elements[10]*=mt,it.setFromRotationMatrix(_m1$2),st.x=ct,st.y=ut,st.z=dt,this}makePerspective(rt,it,st,lt,ct,ut,dt=WebGLCoordinateSystem){const ht=this.elements,pt=2*ct/(it-rt),ft=2*ct/(st-lt),mt=(it+rt)/(it-rt),gt=(st+lt)/(st-lt);let xt,yt;if(dt===WebGLCoordinateSystem)xt=-(ut+ct)/(ut-ct),yt=-2*ut*ct/(ut-ct);else if(dt===WebGPUCoordinateSystem)xt=-ut/(ut-ct),yt=-ut*ct/(ut-ct);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+dt);return ht[0]=pt,ht[4]=0,ht[8]=mt,ht[12]=0,ht[1]=0,ht[5]=ft,ht[9]=gt,ht[13]=0,ht[2]=0,ht[6]=0,ht[10]=xt,ht[14]=yt,ht[3]=0,ht[7]=0,ht[11]=-1,ht[15]=0,this}makeOrthographic(rt,it,st,lt,ct,ut,dt=WebGLCoordinateSystem){const ht=this.elements,pt=1/(it-rt),ft=1/(st-lt),mt=1/(ut-ct),gt=(it+rt)*pt,xt=(st+lt)*ft;let yt,vt;if(dt===WebGLCoordinateSystem)yt=(ut+ct)*mt,vt=-2*mt;else if(dt===WebGPUCoordinateSystem)yt=ct*mt,vt=-1*mt;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+dt);return ht[0]=2*pt,ht[4]=0,ht[8]=0,ht[12]=-gt,ht[1]=0,ht[5]=2*ft,ht[9]=0,ht[13]=-xt,ht[2]=0,ht[6]=0,ht[10]=vt,ht[14]=-yt,ht[3]=0,ht[7]=0,ht[11]=0,ht[15]=1,this}equals(rt){const it=this.elements,st=rt.elements;for(let lt=0;lt<16;lt++)if(it[lt]!==st[lt])return!1;return!0}fromArray(rt,it=0){for(let st=0;st<16;st++)this.elements[st]=rt[st+it];return this}toArray(rt=[],it=0){const st=this.elements;return rt[it]=st[0],rt[it+1]=st[1],rt[it+2]=st[2],rt[it+3]=st[3],rt[it+4]=st[4],rt[it+5]=st[5],rt[it+6]=st[6],rt[it+7]=st[7],rt[it+8]=st[8],rt[it+9]=st[9],rt[it+10]=st[10],rt[it+11]=st[11],rt[it+12]=st[12],rt[it+13]=st[13],rt[it+14]=st[14],rt[it+15]=st[15],rt}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(rt=0,it=0,st=0,lt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=rt,this._y=it,this._z=st,this._order=lt}get x(){return this._x}set x(rt){this._x=rt,this._onChangeCallback()}get y(){return this._y}set y(rt){this._y=rt,this._onChangeCallback()}get z(){return this._z}set z(rt){this._z=rt,this._onChangeCallback()}get order(){return this._order}set order(rt){this._order=rt,this._onChangeCallback()}set(rt,it,st,lt=this._order){return this._x=rt,this._y=it,this._z=st,this._order=lt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(rt){return this._x=rt._x,this._y=rt._y,this._z=rt._z,this._order=rt._order,this._onChangeCallback(),this}setFromRotationMatrix(rt,it=this._order,st=!0){const lt=rt.elements,ct=lt[0],ut=lt[4],dt=lt[8],ht=lt[1],pt=lt[5],ft=lt[9],mt=lt[2],gt=lt[6],xt=lt[10];switch(it){case"XYZ":this._y=Math.asin(clamp(dt,-1,1)),Math.abs(dt)<.9999999?(this._x=Math.atan2(-ft,xt),this._z=Math.atan2(-ut,ct)):(this._x=Math.atan2(gt,pt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(ft,-1,1)),Math.abs(ft)<.9999999?(this._y=Math.atan2(dt,xt),this._z=Math.atan2(ht,pt)):(this._y=Math.atan2(-mt,ct),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(gt,-1,1)),Math.abs(gt)<.9999999?(this._y=Math.atan2(-mt,xt),this._z=Math.atan2(-ut,pt)):(this._y=0,this._z=Math.atan2(ht,ct));break;case"ZYX":this._y=Math.asin(-clamp(mt,-1,1)),Math.abs(mt)<.9999999?(this._x=Math.atan2(gt,xt),this._z=Math.atan2(ht,ct)):(this._x=0,this._z=Math.atan2(-ut,pt));break;case"YZX":this._z=Math.asin(clamp(ht,-1,1)),Math.abs(ht)<.9999999?(this._x=Math.atan2(-ft,pt),this._y=Math.atan2(-mt,ct)):(this._x=0,this._y=Math.atan2(dt,xt));break;case"XZY":this._z=Math.asin(-clamp(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(gt,pt),this._y=Math.atan2(dt,ct)):(this._x=Math.atan2(-ft,xt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+it)}return this._order=it,st===!0&&this._onChangeCallback(),this}setFromQuaternion(rt,it,st){return _matrix$1.makeRotationFromQuaternion(rt),this.setFromRotationMatrix(_matrix$1,it,st)}setFromVector3(rt,it=this._order){return this.set(rt.x,rt.y,rt.z,it)}reorder(rt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,rt)}equals(rt){return rt._x===this._x&&rt._y===this._y&&rt._z===this._z&&rt._order===this._order}fromArray(rt){return this._x=rt[0],this._y=rt[1],this._z=rt[2],rt[3]!==void 0&&(this._order=rt[3]),this._onChangeCallback(),this}toArray(rt=[],it=0){return rt[it]=this._x,rt[it+1]=this._y,rt[it+2]=this._z,rt[it+3]=this._order,rt}_onChange(rt){return this._onChangeCallback=rt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(rt){this.mask=(1<<rt|0)>>>0}enable(rt){this.mask|=1<<rt|0}enableAll(){this.mask=-1}toggle(rt){this.mask^=1<<rt|0}disable(rt){this.mask&=~(1<<rt|0)}disableAll(){this.mask=0}test(rt){return(this.mask&rt.mask)!==0}isEnabled(rt){return(this.mask&(1<<rt|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const rt=new Vector3,it=new Euler,st=new Quaternion,lt=new Vector3(1,1,1);function ct(){st.setFromEuler(it,!1)}function ut(){it.setFromQuaternion(st,void 0,!1)}it._onChange(ct),st._onChange(ut),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:rt},rotation:{configurable:!0,enumerable:!0,value:it},quaternion:{configurable:!0,enumerable:!0,value:st},scale:{configurable:!0,enumerable:!0,value:lt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(rt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(rt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(rt){return this.quaternion.premultiply(rt),this}setRotationFromAxisAngle(rt,it){this.quaternion.setFromAxisAngle(rt,it)}setRotationFromEuler(rt){this.quaternion.setFromEuler(rt,!0)}setRotationFromMatrix(rt){this.quaternion.setFromRotationMatrix(rt)}setRotationFromQuaternion(rt){this.quaternion.copy(rt)}rotateOnAxis(rt,it){return _q1.setFromAxisAngle(rt,it),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(rt,it){return _q1.setFromAxisAngle(rt,it),this.quaternion.premultiply(_q1),this}rotateX(rt){return this.rotateOnAxis(_xAxis,rt)}rotateY(rt){return this.rotateOnAxis(_yAxis,rt)}rotateZ(rt){return this.rotateOnAxis(_zAxis,rt)}translateOnAxis(rt,it){return _v1$4.copy(rt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(it)),this}translateX(rt){return this.translateOnAxis(_xAxis,rt)}translateY(rt){return this.translateOnAxis(_yAxis,rt)}translateZ(rt){return this.translateOnAxis(_zAxis,rt)}localToWorld(rt){return this.updateWorldMatrix(!0,!1),rt.applyMatrix4(this.matrixWorld)}worldToLocal(rt){return this.updateWorldMatrix(!0,!1),rt.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(rt,it,st){rt.isVector3?_target.copy(rt):_target.set(rt,it,st);const lt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),lt&&(_m1$1.extractRotation(lt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(rt){if(arguments.length>1){for(let it=0;it<arguments.length;it++)this.add(arguments[it]);return this}return rt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",rt),this):(rt&&rt.isObject3D?(rt.parent!==null&&rt.parent.remove(rt),rt.parent=this,this.children.push(rt),rt.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",rt),this)}remove(rt){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.remove(arguments[st]);return this}const it=this.children.indexOf(rt);return it!==-1&&(rt.parent=null,this.children.splice(it,1),rt.dispatchEvent(_removedEvent)),this}removeFromParent(){const rt=this.parent;return rt!==null&&rt.remove(this),this}clear(){return this.remove(...this.children)}attach(rt){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),rt.parent!==null&&(rt.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(rt.parent.matrixWorld)),rt.applyMatrix4(_m1$1),this.add(rt),rt.updateWorldMatrix(!1,!0),this}getObjectById(rt){return this.getObjectByProperty("id",rt)}getObjectByName(rt){return this.getObjectByProperty("name",rt)}getObjectByProperty(rt,it){if(this[rt]===it)return this;for(let st=0,lt=this.children.length;st<lt;st++){const ut=this.children[st].getObjectByProperty(rt,it);if(ut!==void 0)return ut}}getObjectsByProperty(rt,it,st=[]){this[rt]===it&&st.push(this);const lt=this.children;for(let ct=0,ut=lt.length;ct<ut;ct++)lt[ct].getObjectsByProperty(rt,it,st);return st}getWorldPosition(rt){return this.updateWorldMatrix(!0,!1),rt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(rt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,rt,_scale$2),rt}getWorldScale(rt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,rt),rt}getWorldDirection(rt){this.updateWorldMatrix(!0,!1);const it=this.matrixWorld.elements;return rt.set(it[8],it[9],it[10]).normalize()}raycast(){}traverse(rt){rt(this);const it=this.children;for(let st=0,lt=it.length;st<lt;st++)it[st].traverse(rt)}traverseVisible(rt){if(this.visible===!1)return;rt(this);const it=this.children;for(let st=0,lt=it.length;st<lt;st++)it[st].traverseVisible(rt)}traverseAncestors(rt){const it=this.parent;it!==null&&(rt(it),it.traverseAncestors(rt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(rt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||rt)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,rt=!0);const it=this.children;for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];(ct.matrixWorldAutoUpdate===!0||rt===!0)&&ct.updateMatrixWorld(rt)}}updateWorldMatrix(rt,it){const st=this.parent;if(rt===!0&&st!==null&&st.matrixWorldAutoUpdate===!0&&st.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),it===!0){const lt=this.children;for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct];dt.matrixWorldAutoUpdate===!0&&dt.updateWorldMatrix(!1,!0)}}}toJSON(rt){const it=rt===void 0||typeof rt=="string",st={};it&&(rt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},st.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const lt={};lt.uuid=this.uuid,lt.type=this.type,this.name!==""&&(lt.name=this.name),this.castShadow===!0&&(lt.castShadow=!0),this.receiveShadow===!0&&(lt.receiveShadow=!0),this.visible===!1&&(lt.visible=!1),this.frustumCulled===!1&&(lt.frustumCulled=!1),this.renderOrder!==0&&(lt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(lt.userData=this.userData),lt.layers=this.layers.mask,lt.matrix=this.matrix.toArray(),lt.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(lt.matrixAutoUpdate=!1),this.isInstancedMesh&&(lt.type="InstancedMesh",lt.count=this.count,lt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(lt.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(lt.type="BatchedMesh",lt.perObjectFrustumCulled=this.perObjectFrustumCulled,lt.sortObjects=this.sortObjects,lt.drawRanges=this._drawRanges,lt.reservedRanges=this._reservedRanges,lt.visibility=this._visibility,lt.active=this._active,lt.bounds=this._bounds.map(dt=>({boxInitialized:dt.boxInitialized,boxMin:dt.box.min.toArray(),boxMax:dt.box.max.toArray(),sphereInitialized:dt.sphereInitialized,sphereRadius:dt.sphere.radius,sphereCenter:dt.sphere.center.toArray()})),lt.maxGeometryCount=this._maxGeometryCount,lt.maxVertexCount=this._maxVertexCount,lt.maxIndexCount=this._maxIndexCount,lt.geometryInitialized=this._geometryInitialized,lt.geometryCount=this._geometryCount,lt.matricesTexture=this._matricesTexture.toJSON(rt),this.boundingSphere!==null&&(lt.boundingSphere={center:lt.boundingSphere.center.toArray(),radius:lt.boundingSphere.radius}),this.boundingBox!==null&&(lt.boundingBox={min:lt.boundingBox.min.toArray(),max:lt.boundingBox.max.toArray()}));function ct(dt,ht){return dt[ht.uuid]===void 0&&(dt[ht.uuid]=ht.toJSON(rt)),ht.uuid}if(this.isScene)this.background&&(this.background.isColor?lt.background=this.background.toJSON():this.background.isTexture&&(lt.background=this.background.toJSON(rt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(lt.environment=this.environment.toJSON(rt).uuid);else if(this.isMesh||this.isLine||this.isPoints){lt.geometry=ct(rt.geometries,this.geometry);const dt=this.geometry.parameters;if(dt!==void 0&&dt.shapes!==void 0){const ht=dt.shapes;if(Array.isArray(ht))for(let pt=0,ft=ht.length;pt<ft;pt++){const mt=ht[pt];ct(rt.shapes,mt)}else ct(rt.shapes,ht)}}if(this.isSkinnedMesh&&(lt.bindMode=this.bindMode,lt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ct(rt.skeletons,this.skeleton),lt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const dt=[];for(let ht=0,pt=this.material.length;ht<pt;ht++)dt.push(ct(rt.materials,this.material[ht]));lt.material=dt}else lt.material=ct(rt.materials,this.material);if(this.children.length>0){lt.children=[];for(let dt=0;dt<this.children.length;dt++)lt.children.push(this.children[dt].toJSON(rt).object)}if(this.animations.length>0){lt.animations=[];for(let dt=0;dt<this.animations.length;dt++){const ht=this.animations[dt];lt.animations.push(ct(rt.animations,ht))}}if(it){const dt=ut(rt.geometries),ht=ut(rt.materials),pt=ut(rt.textures),ft=ut(rt.images),mt=ut(rt.shapes),gt=ut(rt.skeletons),xt=ut(rt.animations),yt=ut(rt.nodes);dt.length>0&&(st.geometries=dt),ht.length>0&&(st.materials=ht),pt.length>0&&(st.textures=pt),ft.length>0&&(st.images=ft),mt.length>0&&(st.shapes=mt),gt.length>0&&(st.skeletons=gt),xt.length>0&&(st.animations=xt),yt.length>0&&(st.nodes=yt)}return st.object=lt,st;function ut(dt){const ht=[];for(const pt in dt){const ft=dt[pt];delete ft.metadata,ht.push(ft)}return ht}}clone(rt){return new this.constructor().copy(this,rt)}copy(rt,it=!0){if(this.name=rt.name,this.up.copy(rt.up),this.position.copy(rt.position),this.rotation.order=rt.rotation.order,this.quaternion.copy(rt.quaternion),this.scale.copy(rt.scale),this.matrix.copy(rt.matrix),this.matrixWorld.copy(rt.matrixWorld),this.matrixAutoUpdate=rt.matrixAutoUpdate,this.matrixWorldAutoUpdate=rt.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=rt.matrixWorldNeedsUpdate,this.layers.mask=rt.layers.mask,this.visible=rt.visible,this.castShadow=rt.castShadow,this.receiveShadow=rt.receiveShadow,this.frustumCulled=rt.frustumCulled,this.renderOrder=rt.renderOrder,this.animations=rt.animations.slice(),this.userData=JSON.parse(JSON.stringify(rt.userData)),it===!0)for(let st=0;st<rt.children.length;st++){const lt=rt.children[st];this.add(lt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(rt=new Vector3,it=new Vector3,st=new Vector3){this.a=rt,this.b=it,this.c=st}static getNormal(rt,it,st,lt){lt.subVectors(st,it),_v0$1.subVectors(rt,it),lt.cross(_v0$1);const ct=lt.lengthSq();return ct>0?lt.multiplyScalar(1/Math.sqrt(ct)):lt.set(0,0,0)}static getBarycoord(rt,it,st,lt,ct){_v0$1.subVectors(lt,it),_v1$3.subVectors(st,it),_v2$2.subVectors(rt,it);const ut=_v0$1.dot(_v0$1),dt=_v0$1.dot(_v1$3),ht=_v0$1.dot(_v2$2),pt=_v1$3.dot(_v1$3),ft=_v1$3.dot(_v2$2),mt=ut*pt-dt*dt;if(mt===0)return ct.set(0,0,0),null;const gt=1/mt,xt=(pt*ht-dt*ft)*gt,yt=(ut*ft-dt*ht)*gt;return ct.set(1-xt-yt,yt,xt)}static containsPoint(rt,it,st,lt){return this.getBarycoord(rt,it,st,lt,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(rt,it,st,lt,ct,ut,dt,ht){return this.getBarycoord(rt,it,st,lt,_v3$2)===null?(ht.x=0,ht.y=0,"z"in ht&&(ht.z=0),"w"in ht&&(ht.w=0),null):(ht.setScalar(0),ht.addScaledVector(ct,_v3$2.x),ht.addScaledVector(ut,_v3$2.y),ht.addScaledVector(dt,_v3$2.z),ht)}static isFrontFacing(rt,it,st,lt){return _v0$1.subVectors(st,it),_v1$3.subVectors(rt,it),_v0$1.cross(_v1$3).dot(lt)<0}set(rt,it,st){return this.a.copy(rt),this.b.copy(it),this.c.copy(st),this}setFromPointsAndIndices(rt,it,st,lt){return this.a.copy(rt[it]),this.b.copy(rt[st]),this.c.copy(rt[lt]),this}setFromAttributeAndIndices(rt,it,st,lt){return this.a.fromBufferAttribute(rt,it),this.b.fromBufferAttribute(rt,st),this.c.fromBufferAttribute(rt,lt),this}clone(){return new this.constructor().copy(this)}copy(rt){return this.a.copy(rt.a),this.b.copy(rt.b),this.c.copy(rt.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(rt){return rt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(rt){return Triangle.getNormal(this.a,this.b,this.c,rt)}getPlane(rt){return rt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(rt,it){return Triangle.getBarycoord(rt,this.a,this.b,this.c,it)}getInterpolation(rt,it,st,lt,ct){return Triangle.getInterpolation(rt,this.a,this.b,this.c,it,st,lt,ct)}containsPoint(rt){return Triangle.containsPoint(rt,this.a,this.b,this.c)}isFrontFacing(rt){return Triangle.isFrontFacing(this.a,this.b,this.c,rt)}intersectsBox(rt){return rt.intersectsTriangle(this)}closestPointToPoint(rt,it){const st=this.a,lt=this.b,ct=this.c;let ut,dt;_vab.subVectors(lt,st),_vac.subVectors(ct,st),_vap.subVectors(rt,st);const ht=_vab.dot(_vap),pt=_vac.dot(_vap);if(ht<=0&&pt<=0)return it.copy(st);_vbp.subVectors(rt,lt);const ft=_vab.dot(_vbp),mt=_vac.dot(_vbp);if(ft>=0&&mt<=ft)return it.copy(lt);const gt=ht*mt-ft*pt;if(gt<=0&&ht>=0&&ft<=0)return ut=ht/(ht-ft),it.copy(st).addScaledVector(_vab,ut);_vcp.subVectors(rt,ct);const xt=_vab.dot(_vcp),yt=_vac.dot(_vcp);if(yt>=0&&xt<=yt)return it.copy(ct);const vt=xt*pt-ht*yt;if(vt<=0&&pt>=0&&yt<=0)return dt=pt/(pt-yt),it.copy(st).addScaledVector(_vac,dt);const St=ft*yt-xt*mt;if(St<=0&&mt-ft>=0&&xt-yt>=0)return _vbc.subVectors(ct,lt),dt=(mt-ft)/(mt-ft+(xt-yt)),it.copy(lt).addScaledVector(_vbc,dt);const Et=1/(St+vt+gt);return ut=vt*Et,dt=gt*Et,it.copy(st).addScaledVector(_vab,ut).addScaledVector(_vac,dt)}equals(rt){return rt.a.equals(this.a)&&rt.b.equals(this.b)&&rt.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(nt,rt,it){return it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*6*(2/3-it):nt}class Color{constructor(rt,it,st){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(rt,it,st)}set(rt,it,st){if(it===void 0&&st===void 0){const lt=rt;lt&&lt.isColor?this.copy(lt):typeof lt=="number"?this.setHex(lt):typeof lt=="string"&&this.setStyle(lt)}else this.setRGB(rt,it,st);return this}setScalar(rt){return this.r=rt,this.g=rt,this.b=rt,this}setHex(rt,it=SRGBColorSpace){return rt=Math.floor(rt),this.r=(rt>>16&255)/255,this.g=(rt>>8&255)/255,this.b=(rt&255)/255,ColorManagement.toWorkingColorSpace(this,it),this}setRGB(rt,it,st,lt=ColorManagement.workingColorSpace){return this.r=rt,this.g=it,this.b=st,ColorManagement.toWorkingColorSpace(this,lt),this}setHSL(rt,it,st,lt=ColorManagement.workingColorSpace){if(rt=euclideanModulo(rt,1),it=clamp(it,0,1),st=clamp(st,0,1),it===0)this.r=this.g=this.b=st;else{const ct=st<=.5?st*(1+it):st+it-st*it,ut=2*st-ct;this.r=hue2rgb(ut,ct,rt+1/3),this.g=hue2rgb(ut,ct,rt),this.b=hue2rgb(ut,ct,rt-1/3)}return ColorManagement.toWorkingColorSpace(this,lt),this}setStyle(rt,it=SRGBColorSpace){function st(ct){ct!==void 0&&parseFloat(ct)<1&&console.warn("THREE.Color: Alpha component of "+rt+" will be ignored.")}let lt;if(lt=/^(\w+)\(([^\)]*)\)/.exec(rt)){let ct;const ut=lt[1],dt=lt[2];switch(ut){case"rgb":case"rgba":if(ct=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setRGB(Math.min(255,parseInt(ct[1],10))/255,Math.min(255,parseInt(ct[2],10))/255,Math.min(255,parseInt(ct[3],10))/255,it);if(ct=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setRGB(Math.min(100,parseInt(ct[1],10))/100,Math.min(100,parseInt(ct[2],10))/100,Math.min(100,parseInt(ct[3],10))/100,it);break;case"hsl":case"hsla":if(ct=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setHSL(parseFloat(ct[1])/360,parseFloat(ct[2])/100,parseFloat(ct[3])/100,it);break;default:console.warn("THREE.Color: Unknown color model "+rt)}}else if(lt=/^\#([A-Fa-f\d]+)$/.exec(rt)){const ct=lt[1],ut=ct.length;if(ut===3)return this.setRGB(parseInt(ct.charAt(0),16)/15,parseInt(ct.charAt(1),16)/15,parseInt(ct.charAt(2),16)/15,it);if(ut===6)return this.setHex(parseInt(ct,16),it);console.warn("THREE.Color: Invalid hex color "+rt)}else if(rt&&rt.length>0)return this.setColorName(rt,it);return this}setColorName(rt,it=SRGBColorSpace){const st=_colorKeywords[rt.toLowerCase()];return st!==void 0?this.setHex(st,it):console.warn("THREE.Color: Unknown color "+rt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(rt){return this.r=rt.r,this.g=rt.g,this.b=rt.b,this}copySRGBToLinear(rt){return this.r=SRGBToLinear(rt.r),this.g=SRGBToLinear(rt.g),this.b=SRGBToLinear(rt.b),this}copyLinearToSRGB(rt){return this.r=LinearToSRGB(rt.r),this.g=LinearToSRGB(rt.g),this.b=LinearToSRGB(rt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(rt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),rt),Math.round(clamp(_color$1.r*255,0,255))*65536+Math.round(clamp(_color$1.g*255,0,255))*256+Math.round(clamp(_color$1.b*255,0,255))}getHexString(rt=SRGBColorSpace){return("000000"+this.getHex(rt).toString(16)).slice(-6)}getHSL(rt,it=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),it);const st=_color$1.r,lt=_color$1.g,ct=_color$1.b,ut=Math.max(st,lt,ct),dt=Math.min(st,lt,ct);let ht,pt;const ft=(dt+ut)/2;if(dt===ut)ht=0,pt=0;else{const mt=ut-dt;switch(pt=ft<=.5?mt/(ut+dt):mt/(2-ut-dt),ut){case st:ht=(lt-ct)/mt+(lt<ct?6:0);break;case lt:ht=(ct-st)/mt+2;break;case ct:ht=(st-lt)/mt+4;break}ht/=6}return rt.h=ht,rt.s=pt,rt.l=ft,rt}getRGB(rt,it=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),it),rt.r=_color$1.r,rt.g=_color$1.g,rt.b=_color$1.b,rt}getStyle(rt=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),rt);const it=_color$1.r,st=_color$1.g,lt=_color$1.b;return rt!==SRGBColorSpace?`color(${rt} ${it.toFixed(3)} ${st.toFixed(3)} ${lt.toFixed(3)})`:`rgb(${Math.round(it*255)},${Math.round(st*255)},${Math.round(lt*255)})`}offsetHSL(rt,it,st){return this.getHSL(_hslA),this.setHSL(_hslA.h+rt,_hslA.s+it,_hslA.l+st)}add(rt){return this.r+=rt.r,this.g+=rt.g,this.b+=rt.b,this}addColors(rt,it){return this.r=rt.r+it.r,this.g=rt.g+it.g,this.b=rt.b+it.b,this}addScalar(rt){return this.r+=rt,this.g+=rt,this.b+=rt,this}sub(rt){return this.r=Math.max(0,this.r-rt.r),this.g=Math.max(0,this.g-rt.g),this.b=Math.max(0,this.b-rt.b),this}multiply(rt){return this.r*=rt.r,this.g*=rt.g,this.b*=rt.b,this}multiplyScalar(rt){return this.r*=rt,this.g*=rt,this.b*=rt,this}lerp(rt,it){return this.r+=(rt.r-this.r)*it,this.g+=(rt.g-this.g)*it,this.b+=(rt.b-this.b)*it,this}lerpColors(rt,it,st){return this.r=rt.r+(it.r-rt.r)*st,this.g=rt.g+(it.g-rt.g)*st,this.b=rt.b+(it.b-rt.b)*st,this}lerpHSL(rt,it){this.getHSL(_hslA),rt.getHSL(_hslB);const st=lerp(_hslA.h,_hslB.h,it),lt=lerp(_hslA.s,_hslB.s,it),ct=lerp(_hslA.l,_hslB.l,it);return this.setHSL(st,lt,ct),this}setFromVector3(rt){return this.r=rt.x,this.g=rt.y,this.b=rt.z,this}applyMatrix3(rt){const it=this.r,st=this.g,lt=this.b,ct=rt.elements;return this.r=ct[0]*it+ct[3]*st+ct[6]*lt,this.g=ct[1]*it+ct[4]*st+ct[7]*lt,this.b=ct[2]*it+ct[5]*st+ct[8]*lt,this}equals(rt){return rt.r===this.r&&rt.g===this.g&&rt.b===this.b}fromArray(rt,it=0){return this.r=rt[it],this.g=rt[it+1],this.b=rt[it+2],this}toArray(rt=[],it=0){return rt[it]=this.r,rt[it+1]=this.g,rt[it+2]=this.b,rt}fromBufferAttribute(rt,it){return this.r=rt.getX(it),this.g=rt.getY(it),this.b=rt.getZ(it),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color$1=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(rt){this._alphaTest>0!=rt>0&&this.version++,this._alphaTest=rt}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(rt){if(rt!==void 0)for(const it in rt){const st=rt[it];if(st===void 0){console.warn(`THREE.Material: parameter '${it}' has value of undefined.`);continue}const lt=this[it];if(lt===void 0){console.warn(`THREE.Material: '${it}' is not a property of THREE.${this.type}.`);continue}lt&&lt.isColor?lt.set(st):lt&&lt.isVector3&&st&&st.isVector3?lt.copy(st):this[it]=st}}toJSON(rt){const it=rt===void 0||typeof rt=="string";it&&(rt={textures:{},images:{}});const st={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};st.uuid=this.uuid,st.type=this.type,this.name!==""&&(st.name=this.name),this.color&&this.color.isColor&&(st.color=this.color.getHex()),this.roughness!==void 0&&(st.roughness=this.roughness),this.metalness!==void 0&&(st.metalness=this.metalness),this.sheen!==void 0&&(st.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(st.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(st.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(st.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(st.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(st.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(st.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(st.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(st.shininess=this.shininess),this.clearcoat!==void 0&&(st.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(st.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(st.clearcoatMap=this.clearcoatMap.toJSON(rt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(st.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(rt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(st.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(rt).uuid,st.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(st.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(st.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(st.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(st.iridescenceMap=this.iridescenceMap.toJSON(rt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(st.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(rt).uuid),this.anisotropy!==void 0&&(st.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(st.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(st.anisotropyMap=this.anisotropyMap.toJSON(rt).uuid),this.map&&this.map.isTexture&&(st.map=this.map.toJSON(rt).uuid),this.matcap&&this.matcap.isTexture&&(st.matcap=this.matcap.toJSON(rt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(st.alphaMap=this.alphaMap.toJSON(rt).uuid),this.lightMap&&this.lightMap.isTexture&&(st.lightMap=this.lightMap.toJSON(rt).uuid,st.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(st.aoMap=this.aoMap.toJSON(rt).uuid,st.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(st.bumpMap=this.bumpMap.toJSON(rt).uuid,st.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(st.normalMap=this.normalMap.toJSON(rt).uuid,st.normalMapType=this.normalMapType,st.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(st.displacementMap=this.displacementMap.toJSON(rt).uuid,st.displacementScale=this.displacementScale,st.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(st.roughnessMap=this.roughnessMap.toJSON(rt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(st.metalnessMap=this.metalnessMap.toJSON(rt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(st.emissiveMap=this.emissiveMap.toJSON(rt).uuid),this.specularMap&&this.specularMap.isTexture&&(st.specularMap=this.specularMap.toJSON(rt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(st.specularIntensityMap=this.specularIntensityMap.toJSON(rt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(st.specularColorMap=this.specularColorMap.toJSON(rt).uuid),this.envMap&&this.envMap.isTexture&&(st.envMap=this.envMap.toJSON(rt).uuid,this.combine!==void 0&&(st.combine=this.combine)),this.envMapIntensity!==void 0&&(st.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(st.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(st.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(st.gradientMap=this.gradientMap.toJSON(rt).uuid),this.transmission!==void 0&&(st.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(st.transmissionMap=this.transmissionMap.toJSON(rt).uuid),this.thickness!==void 0&&(st.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(st.thicknessMap=this.thicknessMap.toJSON(rt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(st.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(st.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(st.size=this.size),this.shadowSide!==null&&(st.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(st.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(st.blending=this.blending),this.side!==FrontSide&&(st.side=this.side),this.vertexColors===!0&&(st.vertexColors=!0),this.opacity<1&&(st.opacity=this.opacity),this.transparent===!0&&(st.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(st.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(st.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(st.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(st.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(st.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(st.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(st.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(st.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(st.depthFunc=this.depthFunc),this.depthTest===!1&&(st.depthTest=this.depthTest),this.depthWrite===!1&&(st.depthWrite=this.depthWrite),this.colorWrite===!1&&(st.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(st.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(st.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(st.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(st.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(st.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(st.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(st.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(st.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(st.rotation=this.rotation),this.polygonOffset===!0&&(st.polygonOffset=!0),this.polygonOffsetFactor!==0&&(st.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(st.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(st.linewidth=this.linewidth),this.dashSize!==void 0&&(st.dashSize=this.dashSize),this.gapSize!==void 0&&(st.gapSize=this.gapSize),this.scale!==void 0&&(st.scale=this.scale),this.dithering===!0&&(st.dithering=!0),this.alphaTest>0&&(st.alphaTest=this.alphaTest),this.alphaHash===!0&&(st.alphaHash=!0),this.alphaToCoverage===!0&&(st.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(st.premultipliedAlpha=!0),this.forceSinglePass===!0&&(st.forceSinglePass=!0),this.wireframe===!0&&(st.wireframe=!0),this.wireframeLinewidth>1&&(st.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(st.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(st.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(st.flatShading=!0),this.visible===!1&&(st.visible=!1),this.toneMapped===!1&&(st.toneMapped=!1),this.fog===!1&&(st.fog=!1),Object.keys(this.userData).length>0&&(st.userData=this.userData);function lt(ct){const ut=[];for(const dt in ct){const ht=ct[dt];delete ht.metadata,ut.push(ht)}return ut}if(it){const ct=lt(rt.textures),ut=lt(rt.images);ct.length>0&&(st.textures=ct),ut.length>0&&(st.images=ut)}return st}clone(){return new this.constructor().copy(this)}copy(rt){this.name=rt.name,this.blending=rt.blending,this.side=rt.side,this.vertexColors=rt.vertexColors,this.opacity=rt.opacity,this.transparent=rt.transparent,this.blendSrc=rt.blendSrc,this.blendDst=rt.blendDst,this.blendEquation=rt.blendEquation,this.blendSrcAlpha=rt.blendSrcAlpha,this.blendDstAlpha=rt.blendDstAlpha,this.blendEquationAlpha=rt.blendEquationAlpha,this.blendColor.copy(rt.blendColor),this.blendAlpha=rt.blendAlpha,this.depthFunc=rt.depthFunc,this.depthTest=rt.depthTest,this.depthWrite=rt.depthWrite,this.stencilWriteMask=rt.stencilWriteMask,this.stencilFunc=rt.stencilFunc,this.stencilRef=rt.stencilRef,this.stencilFuncMask=rt.stencilFuncMask,this.stencilFail=rt.stencilFail,this.stencilZFail=rt.stencilZFail,this.stencilZPass=rt.stencilZPass,this.stencilWrite=rt.stencilWrite;const it=rt.clippingPlanes;let st=null;if(it!==null){const lt=it.length;st=new Array(lt);for(let ct=0;ct!==lt;++ct)st[ct]=it[ct].clone()}return this.clippingPlanes=st,this.clipIntersection=rt.clipIntersection,this.clipShadows=rt.clipShadows,this.shadowSide=rt.shadowSide,this.colorWrite=rt.colorWrite,this.precision=rt.precision,this.polygonOffset=rt.polygonOffset,this.polygonOffsetFactor=rt.polygonOffsetFactor,this.polygonOffsetUnits=rt.polygonOffsetUnits,this.dithering=rt.dithering,this.alphaTest=rt.alphaTest,this.alphaHash=rt.alphaHash,this.alphaToCoverage=rt.alphaToCoverage,this.premultipliedAlpha=rt.premultipliedAlpha,this.forceSinglePass=rt.forceSinglePass,this.visible=rt.visible,this.toneMapped=rt.toneMapped,this.userData=JSON.parse(JSON.stringify(rt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(rt){rt===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(rt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.fog=rt.fog,this}}const _tables=_generateTables();function _generateTables(){const nt=new ArrayBuffer(4),rt=new Float32Array(nt),it=new Uint32Array(nt),st=new Uint32Array(512),lt=new Uint32Array(512);for(let ht=0;ht<256;++ht){const pt=ht-127;pt<-27?(st[ht]=0,st[ht|256]=32768,lt[ht]=24,lt[ht|256]=24):pt<-14?(st[ht]=1024>>-pt-14,st[ht|256]=1024>>-pt-14|32768,lt[ht]=-pt-1,lt[ht|256]=-pt-1):pt<=15?(st[ht]=pt+15<<10,st[ht|256]=pt+15<<10|32768,lt[ht]=13,lt[ht|256]=13):pt<128?(st[ht]=31744,st[ht|256]=64512,lt[ht]=24,lt[ht|256]=24):(st[ht]=31744,st[ht|256]=64512,lt[ht]=13,lt[ht|256]=13)}const ct=new Uint32Array(2048),ut=new Uint32Array(64),dt=new Uint32Array(64);for(let ht=1;ht<1024;++ht){let pt=ht<<13,ft=0;for(;!(pt&8388608);)pt<<=1,ft-=8388608;pt&=-8388609,ft+=947912704,ct[ht]=pt|ft}for(let ht=1024;ht<2048;++ht)ct[ht]=939524096+(ht-1024<<13);for(let ht=1;ht<31;++ht)ut[ht]=ht<<23;ut[31]=1199570944,ut[32]=2147483648;for(let ht=33;ht<63;++ht)ut[ht]=2147483648+(ht-32<<23);ut[63]=3347054592;for(let ht=1;ht<64;++ht)ht!==32&&(dt[ht]=1024);return{floatView:rt,uint32View:it,baseTable:st,shiftTable:lt,mantissaTable:ct,exponentTable:ut,offsetTable:dt}}function toHalfFloat(nt){Math.abs(nt)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),nt=clamp(nt,-65504,65504),_tables.floatView[0]=nt;const rt=_tables.uint32View[0],it=rt>>23&511;return _tables.baseTable[it]+((rt&8388607)>>_tables.shiftTable[it])}function fromHalfFloat(nt){const rt=nt>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[rt]+(nt&1023)]+_tables.exponentTable[rt],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(rt,it,st=!1){if(Array.isArray(rt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=rt,this.itemSize=it,this.count=rt!==void 0?rt.length/it:0,this.normalized=st,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(rt){rt===!0&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(rt){return this.usage=rt,this}addUpdateRange(rt,it){this.updateRanges.push({start:rt,count:it})}clearUpdateRanges(){this.updateRanges.length=0}copy(rt){return this.name=rt.name,this.array=new rt.array.constructor(rt.array),this.itemSize=rt.itemSize,this.count=rt.count,this.normalized=rt.normalized,this.usage=rt.usage,this.gpuType=rt.gpuType,this}copyAt(rt,it,st){rt*=this.itemSize,st*=it.itemSize;for(let lt=0,ct=this.itemSize;lt<ct;lt++)this.array[rt+lt]=it.array[st+lt];return this}copyArray(rt){return this.array.set(rt),this}applyMatrix3(rt){if(this.itemSize===2)for(let it=0,st=this.count;it<st;it++)_vector2$1.fromBufferAttribute(this,it),_vector2$1.applyMatrix3(rt),this.setXY(it,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyMatrix3(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyMatrix4(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyNormalMatrix(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.transformDirection(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(rt,it=0){return this.array.set(rt,it),this}getComponent(rt,it){let st=this.array[rt*this.itemSize+it];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(rt,it,st){return this.normalized&&(st=normalize(st,this.array)),this.array[rt*this.itemSize+it]=st,this}getX(rt){let it=this.array[rt*this.itemSize];return this.normalized&&(it=denormalize(it,this.array)),it}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize]=it,this}getY(rt){let it=this.array[rt*this.itemSize+1];return this.normalized&&(it=denormalize(it,this.array)),it}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+1]=it,this}getZ(rt){let it=this.array[rt*this.itemSize+2];return this.normalized&&(it=denormalize(it,this.array)),it}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+2]=it,this}getW(rt){let it=this.array[rt*this.itemSize+3];return this.normalized&&(it=denormalize(it,this.array)),it}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+3]=it,this}setXY(rt,it,st){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this}setXYZ(rt,it,st,lt){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this.array[rt+2]=lt,this}setXYZW(rt,it,st,lt,ct){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this.array[rt+2]=lt,this.array[rt+3]=ct,this}onUpload(rt){return this.onUploadCallback=rt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const rt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(rt.name=this.name),this.usage!==StaticDrawUsage&&(rt.usage=this.usage),rt}}class Int8BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int8Array(rt),it,st)}}class Uint8BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint8Array(rt),it,st)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint8ClampedArray(rt),it,st)}}class Int16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int16Array(rt),it,st)}}class Uint16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint16Array(rt),it,st)}}class Int32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int32Array(rt),it,st)}}class Uint32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint32Array(rt),it,st)}}class Float16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint16Array(rt),it,st),this.isFloat16BufferAttribute=!0}getX(rt){let it=fromHalfFloat(this.array[rt*this.itemSize]);return this.normalized&&(it=denormalize(it,this.array)),it}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize]=toHalfFloat(it),this}getY(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+1]);return this.normalized&&(it=denormalize(it,this.array)),it}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+1]=toHalfFloat(it),this}getZ(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+2]);return this.normalized&&(it=denormalize(it,this.array)),it}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+2]=toHalfFloat(it),this}getW(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+3]);return this.normalized&&(it=denormalize(it,this.array)),it}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+3]=toHalfFloat(it),this}setXY(rt,it,st){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this}setXYZ(rt,it,st,lt){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this.array[rt+2]=toHalfFloat(lt),this}setXYZW(rt,it,st,lt,ct){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this.array[rt+2]=toHalfFloat(lt),this.array[rt+3]=toHalfFloat(ct),this}}class Float32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Float32Array(rt),it,st)}}class Float64BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Float64Array(rt),it,st)}}let _id$2=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(rt){return Array.isArray(rt)?this.index=new(arrayNeedsUint32(rt)?Uint32BufferAttribute:Uint16BufferAttribute)(rt,1):this.index=rt,this}getAttribute(rt){return this.attributes[rt]}setAttribute(rt,it){return this.attributes[rt]=it,this}deleteAttribute(rt){return delete this.attributes[rt],this}hasAttribute(rt){return this.attributes[rt]!==void 0}addGroup(rt,it,st=0){this.groups.push({start:rt,count:it,materialIndex:st})}clearGroups(){this.groups=[]}setDrawRange(rt,it){this.drawRange.start=rt,this.drawRange.count=it}applyMatrix4(rt){const it=this.attributes.position;it!==void 0&&(it.applyMatrix4(rt),it.needsUpdate=!0);const st=this.attributes.normal;if(st!==void 0){const ct=new Matrix3().getNormalMatrix(rt);st.applyNormalMatrix(ct),st.needsUpdate=!0}const lt=this.attributes.tangent;return lt!==void 0&&(lt.transformDirection(rt),lt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(rt){return _m1.makeRotationFromQuaternion(rt),this.applyMatrix4(_m1),this}rotateX(rt){return _m1.makeRotationX(rt),this.applyMatrix4(_m1),this}rotateY(rt){return _m1.makeRotationY(rt),this.applyMatrix4(_m1),this}rotateZ(rt){return _m1.makeRotationZ(rt),this.applyMatrix4(_m1),this}translate(rt,it,st){return _m1.makeTranslation(rt,it,st),this.applyMatrix4(_m1),this}scale(rt,it,st){return _m1.makeScale(rt,it,st),this.applyMatrix4(_m1),this}lookAt(rt){return _obj.lookAt(rt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(rt){const it=[];for(let st=0,lt=rt.length;st<lt;st++){const ct=rt[st];it.push(ct.x,ct.y,ct.z||0)}return this.setAttribute("position",new Float32BufferAttribute(it,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const rt=this.attributes.position,it=this.morphAttributes.position;if(rt&&rt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(rt!==void 0){if(this.boundingBox.setFromBufferAttribute(rt),it)for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];_box$2.setFromBufferAttribute(ct),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const rt=this.attributes.position,it=this.morphAttributes.position;if(rt&&rt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(rt){const st=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(rt),it)for(let ct=0,ut=it.length;ct<ut;ct++){const dt=it[ct];_boxMorphTargets.setFromBufferAttribute(dt),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(st);let lt=0;for(let ct=0,ut=rt.count;ct<ut;ct++)_vector$8.fromBufferAttribute(rt,ct),lt=Math.max(lt,st.distanceToSquared(_vector$8));if(it)for(let ct=0,ut=it.length;ct<ut;ct++){const dt=it[ct],ht=this.morphTargetsRelative;for(let pt=0,ft=dt.count;pt<ft;pt++)_vector$8.fromBufferAttribute(dt,pt),ht&&(_offset.fromBufferAttribute(rt,pt),_vector$8.add(_offset)),lt=Math.max(lt,st.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(lt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const rt=this.index,it=this.attributes;if(rt===null||it.position===void 0||it.normal===void 0||it.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const st=rt.array,lt=it.position.array,ct=it.normal.array,ut=it.uv.array,dt=lt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*dt),4));const ht=this.getAttribute("tangent").array,pt=[],ft=[];for(let Lt=0;Lt<dt;Lt++)pt[Lt]=new Vector3,ft[Lt]=new Vector3;const mt=new Vector3,gt=new Vector3,xt=new Vector3,yt=new Vector2,vt=new Vector2,St=new Vector2,Et=new Vector3,wt=new Vector3;function Rt(Lt,Pt,Ot){mt.fromArray(lt,Lt*3),gt.fromArray(lt,Pt*3),xt.fromArray(lt,Ot*3),yt.fromArray(ut,Lt*2),vt.fromArray(ut,Pt*2),St.fromArray(ut,Ot*2),gt.sub(mt),xt.sub(mt),vt.sub(yt),St.sub(yt);const Nt=1/(vt.x*St.y-St.x*vt.y);isFinite(Nt)&&(Et.copy(gt).multiplyScalar(St.y).addScaledVector(xt,-vt.y).multiplyScalar(Nt),wt.copy(xt).multiplyScalar(vt.x).addScaledVector(gt,-St.x).multiplyScalar(Nt),pt[Lt].add(Et),pt[Pt].add(Et),pt[Ot].add(Et),ft[Lt].add(wt),ft[Pt].add(wt),ft[Ot].add(wt))}let Tt=this.groups;Tt.length===0&&(Tt=[{start:0,count:st.length}]);for(let Lt=0,Pt=Tt.length;Lt<Pt;++Lt){const Ot=Tt[Lt],Nt=Ot.start,$t=Ot.count;for(let Vt=Nt,Ut=Nt+$t;Vt<Ut;Vt+=3)Rt(st[Vt+0],st[Vt+1],st[Vt+2])}const It=new Vector3,At=new Vector3,Dt=new Vector3,jt=new Vector3;function Ft(Lt){Dt.fromArray(ct,Lt*3),jt.copy(Dt);const Pt=pt[Lt];It.copy(Pt),It.sub(Dt.multiplyScalar(Dt.dot(Pt))).normalize(),At.crossVectors(jt,Pt);const Nt=At.dot(ft[Lt])<0?-1:1;ht[Lt*4]=It.x,ht[Lt*4+1]=It.y,ht[Lt*4+2]=It.z,ht[Lt*4+3]=Nt}for(let Lt=0,Pt=Tt.length;Lt<Pt;++Lt){const Ot=Tt[Lt],Nt=Ot.start,$t=Ot.count;for(let Vt=Nt,Ut=Nt+$t;Vt<Ut;Vt+=3)Ft(st[Vt+0]),Ft(st[Vt+1]),Ft(st[Vt+2])}}computeVertexNormals(){const rt=this.index,it=this.getAttribute("position");if(it!==void 0){let st=this.getAttribute("normal");if(st===void 0)st=new BufferAttribute(new Float32Array(it.count*3),3),this.setAttribute("normal",st);else for(let gt=0,xt=st.count;gt<xt;gt++)st.setXYZ(gt,0,0,0);const lt=new Vector3,ct=new Vector3,ut=new Vector3,dt=new Vector3,ht=new Vector3,pt=new Vector3,ft=new Vector3,mt=new Vector3;if(rt)for(let gt=0,xt=rt.count;gt<xt;gt+=3){const yt=rt.getX(gt+0),vt=rt.getX(gt+1),St=rt.getX(gt+2);lt.fromBufferAttribute(it,yt),ct.fromBufferAttribute(it,vt),ut.fromBufferAttribute(it,St),ft.subVectors(ut,ct),mt.subVectors(lt,ct),ft.cross(mt),dt.fromBufferAttribute(st,yt),ht.fromBufferAttribute(st,vt),pt.fromBufferAttribute(st,St),dt.add(ft),ht.add(ft),pt.add(ft),st.setXYZ(yt,dt.x,dt.y,dt.z),st.setXYZ(vt,ht.x,ht.y,ht.z),st.setXYZ(St,pt.x,pt.y,pt.z)}else for(let gt=0,xt=it.count;gt<xt;gt+=3)lt.fromBufferAttribute(it,gt+0),ct.fromBufferAttribute(it,gt+1),ut.fromBufferAttribute(it,gt+2),ft.subVectors(ut,ct),mt.subVectors(lt,ct),ft.cross(mt),st.setXYZ(gt+0,ft.x,ft.y,ft.z),st.setXYZ(gt+1,ft.x,ft.y,ft.z),st.setXYZ(gt+2,ft.x,ft.y,ft.z);this.normalizeNormals(),st.needsUpdate=!0}}normalizeNormals(){const rt=this.attributes.normal;for(let it=0,st=rt.count;it<st;it++)_vector$8.fromBufferAttribute(rt,it),_vector$8.normalize(),rt.setXYZ(it,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function rt(dt,ht){const pt=dt.array,ft=dt.itemSize,mt=dt.normalized,gt=new pt.constructor(ht.length*ft);let xt=0,yt=0;for(let vt=0,St=ht.length;vt<St;vt++){dt.isInterleavedBufferAttribute?xt=ht[vt]*dt.data.stride+dt.offset:xt=ht[vt]*ft;for(let Et=0;Et<ft;Et++)gt[yt++]=pt[xt++]}return new BufferAttribute(gt,ft,mt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const it=new BufferGeometry,st=this.index.array,lt=this.attributes;for(const dt in lt){const ht=lt[dt],pt=rt(ht,st);it.setAttribute(dt,pt)}const ct=this.morphAttributes;for(const dt in ct){const ht=[],pt=ct[dt];for(let ft=0,mt=pt.length;ft<mt;ft++){const gt=pt[ft],xt=rt(gt,st);ht.push(xt)}it.morphAttributes[dt]=ht}it.morphTargetsRelative=this.morphTargetsRelative;const ut=this.groups;for(let dt=0,ht=ut.length;dt<ht;dt++){const pt=ut[dt];it.addGroup(pt.start,pt.count,pt.materialIndex)}return it}toJSON(){const rt={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),Object.keys(this.userData).length>0&&(rt.userData=this.userData),this.parameters!==void 0){const ht=this.parameters;for(const pt in ht)ht[pt]!==void 0&&(rt[pt]=ht[pt]);return rt}rt.data={attributes:{}};const it=this.index;it!==null&&(rt.data.index={type:it.array.constructor.name,array:Array.prototype.slice.call(it.array)});const st=this.attributes;for(const ht in st){const pt=st[ht];rt.data.attributes[ht]=pt.toJSON(rt.data)}const lt={};let ct=!1;for(const ht in this.morphAttributes){const pt=this.morphAttributes[ht],ft=[];for(let mt=0,gt=pt.length;mt<gt;mt++){const xt=pt[mt];ft.push(xt.toJSON(rt.data))}ft.length>0&&(lt[ht]=ft,ct=!0)}ct&&(rt.data.morphAttributes=lt,rt.data.morphTargetsRelative=this.morphTargetsRelative);const ut=this.groups;ut.length>0&&(rt.data.groups=JSON.parse(JSON.stringify(ut)));const dt=this.boundingSphere;return dt!==null&&(rt.data.boundingSphere={center:dt.center.toArray(),radius:dt.radius}),rt}clone(){return new this.constructor().copy(this)}copy(rt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const it={};this.name=rt.name;const st=rt.index;st!==null&&this.setIndex(st.clone(it));const lt=rt.attributes;for(const pt in lt){const ft=lt[pt];this.setAttribute(pt,ft.clone(it))}const ct=rt.morphAttributes;for(const pt in ct){const ft=[],mt=ct[pt];for(let gt=0,xt=mt.length;gt<xt;gt++)ft.push(mt[gt].clone(it));this.morphAttributes[pt]=ft}this.morphTargetsRelative=rt.morphTargetsRelative;const ut=rt.groups;for(let pt=0,ft=ut.length;pt<ft;pt++){const mt=ut[pt];this.addGroup(mt.start,mt.count,mt.materialIndex)}const dt=rt.boundingBox;dt!==null&&(this.boundingBox=dt.clone());const ht=rt.boundingSphere;return ht!==null&&(this.boundingSphere=ht.clone()),this.drawRange.start=rt.drawRange.start,this.drawRange.count=rt.drawRange.count,this.userData=rt.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(rt=new BufferGeometry,it=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),rt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=rt.morphTargetInfluences.slice()),rt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},rt.morphTargetDictionary)),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}getVertexPosition(rt,it){const st=this.geometry,lt=st.attributes.position,ct=st.morphAttributes.position,ut=st.morphTargetsRelative;it.fromBufferAttribute(lt,rt);const dt=this.morphTargetInfluences;if(ct&&dt){_morphA.set(0,0,0);for(let ht=0,pt=ct.length;ht<pt;ht++){const ft=dt[ht],mt=ct[ht];ft!==0&&(_tempA.fromBufferAttribute(mt,rt),ut?_morphA.addScaledVector(_tempA,ft):_morphA.addScaledVector(_tempA.sub(it),ft))}it.add(_morphA)}return it}raycast(rt,it){const st=this.geometry,lt=this.material,ct=this.matrixWorld;lt!==void 0&&(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$6.copy(st.boundingSphere),_sphere$6.applyMatrix4(ct),_ray$3.copy(rt.ray).recast(rt.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(rt.far-rt.near)**2))&&(_inverseMatrix$3.copy(ct).invert(),_ray$3.copy(rt.ray).applyMatrix4(_inverseMatrix$3),!(st.boundingBox!==null&&_ray$3.intersectsBox(st.boundingBox)===!1)&&this._computeIntersections(rt,it,_ray$3)))}_computeIntersections(rt,it,st){let lt;const ct=this.geometry,ut=this.material,dt=ct.index,ht=ct.attributes.position,pt=ct.attributes.uv,ft=ct.attributes.uv1,mt=ct.attributes.normal,gt=ct.groups,xt=ct.drawRange;if(dt!==null)if(Array.isArray(ut))for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],Et=ut[St.materialIndex],wt=Math.max(St.start,xt.start),Rt=Math.min(dt.count,Math.min(St.start+St.count,xt.start+xt.count));for(let Tt=wt,It=Rt;Tt<It;Tt+=3){const At=dt.getX(Tt),Dt=dt.getX(Tt+1),jt=dt.getX(Tt+2);lt=checkGeometryIntersection(this,Et,rt,st,pt,ft,mt,At,Dt,jt),lt&&(lt.faceIndex=Math.floor(Tt/3),lt.face.materialIndex=St.materialIndex,it.push(lt))}}else{const yt=Math.max(0,xt.start),vt=Math.min(dt.count,xt.start+xt.count);for(let St=yt,Et=vt;St<Et;St+=3){const wt=dt.getX(St),Rt=dt.getX(St+1),Tt=dt.getX(St+2);lt=checkGeometryIntersection(this,ut,rt,st,pt,ft,mt,wt,Rt,Tt),lt&&(lt.faceIndex=Math.floor(St/3),it.push(lt))}}else if(ht!==void 0)if(Array.isArray(ut))for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],Et=ut[St.materialIndex],wt=Math.max(St.start,xt.start),Rt=Math.min(ht.count,Math.min(St.start+St.count,xt.start+xt.count));for(let Tt=wt,It=Rt;Tt<It;Tt+=3){const At=Tt,Dt=Tt+1,jt=Tt+2;lt=checkGeometryIntersection(this,Et,rt,st,pt,ft,mt,At,Dt,jt),lt&&(lt.faceIndex=Math.floor(Tt/3),lt.face.materialIndex=St.materialIndex,it.push(lt))}}else{const yt=Math.max(0,xt.start),vt=Math.min(ht.count,xt.start+xt.count);for(let St=yt,Et=vt;St<Et;St+=3){const wt=St,Rt=St+1,Tt=St+2;lt=checkGeometryIntersection(this,ut,rt,st,pt,ft,mt,wt,Rt,Tt),lt&&(lt.faceIndex=Math.floor(St/3),it.push(lt))}}}}function checkIntersection(nt,rt,it,st,lt,ct,ut,dt){let ht;if(rt.side===BackSide?ht=st.intersectTriangle(ut,ct,lt,!0,dt):ht=st.intersectTriangle(lt,ct,ut,rt.side===FrontSide,dt),ht===null)return null;_intersectionPointWorld.copy(dt),_intersectionPointWorld.applyMatrix4(nt.matrixWorld);const pt=it.ray.origin.distanceTo(_intersectionPointWorld);return pt<it.near||pt>it.far?null:{distance:pt,point:_intersectionPointWorld.clone(),object:nt}}function checkGeometryIntersection(nt,rt,it,st,lt,ct,ut,dt,ht,pt){nt.getVertexPosition(dt,_vA$1),nt.getVertexPosition(ht,_vB$1),nt.getVertexPosition(pt,_vC$1);const ft=checkIntersection(nt,rt,it,st,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ft){lt&&(_uvA$1.fromBufferAttribute(lt,dt),_uvB$1.fromBufferAttribute(lt,ht),_uvC$1.fromBufferAttribute(lt,pt),ft.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),ct&&(_uvA$1.fromBufferAttribute(ct,dt),_uvB$1.fromBufferAttribute(ct,ht),_uvC$1.fromBufferAttribute(ct,pt),ft.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),ft.uv2=ft.uv1),ut&&(_normalA.fromBufferAttribute(ut,dt),_normalB.fromBufferAttribute(ut,ht),_normalC.fromBufferAttribute(ut,pt),ft.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),ft.normal.dot(st.direction)>0&&ft.normal.multiplyScalar(-1));const mt={a:dt,b:ht,c:pt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,mt.normal),ft.face=mt}return ft}class BoxGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=1,ct=1,ut=1){super(),this.type="BoxGeometry",this.parameters={width:rt,height:it,depth:st,widthSegments:lt,heightSegments:ct,depthSegments:ut};const dt=this;lt=Math.floor(lt),ct=Math.floor(ct),ut=Math.floor(ut);const ht=[],pt=[],ft=[],mt=[];let gt=0,xt=0;yt("z","y","x",-1,-1,st,it,rt,ut,ct,0),yt("z","y","x",1,-1,st,it,-rt,ut,ct,1),yt("x","z","y",1,1,rt,st,it,lt,ut,2),yt("x","z","y",1,-1,rt,st,-it,lt,ut,3),yt("x","y","z",1,-1,rt,it,st,lt,ct,4),yt("x","y","z",-1,-1,rt,it,-st,lt,ct,5),this.setIndex(ht),this.setAttribute("position",new Float32BufferAttribute(pt,3)),this.setAttribute("normal",new Float32BufferAttribute(ft,3)),this.setAttribute("uv",new Float32BufferAttribute(mt,2));function yt(vt,St,Et,wt,Rt,Tt,It,At,Dt,jt,Ft){const Lt=Tt/Dt,Pt=It/jt,Ot=Tt/2,Nt=It/2,$t=At/2,Vt=Dt+1,Ut=jt+1;let zt=0,Bt=0;const Ht=new Vector3;for(let Gt=0;Gt<Ut;Gt++){const Kt=Gt*Pt-Nt;for(let Xt=0;Xt<Vt;Xt++){const or=Xt*Lt-Ot;Ht[vt]=or*wt,Ht[St]=Kt*Rt,Ht[Et]=$t,pt.push(Ht.x,Ht.y,Ht.z),Ht[vt]=0,Ht[St]=0,Ht[Et]=At>0?1:-1,ft.push(Ht.x,Ht.y,Ht.z),mt.push(Xt/Dt),mt.push(1-Gt/jt),zt+=1}}for(let Gt=0;Gt<jt;Gt++)for(let Kt=0;Kt<Dt;Kt++){const Xt=gt+Kt+Vt*Gt,or=gt+Kt+Vt*(Gt+1),tr=gt+(Kt+1)+Vt*(Gt+1),dr=gt+(Kt+1)+Vt*Gt;ht.push(Xt,or,dr),ht.push(or,tr,dr),Bt+=6}dt.addGroup(xt,Bt,Ft),xt+=Bt,gt+=zt}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new BoxGeometry(rt.width,rt.height,rt.depth,rt.widthSegments,rt.heightSegments,rt.depthSegments)}}function cloneUniforms(nt){const rt={};for(const it in nt){rt[it]={};for(const st in nt[it]){const lt=nt[it][st];lt&&(lt.isColor||lt.isMatrix3||lt.isMatrix4||lt.isVector2||lt.isVector3||lt.isVector4||lt.isTexture||lt.isQuaternion)?lt.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),rt[it][st]=null):rt[it][st]=lt.clone():Array.isArray(lt)?rt[it][st]=lt.slice():rt[it][st]=lt}}return rt}function mergeUniforms(nt){const rt={};for(let it=0;it<nt.length;it++){const st=cloneUniforms(nt[it]);for(const lt in st)rt[lt]=st[lt]}return rt}function cloneUniformsGroups(nt){const rt=[];for(let it=0;it<nt.length;it++)rt.push(nt[it].clone());return rt}function getUnlitUniformColorSpace(nt){return nt.getRenderTarget()===null?nt.outputColorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(rt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,rt!==void 0&&this.setValues(rt)}copy(rt){return super.copy(rt),this.fragmentShader=rt.fragmentShader,this.vertexShader=rt.vertexShader,this.uniforms=cloneUniforms(rt.uniforms),this.uniformsGroups=cloneUniformsGroups(rt.uniformsGroups),this.defines=Object.assign({},rt.defines),this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.fog=rt.fog,this.lights=rt.lights,this.clipping=rt.clipping,this.extensions=Object.assign({},rt.extensions),this.glslVersion=rt.glslVersion,this}toJSON(rt){const it=super.toJSON(rt);it.glslVersion=this.glslVersion,it.uniforms={};for(const lt in this.uniforms){const ut=this.uniforms[lt].value;ut&&ut.isTexture?it.uniforms[lt]={type:"t",value:ut.toJSON(rt).uuid}:ut&&ut.isColor?it.uniforms[lt]={type:"c",value:ut.getHex()}:ut&&ut.isVector2?it.uniforms[lt]={type:"v2",value:ut.toArray()}:ut&&ut.isVector3?it.uniforms[lt]={type:"v3",value:ut.toArray()}:ut&&ut.isVector4?it.uniforms[lt]={type:"v4",value:ut.toArray()}:ut&&ut.isMatrix3?it.uniforms[lt]={type:"m3",value:ut.toArray()}:ut&&ut.isMatrix4?it.uniforms[lt]={type:"m4",value:ut.toArray()}:it.uniforms[lt]={value:ut}}Object.keys(this.defines).length>0&&(it.defines=this.defines),it.vertexShader=this.vertexShader,it.fragmentShader=this.fragmentShader,it.lights=this.lights,it.clipping=this.clipping;const st={};for(const lt in this.extensions)this.extensions[lt]===!0&&(st[lt]=!0);return Object.keys(st).length>0&&(it.extensions=st),it}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(rt,it){return super.copy(rt,it),this.matrixWorldInverse.copy(rt.matrixWorldInverse),this.projectionMatrix.copy(rt.projectionMatrix),this.projectionMatrixInverse.copy(rt.projectionMatrixInverse),this.coordinateSystem=rt.coordinateSystem,this}getWorldDirection(rt){return super.getWorldDirection(rt).negate()}updateMatrixWorld(rt){super.updateMatrixWorld(rt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(rt,it){super.updateWorldMatrix(rt,it),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(rt=50,it=1,st=.1,lt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=rt,this.zoom=1,this.near=st,this.far=lt,this.focus=10,this.aspect=it,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(rt,it){return super.copy(rt,it),this.fov=rt.fov,this.zoom=rt.zoom,this.near=rt.near,this.far=rt.far,this.focus=rt.focus,this.aspect=rt.aspect,this.view=rt.view===null?null:Object.assign({},rt.view),this.filmGauge=rt.filmGauge,this.filmOffset=rt.filmOffset,this}setFocalLength(rt){const it=.5*this.getFilmHeight()/rt;this.fov=RAD2DEG*2*Math.atan(it),this.updateProjectionMatrix()}getFocalLength(){const rt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/rt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(rt,it,st){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),it.set(_v3$1.x,_v3$1.y).multiplyScalar(-rt/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),st.set(_v3$1.x,_v3$1.y).multiplyScalar(-rt/_v3$1.z)}getViewSize(rt,it){return this.getViewBounds(rt,_minTarget,_maxTarget),it.subVectors(_maxTarget,_minTarget)}setViewOffset(rt,it,st,lt,ct,ut){this.aspect=rt/it,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=rt,this.view.fullHeight=it,this.view.offsetX=st,this.view.offsetY=lt,this.view.width=ct,this.view.height=ut,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const rt=this.near;let it=rt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,st=2*it,lt=this.aspect*st,ct=-.5*lt;const ut=this.view;if(this.view!==null&&this.view.enabled){const ht=ut.fullWidth,pt=ut.fullHeight;ct+=ut.offsetX*lt/ht,it-=ut.offsetY*st/pt,lt*=ut.width/ht,st*=ut.height/pt}const dt=this.filmOffset;dt!==0&&(ct+=rt*dt/this.getFilmWidth()),this.projectionMatrix.makePerspective(ct,ct+lt,it,it-st,rt,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(rt){const it=super.toJSON(rt);return it.object.fov=this.fov,it.object.zoom=this.zoom,it.object.near=this.near,it.object.far=this.far,it.object.focus=this.focus,it.object.aspect=this.aspect,this.view!==null&&(it.object.view=Object.assign({},this.view)),it.object.filmGauge=this.filmGauge,it.object.filmOffset=this.filmOffset,it}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(rt,it,st){super(),this.type="CubeCamera",this.renderTarget=st,this.coordinateSystem=null,this.activeMipmapLevel=0;const lt=new PerspectiveCamera(fov,aspect,rt,it);lt.layers=this.layers,this.add(lt);const ct=new PerspectiveCamera(fov,aspect,rt,it);ct.layers=this.layers,this.add(ct);const ut=new PerspectiveCamera(fov,aspect,rt,it);ut.layers=this.layers,this.add(ut);const dt=new PerspectiveCamera(fov,aspect,rt,it);dt.layers=this.layers,this.add(dt);const ht=new PerspectiveCamera(fov,aspect,rt,it);ht.layers=this.layers,this.add(ht);const pt=new PerspectiveCamera(fov,aspect,rt,it);pt.layers=this.layers,this.add(pt)}updateCoordinateSystem(){const rt=this.coordinateSystem,it=this.children.concat(),[st,lt,ct,ut,dt,ht]=it;for(const pt of it)this.remove(pt);if(rt===WebGLCoordinateSystem)st.up.set(0,1,0),st.lookAt(1,0,0),lt.up.set(0,1,0),lt.lookAt(-1,0,0),ct.up.set(0,0,-1),ct.lookAt(0,1,0),ut.up.set(0,0,1),ut.lookAt(0,-1,0),dt.up.set(0,1,0),dt.lookAt(0,0,1),ht.up.set(0,1,0),ht.lookAt(0,0,-1);else if(rt===WebGPUCoordinateSystem)st.up.set(0,-1,0),st.lookAt(-1,0,0),lt.up.set(0,-1,0),lt.lookAt(1,0,0),ct.up.set(0,0,1),ct.lookAt(0,1,0),ut.up.set(0,0,-1),ut.lookAt(0,-1,0),dt.up.set(0,-1,0),dt.lookAt(0,0,1),ht.up.set(0,-1,0),ht.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+rt);for(const pt of it)this.add(pt),pt.updateMatrixWorld()}update(rt,it){this.parent===null&&this.updateMatrixWorld();const{renderTarget:st,activeMipmapLevel:lt}=this;this.coordinateSystem!==rt.coordinateSystem&&(this.coordinateSystem=rt.coordinateSystem,this.updateCoordinateSystem());const[ct,ut,dt,ht,pt,ft]=this.children,mt=rt.getRenderTarget(),gt=rt.getActiveCubeFace(),xt=rt.getActiveMipmapLevel(),yt=rt.xr.enabled;rt.xr.enabled=!1;const vt=st.texture.generateMipmaps;st.texture.generateMipmaps=!1,rt.setRenderTarget(st,0,lt),rt.render(it,ct),rt.setRenderTarget(st,1,lt),rt.render(it,ut),rt.setRenderTarget(st,2,lt),rt.render(it,dt),rt.setRenderTarget(st,3,lt),rt.render(it,ht),rt.setRenderTarget(st,4,lt),rt.render(it,pt),st.texture.generateMipmaps=vt,rt.setRenderTarget(st,5,lt),rt.render(it,ft),rt.setRenderTarget(mt,gt,xt),rt.xr.enabled=yt,st.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,pt,ft){rt=rt!==void 0?rt:[],it=it!==void 0?it:CubeReflectionMapping,super(rt,it,st,lt,ct,ut,dt,ht,pt,ft),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(rt){this.image=rt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(rt=1,it={}){super(rt,rt,it),this.isWebGLCubeRenderTarget=!0;const st={width:rt,height:rt,depth:1},lt=[st,st,st,st,st,st];it.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),it.colorSpace=it.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(lt,it.mapping,it.wrapS,it.wrapT,it.magFilter,it.minFilter,it.format,it.type,it.anisotropy,it.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=it.generateMipmaps!==void 0?it.generateMipmaps:!1,this.texture.minFilter=it.minFilter!==void 0?it.minFilter:LinearFilter}fromEquirectangularTexture(rt,it){this.texture.type=it.type,this.texture.colorSpace=it.colorSpace,this.texture.generateMipmaps=it.generateMipmaps,this.texture.minFilter=it.minFilter,this.texture.magFilter=it.magFilter;const st={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},lt=new BoxGeometry(5,5,5),ct=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(st.uniforms),vertexShader:st.vertexShader,fragmentShader:st.fragmentShader,side:BackSide,blending:NoBlending});ct.uniforms.tEquirect.value=it;const ut=new Mesh(lt,ct),dt=it.minFilter;return it.minFilter===LinearMipmapLinearFilter&&(it.minFilter=LinearFilter),new CubeCamera(1,10,this).update(rt,ut),it.minFilter=dt,ut.geometry.dispose(),ut.material.dispose(),this}clear(rt,it,st,lt){const ct=rt.getRenderTarget();for(let ut=0;ut<6;ut++)rt.setRenderTarget(this,ut),rt.clear(it,st,lt);rt.setRenderTarget(ct)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(rt=new Vector3(1,0,0),it=0){this.isPlane=!0,this.normal=rt,this.constant=it}set(rt,it){return this.normal.copy(rt),this.constant=it,this}setComponents(rt,it,st,lt){return this.normal.set(rt,it,st),this.constant=lt,this}setFromNormalAndCoplanarPoint(rt,it){return this.normal.copy(rt),this.constant=-it.dot(this.normal),this}setFromCoplanarPoints(rt,it,st){const lt=_vector1.subVectors(st,it).cross(_vector2.subVectors(rt,it)).normalize();return this.setFromNormalAndCoplanarPoint(lt,rt),this}copy(rt){return this.normal.copy(rt.normal),this.constant=rt.constant,this}normalize(){const rt=1/this.normal.length();return this.normal.multiplyScalar(rt),this.constant*=rt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(rt){return this.normal.dot(rt)+this.constant}distanceToSphere(rt){return this.distanceToPoint(rt.center)-rt.radius}projectPoint(rt,it){return it.copy(rt).addScaledVector(this.normal,-this.distanceToPoint(rt))}intersectLine(rt,it){const st=rt.delta(_vector1),lt=this.normal.dot(st);if(lt===0)return this.distanceToPoint(rt.start)===0?it.copy(rt.start):null;const ct=-(rt.start.dot(this.normal)+this.constant)/lt;return ct<0||ct>1?null:it.copy(rt.start).addScaledVector(st,ct)}intersectsLine(rt){const it=this.distanceToPoint(rt.start),st=this.distanceToPoint(rt.end);return it<0&&st>0||st<0&&it>0}intersectsBox(rt){return rt.intersectsPlane(this)}intersectsSphere(rt){return rt.intersectsPlane(this)}coplanarPoint(rt){return rt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(rt,it){const st=it||_normalMatrix.getNormalMatrix(rt),lt=this.coplanarPoint(_vector1).applyMatrix4(rt),ct=this.normal.applyMatrix3(st).normalize();return this.constant=-lt.dot(ct),this}translate(rt){return this.constant-=rt.dot(this.normal),this}equals(rt){return rt.normal.equals(this.normal)&&rt.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(rt=new Plane,it=new Plane,st=new Plane,lt=new Plane,ct=new Plane,ut=new Plane){this.planes=[rt,it,st,lt,ct,ut]}set(rt,it,st,lt,ct,ut){const dt=this.planes;return dt[0].copy(rt),dt[1].copy(it),dt[2].copy(st),dt[3].copy(lt),dt[4].copy(ct),dt[5].copy(ut),this}copy(rt){const it=this.planes;for(let st=0;st<6;st++)it[st].copy(rt.planes[st]);return this}setFromProjectionMatrix(rt,it=WebGLCoordinateSystem){const st=this.planes,lt=rt.elements,ct=lt[0],ut=lt[1],dt=lt[2],ht=lt[3],pt=lt[4],ft=lt[5],mt=lt[6],gt=lt[7],xt=lt[8],yt=lt[9],vt=lt[10],St=lt[11],Et=lt[12],wt=lt[13],Rt=lt[14],Tt=lt[15];if(st[0].setComponents(ht-ct,gt-pt,St-xt,Tt-Et).normalize(),st[1].setComponents(ht+ct,gt+pt,St+xt,Tt+Et).normalize(),st[2].setComponents(ht+ut,gt+ft,St+yt,Tt+wt).normalize(),st[3].setComponents(ht-ut,gt-ft,St-yt,Tt-wt).normalize(),st[4].setComponents(ht-dt,gt-mt,St-vt,Tt-Rt).normalize(),it===WebGLCoordinateSystem)st[5].setComponents(ht+dt,gt+mt,St+vt,Tt+Rt).normalize();else if(it===WebGPUCoordinateSystem)st[5].setComponents(dt,mt,vt,Rt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+it);return this}intersectsObject(rt){if(rt.boundingSphere!==void 0)rt.boundingSphere===null&&rt.computeBoundingSphere(),_sphere$5.copy(rt.boundingSphere).applyMatrix4(rt.matrixWorld);else{const it=rt.geometry;it.boundingSphere===null&&it.computeBoundingSphere(),_sphere$5.copy(it.boundingSphere).applyMatrix4(rt.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(rt){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(rt.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(rt){const it=this.planes,st=rt.center,lt=-rt.radius;for(let ct=0;ct<6;ct++)if(it[ct].distanceToPoint(st)<lt)return!1;return!0}intersectsBox(rt){const it=this.planes;for(let st=0;st<6;st++){const lt=it[st];if(_vector$7.x=lt.normal.x>0?rt.max.x:rt.min.x,_vector$7.y=lt.normal.y>0?rt.max.y:rt.min.y,_vector$7.z=lt.normal.z>0?rt.max.z:rt.min.z,lt.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(rt){const it=this.planes;for(let st=0;st<6;st++)if(it[st].distanceToPoint(rt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let nt=null,rt=!1,it=null,st=null;function lt(ct,ut){it(ct,ut),st=nt.requestAnimationFrame(lt)}return{start:function(){rt!==!0&&it!==null&&(st=nt.requestAnimationFrame(lt),rt=!0)},stop:function(){nt.cancelAnimationFrame(st),rt=!1},setAnimationLoop:function(ct){it=ct},setContext:function(ct){nt=ct}}}function WebGLAttributes(nt,rt){const it=rt.isWebGL2,st=new WeakMap;function lt(pt,ft){const mt=pt.array,gt=pt.usage,xt=mt.byteLength,yt=nt.createBuffer();nt.bindBuffer(ft,yt),nt.bufferData(ft,mt,gt),pt.onUploadCallback();let vt;if(mt instanceof Float32Array)vt=nt.FLOAT;else if(mt instanceof Uint16Array)if(pt.isFloat16BufferAttribute)if(it)vt=nt.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else vt=nt.UNSIGNED_SHORT;else if(mt instanceof Int16Array)vt=nt.SHORT;else if(mt instanceof Uint32Array)vt=nt.UNSIGNED_INT;else if(mt instanceof Int32Array)vt=nt.INT;else if(mt instanceof Int8Array)vt=nt.BYTE;else if(mt instanceof Uint8Array)vt=nt.UNSIGNED_BYTE;else if(mt instanceof Uint8ClampedArray)vt=nt.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+mt);return{buffer:yt,type:vt,bytesPerElement:mt.BYTES_PER_ELEMENT,version:pt.version,size:xt}}function ct(pt,ft,mt){const gt=ft.array,xt=ft._updateRange,yt=ft.updateRanges;if(nt.bindBuffer(mt,pt),xt.count===-1&&yt.length===0&&nt.bufferSubData(mt,0,gt),yt.length!==0){for(let vt=0,St=yt.length;vt<St;vt++){const Et=yt[vt];it?nt.bufferSubData(mt,Et.start*gt.BYTES_PER_ELEMENT,gt,Et.start,Et.count):nt.bufferSubData(mt,Et.start*gt.BYTES_PER_ELEMENT,gt.subarray(Et.start,Et.start+Et.count))}ft.clearUpdateRanges()}xt.count!==-1&&(it?nt.bufferSubData(mt,xt.offset*gt.BYTES_PER_ELEMENT,gt,xt.offset,xt.count):nt.bufferSubData(mt,xt.offset*gt.BYTES_PER_ELEMENT,gt.subarray(xt.offset,xt.offset+xt.count)),xt.count=-1),ft.onUploadCallback()}function ut(pt){return pt.isInterleavedBufferAttribute&&(pt=pt.data),st.get(pt)}function dt(pt){pt.isInterleavedBufferAttribute&&(pt=pt.data);const ft=st.get(pt);ft&&(nt.deleteBuffer(ft.buffer),st.delete(pt))}function ht(pt,ft){if(pt.isGLBufferAttribute){const gt=st.get(pt);(!gt||gt.version<pt.version)&&st.set(pt,{buffer:pt.buffer,type:pt.type,bytesPerElement:pt.elementSize,version:pt.version});return}pt.isInterleavedBufferAttribute&&(pt=pt.data);const mt=st.get(pt);if(mt===void 0)st.set(pt,lt(pt,ft));else if(mt.version<pt.version){if(mt.size!==pt.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");ct(mt.buffer,pt,ft),mt.version=pt.version}}return{get:ut,remove:dt,update:ht}}class PlaneGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=1){super(),this.type="PlaneGeometry",this.parameters={width:rt,height:it,widthSegments:st,heightSegments:lt};const ct=rt/2,ut=it/2,dt=Math.floor(st),ht=Math.floor(lt),pt=dt+1,ft=ht+1,mt=rt/dt,gt=it/ht,xt=[],yt=[],vt=[],St=[];for(let Et=0;Et<ft;Et++){const wt=Et*gt-ut;for(let Rt=0;Rt<pt;Rt++){const Tt=Rt*mt-ct;yt.push(Tt,-wt,0),vt.push(0,0,1),St.push(Rt/dt),St.push(1-Et/ht)}}for(let Et=0;Et<ht;Et++)for(let wt=0;wt<dt;wt++){const Rt=wt+pt*Et,Tt=wt+pt*(Et+1),It=wt+1+pt*(Et+1),At=wt+1+pt*Et;xt.push(Rt,Tt,At),xt.push(Tt,It,At)}this.setIndex(xt),this.setAttribute("position",new Float32BufferAttribute(yt,3)),this.setAttribute("normal",new Float32BufferAttribute(vt,3)),this.setAttribute("uv",new Float32BufferAttribute(St,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new PlaneGeometry(rt.width,rt.height,rt.widthSegments,rt.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(nt,rt,it,st,lt,ct,ut){const dt=new Color(0);let ht=ct===!0?0:1,pt,ft,mt=null,gt=0,xt=null;function yt(St,Et){let wt=!1,Rt=Et.isScene===!0?Et.background:null;Rt&&Rt.isTexture&&(Rt=(Et.backgroundBlurriness>0?it:rt).get(Rt)),Rt===null?vt(dt,ht):Rt&&Rt.isColor&&(vt(Rt,1),wt=!0);const Tt=nt.xr.getEnvironmentBlendMode();Tt==="additive"?st.buffers.color.setClear(0,0,0,1,ut):Tt==="alpha-blend"&&st.buffers.color.setClear(0,0,0,0,ut),(nt.autoClear||wt)&&nt.clear(nt.autoClearColor,nt.autoClearDepth,nt.autoClearStencil),Rt&&(Rt.isCubeTexture||Rt.mapping===CubeUVReflectionMapping)?(ft===void 0&&(ft=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),ft.geometry.deleteAttribute("normal"),ft.geometry.deleteAttribute("uv"),ft.onBeforeRender=function(It,At,Dt){this.matrixWorld.copyPosition(Dt.matrixWorld)},Object.defineProperty(ft.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),lt.update(ft)),ft.material.uniforms.envMap.value=Rt,ft.material.uniforms.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1,ft.material.uniforms.backgroundBlurriness.value=Et.backgroundBlurriness,ft.material.uniforms.backgroundIntensity.value=Et.backgroundIntensity,ft.material.toneMapped=ColorManagement.getTransfer(Rt.colorSpace)!==SRGBTransfer,(mt!==Rt||gt!==Rt.version||xt!==nt.toneMapping)&&(ft.material.needsUpdate=!0,mt=Rt,gt=Rt.version,xt=nt.toneMapping),ft.layers.enableAll(),St.unshift(ft,ft.geometry,ft.material,0,0,null)):Rt&&Rt.isTexture&&(pt===void 0&&(pt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),pt.geometry.deleteAttribute("normal"),Object.defineProperty(pt.material,"map",{get:function(){return this.uniforms.t2D.value}}),lt.update(pt)),pt.material.uniforms.t2D.value=Rt,pt.material.uniforms.backgroundIntensity.value=Et.backgroundIntensity,pt.material.toneMapped=ColorManagement.getTransfer(Rt.colorSpace)!==SRGBTransfer,Rt.matrixAutoUpdate===!0&&Rt.updateMatrix(),pt.material.uniforms.uvTransform.value.copy(Rt.matrix),(mt!==Rt||gt!==Rt.version||xt!==nt.toneMapping)&&(pt.material.needsUpdate=!0,mt=Rt,gt=Rt.version,xt=nt.toneMapping),pt.layers.enableAll(),St.unshift(pt,pt.geometry,pt.material,0,0,null))}function vt(St,Et){St.getRGB(_rgb,getUnlitUniformColorSpace(nt)),st.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,Et,ut)}return{getClearColor:function(){return dt},setClearColor:function(St,Et=1){dt.set(St),ht=Et,vt(dt,ht)},getClearAlpha:function(){return ht},setClearAlpha:function(St){ht=St,vt(dt,ht)},render:yt}}function WebGLBindingStates(nt,rt,it,st){const lt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),ct=st.isWebGL2?null:rt.get("OES_vertex_array_object"),ut=st.isWebGL2||ct!==null,dt={},ht=St(null);let pt=ht,ft=!1;function mt($t,Vt,Ut,zt,Bt){let Ht=!1;if(ut){const Gt=vt(zt,Ut,Vt);pt!==Gt&&(pt=Gt,xt(pt.object)),Ht=Et($t,zt,Ut,Bt),Ht&&wt($t,zt,Ut,Bt)}else{const Gt=Vt.wireframe===!0;(pt.geometry!==zt.id||pt.program!==Ut.id||pt.wireframe!==Gt)&&(pt.geometry=zt.id,pt.program=Ut.id,pt.wireframe=Gt,Ht=!0)}Bt!==null&&it.update(Bt,nt.ELEMENT_ARRAY_BUFFER),(Ht||ft)&&(ft=!1,jt($t,Vt,Ut,zt),Bt!==null&&nt.bindBuffer(nt.ELEMENT_ARRAY_BUFFER,it.get(Bt).buffer))}function gt(){return st.isWebGL2?nt.createVertexArray():ct.createVertexArrayOES()}function xt($t){return st.isWebGL2?nt.bindVertexArray($t):ct.bindVertexArrayOES($t)}function yt($t){return st.isWebGL2?nt.deleteVertexArray($t):ct.deleteVertexArrayOES($t)}function vt($t,Vt,Ut){const zt=Ut.wireframe===!0;let Bt=dt[$t.id];Bt===void 0&&(Bt={},dt[$t.id]=Bt);let Ht=Bt[Vt.id];Ht===void 0&&(Ht={},Bt[Vt.id]=Ht);let Gt=Ht[zt];return Gt===void 0&&(Gt=St(gt()),Ht[zt]=Gt),Gt}function St($t){const Vt=[],Ut=[],zt=[];for(let Bt=0;Bt<lt;Bt++)Vt[Bt]=0,Ut[Bt]=0,zt[Bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Vt,enabledAttributes:Ut,attributeDivisors:zt,object:$t,attributes:{},index:null}}function Et($t,Vt,Ut,zt){const Bt=pt.attributes,Ht=Vt.attributes;let Gt=0;const Kt=Ut.getAttributes();for(const Xt in Kt)if(Kt[Xt].location>=0){const tr=Bt[Xt];let dr=Ht[Xt];if(dr===void 0&&(Xt==="instanceMatrix"&&$t.instanceMatrix&&(dr=$t.instanceMatrix),Xt==="instanceColor"&&$t.instanceColor&&(dr=$t.instanceColor)),tr===void 0||tr.attribute!==dr||dr&&tr.data!==dr.data)return!0;Gt++}return pt.attributesNum!==Gt||pt.index!==zt}function wt($t,Vt,Ut,zt){const Bt={},Ht=Vt.attributes;let Gt=0;const Kt=Ut.getAttributes();for(const Xt in Kt)if(Kt[Xt].location>=0){let tr=Ht[Xt];tr===void 0&&(Xt==="instanceMatrix"&&$t.instanceMatrix&&(tr=$t.instanceMatrix),Xt==="instanceColor"&&$t.instanceColor&&(tr=$t.instanceColor));const dr={};dr.attribute=tr,tr&&tr.data&&(dr.data=tr.data),Bt[Xt]=dr,Gt++}pt.attributes=Bt,pt.attributesNum=Gt,pt.index=zt}function Rt(){const $t=pt.newAttributes;for(let Vt=0,Ut=$t.length;Vt<Ut;Vt++)$t[Vt]=0}function Tt($t){It($t,0)}function It($t,Vt){const Ut=pt.newAttributes,zt=pt.enabledAttributes,Bt=pt.attributeDivisors;Ut[$t]=1,zt[$t]===0&&(nt.enableVertexAttribArray($t),zt[$t]=1),Bt[$t]!==Vt&&((st.isWebGL2?nt:rt.get("ANGLE_instanced_arrays"))[st.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($t,Vt),Bt[$t]=Vt)}function At(){const $t=pt.newAttributes,Vt=pt.enabledAttributes;for(let Ut=0,zt=Vt.length;Ut<zt;Ut++)Vt[Ut]!==$t[Ut]&&(nt.disableVertexAttribArray(Ut),Vt[Ut]=0)}function Dt($t,Vt,Ut,zt,Bt,Ht,Gt){Gt===!0?nt.vertexAttribIPointer($t,Vt,Ut,Bt,Ht):nt.vertexAttribPointer($t,Vt,Ut,zt,Bt,Ht)}function jt($t,Vt,Ut,zt){if(st.isWebGL2===!1&&($t.isInstancedMesh||zt.isInstancedBufferGeometry)&&rt.get("ANGLE_instanced_arrays")===null)return;Rt();const Bt=zt.attributes,Ht=Ut.getAttributes(),Gt=Vt.defaultAttributeValues;for(const Kt in Ht){const Xt=Ht[Kt];if(Xt.location>=0){let or=Bt[Kt];if(or===void 0&&(Kt==="instanceMatrix"&&$t.instanceMatrix&&(or=$t.instanceMatrix),Kt==="instanceColor"&&$t.instanceColor&&(or=$t.instanceColor)),or!==void 0){const tr=or.normalized,dr=or.itemSize,fr=it.get(or);if(fr===void 0)continue;const Sr=fr.buffer,vr=fr.type,mr=fr.bytesPerElement,hr=st.isWebGL2===!0&&(vr===nt.INT||vr===nt.UNSIGNED_INT||or.gpuType===IntType);if(or.isInterleavedBufferAttribute){const gr=or.data,lr=gr.stride,Ir=or.offset;if(gr.isInstancedInterleavedBuffer){for(let wr=0;wr<Xt.locationSize;wr++)It(Xt.location+wr,gr.meshPerAttribute);$t.isInstancedMesh!==!0&&zt._maxInstanceCount===void 0&&(zt._maxInstanceCount=gr.meshPerAttribute*gr.count)}else for(let wr=0;wr<Xt.locationSize;wr++)Tt(Xt.location+wr);nt.bindBuffer(nt.ARRAY_BUFFER,Sr);for(let wr=0;wr<Xt.locationSize;wr++)Dt(Xt.location+wr,dr/Xt.locationSize,vr,tr,lr*mr,(Ir+dr/Xt.locationSize*wr)*mr,hr)}else{if(or.isInstancedBufferAttribute){for(let gr=0;gr<Xt.locationSize;gr++)It(Xt.location+gr,or.meshPerAttribute);$t.isInstancedMesh!==!0&&zt._maxInstanceCount===void 0&&(zt._maxInstanceCount=or.meshPerAttribute*or.count)}else for(let gr=0;gr<Xt.locationSize;gr++)Tt(Xt.location+gr);nt.bindBuffer(nt.ARRAY_BUFFER,Sr);for(let gr=0;gr<Xt.locationSize;gr++)Dt(Xt.location+gr,dr/Xt.locationSize,vr,tr,dr*mr,dr/Xt.locationSize*gr*mr,hr)}}else if(Gt!==void 0){const tr=Gt[Kt];if(tr!==void 0)switch(tr.length){case 2:nt.vertexAttrib2fv(Xt.location,tr);break;case 3:nt.vertexAttrib3fv(Xt.location,tr);break;case 4:nt.vertexAttrib4fv(Xt.location,tr);break;default:nt.vertexAttrib1fv(Xt.location,tr)}}}}At()}function Ft(){Ot();for(const $t in dt){const Vt=dt[$t];for(const Ut in Vt){const zt=Vt[Ut];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Vt[Ut]}delete dt[$t]}}function Lt($t){if(dt[$t.id]===void 0)return;const Vt=dt[$t.id];for(const Ut in Vt){const zt=Vt[Ut];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Vt[Ut]}delete dt[$t.id]}function Pt($t){for(const Vt in dt){const Ut=dt[Vt];if(Ut[$t.id]===void 0)continue;const zt=Ut[$t.id];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Ut[$t.id]}}function Ot(){Nt(),ft=!0,pt!==ht&&(pt=ht,xt(pt.object))}function Nt(){ht.geometry=null,ht.program=null,ht.wireframe=!1}return{setup:mt,reset:Ot,resetDefaultState:Nt,dispose:Ft,releaseStatesOfGeometry:Lt,releaseStatesOfProgram:Pt,initAttributes:Rt,enableAttribute:Tt,disableUnusedAttributes:At}}function WebGLBufferRenderer(nt,rt,it,st){const lt=st.isWebGL2;let ct;function ut(ft){ct=ft}function dt(ft,mt){nt.drawArrays(ct,ft,mt),it.update(mt,ct,1)}function ht(ft,mt,gt){if(gt===0)return;let xt,yt;if(lt)xt=nt,yt="drawArraysInstanced";else if(xt=rt.get("ANGLE_instanced_arrays"),yt="drawArraysInstancedANGLE",xt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}xt[yt](ct,ft,mt,gt),it.update(mt,ct,gt)}function pt(ft,mt,gt){if(gt===0)return;const xt=rt.get("WEBGL_multi_draw");if(xt===null)for(let yt=0;yt<gt;yt++)this.render(ft[yt],mt[yt]);else{xt.multiDrawArraysWEBGL(ct,ft,0,mt,0,gt);let yt=0;for(let vt=0;vt<gt;vt++)yt+=mt[vt];it.update(yt,ct,1)}}this.setMode=ut,this.render=dt,this.renderInstances=ht,this.renderMultiDraw=pt}function WebGLCapabilities(nt,rt,it){let st;function lt(){if(st!==void 0)return st;if(rt.has("EXT_texture_filter_anisotropic")===!0){const Dt=rt.get("EXT_texture_filter_anisotropic");st=nt.getParameter(Dt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else st=0;return st}function ct(Dt){if(Dt==="highp"){if(nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.HIGH_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.HIGH_FLOAT).precision>0)return"highp";Dt="mediump"}return Dt==="mediump"&&nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.MEDIUM_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const ut=typeof WebGL2RenderingContext<"u"&&nt.constructor.name==="WebGL2RenderingContext";let dt=it.precision!==void 0?it.precision:"highp";const ht=ct(dt);ht!==dt&&(console.warn("THREE.WebGLRenderer:",dt,"not supported, using",ht,"instead."),dt=ht);const pt=ut||rt.has("WEBGL_draw_buffers"),ft=it.logarithmicDepthBuffer===!0,mt=nt.getParameter(nt.MAX_TEXTURE_IMAGE_UNITS),gt=nt.getParameter(nt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),xt=nt.getParameter(nt.MAX_TEXTURE_SIZE),yt=nt.getParameter(nt.MAX_CUBE_MAP_TEXTURE_SIZE),vt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),St=nt.getParameter(nt.MAX_VERTEX_UNIFORM_VECTORS),Et=nt.getParameter(nt.MAX_VARYING_VECTORS),wt=nt.getParameter(nt.MAX_FRAGMENT_UNIFORM_VECTORS),Rt=gt>0,Tt=ut||rt.has("OES_texture_float"),It=Rt&&Tt,At=ut?nt.getParameter(nt.MAX_SAMPLES):0;return{isWebGL2:ut,drawBuffers:pt,getMaxAnisotropy:lt,getMaxPrecision:ct,precision:dt,logarithmicDepthBuffer:ft,maxTextures:mt,maxVertexTextures:gt,maxTextureSize:xt,maxCubemapSize:yt,maxAttributes:vt,maxVertexUniforms:St,maxVaryings:Et,maxFragmentUniforms:wt,vertexTextures:Rt,floatFragmentTextures:Tt,floatVertexTextures:It,maxSamples:At}}function WebGLClipping(nt){const rt=this;let it=null,st=0,lt=!1,ct=!1;const ut=new Plane,dt=new Matrix3,ht={value:null,needsUpdate:!1};this.uniform=ht,this.numPlanes=0,this.numIntersection=0,this.init=function(mt,gt){const xt=mt.length!==0||gt||st!==0||lt;return lt=gt,st=mt.length,xt},this.beginShadows=function(){ct=!0,ft(null)},this.endShadows=function(){ct=!1},this.setGlobalState=function(mt,gt){it=ft(mt,gt,0)},this.setState=function(mt,gt,xt){const yt=mt.clippingPlanes,vt=mt.clipIntersection,St=mt.clipShadows,Et=nt.get(mt);if(!lt||yt===null||yt.length===0||ct&&!St)ct?ft(null):pt();else{const wt=ct?0:st,Rt=wt*4;let Tt=Et.clippingState||null;ht.value=Tt,Tt=ft(yt,gt,Rt,xt);for(let It=0;It!==Rt;++It)Tt[It]=it[It];Et.clippingState=Tt,this.numIntersection=vt?this.numPlanes:0,this.numPlanes+=wt}};function pt(){ht.value!==it&&(ht.value=it,ht.needsUpdate=st>0),rt.numPlanes=st,rt.numIntersection=0}function ft(mt,gt,xt,yt){const vt=mt!==null?mt.length:0;let St=null;if(vt!==0){if(St=ht.value,yt!==!0||St===null){const Et=xt+vt*4,wt=gt.matrixWorldInverse;dt.getNormalMatrix(wt),(St===null||St.length<Et)&&(St=new Float32Array(Et));for(let Rt=0,Tt=xt;Rt!==vt;++Rt,Tt+=4)ut.copy(mt[Rt]).applyMatrix4(wt,dt),ut.normal.toArray(St,Tt),St[Tt+3]=ut.constant}ht.value=St,ht.needsUpdate=!0}return rt.numPlanes=vt,rt.numIntersection=0,St}}function WebGLCubeMaps(nt){let rt=new WeakMap;function it(ut,dt){return dt===EquirectangularReflectionMapping?ut.mapping=CubeReflectionMapping:dt===EquirectangularRefractionMapping&&(ut.mapping=CubeRefractionMapping),ut}function st(ut){if(ut&&ut.isTexture){const dt=ut.mapping;if(dt===EquirectangularReflectionMapping||dt===EquirectangularRefractionMapping)if(rt.has(ut)){const ht=rt.get(ut).texture;return it(ht,ut.mapping)}else{const ht=ut.image;if(ht&&ht.height>0){const pt=new WebGLCubeRenderTarget(ht.height);return pt.fromEquirectangularTexture(nt,ut),rt.set(ut,pt),ut.addEventListener("dispose",lt),it(pt.texture,ut.mapping)}else return null}}return ut}function lt(ut){const dt=ut.target;dt.removeEventListener("dispose",lt);const ht=rt.get(dt);ht!==void 0&&(rt.delete(dt),ht.dispose())}function ct(){rt=new WeakMap}return{get:st,dispose:ct}}class OrthographicCamera extends Camera{constructor(rt=-1,it=1,st=1,lt=-1,ct=.1,ut=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=rt,this.right=it,this.top=st,this.bottom=lt,this.near=ct,this.far=ut,this.updateProjectionMatrix()}copy(rt,it){return super.copy(rt,it),this.left=rt.left,this.right=rt.right,this.top=rt.top,this.bottom=rt.bottom,this.near=rt.near,this.far=rt.far,this.zoom=rt.zoom,this.view=rt.view===null?null:Object.assign({},rt.view),this}setViewOffset(rt,it,st,lt,ct,ut){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=rt,this.view.fullHeight=it,this.view.offsetX=st,this.view.offsetY=lt,this.view.width=ct,this.view.height=ut,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const rt=(this.right-this.left)/(2*this.zoom),it=(this.top-this.bottom)/(2*this.zoom),st=(this.right+this.left)/2,lt=(this.top+this.bottom)/2;let ct=st-rt,ut=st+rt,dt=lt+it,ht=lt-it;if(this.view!==null&&this.view.enabled){const pt=(this.right-this.left)/this.view.fullWidth/this.zoom,ft=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ct+=pt*this.view.offsetX,ut=ct+pt*this.view.width,dt-=ft*this.view.offsetY,ht=dt-ft*this.view.height}this.projectionMatrix.makeOrthographic(ct,ut,dt,ht,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(rt){const it=super.toJSON(rt);return it.object.zoom=this.zoom,it.object.left=this.left,it.object.right=this.right,it.object.top=this.top,it.object.bottom=this.bottom,it.object.near=this.near,it.object.far=this.far,this.view!==null&&(it.object.view=Object.assign({},this.view)),it}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(rt){this._renderer=rt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(rt,it=0,st=.1,lt=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),this._setSize(256);const ct=this._allocateTargets();return ct.depthBuffer=!0,this._sceneToCubeUV(rt,st,lt,ct),it>0&&this._blur(ct,0,0,it),this._applyPMREM(ct),this._cleanup(ct),ct}fromEquirectangular(rt,it=null){return this._fromTexture(rt,it)}fromCubemap(rt,it=null){return this._fromTexture(rt,it)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(rt){this._lodMax=Math.floor(Math.log2(rt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let rt=0;rt<this._lodPlanes.length;rt++)this._lodPlanes[rt].dispose()}_cleanup(rt){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),rt.scissorTest=!1,_setViewport(rt,0,0,rt.width,rt.height)}_fromTexture(rt,it){rt.mapping===CubeReflectionMapping||rt.mapping===CubeRefractionMapping?this._setSize(rt.image.length===0?16:rt.image[0].width||rt.image[0].image.width):this._setSize(rt.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel();const st=it||this._allocateTargets();return this._textureToCubeUV(rt,st),this._applyPMREM(st),this._cleanup(st),st}_allocateTargets(){const rt=3*Math.max(this._cubeSize,112),it=4*this._cubeSize,st={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},lt=_createRenderTarget(rt,it,st);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==rt||this._pingPongRenderTarget.height!==it){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(rt,it,st);const{_lodMax:ct}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(ct)),this._blurMaterial=_getBlurShader(ct,rt,it)}return lt}_compileMaterial(rt){const it=new Mesh(this._lodPlanes[0],rt);this._renderer.compile(it,_flatCamera)}_sceneToCubeUV(rt,it,st,lt){const dt=new PerspectiveCamera(90,1,it,st),ht=[1,-1,1,1,1,1],pt=[1,1,1,-1,-1,-1],ft=this._renderer,mt=ft.autoClear,gt=ft.toneMapping;ft.getClearColor(_clearColor),ft.toneMapping=NoToneMapping,ft.autoClear=!1;const xt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),yt=new Mesh(new BoxGeometry,xt);let vt=!1;const St=rt.background;St?St.isColor&&(xt.color.copy(St),rt.background=null,vt=!0):(xt.color.copy(_clearColor),vt=!0);for(let Et=0;Et<6;Et++){const wt=Et%3;wt===0?(dt.up.set(0,ht[Et],0),dt.lookAt(pt[Et],0,0)):wt===1?(dt.up.set(0,0,ht[Et]),dt.lookAt(0,pt[Et],0)):(dt.up.set(0,ht[Et],0),dt.lookAt(0,0,pt[Et]));const Rt=this._cubeSize;_setViewport(lt,wt*Rt,Et>2?Rt:0,Rt,Rt),ft.setRenderTarget(lt),vt&&ft.render(yt,dt),ft.render(rt,dt)}yt.geometry.dispose(),yt.material.dispose(),ft.toneMapping=gt,ft.autoClear=mt,rt.background=St}_textureToCubeUV(rt,it){const st=this._renderer,lt=rt.mapping===CubeReflectionMapping||rt.mapping===CubeRefractionMapping;lt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=rt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ct=lt?this._cubemapMaterial:this._equirectMaterial,ut=new Mesh(this._lodPlanes[0],ct),dt=ct.uniforms;dt.envMap.value=rt;const ht=this._cubeSize;_setViewport(it,0,0,3*ht,2*ht),st.setRenderTarget(it),st.render(ut,_flatCamera)}_applyPMREM(rt){const it=this._renderer,st=it.autoClear;it.autoClear=!1;for(let lt=1;lt<this._lodPlanes.length;lt++){const ct=Math.sqrt(this._sigmas[lt]*this._sigmas[lt]-this._sigmas[lt-1]*this._sigmas[lt-1]),ut=_axisDirections[(lt-1)%_axisDirections.length];this._blur(rt,lt-1,lt,ct,ut)}it.autoClear=st}_blur(rt,it,st,lt,ct){const ut=this._pingPongRenderTarget;this._halfBlur(rt,ut,it,st,lt,"latitudinal",ct),this._halfBlur(ut,rt,st,st,lt,"longitudinal",ct)}_halfBlur(rt,it,st,lt,ct,ut,dt){const ht=this._renderer,pt=this._blurMaterial;ut!=="latitudinal"&&ut!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ft=3,mt=new Mesh(this._lodPlanes[lt],pt),gt=pt.uniforms,xt=this._sizeLods[st]-1,yt=isFinite(ct)?Math.PI/(2*xt):2*Math.PI/(2*MAX_SAMPLES-1),vt=ct/yt,St=isFinite(ct)?1+Math.floor(ft*vt):MAX_SAMPLES;St>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ct}, is too large and will clip, as it requested ${St} samples when the maximum is set to ${MAX_SAMPLES}`);const Et=[];let wt=0;for(let Dt=0;Dt<MAX_SAMPLES;++Dt){const jt=Dt/vt,Ft=Math.exp(-jt*jt/2);Et.push(Ft),Dt===0?wt+=Ft:Dt<St&&(wt+=2*Ft)}for(let Dt=0;Dt<Et.length;Dt++)Et[Dt]=Et[Dt]/wt;gt.envMap.value=rt.texture,gt.samples.value=St,gt.weights.value=Et,gt.latitudinal.value=ut==="latitudinal",dt&&(gt.poleAxis.value=dt);const{_lodMax:Rt}=this;gt.dTheta.value=yt,gt.mipInt.value=Rt-st;const Tt=this._sizeLods[lt],It=3*Tt*(lt>Rt-LOD_MIN?lt-Rt+LOD_MIN:0),At=4*(this._cubeSize-Tt);_setViewport(it,It,At,3*Tt,2*Tt),ht.setRenderTarget(it),ht.render(mt,_flatCamera)}}function _createPlanes(nt){const rt=[],it=[],st=[];let lt=nt;const ct=nt-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let ut=0;ut<ct;ut++){const dt=Math.pow(2,lt);it.push(dt);let ht=1/dt;ut>nt-LOD_MIN?ht=EXTRA_LOD_SIGMA[ut-nt+LOD_MIN-1]:ut===0&&(ht=0),st.push(ht);const pt=1/(dt-2),ft=-pt,mt=1+pt,gt=[ft,ft,mt,ft,mt,mt,ft,ft,mt,mt,ft,mt],xt=6,yt=6,vt=3,St=2,Et=1,wt=new Float32Array(vt*yt*xt),Rt=new Float32Array(St*yt*xt),Tt=new Float32Array(Et*yt*xt);for(let At=0;At<xt;At++){const Dt=At%3*2/3-1,jt=At>2?0:-1,Ft=[Dt,jt,0,Dt+2/3,jt,0,Dt+2/3,jt+1,0,Dt,jt,0,Dt+2/3,jt+1,0,Dt,jt+1,0];wt.set(Ft,vt*yt*At),Rt.set(gt,St*yt*At);const Lt=[At,At,At,At,At,At];Tt.set(Lt,Et*yt*At)}const It=new BufferGeometry;It.setAttribute("position",new BufferAttribute(wt,vt)),It.setAttribute("uv",new BufferAttribute(Rt,St)),It.setAttribute("faceIndex",new BufferAttribute(Tt,Et)),rt.push(It),lt>LOD_MIN&&lt--}return{lodPlanes:rt,sizeLods:it,sigmas:st}}function _createRenderTarget(nt,rt,it){const st=new WebGLRenderTarget(nt,rt,it);return st.texture.mapping=CubeUVReflectionMapping,st.texture.name="PMREM.cubeUv",st.scissorTest=!0,st}function _setViewport(nt,rt,it,st,lt){nt.viewport.set(rt,it,st,lt),nt.scissor.set(rt,it,st,lt)}function _getBlurShader(nt,rt,it){const st=new Float32Array(MAX_SAMPLES),lt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/rt,CUBEUV_TEXEL_HEIGHT:1/it,CUBEUV_MAX_MIP:`${nt}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:st},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:lt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(nt){let rt=new WeakMap,it=null;function st(dt){if(dt&&dt.isTexture){const ht=dt.mapping,pt=ht===EquirectangularReflectionMapping||ht===EquirectangularRefractionMapping,ft=ht===CubeReflectionMapping||ht===CubeRefractionMapping;if(pt||ft)if(dt.isRenderTargetTexture&&dt.needsPMREMUpdate===!0){dt.needsPMREMUpdate=!1;let mt=rt.get(dt);return it===null&&(it=new PMREMGenerator(nt)),mt=pt?it.fromEquirectangular(dt,mt):it.fromCubemap(dt,mt),rt.set(dt,mt),mt.texture}else{if(rt.has(dt))return rt.get(dt).texture;{const mt=dt.image;if(pt&&mt&&mt.height>0||ft&&mt&&lt(mt)){it===null&&(it=new PMREMGenerator(nt));const gt=pt?it.fromEquirectangular(dt):it.fromCubemap(dt);return rt.set(dt,gt),dt.addEventListener("dispose",ct),gt.texture}else return null}}}return dt}function lt(dt){let ht=0;const pt=6;for(let ft=0;ft<pt;ft++)dt[ft]!==void 0&&ht++;return ht===pt}function ct(dt){const ht=dt.target;ht.removeEventListener("dispose",ct);const pt=rt.get(ht);pt!==void 0&&(rt.delete(ht),pt.dispose())}function ut(){rt=new WeakMap,it!==null&&(it.dispose(),it=null)}return{get:st,dispose:ut}}function WebGLExtensions(nt){const rt={};function it(st){if(rt[st]!==void 0)return rt[st];let lt;switch(st){case"WEBGL_depth_texture":lt=nt.getExtension("WEBGL_depth_texture")||nt.getExtension("MOZ_WEBGL_depth_texture")||nt.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":lt=nt.getExtension("EXT_texture_filter_anisotropic")||nt.getExtension("MOZ_EXT_texture_filter_anisotropic")||nt.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":lt=nt.getExtension("WEBGL_compressed_texture_s3tc")||nt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":lt=nt.getExtension("WEBGL_compressed_texture_pvrtc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:lt=nt.getExtension(st)}return rt[st]=lt,lt}return{has:function(st){return it(st)!==null},init:function(st){st.isWebGL2?(it("EXT_color_buffer_float"),it("WEBGL_clip_cull_distance")):(it("WEBGL_depth_texture"),it("OES_texture_float"),it("OES_texture_half_float"),it("OES_texture_half_float_linear"),it("OES_standard_derivatives"),it("OES_element_index_uint"),it("OES_vertex_array_object"),it("ANGLE_instanced_arrays")),it("OES_texture_float_linear"),it("EXT_color_buffer_half_float"),it("WEBGL_multisampled_render_to_texture")},get:function(st){const lt=it(st);return lt===null&&console.warn("THREE.WebGLRenderer: "+st+" extension not supported."),lt}}}function WebGLGeometries(nt,rt,it,st){const lt={},ct=new WeakMap;function ut(mt){const gt=mt.target;gt.index!==null&&rt.remove(gt.index);for(const yt in gt.attributes)rt.remove(gt.attributes[yt]);for(const yt in gt.morphAttributes){const vt=gt.morphAttributes[yt];for(let St=0,Et=vt.length;St<Et;St++)rt.remove(vt[St])}gt.removeEventListener("dispose",ut),delete lt[gt.id];const xt=ct.get(gt);xt&&(rt.remove(xt),ct.delete(gt)),st.releaseStatesOfGeometry(gt),gt.isInstancedBufferGeometry===!0&&delete gt._maxInstanceCount,it.memory.geometries--}function dt(mt,gt){return lt[gt.id]===!0||(gt.addEventListener("dispose",ut),lt[gt.id]=!0,it.memory.geometries++),gt}function ht(mt){const gt=mt.attributes;for(const yt in gt)rt.update(gt[yt],nt.ARRAY_BUFFER);const xt=mt.morphAttributes;for(const yt in xt){const vt=xt[yt];for(let St=0,Et=vt.length;St<Et;St++)rt.update(vt[St],nt.ARRAY_BUFFER)}}function pt(mt){const gt=[],xt=mt.index,yt=mt.attributes.position;let vt=0;if(xt!==null){const wt=xt.array;vt=xt.version;for(let Rt=0,Tt=wt.length;Rt<Tt;Rt+=3){const It=wt[Rt+0],At=wt[Rt+1],Dt=wt[Rt+2];gt.push(It,At,At,Dt,Dt,It)}}else if(yt!==void 0){const wt=yt.array;vt=yt.version;for(let Rt=0,Tt=wt.length/3-1;Rt<Tt;Rt+=3){const It=Rt+0,At=Rt+1,Dt=Rt+2;gt.push(It,At,At,Dt,Dt,It)}}else return;const St=new(arrayNeedsUint32(gt)?Uint32BufferAttribute:Uint16BufferAttribute)(gt,1);St.version=vt;const Et=ct.get(mt);Et&&rt.remove(Et),ct.set(mt,St)}function ft(mt){const gt=ct.get(mt);if(gt){const xt=mt.index;xt!==null&&gt.version<xt.version&&pt(mt)}else pt(mt);return ct.get(mt)}return{get:dt,update:ht,getWireframeAttribute:ft}}function WebGLIndexedBufferRenderer(nt,rt,it,st){const lt=st.isWebGL2;let ct;function ut(xt){ct=xt}let dt,ht;function pt(xt){dt=xt.type,ht=xt.bytesPerElement}function ft(xt,yt){nt.drawElements(ct,yt,dt,xt*ht),it.update(yt,ct,1)}function mt(xt,yt,vt){if(vt===0)return;let St,Et;if(lt)St=nt,Et="drawElementsInstanced";else if(St=rt.get("ANGLE_instanced_arrays"),Et="drawElementsInstancedANGLE",St===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}St[Et](ct,yt,dt,xt*ht,vt),it.update(yt,ct,vt)}function gt(xt,yt,vt){if(vt===0)return;const St=rt.get("WEBGL_multi_draw");if(St===null)for(let Et=0;Et<vt;Et++)this.render(xt[Et]/ht,yt[Et]);else{St.multiDrawElementsWEBGL(ct,yt,0,dt,xt,0,vt);let Et=0;for(let wt=0;wt<vt;wt++)Et+=yt[wt];it.update(Et,ct,1)}}this.setMode=ut,this.setIndex=pt,this.render=ft,this.renderInstances=mt,this.renderMultiDraw=gt}function WebGLInfo(nt){const rt={geometries:0,textures:0},it={frame:0,calls:0,triangles:0,points:0,lines:0};function st(ct,ut,dt){switch(it.calls++,ut){case nt.TRIANGLES:it.triangles+=dt*(ct/3);break;case nt.LINES:it.lines+=dt*(ct/2);break;case nt.LINE_STRIP:it.lines+=dt*(ct-1);break;case nt.LINE_LOOP:it.lines+=dt*ct;break;case nt.POINTS:it.points+=dt*ct;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ut);break}}function lt(){it.calls=0,it.triangles=0,it.points=0,it.lines=0}return{memory:rt,render:it,programs:null,autoReset:!0,reset:lt,update:st}}function numericalSort(nt,rt){return nt[0]-rt[0]}function absNumericalSort(nt,rt){return Math.abs(rt[1])-Math.abs(nt[1])}function WebGLMorphtargets(nt,rt,it){const st={},lt=new Float32Array(8),ct=new WeakMap,ut=new Vector4,dt=[];for(let pt=0;pt<8;pt++)dt[pt]=[pt,0];function ht(pt,ft,mt){const gt=pt.morphTargetInfluences;if(rt.isWebGL2===!0){const xt=ft.morphAttributes.position||ft.morphAttributes.normal||ft.morphAttributes.color,yt=xt!==void 0?xt.length:0;let vt=ct.get(ft);if(vt===void 0||vt.count!==yt){let wt=function(){Nt.dispose(),ct.delete(ft),ft.removeEventListener("dispose",wt)};vt!==void 0&&vt.texture.dispose();const Rt=ft.morphAttributes.position!==void 0,Tt=ft.morphAttributes.normal!==void 0,It=ft.morphAttributes.color!==void 0,At=ft.morphAttributes.position||[],Dt=ft.morphAttributes.normal||[],jt=ft.morphAttributes.color||[];let Ft=0;Rt===!0&&(Ft=1),Tt===!0&&(Ft=2),It===!0&&(Ft=3);let Lt=ft.attributes.position.count*Ft,Pt=1;Lt>rt.maxTextureSize&&(Pt=Math.ceil(Lt/rt.maxTextureSize),Lt=rt.maxTextureSize);const Ot=new Float32Array(Lt*Pt*4*yt),Nt=new DataArrayTexture(Ot,Lt,Pt,yt);Nt.type=FloatType,Nt.needsUpdate=!0;const $t=Ft*4;for(let Vt=0;Vt<yt;Vt++){const Ut=At[Vt],zt=Dt[Vt],Bt=jt[Vt],Ht=Lt*Pt*4*Vt;for(let Gt=0;Gt<Ut.count;Gt++){const Kt=Gt*$t;Rt===!0&&(ut.fromBufferAttribute(Ut,Gt),Ot[Ht+Kt+0]=ut.x,Ot[Ht+Kt+1]=ut.y,Ot[Ht+Kt+2]=ut.z,Ot[Ht+Kt+3]=0),Tt===!0&&(ut.fromBufferAttribute(zt,Gt),Ot[Ht+Kt+4]=ut.x,Ot[Ht+Kt+5]=ut.y,Ot[Ht+Kt+6]=ut.z,Ot[Ht+Kt+7]=0),It===!0&&(ut.fromBufferAttribute(Bt,Gt),Ot[Ht+Kt+8]=ut.x,Ot[Ht+Kt+9]=ut.y,Ot[Ht+Kt+10]=ut.z,Ot[Ht+Kt+11]=Bt.itemSize===4?ut.w:1)}}vt={count:yt,texture:Nt,size:new Vector2(Lt,Pt)},ct.set(ft,vt),ft.addEventListener("dispose",wt)}let St=0;for(let wt=0;wt<gt.length;wt++)St+=gt[wt];const Et=ft.morphTargetsRelative?1:1-St;mt.getUniforms().setValue(nt,"morphTargetBaseInfluence",Et),mt.getUniforms().setValue(nt,"morphTargetInfluences",gt),mt.getUniforms().setValue(nt,"morphTargetsTexture",vt.texture,it),mt.getUniforms().setValue(nt,"morphTargetsTextureSize",vt.size)}else{const xt=gt===void 0?0:gt.length;let yt=st[ft.id];if(yt===void 0||yt.length!==xt){yt=[];for(let Rt=0;Rt<xt;Rt++)yt[Rt]=[Rt,0];st[ft.id]=yt}for(let Rt=0;Rt<xt;Rt++){const Tt=yt[Rt];Tt[0]=Rt,Tt[1]=gt[Rt]}yt.sort(absNumericalSort);for(let Rt=0;Rt<8;Rt++)Rt<xt&&yt[Rt][1]?(dt[Rt][0]=yt[Rt][0],dt[Rt][1]=yt[Rt][1]):(dt[Rt][0]=Number.MAX_SAFE_INTEGER,dt[Rt][1]=0);dt.sort(numericalSort);const vt=ft.morphAttributes.position,St=ft.morphAttributes.normal;let Et=0;for(let Rt=0;Rt<8;Rt++){const Tt=dt[Rt],It=Tt[0],At=Tt[1];It!==Number.MAX_SAFE_INTEGER&&At?(vt&&ft.getAttribute("morphTarget"+Rt)!==vt[It]&&ft.setAttribute("morphTarget"+Rt,vt[It]),St&&ft.getAttribute("morphNormal"+Rt)!==St[It]&&ft.setAttribute("morphNormal"+Rt,St[It]),lt[Rt]=At,Et+=At):(vt&&ft.hasAttribute("morphTarget"+Rt)===!0&&ft.deleteAttribute("morphTarget"+Rt),St&&ft.hasAttribute("morphNormal"+Rt)===!0&&ft.deleteAttribute("morphNormal"+Rt),lt[Rt]=0)}const wt=ft.morphTargetsRelative?1:1-Et;mt.getUniforms().setValue(nt,"morphTargetBaseInfluence",wt),mt.getUniforms().setValue(nt,"morphTargetInfluences",lt)}}return{update:ht}}function WebGLObjects(nt,rt,it,st){let lt=new WeakMap;function ct(ht){const pt=st.render.frame,ft=ht.geometry,mt=rt.get(ht,ft);if(lt.get(mt)!==pt&&(rt.update(mt),lt.set(mt,pt)),ht.isInstancedMesh&&(ht.hasEventListener("dispose",dt)===!1&&ht.addEventListener("dispose",dt),lt.get(ht)!==pt&&(it.update(ht.instanceMatrix,nt.ARRAY_BUFFER),ht.instanceColor!==null&&it.update(ht.instanceColor,nt.ARRAY_BUFFER),lt.set(ht,pt))),ht.isSkinnedMesh){const gt=ht.skeleton;lt.get(gt)!==pt&&(gt.update(),lt.set(gt,pt))}return mt}function ut(){lt=new WeakMap}function dt(ht){const pt=ht.target;pt.removeEventListener("dispose",dt),it.remove(pt.instanceMatrix),pt.instanceColor!==null&&it.remove(pt.instanceColor)}return{update:ct,dispose:ut}}class DepthTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,pt,ft){if(ft=ft!==void 0?ft:DepthFormat,ft!==DepthFormat&&ft!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");st===void 0&&ft===DepthFormat&&(st=UnsignedIntType),st===void 0&&ft===DepthStencilFormat&&(st=UnsignedInt248Type),super(null,lt,ct,ut,dt,ht,ft,st,pt),this.isDepthTexture=!0,this.image={width:rt,height:it},this.magFilter=dt!==void 0?dt:NearestFilter,this.minFilter=ht!==void 0?ht:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(rt){return super.copy(rt),this.compareFunction=rt.compareFunction,this}toJSON(rt){const it=super.toJSON(rt);return this.compareFunction!==null&&(it.compareFunction=this.compareFunction),it}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1);emptyShadowTexture.compareFunction=LessEqualCompare;const emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(nt,rt,it){const st=nt[0];if(st<=0||st>0)return nt;const lt=rt*it;let ct=arrayCacheF32[lt];if(ct===void 0&&(ct=new Float32Array(lt),arrayCacheF32[lt]=ct),rt!==0){st.toArray(ct,0);for(let ut=1,dt=0;ut!==rt;++ut)dt+=it,nt[ut].toArray(ct,dt)}return ct}function arraysEqual(nt,rt){if(nt.length!==rt.length)return!1;for(let it=0,st=nt.length;it<st;it++)if(nt[it]!==rt[it])return!1;return!0}function copyArray(nt,rt){for(let it=0,st=rt.length;it<st;it++)nt[it]=rt[it]}function allocTexUnits(nt,rt){let it=arrayCacheI32[rt];it===void 0&&(it=new Int32Array(rt),arrayCacheI32[rt]=it);for(let st=0;st!==rt;++st)it[st]=nt.allocateTextureUnit();return it}function setValueV1f(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1f(this.addr,rt),it[0]=rt)}function setValueV2f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2f(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2fv(this.addr,rt),copyArray(it,rt)}}function setValueV3f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3f(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else if(rt.r!==void 0)(it[0]!==rt.r||it[1]!==rt.g||it[2]!==rt.b)&&(nt.uniform3f(this.addr,rt.r,rt.g,rt.b),it[0]=rt.r,it[1]=rt.g,it[2]=rt.b);else{if(arraysEqual(it,rt))return;nt.uniform3fv(this.addr,rt),copyArray(it,rt)}}function setValueV4f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4f(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4fv(this.addr,rt),copyArray(it,rt)}}function setValueM2(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix2fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat2array.set(st),nt.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(it,st)}}function setValueM3(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix3fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat3array.set(st),nt.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(it,st)}}function setValueM4(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix4fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat4array.set(st),nt.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(it,st)}}function setValueV1i(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1i(this.addr,rt),it[0]=rt)}function setValueV2i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2i(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2iv(this.addr,rt),copyArray(it,rt)}}function setValueV3i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3i(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else{if(arraysEqual(it,rt))return;nt.uniform3iv(this.addr,rt),copyArray(it,rt)}}function setValueV4i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4i(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4iv(this.addr,rt),copyArray(it,rt)}}function setValueV1ui(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1ui(this.addr,rt),it[0]=rt)}function setValueV2ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2ui(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2uiv(this.addr,rt),copyArray(it,rt)}}function setValueV3ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3ui(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else{if(arraysEqual(it,rt))return;nt.uniform3uiv(this.addr,rt),copyArray(it,rt)}}function setValueV4ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4ui(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4uiv(this.addr,rt),copyArray(it,rt)}}function setValueT1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt);const ct=this.type===nt.SAMPLER_2D_SHADOW?emptyShadowTexture:emptyTexture;it.setTexture2D(rt||ct,lt)}function setValueT3D1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTexture3D(rt||empty3dTexture,lt)}function setValueT6(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTextureCube(rt||emptyCubeTexture,lt)}function setValueT2DArray1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTexture2DArray(rt||emptyArrayTexture,lt)}function getSingularSetter(nt){switch(nt){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(nt,rt){nt.uniform1fv(this.addr,rt)}function setValueV2fArray(nt,rt){const it=flatten(rt,this.size,2);nt.uniform2fv(this.addr,it)}function setValueV3fArray(nt,rt){const it=flatten(rt,this.size,3);nt.uniform3fv(this.addr,it)}function setValueV4fArray(nt,rt){const it=flatten(rt,this.size,4);nt.uniform4fv(this.addr,it)}function setValueM2Array(nt,rt){const it=flatten(rt,this.size,4);nt.uniformMatrix2fv(this.addr,!1,it)}function setValueM3Array(nt,rt){const it=flatten(rt,this.size,9);nt.uniformMatrix3fv(this.addr,!1,it)}function setValueM4Array(nt,rt){const it=flatten(rt,this.size,16);nt.uniformMatrix4fv(this.addr,!1,it)}function setValueV1iArray(nt,rt){nt.uniform1iv(this.addr,rt)}function setValueV2iArray(nt,rt){nt.uniform2iv(this.addr,rt)}function setValueV3iArray(nt,rt){nt.uniform3iv(this.addr,rt)}function setValueV4iArray(nt,rt){nt.uniform4iv(this.addr,rt)}function setValueV1uiArray(nt,rt){nt.uniform1uiv(this.addr,rt)}function setValueV2uiArray(nt,rt){nt.uniform2uiv(this.addr,rt)}function setValueV3uiArray(nt,rt){nt.uniform3uiv(this.addr,rt)}function setValueV4uiArray(nt,rt){nt.uniform4uiv(this.addr,rt)}function setValueT1Array(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture2D(rt[ut]||emptyTexture,ct[ut])}function setValueT3DArray(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture3D(rt[ut]||empty3dTexture,ct[ut])}function setValueT6Array(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTextureCube(rt[ut]||emptyCubeTexture,ct[ut])}function setValueT2DArrayArray(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture2DArray(rt[ut]||emptyArrayTexture,ct[ut])}function getPureArraySetter(nt){switch(nt){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(rt,it,st){this.id=rt,this.addr=st,this.cache=[],this.type=it.type,this.setValue=getSingularSetter(it.type)}}class PureArrayUniform{constructor(rt,it,st){this.id=rt,this.addr=st,this.cache=[],this.type=it.type,this.size=it.size,this.setValue=getPureArraySetter(it.type)}}class StructuredUniform{constructor(rt){this.id=rt,this.seq=[],this.map={}}setValue(rt,it,st){const lt=this.seq;for(let ct=0,ut=lt.length;ct!==ut;++ct){const dt=lt[ct];dt.setValue(rt,it[dt.id],st)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(nt,rt){nt.seq.push(rt),nt.map[rt.id]=rt}function parseUniform(nt,rt,it){const st=nt.name,lt=st.length;for(RePathPart.lastIndex=0;;){const ct=RePathPart.exec(st),ut=RePathPart.lastIndex;let dt=ct[1];const ht=ct[2]==="]",pt=ct[3];if(ht&&(dt=dt|0),pt===void 0||pt==="["&&ut+2===lt){addUniform(it,pt===void 0?new SingleUniform(dt,nt,rt):new PureArrayUniform(dt,nt,rt));break}else{let mt=it.map[dt];mt===void 0&&(mt=new StructuredUniform(dt),addUniform(it,mt)),it=mt}}}class WebGLUniforms{constructor(rt,it){this.seq=[],this.map={};const st=rt.getProgramParameter(it,rt.ACTIVE_UNIFORMS);for(let lt=0;lt<st;++lt){const ct=rt.getActiveUniform(it,lt),ut=rt.getUniformLocation(it,ct.name);parseUniform(ct,ut,this)}}setValue(rt,it,st,lt){const ct=this.map[it];ct!==void 0&&ct.setValue(rt,st,lt)}setOptional(rt,it,st){const lt=it[st];lt!==void 0&&this.setValue(rt,st,lt)}static upload(rt,it,st,lt){for(let ct=0,ut=it.length;ct!==ut;++ct){const dt=it[ct],ht=st[dt.id];ht.needsUpdate!==!1&&dt.setValue(rt,ht.value,lt)}}static seqWithValue(rt,it){const st=[];for(let lt=0,ct=rt.length;lt!==ct;++lt){const ut=rt[lt];ut.id in it&&st.push(ut)}return st}}function WebGLShader(nt,rt,it){const st=nt.createShader(rt);return nt.shaderSource(st,it),nt.compileShader(st),st}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(nt,rt){const it=nt.split(`
`),st=[],lt=Math.max(rt-6,0),ct=Math.min(rt+6,it.length);for(let ut=lt;ut<ct;ut++){const dt=ut+1;st.push(`${dt===rt?">":" "} ${dt}: ${it[ut]}`)}return st.join(`
`)}function getEncodingComponents(nt){const rt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),it=ColorManagement.getPrimaries(nt);let st;switch(rt===it?st="":rt===P3Primaries&&it===Rec709Primaries?st="LinearDisplayP3ToLinearSRGB":rt===Rec709Primaries&&it===P3Primaries&&(st="LinearSRGBToLinearDisplayP3"),nt){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[st,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[st,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",nt),[st,"LinearTransferOETF"]}}function getShaderErrors(nt,rt,it){const st=nt.getShaderParameter(rt,nt.COMPILE_STATUS),lt=nt.getShaderInfoLog(rt).trim();if(st&&lt==="")return"";const ct=/ERROR: 0:(\d+)/.exec(lt);if(ct){const ut=parseInt(ct[1]);return it.toUpperCase()+`

`+lt+`

`+handleSource(nt.getShaderSource(rt),ut)}else return lt}function getTexelEncodingFunction(nt,rt){const it=getEncodingComponents(rt);return`vec4 ${nt}( vec4 value ) { return ${it[0]}( ${it[1]}( value ) ); }`}function getToneMappingFunction(nt,rt){let it;switch(rt){case LinearToneMapping:it="Linear";break;case ReinhardToneMapping:it="Reinhard";break;case CineonToneMapping:it="OptimizedCineon";break;case ACESFilmicToneMapping:it="ACESFilmic";break;case AgXToneMapping:it="AgX";break;case CustomToneMapping:it="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",rt),it="Linear"}return"vec3 "+nt+"( vec3 color ) { return "+it+"ToneMapping( color ); }"}function generateExtensions(nt){return[nt.extensionDerivatives||nt.envMapCubeUVHeight||nt.bumpMap||nt.normalMapTangentSpace||nt.clearcoatNormalMap||nt.flatShading||nt.alphaToCoverage||nt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(nt.extensionFragDepth||nt.logarithmicDepthBuffer)&&nt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",nt.extensionDrawBuffers&&nt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(nt.extensionShaderTextureLOD||nt.envMap||nt.transmission)&&nt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateVertexExtensions(nt){return[nt.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",nt.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(nt){const rt=[];for(const it in nt){const st=nt[it];st!==!1&&rt.push("#define "+it+" "+st)}return rt.join(`
`)}function fetchAttributeLocations(nt,rt){const it={},st=nt.getProgramParameter(rt,nt.ACTIVE_ATTRIBUTES);for(let lt=0;lt<st;lt++){const ct=nt.getActiveAttrib(rt,lt),ut=ct.name;let dt=1;ct.type===nt.FLOAT_MAT2&&(dt=2),ct.type===nt.FLOAT_MAT3&&(dt=3),ct.type===nt.FLOAT_MAT4&&(dt=4),it[ut]={type:ct.type,location:nt.getAttribLocation(rt,ut),locationSize:dt}}return it}function filterEmptyLine(nt){return nt!==""}function replaceLightNums(nt,rt){const it=rt.numSpotLightShadows+rt.numSpotLightMaps-rt.numSpotLightShadowsWithMaps;return nt.replace(/NUM_DIR_LIGHTS/g,rt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,rt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,rt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,it).replace(/NUM_RECT_AREA_LIGHTS/g,rt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,rt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,rt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,rt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,rt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,rt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,rt.numPointLightShadows)}function replaceClippingPlaneNums(nt,rt){return nt.replace(/NUM_CLIPPING_PLANES/g,rt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,rt.numClippingPlanes-rt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(nt){return nt.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(nt,rt){let it=ShaderChunk[rt];if(it===void 0){const st=shaderChunkMap.get(rt);if(st!==void 0)it=ShaderChunk[st],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',rt,st);else throw new Error("Can not resolve #include <"+rt+">")}return resolveIncludes(it)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(nt){return nt.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(nt,rt,it,st){let lt="";for(let ct=parseInt(rt);ct<parseInt(it);ct++)lt+=st.replace(/\[\s*i\s*\]/g,"[ "+ct+" ]").replace(/UNROLLED_LOOP_INDEX/g,ct);return lt}function generatePrecision(nt){let rt=`precision ${nt.precision} float;
	precision ${nt.precision} int;
	precision ${nt.precision} sampler2D;
	precision ${nt.precision} samplerCube;
	`;return nt.isWebGL2&&(rt+=`precision ${nt.precision} sampler3D;
		precision ${nt.precision} sampler2DArray;
		precision ${nt.precision} sampler2DShadow;
		precision ${nt.precision} samplerCubeShadow;
		precision ${nt.precision} sampler2DArrayShadow;
		precision ${nt.precision} isampler2D;
		precision ${nt.precision} isampler3D;
		precision ${nt.precision} isamplerCube;
		precision ${nt.precision} isampler2DArray;
		precision ${nt.precision} usampler2D;
		precision ${nt.precision} usampler3D;
		precision ${nt.precision} usamplerCube;
		precision ${nt.precision} usampler2DArray;
		`),nt.precision==="highp"?rt+=`
#define HIGH_PRECISION`:nt.precision==="mediump"?rt+=`
#define MEDIUM_PRECISION`:nt.precision==="lowp"&&(rt+=`
#define LOW_PRECISION`),rt}function generateShadowMapTypeDefine(nt){let rt="SHADOWMAP_TYPE_BASIC";return nt.shadowMapType===PCFShadowMap?rt="SHADOWMAP_TYPE_PCF":nt.shadowMapType===PCFSoftShadowMap?rt="SHADOWMAP_TYPE_PCF_SOFT":nt.shadowMapType===VSMShadowMap&&(rt="SHADOWMAP_TYPE_VSM"),rt}function generateEnvMapTypeDefine(nt){let rt="ENVMAP_TYPE_CUBE";if(nt.envMap)switch(nt.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:rt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:rt="ENVMAP_TYPE_CUBE_UV";break}return rt}function generateEnvMapModeDefine(nt){let rt="ENVMAP_MODE_REFLECTION";if(nt.envMap)switch(nt.envMapMode){case CubeRefractionMapping:rt="ENVMAP_MODE_REFRACTION";break}return rt}function generateEnvMapBlendingDefine(nt){let rt="ENVMAP_BLENDING_NONE";if(nt.envMap)switch(nt.combine){case MultiplyOperation:rt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:rt="ENVMAP_BLENDING_MIX";break;case AddOperation:rt="ENVMAP_BLENDING_ADD";break}return rt}function generateCubeUVSize(nt){const rt=nt.envMapCubeUVHeight;if(rt===null)return null;const it=Math.log2(rt)-2,st=1/rt;return{texelWidth:1/(3*Math.max(Math.pow(2,it),7*16)),texelHeight:st,maxMip:it}}function WebGLProgram(nt,rt,it,st){const lt=nt.getContext(),ct=it.defines;let ut=it.vertexShader,dt=it.fragmentShader;const ht=generateShadowMapTypeDefine(it),pt=generateEnvMapTypeDefine(it),ft=generateEnvMapModeDefine(it),mt=generateEnvMapBlendingDefine(it),gt=generateCubeUVSize(it),xt=it.isWebGL2?"":generateExtensions(it),yt=generateVertexExtensions(it),vt=generateDefines(ct),St=lt.createProgram();let Et,wt,Rt=it.glslVersion?"#version "+it.glslVersion+`
`:"";it.isRawShaderMaterial?(Et=["#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt].filter(filterEmptyLine).join(`
`),Et.length>0&&(Et+=`
`),wt=[xt,"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt].filter(filterEmptyLine).join(`
`),wt.length>0&&(wt+=`
`)):(Et=[generatePrecision(it),"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt,it.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",it.batching?"#define USE_BATCHING":"",it.instancing?"#define USE_INSTANCING":"",it.instancingColor?"#define USE_INSTANCING_COLOR":"",it.useFog&&it.fog?"#define USE_FOG":"",it.useFog&&it.fogExp2?"#define FOG_EXP2":"",it.map?"#define USE_MAP":"",it.envMap?"#define USE_ENVMAP":"",it.envMap?"#define "+ft:"",it.lightMap?"#define USE_LIGHTMAP":"",it.aoMap?"#define USE_AOMAP":"",it.bumpMap?"#define USE_BUMPMAP":"",it.normalMap?"#define USE_NORMALMAP":"",it.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",it.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",it.displacementMap?"#define USE_DISPLACEMENTMAP":"",it.emissiveMap?"#define USE_EMISSIVEMAP":"",it.anisotropy?"#define USE_ANISOTROPY":"",it.anisotropyMap?"#define USE_ANISOTROPYMAP":"",it.clearcoatMap?"#define USE_CLEARCOATMAP":"",it.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",it.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",it.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",it.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",it.specularMap?"#define USE_SPECULARMAP":"",it.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",it.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",it.roughnessMap?"#define USE_ROUGHNESSMAP":"",it.metalnessMap?"#define USE_METALNESSMAP":"",it.alphaMap?"#define USE_ALPHAMAP":"",it.alphaHash?"#define USE_ALPHAHASH":"",it.transmission?"#define USE_TRANSMISSION":"",it.transmissionMap?"#define USE_TRANSMISSIONMAP":"",it.thicknessMap?"#define USE_THICKNESSMAP":"",it.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",it.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",it.mapUv?"#define MAP_UV "+it.mapUv:"",it.alphaMapUv?"#define ALPHAMAP_UV "+it.alphaMapUv:"",it.lightMapUv?"#define LIGHTMAP_UV "+it.lightMapUv:"",it.aoMapUv?"#define AOMAP_UV "+it.aoMapUv:"",it.emissiveMapUv?"#define EMISSIVEMAP_UV "+it.emissiveMapUv:"",it.bumpMapUv?"#define BUMPMAP_UV "+it.bumpMapUv:"",it.normalMapUv?"#define NORMALMAP_UV "+it.normalMapUv:"",it.displacementMapUv?"#define DISPLACEMENTMAP_UV "+it.displacementMapUv:"",it.metalnessMapUv?"#define METALNESSMAP_UV "+it.metalnessMapUv:"",it.roughnessMapUv?"#define ROUGHNESSMAP_UV "+it.roughnessMapUv:"",it.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+it.anisotropyMapUv:"",it.clearcoatMapUv?"#define CLEARCOATMAP_UV "+it.clearcoatMapUv:"",it.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+it.clearcoatNormalMapUv:"",it.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+it.clearcoatRoughnessMapUv:"",it.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+it.iridescenceMapUv:"",it.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+it.iridescenceThicknessMapUv:"",it.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+it.sheenColorMapUv:"",it.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+it.sheenRoughnessMapUv:"",it.specularMapUv?"#define SPECULARMAP_UV "+it.specularMapUv:"",it.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+it.specularColorMapUv:"",it.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+it.specularIntensityMapUv:"",it.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+it.transmissionMapUv:"",it.thicknessMapUv?"#define THICKNESSMAP_UV "+it.thicknessMapUv:"",it.vertexTangents&&it.flatShading===!1?"#define USE_TANGENT":"",it.vertexColors?"#define USE_COLOR":"",it.vertexAlphas?"#define USE_COLOR_ALPHA":"",it.vertexUv1s?"#define USE_UV1":"",it.vertexUv2s?"#define USE_UV2":"",it.vertexUv3s?"#define USE_UV3":"",it.pointsUvs?"#define USE_POINTS_UV":"",it.flatShading?"#define FLAT_SHADED":"",it.skinning?"#define USE_SKINNING":"",it.morphTargets?"#define USE_MORPHTARGETS":"",it.morphNormals&&it.flatShading===!1?"#define USE_MORPHNORMALS":"",it.morphColors&&it.isWebGL2?"#define USE_MORPHCOLORS":"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+it.morphTextureStride:"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_COUNT "+it.morphTargetsCount:"",it.doubleSided?"#define DOUBLE_SIDED":"",it.flipSided?"#define FLIP_SIDED":"",it.shadowMapEnabled?"#define USE_SHADOWMAP":"",it.shadowMapEnabled?"#define "+ht:"",it.sizeAttenuation?"#define USE_SIZEATTENUATION":"",it.numLightProbes>0?"#define USE_LIGHT_PROBES":"",it.useLegacyLights?"#define LEGACY_LIGHTS":"",it.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",it.logarithmicDepthBuffer&&it.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),wt=[xt,generatePrecision(it),"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt,it.useFog&&it.fog?"#define USE_FOG":"",it.useFog&&it.fogExp2?"#define FOG_EXP2":"",it.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",it.map?"#define USE_MAP":"",it.matcap?"#define USE_MATCAP":"",it.envMap?"#define USE_ENVMAP":"",it.envMap?"#define "+pt:"",it.envMap?"#define "+ft:"",it.envMap?"#define "+mt:"",gt?"#define CUBEUV_TEXEL_WIDTH "+gt.texelWidth:"",gt?"#define CUBEUV_TEXEL_HEIGHT "+gt.texelHeight:"",gt?"#define CUBEUV_MAX_MIP "+gt.maxMip+".0":"",it.lightMap?"#define USE_LIGHTMAP":"",it.aoMap?"#define USE_AOMAP":"",it.bumpMap?"#define USE_BUMPMAP":"",it.normalMap?"#define USE_NORMALMAP":"",it.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",it.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",it.emissiveMap?"#define USE_EMISSIVEMAP":"",it.anisotropy?"#define USE_ANISOTROPY":"",it.anisotropyMap?"#define USE_ANISOTROPYMAP":"",it.clearcoat?"#define USE_CLEARCOAT":"",it.clearcoatMap?"#define USE_CLEARCOATMAP":"",it.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",it.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",it.iridescence?"#define USE_IRIDESCENCE":"",it.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",it.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",it.specularMap?"#define USE_SPECULARMAP":"",it.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",it.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",it.roughnessMap?"#define USE_ROUGHNESSMAP":"",it.metalnessMap?"#define USE_METALNESSMAP":"",it.alphaMap?"#define USE_ALPHAMAP":"",it.alphaTest?"#define USE_ALPHATEST":"",it.alphaHash?"#define USE_ALPHAHASH":"",it.sheen?"#define USE_SHEEN":"",it.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",it.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",it.transmission?"#define USE_TRANSMISSION":"",it.transmissionMap?"#define USE_TRANSMISSIONMAP":"",it.thicknessMap?"#define USE_THICKNESSMAP":"",it.vertexTangents&&it.flatShading===!1?"#define USE_TANGENT":"",it.vertexColors||it.instancingColor?"#define USE_COLOR":"",it.vertexAlphas?"#define USE_COLOR_ALPHA":"",it.vertexUv1s?"#define USE_UV1":"",it.vertexUv2s?"#define USE_UV2":"",it.vertexUv3s?"#define USE_UV3":"",it.pointsUvs?"#define USE_POINTS_UV":"",it.gradientMap?"#define USE_GRADIENTMAP":"",it.flatShading?"#define FLAT_SHADED":"",it.doubleSided?"#define DOUBLE_SIDED":"",it.flipSided?"#define FLIP_SIDED":"",it.shadowMapEnabled?"#define USE_SHADOWMAP":"",it.shadowMapEnabled?"#define "+ht:"",it.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",it.numLightProbes>0?"#define USE_LIGHT_PROBES":"",it.useLegacyLights?"#define LEGACY_LIGHTS":"",it.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",it.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",it.logarithmicDepthBuffer&&it.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",it.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",it.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",it.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",it.toneMapping):"",it.dithering?"#define DITHERING":"",it.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",it.outputColorSpace),it.useDepthPacking?"#define DEPTH_PACKING "+it.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ut=resolveIncludes(ut),ut=replaceLightNums(ut,it),ut=replaceClippingPlaneNums(ut,it),dt=resolveIncludes(dt),dt=replaceLightNums(dt,it),dt=replaceClippingPlaneNums(dt,it),ut=unrollLoops(ut),dt=unrollLoops(dt),it.isWebGL2&&it.isRawShaderMaterial!==!0&&(Rt=`#version 300 es
`,Et=[yt,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Et,wt=["precision mediump sampler2DArray;","#define varying in",it.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",it.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+wt);const Tt=Rt+Et+ut,It=Rt+wt+dt,At=WebGLShader(lt,lt.VERTEX_SHADER,Tt),Dt=WebGLShader(lt,lt.FRAGMENT_SHADER,It);lt.attachShader(St,At),lt.attachShader(St,Dt),it.index0AttributeName!==void 0?lt.bindAttribLocation(St,0,it.index0AttributeName):it.morphTargets===!0&&lt.bindAttribLocation(St,0,"position"),lt.linkProgram(St);function jt(Ot){if(nt.debug.checkShaderErrors){const Nt=lt.getProgramInfoLog(St).trim(),$t=lt.getShaderInfoLog(At).trim(),Vt=lt.getShaderInfoLog(Dt).trim();let Ut=!0,zt=!0;if(lt.getProgramParameter(St,lt.LINK_STATUS)===!1)if(Ut=!1,typeof nt.debug.onShaderError=="function")nt.debug.onShaderError(lt,St,At,Dt);else{const Bt=getShaderErrors(lt,At,"vertex"),Ht=getShaderErrors(lt,Dt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+lt.getError()+" - VALIDATE_STATUS "+lt.getProgramParameter(St,lt.VALIDATE_STATUS)+`

Material Name: `+Ot.name+`
Material Type: `+Ot.type+`

Program Info Log: `+Nt+`
`+Bt+`
`+Ht)}else Nt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Nt):($t===""||Vt==="")&&(zt=!1);zt&&(Ot.diagnostics={runnable:Ut,programLog:Nt,vertexShader:{log:$t,prefix:Et},fragmentShader:{log:Vt,prefix:wt}})}lt.deleteShader(At),lt.deleteShader(Dt),Ft=new WebGLUniforms(lt,St),Lt=fetchAttributeLocations(lt,St)}let Ft;this.getUniforms=function(){return Ft===void 0&&jt(this),Ft};let Lt;this.getAttributes=function(){return Lt===void 0&&jt(this),Lt};let Pt=it.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Pt===!1&&(Pt=lt.getProgramParameter(St,COMPLETION_STATUS_KHR)),Pt},this.destroy=function(){st.releaseStatesOfProgram(this),lt.deleteProgram(St),this.program=void 0},this.type=it.shaderType,this.name=it.shaderName,this.id=programIdCount++,this.cacheKey=rt,this.usedTimes=1,this.program=St,this.vertexShader=At,this.fragmentShader=Dt,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(rt){const it=rt.vertexShader,st=rt.fragmentShader,lt=this._getShaderStage(it),ct=this._getShaderStage(st),ut=this._getShaderCacheForMaterial(rt);return ut.has(lt)===!1&&(ut.add(lt),lt.usedTimes++),ut.has(ct)===!1&&(ut.add(ct),ct.usedTimes++),this}remove(rt){const it=this.materialCache.get(rt);for(const st of it)st.usedTimes--,st.usedTimes===0&&this.shaderCache.delete(st.code);return this.materialCache.delete(rt),this}getVertexShaderID(rt){return this._getShaderStage(rt.vertexShader).id}getFragmentShaderID(rt){return this._getShaderStage(rt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(rt){const it=this.materialCache;let st=it.get(rt);return st===void 0&&(st=new Set,it.set(rt,st)),st}_getShaderStage(rt){const it=this.shaderCache;let st=it.get(rt);return st===void 0&&(st=new WebGLShaderStage(rt),it.set(rt,st)),st}}class WebGLShaderStage{constructor(rt){this.id=_id$1++,this.code=rt,this.usedTimes=0}}function WebGLPrograms(nt,rt,it,st,lt,ct,ut){const dt=new Layers,ht=new WebGLShaderCache,pt=new Set,ft=[],mt=lt.isWebGL2,gt=lt.logarithmicDepthBuffer,xt=lt.vertexTextures;let yt=lt.precision;const vt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function St(Lt){return pt.add(Lt),Lt===0?"uv":`uv${Lt}`}function Et(Lt,Pt,Ot,Nt,$t){const Vt=Nt.fog,Ut=$t.geometry,zt=Lt.isMeshStandardMaterial?Nt.environment:null,Bt=(Lt.isMeshStandardMaterial?it:rt).get(Lt.envMap||zt),Ht=Bt&&Bt.mapping===CubeUVReflectionMapping?Bt.image.height:null,Gt=vt[Lt.type];Lt.precision!==null&&(yt=lt.getMaxPrecision(Lt.precision),yt!==Lt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Lt.precision,"not supported, using",yt,"instead."));const Kt=Ut.morphAttributes.position||Ut.morphAttributes.normal||Ut.morphAttributes.color,Xt=Kt!==void 0?Kt.length:0;let or=0;Ut.morphAttributes.position!==void 0&&(or=1),Ut.morphAttributes.normal!==void 0&&(or=2),Ut.morphAttributes.color!==void 0&&(or=3);let tr,dr,fr,Sr;if(Gt){const fn=ShaderLib[Gt];tr=fn.vertexShader,dr=fn.fragmentShader}else tr=Lt.vertexShader,dr=Lt.fragmentShader,ht.update(Lt),fr=ht.getVertexShaderID(Lt),Sr=ht.getFragmentShaderID(Lt);const vr=nt.getRenderTarget(),mr=$t.isInstancedMesh===!0,hr=$t.isBatchedMesh===!0,gr=!!Lt.map,lr=!!Lt.matcap,Ir=!!Bt,wr=!!Lt.aoMap,Fr=!!Lt.lightMap,$r=!!Lt.bumpMap,hn=!!Lt.normalMap,Zr=!!Lt.displacementMap,Qt=!!Lt.emissiveMap,Jt=!!Lt.metalnessMap,pr=!!Lt.roughnessMap,Vr=Lt.anisotropy>0,Wr=Lt.clearcoat>0,zr=Lt.iridescence>0,ln=Lt.sheen>0,xn=Lt.transmission>0,yn=Vr&&!!Lt.anisotropyMap,Wn=Wr&&!!Lt.clearcoatMap,Mn=Wr&&!!Lt.clearcoatNormalMap,sn=Wr&&!!Lt.clearcoatRoughnessMap,qn=zr&&!!Lt.iridescenceMap,Gr=zr&&!!Lt.iridescenceThicknessMap,qr=ln&&!!Lt.sheenColorMap,wn=ln&&!!Lt.sheenRoughnessMap,Cr=!!Lt.specularMap,nr=!!Lt.specularColorMap,Ur=!!Lt.specularIntensityMap,Mr=xn&&!!Lt.transmissionMap,rn=xn&&!!Lt.thicknessMap,Cn=!!Lt.gradientMap,Rr=!!Lt.alphaMap,pn=Lt.alphaTest>0,Tr=!!Lt.alphaHash,xr=!!Lt.extensions;let jr=NoToneMapping;Lt.toneMapped&&(vr===null||vr.isXRRenderTarget===!0)&&(jr=nt.toneMapping);const en={isWebGL2:mt,shaderID:Gt,shaderType:Lt.type,shaderName:Lt.name,vertexShader:tr,fragmentShader:dr,defines:Lt.defines,customVertexShaderID:fr,customFragmentShaderID:Sr,isRawShaderMaterial:Lt.isRawShaderMaterial===!0,glslVersion:Lt.glslVersion,precision:yt,batching:hr,instancing:mr,instancingColor:mr&&$t.instanceColor!==null,supportsVertexTextures:xt,outputColorSpace:vr===null?nt.outputColorSpace:vr.isXRRenderTarget===!0?vr.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Lt.alphaToCoverage,map:gr,matcap:lr,envMap:Ir,envMapMode:Ir&&Bt.mapping,envMapCubeUVHeight:Ht,aoMap:wr,lightMap:Fr,bumpMap:$r,normalMap:hn,displacementMap:xt&&Zr,emissiveMap:Qt,normalMapObjectSpace:hn&&Lt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:hn&&Lt.normalMapType===TangentSpaceNormalMap,metalnessMap:Jt,roughnessMap:pr,anisotropy:Vr,anisotropyMap:yn,clearcoat:Wr,clearcoatMap:Wn,clearcoatNormalMap:Mn,clearcoatRoughnessMap:sn,iridescence:zr,iridescenceMap:qn,iridescenceThicknessMap:Gr,sheen:ln,sheenColorMap:qr,sheenRoughnessMap:wn,specularMap:Cr,specularColorMap:nr,specularIntensityMap:Ur,transmission:xn,transmissionMap:Mr,thicknessMap:rn,gradientMap:Cn,opaque:Lt.transparent===!1&&Lt.blending===NormalBlending&&Lt.alphaToCoverage===!1,alphaMap:Rr,alphaTest:pn,alphaHash:Tr,combine:Lt.combine,mapUv:gr&&St(Lt.map.channel),aoMapUv:wr&&St(Lt.aoMap.channel),lightMapUv:Fr&&St(Lt.lightMap.channel),bumpMapUv:$r&&St(Lt.bumpMap.channel),normalMapUv:hn&&St(Lt.normalMap.channel),displacementMapUv:Zr&&St(Lt.displacementMap.channel),emissiveMapUv:Qt&&St(Lt.emissiveMap.channel),metalnessMapUv:Jt&&St(Lt.metalnessMap.channel),roughnessMapUv:pr&&St(Lt.roughnessMap.channel),anisotropyMapUv:yn&&St(Lt.anisotropyMap.channel),clearcoatMapUv:Wn&&St(Lt.clearcoatMap.channel),clearcoatNormalMapUv:Mn&&St(Lt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:sn&&St(Lt.clearcoatRoughnessMap.channel),iridescenceMapUv:qn&&St(Lt.iridescenceMap.channel),iridescenceThicknessMapUv:Gr&&St(Lt.iridescenceThicknessMap.channel),sheenColorMapUv:qr&&St(Lt.sheenColorMap.channel),sheenRoughnessMapUv:wn&&St(Lt.sheenRoughnessMap.channel),specularMapUv:Cr&&St(Lt.specularMap.channel),specularColorMapUv:nr&&St(Lt.specularColorMap.channel),specularIntensityMapUv:Ur&&St(Lt.specularIntensityMap.channel),transmissionMapUv:Mr&&St(Lt.transmissionMap.channel),thicknessMapUv:rn&&St(Lt.thicknessMap.channel),alphaMapUv:Rr&&St(Lt.alphaMap.channel),vertexTangents:!!Ut.attributes.tangent&&(hn||Vr),vertexColors:Lt.vertexColors,vertexAlphas:Lt.vertexColors===!0&&!!Ut.attributes.color&&Ut.attributes.color.itemSize===4,pointsUvs:$t.isPoints===!0&&!!Ut.attributes.uv&&(gr||Rr),fog:!!Vt,useFog:Lt.fog===!0,fogExp2:!!Vt&&Vt.isFogExp2,flatShading:Lt.flatShading===!0,sizeAttenuation:Lt.sizeAttenuation===!0,logarithmicDepthBuffer:gt,skinning:$t.isSkinnedMesh===!0,morphTargets:Ut.morphAttributes.position!==void 0,morphNormals:Ut.morphAttributes.normal!==void 0,morphColors:Ut.morphAttributes.color!==void 0,morphTargetsCount:Xt,morphTextureStride:or,numDirLights:Pt.directional.length,numPointLights:Pt.point.length,numSpotLights:Pt.spot.length,numSpotLightMaps:Pt.spotLightMap.length,numRectAreaLights:Pt.rectArea.length,numHemiLights:Pt.hemi.length,numDirLightShadows:Pt.directionalShadowMap.length,numPointLightShadows:Pt.pointShadowMap.length,numSpotLightShadows:Pt.spotShadowMap.length,numSpotLightShadowsWithMaps:Pt.numSpotLightShadowsWithMaps,numLightProbes:Pt.numLightProbes,numClippingPlanes:ut.numPlanes,numClipIntersection:ut.numIntersection,dithering:Lt.dithering,shadowMapEnabled:nt.shadowMap.enabled&&Ot.length>0,shadowMapType:nt.shadowMap.type,toneMapping:jr,useLegacyLights:nt._useLegacyLights,decodeVideoTexture:gr&&Lt.map.isVideoTexture===!0&&ColorManagement.getTransfer(Lt.map.colorSpace)===SRGBTransfer,premultipliedAlpha:Lt.premultipliedAlpha,doubleSided:Lt.side===DoubleSide,flipSided:Lt.side===BackSide,useDepthPacking:Lt.depthPacking>=0,depthPacking:Lt.depthPacking||0,index0AttributeName:Lt.index0AttributeName,extensionDerivatives:xr&&Lt.extensions.derivatives===!0,extensionFragDepth:xr&&Lt.extensions.fragDepth===!0,extensionDrawBuffers:xr&&Lt.extensions.drawBuffers===!0,extensionShaderTextureLOD:xr&&Lt.extensions.shaderTextureLOD===!0,extensionClipCullDistance:xr&&Lt.extensions.clipCullDistance===!0&&st.has("WEBGL_clip_cull_distance"),extensionMultiDraw:xr&&Lt.extensions.multiDraw===!0&&st.has("WEBGL_multi_draw"),rendererExtensionFragDepth:mt||st.has("EXT_frag_depth"),rendererExtensionDrawBuffers:mt||st.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:mt||st.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:st.has("KHR_parallel_shader_compile"),customProgramCacheKey:Lt.customProgramCacheKey()};return en.vertexUv1s=pt.has(1),en.vertexUv2s=pt.has(2),en.vertexUv3s=pt.has(3),pt.clear(),en}function wt(Lt){const Pt=[];if(Lt.shaderID?Pt.push(Lt.shaderID):(Pt.push(Lt.customVertexShaderID),Pt.push(Lt.customFragmentShaderID)),Lt.defines!==void 0)for(const Ot in Lt.defines)Pt.push(Ot),Pt.push(Lt.defines[Ot]);return Lt.isRawShaderMaterial===!1&&(Rt(Pt,Lt),Tt(Pt,Lt),Pt.push(nt.outputColorSpace)),Pt.push(Lt.customProgramCacheKey),Pt.join()}function Rt(Lt,Pt){Lt.push(Pt.precision),Lt.push(Pt.outputColorSpace),Lt.push(Pt.envMapMode),Lt.push(Pt.envMapCubeUVHeight),Lt.push(Pt.mapUv),Lt.push(Pt.alphaMapUv),Lt.push(Pt.lightMapUv),Lt.push(Pt.aoMapUv),Lt.push(Pt.bumpMapUv),Lt.push(Pt.normalMapUv),Lt.push(Pt.displacementMapUv),Lt.push(Pt.emissiveMapUv),Lt.push(Pt.metalnessMapUv),Lt.push(Pt.roughnessMapUv),Lt.push(Pt.anisotropyMapUv),Lt.push(Pt.clearcoatMapUv),Lt.push(Pt.clearcoatNormalMapUv),Lt.push(Pt.clearcoatRoughnessMapUv),Lt.push(Pt.iridescenceMapUv),Lt.push(Pt.iridescenceThicknessMapUv),Lt.push(Pt.sheenColorMapUv),Lt.push(Pt.sheenRoughnessMapUv),Lt.push(Pt.specularMapUv),Lt.push(Pt.specularColorMapUv),Lt.push(Pt.specularIntensityMapUv),Lt.push(Pt.transmissionMapUv),Lt.push(Pt.thicknessMapUv),Lt.push(Pt.combine),Lt.push(Pt.fogExp2),Lt.push(Pt.sizeAttenuation),Lt.push(Pt.morphTargetsCount),Lt.push(Pt.morphAttributeCount),Lt.push(Pt.numDirLights),Lt.push(Pt.numPointLights),Lt.push(Pt.numSpotLights),Lt.push(Pt.numSpotLightMaps),Lt.push(Pt.numHemiLights),Lt.push(Pt.numRectAreaLights),Lt.push(Pt.numDirLightShadows),Lt.push(Pt.numPointLightShadows),Lt.push(Pt.numSpotLightShadows),Lt.push(Pt.numSpotLightShadowsWithMaps),Lt.push(Pt.numLightProbes),Lt.push(Pt.shadowMapType),Lt.push(Pt.toneMapping),Lt.push(Pt.numClippingPlanes),Lt.push(Pt.numClipIntersection),Lt.push(Pt.depthPacking)}function Tt(Lt,Pt){dt.disableAll(),Pt.isWebGL2&&dt.enable(0),Pt.supportsVertexTextures&&dt.enable(1),Pt.instancing&&dt.enable(2),Pt.instancingColor&&dt.enable(3),Pt.matcap&&dt.enable(4),Pt.envMap&&dt.enable(5),Pt.normalMapObjectSpace&&dt.enable(6),Pt.normalMapTangentSpace&&dt.enable(7),Pt.clearcoat&&dt.enable(8),Pt.iridescence&&dt.enable(9),Pt.alphaTest&&dt.enable(10),Pt.vertexColors&&dt.enable(11),Pt.vertexAlphas&&dt.enable(12),Pt.vertexUv1s&&dt.enable(13),Pt.vertexUv2s&&dt.enable(14),Pt.vertexUv3s&&dt.enable(15),Pt.vertexTangents&&dt.enable(16),Pt.anisotropy&&dt.enable(17),Pt.alphaHash&&dt.enable(18),Pt.batching&&dt.enable(19),Lt.push(dt.mask),dt.disableAll(),Pt.fog&&dt.enable(0),Pt.useFog&&dt.enable(1),Pt.flatShading&&dt.enable(2),Pt.logarithmicDepthBuffer&&dt.enable(3),Pt.skinning&&dt.enable(4),Pt.morphTargets&&dt.enable(5),Pt.morphNormals&&dt.enable(6),Pt.morphColors&&dt.enable(7),Pt.premultipliedAlpha&&dt.enable(8),Pt.shadowMapEnabled&&dt.enable(9),Pt.useLegacyLights&&dt.enable(10),Pt.doubleSided&&dt.enable(11),Pt.flipSided&&dt.enable(12),Pt.useDepthPacking&&dt.enable(13),Pt.dithering&&dt.enable(14),Pt.transmission&&dt.enable(15),Pt.sheen&&dt.enable(16),Pt.opaque&&dt.enable(17),Pt.pointsUvs&&dt.enable(18),Pt.decodeVideoTexture&&dt.enable(19),Pt.alphaToCoverage&&dt.enable(20),Lt.push(dt.mask)}function It(Lt){const Pt=vt[Lt.type];let Ot;if(Pt){const Nt=ShaderLib[Pt];Ot=UniformsUtils.clone(Nt.uniforms)}else Ot=Lt.uniforms;return Ot}function At(Lt,Pt){let Ot;for(let Nt=0,$t=ft.length;Nt<$t;Nt++){const Vt=ft[Nt];if(Vt.cacheKey===Pt){Ot=Vt,++Ot.usedTimes;break}}return Ot===void 0&&(Ot=new WebGLProgram(nt,Pt,Lt,ct),ft.push(Ot)),Ot}function Dt(Lt){if(--Lt.usedTimes===0){const Pt=ft.indexOf(Lt);ft[Pt]=ft[ft.length-1],ft.pop(),Lt.destroy()}}function jt(Lt){ht.remove(Lt)}function Ft(){ht.dispose()}return{getParameters:Et,getProgramCacheKey:wt,getUniforms:It,acquireProgram:At,releaseProgram:Dt,releaseShaderCache:jt,programs:ft,dispose:Ft}}function WebGLProperties(){let nt=new WeakMap;function rt(ct){let ut=nt.get(ct);return ut===void 0&&(ut={},nt.set(ct,ut)),ut}function it(ct){nt.delete(ct)}function st(ct,ut,dt){nt.get(ct)[ut]=dt}function lt(){nt=new WeakMap}return{get:rt,remove:it,update:st,dispose:lt}}function painterSortStable(nt,rt){return nt.groupOrder!==rt.groupOrder?nt.groupOrder-rt.groupOrder:nt.renderOrder!==rt.renderOrder?nt.renderOrder-rt.renderOrder:nt.material.id!==rt.material.id?nt.material.id-rt.material.id:nt.z!==rt.z?nt.z-rt.z:nt.id-rt.id}function reversePainterSortStable(nt,rt){return nt.groupOrder!==rt.groupOrder?nt.groupOrder-rt.groupOrder:nt.renderOrder!==rt.renderOrder?nt.renderOrder-rt.renderOrder:nt.z!==rt.z?rt.z-nt.z:nt.id-rt.id}function WebGLRenderList(){const nt=[];let rt=0;const it=[],st=[],lt=[];function ct(){rt=0,it.length=0,st.length=0,lt.length=0}function ut(mt,gt,xt,yt,vt,St){let Et=nt[rt];return Et===void 0?(Et={id:mt.id,object:mt,geometry:gt,material:xt,groupOrder:yt,renderOrder:mt.renderOrder,z:vt,group:St},nt[rt]=Et):(Et.id=mt.id,Et.object=mt,Et.geometry=gt,Et.material=xt,Et.groupOrder=yt,Et.renderOrder=mt.renderOrder,Et.z=vt,Et.group=St),rt++,Et}function dt(mt,gt,xt,yt,vt,St){const Et=ut(mt,gt,xt,yt,vt,St);xt.transmission>0?st.push(Et):xt.transparent===!0?lt.push(Et):it.push(Et)}function ht(mt,gt,xt,yt,vt,St){const Et=ut(mt,gt,xt,yt,vt,St);xt.transmission>0?st.unshift(Et):xt.transparent===!0?lt.unshift(Et):it.unshift(Et)}function pt(mt,gt){it.length>1&&it.sort(mt||painterSortStable),st.length>1&&st.sort(gt||reversePainterSortStable),lt.length>1&&lt.sort(gt||reversePainterSortStable)}function ft(){for(let mt=rt,gt=nt.length;mt<gt;mt++){const xt=nt[mt];if(xt.id===null)break;xt.id=null,xt.object=null,xt.geometry=null,xt.material=null,xt.group=null}}return{opaque:it,transmissive:st,transparent:lt,init:ct,push:dt,unshift:ht,finish:ft,sort:pt}}function WebGLRenderLists(){let nt=new WeakMap;function rt(st,lt){const ct=nt.get(st);let ut;return ct===void 0?(ut=new WebGLRenderList,nt.set(st,[ut])):lt>=ct.length?(ut=new WebGLRenderList,ct.push(ut)):ut=ct[lt],ut}function it(){nt=new WeakMap}return{get:rt,dispose:it}}function UniformsCache(){const nt={};return{get:function(rt){if(nt[rt.id]!==void 0)return nt[rt.id];let it;switch(rt.type){case"DirectionalLight":it={direction:new Vector3,color:new Color};break;case"SpotLight":it={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":it={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":it={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":it={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return nt[rt.id]=it,it}}}function ShadowUniformsCache(){const nt={};return{get:function(rt){if(nt[rt.id]!==void 0)return nt[rt.id];let it;switch(rt.type){case"DirectionalLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return nt[rt.id]=it,it}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(nt,rt){return(rt.castShadow?2:0)-(nt.castShadow?2:0)+(rt.map?1:0)-(nt.map?1:0)}function WebGLLights(nt,rt){const it=new UniformsCache,st=ShadowUniformsCache(),lt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let ft=0;ft<9;ft++)lt.probe.push(new Vector3);const ct=new Vector3,ut=new Matrix4,dt=new Matrix4;function ht(ft,mt){let gt=0,xt=0,yt=0;for(let Ot=0;Ot<9;Ot++)lt.probe[Ot].set(0,0,0);let vt=0,St=0,Et=0,wt=0,Rt=0,Tt=0,It=0,At=0,Dt=0,jt=0,Ft=0;ft.sort(shadowCastingAndTexturingLightsFirst);const Lt=mt===!0?Math.PI:1;for(let Ot=0,Nt=ft.length;Ot<Nt;Ot++){const $t=ft[Ot],Vt=$t.color,Ut=$t.intensity,zt=$t.distance,Bt=$t.shadow&&$t.shadow.map?$t.shadow.map.texture:null;if($t.isAmbientLight)gt+=Vt.r*Ut*Lt,xt+=Vt.g*Ut*Lt,yt+=Vt.b*Ut*Lt;else if($t.isLightProbe){for(let Ht=0;Ht<9;Ht++)lt.probe[Ht].addScaledVector($t.sh.coefficients[Ht],Ut);Ft++}else if($t.isDirectionalLight){const Ht=it.get($t);if(Ht.color.copy($t.color).multiplyScalar($t.intensity*Lt),$t.castShadow){const Gt=$t.shadow,Kt=st.get($t);Kt.shadowBias=Gt.bias,Kt.shadowNormalBias=Gt.normalBias,Kt.shadowRadius=Gt.radius,Kt.shadowMapSize=Gt.mapSize,lt.directionalShadow[vt]=Kt,lt.directionalShadowMap[vt]=Bt,lt.directionalShadowMatrix[vt]=$t.shadow.matrix,Tt++}lt.directional[vt]=Ht,vt++}else if($t.isSpotLight){const Ht=it.get($t);Ht.position.setFromMatrixPosition($t.matrixWorld),Ht.color.copy(Vt).multiplyScalar(Ut*Lt),Ht.distance=zt,Ht.coneCos=Math.cos($t.angle),Ht.penumbraCos=Math.cos($t.angle*(1-$t.penumbra)),Ht.decay=$t.decay,lt.spot[Et]=Ht;const Gt=$t.shadow;if($t.map&&(lt.spotLightMap[Dt]=$t.map,Dt++,Gt.updateMatrices($t),$t.castShadow&&jt++),lt.spotLightMatrix[Et]=Gt.matrix,$t.castShadow){const Kt=st.get($t);Kt.shadowBias=Gt.bias,Kt.shadowNormalBias=Gt.normalBias,Kt.shadowRadius=Gt.radius,Kt.shadowMapSize=Gt.mapSize,lt.spotShadow[Et]=Kt,lt.spotShadowMap[Et]=Bt,At++}Et++}else if($t.isRectAreaLight){const Ht=it.get($t);Ht.color.copy(Vt).multiplyScalar(Ut),Ht.halfWidth.set($t.width*.5,0,0),Ht.halfHeight.set(0,$t.height*.5,0),lt.rectArea[wt]=Ht,wt++}else if($t.isPointLight){const Ht=it.get($t);if(Ht.color.copy($t.color).multiplyScalar($t.intensity*Lt),Ht.distance=$t.distance,Ht.decay=$t.decay,$t.castShadow){const Gt=$t.shadow,Kt=st.get($t);Kt.shadowBias=Gt.bias,Kt.shadowNormalBias=Gt.normalBias,Kt.shadowRadius=Gt.radius,Kt.shadowMapSize=Gt.mapSize,Kt.shadowCameraNear=Gt.camera.near,Kt.shadowCameraFar=Gt.camera.far,lt.pointShadow[St]=Kt,lt.pointShadowMap[St]=Bt,lt.pointShadowMatrix[St]=$t.shadow.matrix,It++}lt.point[St]=Ht,St++}else if($t.isHemisphereLight){const Ht=it.get($t);Ht.skyColor.copy($t.color).multiplyScalar(Ut*Lt),Ht.groundColor.copy($t.groundColor).multiplyScalar(Ut*Lt),lt.hemi[Rt]=Ht,Rt++}}wt>0&&(rt.isWebGL2?nt.has("OES_texture_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,lt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(lt.rectAreaLTC1=UniformsLib.LTC_HALF_1,lt.rectAreaLTC2=UniformsLib.LTC_HALF_2):nt.has("OES_texture_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,lt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):nt.has("OES_texture_half_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_HALF_1,lt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),lt.ambient[0]=gt,lt.ambient[1]=xt,lt.ambient[2]=yt;const Pt=lt.hash;(Pt.directionalLength!==vt||Pt.pointLength!==St||Pt.spotLength!==Et||Pt.rectAreaLength!==wt||Pt.hemiLength!==Rt||Pt.numDirectionalShadows!==Tt||Pt.numPointShadows!==It||Pt.numSpotShadows!==At||Pt.numSpotMaps!==Dt||Pt.numLightProbes!==Ft)&&(lt.directional.length=vt,lt.spot.length=Et,lt.rectArea.length=wt,lt.point.length=St,lt.hemi.length=Rt,lt.directionalShadow.length=Tt,lt.directionalShadowMap.length=Tt,lt.pointShadow.length=It,lt.pointShadowMap.length=It,lt.spotShadow.length=At,lt.spotShadowMap.length=At,lt.directionalShadowMatrix.length=Tt,lt.pointShadowMatrix.length=It,lt.spotLightMatrix.length=At+Dt-jt,lt.spotLightMap.length=Dt,lt.numSpotLightShadowsWithMaps=jt,lt.numLightProbes=Ft,Pt.directionalLength=vt,Pt.pointLength=St,Pt.spotLength=Et,Pt.rectAreaLength=wt,Pt.hemiLength=Rt,Pt.numDirectionalShadows=Tt,Pt.numPointShadows=It,Pt.numSpotShadows=At,Pt.numSpotMaps=Dt,Pt.numLightProbes=Ft,lt.version=nextVersion++)}function pt(ft,mt){let gt=0,xt=0,yt=0,vt=0,St=0;const Et=mt.matrixWorldInverse;for(let wt=0,Rt=ft.length;wt<Rt;wt++){const Tt=ft[wt];if(Tt.isDirectionalLight){const It=lt.directional[gt];It.direction.setFromMatrixPosition(Tt.matrixWorld),ct.setFromMatrixPosition(Tt.target.matrixWorld),It.direction.sub(ct),It.direction.transformDirection(Et),gt++}else if(Tt.isSpotLight){const It=lt.spot[yt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(Et),It.direction.setFromMatrixPosition(Tt.matrixWorld),ct.setFromMatrixPosition(Tt.target.matrixWorld),It.direction.sub(ct),It.direction.transformDirection(Et),yt++}else if(Tt.isRectAreaLight){const It=lt.rectArea[vt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(Et),dt.identity(),ut.copy(Tt.matrixWorld),ut.premultiply(Et),dt.extractRotation(ut),It.halfWidth.set(Tt.width*.5,0,0),It.halfHeight.set(0,Tt.height*.5,0),It.halfWidth.applyMatrix4(dt),It.halfHeight.applyMatrix4(dt),vt++}else if(Tt.isPointLight){const It=lt.point[xt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(Et),xt++}else if(Tt.isHemisphereLight){const It=lt.hemi[St];It.direction.setFromMatrixPosition(Tt.matrixWorld),It.direction.transformDirection(Et),St++}}}return{setup:ht,setupView:pt,state:lt}}function WebGLRenderState(nt,rt){const it=new WebGLLights(nt,rt),st=[],lt=[];function ct(){st.length=0,lt.length=0}function ut(mt){st.push(mt)}function dt(mt){lt.push(mt)}function ht(mt){it.setup(st,mt)}function pt(mt){it.setupView(st,mt)}return{init:ct,state:{lightsArray:st,shadowsArray:lt,lights:it},setupLights:ht,setupLightsView:pt,pushLight:ut,pushShadow:dt}}function WebGLRenderStates(nt,rt){let it=new WeakMap;function st(ct,ut=0){const dt=it.get(ct);let ht;return dt===void 0?(ht=new WebGLRenderState(nt,rt),it.set(ct,[ht])):ut>=dt.length?(ht=new WebGLRenderState(nt,rt),dt.push(ht)):ht=dt[ut],ht}function lt(){it=new WeakMap}return{get:st,dispose:lt}}class MeshDepthMaterial extends Material{constructor(rt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(rt)}copy(rt){return super.copy(rt),this.depthPacking=rt.depthPacking,this.map=rt.map,this.alphaMap=rt.alphaMap,this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(rt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(rt)}copy(rt){return super.copy(rt),this.map=rt.map,this.alphaMap=rt.alphaMap,this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(nt,rt,it){let st=new Frustum;const lt=new Vector2,ct=new Vector2,ut=new Vector4,dt=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ht=new MeshDistanceMaterial,pt={},ft=it.maxTextureSize,mt={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},gt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),xt=gt.clone();xt.defines.HORIZONTAL_PASS=1;const yt=new BufferGeometry;yt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const vt=new Mesh(yt,gt),St=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let Et=this.type;this.render=function(At,Dt,jt){if(St.enabled===!1||St.autoUpdate===!1&&St.needsUpdate===!1||At.length===0)return;const Ft=nt.getRenderTarget(),Lt=nt.getActiveCubeFace(),Pt=nt.getActiveMipmapLevel(),Ot=nt.state;Ot.setBlending(NoBlending),Ot.buffers.color.setClear(1,1,1,1),Ot.buffers.depth.setTest(!0),Ot.setScissorTest(!1);const Nt=Et!==VSMShadowMap&&this.type===VSMShadowMap,$t=Et===VSMShadowMap&&this.type!==VSMShadowMap;for(let Vt=0,Ut=At.length;Vt<Ut;Vt++){const zt=At[Vt],Bt=zt.shadow;if(Bt===void 0){console.warn("THREE.WebGLShadowMap:",zt,"has no shadow.");continue}if(Bt.autoUpdate===!1&&Bt.needsUpdate===!1)continue;lt.copy(Bt.mapSize);const Ht=Bt.getFrameExtents();if(lt.multiply(Ht),ct.copy(Bt.mapSize),(lt.x>ft||lt.y>ft)&&(lt.x>ft&&(ct.x=Math.floor(ft/Ht.x),lt.x=ct.x*Ht.x,Bt.mapSize.x=ct.x),lt.y>ft&&(ct.y=Math.floor(ft/Ht.y),lt.y=ct.y*Ht.y,Bt.mapSize.y=ct.y)),Bt.map===null||Nt===!0||$t===!0){const Kt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Bt.map!==null&&Bt.map.dispose(),Bt.map=new WebGLRenderTarget(lt.x,lt.y,Kt),Bt.map.texture.name=zt.name+".shadowMap",Bt.camera.updateProjectionMatrix()}nt.setRenderTarget(Bt.map),nt.clear();const Gt=Bt.getViewportCount();for(let Kt=0;Kt<Gt;Kt++){const Xt=Bt.getViewport(Kt);ut.set(ct.x*Xt.x,ct.y*Xt.y,ct.x*Xt.z,ct.y*Xt.w),Ot.viewport(ut),Bt.updateMatrices(zt,Kt),st=Bt.getFrustum(),Tt(Dt,jt,Bt.camera,zt,this.type)}Bt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&wt(Bt,jt),Bt.needsUpdate=!1}Et=this.type,St.needsUpdate=!1,nt.setRenderTarget(Ft,Lt,Pt)};function wt(At,Dt){const jt=rt.update(vt);gt.defines.VSM_SAMPLES!==At.blurSamples&&(gt.defines.VSM_SAMPLES=At.blurSamples,xt.defines.VSM_SAMPLES=At.blurSamples,gt.needsUpdate=!0,xt.needsUpdate=!0),At.mapPass===null&&(At.mapPass=new WebGLRenderTarget(lt.x,lt.y)),gt.uniforms.shadow_pass.value=At.map.texture,gt.uniforms.resolution.value=At.mapSize,gt.uniforms.radius.value=At.radius,nt.setRenderTarget(At.mapPass),nt.clear(),nt.renderBufferDirect(Dt,null,jt,gt,vt,null),xt.uniforms.shadow_pass.value=At.mapPass.texture,xt.uniforms.resolution.value=At.mapSize,xt.uniforms.radius.value=At.radius,nt.setRenderTarget(At.map),nt.clear(),nt.renderBufferDirect(Dt,null,jt,xt,vt,null)}function Rt(At,Dt,jt,Ft){let Lt=null;const Pt=jt.isPointLight===!0?At.customDistanceMaterial:At.customDepthMaterial;if(Pt!==void 0)Lt=Pt;else if(Lt=jt.isPointLight===!0?ht:dt,nt.localClippingEnabled&&Dt.clipShadows===!0&&Array.isArray(Dt.clippingPlanes)&&Dt.clippingPlanes.length!==0||Dt.displacementMap&&Dt.displacementScale!==0||Dt.alphaMap&&Dt.alphaTest>0||Dt.map&&Dt.alphaTest>0){const Ot=Lt.uuid,Nt=Dt.uuid;let $t=pt[Ot];$t===void 0&&($t={},pt[Ot]=$t);let Vt=$t[Nt];Vt===void 0&&(Vt=Lt.clone(),$t[Nt]=Vt,Dt.addEventListener("dispose",It)),Lt=Vt}if(Lt.visible=Dt.visible,Lt.wireframe=Dt.wireframe,Ft===VSMShadowMap?Lt.side=Dt.shadowSide!==null?Dt.shadowSide:Dt.side:Lt.side=Dt.shadowSide!==null?Dt.shadowSide:mt[Dt.side],Lt.alphaMap=Dt.alphaMap,Lt.alphaTest=Dt.alphaTest,Lt.map=Dt.map,Lt.clipShadows=Dt.clipShadows,Lt.clippingPlanes=Dt.clippingPlanes,Lt.clipIntersection=Dt.clipIntersection,Lt.displacementMap=Dt.displacementMap,Lt.displacementScale=Dt.displacementScale,Lt.displacementBias=Dt.displacementBias,Lt.wireframeLinewidth=Dt.wireframeLinewidth,Lt.linewidth=Dt.linewidth,jt.isPointLight===!0&&Lt.isMeshDistanceMaterial===!0){const Ot=nt.properties.get(Lt);Ot.light=jt}return Lt}function Tt(At,Dt,jt,Ft,Lt){if(At.visible===!1)return;if(At.layers.test(Dt.layers)&&(At.isMesh||At.isLine||At.isPoints)&&(At.castShadow||At.receiveShadow&&Lt===VSMShadowMap)&&(!At.frustumCulled||st.intersectsObject(At))){At.modelViewMatrix.multiplyMatrices(jt.matrixWorldInverse,At.matrixWorld);const Nt=rt.update(At),$t=At.material;if(Array.isArray($t)){const Vt=Nt.groups;for(let Ut=0,zt=Vt.length;Ut<zt;Ut++){const Bt=Vt[Ut],Ht=$t[Bt.materialIndex];if(Ht&&Ht.visible){const Gt=Rt(At,Ht,Ft,Lt);At.onBeforeShadow(nt,At,Dt,jt,Nt,Gt,Bt),nt.renderBufferDirect(jt,null,Nt,Gt,At,Bt),At.onAfterShadow(nt,At,Dt,jt,Nt,Gt,Bt)}}}else if($t.visible){const Vt=Rt(At,$t,Ft,Lt);At.onBeforeShadow(nt,At,Dt,jt,Nt,Vt,null),nt.renderBufferDirect(jt,null,Nt,Vt,At,null),At.onAfterShadow(nt,At,Dt,jt,Nt,Vt,null)}}const Ot=At.children;for(let Nt=0,$t=Ot.length;Nt<$t;Nt++)Tt(Ot[Nt],Dt,jt,Ft,Lt)}function It(At){At.target.removeEventListener("dispose",It);for(const jt in pt){const Ft=pt[jt],Lt=At.target.uuid;Lt in Ft&&(Ft[Lt].dispose(),delete Ft[Lt])}}}function WebGLState(nt,rt,it){const st=it.isWebGL2;function lt(){let Rr=!1;const pn=new Vector4;let Tr=null;const xr=new Vector4(0,0,0,0);return{setMask:function(jr){Tr!==jr&&!Rr&&(nt.colorMask(jr,jr,jr,jr),Tr=jr)},setLocked:function(jr){Rr=jr},setClear:function(jr,en,fn,Vn,Yn){Yn===!0&&(jr*=Vn,en*=Vn,fn*=Vn),pn.set(jr,en,fn,Vn),xr.equals(pn)===!1&&(nt.clearColor(jr,en,fn,Vn),xr.copy(pn))},reset:function(){Rr=!1,Tr=null,xr.set(-1,0,0,0)}}}function ct(){let Rr=!1,pn=null,Tr=null,xr=null;return{setTest:function(jr){jr?mr(nt.DEPTH_TEST):hr(nt.DEPTH_TEST)},setMask:function(jr){pn!==jr&&!Rr&&(nt.depthMask(jr),pn=jr)},setFunc:function(jr){if(Tr!==jr){switch(jr){case NeverDepth:nt.depthFunc(nt.NEVER);break;case AlwaysDepth:nt.depthFunc(nt.ALWAYS);break;case LessDepth:nt.depthFunc(nt.LESS);break;case LessEqualDepth:nt.depthFunc(nt.LEQUAL);break;case EqualDepth:nt.depthFunc(nt.EQUAL);break;case GreaterEqualDepth:nt.depthFunc(nt.GEQUAL);break;case GreaterDepth:nt.depthFunc(nt.GREATER);break;case NotEqualDepth:nt.depthFunc(nt.NOTEQUAL);break;default:nt.depthFunc(nt.LEQUAL)}Tr=jr}},setLocked:function(jr){Rr=jr},setClear:function(jr){xr!==jr&&(nt.clearDepth(jr),xr=jr)},reset:function(){Rr=!1,pn=null,Tr=null,xr=null}}}function ut(){let Rr=!1,pn=null,Tr=null,xr=null,jr=null,en=null,fn=null,Vn=null,Yn=null;return{setTest:function(Hn){Rr||(Hn?mr(nt.STENCIL_TEST):hr(nt.STENCIL_TEST))},setMask:function(Hn){pn!==Hn&&!Rr&&(nt.stencilMask(Hn),pn=Hn)},setFunc:function(Hn,Bn,es){(Tr!==Hn||xr!==Bn||jr!==es)&&(nt.stencilFunc(Hn,Bn,es),Tr=Hn,xr=Bn,jr=es)},setOp:function(Hn,Bn,es){(en!==Hn||fn!==Bn||Vn!==es)&&(nt.stencilOp(Hn,Bn,es),en=Hn,fn=Bn,Vn=es)},setLocked:function(Hn){Rr=Hn},setClear:function(Hn){Yn!==Hn&&(nt.clearStencil(Hn),Yn=Hn)},reset:function(){Rr=!1,pn=null,Tr=null,xr=null,jr=null,en=null,fn=null,Vn=null,Yn=null}}}const dt=new lt,ht=new ct,pt=new ut,ft=new WeakMap,mt=new WeakMap;let gt={},xt={},yt=new WeakMap,vt=[],St=null,Et=!1,wt=null,Rt=null,Tt=null,It=null,At=null,Dt=null,jt=null,Ft=new Color(0,0,0),Lt=0,Pt=!1,Ot=null,Nt=null,$t=null,Vt=null,Ut=null;const zt=nt.getParameter(nt.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Bt=!1,Ht=0;const Gt=nt.getParameter(nt.VERSION);Gt.indexOf("WebGL")!==-1?(Ht=parseFloat(/^WebGL (\d)/.exec(Gt)[1]),Bt=Ht>=1):Gt.indexOf("OpenGL ES")!==-1&&(Ht=parseFloat(/^OpenGL ES (\d)/.exec(Gt)[1]),Bt=Ht>=2);let Kt=null,Xt={};const or=nt.getParameter(nt.SCISSOR_BOX),tr=nt.getParameter(nt.VIEWPORT),dr=new Vector4().fromArray(or),fr=new Vector4().fromArray(tr);function Sr(Rr,pn,Tr,xr){const jr=new Uint8Array(4),en=nt.createTexture();nt.bindTexture(Rr,en),nt.texParameteri(Rr,nt.TEXTURE_MIN_FILTER,nt.NEAREST),nt.texParameteri(Rr,nt.TEXTURE_MAG_FILTER,nt.NEAREST);for(let fn=0;fn<Tr;fn++)st&&(Rr===nt.TEXTURE_3D||Rr===nt.TEXTURE_2D_ARRAY)?nt.texImage3D(pn,0,nt.RGBA,1,1,xr,0,nt.RGBA,nt.UNSIGNED_BYTE,jr):nt.texImage2D(pn+fn,0,nt.RGBA,1,1,0,nt.RGBA,nt.UNSIGNED_BYTE,jr);return en}const vr={};vr[nt.TEXTURE_2D]=Sr(nt.TEXTURE_2D,nt.TEXTURE_2D,1),vr[nt.TEXTURE_CUBE_MAP]=Sr(nt.TEXTURE_CUBE_MAP,nt.TEXTURE_CUBE_MAP_POSITIVE_X,6),st&&(vr[nt.TEXTURE_2D_ARRAY]=Sr(nt.TEXTURE_2D_ARRAY,nt.TEXTURE_2D_ARRAY,1,1),vr[nt.TEXTURE_3D]=Sr(nt.TEXTURE_3D,nt.TEXTURE_3D,1,1)),dt.setClear(0,0,0,1),ht.setClear(1),pt.setClear(0),mr(nt.DEPTH_TEST),ht.setFunc(LessEqualDepth),Zr(!1),Qt(CullFaceBack),mr(nt.CULL_FACE),$r(NoBlending);function mr(Rr){gt[Rr]!==!0&&(nt.enable(Rr),gt[Rr]=!0)}function hr(Rr){gt[Rr]!==!1&&(nt.disable(Rr),gt[Rr]=!1)}function gr(Rr,pn){return xt[Rr]!==pn?(nt.bindFramebuffer(Rr,pn),xt[Rr]=pn,st&&(Rr===nt.DRAW_FRAMEBUFFER&&(xt[nt.FRAMEBUFFER]=pn),Rr===nt.FRAMEBUFFER&&(xt[nt.DRAW_FRAMEBUFFER]=pn)),!0):!1}function lr(Rr,pn){let Tr=vt,xr=!1;if(Rr)if(Tr=yt.get(pn),Tr===void 0&&(Tr=[],yt.set(pn,Tr)),Rr.isWebGLMultipleRenderTargets){const jr=Rr.texture;if(Tr.length!==jr.length||Tr[0]!==nt.COLOR_ATTACHMENT0){for(let en=0,fn=jr.length;en<fn;en++)Tr[en]=nt.COLOR_ATTACHMENT0+en;Tr.length=jr.length,xr=!0}}else Tr[0]!==nt.COLOR_ATTACHMENT0&&(Tr[0]=nt.COLOR_ATTACHMENT0,xr=!0);else Tr[0]!==nt.BACK&&(Tr[0]=nt.BACK,xr=!0);xr&&(it.isWebGL2?nt.drawBuffers(Tr):rt.get("WEBGL_draw_buffers").drawBuffersWEBGL(Tr))}function Ir(Rr){return St!==Rr?(nt.useProgram(Rr),St=Rr,!0):!1}const wr={[AddEquation]:nt.FUNC_ADD,[SubtractEquation]:nt.FUNC_SUBTRACT,[ReverseSubtractEquation]:nt.FUNC_REVERSE_SUBTRACT};if(st)wr[MinEquation]=nt.MIN,wr[MaxEquation]=nt.MAX;else{const Rr=rt.get("EXT_blend_minmax");Rr!==null&&(wr[MinEquation]=Rr.MIN_EXT,wr[MaxEquation]=Rr.MAX_EXT)}const Fr={[ZeroFactor]:nt.ZERO,[OneFactor]:nt.ONE,[SrcColorFactor]:nt.SRC_COLOR,[SrcAlphaFactor]:nt.SRC_ALPHA,[SrcAlphaSaturateFactor]:nt.SRC_ALPHA_SATURATE,[DstColorFactor]:nt.DST_COLOR,[DstAlphaFactor]:nt.DST_ALPHA,[OneMinusSrcColorFactor]:nt.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:nt.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:nt.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:nt.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:nt.CONSTANT_COLOR,[OneMinusConstantColorFactor]:nt.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:nt.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:nt.ONE_MINUS_CONSTANT_ALPHA};function $r(Rr,pn,Tr,xr,jr,en,fn,Vn,Yn,Hn){if(Rr===NoBlending){Et===!0&&(hr(nt.BLEND),Et=!1);return}if(Et===!1&&(mr(nt.BLEND),Et=!0),Rr!==CustomBlending){if(Rr!==wt||Hn!==Pt){if((Rt!==AddEquation||At!==AddEquation)&&(nt.blendEquation(nt.FUNC_ADD),Rt=AddEquation,At=AddEquation),Hn)switch(Rr){case NormalBlending:nt.blendFuncSeparate(nt.ONE,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.ONE,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFuncSeparate(nt.ZERO,nt.SRC_COLOR,nt.ZERO,nt.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Rr);break}else switch(Rr){case NormalBlending:nt.blendFuncSeparate(nt.SRC_ALPHA,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.SRC_ALPHA,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFunc(nt.ZERO,nt.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Rr);break}Tt=null,It=null,Dt=null,jt=null,Ft.set(0,0,0),Lt=0,wt=Rr,Pt=Hn}return}jr=jr||pn,en=en||Tr,fn=fn||xr,(pn!==Rt||jr!==At)&&(nt.blendEquationSeparate(wr[pn],wr[jr]),Rt=pn,At=jr),(Tr!==Tt||xr!==It||en!==Dt||fn!==jt)&&(nt.blendFuncSeparate(Fr[Tr],Fr[xr],Fr[en],Fr[fn]),Tt=Tr,It=xr,Dt=en,jt=fn),(Vn.equals(Ft)===!1||Yn!==Lt)&&(nt.blendColor(Vn.r,Vn.g,Vn.b,Yn),Ft.copy(Vn),Lt=Yn),wt=Rr,Pt=!1}function hn(Rr,pn){Rr.side===DoubleSide?hr(nt.CULL_FACE):mr(nt.CULL_FACE);let Tr=Rr.side===BackSide;pn&&(Tr=!Tr),Zr(Tr),Rr.blending===NormalBlending&&Rr.transparent===!1?$r(NoBlending):$r(Rr.blending,Rr.blendEquation,Rr.blendSrc,Rr.blendDst,Rr.blendEquationAlpha,Rr.blendSrcAlpha,Rr.blendDstAlpha,Rr.blendColor,Rr.blendAlpha,Rr.premultipliedAlpha),ht.setFunc(Rr.depthFunc),ht.setTest(Rr.depthTest),ht.setMask(Rr.depthWrite),dt.setMask(Rr.colorWrite);const xr=Rr.stencilWrite;pt.setTest(xr),xr&&(pt.setMask(Rr.stencilWriteMask),pt.setFunc(Rr.stencilFunc,Rr.stencilRef,Rr.stencilFuncMask),pt.setOp(Rr.stencilFail,Rr.stencilZFail,Rr.stencilZPass)),pr(Rr.polygonOffset,Rr.polygonOffsetFactor,Rr.polygonOffsetUnits),Rr.alphaToCoverage===!0?mr(nt.SAMPLE_ALPHA_TO_COVERAGE):hr(nt.SAMPLE_ALPHA_TO_COVERAGE)}function Zr(Rr){Ot!==Rr&&(Rr?nt.frontFace(nt.CW):nt.frontFace(nt.CCW),Ot=Rr)}function Qt(Rr){Rr!==CullFaceNone?(mr(nt.CULL_FACE),Rr!==Nt&&(Rr===CullFaceBack?nt.cullFace(nt.BACK):Rr===CullFaceFront?nt.cullFace(nt.FRONT):nt.cullFace(nt.FRONT_AND_BACK))):hr(nt.CULL_FACE),Nt=Rr}function Jt(Rr){Rr!==$t&&(Bt&&nt.lineWidth(Rr),$t=Rr)}function pr(Rr,pn,Tr){Rr?(mr(nt.POLYGON_OFFSET_FILL),(Vt!==pn||Ut!==Tr)&&(nt.polygonOffset(pn,Tr),Vt=pn,Ut=Tr)):hr(nt.POLYGON_OFFSET_FILL)}function Vr(Rr){Rr?mr(nt.SCISSOR_TEST):hr(nt.SCISSOR_TEST)}function Wr(Rr){Rr===void 0&&(Rr=nt.TEXTURE0+zt-1),Kt!==Rr&&(nt.activeTexture(Rr),Kt=Rr)}function zr(Rr,pn,Tr){Tr===void 0&&(Kt===null?Tr=nt.TEXTURE0+zt-1:Tr=Kt);let xr=Xt[Tr];xr===void 0&&(xr={type:void 0,texture:void 0},Xt[Tr]=xr),(xr.type!==Rr||xr.texture!==pn)&&(Kt!==Tr&&(nt.activeTexture(Tr),Kt=Tr),nt.bindTexture(Rr,pn||vr[Rr]),xr.type=Rr,xr.texture=pn)}function ln(){const Rr=Xt[Kt];Rr!==void 0&&Rr.type!==void 0&&(nt.bindTexture(Rr.type,null),Rr.type=void 0,Rr.texture=void 0)}function xn(){try{nt.compressedTexImage2D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function yn(){try{nt.compressedTexImage3D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function Wn(){try{nt.texSubImage2D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function Mn(){try{nt.texSubImage3D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function sn(){try{nt.compressedTexSubImage2D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function qn(){try{nt.compressedTexSubImage3D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function Gr(){try{nt.texStorage2D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function qr(){try{nt.texStorage3D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function wn(){try{nt.texImage2D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function Cr(){try{nt.texImage3D.apply(nt,arguments)}catch(Rr){console.error("THREE.WebGLState:",Rr)}}function nr(Rr){dr.equals(Rr)===!1&&(nt.scissor(Rr.x,Rr.y,Rr.z,Rr.w),dr.copy(Rr))}function Ur(Rr){fr.equals(Rr)===!1&&(nt.viewport(Rr.x,Rr.y,Rr.z,Rr.w),fr.copy(Rr))}function Mr(Rr,pn){let Tr=mt.get(pn);Tr===void 0&&(Tr=new WeakMap,mt.set(pn,Tr));let xr=Tr.get(Rr);xr===void 0&&(xr=nt.getUniformBlockIndex(pn,Rr.name),Tr.set(Rr,xr))}function rn(Rr,pn){const xr=mt.get(pn).get(Rr);ft.get(pn)!==xr&&(nt.uniformBlockBinding(pn,xr,Rr.__bindingPointIndex),ft.set(pn,xr))}function Cn(){nt.disable(nt.BLEND),nt.disable(nt.CULL_FACE),nt.disable(nt.DEPTH_TEST),nt.disable(nt.POLYGON_OFFSET_FILL),nt.disable(nt.SCISSOR_TEST),nt.disable(nt.STENCIL_TEST),nt.disable(nt.SAMPLE_ALPHA_TO_COVERAGE),nt.blendEquation(nt.FUNC_ADD),nt.blendFunc(nt.ONE,nt.ZERO),nt.blendFuncSeparate(nt.ONE,nt.ZERO,nt.ONE,nt.ZERO),nt.blendColor(0,0,0,0),nt.colorMask(!0,!0,!0,!0),nt.clearColor(0,0,0,0),nt.depthMask(!0),nt.depthFunc(nt.LESS),nt.clearDepth(1),nt.stencilMask(4294967295),nt.stencilFunc(nt.ALWAYS,0,4294967295),nt.stencilOp(nt.KEEP,nt.KEEP,nt.KEEP),nt.clearStencil(0),nt.cullFace(nt.BACK),nt.frontFace(nt.CCW),nt.polygonOffset(0,0),nt.activeTexture(nt.TEXTURE0),nt.bindFramebuffer(nt.FRAMEBUFFER,null),st===!0&&(nt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),nt.bindFramebuffer(nt.READ_FRAMEBUFFER,null)),nt.useProgram(null),nt.lineWidth(1),nt.scissor(0,0,nt.canvas.width,nt.canvas.height),nt.viewport(0,0,nt.canvas.width,nt.canvas.height),gt={},Kt=null,Xt={},xt={},yt=new WeakMap,vt=[],St=null,Et=!1,wt=null,Rt=null,Tt=null,It=null,At=null,Dt=null,jt=null,Ft=new Color(0,0,0),Lt=0,Pt=!1,Ot=null,Nt=null,$t=null,Vt=null,Ut=null,dr.set(0,0,nt.canvas.width,nt.canvas.height),fr.set(0,0,nt.canvas.width,nt.canvas.height),dt.reset(),ht.reset(),pt.reset()}return{buffers:{color:dt,depth:ht,stencil:pt},enable:mr,disable:hr,bindFramebuffer:gr,drawBuffers:lr,useProgram:Ir,setBlending:$r,setMaterial:hn,setFlipSided:Zr,setCullFace:Qt,setLineWidth:Jt,setPolygonOffset:pr,setScissorTest:Vr,activeTexture:Wr,bindTexture:zr,unbindTexture:ln,compressedTexImage2D:xn,compressedTexImage3D:yn,texImage2D:wn,texImage3D:Cr,updateUBOMapping:Mr,uniformBlockBinding:rn,texStorage2D:Gr,texStorage3D:qr,texSubImage2D:Wn,texSubImage3D:Mn,compressedTexSubImage2D:sn,compressedTexSubImage3D:qn,scissor:nr,viewport:Ur,reset:Cn}}function WebGLTextures(nt,rt,it,st,lt,ct,ut){const dt=lt.isWebGL2,ht=rt.has("WEBGL_multisampled_render_to_texture")?rt.get("WEBGL_multisampled_render_to_texture"):null,pt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),ft=new WeakMap;let mt;const gt=new WeakMap;let xt=!1;try{xt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function yt(Qt,Jt){return xt?new OffscreenCanvas(Qt,Jt):createElementNS("canvas")}function vt(Qt,Jt,pr,Vr){let Wr=1;if((Qt.width>Vr||Qt.height>Vr)&&(Wr=Vr/Math.max(Qt.width,Qt.height)),Wr<1||Jt===!0)if(typeof HTMLImageElement<"u"&&Qt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Qt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Qt instanceof ImageBitmap){const zr=Jt?floorPowerOfTwo:Math.floor,ln=zr(Wr*Qt.width),xn=zr(Wr*Qt.height);mt===void 0&&(mt=yt(ln,xn));const yn=pr?yt(ln,xn):mt;return yn.width=ln,yn.height=xn,yn.getContext("2d").drawImage(Qt,0,0,ln,xn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Qt.width+"x"+Qt.height+") to ("+ln+"x"+xn+")."),yn}else return"data"in Qt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Qt.width+"x"+Qt.height+")."),Qt;return Qt}function St(Qt){return isPowerOfTwo(Qt.width)&&isPowerOfTwo(Qt.height)}function Et(Qt){return dt?!1:Qt.wrapS!==ClampToEdgeWrapping||Qt.wrapT!==ClampToEdgeWrapping||Qt.minFilter!==NearestFilter&&Qt.minFilter!==LinearFilter}function wt(Qt,Jt){return Qt.generateMipmaps&&Jt&&Qt.minFilter!==NearestFilter&&Qt.minFilter!==LinearFilter}function Rt(Qt){nt.generateMipmap(Qt)}function Tt(Qt,Jt,pr,Vr,Wr=!1){if(dt===!1)return Jt;if(Qt!==null){if(nt[Qt]!==void 0)return nt[Qt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Qt+"'")}let zr=Jt;if(Jt===nt.RED&&(pr===nt.FLOAT&&(zr=nt.R32F),pr===nt.HALF_FLOAT&&(zr=nt.R16F),pr===nt.UNSIGNED_BYTE&&(zr=nt.R8)),Jt===nt.RED_INTEGER&&(pr===nt.UNSIGNED_BYTE&&(zr=nt.R8UI),pr===nt.UNSIGNED_SHORT&&(zr=nt.R16UI),pr===nt.UNSIGNED_INT&&(zr=nt.R32UI),pr===nt.BYTE&&(zr=nt.R8I),pr===nt.SHORT&&(zr=nt.R16I),pr===nt.INT&&(zr=nt.R32I)),Jt===nt.RG&&(pr===nt.FLOAT&&(zr=nt.RG32F),pr===nt.HALF_FLOAT&&(zr=nt.RG16F),pr===nt.UNSIGNED_BYTE&&(zr=nt.RG8)),Jt===nt.RGBA){const ln=Wr?LinearTransfer:ColorManagement.getTransfer(Vr);pr===nt.FLOAT&&(zr=nt.RGBA32F),pr===nt.HALF_FLOAT&&(zr=nt.RGBA16F),pr===nt.UNSIGNED_BYTE&&(zr=ln===SRGBTransfer?nt.SRGB8_ALPHA8:nt.RGBA8),pr===nt.UNSIGNED_SHORT_4_4_4_4&&(zr=nt.RGBA4),pr===nt.UNSIGNED_SHORT_5_5_5_1&&(zr=nt.RGB5_A1)}return(zr===nt.R16F||zr===nt.R32F||zr===nt.RG16F||zr===nt.RG32F||zr===nt.RGBA16F||zr===nt.RGBA32F)&&rt.get("EXT_color_buffer_float"),zr}function It(Qt,Jt,pr){return wt(Qt,pr)===!0||Qt.isFramebufferTexture&&Qt.minFilter!==NearestFilter&&Qt.minFilter!==LinearFilter?Math.log2(Math.max(Jt.width,Jt.height))+1:Qt.mipmaps!==void 0&&Qt.mipmaps.length>0?Qt.mipmaps.length:Qt.isCompressedTexture&&Array.isArray(Qt.image)?Jt.mipmaps.length:1}function At(Qt){return Qt===NearestFilter||Qt===NearestMipmapNearestFilter||Qt===NearestMipmapLinearFilter?nt.NEAREST:nt.LINEAR}function Dt(Qt){const Jt=Qt.target;Jt.removeEventListener("dispose",Dt),Ft(Jt),Jt.isVideoTexture&&ft.delete(Jt)}function jt(Qt){const Jt=Qt.target;Jt.removeEventListener("dispose",jt),Pt(Jt)}function Ft(Qt){const Jt=st.get(Qt);if(Jt.__webglInit===void 0)return;const pr=Qt.source,Vr=gt.get(pr);if(Vr){const Wr=Vr[Jt.__cacheKey];Wr.usedTimes--,Wr.usedTimes===0&&Lt(Qt),Object.keys(Vr).length===0&&gt.delete(pr)}st.remove(Qt)}function Lt(Qt){const Jt=st.get(Qt);nt.deleteTexture(Jt.__webglTexture);const pr=Qt.source,Vr=gt.get(pr);delete Vr[Jt.__cacheKey],ut.memory.textures--}function Pt(Qt){const Jt=Qt.texture,pr=st.get(Qt),Vr=st.get(Jt);if(Vr.__webglTexture!==void 0&&(nt.deleteTexture(Vr.__webglTexture),ut.memory.textures--),Qt.depthTexture&&Qt.depthTexture.dispose(),Qt.isWebGLCubeRenderTarget)for(let Wr=0;Wr<6;Wr++){if(Array.isArray(pr.__webglFramebuffer[Wr]))for(let zr=0;zr<pr.__webglFramebuffer[Wr].length;zr++)nt.deleteFramebuffer(pr.__webglFramebuffer[Wr][zr]);else nt.deleteFramebuffer(pr.__webglFramebuffer[Wr]);pr.__webglDepthbuffer&&nt.deleteRenderbuffer(pr.__webglDepthbuffer[Wr])}else{if(Array.isArray(pr.__webglFramebuffer))for(let Wr=0;Wr<pr.__webglFramebuffer.length;Wr++)nt.deleteFramebuffer(pr.__webglFramebuffer[Wr]);else nt.deleteFramebuffer(pr.__webglFramebuffer);if(pr.__webglDepthbuffer&&nt.deleteRenderbuffer(pr.__webglDepthbuffer),pr.__webglMultisampledFramebuffer&&nt.deleteFramebuffer(pr.__webglMultisampledFramebuffer),pr.__webglColorRenderbuffer)for(let Wr=0;Wr<pr.__webglColorRenderbuffer.length;Wr++)pr.__webglColorRenderbuffer[Wr]&&nt.deleteRenderbuffer(pr.__webglColorRenderbuffer[Wr]);pr.__webglDepthRenderbuffer&&nt.deleteRenderbuffer(pr.__webglDepthRenderbuffer)}if(Qt.isWebGLMultipleRenderTargets)for(let Wr=0,zr=Jt.length;Wr<zr;Wr++){const ln=st.get(Jt[Wr]);ln.__webglTexture&&(nt.deleteTexture(ln.__webglTexture),ut.memory.textures--),st.remove(Jt[Wr])}st.remove(Jt),st.remove(Qt)}let Ot=0;function Nt(){Ot=0}function $t(){const Qt=Ot;return Qt>=lt.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Qt+" texture units while this GPU supports only "+lt.maxTextures),Ot+=1,Qt}function Vt(Qt){const Jt=[];return Jt.push(Qt.wrapS),Jt.push(Qt.wrapT),Jt.push(Qt.wrapR||0),Jt.push(Qt.magFilter),Jt.push(Qt.minFilter),Jt.push(Qt.anisotropy),Jt.push(Qt.internalFormat),Jt.push(Qt.format),Jt.push(Qt.type),Jt.push(Qt.generateMipmaps),Jt.push(Qt.premultiplyAlpha),Jt.push(Qt.flipY),Jt.push(Qt.unpackAlignment),Jt.push(Qt.colorSpace),Jt.join()}function Ut(Qt,Jt){const pr=st.get(Qt);if(Qt.isVideoTexture&&hn(Qt),Qt.isRenderTargetTexture===!1&&Qt.version>0&&pr.__version!==Qt.version){const Vr=Qt.image;if(Vr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Vr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{dr(pr,Qt,Jt);return}}it.bindTexture(nt.TEXTURE_2D,pr.__webglTexture,nt.TEXTURE0+Jt)}function zt(Qt,Jt){const pr=st.get(Qt);if(Qt.version>0&&pr.__version!==Qt.version){dr(pr,Qt,Jt);return}it.bindTexture(nt.TEXTURE_2D_ARRAY,pr.__webglTexture,nt.TEXTURE0+Jt)}function Bt(Qt,Jt){const pr=st.get(Qt);if(Qt.version>0&&pr.__version!==Qt.version){dr(pr,Qt,Jt);return}it.bindTexture(nt.TEXTURE_3D,pr.__webglTexture,nt.TEXTURE0+Jt)}function Ht(Qt,Jt){const pr=st.get(Qt);if(Qt.version>0&&pr.__version!==Qt.version){fr(pr,Qt,Jt);return}it.bindTexture(nt.TEXTURE_CUBE_MAP,pr.__webglTexture,nt.TEXTURE0+Jt)}const Gt={[RepeatWrapping]:nt.REPEAT,[ClampToEdgeWrapping]:nt.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:nt.MIRRORED_REPEAT},Kt={[NearestFilter]:nt.NEAREST,[NearestMipmapNearestFilter]:nt.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:nt.NEAREST_MIPMAP_LINEAR,[LinearFilter]:nt.LINEAR,[LinearMipmapNearestFilter]:nt.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:nt.LINEAR_MIPMAP_LINEAR},Xt={[NeverCompare]:nt.NEVER,[AlwaysCompare]:nt.ALWAYS,[LessCompare]:nt.LESS,[LessEqualCompare]:nt.LEQUAL,[EqualCompare]:nt.EQUAL,[GreaterEqualCompare]:nt.GEQUAL,[GreaterCompare]:nt.GREATER,[NotEqualCompare]:nt.NOTEQUAL};function or(Qt,Jt,pr){if(Jt.type===FloatType&&rt.has("OES_texture_float_linear")===!1&&(Jt.magFilter===LinearFilter||Jt.magFilter===LinearMipmapNearestFilter||Jt.magFilter===NearestMipmapLinearFilter||Jt.magFilter===LinearMipmapLinearFilter||Jt.minFilter===LinearFilter||Jt.minFilter===LinearMipmapNearestFilter||Jt.minFilter===NearestMipmapLinearFilter||Jt.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),pr?(nt.texParameteri(Qt,nt.TEXTURE_WRAP_S,Gt[Jt.wrapS]),nt.texParameteri(Qt,nt.TEXTURE_WRAP_T,Gt[Jt.wrapT]),(Qt===nt.TEXTURE_3D||Qt===nt.TEXTURE_2D_ARRAY)&&nt.texParameteri(Qt,nt.TEXTURE_WRAP_R,Gt[Jt.wrapR]),nt.texParameteri(Qt,nt.TEXTURE_MAG_FILTER,Kt[Jt.magFilter]),nt.texParameteri(Qt,nt.TEXTURE_MIN_FILTER,Kt[Jt.minFilter])):(nt.texParameteri(Qt,nt.TEXTURE_WRAP_S,nt.CLAMP_TO_EDGE),nt.texParameteri(Qt,nt.TEXTURE_WRAP_T,nt.CLAMP_TO_EDGE),(Qt===nt.TEXTURE_3D||Qt===nt.TEXTURE_2D_ARRAY)&&nt.texParameteri(Qt,nt.TEXTURE_WRAP_R,nt.CLAMP_TO_EDGE),(Jt.wrapS!==ClampToEdgeWrapping||Jt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),nt.texParameteri(Qt,nt.TEXTURE_MAG_FILTER,At(Jt.magFilter)),nt.texParameteri(Qt,nt.TEXTURE_MIN_FILTER,At(Jt.minFilter)),Jt.minFilter!==NearestFilter&&Jt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Jt.compareFunction&&(nt.texParameteri(Qt,nt.TEXTURE_COMPARE_MODE,nt.COMPARE_REF_TO_TEXTURE),nt.texParameteri(Qt,nt.TEXTURE_COMPARE_FUNC,Xt[Jt.compareFunction])),rt.has("EXT_texture_filter_anisotropic")===!0){const Vr=rt.get("EXT_texture_filter_anisotropic");if(Jt.magFilter===NearestFilter||Jt.minFilter!==NearestMipmapLinearFilter&&Jt.minFilter!==LinearMipmapLinearFilter||Jt.type===FloatType&&rt.has("OES_texture_float_linear")===!1||dt===!1&&Jt.type===HalfFloatType&&rt.has("OES_texture_half_float_linear")===!1)return;(Jt.anisotropy>1||st.get(Jt).__currentAnisotropy)&&(nt.texParameterf(Qt,Vr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Jt.anisotropy,lt.getMaxAnisotropy())),st.get(Jt).__currentAnisotropy=Jt.anisotropy)}}function tr(Qt,Jt){let pr=!1;Qt.__webglInit===void 0&&(Qt.__webglInit=!0,Jt.addEventListener("dispose",Dt));const Vr=Jt.source;let Wr=gt.get(Vr);Wr===void 0&&(Wr={},gt.set(Vr,Wr));const zr=Vt(Jt);if(zr!==Qt.__cacheKey){Wr[zr]===void 0&&(Wr[zr]={texture:nt.createTexture(),usedTimes:0},ut.memory.textures++,pr=!0),Wr[zr].usedTimes++;const ln=Wr[Qt.__cacheKey];ln!==void 0&&(Wr[Qt.__cacheKey].usedTimes--,ln.usedTimes===0&&Lt(Jt)),Qt.__cacheKey=zr,Qt.__webglTexture=Wr[zr].texture}return pr}function dr(Qt,Jt,pr){let Vr=nt.TEXTURE_2D;(Jt.isDataArrayTexture||Jt.isCompressedArrayTexture)&&(Vr=nt.TEXTURE_2D_ARRAY),Jt.isData3DTexture&&(Vr=nt.TEXTURE_3D);const Wr=tr(Qt,Jt),zr=Jt.source;it.bindTexture(Vr,Qt.__webglTexture,nt.TEXTURE0+pr);const ln=st.get(zr);if(zr.version!==ln.__version||Wr===!0){it.activeTexture(nt.TEXTURE0+pr);const xn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),yn=Jt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Jt.colorSpace),Wn=Jt.colorSpace===NoColorSpace||xn===yn?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Jt.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Jt.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Jt.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wn);const Mn=Et(Jt)&&St(Jt.image)===!1;let sn=vt(Jt.image,Mn,!1,lt.maxTextureSize);sn=Zr(Jt,sn);const qn=St(sn)||dt,Gr=ct.convert(Jt.format,Jt.colorSpace);let qr=ct.convert(Jt.type),wn=Tt(Jt.internalFormat,Gr,qr,Jt.colorSpace,Jt.isVideoTexture);or(Vr,Jt,qn);let Cr;const nr=Jt.mipmaps,Ur=dt&&Jt.isVideoTexture!==!0&&wn!==RGB_ETC1_Format,Mr=ln.__version===void 0||Wr===!0,rn=zr.dataReady,Cn=It(Jt,sn,qn);if(Jt.isDepthTexture)wn=nt.DEPTH_COMPONENT,dt?Jt.type===FloatType?wn=nt.DEPTH_COMPONENT32F:Jt.type===UnsignedIntType?wn=nt.DEPTH_COMPONENT24:Jt.type===UnsignedInt248Type?wn=nt.DEPTH24_STENCIL8:wn=nt.DEPTH_COMPONENT16:Jt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Jt.format===DepthFormat&&wn===nt.DEPTH_COMPONENT&&Jt.type!==UnsignedShortType&&Jt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Jt.type=UnsignedIntType,qr=ct.convert(Jt.type)),Jt.format===DepthStencilFormat&&wn===nt.DEPTH_COMPONENT&&(wn=nt.DEPTH_STENCIL,Jt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Jt.type=UnsignedInt248Type,qr=ct.convert(Jt.type))),Mr&&(Ur?it.texStorage2D(nt.TEXTURE_2D,1,wn,sn.width,sn.height):it.texImage2D(nt.TEXTURE_2D,0,wn,sn.width,sn.height,0,Gr,qr,null));else if(Jt.isDataTexture)if(nr.length>0&&qn){Ur&&Mr&&it.texStorage2D(nt.TEXTURE_2D,Cn,wn,nr[0].width,nr[0].height);for(let Rr=0,pn=nr.length;Rr<pn;Rr++)Cr=nr[Rr],Ur?rn&&it.texSubImage2D(nt.TEXTURE_2D,Rr,0,0,Cr.width,Cr.height,Gr,qr,Cr.data):it.texImage2D(nt.TEXTURE_2D,Rr,wn,Cr.width,Cr.height,0,Gr,qr,Cr.data);Jt.generateMipmaps=!1}else Ur?(Mr&&it.texStorage2D(nt.TEXTURE_2D,Cn,wn,sn.width,sn.height),rn&&it.texSubImage2D(nt.TEXTURE_2D,0,0,0,sn.width,sn.height,Gr,qr,sn.data)):it.texImage2D(nt.TEXTURE_2D,0,wn,sn.width,sn.height,0,Gr,qr,sn.data);else if(Jt.isCompressedTexture)if(Jt.isCompressedArrayTexture){Ur&&Mr&&it.texStorage3D(nt.TEXTURE_2D_ARRAY,Cn,wn,nr[0].width,nr[0].height,sn.depth);for(let Rr=0,pn=nr.length;Rr<pn;Rr++)Cr=nr[Rr],Jt.format!==RGBAFormat?Gr!==null?Ur?rn&&it.compressedTexSubImage3D(nt.TEXTURE_2D_ARRAY,Rr,0,0,0,Cr.width,Cr.height,sn.depth,Gr,Cr.data,0,0):it.compressedTexImage3D(nt.TEXTURE_2D_ARRAY,Rr,wn,Cr.width,Cr.height,sn.depth,0,Cr.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ur?rn&&it.texSubImage3D(nt.TEXTURE_2D_ARRAY,Rr,0,0,0,Cr.width,Cr.height,sn.depth,Gr,qr,Cr.data):it.texImage3D(nt.TEXTURE_2D_ARRAY,Rr,wn,Cr.width,Cr.height,sn.depth,0,Gr,qr,Cr.data)}else{Ur&&Mr&&it.texStorage2D(nt.TEXTURE_2D,Cn,wn,nr[0].width,nr[0].height);for(let Rr=0,pn=nr.length;Rr<pn;Rr++)Cr=nr[Rr],Jt.format!==RGBAFormat?Gr!==null?Ur?rn&&it.compressedTexSubImage2D(nt.TEXTURE_2D,Rr,0,0,Cr.width,Cr.height,Gr,Cr.data):it.compressedTexImage2D(nt.TEXTURE_2D,Rr,wn,Cr.width,Cr.height,0,Cr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ur?rn&&it.texSubImage2D(nt.TEXTURE_2D,Rr,0,0,Cr.width,Cr.height,Gr,qr,Cr.data):it.texImage2D(nt.TEXTURE_2D,Rr,wn,Cr.width,Cr.height,0,Gr,qr,Cr.data)}else if(Jt.isDataArrayTexture)Ur?(Mr&&it.texStorage3D(nt.TEXTURE_2D_ARRAY,Cn,wn,sn.width,sn.height,sn.depth),rn&&it.texSubImage3D(nt.TEXTURE_2D_ARRAY,0,0,0,0,sn.width,sn.height,sn.depth,Gr,qr,sn.data)):it.texImage3D(nt.TEXTURE_2D_ARRAY,0,wn,sn.width,sn.height,sn.depth,0,Gr,qr,sn.data);else if(Jt.isData3DTexture)Ur?(Mr&&it.texStorage3D(nt.TEXTURE_3D,Cn,wn,sn.width,sn.height,sn.depth),rn&&it.texSubImage3D(nt.TEXTURE_3D,0,0,0,0,sn.width,sn.height,sn.depth,Gr,qr,sn.data)):it.texImage3D(nt.TEXTURE_3D,0,wn,sn.width,sn.height,sn.depth,0,Gr,qr,sn.data);else if(Jt.isFramebufferTexture){if(Mr)if(Ur)it.texStorage2D(nt.TEXTURE_2D,Cn,wn,sn.width,sn.height);else{let Rr=sn.width,pn=sn.height;for(let Tr=0;Tr<Cn;Tr++)it.texImage2D(nt.TEXTURE_2D,Tr,wn,Rr,pn,0,Gr,qr,null),Rr>>=1,pn>>=1}}else if(nr.length>0&&qn){Ur&&Mr&&it.texStorage2D(nt.TEXTURE_2D,Cn,wn,nr[0].width,nr[0].height);for(let Rr=0,pn=nr.length;Rr<pn;Rr++)Cr=nr[Rr],Ur?rn&&it.texSubImage2D(nt.TEXTURE_2D,Rr,0,0,Gr,qr,Cr):it.texImage2D(nt.TEXTURE_2D,Rr,wn,Gr,qr,Cr);Jt.generateMipmaps=!1}else Ur?(Mr&&it.texStorage2D(nt.TEXTURE_2D,Cn,wn,sn.width,sn.height),rn&&it.texSubImage2D(nt.TEXTURE_2D,0,0,0,Gr,qr,sn)):it.texImage2D(nt.TEXTURE_2D,0,wn,Gr,qr,sn);wt(Jt,qn)&&Rt(Vr),ln.__version=zr.version,Jt.onUpdate&&Jt.onUpdate(Jt)}Qt.__version=Jt.version}function fr(Qt,Jt,pr){if(Jt.image.length!==6)return;const Vr=tr(Qt,Jt),Wr=Jt.source;it.bindTexture(nt.TEXTURE_CUBE_MAP,Qt.__webglTexture,nt.TEXTURE0+pr);const zr=st.get(Wr);if(Wr.version!==zr.__version||Vr===!0){it.activeTexture(nt.TEXTURE0+pr);const ln=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),xn=Jt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Jt.colorSpace),yn=Jt.colorSpace===NoColorSpace||ln===xn?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Jt.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Jt.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Jt.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,yn);const Wn=Jt.isCompressedTexture||Jt.image[0].isCompressedTexture,Mn=Jt.image[0]&&Jt.image[0].isDataTexture,sn=[];for(let Rr=0;Rr<6;Rr++)!Wn&&!Mn?sn[Rr]=vt(Jt.image[Rr],!1,!0,lt.maxCubemapSize):sn[Rr]=Mn?Jt.image[Rr].image:Jt.image[Rr],sn[Rr]=Zr(Jt,sn[Rr]);const qn=sn[0],Gr=St(qn)||dt,qr=ct.convert(Jt.format,Jt.colorSpace),wn=ct.convert(Jt.type),Cr=Tt(Jt.internalFormat,qr,wn,Jt.colorSpace),nr=dt&&Jt.isVideoTexture!==!0,Ur=zr.__version===void 0||Vr===!0,Mr=Wr.dataReady;let rn=It(Jt,qn,Gr);or(nt.TEXTURE_CUBE_MAP,Jt,Gr);let Cn;if(Wn){nr&&Ur&&it.texStorage2D(nt.TEXTURE_CUBE_MAP,rn,Cr,qn.width,qn.height);for(let Rr=0;Rr<6;Rr++){Cn=sn[Rr].mipmaps;for(let pn=0;pn<Cn.length;pn++){const Tr=Cn[pn];Jt.format!==RGBAFormat?qr!==null?nr?Mr&&it.compressedTexSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn,0,0,Tr.width,Tr.height,qr,Tr.data):it.compressedTexImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn,Cr,Tr.width,Tr.height,0,Tr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nr?Mr&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn,0,0,Tr.width,Tr.height,qr,wn,Tr.data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn,Cr,Tr.width,Tr.height,0,qr,wn,Tr.data)}}}else{Cn=Jt.mipmaps,nr&&Ur&&(Cn.length>0&&rn++,it.texStorage2D(nt.TEXTURE_CUBE_MAP,rn,Cr,sn[0].width,sn[0].height));for(let Rr=0;Rr<6;Rr++)if(Mn){nr?Mr&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,0,0,sn[Rr].width,sn[Rr].height,qr,wn,sn[Rr].data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,Cr,sn[Rr].width,sn[Rr].height,0,qr,wn,sn[Rr].data);for(let pn=0;pn<Cn.length;pn++){const xr=Cn[pn].image[Rr].image;nr?Mr&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn+1,0,0,xr.width,xr.height,qr,wn,xr.data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn+1,Cr,xr.width,xr.height,0,qr,wn,xr.data)}}else{nr?Mr&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,0,0,qr,wn,sn[Rr]):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,Cr,qr,wn,sn[Rr]);for(let pn=0;pn<Cn.length;pn++){const Tr=Cn[pn];nr?Mr&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn+1,0,0,qr,wn,Tr.image[Rr]):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,pn+1,Cr,qr,wn,Tr.image[Rr])}}}wt(Jt,Gr)&&Rt(nt.TEXTURE_CUBE_MAP),zr.__version=Wr.version,Jt.onUpdate&&Jt.onUpdate(Jt)}Qt.__version=Jt.version}function Sr(Qt,Jt,pr,Vr,Wr,zr){const ln=ct.convert(pr.format,pr.colorSpace),xn=ct.convert(pr.type),yn=Tt(pr.internalFormat,ln,xn,pr.colorSpace);if(!st.get(Jt).__hasExternalTextures){const Mn=Math.max(1,Jt.width>>zr),sn=Math.max(1,Jt.height>>zr);Wr===nt.TEXTURE_3D||Wr===nt.TEXTURE_2D_ARRAY?it.texImage3D(Wr,zr,yn,Mn,sn,Jt.depth,0,ln,xn,null):it.texImage2D(Wr,zr,yn,Mn,sn,0,ln,xn,null)}it.bindFramebuffer(nt.FRAMEBUFFER,Qt),$r(Jt)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,Vr,Wr,st.get(pr).__webglTexture,0,Fr(Jt)):(Wr===nt.TEXTURE_2D||Wr>=nt.TEXTURE_CUBE_MAP_POSITIVE_X&&Wr<=nt.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&nt.framebufferTexture2D(nt.FRAMEBUFFER,Vr,Wr,st.get(pr).__webglTexture,zr),it.bindFramebuffer(nt.FRAMEBUFFER,null)}function vr(Qt,Jt,pr){if(nt.bindRenderbuffer(nt.RENDERBUFFER,Qt),Jt.depthBuffer&&!Jt.stencilBuffer){let Vr=dt===!0?nt.DEPTH_COMPONENT24:nt.DEPTH_COMPONENT16;if(pr||$r(Jt)){const Wr=Jt.depthTexture;Wr&&Wr.isDepthTexture&&(Wr.type===FloatType?Vr=nt.DEPTH_COMPONENT32F:Wr.type===UnsignedIntType&&(Vr=nt.DEPTH_COMPONENT24));const zr=Fr(Jt);$r(Jt)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,zr,Vr,Jt.width,Jt.height):nt.renderbufferStorageMultisample(nt.RENDERBUFFER,zr,Vr,Jt.width,Jt.height)}else nt.renderbufferStorage(nt.RENDERBUFFER,Vr,Jt.width,Jt.height);nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.RENDERBUFFER,Qt)}else if(Jt.depthBuffer&&Jt.stencilBuffer){const Vr=Fr(Jt);pr&&$r(Jt)===!1?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Vr,nt.DEPTH24_STENCIL8,Jt.width,Jt.height):$r(Jt)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,Vr,nt.DEPTH24_STENCIL8,Jt.width,Jt.height):nt.renderbufferStorage(nt.RENDERBUFFER,nt.DEPTH_STENCIL,Jt.width,Jt.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.RENDERBUFFER,Qt)}else{const Vr=Jt.isWebGLMultipleRenderTargets===!0?Jt.texture:[Jt.texture];for(let Wr=0;Wr<Vr.length;Wr++){const zr=Vr[Wr],ln=ct.convert(zr.format,zr.colorSpace),xn=ct.convert(zr.type),yn=Tt(zr.internalFormat,ln,xn,zr.colorSpace),Wn=Fr(Jt);pr&&$r(Jt)===!1?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Wn,yn,Jt.width,Jt.height):$r(Jt)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,Wn,yn,Jt.width,Jt.height):nt.renderbufferStorage(nt.RENDERBUFFER,yn,Jt.width,Jt.height)}}nt.bindRenderbuffer(nt.RENDERBUFFER,null)}function mr(Qt,Jt){if(Jt&&Jt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(it.bindFramebuffer(nt.FRAMEBUFFER,Qt),!(Jt.depthTexture&&Jt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!st.get(Jt.depthTexture).__webglTexture||Jt.depthTexture.image.width!==Jt.width||Jt.depthTexture.image.height!==Jt.height)&&(Jt.depthTexture.image.width=Jt.width,Jt.depthTexture.image.height=Jt.height,Jt.depthTexture.needsUpdate=!0),Ut(Jt.depthTexture,0);const Vr=st.get(Jt.depthTexture).__webglTexture,Wr=Fr(Jt);if(Jt.depthTexture.format===DepthFormat)$r(Jt)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Vr,0,Wr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Vr,0);else if(Jt.depthTexture.format===DepthStencilFormat)$r(Jt)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Vr,0,Wr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Vr,0);else throw new Error("Unknown depthTexture format")}function hr(Qt){const Jt=st.get(Qt),pr=Qt.isWebGLCubeRenderTarget===!0;if(Qt.depthTexture&&!Jt.__autoAllocateDepthBuffer){if(pr)throw new Error("target.depthTexture not supported in Cube render targets");mr(Jt.__webglFramebuffer,Qt)}else if(pr){Jt.__webglDepthbuffer=[];for(let Vr=0;Vr<6;Vr++)it.bindFramebuffer(nt.FRAMEBUFFER,Jt.__webglFramebuffer[Vr]),Jt.__webglDepthbuffer[Vr]=nt.createRenderbuffer(),vr(Jt.__webglDepthbuffer[Vr],Qt,!1)}else it.bindFramebuffer(nt.FRAMEBUFFER,Jt.__webglFramebuffer),Jt.__webglDepthbuffer=nt.createRenderbuffer(),vr(Jt.__webglDepthbuffer,Qt,!1);it.bindFramebuffer(nt.FRAMEBUFFER,null)}function gr(Qt,Jt,pr){const Vr=st.get(Qt);Jt!==void 0&&Sr(Vr.__webglFramebuffer,Qt,Qt.texture,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,0),pr!==void 0&&hr(Qt)}function lr(Qt){const Jt=Qt.texture,pr=st.get(Qt),Vr=st.get(Jt);Qt.addEventListener("dispose",jt),Qt.isWebGLMultipleRenderTargets!==!0&&(Vr.__webglTexture===void 0&&(Vr.__webglTexture=nt.createTexture()),Vr.__version=Jt.version,ut.memory.textures++);const Wr=Qt.isWebGLCubeRenderTarget===!0,zr=Qt.isWebGLMultipleRenderTargets===!0,ln=St(Qt)||dt;if(Wr){pr.__webglFramebuffer=[];for(let xn=0;xn<6;xn++)if(dt&&Jt.mipmaps&&Jt.mipmaps.length>0){pr.__webglFramebuffer[xn]=[];for(let yn=0;yn<Jt.mipmaps.length;yn++)pr.__webglFramebuffer[xn][yn]=nt.createFramebuffer()}else pr.__webglFramebuffer[xn]=nt.createFramebuffer()}else{if(dt&&Jt.mipmaps&&Jt.mipmaps.length>0){pr.__webglFramebuffer=[];for(let xn=0;xn<Jt.mipmaps.length;xn++)pr.__webglFramebuffer[xn]=nt.createFramebuffer()}else pr.__webglFramebuffer=nt.createFramebuffer();if(zr)if(lt.drawBuffers){const xn=Qt.texture;for(let yn=0,Wn=xn.length;yn<Wn;yn++){const Mn=st.get(xn[yn]);Mn.__webglTexture===void 0&&(Mn.__webglTexture=nt.createTexture(),ut.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(dt&&Qt.samples>0&&$r(Qt)===!1){const xn=zr?Jt:[Jt];pr.__webglMultisampledFramebuffer=nt.createFramebuffer(),pr.__webglColorRenderbuffer=[],it.bindFramebuffer(nt.FRAMEBUFFER,pr.__webglMultisampledFramebuffer);for(let yn=0;yn<xn.length;yn++){const Wn=xn[yn];pr.__webglColorRenderbuffer[yn]=nt.createRenderbuffer(),nt.bindRenderbuffer(nt.RENDERBUFFER,pr.__webglColorRenderbuffer[yn]);const Mn=ct.convert(Wn.format,Wn.colorSpace),sn=ct.convert(Wn.type),qn=Tt(Wn.internalFormat,Mn,sn,Wn.colorSpace,Qt.isXRRenderTarget===!0),Gr=Fr(Qt);nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Gr,qn,Qt.width,Qt.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+yn,nt.RENDERBUFFER,pr.__webglColorRenderbuffer[yn])}nt.bindRenderbuffer(nt.RENDERBUFFER,null),Qt.depthBuffer&&(pr.__webglDepthRenderbuffer=nt.createRenderbuffer(),vr(pr.__webglDepthRenderbuffer,Qt,!0)),it.bindFramebuffer(nt.FRAMEBUFFER,null)}}if(Wr){it.bindTexture(nt.TEXTURE_CUBE_MAP,Vr.__webglTexture),or(nt.TEXTURE_CUBE_MAP,Jt,ln);for(let xn=0;xn<6;xn++)if(dt&&Jt.mipmaps&&Jt.mipmaps.length>0)for(let yn=0;yn<Jt.mipmaps.length;yn++)Sr(pr.__webglFramebuffer[xn][yn],Qt,Jt,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+xn,yn);else Sr(pr.__webglFramebuffer[xn],Qt,Jt,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+xn,0);wt(Jt,ln)&&Rt(nt.TEXTURE_CUBE_MAP),it.unbindTexture()}else if(zr){const xn=Qt.texture;for(let yn=0,Wn=xn.length;yn<Wn;yn++){const Mn=xn[yn],sn=st.get(Mn);it.bindTexture(nt.TEXTURE_2D,sn.__webglTexture),or(nt.TEXTURE_2D,Mn,ln),Sr(pr.__webglFramebuffer,Qt,Mn,nt.COLOR_ATTACHMENT0+yn,nt.TEXTURE_2D,0),wt(Mn,ln)&&Rt(nt.TEXTURE_2D)}it.unbindTexture()}else{let xn=nt.TEXTURE_2D;if((Qt.isWebGL3DRenderTarget||Qt.isWebGLArrayRenderTarget)&&(dt?xn=Qt.isWebGL3DRenderTarget?nt.TEXTURE_3D:nt.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),it.bindTexture(xn,Vr.__webglTexture),or(xn,Jt,ln),dt&&Jt.mipmaps&&Jt.mipmaps.length>0)for(let yn=0;yn<Jt.mipmaps.length;yn++)Sr(pr.__webglFramebuffer[yn],Qt,Jt,nt.COLOR_ATTACHMENT0,xn,yn);else Sr(pr.__webglFramebuffer,Qt,Jt,nt.COLOR_ATTACHMENT0,xn,0);wt(Jt,ln)&&Rt(xn),it.unbindTexture()}Qt.depthBuffer&&hr(Qt)}function Ir(Qt){const Jt=St(Qt)||dt,pr=Qt.isWebGLMultipleRenderTargets===!0?Qt.texture:[Qt.texture];for(let Vr=0,Wr=pr.length;Vr<Wr;Vr++){const zr=pr[Vr];if(wt(zr,Jt)){const ln=Qt.isWebGLCubeRenderTarget?nt.TEXTURE_CUBE_MAP:nt.TEXTURE_2D,xn=st.get(zr).__webglTexture;it.bindTexture(ln,xn),Rt(ln),it.unbindTexture()}}}function wr(Qt){if(dt&&Qt.samples>0&&$r(Qt)===!1){const Jt=Qt.isWebGLMultipleRenderTargets?Qt.texture:[Qt.texture],pr=Qt.width,Vr=Qt.height;let Wr=nt.COLOR_BUFFER_BIT;const zr=[],ln=Qt.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,xn=st.get(Qt),yn=Qt.isWebGLMultipleRenderTargets===!0;if(yn)for(let Wn=0;Wn<Jt.length;Wn++)it.bindFramebuffer(nt.FRAMEBUFFER,xn.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Wn,nt.RENDERBUFFER,null),it.bindFramebuffer(nt.FRAMEBUFFER,xn.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Wn,nt.TEXTURE_2D,null,0);it.bindFramebuffer(nt.READ_FRAMEBUFFER,xn.__webglMultisampledFramebuffer),it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,xn.__webglFramebuffer);for(let Wn=0;Wn<Jt.length;Wn++){zr.push(nt.COLOR_ATTACHMENT0+Wn),Qt.depthBuffer&&zr.push(ln);const Mn=xn.__ignoreDepthValues!==void 0?xn.__ignoreDepthValues:!1;if(Mn===!1&&(Qt.depthBuffer&&(Wr|=nt.DEPTH_BUFFER_BIT),Qt.stencilBuffer&&(Wr|=nt.STENCIL_BUFFER_BIT)),yn&&nt.framebufferRenderbuffer(nt.READ_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.RENDERBUFFER,xn.__webglColorRenderbuffer[Wn]),Mn===!0&&(nt.invalidateFramebuffer(nt.READ_FRAMEBUFFER,[ln]),nt.invalidateFramebuffer(nt.DRAW_FRAMEBUFFER,[ln])),yn){const sn=st.get(Jt[Wn]).__webglTexture;nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,sn,0)}nt.blitFramebuffer(0,0,pr,Vr,0,0,pr,Vr,Wr,nt.NEAREST),pt&&nt.invalidateFramebuffer(nt.READ_FRAMEBUFFER,zr)}if(it.bindFramebuffer(nt.READ_FRAMEBUFFER,null),it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),yn)for(let Wn=0;Wn<Jt.length;Wn++){it.bindFramebuffer(nt.FRAMEBUFFER,xn.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Wn,nt.RENDERBUFFER,xn.__webglColorRenderbuffer[Wn]);const Mn=st.get(Jt[Wn]).__webglTexture;it.bindFramebuffer(nt.FRAMEBUFFER,xn.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Wn,nt.TEXTURE_2D,Mn,0)}it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,xn.__webglMultisampledFramebuffer)}}function Fr(Qt){return Math.min(lt.maxSamples,Qt.samples)}function $r(Qt){const Jt=st.get(Qt);return dt&&Qt.samples>0&&rt.has("WEBGL_multisampled_render_to_texture")===!0&&Jt.__useRenderToTexture!==!1}function hn(Qt){const Jt=ut.render.frame;ft.get(Qt)!==Jt&&(ft.set(Qt,Jt),Qt.update())}function Zr(Qt,Jt){const pr=Qt.colorSpace,Vr=Qt.format,Wr=Qt.type;return Qt.isCompressedTexture===!0||Qt.isVideoTexture===!0||Qt.format===_SRGBAFormat||pr!==LinearSRGBColorSpace&&pr!==NoColorSpace&&(ColorManagement.getTransfer(pr)===SRGBTransfer?dt===!1?rt.has("EXT_sRGB")===!0&&Vr===RGBAFormat?(Qt.format=_SRGBAFormat,Qt.minFilter=LinearFilter,Qt.generateMipmaps=!1):Jt=ImageUtils.sRGBToLinear(Jt):(Vr!==RGBAFormat||Wr!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pr)),Jt}this.allocateTextureUnit=$t,this.resetTextureUnits=Nt,this.setTexture2D=Ut,this.setTexture2DArray=zt,this.setTexture3D=Bt,this.setTextureCube=Ht,this.rebindTextures=gr,this.setupRenderTarget=lr,this.updateRenderTargetMipmap=Ir,this.updateMultisampleRenderTarget=wr,this.setupDepthRenderbuffer=hr,this.setupFrameBufferTexture=Sr,this.useMultisampledRTT=$r}function WebGLUtils(nt,rt,it){const st=it.isWebGL2;function lt(ct,ut=NoColorSpace){let dt;const ht=ColorManagement.getTransfer(ut);if(ct===UnsignedByteType)return nt.UNSIGNED_BYTE;if(ct===UnsignedShort4444Type)return nt.UNSIGNED_SHORT_4_4_4_4;if(ct===UnsignedShort5551Type)return nt.UNSIGNED_SHORT_5_5_5_1;if(ct===ByteType)return nt.BYTE;if(ct===ShortType)return nt.SHORT;if(ct===UnsignedShortType)return nt.UNSIGNED_SHORT;if(ct===IntType)return nt.INT;if(ct===UnsignedIntType)return nt.UNSIGNED_INT;if(ct===FloatType)return nt.FLOAT;if(ct===HalfFloatType)return st?nt.HALF_FLOAT:(dt=rt.get("OES_texture_half_float"),dt!==null?dt.HALF_FLOAT_OES:null);if(ct===AlphaFormat)return nt.ALPHA;if(ct===RGBAFormat)return nt.RGBA;if(ct===LuminanceFormat)return nt.LUMINANCE;if(ct===LuminanceAlphaFormat)return nt.LUMINANCE_ALPHA;if(ct===DepthFormat)return nt.DEPTH_COMPONENT;if(ct===DepthStencilFormat)return nt.DEPTH_STENCIL;if(ct===_SRGBAFormat)return dt=rt.get("EXT_sRGB"),dt!==null?dt.SRGB_ALPHA_EXT:null;if(ct===RedFormat)return nt.RED;if(ct===RedIntegerFormat)return nt.RED_INTEGER;if(ct===RGFormat)return nt.RG;if(ct===RGIntegerFormat)return nt.RG_INTEGER;if(ct===RGBAIntegerFormat)return nt.RGBA_INTEGER;if(ct===RGB_S3TC_DXT1_Format||ct===RGBA_S3TC_DXT1_Format||ct===RGBA_S3TC_DXT3_Format||ct===RGBA_S3TC_DXT5_Format)if(ht===SRGBTransfer)if(dt=rt.get("WEBGL_compressed_texture_s3tc_srgb"),dt!==null){if(ct===RGB_S3TC_DXT1_Format)return dt.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT1_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT3_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ct===RGBA_S3TC_DXT5_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(dt=rt.get("WEBGL_compressed_texture_s3tc"),dt!==null){if(ct===RGB_S3TC_DXT1_Format)return dt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT1_Format)return dt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT3_Format)return dt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ct===RGBA_S3TC_DXT5_Format)return dt.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(ct===RGB_PVRTC_4BPPV1_Format||ct===RGB_PVRTC_2BPPV1_Format||ct===RGBA_PVRTC_4BPPV1_Format||ct===RGBA_PVRTC_2BPPV1_Format)if(dt=rt.get("WEBGL_compressed_texture_pvrtc"),dt!==null){if(ct===RGB_PVRTC_4BPPV1_Format)return dt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ct===RGB_PVRTC_2BPPV1_Format)return dt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ct===RGBA_PVRTC_4BPPV1_Format)return dt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ct===RGBA_PVRTC_2BPPV1_Format)return dt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(ct===RGB_ETC1_Format)return dt=rt.get("WEBGL_compressed_texture_etc1"),dt!==null?dt.COMPRESSED_RGB_ETC1_WEBGL:null;if(ct===RGB_ETC2_Format||ct===RGBA_ETC2_EAC_Format)if(dt=rt.get("WEBGL_compressed_texture_etc"),dt!==null){if(ct===RGB_ETC2_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ETC2:dt.COMPRESSED_RGB8_ETC2;if(ct===RGBA_ETC2_EAC_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:dt.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(ct===RGBA_ASTC_4x4_Format||ct===RGBA_ASTC_5x4_Format||ct===RGBA_ASTC_5x5_Format||ct===RGBA_ASTC_6x5_Format||ct===RGBA_ASTC_6x6_Format||ct===RGBA_ASTC_8x5_Format||ct===RGBA_ASTC_8x6_Format||ct===RGBA_ASTC_8x8_Format||ct===RGBA_ASTC_10x5_Format||ct===RGBA_ASTC_10x6_Format||ct===RGBA_ASTC_10x8_Format||ct===RGBA_ASTC_10x10_Format||ct===RGBA_ASTC_12x10_Format||ct===RGBA_ASTC_12x12_Format)if(dt=rt.get("WEBGL_compressed_texture_astc"),dt!==null){if(ct===RGBA_ASTC_4x4_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:dt.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ct===RGBA_ASTC_5x4_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:dt.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ct===RGBA_ASTC_5x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:dt.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ct===RGBA_ASTC_6x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:dt.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ct===RGBA_ASTC_6x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:dt.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ct===RGBA_ASTC_8x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:dt.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ct===RGBA_ASTC_8x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:dt.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ct===RGBA_ASTC_8x8_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:dt.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ct===RGBA_ASTC_10x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:dt.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ct===RGBA_ASTC_10x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:dt.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ct===RGBA_ASTC_10x8_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:dt.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ct===RGBA_ASTC_10x10_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:dt.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ct===RGBA_ASTC_12x10_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:dt.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ct===RGBA_ASTC_12x12_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:dt.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(ct===RGBA_BPTC_Format||ct===RGB_BPTC_SIGNED_Format||ct===RGB_BPTC_UNSIGNED_Format)if(dt=rt.get("EXT_texture_compression_bptc"),dt!==null){if(ct===RGBA_BPTC_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:dt.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ct===RGB_BPTC_SIGNED_Format)return dt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ct===RGB_BPTC_UNSIGNED_Format)return dt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(ct===RED_RGTC1_Format||ct===SIGNED_RED_RGTC1_Format||ct===RED_GREEN_RGTC2_Format||ct===SIGNED_RED_GREEN_RGTC2_Format)if(dt=rt.get("EXT_texture_compression_rgtc"),dt!==null){if(ct===RGBA_BPTC_Format)return dt.COMPRESSED_RED_RGTC1_EXT;if(ct===SIGNED_RED_RGTC1_Format)return dt.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ct===RED_GREEN_RGTC2_Format)return dt.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ct===SIGNED_RED_GREEN_RGTC2_Format)return dt.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return ct===UnsignedInt248Type?st?nt.UNSIGNED_INT_24_8:(dt=rt.get("WEBGL_depth_texture"),dt!==null?dt.UNSIGNED_INT_24_8_WEBGL:null):nt[ct]!==void 0?nt[ct]:null}return{convert:lt}}class ArrayCamera extends PerspectiveCamera{constructor(rt=[]){super(),this.isArrayCamera=!0,this.cameras=rt}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(rt){return this._targetRay!==null&&this._targetRay.dispatchEvent(rt),this._grip!==null&&this._grip.dispatchEvent(rt),this._hand!==null&&this._hand.dispatchEvent(rt),this}connect(rt){if(rt&&rt.hand){const it=this._hand;if(it)for(const st of rt.hand.values())this._getHandJoint(it,st)}return this.dispatchEvent({type:"connected",data:rt}),this}disconnect(rt){return this.dispatchEvent({type:"disconnected",data:rt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(rt,it,st){let lt=null,ct=null,ut=null;const dt=this._targetRay,ht=this._grip,pt=this._hand;if(rt&&it.session.visibilityState!=="visible-blurred"){if(pt&&rt.hand){ut=!0;for(const vt of rt.hand.values()){const St=it.getJointPose(vt,st),Et=this._getHandJoint(pt,vt);St!==null&&(Et.matrix.fromArray(St.transform.matrix),Et.matrix.decompose(Et.position,Et.rotation,Et.scale),Et.matrixWorldNeedsUpdate=!0,Et.jointRadius=St.radius),Et.visible=St!==null}const ft=pt.joints["index-finger-tip"],mt=pt.joints["thumb-tip"],gt=ft.position.distanceTo(mt.position),xt=.02,yt=.005;pt.inputState.pinching&&gt>xt+yt?(pt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:rt.handedness,target:this})):!pt.inputState.pinching&&gt<=xt-yt&&(pt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:rt.handedness,target:this}))}else ht!==null&&rt.gripSpace&&(ct=it.getPose(rt.gripSpace,st),ct!==null&&(ht.matrix.fromArray(ct.transform.matrix),ht.matrix.decompose(ht.position,ht.rotation,ht.scale),ht.matrixWorldNeedsUpdate=!0,ct.linearVelocity?(ht.hasLinearVelocity=!0,ht.linearVelocity.copy(ct.linearVelocity)):ht.hasLinearVelocity=!1,ct.angularVelocity?(ht.hasAngularVelocity=!0,ht.angularVelocity.copy(ct.angularVelocity)):ht.hasAngularVelocity=!1));dt!==null&&(lt=it.getPose(rt.targetRaySpace,st),lt===null&&ct!==null&&(lt=ct),lt!==null&&(dt.matrix.fromArray(lt.transform.matrix),dt.matrix.decompose(dt.position,dt.rotation,dt.scale),dt.matrixWorldNeedsUpdate=!0,lt.linearVelocity?(dt.hasLinearVelocity=!0,dt.linearVelocity.copy(lt.linearVelocity)):dt.hasLinearVelocity=!1,lt.angularVelocity?(dt.hasAngularVelocity=!0,dt.angularVelocity.copy(lt.angularVelocity)):dt.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return dt!==null&&(dt.visible=lt!==null),ht!==null&&(ht.visible=ct!==null),pt!==null&&(pt.visible=ut!==null),this}_getHandJoint(rt,it){if(rt.joints[it.jointName]===void 0){const st=new Group;st.matrixAutoUpdate=!1,st.visible=!1,rt.joints[it.jointName]=st,rt.add(st)}return rt.joints[it.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(rt,it,st){if(this.texture===null){const lt=new Texture,ct=rt.properties.get(lt);ct.__webglTexture=it.texture,(it.depthNear!=st.depthNear||it.depthFar!=st.depthFar)&&(this.depthNear=it.depthNear,this.depthFar=it.depthFar),this.texture=lt}}render(rt,it){if(this.texture!==null){if(this.mesh===null){const st=it.cameras[0].viewport,lt=new ShaderMaterial({extensions:{fragDepth:!0},vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:st.z},depthHeight:{value:st.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),lt)}rt.render(this.mesh,it)}}reset(){this.texture=null,this.mesh=null}}class WebXRManager extends EventDispatcher{constructor(rt,it){super();const st=this;let lt=null,ct=1,ut=null,dt="local-floor",ht=1,pt=null,ft=null,mt=null,gt=null,xt=null,yt=null;const vt=new WebXRDepthSensing,St=it.getContextAttributes();let Et=null,wt=null;const Rt=[],Tt=[],It=new Vector2;let At=null;const Dt=new PerspectiveCamera;Dt.layers.enable(1),Dt.viewport=new Vector4;const jt=new PerspectiveCamera;jt.layers.enable(2),jt.viewport=new Vector4;const Ft=[Dt,jt],Lt=new ArrayCamera;Lt.layers.enable(1),Lt.layers.enable(2);let Pt=null,Ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(tr){let dr=Rt[tr];return dr===void 0&&(dr=new WebXRController,Rt[tr]=dr),dr.getTargetRaySpace()},this.getControllerGrip=function(tr){let dr=Rt[tr];return dr===void 0&&(dr=new WebXRController,Rt[tr]=dr),dr.getGripSpace()},this.getHand=function(tr){let dr=Rt[tr];return dr===void 0&&(dr=new WebXRController,Rt[tr]=dr),dr.getHandSpace()};function Nt(tr){const dr=Tt.indexOf(tr.inputSource);if(dr===-1)return;const fr=Rt[dr];fr!==void 0&&(fr.update(tr.inputSource,tr.frame,pt||ut),fr.dispatchEvent({type:tr.type,data:tr.inputSource}))}function $t(){lt.removeEventListener("select",Nt),lt.removeEventListener("selectstart",Nt),lt.removeEventListener("selectend",Nt),lt.removeEventListener("squeeze",Nt),lt.removeEventListener("squeezestart",Nt),lt.removeEventListener("squeezeend",Nt),lt.removeEventListener("end",$t),lt.removeEventListener("inputsourceschange",Vt);for(let tr=0;tr<Rt.length;tr++){const dr=Tt[tr];dr!==null&&(Tt[tr]=null,Rt[tr].disconnect(dr))}Pt=null,Ot=null,vt.reset(),rt.setRenderTarget(Et),xt=null,gt=null,mt=null,lt=null,wt=null,or.stop(),st.isPresenting=!1,rt.setPixelRatio(At),rt.setSize(It.width,It.height,!1),st.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(tr){ct=tr,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(tr){dt=tr,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return pt||ut},this.setReferenceSpace=function(tr){pt=tr},this.getBaseLayer=function(){return gt!==null?gt:xt},this.getBinding=function(){return mt},this.getFrame=function(){return yt},this.getSession=function(){return lt},this.setSession=async function(tr){if(lt=tr,lt!==null){if(Et=rt.getRenderTarget(),lt.addEventListener("select",Nt),lt.addEventListener("selectstart",Nt),lt.addEventListener("selectend",Nt),lt.addEventListener("squeeze",Nt),lt.addEventListener("squeezestart",Nt),lt.addEventListener("squeezeend",Nt),lt.addEventListener("end",$t),lt.addEventListener("inputsourceschange",Vt),St.xrCompatible!==!0&&await it.makeXRCompatible(),At=rt.getPixelRatio(),rt.getSize(It),lt.renderState.layers===void 0||rt.capabilities.isWebGL2===!1){const dr={antialias:lt.renderState.layers===void 0?St.antialias:!0,alpha:!0,depth:St.depth,stencil:St.stencil,framebufferScaleFactor:ct};xt=new XRWebGLLayer(lt,it,dr),lt.updateRenderState({baseLayer:xt}),rt.setPixelRatio(1),rt.setSize(xt.framebufferWidth,xt.framebufferHeight,!1),wt=new WebGLRenderTarget(xt.framebufferWidth,xt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:rt.outputColorSpace,stencilBuffer:St.stencil})}else{let dr=null,fr=null,Sr=null;St.depth&&(Sr=St.stencil?it.DEPTH24_STENCIL8:it.DEPTH_COMPONENT24,dr=St.stencil?DepthStencilFormat:DepthFormat,fr=St.stencil?UnsignedInt248Type:UnsignedIntType);const vr={colorFormat:it.RGBA8,depthFormat:Sr,scaleFactor:ct};mt=new XRWebGLBinding(lt,it),gt=mt.createProjectionLayer(vr),lt.updateRenderState({layers:[gt]}),rt.setPixelRatio(1),rt.setSize(gt.textureWidth,gt.textureHeight,!1),wt=new WebGLRenderTarget(gt.textureWidth,gt.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(gt.textureWidth,gt.textureHeight,fr,void 0,void 0,void 0,void 0,void 0,void 0,dr),stencilBuffer:St.stencil,colorSpace:rt.outputColorSpace,samples:St.antialias?4:0});const mr=rt.properties.get(wt);mr.__ignoreDepthValues=gt.ignoreDepthValues}wt.isXRRenderTarget=!0,this.setFoveation(ht),pt=null,ut=await lt.requestReferenceSpace(dt),or.setContext(lt),or.start(),st.isPresenting=!0,st.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(lt!==null)return lt.environmentBlendMode};function Vt(tr){for(let dr=0;dr<tr.removed.length;dr++){const fr=tr.removed[dr],Sr=Tt.indexOf(fr);Sr>=0&&(Tt[Sr]=null,Rt[Sr].disconnect(fr))}for(let dr=0;dr<tr.added.length;dr++){const fr=tr.added[dr];let Sr=Tt.indexOf(fr);if(Sr===-1){for(let mr=0;mr<Rt.length;mr++)if(mr>=Tt.length){Tt.push(fr),Sr=mr;break}else if(Tt[mr]===null){Tt[mr]=fr,Sr=mr;break}if(Sr===-1)break}const vr=Rt[Sr];vr&&vr.connect(fr)}}const Ut=new Vector3,zt=new Vector3;function Bt(tr,dr,fr){Ut.setFromMatrixPosition(dr.matrixWorld),zt.setFromMatrixPosition(fr.matrixWorld);const Sr=Ut.distanceTo(zt),vr=dr.projectionMatrix.elements,mr=fr.projectionMatrix.elements,hr=vr[14]/(vr[10]-1),gr=vr[14]/(vr[10]+1),lr=(vr[9]+1)/vr[5],Ir=(vr[9]-1)/vr[5],wr=(vr[8]-1)/vr[0],Fr=(mr[8]+1)/mr[0],$r=hr*wr,hn=hr*Fr,Zr=Sr/(-wr+Fr),Qt=Zr*-wr;dr.matrixWorld.decompose(tr.position,tr.quaternion,tr.scale),tr.translateX(Qt),tr.translateZ(Zr),tr.matrixWorld.compose(tr.position,tr.quaternion,tr.scale),tr.matrixWorldInverse.copy(tr.matrixWorld).invert();const Jt=hr+Zr,pr=gr+Zr,Vr=$r-Qt,Wr=hn+(Sr-Qt),zr=lr*gr/pr*Jt,ln=Ir*gr/pr*Jt;tr.projectionMatrix.makePerspective(Vr,Wr,zr,ln,Jt,pr),tr.projectionMatrixInverse.copy(tr.projectionMatrix).invert()}function Ht(tr,dr){dr===null?tr.matrixWorld.copy(tr.matrix):tr.matrixWorld.multiplyMatrices(dr.matrixWorld,tr.matrix),tr.matrixWorldInverse.copy(tr.matrixWorld).invert()}this.updateCamera=function(tr){if(lt===null)return;vt.texture!==null&&(tr.near=vt.depthNear,tr.far=vt.depthFar),Lt.near=jt.near=Dt.near=tr.near,Lt.far=jt.far=Dt.far=tr.far,(Pt!==Lt.near||Ot!==Lt.far)&&(lt.updateRenderState({depthNear:Lt.near,depthFar:Lt.far}),Pt=Lt.near,Ot=Lt.far,Dt.near=Pt,Dt.far=Ot,jt.near=Pt,jt.far=Ot,Dt.updateProjectionMatrix(),jt.updateProjectionMatrix(),tr.updateProjectionMatrix());const dr=tr.parent,fr=Lt.cameras;Ht(Lt,dr);for(let Sr=0;Sr<fr.length;Sr++)Ht(fr[Sr],dr);fr.length===2?Bt(Lt,Dt,jt):Lt.projectionMatrix.copy(Dt.projectionMatrix),Gt(tr,Lt,dr)};function Gt(tr,dr,fr){fr===null?tr.matrix.copy(dr.matrixWorld):(tr.matrix.copy(fr.matrixWorld),tr.matrix.invert(),tr.matrix.multiply(dr.matrixWorld)),tr.matrix.decompose(tr.position,tr.quaternion,tr.scale),tr.updateMatrixWorld(!0),tr.projectionMatrix.copy(dr.projectionMatrix),tr.projectionMatrixInverse.copy(dr.projectionMatrixInverse),tr.isPerspectiveCamera&&(tr.fov=RAD2DEG*2*Math.atan(1/tr.projectionMatrix.elements[5]),tr.zoom=1)}this.getCamera=function(){return Lt},this.getFoveation=function(){if(!(gt===null&&xt===null))return ht},this.setFoveation=function(tr){ht=tr,gt!==null&&(gt.fixedFoveation=tr),xt!==null&&xt.fixedFoveation!==void 0&&(xt.fixedFoveation=tr)},this.hasDepthSensing=function(){return vt.texture!==null};let Kt=null;function Xt(tr,dr){if(ft=dr.getViewerPose(pt||ut),yt=dr,ft!==null){const fr=ft.views;xt!==null&&(rt.setRenderTargetFramebuffer(wt,xt.framebuffer),rt.setRenderTarget(wt));let Sr=!1;fr.length!==Lt.cameras.length&&(Lt.cameras.length=0,Sr=!0);for(let mr=0;mr<fr.length;mr++){const hr=fr[mr];let gr=null;if(xt!==null)gr=xt.getViewport(hr);else{const Ir=mt.getViewSubImage(gt,hr);gr=Ir.viewport,mr===0&&(rt.setRenderTargetTextures(wt,Ir.colorTexture,gt.ignoreDepthValues?void 0:Ir.depthStencilTexture),rt.setRenderTarget(wt))}let lr=Ft[mr];lr===void 0&&(lr=new PerspectiveCamera,lr.layers.enable(mr),lr.viewport=new Vector4,Ft[mr]=lr),lr.matrix.fromArray(hr.transform.matrix),lr.matrix.decompose(lr.position,lr.quaternion,lr.scale),lr.projectionMatrix.fromArray(hr.projectionMatrix),lr.projectionMatrixInverse.copy(lr.projectionMatrix).invert(),lr.viewport.set(gr.x,gr.y,gr.width,gr.height),mr===0&&(Lt.matrix.copy(lr.matrix),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale)),Sr===!0&&Lt.cameras.push(lr)}const vr=lt.enabledFeatures;if(vr&&vr.includes("depth-sensing")){const mr=mt.getDepthInformation(fr[0]);mr&&mr.isValid&&mr.texture&&vt.init(rt,mr,lt.renderState)}}for(let fr=0;fr<Rt.length;fr++){const Sr=Tt[fr],vr=Rt[fr];Sr!==null&&vr!==void 0&&vr.update(Sr,dr,pt||ut)}vt.render(rt,Lt),Kt&&Kt(tr,dr),dr.detectedPlanes&&st.dispatchEvent({type:"planesdetected",data:dr}),yt=null}const or=new WebGLAnimation;or.setAnimationLoop(Xt),this.setAnimationLoop=function(tr){Kt=tr},this.dispose=function(){}}}function WebGLMaterials(nt,rt){function it(St,Et){St.matrixAutoUpdate===!0&&St.updateMatrix(),Et.value.copy(St.matrix)}function st(St,Et){Et.color.getRGB(St.fogColor.value,getUnlitUniformColorSpace(nt)),Et.isFog?(St.fogNear.value=Et.near,St.fogFar.value=Et.far):Et.isFogExp2&&(St.fogDensity.value=Et.density)}function lt(St,Et,wt,Rt,Tt){Et.isMeshBasicMaterial||Et.isMeshLambertMaterial?ct(St,Et):Et.isMeshToonMaterial?(ct(St,Et),mt(St,Et)):Et.isMeshPhongMaterial?(ct(St,Et),ft(St,Et)):Et.isMeshStandardMaterial?(ct(St,Et),gt(St,Et),Et.isMeshPhysicalMaterial&&xt(St,Et,Tt)):Et.isMeshMatcapMaterial?(ct(St,Et),yt(St,Et)):Et.isMeshDepthMaterial?ct(St,Et):Et.isMeshDistanceMaterial?(ct(St,Et),vt(St,Et)):Et.isMeshNormalMaterial?ct(St,Et):Et.isLineBasicMaterial?(ut(St,Et),Et.isLineDashedMaterial&&dt(St,Et)):Et.isPointsMaterial?ht(St,Et,wt,Rt):Et.isSpriteMaterial?pt(St,Et):Et.isShadowMaterial?(St.color.value.copy(Et.color),St.opacity.value=Et.opacity):Et.isShaderMaterial&&(Et.uniformsNeedUpdate=!1)}function ct(St,Et){St.opacity.value=Et.opacity,Et.color&&St.diffuse.value.copy(Et.color),Et.emissive&&St.emissive.value.copy(Et.emissive).multiplyScalar(Et.emissiveIntensity),Et.map&&(St.map.value=Et.map,it(Et.map,St.mapTransform)),Et.alphaMap&&(St.alphaMap.value=Et.alphaMap,it(Et.alphaMap,St.alphaMapTransform)),Et.bumpMap&&(St.bumpMap.value=Et.bumpMap,it(Et.bumpMap,St.bumpMapTransform),St.bumpScale.value=Et.bumpScale,Et.side===BackSide&&(St.bumpScale.value*=-1)),Et.normalMap&&(St.normalMap.value=Et.normalMap,it(Et.normalMap,St.normalMapTransform),St.normalScale.value.copy(Et.normalScale),Et.side===BackSide&&St.normalScale.value.negate()),Et.displacementMap&&(St.displacementMap.value=Et.displacementMap,it(Et.displacementMap,St.displacementMapTransform),St.displacementScale.value=Et.displacementScale,St.displacementBias.value=Et.displacementBias),Et.emissiveMap&&(St.emissiveMap.value=Et.emissiveMap,it(Et.emissiveMap,St.emissiveMapTransform)),Et.specularMap&&(St.specularMap.value=Et.specularMap,it(Et.specularMap,St.specularMapTransform)),Et.alphaTest>0&&(St.alphaTest.value=Et.alphaTest);const wt=rt.get(Et).envMap;if(wt&&(St.envMap.value=wt,St.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1,St.reflectivity.value=Et.reflectivity,St.ior.value=Et.ior,St.refractionRatio.value=Et.refractionRatio),Et.lightMap){St.lightMap.value=Et.lightMap;const Rt=nt._useLegacyLights===!0?Math.PI:1;St.lightMapIntensity.value=Et.lightMapIntensity*Rt,it(Et.lightMap,St.lightMapTransform)}Et.aoMap&&(St.aoMap.value=Et.aoMap,St.aoMapIntensity.value=Et.aoMapIntensity,it(Et.aoMap,St.aoMapTransform))}function ut(St,Et){St.diffuse.value.copy(Et.color),St.opacity.value=Et.opacity,Et.map&&(St.map.value=Et.map,it(Et.map,St.mapTransform))}function dt(St,Et){St.dashSize.value=Et.dashSize,St.totalSize.value=Et.dashSize+Et.gapSize,St.scale.value=Et.scale}function ht(St,Et,wt,Rt){St.diffuse.value.copy(Et.color),St.opacity.value=Et.opacity,St.size.value=Et.size*wt,St.scale.value=Rt*.5,Et.map&&(St.map.value=Et.map,it(Et.map,St.uvTransform)),Et.alphaMap&&(St.alphaMap.value=Et.alphaMap,it(Et.alphaMap,St.alphaMapTransform)),Et.alphaTest>0&&(St.alphaTest.value=Et.alphaTest)}function pt(St,Et){St.diffuse.value.copy(Et.color),St.opacity.value=Et.opacity,St.rotation.value=Et.rotation,Et.map&&(St.map.value=Et.map,it(Et.map,St.mapTransform)),Et.alphaMap&&(St.alphaMap.value=Et.alphaMap,it(Et.alphaMap,St.alphaMapTransform)),Et.alphaTest>0&&(St.alphaTest.value=Et.alphaTest)}function ft(St,Et){St.specular.value.copy(Et.specular),St.shininess.value=Math.max(Et.shininess,1e-4)}function mt(St,Et){Et.gradientMap&&(St.gradientMap.value=Et.gradientMap)}function gt(St,Et){St.metalness.value=Et.metalness,Et.metalnessMap&&(St.metalnessMap.value=Et.metalnessMap,it(Et.metalnessMap,St.metalnessMapTransform)),St.roughness.value=Et.roughness,Et.roughnessMap&&(St.roughnessMap.value=Et.roughnessMap,it(Et.roughnessMap,St.roughnessMapTransform)),rt.get(Et).envMap&&(St.envMapIntensity.value=Et.envMapIntensity)}function xt(St,Et,wt){St.ior.value=Et.ior,Et.sheen>0&&(St.sheenColor.value.copy(Et.sheenColor).multiplyScalar(Et.sheen),St.sheenRoughness.value=Et.sheenRoughness,Et.sheenColorMap&&(St.sheenColorMap.value=Et.sheenColorMap,it(Et.sheenColorMap,St.sheenColorMapTransform)),Et.sheenRoughnessMap&&(St.sheenRoughnessMap.value=Et.sheenRoughnessMap,it(Et.sheenRoughnessMap,St.sheenRoughnessMapTransform))),Et.clearcoat>0&&(St.clearcoat.value=Et.clearcoat,St.clearcoatRoughness.value=Et.clearcoatRoughness,Et.clearcoatMap&&(St.clearcoatMap.value=Et.clearcoatMap,it(Et.clearcoatMap,St.clearcoatMapTransform)),Et.clearcoatRoughnessMap&&(St.clearcoatRoughnessMap.value=Et.clearcoatRoughnessMap,it(Et.clearcoatRoughnessMap,St.clearcoatRoughnessMapTransform)),Et.clearcoatNormalMap&&(St.clearcoatNormalMap.value=Et.clearcoatNormalMap,it(Et.clearcoatNormalMap,St.clearcoatNormalMapTransform),St.clearcoatNormalScale.value.copy(Et.clearcoatNormalScale),Et.side===BackSide&&St.clearcoatNormalScale.value.negate())),Et.iridescence>0&&(St.iridescence.value=Et.iridescence,St.iridescenceIOR.value=Et.iridescenceIOR,St.iridescenceThicknessMinimum.value=Et.iridescenceThicknessRange[0],St.iridescenceThicknessMaximum.value=Et.iridescenceThicknessRange[1],Et.iridescenceMap&&(St.iridescenceMap.value=Et.iridescenceMap,it(Et.iridescenceMap,St.iridescenceMapTransform)),Et.iridescenceThicknessMap&&(St.iridescenceThicknessMap.value=Et.iridescenceThicknessMap,it(Et.iridescenceThicknessMap,St.iridescenceThicknessMapTransform))),Et.transmission>0&&(St.transmission.value=Et.transmission,St.transmissionSamplerMap.value=wt.texture,St.transmissionSamplerSize.value.set(wt.width,wt.height),Et.transmissionMap&&(St.transmissionMap.value=Et.transmissionMap,it(Et.transmissionMap,St.transmissionMapTransform)),St.thickness.value=Et.thickness,Et.thicknessMap&&(St.thicknessMap.value=Et.thicknessMap,it(Et.thicknessMap,St.thicknessMapTransform)),St.attenuationDistance.value=Et.attenuationDistance,St.attenuationColor.value.copy(Et.attenuationColor)),Et.anisotropy>0&&(St.anisotropyVector.value.set(Et.anisotropy*Math.cos(Et.anisotropyRotation),Et.anisotropy*Math.sin(Et.anisotropyRotation)),Et.anisotropyMap&&(St.anisotropyMap.value=Et.anisotropyMap,it(Et.anisotropyMap,St.anisotropyMapTransform))),St.specularIntensity.value=Et.specularIntensity,St.specularColor.value.copy(Et.specularColor),Et.specularColorMap&&(St.specularColorMap.value=Et.specularColorMap,it(Et.specularColorMap,St.specularColorMapTransform)),Et.specularIntensityMap&&(St.specularIntensityMap.value=Et.specularIntensityMap,it(Et.specularIntensityMap,St.specularIntensityMapTransform))}function yt(St,Et){Et.matcap&&(St.matcap.value=Et.matcap)}function vt(St,Et){const wt=rt.get(Et).light;St.referencePosition.value.setFromMatrixPosition(wt.matrixWorld),St.nearDistance.value=wt.shadow.camera.near,St.farDistance.value=wt.shadow.camera.far}return{refreshFogUniforms:st,refreshMaterialUniforms:lt}}function WebGLUniformsGroups(nt,rt,it,st){let lt={},ct={},ut=[];const dt=it.isWebGL2?nt.getParameter(nt.MAX_UNIFORM_BUFFER_BINDINGS):0;function ht(wt,Rt){const Tt=Rt.program;st.uniformBlockBinding(wt,Tt)}function pt(wt,Rt){let Tt=lt[wt.id];Tt===void 0&&(yt(wt),Tt=ft(wt),lt[wt.id]=Tt,wt.addEventListener("dispose",St));const It=Rt.program;st.updateUBOMapping(wt,It);const At=rt.render.frame;ct[wt.id]!==At&&(gt(wt),ct[wt.id]=At)}function ft(wt){const Rt=mt();wt.__bindingPointIndex=Rt;const Tt=nt.createBuffer(),It=wt.__size,At=wt.usage;return nt.bindBuffer(nt.UNIFORM_BUFFER,Tt),nt.bufferData(nt.UNIFORM_BUFFER,It,At),nt.bindBuffer(nt.UNIFORM_BUFFER,null),nt.bindBufferBase(nt.UNIFORM_BUFFER,Rt,Tt),Tt}function mt(){for(let wt=0;wt<dt;wt++)if(ut.indexOf(wt)===-1)return ut.push(wt),wt;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function gt(wt){const Rt=lt[wt.id],Tt=wt.uniforms,It=wt.__cache;nt.bindBuffer(nt.UNIFORM_BUFFER,Rt);for(let At=0,Dt=Tt.length;At<Dt;At++){const jt=Array.isArray(Tt[At])?Tt[At]:[Tt[At]];for(let Ft=0,Lt=jt.length;Ft<Lt;Ft++){const Pt=jt[Ft];if(xt(Pt,At,Ft,It)===!0){const Ot=Pt.__offset,Nt=Array.isArray(Pt.value)?Pt.value:[Pt.value];let $t=0;for(let Vt=0;Vt<Nt.length;Vt++){const Ut=Nt[Vt],zt=vt(Ut);typeof Ut=="number"||typeof Ut=="boolean"?(Pt.__data[0]=Ut,nt.bufferSubData(nt.UNIFORM_BUFFER,Ot+$t,Pt.__data)):Ut.isMatrix3?(Pt.__data[0]=Ut.elements[0],Pt.__data[1]=Ut.elements[1],Pt.__data[2]=Ut.elements[2],Pt.__data[3]=0,Pt.__data[4]=Ut.elements[3],Pt.__data[5]=Ut.elements[4],Pt.__data[6]=Ut.elements[5],Pt.__data[7]=0,Pt.__data[8]=Ut.elements[6],Pt.__data[9]=Ut.elements[7],Pt.__data[10]=Ut.elements[8],Pt.__data[11]=0):(Ut.toArray(Pt.__data,$t),$t+=zt.storage/Float32Array.BYTES_PER_ELEMENT)}nt.bufferSubData(nt.UNIFORM_BUFFER,Ot,Pt.__data)}}}nt.bindBuffer(nt.UNIFORM_BUFFER,null)}function xt(wt,Rt,Tt,It){const At=wt.value,Dt=Rt+"_"+Tt;if(It[Dt]===void 0)return typeof At=="number"||typeof At=="boolean"?It[Dt]=At:It[Dt]=At.clone(),!0;{const jt=It[Dt];if(typeof At=="number"||typeof At=="boolean"){if(jt!==At)return It[Dt]=At,!0}else if(jt.equals(At)===!1)return jt.copy(At),!0}return!1}function yt(wt){const Rt=wt.uniforms;let Tt=0;const It=16;for(let Dt=0,jt=Rt.length;Dt<jt;Dt++){const Ft=Array.isArray(Rt[Dt])?Rt[Dt]:[Rt[Dt]];for(let Lt=0,Pt=Ft.length;Lt<Pt;Lt++){const Ot=Ft[Lt],Nt=Array.isArray(Ot.value)?Ot.value:[Ot.value];for(let $t=0,Vt=Nt.length;$t<Vt;$t++){const Ut=Nt[$t],zt=vt(Ut),Bt=Tt%It;Bt!==0&&It-Bt<zt.boundary&&(Tt+=It-Bt),Ot.__data=new Float32Array(zt.storage/Float32Array.BYTES_PER_ELEMENT),Ot.__offset=Tt,Tt+=zt.storage}}}const At=Tt%It;return At>0&&(Tt+=It-At),wt.__size=Tt,wt.__cache={},this}function vt(wt){const Rt={boundary:0,storage:0};return typeof wt=="number"||typeof wt=="boolean"?(Rt.boundary=4,Rt.storage=4):wt.isVector2?(Rt.boundary=8,Rt.storage=8):wt.isVector3||wt.isColor?(Rt.boundary=16,Rt.storage=12):wt.isVector4?(Rt.boundary=16,Rt.storage=16):wt.isMatrix3?(Rt.boundary=48,Rt.storage=48):wt.isMatrix4?(Rt.boundary=64,Rt.storage=64):wt.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",wt),Rt}function St(wt){const Rt=wt.target;Rt.removeEventListener("dispose",St);const Tt=ut.indexOf(Rt.__bindingPointIndex);ut.splice(Tt,1),nt.deleteBuffer(lt[Rt.id]),delete lt[Rt.id],delete ct[Rt.id]}function Et(){for(const wt in lt)nt.deleteBuffer(lt[wt]);ut=[],lt={},ct={}}return{bind:ht,update:pt,dispose:Et}}class WebGLRenderer{constructor(rt={}){const{canvas:it=createCanvasElement(),context:st=null,depth:lt=!0,stencil:ct=!0,alpha:ut=!1,antialias:dt=!1,premultipliedAlpha:ht=!0,preserveDrawingBuffer:pt=!1,powerPreference:ft="default",failIfMajorPerformanceCaveat:mt=!1}=rt;this.isWebGLRenderer=!0;let gt;st!==null?gt=st.getContextAttributes().alpha:gt=ut;const xt=new Uint32Array(4),yt=new Int32Array(4);let vt=null,St=null;const Et=[],wt=[];this.domElement=it,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const Rt=this;let Tt=!1,It=0,At=0,Dt=null,jt=-1,Ft=null;const Lt=new Vector4,Pt=new Vector4;let Ot=null;const Nt=new Color(0);let $t=0,Vt=it.width,Ut=it.height,zt=1,Bt=null,Ht=null;const Gt=new Vector4(0,0,Vt,Ut),Kt=new Vector4(0,0,Vt,Ut);let Xt=!1;const or=new Frustum;let tr=!1,dr=!1,fr=null;const Sr=new Matrix4,vr=new Vector2,mr=new Vector3,hr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gr(){return Dt===null?zt:1}let lr=st;function Ir(Ar,_n){for(let Pn=0;Pn<Ar.length;Pn++){const Tn=Ar[Pn],Or=it.getContext(Tn,_n);if(Or!==null)return Or}return null}try{const Ar={alpha:!0,depth:lt,stencil:ct,antialias:dt,premultipliedAlpha:ht,preserveDrawingBuffer:pt,powerPreference:ft,failIfMajorPerformanceCaveat:mt};if("setAttribute"in it&&it.setAttribute("data-engine",`three.js r${REVISION}`),it.addEventListener("webglcontextlost",Cn,!1),it.addEventListener("webglcontextrestored",Rr,!1),it.addEventListener("webglcontextcreationerror",pn,!1),lr===null){const _n=["webgl2","webgl","experimental-webgl"];if(Rt.isWebGL1Renderer===!0&&_n.shift(),lr=Ir(_n,Ar),lr===null)throw Ir(_n)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&lr instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),lr.getShaderPrecisionFormat===void 0&&(lr.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ar){throw console.error("THREE.WebGLRenderer: "+Ar.message),Ar}let wr,Fr,$r,hn,Zr,Qt,Jt,pr,Vr,Wr,zr,ln,xn,yn,Wn,Mn,sn,qn,Gr,qr,wn,Cr,nr,Ur;function Mr(){wr=new WebGLExtensions(lr),Fr=new WebGLCapabilities(lr,wr,rt),wr.init(Fr),Cr=new WebGLUtils(lr,wr,Fr),$r=new WebGLState(lr,wr,Fr),hn=new WebGLInfo(lr),Zr=new WebGLProperties,Qt=new WebGLTextures(lr,wr,$r,Zr,Fr,Cr,hn),Jt=new WebGLCubeMaps(Rt),pr=new WebGLCubeUVMaps(Rt),Vr=new WebGLAttributes(lr,Fr),nr=new WebGLBindingStates(lr,wr,Vr,Fr),Wr=new WebGLGeometries(lr,Vr,hn,nr),zr=new WebGLObjects(lr,Wr,Vr,hn),Gr=new WebGLMorphtargets(lr,Fr,Qt),Mn=new WebGLClipping(Zr),ln=new WebGLPrograms(Rt,Jt,pr,wr,Fr,nr,Mn),xn=new WebGLMaterials(Rt,Zr),yn=new WebGLRenderLists,Wn=new WebGLRenderStates(wr,Fr),qn=new WebGLBackground(Rt,Jt,pr,$r,zr,gt,ht),sn=new WebGLShadowMap(Rt,zr,Fr),Ur=new WebGLUniformsGroups(lr,hn,Fr,$r),qr=new WebGLBufferRenderer(lr,wr,hn,Fr),wn=new WebGLIndexedBufferRenderer(lr,wr,hn,Fr),hn.programs=ln.programs,Rt.capabilities=Fr,Rt.extensions=wr,Rt.properties=Zr,Rt.renderLists=yn,Rt.shadowMap=sn,Rt.state=$r,Rt.info=hn}Mr();const rn=new WebXRManager(Rt,lr);this.xr=rn,this.getContext=function(){return lr},this.getContextAttributes=function(){return lr.getContextAttributes()},this.forceContextLoss=function(){const Ar=wr.get("WEBGL_lose_context");Ar&&Ar.loseContext()},this.forceContextRestore=function(){const Ar=wr.get("WEBGL_lose_context");Ar&&Ar.restoreContext()},this.getPixelRatio=function(){return zt},this.setPixelRatio=function(Ar){Ar!==void 0&&(zt=Ar,this.setSize(Vt,Ut,!1))},this.getSize=function(Ar){return Ar.set(Vt,Ut)},this.setSize=function(Ar,_n,Pn=!0){if(rn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Vt=Ar,Ut=_n,it.width=Math.floor(Ar*zt),it.height=Math.floor(_n*zt),Pn===!0&&(it.style.width=Ar+"px",it.style.height=_n+"px"),this.setViewport(0,0,Ar,_n)},this.getDrawingBufferSize=function(Ar){return Ar.set(Vt*zt,Ut*zt).floor()},this.setDrawingBufferSize=function(Ar,_n,Pn){Vt=Ar,Ut=_n,zt=Pn,it.width=Math.floor(Ar*Pn),it.height=Math.floor(_n*Pn),this.setViewport(0,0,Ar,_n)},this.getCurrentViewport=function(Ar){return Ar.copy(Lt)},this.getViewport=function(Ar){return Ar.copy(Gt)},this.setViewport=function(Ar,_n,Pn,Tn){Ar.isVector4?Gt.set(Ar.x,Ar.y,Ar.z,Ar.w):Gt.set(Ar,_n,Pn,Tn),$r.viewport(Lt.copy(Gt).multiplyScalar(zt).floor())},this.getScissor=function(Ar){return Ar.copy(Kt)},this.setScissor=function(Ar,_n,Pn,Tn){Ar.isVector4?Kt.set(Ar.x,Ar.y,Ar.z,Ar.w):Kt.set(Ar,_n,Pn,Tn),$r.scissor(Pt.copy(Kt).multiplyScalar(zt).floor())},this.getScissorTest=function(){return Xt},this.setScissorTest=function(Ar){$r.setScissorTest(Xt=Ar)},this.setOpaqueSort=function(Ar){Bt=Ar},this.setTransparentSort=function(Ar){Ht=Ar},this.getClearColor=function(Ar){return Ar.copy(qn.getClearColor())},this.setClearColor=function(){qn.setClearColor.apply(qn,arguments)},this.getClearAlpha=function(){return qn.getClearAlpha()},this.setClearAlpha=function(){qn.setClearAlpha.apply(qn,arguments)},this.clear=function(Ar=!0,_n=!0,Pn=!0){let Tn=0;if(Ar){let Or=!1;if(Dt!==null){const ds=Dt.texture.format;Or=ds===RGBAIntegerFormat||ds===RGIntegerFormat||ds===RedIntegerFormat}if(Or){const ds=Dt.texture.type,_i=ds===UnsignedByteType||ds===UnsignedIntType||ds===UnsignedShortType||ds===UnsignedInt248Type||ds===UnsignedShort4444Type||ds===UnsignedShort5551Type,hs=qn.getClearColor(),Ms=qn.getClearAlpha(),Us=hs.r,Hs=hs.g,tn=hs.b;_i?(xt[0]=Us,xt[1]=Hs,xt[2]=tn,xt[3]=Ms,lr.clearBufferuiv(lr.COLOR,0,xt)):(yt[0]=Us,yt[1]=Hs,yt[2]=tn,yt[3]=Ms,lr.clearBufferiv(lr.COLOR,0,yt))}else Tn|=lr.COLOR_BUFFER_BIT}_n&&(Tn|=lr.DEPTH_BUFFER_BIT),Pn&&(Tn|=lr.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),lr.clear(Tn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){it.removeEventListener("webglcontextlost",Cn,!1),it.removeEventListener("webglcontextrestored",Rr,!1),it.removeEventListener("webglcontextcreationerror",pn,!1),yn.dispose(),Wn.dispose(),Zr.dispose(),Jt.dispose(),pr.dispose(),zr.dispose(),nr.dispose(),Ur.dispose(),ln.dispose(),rn.dispose(),rn.removeEventListener("sessionstart",Yn),rn.removeEventListener("sessionend",Hn),fr&&(fr.dispose(),fr=null),Bn.stop()};function Cn(Ar){Ar.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Tt=!0}function Rr(){console.log("THREE.WebGLRenderer: Context Restored."),Tt=!1;const Ar=hn.autoReset,_n=sn.enabled,Pn=sn.autoUpdate,Tn=sn.needsUpdate,Or=sn.type;Mr(),hn.autoReset=Ar,sn.enabled=_n,sn.autoUpdate=Pn,sn.needsUpdate=Tn,sn.type=Or}function pn(Ar){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ar.statusMessage)}function Tr(Ar){const _n=Ar.target;_n.removeEventListener("dispose",Tr),xr(_n)}function xr(Ar){jr(Ar),Zr.remove(Ar)}function jr(Ar){const _n=Zr.get(Ar).programs;_n!==void 0&&(_n.forEach(function(Pn){ln.releaseProgram(Pn)}),Ar.isShaderMaterial&&ln.releaseShaderCache(Ar))}this.renderBufferDirect=function(Ar,_n,Pn,Tn,Or,ds){_n===null&&(_n=hr);const _i=Or.isMesh&&Or.matrixWorld.determinant()<0,hs=$a(Ar,_n,Pn,Tn,Or);$r.setMaterial(Tn,_i);let Ms=Pn.index,Us=1;if(Tn.wireframe===!0){if(Ms=Wr.getWireframeAttribute(Pn),Ms===void 0)return;Us=2}const Hs=Pn.drawRange,tn=Pn.attributes.position;let Ao=Hs.start*Us,mn=(Hs.start+Hs.count)*Us;ds!==null&&(Ao=Math.max(Ao,ds.start*Us),mn=Math.min(mn,(ds.start+ds.count)*Us)),Ms!==null?(Ao=Math.max(Ao,0),mn=Math.min(mn,Ms.count)):tn!=null&&(Ao=Math.max(Ao,0),mn=Math.min(mn,tn.count));const Rn=mn-Ao;if(Rn<0||Rn===1/0)return;nr.setup(Or,Tn,hs,Pn,Ms);let Un,Dn=qr;if(Ms!==null&&(Un=Vr.get(Ms),Dn=wn,Dn.setIndex(Un)),Or.isMesh)Tn.wireframe===!0?($r.setLineWidth(Tn.wireframeLinewidth*gr()),Dn.setMode(lr.LINES)):Dn.setMode(lr.TRIANGLES);else if(Or.isLine){let $n=Tn.linewidth;$n===void 0&&($n=1),$r.setLineWidth($n*gr()),Or.isLineSegments?Dn.setMode(lr.LINES):Or.isLineLoop?Dn.setMode(lr.LINE_LOOP):Dn.setMode(lr.LINE_STRIP)}else Or.isPoints?Dn.setMode(lr.POINTS):Or.isSprite&&Dn.setMode(lr.TRIANGLES);if(Or.isBatchedMesh)Dn.renderMultiDraw(Or._multiDrawStarts,Or._multiDrawCounts,Or._multiDrawCount);else if(Or.isInstancedMesh)Dn.renderInstances(Ao,Rn,Or.count);else if(Pn.isInstancedBufferGeometry){const $n=Pn._maxInstanceCount!==void 0?Pn._maxInstanceCount:1/0,Os=Math.min(Pn.instanceCount,$n);Dn.renderInstances(Ao,Rn,Os)}else Dn.render(Ao,Rn)};function en(Ar,_n,Pn){Ar.transparent===!0&&Ar.side===DoubleSide&&Ar.forceSinglePass===!1?(Ar.side=BackSide,Ar.needsUpdate=!0,Po(Ar,_n,Pn),Ar.side=FrontSide,Ar.needsUpdate=!0,Po(Ar,_n,Pn),Ar.side=DoubleSide):Po(Ar,_n,Pn)}this.compile=function(Ar,_n,Pn=null){Pn===null&&(Pn=Ar),St=Wn.get(Pn),St.init(),wt.push(St),Pn.traverseVisible(function(Or){Or.isLight&&Or.layers.test(_n.layers)&&(St.pushLight(Or),Or.castShadow&&St.pushShadow(Or))}),Ar!==Pn&&Ar.traverseVisible(function(Or){Or.isLight&&Or.layers.test(_n.layers)&&(St.pushLight(Or),Or.castShadow&&St.pushShadow(Or))}),St.setupLights(Rt._useLegacyLights);const Tn=new Set;return Ar.traverse(function(Or){const ds=Or.material;if(ds)if(Array.isArray(ds))for(let _i=0;_i<ds.length;_i++){const hs=ds[_i];en(hs,Pn,Or),Tn.add(hs)}else en(ds,Pn,Or),Tn.add(ds)}),wt.pop(),St=null,Tn},this.compileAsync=function(Ar,_n,Pn=null){const Tn=this.compile(Ar,_n,Pn);return new Promise(Or=>{function ds(){if(Tn.forEach(function(_i){Zr.get(_i).currentProgram.isReady()&&Tn.delete(_i)}),Tn.size===0){Or(Ar);return}setTimeout(ds,10)}wr.get("KHR_parallel_shader_compile")!==null?ds():setTimeout(ds,10)})};let fn=null;function Vn(Ar){fn&&fn(Ar)}function Yn(){Bn.stop()}function Hn(){Bn.start()}const Bn=new WebGLAnimation;Bn.setAnimationLoop(Vn),typeof self<"u"&&Bn.setContext(self),this.setAnimationLoop=function(Ar){fn=Ar,rn.setAnimationLoop(Ar),Ar===null?Bn.stop():Bn.start()},rn.addEventListener("sessionstart",Yn),rn.addEventListener("sessionend",Hn),this.render=function(Ar,_n){if(_n!==void 0&&_n.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Tt===!0)return;Ar.matrixWorldAutoUpdate===!0&&Ar.updateMatrixWorld(),_n.parent===null&&_n.matrixWorldAutoUpdate===!0&&_n.updateMatrixWorld(),rn.enabled===!0&&rn.isPresenting===!0&&(rn.cameraAutoUpdate===!0&&rn.updateCamera(_n),_n=rn.getCamera()),Ar.isScene===!0&&Ar.onBeforeRender(Rt,Ar,_n,Dt),St=Wn.get(Ar,wt.length),St.init(),wt.push(St),Sr.multiplyMatrices(_n.projectionMatrix,_n.matrixWorldInverse),or.setFromProjectionMatrix(Sr),dr=this.localClippingEnabled,tr=Mn.init(this.clippingPlanes,dr),vt=yn.get(Ar,Et.length),vt.init(),Et.push(vt),es(Ar,_n,0,Rt.sortObjects),vt.finish(),Rt.sortObjects===!0&&vt.sort(Bt,Ht),this.info.render.frame++,tr===!0&&Mn.beginShadows();const Pn=St.state.shadowsArray;if(sn.render(Pn,Ar,_n),tr===!0&&Mn.endShadows(),this.info.autoReset===!0&&this.info.reset(),(rn.enabled===!1||rn.isPresenting===!1||rn.hasDepthSensing()===!1)&&qn.render(vt,Ar),St.setupLights(Rt._useLegacyLights),_n.isArrayCamera){const Tn=_n.cameras;for(let Or=0,ds=Tn.length;Or<ds;Or++){const _i=Tn[Or];$s(vt,Ar,_i,_i.viewport)}}else $s(vt,Ar,_n);Dt!==null&&(Qt.updateMultisampleRenderTarget(Dt),Qt.updateRenderTargetMipmap(Dt)),Ar.isScene===!0&&Ar.onAfterRender(Rt,Ar,_n),nr.resetDefaultState(),jt=-1,Ft=null,wt.pop(),wt.length>0?St=wt[wt.length-1]:St=null,Et.pop(),Et.length>0?vt=Et[Et.length-1]:vt=null};function es(Ar,_n,Pn,Tn){if(Ar.visible===!1)return;if(Ar.layers.test(_n.layers)){if(Ar.isGroup)Pn=Ar.renderOrder;else if(Ar.isLOD)Ar.autoUpdate===!0&&Ar.update(_n);else if(Ar.isLight)St.pushLight(Ar),Ar.castShadow&&St.pushShadow(Ar);else if(Ar.isSprite){if(!Ar.frustumCulled||or.intersectsSprite(Ar)){Tn&&mr.setFromMatrixPosition(Ar.matrixWorld).applyMatrix4(Sr);const _i=zr.update(Ar),hs=Ar.material;hs.visible&&vt.push(Ar,_i,hs,Pn,mr.z,null)}}else if((Ar.isMesh||Ar.isLine||Ar.isPoints)&&(!Ar.frustumCulled||or.intersectsObject(Ar))){const _i=zr.update(Ar),hs=Ar.material;if(Tn&&(Ar.boundingSphere!==void 0?(Ar.boundingSphere===null&&Ar.computeBoundingSphere(),mr.copy(Ar.boundingSphere.center)):(_i.boundingSphere===null&&_i.computeBoundingSphere(),mr.copy(_i.boundingSphere.center)),mr.applyMatrix4(Ar.matrixWorld).applyMatrix4(Sr)),Array.isArray(hs)){const Ms=_i.groups;for(let Us=0,Hs=Ms.length;Us<Hs;Us++){const tn=Ms[Us],Ao=hs[tn.materialIndex];Ao&&Ao.visible&&vt.push(Ar,_i,Ao,Pn,mr.z,tn)}}else hs.visible&&vt.push(Ar,_i,hs,Pn,mr.z,null)}}const ds=Ar.children;for(let _i=0,hs=ds.length;_i<hs;_i++)es(ds[_i],_n,Pn,Tn)}function $s(Ar,_n,Pn,Tn){const Or=Ar.opaque,ds=Ar.transmissive,_i=Ar.transparent;St.setupLightsView(Pn),tr===!0&&Mn.setGlobalState(Rt.clippingPlanes,Pn),ds.length>0&&Ss(Or,ds,_n,Pn),Tn&&$r.viewport(Lt.copy(Tn)),Or.length>0&&zs(Or,_n,Pn),ds.length>0&&zs(ds,_n,Pn),_i.length>0&&zs(_i,_n,Pn),$r.buffers.depth.setTest(!0),$r.buffers.depth.setMask(!0),$r.buffers.color.setMask(!0),$r.setPolygonOffset(!1)}function Ss(Ar,_n,Pn,Tn){if((Pn.isScene===!0?Pn.overrideMaterial:null)!==null)return;const ds=Fr.isWebGL2;fr===null&&(fr=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:wr.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:ds?4:0})),Rt.getDrawingBufferSize(vr),ds?fr.setSize(vr.x,vr.y):fr.setSize(floorPowerOfTwo(vr.x),floorPowerOfTwo(vr.y));const _i=Rt.getRenderTarget();Rt.setRenderTarget(fr),Rt.getClearColor(Nt),$t=Rt.getClearAlpha(),$t<1&&Rt.setClearColor(16777215,.5),Rt.clear();const hs=Rt.toneMapping;Rt.toneMapping=NoToneMapping,zs(Ar,Pn,Tn),Qt.updateMultisampleRenderTarget(fr),Qt.updateRenderTargetMipmap(fr);let Ms=!1;for(let Us=0,Hs=_n.length;Us<Hs;Us++){const tn=_n[Us],Ao=tn.object,mn=tn.geometry,Rn=tn.material,Un=tn.group;if(Rn.side===DoubleSide&&Ao.layers.test(Tn.layers)){const Dn=Rn.side;Rn.side=BackSide,Rn.needsUpdate=!0,ro(Ao,Pn,Tn,mn,Rn,Un),Rn.side=Dn,Rn.needsUpdate=!0,Ms=!0}}Ms===!0&&(Qt.updateMultisampleRenderTarget(fr),Qt.updateRenderTargetMipmap(fr)),Rt.setRenderTarget(_i),Rt.setClearColor(Nt,$t),Rt.toneMapping=hs}function zs(Ar,_n,Pn){const Tn=_n.isScene===!0?_n.overrideMaterial:null;for(let Or=0,ds=Ar.length;Or<ds;Or++){const _i=Ar[Or],hs=_i.object,Ms=_i.geometry,Us=Tn===null?_i.material:Tn,Hs=_i.group;hs.layers.test(Pn.layers)&&ro(hs,_n,Pn,Ms,Us,Hs)}}function ro(Ar,_n,Pn,Tn,Or,ds){Ar.onBeforeRender(Rt,_n,Pn,Tn,Or,ds),Ar.modelViewMatrix.multiplyMatrices(Pn.matrixWorldInverse,Ar.matrixWorld),Ar.normalMatrix.getNormalMatrix(Ar.modelViewMatrix),Or.onBeforeRender(Rt,_n,Pn,Tn,Ar,ds),Or.transparent===!0&&Or.side===DoubleSide&&Or.forceSinglePass===!1?(Or.side=BackSide,Or.needsUpdate=!0,Rt.renderBufferDirect(Pn,_n,Tn,Or,Ar,ds),Or.side=FrontSide,Or.needsUpdate=!0,Rt.renderBufferDirect(Pn,_n,Tn,Or,Ar,ds),Or.side=DoubleSide):Rt.renderBufferDirect(Pn,_n,Tn,Or,Ar,ds),Ar.onAfterRender(Rt,_n,Pn,Tn,Or,ds)}function Po(Ar,_n,Pn){_n.isScene!==!0&&(_n=hr);const Tn=Zr.get(Ar),Or=St.state.lights,ds=St.state.shadowsArray,_i=Or.state.version,hs=ln.getParameters(Ar,Or.state,ds,_n,Pn),Ms=ln.getProgramCacheKey(hs);let Us=Tn.programs;Tn.environment=Ar.isMeshStandardMaterial?_n.environment:null,Tn.fog=_n.fog,Tn.envMap=(Ar.isMeshStandardMaterial?pr:Jt).get(Ar.envMap||Tn.environment),Us===void 0&&(Ar.addEventListener("dispose",Tr),Us=new Map,Tn.programs=Us);let Hs=Us.get(Ms);if(Hs!==void 0){if(Tn.currentProgram===Hs&&Tn.lightsStateVersion===_i)return qo(Ar,hs),Hs}else hs.uniforms=ln.getUniforms(Ar),Ar.onBuild(Pn,hs,Rt),Ar.onBeforeCompile(hs,Rt),Hs=ln.acquireProgram(hs,Ms),Us.set(Ms,Hs),Tn.uniforms=hs.uniforms;const tn=Tn.uniforms;return(!Ar.isShaderMaterial&&!Ar.isRawShaderMaterial||Ar.clipping===!0)&&(tn.clippingPlanes=Mn.uniform),qo(Ar,hs),Tn.needsLights=Rl(Ar),Tn.lightsStateVersion=_i,Tn.needsLights&&(tn.ambientLightColor.value=Or.state.ambient,tn.lightProbe.value=Or.state.probe,tn.directionalLights.value=Or.state.directional,tn.directionalLightShadows.value=Or.state.directionalShadow,tn.spotLights.value=Or.state.spot,tn.spotLightShadows.value=Or.state.spotShadow,tn.rectAreaLights.value=Or.state.rectArea,tn.ltc_1.value=Or.state.rectAreaLTC1,tn.ltc_2.value=Or.state.rectAreaLTC2,tn.pointLights.value=Or.state.point,tn.pointLightShadows.value=Or.state.pointShadow,tn.hemisphereLights.value=Or.state.hemi,tn.directionalShadowMap.value=Or.state.directionalShadowMap,tn.directionalShadowMatrix.value=Or.state.directionalShadowMatrix,tn.spotShadowMap.value=Or.state.spotShadowMap,tn.spotLightMatrix.value=Or.state.spotLightMatrix,tn.spotLightMap.value=Or.state.spotLightMap,tn.pointShadowMap.value=Or.state.pointShadowMap,tn.pointShadowMatrix.value=Or.state.pointShadowMatrix),Tn.currentProgram=Hs,Tn.uniformsList=null,Hs}function To(Ar){if(Ar.uniformsList===null){const _n=Ar.currentProgram.getUniforms();Ar.uniformsList=WebGLUniforms.seqWithValue(_n.seq,Ar.uniforms)}return Ar.uniformsList}function qo(Ar,_n){const Pn=Zr.get(Ar);Pn.outputColorSpace=_n.outputColorSpace,Pn.batching=_n.batching,Pn.instancing=_n.instancing,Pn.instancingColor=_n.instancingColor,Pn.skinning=_n.skinning,Pn.morphTargets=_n.morphTargets,Pn.morphNormals=_n.morphNormals,Pn.morphColors=_n.morphColors,Pn.morphTargetsCount=_n.morphTargetsCount,Pn.numClippingPlanes=_n.numClippingPlanes,Pn.numIntersection=_n.numClipIntersection,Pn.vertexAlphas=_n.vertexAlphas,Pn.vertexTangents=_n.vertexTangents,Pn.toneMapping=_n.toneMapping}function $a(Ar,_n,Pn,Tn,Or){_n.isScene!==!0&&(_n=hr),Qt.resetTextureUnits();const ds=_n.fog,_i=Tn.isMeshStandardMaterial?_n.environment:null,hs=Dt===null?Rt.outputColorSpace:Dt.isXRRenderTarget===!0?Dt.texture.colorSpace:LinearSRGBColorSpace,Ms=(Tn.isMeshStandardMaterial?pr:Jt).get(Tn.envMap||_i),Us=Tn.vertexColors===!0&&!!Pn.attributes.color&&Pn.attributes.color.itemSize===4,Hs=!!Pn.attributes.tangent&&(!!Tn.normalMap||Tn.anisotropy>0),tn=!!Pn.morphAttributes.position,Ao=!!Pn.morphAttributes.normal,mn=!!Pn.morphAttributes.color;let Rn=NoToneMapping;Tn.toneMapped&&(Dt===null||Dt.isXRRenderTarget===!0)&&(Rn=Rt.toneMapping);const Un=Pn.morphAttributes.position||Pn.morphAttributes.normal||Pn.morphAttributes.color,Dn=Un!==void 0?Un.length:0,$n=Zr.get(Tn),Os=St.state.lights;if(tr===!0&&(dr===!0||Ar!==Ft)){const yo=Ar===Ft&&Tn.id===jt;Mn.setState(Tn,Ar,yo)}let cs=!1;Tn.version===$n.__version?($n.needsLights&&$n.lightsStateVersion!==Os.state.version||$n.outputColorSpace!==hs||Or.isBatchedMesh&&$n.batching===!1||!Or.isBatchedMesh&&$n.batching===!0||Or.isInstancedMesh&&$n.instancing===!1||!Or.isInstancedMesh&&$n.instancing===!0||Or.isSkinnedMesh&&$n.skinning===!1||!Or.isSkinnedMesh&&$n.skinning===!0||Or.isInstancedMesh&&$n.instancingColor===!0&&Or.instanceColor===null||Or.isInstancedMesh&&$n.instancingColor===!1&&Or.instanceColor!==null||$n.envMap!==Ms||Tn.fog===!0&&$n.fog!==ds||$n.numClippingPlanes!==void 0&&($n.numClippingPlanes!==Mn.numPlanes||$n.numIntersection!==Mn.numIntersection)||$n.vertexAlphas!==Us||$n.vertexTangents!==Hs||$n.morphTargets!==tn||$n.morphNormals!==Ao||$n.morphColors!==mn||$n.toneMapping!==Rn||Fr.isWebGL2===!0&&$n.morphTargetsCount!==Dn)&&(cs=!0):(cs=!0,$n.__version=Tn.version);let ks=$n.currentProgram;cs===!0&&(ks=Po(Tn,_n,Or));let Ps=!1,oo=!1,As=!1;const Ns=ks.getUniforms(),Uo=$n.uniforms;if($r.useProgram(ks.program)&&(Ps=!0,oo=!0,As=!0),Tn.id!==jt&&(jt=Tn.id,oo=!0),Ps||Ft!==Ar){Ns.setValue(lr,"projectionMatrix",Ar.projectionMatrix),Ns.setValue(lr,"viewMatrix",Ar.matrixWorldInverse);const yo=Ns.map.cameraPosition;yo!==void 0&&yo.setValue(lr,mr.setFromMatrixPosition(Ar.matrixWorld)),Fr.logarithmicDepthBuffer&&Ns.setValue(lr,"logDepthBufFC",2/(Math.log(Ar.far+1)/Math.LN2)),(Tn.isMeshPhongMaterial||Tn.isMeshToonMaterial||Tn.isMeshLambertMaterial||Tn.isMeshBasicMaterial||Tn.isMeshStandardMaterial||Tn.isShaderMaterial)&&Ns.setValue(lr,"isOrthographic",Ar.isOrthographicCamera===!0),Ft!==Ar&&(Ft=Ar,oo=!0,As=!0)}if(Or.isSkinnedMesh){Ns.setOptional(lr,Or,"bindMatrix"),Ns.setOptional(lr,Or,"bindMatrixInverse");const yo=Or.skeleton;yo&&(Fr.floatVertexTextures?(yo.boneTexture===null&&yo.computeBoneTexture(),Ns.setValue(lr,"boneTexture",yo.boneTexture,Qt)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Or.isBatchedMesh&&(Ns.setOptional(lr,Or,"batchingTexture"),Ns.setValue(lr,"batchingTexture",Or._matricesTexture,Qt));const Vo=Pn.morphAttributes;if((Vo.position!==void 0||Vo.normal!==void 0||Vo.color!==void 0&&Fr.isWebGL2===!0)&&Gr.update(Or,Pn,ks),(oo||$n.receiveShadow!==Or.receiveShadow)&&($n.receiveShadow=Or.receiveShadow,Ns.setValue(lr,"receiveShadow",Or.receiveShadow)),Tn.isMeshGouraudMaterial&&Tn.envMap!==null&&(Uo.envMap.value=Ms,Uo.flipEnvMap.value=Ms.isCubeTexture&&Ms.isRenderTargetTexture===!1?-1:1),oo&&(Ns.setValue(lr,"toneMappingExposure",Rt.toneMappingExposure),$n.needsLights&&Ll(Uo,As),ds&&Tn.fog===!0&&xn.refreshFogUniforms(Uo,ds),xn.refreshMaterialUniforms(Uo,Tn,zt,Ut,fr),WebGLUniforms.upload(lr,To($n),Uo,Qt)),Tn.isShaderMaterial&&Tn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(lr,To($n),Uo,Qt),Tn.uniformsNeedUpdate=!1),Tn.isSpriteMaterial&&Ns.setValue(lr,"center",Or.center),Ns.setValue(lr,"modelViewMatrix",Or.modelViewMatrix),Ns.setValue(lr,"normalMatrix",Or.normalMatrix),Ns.setValue(lr,"modelMatrix",Or.matrixWorld),Tn.isShaderMaterial||Tn.isRawShaderMaterial){const yo=Tn.uniformsGroups;for(let Ko=0,ko=yo.length;Ko<ko;Ko++)if(Fr.isWebGL2){const Tl=yo[Ko];Ur.update(Tl,ks),Ur.bind(Tl,ks)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ks}function Ll(Ar,_n){Ar.ambientLightColor.needsUpdate=_n,Ar.lightProbe.needsUpdate=_n,Ar.directionalLights.needsUpdate=_n,Ar.directionalLightShadows.needsUpdate=_n,Ar.pointLights.needsUpdate=_n,Ar.pointLightShadows.needsUpdate=_n,Ar.spotLights.needsUpdate=_n,Ar.spotLightShadows.needsUpdate=_n,Ar.rectAreaLights.needsUpdate=_n,Ar.hemisphereLights.needsUpdate=_n}function Rl(Ar){return Ar.isMeshLambertMaterial||Ar.isMeshToonMaterial||Ar.isMeshPhongMaterial||Ar.isMeshStandardMaterial||Ar.isShadowMaterial||Ar.isShaderMaterial&&Ar.lights===!0}this.getActiveCubeFace=function(){return It},this.getActiveMipmapLevel=function(){return At},this.getRenderTarget=function(){return Dt},this.setRenderTargetTextures=function(Ar,_n,Pn){Zr.get(Ar.texture).__webglTexture=_n,Zr.get(Ar.depthTexture).__webglTexture=Pn;const Tn=Zr.get(Ar);Tn.__hasExternalTextures=!0,Tn.__hasExternalTextures&&(Tn.__autoAllocateDepthBuffer=Pn===void 0,Tn.__autoAllocateDepthBuffer||wr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Tn.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ar,_n){const Pn=Zr.get(Ar);Pn.__webglFramebuffer=_n,Pn.__useDefaultFramebuffer=_n===void 0},this.setRenderTarget=function(Ar,_n=0,Pn=0){Dt=Ar,It=_n,At=Pn;let Tn=!0,Or=null,ds=!1,_i=!1;if(Ar){const Ms=Zr.get(Ar);Ms.__useDefaultFramebuffer!==void 0?($r.bindFramebuffer(lr.FRAMEBUFFER,null),Tn=!1):Ms.__webglFramebuffer===void 0?Qt.setupRenderTarget(Ar):Ms.__hasExternalTextures&&Qt.rebindTextures(Ar,Zr.get(Ar.texture).__webglTexture,Zr.get(Ar.depthTexture).__webglTexture);const Us=Ar.texture;(Us.isData3DTexture||Us.isDataArrayTexture||Us.isCompressedArrayTexture)&&(_i=!0);const Hs=Zr.get(Ar).__webglFramebuffer;Ar.isWebGLCubeRenderTarget?(Array.isArray(Hs[_n])?Or=Hs[_n][Pn]:Or=Hs[_n],ds=!0):Fr.isWebGL2&&Ar.samples>0&&Qt.useMultisampledRTT(Ar)===!1?Or=Zr.get(Ar).__webglMultisampledFramebuffer:Array.isArray(Hs)?Or=Hs[Pn]:Or=Hs,Lt.copy(Ar.viewport),Pt.copy(Ar.scissor),Ot=Ar.scissorTest}else Lt.copy(Gt).multiplyScalar(zt).floor(),Pt.copy(Kt).multiplyScalar(zt).floor(),Ot=Xt;if($r.bindFramebuffer(lr.FRAMEBUFFER,Or)&&Fr.drawBuffers&&Tn&&$r.drawBuffers(Ar,Or),$r.viewport(Lt),$r.scissor(Pt),$r.setScissorTest(Ot),ds){const Ms=Zr.get(Ar.texture);lr.framebufferTexture2D(lr.FRAMEBUFFER,lr.COLOR_ATTACHMENT0,lr.TEXTURE_CUBE_MAP_POSITIVE_X+_n,Ms.__webglTexture,Pn)}else if(_i){const Ms=Zr.get(Ar.texture),Us=_n||0;lr.framebufferTextureLayer(lr.FRAMEBUFFER,lr.COLOR_ATTACHMENT0,Ms.__webglTexture,Pn||0,Us)}jt=-1},this.readRenderTargetPixels=function(Ar,_n,Pn,Tn,Or,ds,_i){if(!(Ar&&Ar.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let hs=Zr.get(Ar).__webglFramebuffer;if(Ar.isWebGLCubeRenderTarget&&_i!==void 0&&(hs=hs[_i]),hs){$r.bindFramebuffer(lr.FRAMEBUFFER,hs);try{const Ms=Ar.texture,Us=Ms.format,Hs=Ms.type;if(Us!==RGBAFormat&&Cr.convert(Us)!==lr.getParameter(lr.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const tn=Hs===HalfFloatType&&(wr.has("EXT_color_buffer_half_float")||Fr.isWebGL2&&wr.has("EXT_color_buffer_float"));if(Hs!==UnsignedByteType&&Cr.convert(Hs)!==lr.getParameter(lr.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Hs===FloatType&&(Fr.isWebGL2||wr.has("OES_texture_float")||wr.has("WEBGL_color_buffer_float")))&&!tn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_n>=0&&_n<=Ar.width-Tn&&Pn>=0&&Pn<=Ar.height-Or&&lr.readPixels(_n,Pn,Tn,Or,Cr.convert(Us),Cr.convert(Hs),ds)}finally{const Ms=Dt!==null?Zr.get(Dt).__webglFramebuffer:null;$r.bindFramebuffer(lr.FRAMEBUFFER,Ms)}}},this.copyFramebufferToTexture=function(Ar,_n,Pn=0){const Tn=Math.pow(2,-Pn),Or=Math.floor(_n.image.width*Tn),ds=Math.floor(_n.image.height*Tn);Qt.setTexture2D(_n,0),lr.copyTexSubImage2D(lr.TEXTURE_2D,Pn,0,0,Ar.x,Ar.y,Or,ds),$r.unbindTexture()},this.copyTextureToTexture=function(Ar,_n,Pn,Tn=0){const Or=_n.image.width,ds=_n.image.height,_i=Cr.convert(Pn.format),hs=Cr.convert(Pn.type);Qt.setTexture2D(Pn,0),lr.pixelStorei(lr.UNPACK_FLIP_Y_WEBGL,Pn.flipY),lr.pixelStorei(lr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pn.premultiplyAlpha),lr.pixelStorei(lr.UNPACK_ALIGNMENT,Pn.unpackAlignment),_n.isDataTexture?lr.texSubImage2D(lr.TEXTURE_2D,Tn,Ar.x,Ar.y,Or,ds,_i,hs,_n.image.data):_n.isCompressedTexture?lr.compressedTexSubImage2D(lr.TEXTURE_2D,Tn,Ar.x,Ar.y,_n.mipmaps[0].width,_n.mipmaps[0].height,_i,_n.mipmaps[0].data):lr.texSubImage2D(lr.TEXTURE_2D,Tn,Ar.x,Ar.y,_i,hs,_n.image),Tn===0&&Pn.generateMipmaps&&lr.generateMipmap(lr.TEXTURE_2D),$r.unbindTexture()},this.copyTextureToTexture3D=function(Ar,_n,Pn,Tn,Or=0){if(Rt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ds=Ar.max.x-Ar.min.x+1,_i=Ar.max.y-Ar.min.y+1,hs=Ar.max.z-Ar.min.z+1,Ms=Cr.convert(Tn.format),Us=Cr.convert(Tn.type);let Hs;if(Tn.isData3DTexture)Qt.setTexture3D(Tn,0),Hs=lr.TEXTURE_3D;else if(Tn.isDataArrayTexture||Tn.isCompressedArrayTexture)Qt.setTexture2DArray(Tn,0),Hs=lr.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}lr.pixelStorei(lr.UNPACK_FLIP_Y_WEBGL,Tn.flipY),lr.pixelStorei(lr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Tn.premultiplyAlpha),lr.pixelStorei(lr.UNPACK_ALIGNMENT,Tn.unpackAlignment);const tn=lr.getParameter(lr.UNPACK_ROW_LENGTH),Ao=lr.getParameter(lr.UNPACK_IMAGE_HEIGHT),mn=lr.getParameter(lr.UNPACK_SKIP_PIXELS),Rn=lr.getParameter(lr.UNPACK_SKIP_ROWS),Un=lr.getParameter(lr.UNPACK_SKIP_IMAGES),Dn=Pn.isCompressedTexture?Pn.mipmaps[Or]:Pn.image;lr.pixelStorei(lr.UNPACK_ROW_LENGTH,Dn.width),lr.pixelStorei(lr.UNPACK_IMAGE_HEIGHT,Dn.height),lr.pixelStorei(lr.UNPACK_SKIP_PIXELS,Ar.min.x),lr.pixelStorei(lr.UNPACK_SKIP_ROWS,Ar.min.y),lr.pixelStorei(lr.UNPACK_SKIP_IMAGES,Ar.min.z),Pn.isDataTexture||Pn.isData3DTexture?lr.texSubImage3D(Hs,Or,_n.x,_n.y,_n.z,ds,_i,hs,Ms,Us,Dn.data):Pn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),lr.compressedTexSubImage3D(Hs,Or,_n.x,_n.y,_n.z,ds,_i,hs,Ms,Dn.data)):lr.texSubImage3D(Hs,Or,_n.x,_n.y,_n.z,ds,_i,hs,Ms,Us,Dn),lr.pixelStorei(lr.UNPACK_ROW_LENGTH,tn),lr.pixelStorei(lr.UNPACK_IMAGE_HEIGHT,Ao),lr.pixelStorei(lr.UNPACK_SKIP_PIXELS,mn),lr.pixelStorei(lr.UNPACK_SKIP_ROWS,Rn),lr.pixelStorei(lr.UNPACK_SKIP_IMAGES,Un),Or===0&&Tn.generateMipmaps&&lr.generateMipmap(Hs),$r.unbindTexture()},this.initTexture=function(Ar){Ar.isCubeTexture?Qt.setTextureCube(Ar,0):Ar.isData3DTexture?Qt.setTexture3D(Ar,0):Ar.isDataArrayTexture||Ar.isCompressedArrayTexture?Qt.setTexture2DArray(Ar,0):Qt.setTexture2D(Ar,0),$r.unbindTexture()},this.resetState=function(){It=0,At=0,Dt=null,$r.reset(),nr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(rt){this._outputColorSpace=rt;const it=this.getContext();it.drawingBufferColorSpace=rt===DisplayP3ColorSpace?"display-p3":"srgb",it.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(rt){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=rt===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(rt){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=rt}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(rt,it=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(rt),this.density=it}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(rt,it=1,st=1e3){this.isFog=!0,this.name="",this.color=new Color(rt),this.near=it,this.far=st}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(rt,it){return super.copy(rt,it),rt.background!==null&&(this.background=rt.background.clone()),rt.environment!==null&&(this.environment=rt.environment.clone()),rt.fog!==null&&(this.fog=rt.fog.clone()),this.backgroundBlurriness=rt.backgroundBlurriness,this.backgroundIntensity=rt.backgroundIntensity,rt.overrideMaterial!==null&&(this.overrideMaterial=rt.overrideMaterial.clone()),this.matrixAutoUpdate=rt.matrixAutoUpdate,this}toJSON(rt){const it=super.toJSON(rt);return this.fog!==null&&(it.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(it.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(it.object.backgroundIntensity=this.backgroundIntensity),it}}class InterleavedBuffer{constructor(rt,it){this.isInterleavedBuffer=!0,this.array=rt,this.stride=it,this.count=rt!==void 0?rt.length/it:0,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(rt){rt===!0&&this.version++}get updateRange(){return warnOnce("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(rt){return this.usage=rt,this}addUpdateRange(rt,it){this.updateRanges.push({start:rt,count:it})}clearUpdateRanges(){this.updateRanges.length=0}copy(rt){return this.array=new rt.array.constructor(rt.array),this.count=rt.count,this.stride=rt.stride,this.usage=rt.usage,this}copyAt(rt,it,st){rt*=this.stride,st*=it.stride;for(let lt=0,ct=this.stride;lt<ct;lt++)this.array[rt+lt]=it.array[st+lt];return this}set(rt,it=0){return this.array.set(rt,it),this}clone(rt){rt.arrayBuffers===void 0&&(rt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),rt.arrayBuffers[this.array.buffer._uuid]===void 0&&(rt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const it=new this.array.constructor(rt.arrayBuffers[this.array.buffer._uuid]),st=new this.constructor(it,this.stride);return st.setUsage(this.usage),st}onUpload(rt){return this.onUploadCallback=rt,this}toJSON(rt){return rt.arrayBuffers===void 0&&(rt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),rt.arrayBuffers[this.array.buffer._uuid]===void 0&&(rt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(rt,it,st,lt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=rt,this.itemSize=it,this.offset=st,this.normalized=lt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(rt){this.data.needsUpdate=rt}applyMatrix4(rt){for(let it=0,st=this.data.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.applyMatrix4(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(rt){for(let it=0,st=this.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.applyNormalMatrix(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(rt){for(let it=0,st=this.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.transformDirection(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}getComponent(rt,it){let st=this.array[rt*this.data.stride+this.offset+it];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(rt,it,st){return this.normalized&&(st=normalize(st,this.array)),this.data.array[rt*this.data.stride+this.offset+it]=st,this}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset]=it,this}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+1]=it,this}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+2]=it,this}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+3]=it,this}getX(rt){let it=this.data.array[rt*this.data.stride+this.offset];return this.normalized&&(it=denormalize(it,this.array)),it}getY(rt){let it=this.data.array[rt*this.data.stride+this.offset+1];return this.normalized&&(it=denormalize(it,this.array)),it}getZ(rt){let it=this.data.array[rt*this.data.stride+this.offset+2];return this.normalized&&(it=denormalize(it,this.array)),it}getW(rt){let it=this.data.array[rt*this.data.stride+this.offset+3];return this.normalized&&(it=denormalize(it,this.array)),it}setXY(rt,it,st){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this}setXYZ(rt,it,st,lt){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this.data.array[rt+2]=lt,this}setXYZW(rt,it,st,lt,ct){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this.data.array[rt+2]=lt,this.data.array[rt+3]=ct,this}clone(rt){if(rt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const it=[];for(let st=0;st<this.count;st++){const lt=st*this.data.stride+this.offset;for(let ct=0;ct<this.itemSize;ct++)it.push(this.data.array[lt+ct])}return new BufferAttribute(new this.array.constructor(it),this.itemSize,this.normalized)}else return rt.interleavedBuffers===void 0&&(rt.interleavedBuffers={}),rt.interleavedBuffers[this.data.uuid]===void 0&&(rt.interleavedBuffers[this.data.uuid]=this.data.clone(rt)),new InterleavedBufferAttribute(rt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(rt){if(rt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const it=[];for(let st=0;st<this.count;st++){const lt=st*this.data.stride+this.offset;for(let ct=0;ct<this.itemSize;ct++)it.push(this.data.array[lt+ct])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:it,normalized:this.normalized}}else return rt.interleavedBuffers===void 0&&(rt.interleavedBuffers={}),rt.interleavedBuffers[this.data.uuid]===void 0&&(rt.interleavedBuffers[this.data.uuid]=this.data.toJSON(rt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(rt){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.alphaMap=rt.alphaMap,this.rotation=rt.rotation,this.sizeAttenuation=rt.sizeAttenuation,this.fog=rt.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$2=new Vector3,_vB$2=new Vector3,_vC$2=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(rt=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const it=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),st=new InterleavedBuffer(it,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(st,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(st,2,3,!1))}this.geometry=_geometry,this.material=rt,this.center=new Vector2(.5,.5)}raycast(rt,it){rt.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(rt.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(rt.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),rt.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const st=this.material.rotation;let lt,ct;st!==0&&(ct=Math.cos(st),lt=Math.sin(st));const ut=this.center;transformVertex(_vA$2.set(-.5,-.5,0),_mvPosition,ut,_worldScale,lt,ct),transformVertex(_vB$2.set(.5,-.5,0),_mvPosition,ut,_worldScale,lt,ct),transformVertex(_vC$2.set(.5,.5,0),_mvPosition,ut,_worldScale,lt,ct),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let dt=rt.ray.intersectTriangle(_vA$2,_vB$2,_vC$2,!1,_intersectPoint);if(dt===null&&(transformVertex(_vB$2.set(-.5,.5,0),_mvPosition,ut,_worldScale,lt,ct),_uvB.set(0,1),dt=rt.ray.intersectTriangle(_vA$2,_vC$2,_vB$2,!1,_intersectPoint),dt===null))return;const ht=rt.ray.origin.distanceTo(_intersectPoint);ht<rt.near||ht>rt.far||it.push({distance:ht,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA$2,_vB$2,_vC$2,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(rt,it){return super.copy(rt,it),rt.center!==void 0&&this.center.copy(rt.center),this.material=rt.material,this}}function transformVertex(nt,rt,it,st,lt,ct){_alignedPosition.subVectors(nt,it).addScalar(.5).multiply(st),lt!==void 0?(_rotatedPosition.x=ct*_alignedPosition.x-lt*_alignedPosition.y,_rotatedPosition.y=lt*_alignedPosition.x+ct*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),nt.copy(rt),nt.x+=_rotatedPosition.x,nt.y+=_rotatedPosition.y,nt.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(rt){super.copy(rt,!1);const it=rt.levels;for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];this.addLevel(ct.object.clone(),ct.distance,ct.hysteresis)}return this.autoUpdate=rt.autoUpdate,this}addLevel(rt,it=0,st=0){it=Math.abs(it);const lt=this.levels;let ct;for(ct=0;ct<lt.length&&!(it<lt[ct].distance);ct++);return lt.splice(ct,0,{distance:it,hysteresis:st,object:rt}),this.add(rt),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(rt){const it=this.levels;if(it.length>0){let st,lt;for(st=1,lt=it.length;st<lt;st++){let ct=it[st].distance;if(it[st].object.visible&&(ct-=ct*it[st].hysteresis),rt<ct)break}return it[st-1].object}return null}raycast(rt,it){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const lt=rt.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(lt).raycast(rt,it)}}update(rt){const it=this.levels;if(it.length>1){_v1$2.setFromMatrixPosition(rt.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const st=_v1$2.distanceTo(_v2$1)/rt.zoom;it[0].object.visible=!0;let lt,ct;for(lt=1,ct=it.length;lt<ct;lt++){let ut=it[lt].distance;if(it[lt].object.visible&&(ut-=ut*it[lt].hysteresis),st>=ut)it[lt-1].object.visible=!1,it[lt].object.visible=!0;else break}for(this._currentLevel=lt-1;lt<ct;lt++)it[lt].object.visible=!1}}toJSON(rt){const it=super.toJSON(rt);this.autoUpdate===!1&&(it.object.autoUpdate=!1),it.object.levels=[];const st=this.levels;for(let lt=0,ct=st.length;lt<ct;lt++){const ut=st[lt];it.object.levels.push({object:ut.object.uuid,distance:ut.distance,hysteresis:ut.hysteresis})}return it}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(rt,it){super(rt,it),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const rt=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const it=rt.getAttribute("position");for(let st=0;st<it.count;st++)this.getVertexPosition(st,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const rt=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const it=rt.getAttribute("position");for(let st=0;st<it.count;st++)this.getVertexPosition(st,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(rt,it){return super.copy(rt,it),this.bindMode=rt.bindMode,this.bindMatrix.copy(rt.bindMatrix),this.bindMatrixInverse.copy(rt.bindMatrixInverse),this.skeleton=rt.skeleton,rt.boundingBox!==null&&(this.boundingBox=rt.boundingBox.clone()),rt.boundingSphere!==null&&(this.boundingSphere=rt.boundingSphere.clone()),this}raycast(rt,it){const st=this.material,lt=this.matrixWorld;st!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(lt),rt.ray.intersectsSphere(_sphere$4)!==!1&&(_inverseMatrix$2.copy(lt).invert(),_ray$2.copy(rt.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(rt,it,_ray$2)))}getVertexPosition(rt,it){return super.getVertexPosition(rt,it),this.applyBoneTransform(rt,it),it}bind(rt,it){this.skeleton=rt,it===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),it=this.matrixWorld),this.bindMatrix.copy(it),this.bindMatrixInverse.copy(it).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const rt=new Vector4,it=this.geometry.attributes.skinWeight;for(let st=0,lt=it.count;st<lt;st++){rt.fromBufferAttribute(it,st);const ct=1/rt.manhattanLength();ct!==1/0?rt.multiplyScalar(ct):rt.set(1,0,0,0),it.setXYZW(st,rt.x,rt.y,rt.z,rt.w)}}updateMatrixWorld(rt){super.updateMatrixWorld(rt),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(rt,it){const st=this.skeleton,lt=this.geometry;_skinIndex.fromBufferAttribute(lt.attributes.skinIndex,rt),_skinWeight.fromBufferAttribute(lt.attributes.skinWeight,rt),_basePosition.copy(it).applyMatrix4(this.bindMatrix),it.set(0,0,0);for(let ct=0;ct<4;ct++){const ut=_skinWeight.getComponent(ct);if(ut!==0){const dt=_skinIndex.getComponent(ct);_matrix4.multiplyMatrices(st.bones[dt].matrixWorld,st.boneInverses[dt]),it.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),ut)}}return it.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(rt=null,it=1,st=1,lt,ct,ut,dt,ht,pt=NearestFilter,ft=NearestFilter,mt,gt){super(null,ut,dt,ht,pt,ft,lt,ct,mt,gt),this.isDataTexture=!0,this.image={data:rt,width:it,height:st},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(rt=[],it=[]){this.uuid=generateUUID(),this.bones=rt.slice(0),this.boneInverses=it,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const rt=this.bones,it=this.boneInverses;if(this.boneMatrices=new Float32Array(rt.length*16),it.length===0)this.calculateInverses();else if(rt.length!==it.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let st=0,lt=this.bones.length;st<lt;st++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let rt=0,it=this.bones.length;rt<it;rt++){const st=new Matrix4;this.bones[rt]&&st.copy(this.bones[rt].matrixWorld).invert(),this.boneInverses.push(st)}}pose(){for(let rt=0,it=this.bones.length;rt<it;rt++){const st=this.bones[rt];st&&st.matrixWorld.copy(this.boneInverses[rt]).invert()}for(let rt=0,it=this.bones.length;rt<it;rt++){const st=this.bones[rt];st&&(st.parent&&st.parent.isBone?(st.matrix.copy(st.parent.matrixWorld).invert(),st.matrix.multiply(st.matrixWorld)):st.matrix.copy(st.matrixWorld),st.matrix.decompose(st.position,st.quaternion,st.scale))}}update(){const rt=this.bones,it=this.boneInverses,st=this.boneMatrices,lt=this.boneTexture;for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=rt[ct]?rt[ct].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(dt,it[ct]),_offsetMatrix.toArray(st,ct*16)}lt!==null&&(lt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let rt=Math.sqrt(this.bones.length*4);rt=Math.ceil(rt/4)*4,rt=Math.max(rt,4);const it=new Float32Array(rt*rt*4);it.set(this.boneMatrices);const st=new DataTexture(it,rt,rt,RGBAFormat,FloatType);return st.needsUpdate=!0,this.boneMatrices=it,this.boneTexture=st,this}getBoneByName(rt){for(let it=0,st=this.bones.length;it<st;it++){const lt=this.bones[it];if(lt.name===rt)return lt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(rt,it){this.uuid=rt.uuid;for(let st=0,lt=rt.bones.length;st<lt;st++){const ct=rt.bones[st];let ut=it[ct];ut===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ct),ut=new Bone),this.bones.push(ut),this.boneInverses.push(new Matrix4().fromArray(rt.boneInverses[st]))}return this.init(),this}toJSON(){const rt={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};rt.uuid=this.uuid;const it=this.bones,st=this.boneInverses;for(let lt=0,ct=it.length;lt<ct;lt++){const ut=it[lt];rt.bones.push(ut.uuid);const dt=st[lt];rt.boneInverses.push(dt.toArray())}return rt}}class InstancedBufferAttribute extends BufferAttribute{constructor(rt,it,st,lt=1){super(rt,it,st),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=lt}copy(rt){return super.copy(rt),this.meshPerAttribute=rt.meshPerAttribute,this}toJSON(){const rt=super.toJSON();return rt.meshPerAttribute=this.meshPerAttribute,rt.isInstancedBufferAttribute=!0,rt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(rt,it,st){super(rt,it),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(st*16),16),this.instanceColor=null,this.count=st,this.boundingBox=null,this.boundingSphere=null;for(let lt=0;lt<st;lt++)this.setMatrixAt(lt,_identity)}computeBoundingBox(){const rt=this.geometry,it=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),rt.boundingBox===null&&rt.computeBoundingBox(),this.boundingBox.makeEmpty();for(let st=0;st<it;st++)this.getMatrixAt(st,_instanceLocalMatrix),_box3.copy(rt.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const rt=this.geometry,it=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),rt.boundingSphere===null&&rt.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let st=0;st<it;st++)this.getMatrixAt(st,_instanceLocalMatrix),_sphere$3.copy(rt.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(rt,it){return super.copy(rt,it),this.instanceMatrix.copy(rt.instanceMatrix),rt.instanceColor!==null&&(this.instanceColor=rt.instanceColor.clone()),this.count=rt.count,rt.boundingBox!==null&&(this.boundingBox=rt.boundingBox.clone()),rt.boundingSphere!==null&&(this.boundingSphere=rt.boundingSphere.clone()),this}getColorAt(rt,it){it.fromArray(this.instanceColor.array,rt*3)}getMatrixAt(rt,it){it.fromArray(this.instanceMatrix.array,rt*16)}raycast(rt,it){const st=this.matrixWorld,lt=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(st),rt.ray.intersectsSphere(_sphere$3)!==!1))for(let ct=0;ct<lt;ct++){this.getMatrixAt(ct,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(st,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(rt,_instanceIntersects);for(let ut=0,dt=_instanceIntersects.length;ut<dt;ut++){const ht=_instanceIntersects[ut];ht.instanceId=ct,ht.object=this,it.push(ht)}_instanceIntersects.length=0}}setColorAt(rt,it){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),it.toArray(this.instanceColor.array,rt*3)}setMatrixAt(rt,it){it.toArray(this.instanceMatrix.array,rt*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function sortOpaque(nt,rt){return nt.z-rt.z}function sortTransparent(nt,rt){return rt.z-nt.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(rt,it){const st=this.pool,lt=this.list;this.index>=st.length&&st.push({start:-1,count:-1,z:-1});const ct=st[this.index];lt.push(ct),this.index++,ct.start=rt.start,ct.count=rt.count,ct.z=it}reset(){this.list.length=0,this.index=0}}const ID_ATTR_NAME="batchId",_matrix=new Matrix4,_invMatrixWorld=new Matrix4,_identityMatrix=new Matrix4,_projScreenMatrix$2=new Matrix4,_frustum=new Frustum,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(nt,rt,it=0){const st=rt.itemSize;if(nt.isInterleavedBufferAttribute||nt.array.constructor!==rt.array.constructor){const lt=nt.count;for(let ct=0;ct<lt;ct++)for(let ut=0;ut<st;ut++)rt.setComponent(ct+it,ut,nt.getComponent(ct,ut))}else rt.array.set(nt.array,it*st);rt.needsUpdate=!0}class BatchedMesh extends Mesh{get maxGeometryCount(){return this._maxGeometryCount}constructor(rt,it,st=it*2,lt){super(new BufferGeometry,lt),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=rt,this._maxVertexCount=it,this._maxIndexCount=st,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(rt),this._multiDrawStarts=new Int32Array(rt),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let rt=Math.sqrt(this._maxGeometryCount*4);rt=Math.ceil(rt/4)*4,rt=Math.max(rt,4);const it=new Float32Array(rt*rt*4),st=new DataTexture(it,rt,rt,RGBAFormat,FloatType);this._matricesTexture=st}_initializeGeometry(rt){const it=this.geometry,st=this._maxVertexCount,lt=this._maxGeometryCount,ct=this._maxIndexCount;if(this._geometryInitialized===!1){for(const dt in rt.attributes){const ht=rt.getAttribute(dt),{array:pt,itemSize:ft,normalized:mt}=ht,gt=new pt.constructor(st*ft),xt=new ht.constructor(gt,ft,mt);xt.setUsage(ht.usage),it.setAttribute(dt,xt)}if(rt.getIndex()!==null){const dt=st>65536?new Uint32Array(ct):new Uint16Array(ct);it.setIndex(new BufferAttribute(dt,1))}const ut=lt>65536?new Uint32Array(st):new Uint16Array(st);it.setAttribute(ID_ATTR_NAME,new BufferAttribute(ut,1)),this._geometryInitialized=!0}}_validateGeometry(rt){if(rt.getAttribute(ID_ATTR_NAME))throw new Error(`BatchedMesh: Geometry cannot use attribute "${ID_ATTR_NAME}"`);const it=this.geometry;if(!!rt.getIndex()!=!!it.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const st in it.attributes){if(st===ID_ATTR_NAME)continue;if(!rt.hasAttribute(st))throw new Error(`BatchedMesh: Added geometry missing "${st}". All geometries must have consistent attributes.`);const lt=rt.getAttribute(st),ct=it.getAttribute(st);if(lt.itemSize!==ct.itemSize||lt.normalized!==ct.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(rt){return this.customSort=rt,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const rt=this._geometryCount,it=this.boundingBox,st=this._active;it.makeEmpty();for(let lt=0;lt<rt;lt++)st[lt]!==!1&&(this.getMatrixAt(lt,_matrix),this.getBoundingBoxAt(lt,_box$1).applyMatrix4(_matrix),it.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const rt=this._geometryCount,it=this.boundingSphere,st=this._active;it.makeEmpty();for(let lt=0;lt<rt;lt++)st[lt]!==!1&&(this.getMatrixAt(lt,_matrix),this.getBoundingSphereAt(lt,_sphere$2).applyMatrix4(_matrix),it.union(_sphere$2))}addGeometry(rt,it=-1,st=-1){if(this._initializeGeometry(rt),this._validateGeometry(rt),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const lt={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let ct=null;const ut=this._reservedRanges,dt=this._drawRanges,ht=this._bounds;this._geometryCount!==0&&(ct=ut[ut.length-1]),it===-1?lt.vertexCount=rt.getAttribute("position").count:lt.vertexCount=it,ct===null?lt.vertexStart=0:lt.vertexStart=ct.vertexStart+ct.vertexCount;const pt=rt.getIndex(),ft=pt!==null;if(ft&&(st===-1?lt.indexCount=pt.count:lt.indexCount=st,ct===null?lt.indexStart=0:lt.indexStart=ct.indexStart+ct.indexCount),lt.indexStart!==-1&&lt.indexStart+lt.indexCount>this._maxIndexCount||lt.vertexStart+lt.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const mt=this._visibility,gt=this._active,xt=this._matricesTexture,yt=this._matricesTexture.image.data;mt.push(!0),gt.push(!0);const vt=this._geometryCount;this._geometryCount++,_identityMatrix.toArray(yt,vt*16),xt.needsUpdate=!0,ut.push(lt),dt.push({start:ft?lt.indexStart:lt.vertexStart,count:-1}),ht.push({boxInitialized:!1,box:new Box3,sphereInitialized:!1,sphere:new Sphere});const St=this.geometry.getAttribute(ID_ATTR_NAME);for(let Et=0;Et<lt.vertexCount;Et++)St.setX(lt.vertexStart+Et,vt);return St.needsUpdate=!0,this.setGeometryAt(vt,rt),vt}setGeometryAt(rt,it){if(rt>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(it);const st=this.geometry,lt=st.getIndex()!==null,ct=st.getIndex(),ut=it.getIndex(),dt=this._reservedRanges[rt];if(lt&&ut.count>dt.indexCount||it.attributes.position.count>dt.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const ht=dt.vertexStart,pt=dt.vertexCount;for(const xt in st.attributes){if(xt===ID_ATTR_NAME)continue;const yt=it.getAttribute(xt),vt=st.getAttribute(xt);copyAttributeData(yt,vt,ht);const St=yt.itemSize;for(let Et=yt.count,wt=pt;Et<wt;Et++){const Rt=ht+Et;for(let Tt=0;Tt<St;Tt++)vt.setComponent(Rt,Tt,0)}vt.needsUpdate=!0}if(lt){const xt=dt.indexStart;for(let yt=0;yt<ut.count;yt++)ct.setX(xt+yt,ht+ut.getX(yt));for(let yt=ut.count,vt=dt.indexCount;yt<vt;yt++)ct.setX(xt+yt,ht);ct.needsUpdate=!0}const ft=this._bounds[rt];it.boundingBox!==null?(ft.box.copy(it.boundingBox),ft.boxInitialized=!0):ft.boxInitialized=!1,it.boundingSphere!==null?(ft.sphere.copy(it.boundingSphere),ft.sphereInitialized=!0):ft.sphereInitialized=!1;const mt=this._drawRanges[rt],gt=it.getAttribute("position");return mt.count=lt?ut.count:gt.count,this._visibilityChanged=!0,rt}deleteGeometry(rt){const it=this._active;return rt>=it.length||it[rt]===!1?this:(it[rt]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(rt,it){if(this._active[rt]===!1)return null;const lt=this._bounds[rt],ct=lt.box,ut=this.geometry;if(lt.boxInitialized===!1){ct.makeEmpty();const dt=ut.index,ht=ut.attributes.position,pt=this._drawRanges[rt];for(let ft=pt.start,mt=pt.start+pt.count;ft<mt;ft++){let gt=ft;dt&&(gt=dt.getX(gt)),ct.expandByPoint(_vector$5.fromBufferAttribute(ht,gt))}lt.boxInitialized=!0}return it.copy(ct),it}getBoundingSphereAt(rt,it){if(this._active[rt]===!1)return null;const lt=this._bounds[rt],ct=lt.sphere,ut=this.geometry;if(lt.sphereInitialized===!1){ct.makeEmpty(),this.getBoundingBoxAt(rt,_box$1),_box$1.getCenter(ct.center);const dt=ut.index,ht=ut.attributes.position,pt=this._drawRanges[rt];let ft=0;for(let mt=pt.start,gt=pt.start+pt.count;mt<gt;mt++){let xt=mt;dt&&(xt=dt.getX(xt)),_vector$5.fromBufferAttribute(ht,xt),ft=Math.max(ft,ct.center.distanceToSquared(_vector$5))}ct.radius=Math.sqrt(ft),lt.sphereInitialized=!0}return it.copy(ct),it}setMatrixAt(rt,it){const st=this._active,lt=this._matricesTexture,ct=this._matricesTexture.image.data,ut=this._geometryCount;return rt>=ut||st[rt]===!1?this:(it.toArray(ct,rt*16),lt.needsUpdate=!0,this)}getMatrixAt(rt,it){const st=this._active,lt=this._matricesTexture.image.data,ct=this._geometryCount;return rt>=ct||st[rt]===!1?null:it.fromArray(lt,rt*16)}setVisibleAt(rt,it){const st=this._visibility,lt=this._active,ct=this._geometryCount;return rt>=ct||lt[rt]===!1||st[rt]===it?this:(st[rt]=it,this._visibilityChanged=!0,this)}getVisibleAt(rt){const it=this._visibility,st=this._active,lt=this._geometryCount;return rt>=lt||st[rt]===!1?!1:it[rt]}raycast(rt,it){const st=this._visibility,lt=this._active,ct=this._drawRanges,ut=this._geometryCount,dt=this.matrixWorld,ht=this.geometry;_mesh.material=this.material,_mesh.geometry.index=ht.index,_mesh.geometry.attributes=ht.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let pt=0;pt<ut;pt++){if(!st[pt]||!lt[pt])continue;const ft=ct[pt];_mesh.geometry.setDrawRange(ft.start,ft.count),this.getMatrixAt(pt,_mesh.matrixWorld).premultiply(dt),this.getBoundingBoxAt(pt,_mesh.geometry.boundingBox),this.getBoundingSphereAt(pt,_mesh.geometry.boundingSphere),_mesh.raycast(rt,_batchIntersects);for(let mt=0,gt=_batchIntersects.length;mt<gt;mt++){const xt=_batchIntersects[mt];xt.object=this,xt.batchId=pt,it.push(xt)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(rt){return super.copy(rt),this.geometry=rt.geometry.clone(),this.perObjectFrustumCulled=rt.perObjectFrustumCulled,this.sortObjects=rt.sortObjects,this.boundingBox=rt.boundingBox!==null?rt.boundingBox.clone():null,this.boundingSphere=rt.boundingSphere!==null?rt.boundingSphere.clone():null,this._drawRanges=rt._drawRanges.map(it=>({...it})),this._reservedRanges=rt._reservedRanges.map(it=>({...it})),this._visibility=rt._visibility.slice(),this._active=rt._active.slice(),this._bounds=rt._bounds.map(it=>({boxInitialized:it.boxInitialized,box:it.box.clone(),sphereInitialized:it.sphereInitialized,sphere:it.sphere.clone()})),this._maxGeometryCount=rt._maxGeometryCount,this._maxVertexCount=rt._maxVertexCount,this._maxIndexCount=rt._maxIndexCount,this._geometryInitialized=rt._geometryInitialized,this._geometryCount=rt._geometryCount,this._multiDrawCounts=rt._multiDrawCounts.slice(),this._multiDrawStarts=rt._multiDrawStarts.slice(),this._matricesTexture=rt._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(rt,it,st,lt,ct){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const ut=lt.getIndex(),dt=ut===null?1:ut.array.BYTES_PER_ELEMENT,ht=this._active,pt=this._visibility,ft=this._multiDrawStarts,mt=this._multiDrawCounts,gt=this._drawRanges,xt=this.perObjectFrustumCulled;xt&&(_projScreenMatrix$2.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_projScreenMatrix$2,rt.coordinateSystem));let yt=0;if(this.sortObjects){_invMatrixWorld.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(st.matrixWorld).applyMatrix4(_invMatrixWorld);for(let Et=0,wt=pt.length;Et<wt;Et++)if(pt[Et]&&ht[Et]){this.getMatrixAt(Et,_matrix),this.getBoundingSphereAt(Et,_sphere$2).applyMatrix4(_matrix);let Rt=!1;if(xt&&(Rt=!_frustum.intersectsSphere(_sphere$2)),!Rt){const Tt=_vector$5.distanceTo(_sphere$2.center);_renderList.push(gt[Et],Tt)}}const vt=_renderList.list,St=this.customSort;St===null?vt.sort(ct.transparent?sortTransparent:sortOpaque):St.call(this,vt,st);for(let Et=0,wt=vt.length;Et<wt;Et++){const Rt=vt[Et];ft[yt]=Rt.start*dt,mt[yt]=Rt.count,yt++}_renderList.reset()}else for(let vt=0,St=pt.length;vt<St;vt++)if(pt[vt]&&ht[vt]){let Et=!1;if(xt&&(this.getMatrixAt(vt,_matrix),this.getBoundingSphereAt(vt,_sphere$2).applyMatrix4(_matrix),Et=!_frustum.intersectsSphere(_sphere$2)),!Et){const wt=gt[vt];ft[yt]=wt.start*dt,mt[yt]=wt.count,yt++}}this._multiDrawCount=yt,this._visibilityChanged=!1}onBeforeShadow(rt,it,st,lt,ct,ut){this.onBeforeRender(rt,null,lt,ct,ut)}}class LineBasicMaterial extends Material{constructor(rt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.linewidth=rt.linewidth,this.linecap=rt.linecap,this.linejoin=rt.linejoin,this.fog=rt.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(rt=new BufferGeometry,it=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}computeLineDistances(){const rt=this.geometry;if(rt.index===null){const it=rt.attributes.position,st=[0];for(let lt=1,ct=it.count;lt<ct;lt++)_start$1.fromBufferAttribute(it,lt-1),_end$1.fromBufferAttribute(it,lt),st[lt]=st[lt-1],st[lt]+=_start$1.distanceTo(_end$1);rt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(rt,it){const st=this.geometry,lt=this.matrixWorld,ct=rt.params.Line.threshold,ut=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$1.copy(st.boundingSphere),_sphere$1.applyMatrix4(lt),_sphere$1.radius+=ct,rt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(lt).invert(),_ray$1.copy(rt.ray).applyMatrix4(_inverseMatrix$1);const dt=ct/((this.scale.x+this.scale.y+this.scale.z)/3),ht=dt*dt,pt=new Vector3,ft=new Vector3,mt=new Vector3,gt=new Vector3,xt=this.isLineSegments?2:1,yt=st.index,St=st.attributes.position;if(yt!==null){const Et=Math.max(0,ut.start),wt=Math.min(yt.count,ut.start+ut.count);for(let Rt=Et,Tt=wt-1;Rt<Tt;Rt+=xt){const It=yt.getX(Rt),At=yt.getX(Rt+1);if(pt.fromBufferAttribute(St,It),ft.fromBufferAttribute(St,At),_ray$1.distanceSqToSegment(pt,ft,gt,mt)>ht)continue;gt.applyMatrix4(this.matrixWorld);const jt=rt.ray.origin.distanceTo(gt);jt<rt.near||jt>rt.far||it.push({distance:jt,point:mt.clone().applyMatrix4(this.matrixWorld),index:Rt,face:null,faceIndex:null,object:this})}}else{const Et=Math.max(0,ut.start),wt=Math.min(St.count,ut.start+ut.count);for(let Rt=Et,Tt=wt-1;Rt<Tt;Rt+=xt){if(pt.fromBufferAttribute(St,Rt),ft.fromBufferAttribute(St,Rt+1),_ray$1.distanceSqToSegment(pt,ft,gt,mt)>ht)continue;gt.applyMatrix4(this.matrixWorld);const At=rt.ray.origin.distanceTo(gt);At<rt.near||At>rt.far||it.push({distance:At,point:mt.clone().applyMatrix4(this.matrixWorld),index:Rt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(rt,it){super(rt,it),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const rt=this.geometry;if(rt.index===null){const it=rt.attributes.position,st=[];for(let lt=0,ct=it.count;lt<ct;lt+=2)_start.fromBufferAttribute(it,lt),_end.fromBufferAttribute(it,lt+1),st[lt]=lt===0?0:st[lt-1],st[lt+1]=st[lt]+_start.distanceTo(_end);rt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(rt,it){super(rt,it),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(rt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.alphaMap=rt.alphaMap,this.size=rt.size,this.sizeAttenuation=rt.sizeAttenuation,this.fog=rt.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(rt=new BufferGeometry,it=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}raycast(rt,it){const st=this.geometry,lt=this.matrixWorld,ct=rt.params.Points.threshold,ut=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere.copy(st.boundingSphere),_sphere.applyMatrix4(lt),_sphere.radius+=ct,rt.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(lt).invert(),_ray$4.copy(rt.ray).applyMatrix4(_inverseMatrix);const dt=ct/((this.scale.x+this.scale.y+this.scale.z)/3),ht=dt*dt,pt=st.index,mt=st.attributes.position;if(pt!==null){const gt=Math.max(0,ut.start),xt=Math.min(pt.count,ut.start+ut.count);for(let yt=gt,vt=xt;yt<vt;yt++){const St=pt.getX(yt);_position$2.fromBufferAttribute(mt,St),testPoint(_position$2,St,ht,lt,rt,it,this)}}else{const gt=Math.max(0,ut.start),xt=Math.min(mt.count,ut.start+ut.count);for(let yt=gt,vt=xt;yt<vt;yt++)_position$2.fromBufferAttribute(mt,yt),testPoint(_position$2,yt,ht,lt,rt,it,this)}}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}}function testPoint(nt,rt,it,st,lt,ct,ut){const dt=_ray$4.distanceSqToPoint(nt);if(dt<it){const ht=new Vector3;_ray$4.closestPointToPoint(nt,ht),ht.applyMatrix4(st);const pt=lt.ray.origin.distanceTo(ht);if(pt<lt.near||pt>lt.far)return;ct.push({distance:pt,distanceToRay:Math.sqrt(dt),point:ht,index:rt,face:null,object:ut})}}class VideoTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,pt){super(rt,it,st,lt,ct,ut,dt,ht,pt),this.isVideoTexture=!0,this.minFilter=ut!==void 0?ut:LinearFilter,this.magFilter=ct!==void 0?ct:LinearFilter,this.generateMipmaps=!1;const ft=this;function mt(){ft.needsUpdate=!0,rt.requestVideoFrameCallback(mt)}"requestVideoFrameCallback"in rt&&rt.requestVideoFrameCallback(mt)}clone(){return new this.constructor(this.image).copy(this)}update(){const rt=this.image;"requestVideoFrameCallback"in rt===!1&&rt.readyState>=rt.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(rt,it){super({width:rt,height:it}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,pt,ft,mt,gt){super(null,ut,dt,ht,pt,ft,lt,ct,mt,gt),this.isCompressedTexture=!0,this.image={width:it,height:st},this.mipmaps=rt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(rt,it,st,lt,ct,ut){super(rt,it,st,ct,ut),this.isCompressedArrayTexture=!0,this.image.depth=lt,this.wrapR=ClampToEdgeWrapping}}class CompressedCubeTexture extends CompressedTexture{constructor(rt,it,st){super(void 0,rt[0].width,rt[0].height,it,st,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=rt}}class CanvasTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,pt){super(rt,it,st,lt,ct,ut,dt,ht,pt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(rt,it){const st=this.getUtoTmapping(rt);return this.getPoint(st,it)}getPoints(rt=5){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPoint(st/rt));return it}getSpacedPoints(rt=5){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPointAt(st/rt));return it}getLength(){const rt=this.getLengths();return rt[rt.length-1]}getLengths(rt=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===rt+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const it=[];let st,lt=this.getPoint(0),ct=0;it.push(0);for(let ut=1;ut<=rt;ut++)st=this.getPoint(ut/rt),ct+=st.distanceTo(lt),it.push(ct),lt=st;return this.cacheArcLengths=it,it}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(rt,it){const st=this.getLengths();let lt=0;const ct=st.length;let ut;it?ut=it:ut=rt*st[ct-1];let dt=0,ht=ct-1,pt;for(;dt<=ht;)if(lt=Math.floor(dt+(ht-dt)/2),pt=st[lt]-ut,pt<0)dt=lt+1;else if(pt>0)ht=lt-1;else{ht=lt;break}if(lt=ht,st[lt]===ut)return lt/(ct-1);const ft=st[lt],gt=st[lt+1]-ft,xt=(ut-ft)/gt;return(lt+xt)/(ct-1)}getTangent(rt,it){let lt=rt-1e-4,ct=rt+1e-4;lt<0&&(lt=0),ct>1&&(ct=1);const ut=this.getPoint(lt),dt=this.getPoint(ct),ht=it||(ut.isVector2?new Vector2:new Vector3);return ht.copy(dt).sub(ut).normalize(),ht}getTangentAt(rt,it){const st=this.getUtoTmapping(rt);return this.getTangent(st,it)}computeFrenetFrames(rt,it){const st=new Vector3,lt=[],ct=[],ut=[],dt=new Vector3,ht=new Matrix4;for(let xt=0;xt<=rt;xt++){const yt=xt/rt;lt[xt]=this.getTangentAt(yt,new Vector3)}ct[0]=new Vector3,ut[0]=new Vector3;let pt=Number.MAX_VALUE;const ft=Math.abs(lt[0].x),mt=Math.abs(lt[0].y),gt=Math.abs(lt[0].z);ft<=pt&&(pt=ft,st.set(1,0,0)),mt<=pt&&(pt=mt,st.set(0,1,0)),gt<=pt&&st.set(0,0,1),dt.crossVectors(lt[0],st).normalize(),ct[0].crossVectors(lt[0],dt),ut[0].crossVectors(lt[0],ct[0]);for(let xt=1;xt<=rt;xt++){if(ct[xt]=ct[xt-1].clone(),ut[xt]=ut[xt-1].clone(),dt.crossVectors(lt[xt-1],lt[xt]),dt.length()>Number.EPSILON){dt.normalize();const yt=Math.acos(clamp(lt[xt-1].dot(lt[xt]),-1,1));ct[xt].applyMatrix4(ht.makeRotationAxis(dt,yt))}ut[xt].crossVectors(lt[xt],ct[xt])}if(it===!0){let xt=Math.acos(clamp(ct[0].dot(ct[rt]),-1,1));xt/=rt,lt[0].dot(dt.crossVectors(ct[0],ct[rt]))>0&&(xt=-xt);for(let yt=1;yt<=rt;yt++)ct[yt].applyMatrix4(ht.makeRotationAxis(lt[yt],xt*yt)),ut[yt].crossVectors(lt[yt],ct[yt])}return{tangents:lt,normals:ct,binormals:ut}}clone(){return new this.constructor().copy(this)}copy(rt){return this.arcLengthDivisions=rt.arcLengthDivisions,this}toJSON(){const rt={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return rt.arcLengthDivisions=this.arcLengthDivisions,rt.type=this.type,rt}fromJSON(rt){return this.arcLengthDivisions=rt.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(rt=0,it=0,st=1,lt=1,ct=0,ut=Math.PI*2,dt=!1,ht=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=rt,this.aY=it,this.xRadius=st,this.yRadius=lt,this.aStartAngle=ct,this.aEndAngle=ut,this.aClockwise=dt,this.aRotation=ht}getPoint(rt,it){const st=it||new Vector2,lt=Math.PI*2;let ct=this.aEndAngle-this.aStartAngle;const ut=Math.abs(ct)<Number.EPSILON;for(;ct<0;)ct+=lt;for(;ct>lt;)ct-=lt;ct<Number.EPSILON&&(ut?ct=0:ct=lt),this.aClockwise===!0&&!ut&&(ct===lt?ct=-lt:ct=ct-lt);const dt=this.aStartAngle+rt*ct;let ht=this.aX+this.xRadius*Math.cos(dt),pt=this.aY+this.yRadius*Math.sin(dt);if(this.aRotation!==0){const ft=Math.cos(this.aRotation),mt=Math.sin(this.aRotation),gt=ht-this.aX,xt=pt-this.aY;ht=gt*ft-xt*mt+this.aX,pt=gt*mt+xt*ft+this.aY}return st.set(ht,pt)}copy(rt){return super.copy(rt),this.aX=rt.aX,this.aY=rt.aY,this.xRadius=rt.xRadius,this.yRadius=rt.yRadius,this.aStartAngle=rt.aStartAngle,this.aEndAngle=rt.aEndAngle,this.aClockwise=rt.aClockwise,this.aRotation=rt.aRotation,this}toJSON(){const rt=super.toJSON();return rt.aX=this.aX,rt.aY=this.aY,rt.xRadius=this.xRadius,rt.yRadius=this.yRadius,rt.aStartAngle=this.aStartAngle,rt.aEndAngle=this.aEndAngle,rt.aClockwise=this.aClockwise,rt.aRotation=this.aRotation,rt}fromJSON(rt){return super.fromJSON(rt),this.aX=rt.aX,this.aY=rt.aY,this.xRadius=rt.xRadius,this.yRadius=rt.yRadius,this.aStartAngle=rt.aStartAngle,this.aEndAngle=rt.aEndAngle,this.aClockwise=rt.aClockwise,this.aRotation=rt.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(rt,it,st,lt,ct,ut){super(rt,it,st,st,lt,ct,ut),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let nt=0,rt=0,it=0,st=0;function lt(ct,ut,dt,ht){nt=ct,rt=dt,it=-3*ct+3*ut-2*dt-ht,st=2*ct-2*ut+dt+ht}return{initCatmullRom:function(ct,ut,dt,ht,pt){lt(ut,dt,pt*(dt-ct),pt*(ht-ut))},initNonuniformCatmullRom:function(ct,ut,dt,ht,pt,ft,mt){let gt=(ut-ct)/pt-(dt-ct)/(pt+ft)+(dt-ut)/ft,xt=(dt-ut)/ft-(ht-ut)/(ft+mt)+(ht-dt)/mt;gt*=ft,xt*=ft,lt(ut,dt,gt,xt)},calc:function(ct){const ut=ct*ct,dt=ut*ct;return nt+rt*ct+it*ut+st*dt}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(rt=[],it=!1,st="centripetal",lt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=rt,this.closed=it,this.curveType=st,this.tension=lt}getPoint(rt,it=new Vector3){const st=it,lt=this.points,ct=lt.length,ut=(ct-(this.closed?0:1))*rt;let dt=Math.floor(ut),ht=ut-dt;this.closed?dt+=dt>0?0:(Math.floor(Math.abs(dt)/ct)+1)*ct:ht===0&&dt===ct-1&&(dt=ct-2,ht=1);let pt,ft;this.closed||dt>0?pt=lt[(dt-1)%ct]:(tmp.subVectors(lt[0],lt[1]).add(lt[0]),pt=tmp);const mt=lt[dt%ct],gt=lt[(dt+1)%ct];if(this.closed||dt+2<ct?ft=lt[(dt+2)%ct]:(tmp.subVectors(lt[ct-1],lt[ct-2]).add(lt[ct-1]),ft=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const xt=this.curveType==="chordal"?.5:.25;let yt=Math.pow(pt.distanceToSquared(mt),xt),vt=Math.pow(mt.distanceToSquared(gt),xt),St=Math.pow(gt.distanceToSquared(ft),xt);vt<1e-4&&(vt=1),yt<1e-4&&(yt=vt),St<1e-4&&(St=vt),px.initNonuniformCatmullRom(pt.x,mt.x,gt.x,ft.x,yt,vt,St),py.initNonuniformCatmullRom(pt.y,mt.y,gt.y,ft.y,yt,vt,St),pz.initNonuniformCatmullRom(pt.z,mt.z,gt.z,ft.z,yt,vt,St)}else this.curveType==="catmullrom"&&(px.initCatmullRom(pt.x,mt.x,gt.x,ft.x,this.tension),py.initCatmullRom(pt.y,mt.y,gt.y,ft.y,this.tension),pz.initCatmullRom(pt.z,mt.z,gt.z,ft.z,this.tension));return st.set(px.calc(ht),py.calc(ht),pz.calc(ht)),st}copy(rt){super.copy(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(lt.clone())}return this.closed=rt.closed,this.curveType=rt.curveType,this.tension=rt.tension,this}toJSON(){const rt=super.toJSON();rt.points=[];for(let it=0,st=this.points.length;it<st;it++){const lt=this.points[it];rt.points.push(lt.toArray())}return rt.closed=this.closed,rt.curveType=this.curveType,rt.tension=this.tension,rt}fromJSON(rt){super.fromJSON(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(new Vector3().fromArray(lt))}return this.closed=rt.closed,this.curveType=rt.curveType,this.tension=rt.tension,this}}function CatmullRom(nt,rt,it,st,lt){const ct=(st-rt)*.5,ut=(lt-it)*.5,dt=nt*nt,ht=nt*dt;return(2*it-2*st+ct+ut)*ht+(-3*it+3*st-2*ct-ut)*dt+ct*nt+it}function QuadraticBezierP0(nt,rt){const it=1-nt;return it*it*rt}function QuadraticBezierP1(nt,rt){return 2*(1-nt)*nt*rt}function QuadraticBezierP2(nt,rt){return nt*nt*rt}function QuadraticBezier(nt,rt,it,st){return QuadraticBezierP0(nt,rt)+QuadraticBezierP1(nt,it)+QuadraticBezierP2(nt,st)}function CubicBezierP0(nt,rt){const it=1-nt;return it*it*it*rt}function CubicBezierP1(nt,rt){const it=1-nt;return 3*it*it*nt*rt}function CubicBezierP2(nt,rt){return 3*(1-nt)*nt*nt*rt}function CubicBezierP3(nt,rt){return nt*nt*nt*rt}function CubicBezier(nt,rt,it,st,lt){return CubicBezierP0(nt,rt)+CubicBezierP1(nt,it)+CubicBezierP2(nt,st)+CubicBezierP3(nt,lt)}class CubicBezierCurve extends Curve{constructor(rt=new Vector2,it=new Vector2,st=new Vector2,lt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=rt,this.v1=it,this.v2=st,this.v3=lt}getPoint(rt,it=new Vector2){const st=it,lt=this.v0,ct=this.v1,ut=this.v2,dt=this.v3;return st.set(CubicBezier(rt,lt.x,ct.x,ut.x,dt.x),CubicBezier(rt,lt.y,ct.y,ut.y,dt.y)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this.v3.copy(rt.v3),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt.v3=this.v3.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this.v3.fromArray(rt.v3),this}}class CubicBezierCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3,st=new Vector3,lt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=rt,this.v1=it,this.v2=st,this.v3=lt}getPoint(rt,it=new Vector3){const st=it,lt=this.v0,ct=this.v1,ut=this.v2,dt=this.v3;return st.set(CubicBezier(rt,lt.x,ct.x,ut.x,dt.x),CubicBezier(rt,lt.y,ct.y,ut.y,dt.y),CubicBezier(rt,lt.z,ct.z,ut.z,dt.z)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this.v3.copy(rt.v3),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt.v3=this.v3.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this.v3.fromArray(rt.v3),this}}class LineCurve extends Curve{constructor(rt=new Vector2,it=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=rt,this.v2=it}getPoint(rt,it=new Vector2){const st=it;return rt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(rt).add(this.v1)),st}getPointAt(rt,it){return this.getPoint(rt,it)}getTangent(rt,it=new Vector2){return it.subVectors(this.v2,this.v1).normalize()}getTangentAt(rt,it){return this.getTangent(rt,it)}copy(rt){return super.copy(rt),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class LineCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=rt,this.v2=it}getPoint(rt,it=new Vector3){const st=it;return rt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(rt).add(this.v1)),st}getPointAt(rt,it){return this.getPoint(rt,it)}getTangent(rt,it=new Vector3){return it.subVectors(this.v2,this.v1).normalize()}getTangentAt(rt,it){return this.getTangent(rt,it)}copy(rt){return super.copy(rt),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class QuadraticBezierCurve extends Curve{constructor(rt=new Vector2,it=new Vector2,st=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=rt,this.v1=it,this.v2=st}getPoint(rt,it=new Vector2){const st=it,lt=this.v0,ct=this.v1,ut=this.v2;return st.set(QuadraticBezier(rt,lt.x,ct.x,ut.x),QuadraticBezier(rt,lt.y,ct.y,ut.y)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3,st=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=rt,this.v1=it,this.v2=st}getPoint(rt,it=new Vector3){const st=it,lt=this.v0,ct=this.v1,ut=this.v2;return st.set(QuadraticBezier(rt,lt.x,ct.x,ut.x),QuadraticBezier(rt,lt.y,ct.y,ut.y),QuadraticBezier(rt,lt.z,ct.z,ut.z)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class SplineCurve extends Curve{constructor(rt=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=rt}getPoint(rt,it=new Vector2){const st=it,lt=this.points,ct=(lt.length-1)*rt,ut=Math.floor(ct),dt=ct-ut,ht=lt[ut===0?ut:ut-1],pt=lt[ut],ft=lt[ut>lt.length-2?lt.length-1:ut+1],mt=lt[ut>lt.length-3?lt.length-1:ut+2];return st.set(CatmullRom(dt,ht.x,pt.x,ft.x,mt.x),CatmullRom(dt,ht.y,pt.y,ft.y,mt.y)),st}copy(rt){super.copy(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(lt.clone())}return this}toJSON(){const rt=super.toJSON();rt.points=[];for(let it=0,st=this.points.length;it<st;it++){const lt=this.points[it];rt.points.push(lt.toArray())}return rt}fromJSON(rt){super.fromJSON(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(new Vector2().fromArray(lt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(rt){this.curves.push(rt)}closePath(){const rt=this.curves[0].getPoint(0),it=this.curves[this.curves.length-1].getPoint(1);if(!rt.equals(it)){const st=rt.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[st](it,rt))}return this}getPoint(rt,it){const st=rt*this.getLength(),lt=this.getCurveLengths();let ct=0;for(;ct<lt.length;){if(lt[ct]>=st){const ut=lt[ct]-st,dt=this.curves[ct],ht=dt.getLength(),pt=ht===0?0:1-ut/ht;return dt.getPointAt(pt,it)}ct++}return null}getLength(){const rt=this.getCurveLengths();return rt[rt.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const rt=[];let it=0;for(let st=0,lt=this.curves.length;st<lt;st++)it+=this.curves[st].getLength(),rt.push(it);return this.cacheLengths=rt,rt}getSpacedPoints(rt=40){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPoint(st/rt));return this.autoClose&&it.push(it[0]),it}getPoints(rt=12){const it=[];let st;for(let lt=0,ct=this.curves;lt<ct.length;lt++){const ut=ct[lt],dt=ut.isEllipseCurve?rt*2:ut.isLineCurve||ut.isLineCurve3?1:ut.isSplineCurve?rt*ut.points.length:rt,ht=ut.getPoints(dt);for(let pt=0;pt<ht.length;pt++){const ft=ht[pt];st&&st.equals(ft)||(it.push(ft),st=ft)}}return this.autoClose&&it.length>1&&!it[it.length-1].equals(it[0])&&it.push(it[0]),it}copy(rt){super.copy(rt),this.curves=[];for(let it=0,st=rt.curves.length;it<st;it++){const lt=rt.curves[it];this.curves.push(lt.clone())}return this.autoClose=rt.autoClose,this}toJSON(){const rt=super.toJSON();rt.autoClose=this.autoClose,rt.curves=[];for(let it=0,st=this.curves.length;it<st;it++){const lt=this.curves[it];rt.curves.push(lt.toJSON())}return rt}fromJSON(rt){super.fromJSON(rt),this.autoClose=rt.autoClose,this.curves=[];for(let it=0,st=rt.curves.length;it<st;it++){const lt=rt.curves[it];this.curves.push(new Curves[lt.type]().fromJSON(lt))}return this}}class Path extends CurvePath{constructor(rt){super(),this.type="Path",this.currentPoint=new Vector2,rt&&this.setFromPoints(rt)}setFromPoints(rt){this.moveTo(rt[0].x,rt[0].y);for(let it=1,st=rt.length;it<st;it++)this.lineTo(rt[it].x,rt[it].y);return this}moveTo(rt,it){return this.currentPoint.set(rt,it),this}lineTo(rt,it){const st=new LineCurve(this.currentPoint.clone(),new Vector2(rt,it));return this.curves.push(st),this.currentPoint.set(rt,it),this}quadraticCurveTo(rt,it,st,lt){const ct=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(rt,it),new Vector2(st,lt));return this.curves.push(ct),this.currentPoint.set(st,lt),this}bezierCurveTo(rt,it,st,lt,ct,ut){const dt=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(rt,it),new Vector2(st,lt),new Vector2(ct,ut));return this.curves.push(dt),this.currentPoint.set(ct,ut),this}splineThru(rt){const it=[this.currentPoint.clone()].concat(rt),st=new SplineCurve(it);return this.curves.push(st),this.currentPoint.copy(rt[rt.length-1]),this}arc(rt,it,st,lt,ct,ut){const dt=this.currentPoint.x,ht=this.currentPoint.y;return this.absarc(rt+dt,it+ht,st,lt,ct,ut),this}absarc(rt,it,st,lt,ct,ut){return this.absellipse(rt,it,st,st,lt,ct,ut),this}ellipse(rt,it,st,lt,ct,ut,dt,ht){const pt=this.currentPoint.x,ft=this.currentPoint.y;return this.absellipse(rt+pt,it+ft,st,lt,ct,ut,dt,ht),this}absellipse(rt,it,st,lt,ct,ut,dt,ht){const pt=new EllipseCurve(rt,it,st,lt,ct,ut,dt,ht);if(this.curves.length>0){const mt=pt.getPoint(0);mt.equals(this.currentPoint)||this.lineTo(mt.x,mt.y)}this.curves.push(pt);const ft=pt.getPoint(1);return this.currentPoint.copy(ft),this}copy(rt){return super.copy(rt),this.currentPoint.copy(rt.currentPoint),this}toJSON(){const rt=super.toJSON();return rt.currentPoint=this.currentPoint.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.currentPoint.fromArray(rt.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(rt=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],it=12,st=0,lt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:rt,segments:it,phiStart:st,phiLength:lt},it=Math.floor(it),lt=clamp(lt,0,Math.PI*2);const ct=[],ut=[],dt=[],ht=[],pt=[],ft=1/it,mt=new Vector3,gt=new Vector2,xt=new Vector3,yt=new Vector3,vt=new Vector3;let St=0,Et=0;for(let wt=0;wt<=rt.length-1;wt++)switch(wt){case 0:St=rt[wt+1].x-rt[wt].x,Et=rt[wt+1].y-rt[wt].y,xt.x=Et*1,xt.y=-St,xt.z=Et*0,vt.copy(xt),xt.normalize(),ht.push(xt.x,xt.y,xt.z);break;case rt.length-1:ht.push(vt.x,vt.y,vt.z);break;default:St=rt[wt+1].x-rt[wt].x,Et=rt[wt+1].y-rt[wt].y,xt.x=Et*1,xt.y=-St,xt.z=Et*0,yt.copy(xt),xt.x+=vt.x,xt.y+=vt.y,xt.z+=vt.z,xt.normalize(),ht.push(xt.x,xt.y,xt.z),vt.copy(yt)}for(let wt=0;wt<=it;wt++){const Rt=st+wt*ft*lt,Tt=Math.sin(Rt),It=Math.cos(Rt);for(let At=0;At<=rt.length-1;At++){mt.x=rt[At].x*Tt,mt.y=rt[At].y,mt.z=rt[At].x*It,ut.push(mt.x,mt.y,mt.z),gt.x=wt/it,gt.y=At/(rt.length-1),dt.push(gt.x,gt.y);const Dt=ht[3*At+0]*Tt,jt=ht[3*At+1],Ft=ht[3*At+0]*It;pt.push(Dt,jt,Ft)}}for(let wt=0;wt<it;wt++)for(let Rt=0;Rt<rt.length-1;Rt++){const Tt=Rt+wt*rt.length,It=Tt,At=Tt+rt.length,Dt=Tt+rt.length+1,jt=Tt+1;ct.push(It,At,jt),ct.push(Dt,jt,At)}this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2)),this.setAttribute("normal",new Float32BufferAttribute(pt,3))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new LatheGeometry(rt.points,rt.segments,rt.phiStart,rt.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(rt=1,it=1,st=4,lt=8){const ct=new Path;ct.absarc(0,-it/2,rt,Math.PI*1.5,0),ct.absarc(0,it/2,rt,0,Math.PI*.5),super(ct.getPoints(st),lt),this.type="CapsuleGeometry",this.parameters={radius:rt,length:it,capSegments:st,radialSegments:lt}}static fromJSON(rt){return new CapsuleGeometry(rt.radius,rt.length,rt.capSegments,rt.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(rt=1,it=32,st=0,lt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:rt,segments:it,thetaStart:st,thetaLength:lt},it=Math.max(3,it);const ct=[],ut=[],dt=[],ht=[],pt=new Vector3,ft=new Vector2;ut.push(0,0,0),dt.push(0,0,1),ht.push(.5,.5);for(let mt=0,gt=3;mt<=it;mt++,gt+=3){const xt=st+mt/it*lt;pt.x=rt*Math.cos(xt),pt.y=rt*Math.sin(xt),ut.push(pt.x,pt.y,pt.z),dt.push(0,0,1),ft.x=(ut[gt]/rt+1)/2,ft.y=(ut[gt+1]/rt+1)/2,ht.push(ft.x,ft.y)}for(let mt=1;mt<=it;mt++)ct.push(mt,mt+1,0);this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(dt,3)),this.setAttribute("uv",new Float32BufferAttribute(ht,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new CircleGeometry(rt.radius,rt.segments,rt.thetaStart,rt.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=32,ct=1,ut=!1,dt=0,ht=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:rt,radiusBottom:it,height:st,radialSegments:lt,heightSegments:ct,openEnded:ut,thetaStart:dt,thetaLength:ht};const pt=this;lt=Math.floor(lt),ct=Math.floor(ct);const ft=[],mt=[],gt=[],xt=[];let yt=0;const vt=[],St=st/2;let Et=0;wt(),ut===!1&&(rt>0&&Rt(!0),it>0&&Rt(!1)),this.setIndex(ft),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(xt,2));function wt(){const Tt=new Vector3,It=new Vector3;let At=0;const Dt=(it-rt)/st;for(let jt=0;jt<=ct;jt++){const Ft=[],Lt=jt/ct,Pt=Lt*(it-rt)+rt;for(let Ot=0;Ot<=lt;Ot++){const Nt=Ot/lt,$t=Nt*ht+dt,Vt=Math.sin($t),Ut=Math.cos($t);It.x=Pt*Vt,It.y=-Lt*st+St,It.z=Pt*Ut,mt.push(It.x,It.y,It.z),Tt.set(Vt,Dt,Ut).normalize(),gt.push(Tt.x,Tt.y,Tt.z),xt.push(Nt,1-Lt),Ft.push(yt++)}vt.push(Ft)}for(let jt=0;jt<lt;jt++)for(let Ft=0;Ft<ct;Ft++){const Lt=vt[Ft][jt],Pt=vt[Ft+1][jt],Ot=vt[Ft+1][jt+1],Nt=vt[Ft][jt+1];ft.push(Lt,Pt,Nt),ft.push(Pt,Ot,Nt),At+=6}pt.addGroup(Et,At,0),Et+=At}function Rt(Tt){const It=yt,At=new Vector2,Dt=new Vector3;let jt=0;const Ft=Tt===!0?rt:it,Lt=Tt===!0?1:-1;for(let Ot=1;Ot<=lt;Ot++)mt.push(0,St*Lt,0),gt.push(0,Lt,0),xt.push(.5,.5),yt++;const Pt=yt;for(let Ot=0;Ot<=lt;Ot++){const $t=Ot/lt*ht+dt,Vt=Math.cos($t),Ut=Math.sin($t);Dt.x=Ft*Ut,Dt.y=St*Lt,Dt.z=Ft*Vt,mt.push(Dt.x,Dt.y,Dt.z),gt.push(0,Lt,0),At.x=Vt*.5+.5,At.y=Ut*.5*Lt+.5,xt.push(At.x,At.y),yt++}for(let Ot=0;Ot<lt;Ot++){const Nt=It+Ot,$t=Pt+Ot;Tt===!0?ft.push($t,$t+1,Nt):ft.push($t+1,$t,Nt),jt+=3}pt.addGroup(Et,jt,Tt===!0?1:2),Et+=jt}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new CylinderGeometry(rt.radiusTop,rt.radiusBottom,rt.height,rt.radialSegments,rt.heightSegments,rt.openEnded,rt.thetaStart,rt.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(rt=1,it=1,st=32,lt=1,ct=!1,ut=0,dt=Math.PI*2){super(0,rt,it,st,lt,ct,ut,dt),this.type="ConeGeometry",this.parameters={radius:rt,height:it,radialSegments:st,heightSegments:lt,openEnded:ct,thetaStart:ut,thetaLength:dt}}static fromJSON(rt){return new ConeGeometry(rt.radius,rt.height,rt.radialSegments,rt.heightSegments,rt.openEnded,rt.thetaStart,rt.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(rt=[],it=[],st=1,lt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:rt,indices:it,radius:st,detail:lt};const ct=[],ut=[];dt(lt),pt(st),ft(),this.setAttribute("position",new Float32BufferAttribute(ct,3)),this.setAttribute("normal",new Float32BufferAttribute(ct.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2)),lt===0?this.computeVertexNormals():this.normalizeNormals();function dt(wt){const Rt=new Vector3,Tt=new Vector3,It=new Vector3;for(let At=0;At<it.length;At+=3)xt(it[At+0],Rt),xt(it[At+1],Tt),xt(it[At+2],It),ht(Rt,Tt,It,wt)}function ht(wt,Rt,Tt,It){const At=It+1,Dt=[];for(let jt=0;jt<=At;jt++){Dt[jt]=[];const Ft=wt.clone().lerp(Tt,jt/At),Lt=Rt.clone().lerp(Tt,jt/At),Pt=At-jt;for(let Ot=0;Ot<=Pt;Ot++)Ot===0&&jt===At?Dt[jt][Ot]=Ft:Dt[jt][Ot]=Ft.clone().lerp(Lt,Ot/Pt)}for(let jt=0;jt<At;jt++)for(let Ft=0;Ft<2*(At-jt)-1;Ft++){const Lt=Math.floor(Ft/2);Ft%2===0?(gt(Dt[jt][Lt+1]),gt(Dt[jt+1][Lt]),gt(Dt[jt][Lt])):(gt(Dt[jt][Lt+1]),gt(Dt[jt+1][Lt+1]),gt(Dt[jt+1][Lt]))}}function pt(wt){const Rt=new Vector3;for(let Tt=0;Tt<ct.length;Tt+=3)Rt.x=ct[Tt+0],Rt.y=ct[Tt+1],Rt.z=ct[Tt+2],Rt.normalize().multiplyScalar(wt),ct[Tt+0]=Rt.x,ct[Tt+1]=Rt.y,ct[Tt+2]=Rt.z}function ft(){const wt=new Vector3;for(let Rt=0;Rt<ct.length;Rt+=3){wt.x=ct[Rt+0],wt.y=ct[Rt+1],wt.z=ct[Rt+2];const Tt=St(wt)/2/Math.PI+.5,It=Et(wt)/Math.PI+.5;ut.push(Tt,1-It)}yt(),mt()}function mt(){for(let wt=0;wt<ut.length;wt+=6){const Rt=ut[wt+0],Tt=ut[wt+2],It=ut[wt+4],At=Math.max(Rt,Tt,It),Dt=Math.min(Rt,Tt,It);At>.9&&Dt<.1&&(Rt<.2&&(ut[wt+0]+=1),Tt<.2&&(ut[wt+2]+=1),It<.2&&(ut[wt+4]+=1))}}function gt(wt){ct.push(wt.x,wt.y,wt.z)}function xt(wt,Rt){const Tt=wt*3;Rt.x=rt[Tt+0],Rt.y=rt[Tt+1],Rt.z=rt[Tt+2]}function yt(){const wt=new Vector3,Rt=new Vector3,Tt=new Vector3,It=new Vector3,At=new Vector2,Dt=new Vector2,jt=new Vector2;for(let Ft=0,Lt=0;Ft<ct.length;Ft+=9,Lt+=6){wt.set(ct[Ft+0],ct[Ft+1],ct[Ft+2]),Rt.set(ct[Ft+3],ct[Ft+4],ct[Ft+5]),Tt.set(ct[Ft+6],ct[Ft+7],ct[Ft+8]),At.set(ut[Lt+0],ut[Lt+1]),Dt.set(ut[Lt+2],ut[Lt+3]),jt.set(ut[Lt+4],ut[Lt+5]),It.copy(wt).add(Rt).add(Tt).divideScalar(3);const Pt=St(It);vt(At,Lt+0,wt,Pt),vt(Dt,Lt+2,Rt,Pt),vt(jt,Lt+4,Tt,Pt)}}function vt(wt,Rt,Tt,It){It<0&&wt.x===1&&(ut[Rt]=wt.x-1),Tt.x===0&&Tt.z===0&&(ut[Rt]=It/2/Math.PI+.5)}function St(wt){return Math.atan2(wt.z,-wt.x)}function Et(wt){return Math.atan2(-wt.y,Math.sqrt(wt.x*wt.x+wt.z*wt.z))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new PolyhedronGeometry(rt.vertices,rt.indices,rt.radius,rt.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=(1+Math.sqrt(5))/2,lt=1/st,ct=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-lt,-st,0,-lt,st,0,lt,-st,0,lt,st,-lt,-st,0,-lt,st,0,lt,-st,0,lt,st,0,-st,0,-lt,st,0,-lt,-st,0,lt,st,0,lt],ut=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ct,ut,rt,it),this.type="DodecahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new DodecahedronGeometry(rt.radius,rt.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(rt=null,it=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:rt,thresholdAngle:it},rt!==null){const lt=Math.pow(10,4),ct=Math.cos(DEG2RAD*it),ut=rt.getIndex(),dt=rt.getAttribute("position"),ht=ut?ut.count:dt.count,pt=[0,0,0],ft=["a","b","c"],mt=new Array(3),gt={},xt=[];for(let yt=0;yt<ht;yt+=3){ut?(pt[0]=ut.getX(yt),pt[1]=ut.getX(yt+1),pt[2]=ut.getX(yt+2)):(pt[0]=yt,pt[1]=yt+1,pt[2]=yt+2);const{a:vt,b:St,c:Et}=_triangle;if(vt.fromBufferAttribute(dt,pt[0]),St.fromBufferAttribute(dt,pt[1]),Et.fromBufferAttribute(dt,pt[2]),_triangle.getNormal(_normal),mt[0]=`${Math.round(vt.x*lt)},${Math.round(vt.y*lt)},${Math.round(vt.z*lt)}`,mt[1]=`${Math.round(St.x*lt)},${Math.round(St.y*lt)},${Math.round(St.z*lt)}`,mt[2]=`${Math.round(Et.x*lt)},${Math.round(Et.y*lt)},${Math.round(Et.z*lt)}`,!(mt[0]===mt[1]||mt[1]===mt[2]||mt[2]===mt[0]))for(let wt=0;wt<3;wt++){const Rt=(wt+1)%3,Tt=mt[wt],It=mt[Rt],At=_triangle[ft[wt]],Dt=_triangle[ft[Rt]],jt=`${Tt}_${It}`,Ft=`${It}_${Tt}`;Ft in gt&&gt[Ft]?(_normal.dot(gt[Ft].normal)<=ct&&(xt.push(At.x,At.y,At.z),xt.push(Dt.x,Dt.y,Dt.z)),gt[Ft]=null):jt in gt||(gt[jt]={index0:pt[wt],index1:pt[Rt],normal:_normal.clone()})}}for(const yt in gt)if(gt[yt]){const{index0:vt,index1:St}=gt[yt];_v0.fromBufferAttribute(dt,vt),_v1$1.fromBufferAttribute(dt,St),xt.push(_v0.x,_v0.y,_v0.z),xt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(xt,3))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}}class Shape extends Path{constructor(rt){super(rt),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(rt){const it=[];for(let st=0,lt=this.holes.length;st<lt;st++)it[st]=this.holes[st].getPoints(rt);return it}extractPoints(rt){return{shape:this.getPoints(rt),holes:this.getPointsHoles(rt)}}copy(rt){super.copy(rt),this.holes=[];for(let it=0,st=rt.holes.length;it<st;it++){const lt=rt.holes[it];this.holes.push(lt.clone())}return this}toJSON(){const rt=super.toJSON();rt.uuid=this.uuid,rt.holes=[];for(let it=0,st=this.holes.length;it<st;it++){const lt=this.holes[it];rt.holes.push(lt.toJSON())}return rt}fromJSON(rt){super.fromJSON(rt),this.uuid=rt.uuid,this.holes=[];for(let it=0,st=rt.holes.length;it<st;it++){const lt=rt.holes[it];this.holes.push(new Path().fromJSON(lt))}return this}}const Earcut={triangulate:function(nt,rt,it=2){const st=rt&&rt.length,lt=st?rt[0]*it:nt.length;let ct=linkedList(nt,0,lt,it,!0);const ut=[];if(!ct||ct.next===ct.prev)return ut;let dt,ht,pt,ft,mt,gt,xt;if(st&&(ct=eliminateHoles(nt,rt,ct,it)),nt.length>80*it){dt=pt=nt[0],ht=ft=nt[1];for(let yt=it;yt<lt;yt+=it)mt=nt[yt],gt=nt[yt+1],mt<dt&&(dt=mt),gt<ht&&(ht=gt),mt>pt&&(pt=mt),gt>ft&&(ft=gt);xt=Math.max(pt-dt,ft-ht),xt=xt!==0?32767/xt:0}return earcutLinked(ct,ut,it,dt,ht,xt,0),ut}};function linkedList(nt,rt,it,st,lt){let ct,ut;if(lt===signedArea(nt,rt,it,st)>0)for(ct=rt;ct<it;ct+=st)ut=insertNode(ct,nt[ct],nt[ct+1],ut);else for(ct=it-st;ct>=rt;ct-=st)ut=insertNode(ct,nt[ct],nt[ct+1],ut);return ut&&equals(ut,ut.next)&&(removeNode(ut),ut=ut.next),ut}function filterPoints(nt,rt){if(!nt)return nt;rt||(rt=nt);let it=nt,st;do if(st=!1,!it.steiner&&(equals(it,it.next)||area(it.prev,it,it.next)===0)){if(removeNode(it),it=rt=it.prev,it===it.next)break;st=!0}else it=it.next;while(st||it!==rt);return rt}function earcutLinked(nt,rt,it,st,lt,ct,ut){if(!nt)return;!ut&&ct&&indexCurve(nt,st,lt,ct);let dt=nt,ht,pt;for(;nt.prev!==nt.next;){if(ht=nt.prev,pt=nt.next,ct?isEarHashed(nt,st,lt,ct):isEar(nt)){rt.push(ht.i/it|0),rt.push(nt.i/it|0),rt.push(pt.i/it|0),removeNode(nt),nt=pt.next,dt=pt.next;continue}if(nt=pt,nt===dt){ut?ut===1?(nt=cureLocalIntersections(filterPoints(nt),rt,it),earcutLinked(nt,rt,it,st,lt,ct,2)):ut===2&&splitEarcut(nt,rt,it,st,lt,ct):earcutLinked(filterPoints(nt),rt,it,st,lt,ct,1);break}}}function isEar(nt){const rt=nt.prev,it=nt,st=nt.next;if(area(rt,it,st)>=0)return!1;const lt=rt.x,ct=it.x,ut=st.x,dt=rt.y,ht=it.y,pt=st.y,ft=lt<ct?lt<ut?lt:ut:ct<ut?ct:ut,mt=dt<ht?dt<pt?dt:pt:ht<pt?ht:pt,gt=lt>ct?lt>ut?lt:ut:ct>ut?ct:ut,xt=dt>ht?dt>pt?dt:pt:ht>pt?ht:pt;let yt=st.next;for(;yt!==rt;){if(yt.x>=ft&&yt.x<=gt&&yt.y>=mt&&yt.y<=xt&&pointInTriangle(lt,dt,ct,ht,ut,pt,yt.x,yt.y)&&area(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function isEarHashed(nt,rt,it,st){const lt=nt.prev,ct=nt,ut=nt.next;if(area(lt,ct,ut)>=0)return!1;const dt=lt.x,ht=ct.x,pt=ut.x,ft=lt.y,mt=ct.y,gt=ut.y,xt=dt<ht?dt<pt?dt:pt:ht<pt?ht:pt,yt=ft<mt?ft<gt?ft:gt:mt<gt?mt:gt,vt=dt>ht?dt>pt?dt:pt:ht>pt?ht:pt,St=ft>mt?ft>gt?ft:gt:mt>gt?mt:gt,Et=zOrder(xt,yt,rt,it,st),wt=zOrder(vt,St,rt,it,st);let Rt=nt.prevZ,Tt=nt.nextZ;for(;Rt&&Rt.z>=Et&&Tt&&Tt.z<=wt;){if(Rt.x>=xt&&Rt.x<=vt&&Rt.y>=yt&&Rt.y<=St&&Rt!==lt&&Rt!==ut&&pointInTriangle(dt,ft,ht,mt,pt,gt,Rt.x,Rt.y)&&area(Rt.prev,Rt,Rt.next)>=0||(Rt=Rt.prevZ,Tt.x>=xt&&Tt.x<=vt&&Tt.y>=yt&&Tt.y<=St&&Tt!==lt&&Tt!==ut&&pointInTriangle(dt,ft,ht,mt,pt,gt,Tt.x,Tt.y)&&area(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;Rt&&Rt.z>=Et;){if(Rt.x>=xt&&Rt.x<=vt&&Rt.y>=yt&&Rt.y<=St&&Rt!==lt&&Rt!==ut&&pointInTriangle(dt,ft,ht,mt,pt,gt,Rt.x,Rt.y)&&area(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.prevZ}for(;Tt&&Tt.z<=wt;){if(Tt.x>=xt&&Tt.x<=vt&&Tt.y>=yt&&Tt.y<=St&&Tt!==lt&&Tt!==ut&&pointInTriangle(dt,ft,ht,mt,pt,gt,Tt.x,Tt.y)&&area(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function cureLocalIntersections(nt,rt,it){let st=nt;do{const lt=st.prev,ct=st.next.next;!equals(lt,ct)&&intersects(lt,st,st.next,ct)&&locallyInside(lt,ct)&&locallyInside(ct,lt)&&(rt.push(lt.i/it|0),rt.push(st.i/it|0),rt.push(ct.i/it|0),removeNode(st),removeNode(st.next),st=nt=ct),st=st.next}while(st!==nt);return filterPoints(st)}function splitEarcut(nt,rt,it,st,lt,ct){let ut=nt;do{let dt=ut.next.next;for(;dt!==ut.prev;){if(ut.i!==dt.i&&isValidDiagonal(ut,dt)){let ht=splitPolygon(ut,dt);ut=filterPoints(ut,ut.next),ht=filterPoints(ht,ht.next),earcutLinked(ut,rt,it,st,lt,ct,0),earcutLinked(ht,rt,it,st,lt,ct,0);return}dt=dt.next}ut=ut.next}while(ut!==nt)}function eliminateHoles(nt,rt,it,st){const lt=[];let ct,ut,dt,ht,pt;for(ct=0,ut=rt.length;ct<ut;ct++)dt=rt[ct]*st,ht=ct<ut-1?rt[ct+1]*st:nt.length,pt=linkedList(nt,dt,ht,st,!1),pt===pt.next&&(pt.steiner=!0),lt.push(getLeftmost(pt));for(lt.sort(compareX),ct=0;ct<lt.length;ct++)it=eliminateHole(lt[ct],it);return it}function compareX(nt,rt){return nt.x-rt.x}function eliminateHole(nt,rt){const it=findHoleBridge(nt,rt);if(!it)return rt;const st=splitPolygon(it,nt);return filterPoints(st,st.next),filterPoints(it,it.next)}function findHoleBridge(nt,rt){let it=rt,st=-1/0,lt;const ct=nt.x,ut=nt.y;do{if(ut<=it.y&&ut>=it.next.y&&it.next.y!==it.y){const gt=it.x+(ut-it.y)*(it.next.x-it.x)/(it.next.y-it.y);if(gt<=ct&&gt>st&&(st=gt,lt=it.x<it.next.x?it:it.next,gt===ct))return lt}it=it.next}while(it!==rt);if(!lt)return null;const dt=lt,ht=lt.x,pt=lt.y;let ft=1/0,mt;it=lt;do ct>=it.x&&it.x>=ht&&ct!==it.x&&pointInTriangle(ut<pt?ct:st,ut,ht,pt,ut<pt?st:ct,ut,it.x,it.y)&&(mt=Math.abs(ut-it.y)/(ct-it.x),locallyInside(it,nt)&&(mt<ft||mt===ft&&(it.x>lt.x||it.x===lt.x&&sectorContainsSector(lt,it)))&&(lt=it,ft=mt)),it=it.next;while(it!==dt);return lt}function sectorContainsSector(nt,rt){return area(nt.prev,nt,rt.prev)<0&&area(rt.next,nt,nt.next)<0}function indexCurve(nt,rt,it,st){let lt=nt;do lt.z===0&&(lt.z=zOrder(lt.x,lt.y,rt,it,st)),lt.prevZ=lt.prev,lt.nextZ=lt.next,lt=lt.next;while(lt!==nt);lt.prevZ.nextZ=null,lt.prevZ=null,sortLinked(lt)}function sortLinked(nt){let rt,it,st,lt,ct,ut,dt,ht,pt=1;do{for(it=nt,nt=null,ct=null,ut=0;it;){for(ut++,st=it,dt=0,rt=0;rt<pt&&(dt++,st=st.nextZ,!!st);rt++);for(ht=pt;dt>0||ht>0&&st;)dt!==0&&(ht===0||!st||it.z<=st.z)?(lt=it,it=it.nextZ,dt--):(lt=st,st=st.nextZ,ht--),ct?ct.nextZ=lt:nt=lt,lt.prevZ=ct,ct=lt;it=st}ct.nextZ=null,pt*=2}while(ut>1);return nt}function zOrder(nt,rt,it,st,lt){return nt=(nt-it)*lt|0,rt=(rt-st)*lt|0,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,rt=(rt|rt<<8)&16711935,rt=(rt|rt<<4)&252645135,rt=(rt|rt<<2)&858993459,rt=(rt|rt<<1)&1431655765,nt|rt<<1}function getLeftmost(nt){let rt=nt,it=nt;do(rt.x<it.x||rt.x===it.x&&rt.y<it.y)&&(it=rt),rt=rt.next;while(rt!==nt);return it}function pointInTriangle(nt,rt,it,st,lt,ct,ut,dt){return(lt-ut)*(rt-dt)>=(nt-ut)*(ct-dt)&&(nt-ut)*(st-dt)>=(it-ut)*(rt-dt)&&(it-ut)*(ct-dt)>=(lt-ut)*(st-dt)}function isValidDiagonal(nt,rt){return nt.next.i!==rt.i&&nt.prev.i!==rt.i&&!intersectsPolygon(nt,rt)&&(locallyInside(nt,rt)&&locallyInside(rt,nt)&&middleInside(nt,rt)&&(area(nt.prev,nt,rt.prev)||area(nt,rt.prev,rt))||equals(nt,rt)&&area(nt.prev,nt,nt.next)>0&&area(rt.prev,rt,rt.next)>0)}function area(nt,rt,it){return(rt.y-nt.y)*(it.x-rt.x)-(rt.x-nt.x)*(it.y-rt.y)}function equals(nt,rt){return nt.x===rt.x&&nt.y===rt.y}function intersects(nt,rt,it,st){const lt=sign(area(nt,rt,it)),ct=sign(area(nt,rt,st)),ut=sign(area(it,st,nt)),dt=sign(area(it,st,rt));return!!(lt!==ct&&ut!==dt||lt===0&&onSegment(nt,it,rt)||ct===0&&onSegment(nt,st,rt)||ut===0&&onSegment(it,nt,st)||dt===0&&onSegment(it,rt,st))}function onSegment(nt,rt,it){return rt.x<=Math.max(nt.x,it.x)&&rt.x>=Math.min(nt.x,it.x)&&rt.y<=Math.max(nt.y,it.y)&&rt.y>=Math.min(nt.y,it.y)}function sign(nt){return nt>0?1:nt<0?-1:0}function intersectsPolygon(nt,rt){let it=nt;do{if(it.i!==nt.i&&it.next.i!==nt.i&&it.i!==rt.i&&it.next.i!==rt.i&&intersects(it,it.next,nt,rt))return!0;it=it.next}while(it!==nt);return!1}function locallyInside(nt,rt){return area(nt.prev,nt,nt.next)<0?area(nt,rt,nt.next)>=0&&area(nt,nt.prev,rt)>=0:area(nt,rt,nt.prev)<0||area(nt,nt.next,rt)<0}function middleInside(nt,rt){let it=nt,st=!1;const lt=(nt.x+rt.x)/2,ct=(nt.y+rt.y)/2;do it.y>ct!=it.next.y>ct&&it.next.y!==it.y&&lt<(it.next.x-it.x)*(ct-it.y)/(it.next.y-it.y)+it.x&&(st=!st),it=it.next;while(it!==nt);return st}function splitPolygon(nt,rt){const it=new Node$1(nt.i,nt.x,nt.y),st=new Node$1(rt.i,rt.x,rt.y),lt=nt.next,ct=rt.prev;return nt.next=rt,rt.prev=nt,it.next=lt,lt.prev=it,st.next=it,it.prev=st,ct.next=st,st.prev=ct,st}function insertNode(nt,rt,it,st){const lt=new Node$1(nt,rt,it);return st?(lt.next=st.next,lt.prev=st,st.next.prev=lt,st.next=lt):(lt.prev=lt,lt.next=lt),lt}function removeNode(nt){nt.next.prev=nt.prev,nt.prev.next=nt.next,nt.prevZ&&(nt.prevZ.nextZ=nt.nextZ),nt.nextZ&&(nt.nextZ.prevZ=nt.prevZ)}function Node$1(nt,rt,it){this.i=nt,this.x=rt,this.y=it,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(nt,rt,it,st){let lt=0;for(let ct=rt,ut=it-st;ct<it;ct+=st)lt+=(nt[ut]-nt[ct])*(nt[ct+1]+nt[ut+1]),ut=ct;return lt}class ShapeUtils{static area(rt){const it=rt.length;let st=0;for(let lt=it-1,ct=0;ct<it;lt=ct++)st+=rt[lt].x*rt[ct].y-rt[ct].x*rt[lt].y;return st*.5}static isClockWise(rt){return ShapeUtils.area(rt)<0}static triangulateShape(rt,it){const st=[],lt=[],ct=[];removeDupEndPts(rt),addContour(st,rt);let ut=rt.length;it.forEach(removeDupEndPts);for(let ht=0;ht<it.length;ht++)lt.push(ut),ut+=it[ht].length,addContour(st,it[ht]);const dt=Earcut.triangulate(st,lt);for(let ht=0;ht<dt.length;ht+=3)ct.push(dt.slice(ht,ht+3));return ct}}function removeDupEndPts(nt){const rt=nt.length;rt>2&&nt[rt-1].equals(nt[0])&&nt.pop()}function addContour(nt,rt){for(let it=0;it<rt.length;it++)nt.push(rt[it].x),nt.push(rt[it].y)}class ExtrudeGeometry extends BufferGeometry{constructor(rt=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),it={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:rt,options:it},rt=Array.isArray(rt)?rt:[rt];const st=this,lt=[],ct=[];for(let dt=0,ht=rt.length;dt<ht;dt++){const pt=rt[dt];ut(pt)}this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2)),this.computeVertexNormals();function ut(dt){const ht=[],pt=it.curveSegments!==void 0?it.curveSegments:12,ft=it.steps!==void 0?it.steps:1,mt=it.depth!==void 0?it.depth:1;let gt=it.bevelEnabled!==void 0?it.bevelEnabled:!0,xt=it.bevelThickness!==void 0?it.bevelThickness:.2,yt=it.bevelSize!==void 0?it.bevelSize:xt-.1,vt=it.bevelOffset!==void 0?it.bevelOffset:0,St=it.bevelSegments!==void 0?it.bevelSegments:3;const Et=it.extrudePath,wt=it.UVGenerator!==void 0?it.UVGenerator:WorldUVGenerator;let Rt,Tt=!1,It,At,Dt,jt;Et&&(Rt=Et.getSpacedPoints(ft),Tt=!0,gt=!1,It=Et.computeFrenetFrames(ft,!1),At=new Vector3,Dt=new Vector3,jt=new Vector3),gt||(St=0,xt=0,yt=0,vt=0);const Ft=dt.extractPoints(pt);let Lt=Ft.shape;const Pt=Ft.holes;if(!ShapeUtils.isClockWise(Lt)){Lt=Lt.reverse();for(let lr=0,Ir=Pt.length;lr<Ir;lr++){const wr=Pt[lr];ShapeUtils.isClockWise(wr)&&(Pt[lr]=wr.reverse())}}const Nt=ShapeUtils.triangulateShape(Lt,Pt),$t=Lt;for(let lr=0,Ir=Pt.length;lr<Ir;lr++){const wr=Pt[lr];Lt=Lt.concat(wr)}function Vt(lr,Ir,wr){return Ir||console.error("THREE.ExtrudeGeometry: vec does not exist"),lr.clone().addScaledVector(Ir,wr)}const Ut=Lt.length,zt=Nt.length;function Bt(lr,Ir,wr){let Fr,$r,hn;const Zr=lr.x-Ir.x,Qt=lr.y-Ir.y,Jt=wr.x-lr.x,pr=wr.y-lr.y,Vr=Zr*Zr+Qt*Qt,Wr=Zr*pr-Qt*Jt;if(Math.abs(Wr)>Number.EPSILON){const zr=Math.sqrt(Vr),ln=Math.sqrt(Jt*Jt+pr*pr),xn=Ir.x-Qt/zr,yn=Ir.y+Zr/zr,Wn=wr.x-pr/ln,Mn=wr.y+Jt/ln,sn=((Wn-xn)*pr-(Mn-yn)*Jt)/(Zr*pr-Qt*Jt);Fr=xn+Zr*sn-lr.x,$r=yn+Qt*sn-lr.y;const qn=Fr*Fr+$r*$r;if(qn<=2)return new Vector2(Fr,$r);hn=Math.sqrt(qn/2)}else{let zr=!1;Zr>Number.EPSILON?Jt>Number.EPSILON&&(zr=!0):Zr<-Number.EPSILON?Jt<-Number.EPSILON&&(zr=!0):Math.sign(Qt)===Math.sign(pr)&&(zr=!0),zr?(Fr=-Qt,$r=Zr,hn=Math.sqrt(Vr)):(Fr=Zr,$r=Qt,hn=Math.sqrt(Vr/2))}return new Vector2(Fr/hn,$r/hn)}const Ht=[];for(let lr=0,Ir=$t.length,wr=Ir-1,Fr=lr+1;lr<Ir;lr++,wr++,Fr++)wr===Ir&&(wr=0),Fr===Ir&&(Fr=0),Ht[lr]=Bt($t[lr],$t[wr],$t[Fr]);const Gt=[];let Kt,Xt=Ht.concat();for(let lr=0,Ir=Pt.length;lr<Ir;lr++){const wr=Pt[lr];Kt=[];for(let Fr=0,$r=wr.length,hn=$r-1,Zr=Fr+1;Fr<$r;Fr++,hn++,Zr++)hn===$r&&(hn=0),Zr===$r&&(Zr=0),Kt[Fr]=Bt(wr[Fr],wr[hn],wr[Zr]);Gt.push(Kt),Xt=Xt.concat(Kt)}for(let lr=0;lr<St;lr++){const Ir=lr/St,wr=xt*Math.cos(Ir*Math.PI/2),Fr=yt*Math.sin(Ir*Math.PI/2)+vt;for(let $r=0,hn=$t.length;$r<hn;$r++){const Zr=Vt($t[$r],Ht[$r],Fr);Sr(Zr.x,Zr.y,-wr)}for(let $r=0,hn=Pt.length;$r<hn;$r++){const Zr=Pt[$r];Kt=Gt[$r];for(let Qt=0,Jt=Zr.length;Qt<Jt;Qt++){const pr=Vt(Zr[Qt],Kt[Qt],Fr);Sr(pr.x,pr.y,-wr)}}}const or=yt+vt;for(let lr=0;lr<Ut;lr++){const Ir=gt?Vt(Lt[lr],Xt[lr],or):Lt[lr];Tt?(Dt.copy(It.normals[0]).multiplyScalar(Ir.x),At.copy(It.binormals[0]).multiplyScalar(Ir.y),jt.copy(Rt[0]).add(Dt).add(At),Sr(jt.x,jt.y,jt.z)):Sr(Ir.x,Ir.y,0)}for(let lr=1;lr<=ft;lr++)for(let Ir=0;Ir<Ut;Ir++){const wr=gt?Vt(Lt[Ir],Xt[Ir],or):Lt[Ir];Tt?(Dt.copy(It.normals[lr]).multiplyScalar(wr.x),At.copy(It.binormals[lr]).multiplyScalar(wr.y),jt.copy(Rt[lr]).add(Dt).add(At),Sr(jt.x,jt.y,jt.z)):Sr(wr.x,wr.y,mt/ft*lr)}for(let lr=St-1;lr>=0;lr--){const Ir=lr/St,wr=xt*Math.cos(Ir*Math.PI/2),Fr=yt*Math.sin(Ir*Math.PI/2)+vt;for(let $r=0,hn=$t.length;$r<hn;$r++){const Zr=Vt($t[$r],Ht[$r],Fr);Sr(Zr.x,Zr.y,mt+wr)}for(let $r=0,hn=Pt.length;$r<hn;$r++){const Zr=Pt[$r];Kt=Gt[$r];for(let Qt=0,Jt=Zr.length;Qt<Jt;Qt++){const pr=Vt(Zr[Qt],Kt[Qt],Fr);Tt?Sr(pr.x,pr.y+Rt[ft-1].y,Rt[ft-1].x+wr):Sr(pr.x,pr.y,mt+wr)}}}tr(),dr();function tr(){const lr=lt.length/3;if(gt){let Ir=0,wr=Ut*Ir;for(let Fr=0;Fr<zt;Fr++){const $r=Nt[Fr];vr($r[2]+wr,$r[1]+wr,$r[0]+wr)}Ir=ft+St*2,wr=Ut*Ir;for(let Fr=0;Fr<zt;Fr++){const $r=Nt[Fr];vr($r[0]+wr,$r[1]+wr,$r[2]+wr)}}else{for(let Ir=0;Ir<zt;Ir++){const wr=Nt[Ir];vr(wr[2],wr[1],wr[0])}for(let Ir=0;Ir<zt;Ir++){const wr=Nt[Ir];vr(wr[0]+Ut*ft,wr[1]+Ut*ft,wr[2]+Ut*ft)}}st.addGroup(lr,lt.length/3-lr,0)}function dr(){const lr=lt.length/3;let Ir=0;fr($t,Ir),Ir+=$t.length;for(let wr=0,Fr=Pt.length;wr<Fr;wr++){const $r=Pt[wr];fr($r,Ir),Ir+=$r.length}st.addGroup(lr,lt.length/3-lr,1)}function fr(lr,Ir){let wr=lr.length;for(;--wr>=0;){const Fr=wr;let $r=wr-1;$r<0&&($r=lr.length-1);for(let hn=0,Zr=ft+St*2;hn<Zr;hn++){const Qt=Ut*hn,Jt=Ut*(hn+1),pr=Ir+Fr+Qt,Vr=Ir+$r+Qt,Wr=Ir+$r+Jt,zr=Ir+Fr+Jt;mr(pr,Vr,Wr,zr)}}}function Sr(lr,Ir,wr){ht.push(lr),ht.push(Ir),ht.push(wr)}function vr(lr,Ir,wr){hr(lr),hr(Ir),hr(wr);const Fr=lt.length/3,$r=wt.generateTopUV(st,lt,Fr-3,Fr-2,Fr-1);gr($r[0]),gr($r[1]),gr($r[2])}function mr(lr,Ir,wr,Fr){hr(lr),hr(Ir),hr(Fr),hr(Ir),hr(wr),hr(Fr);const $r=lt.length/3,hn=wt.generateSideWallUV(st,lt,$r-6,$r-3,$r-2,$r-1);gr(hn[0]),gr(hn[1]),gr(hn[3]),gr(hn[1]),gr(hn[2]),gr(hn[3])}function hr(lr){lt.push(ht[lr*3+0]),lt.push(ht[lr*3+1]),lt.push(ht[lr*3+2])}function gr(lr){ct.push(lr.x),ct.push(lr.y)}}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON(),it=this.parameters.shapes,st=this.parameters.options;return toJSON$1(it,st,rt)}static fromJSON(rt,it){const st=[];for(let ct=0,ut=rt.shapes.length;ct<ut;ct++){const dt=it[rt.shapes[ct]];st.push(dt)}const lt=rt.options.extrudePath;return lt!==void 0&&(rt.options.extrudePath=new Curves[lt.type]().fromJSON(lt)),new ExtrudeGeometry(st,rt.options)}}const WorldUVGenerator={generateTopUV:function(nt,rt,it,st,lt){const ct=rt[it*3],ut=rt[it*3+1],dt=rt[st*3],ht=rt[st*3+1],pt=rt[lt*3],ft=rt[lt*3+1];return[new Vector2(ct,ut),new Vector2(dt,ht),new Vector2(pt,ft)]},generateSideWallUV:function(nt,rt,it,st,lt,ct){const ut=rt[it*3],dt=rt[it*3+1],ht=rt[it*3+2],pt=rt[st*3],ft=rt[st*3+1],mt=rt[st*3+2],gt=rt[lt*3],xt=rt[lt*3+1],yt=rt[lt*3+2],vt=rt[ct*3],St=rt[ct*3+1],Et=rt[ct*3+2];return Math.abs(dt-ft)<Math.abs(ut-pt)?[new Vector2(ut,1-ht),new Vector2(pt,1-mt),new Vector2(gt,1-yt),new Vector2(vt,1-Et)]:[new Vector2(dt,1-ht),new Vector2(ft,1-mt),new Vector2(xt,1-yt),new Vector2(St,1-Et)]}};function toJSON$1(nt,rt,it){if(it.shapes=[],Array.isArray(nt))for(let st=0,lt=nt.length;st<lt;st++){const ct=nt[st];it.shapes.push(ct.uuid)}else it.shapes.push(nt.uuid);return it.options=Object.assign({},rt),rt.extrudePath!==void 0&&(it.options.extrudePath=rt.extrudePath.toJSON()),it}class IcosahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=(1+Math.sqrt(5))/2,lt=[-1,st,0,1,st,0,-1,-st,0,1,-st,0,0,-1,st,0,1,st,0,-1,-st,0,1,-st,st,0,-1,st,0,1,-st,0,-1,-st,0,1],ct=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(lt,ct,rt,it),this.type="IcosahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new IcosahedronGeometry(rt.radius,rt.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],lt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(st,lt,rt,it),this.type="OctahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new OctahedronGeometry(rt.radius,rt.detail)}}class RingGeometry extends BufferGeometry{constructor(rt=.5,it=1,st=32,lt=1,ct=0,ut=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:rt,outerRadius:it,thetaSegments:st,phiSegments:lt,thetaStart:ct,thetaLength:ut},st=Math.max(3,st),lt=Math.max(1,lt);const dt=[],ht=[],pt=[],ft=[];let mt=rt;const gt=(it-rt)/lt,xt=new Vector3,yt=new Vector2;for(let vt=0;vt<=lt;vt++){for(let St=0;St<=st;St++){const Et=ct+St/st*ut;xt.x=mt*Math.cos(Et),xt.y=mt*Math.sin(Et),ht.push(xt.x,xt.y,xt.z),pt.push(0,0,1),yt.x=(xt.x/it+1)/2,yt.y=(xt.y/it+1)/2,ft.push(yt.x,yt.y)}mt+=gt}for(let vt=0;vt<lt;vt++){const St=vt*(st+1);for(let Et=0;Et<st;Et++){const wt=Et+St,Rt=wt,Tt=wt+st+1,It=wt+st+2,At=wt+1;dt.push(Rt,Tt,At),dt.push(Tt,It,At)}}this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(ht,3)),this.setAttribute("normal",new Float32BufferAttribute(pt,3)),this.setAttribute("uv",new Float32BufferAttribute(ft,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new RingGeometry(rt.innerRadius,rt.outerRadius,rt.thetaSegments,rt.phiSegments,rt.thetaStart,rt.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(rt=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),it=12){super(),this.type="ShapeGeometry",this.parameters={shapes:rt,curveSegments:it};const st=[],lt=[],ct=[],ut=[];let dt=0,ht=0;if(Array.isArray(rt)===!1)pt(rt);else for(let ft=0;ft<rt.length;ft++)pt(rt[ft]),this.addGroup(dt,ht,ft),dt+=ht,ht=0;this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2));function pt(ft){const mt=lt.length/3,gt=ft.extractPoints(it);let xt=gt.shape;const yt=gt.holes;ShapeUtils.isClockWise(xt)===!1&&(xt=xt.reverse());for(let St=0,Et=yt.length;St<Et;St++){const wt=yt[St];ShapeUtils.isClockWise(wt)===!0&&(yt[St]=wt.reverse())}const vt=ShapeUtils.triangulateShape(xt,yt);for(let St=0,Et=yt.length;St<Et;St++){const wt=yt[St];xt=xt.concat(wt)}for(let St=0,Et=xt.length;St<Et;St++){const wt=xt[St];lt.push(wt.x,wt.y,0),ct.push(0,0,1),ut.push(wt.x,wt.y)}for(let St=0,Et=vt.length;St<Et;St++){const wt=vt[St],Rt=wt[0]+mt,Tt=wt[1]+mt,It=wt[2]+mt;st.push(Rt,Tt,It),ht+=3}}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON(),it=this.parameters.shapes;return toJSON(it,rt)}static fromJSON(rt,it){const st=[];for(let lt=0,ct=rt.shapes.length;lt<ct;lt++){const ut=it[rt.shapes[lt]];st.push(ut)}return new ShapeGeometry(st,rt.curveSegments)}}function toJSON(nt,rt){if(rt.shapes=[],Array.isArray(nt))for(let it=0,st=nt.length;it<st;it++){const lt=nt[it];rt.shapes.push(lt.uuid)}else rt.shapes.push(nt.uuid);return rt}class SphereGeometry extends BufferGeometry{constructor(rt=1,it=32,st=16,lt=0,ct=Math.PI*2,ut=0,dt=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:rt,widthSegments:it,heightSegments:st,phiStart:lt,phiLength:ct,thetaStart:ut,thetaLength:dt},it=Math.max(3,Math.floor(it)),st=Math.max(2,Math.floor(st));const ht=Math.min(ut+dt,Math.PI);let pt=0;const ft=[],mt=new Vector3,gt=new Vector3,xt=[],yt=[],vt=[],St=[];for(let Et=0;Et<=st;Et++){const wt=[],Rt=Et/st;let Tt=0;Et===0&&ut===0?Tt=.5/it:Et===st&&ht===Math.PI&&(Tt=-.5/it);for(let It=0;It<=it;It++){const At=It/it;mt.x=-rt*Math.cos(lt+At*ct)*Math.sin(ut+Rt*dt),mt.y=rt*Math.cos(ut+Rt*dt),mt.z=rt*Math.sin(lt+At*ct)*Math.sin(ut+Rt*dt),yt.push(mt.x,mt.y,mt.z),gt.copy(mt).normalize(),vt.push(gt.x,gt.y,gt.z),St.push(At+Tt,1-Rt),wt.push(pt++)}ft.push(wt)}for(let Et=0;Et<st;Et++)for(let wt=0;wt<it;wt++){const Rt=ft[Et][wt+1],Tt=ft[Et][wt],It=ft[Et+1][wt],At=ft[Et+1][wt+1];(Et!==0||ut>0)&&xt.push(Rt,Tt,At),(Et!==st-1||ht<Math.PI)&&xt.push(Tt,It,At)}this.setIndex(xt),this.setAttribute("position",new Float32BufferAttribute(yt,3)),this.setAttribute("normal",new Float32BufferAttribute(vt,3)),this.setAttribute("uv",new Float32BufferAttribute(St,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new SphereGeometry(rt.radius,rt.widthSegments,rt.heightSegments,rt.phiStart,rt.phiLength,rt.thetaStart,rt.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],lt=[2,1,0,0,3,2,1,3,0,2,3,1];super(st,lt,rt,it),this.type="TetrahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new TetrahedronGeometry(rt.radius,rt.detail)}}class TorusGeometry extends BufferGeometry{constructor(rt=1,it=.4,st=12,lt=48,ct=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:rt,tube:it,radialSegments:st,tubularSegments:lt,arc:ct},st=Math.floor(st),lt=Math.floor(lt);const ut=[],dt=[],ht=[],pt=[],ft=new Vector3,mt=new Vector3,gt=new Vector3;for(let xt=0;xt<=st;xt++)for(let yt=0;yt<=lt;yt++){const vt=yt/lt*ct,St=xt/st*Math.PI*2;mt.x=(rt+it*Math.cos(St))*Math.cos(vt),mt.y=(rt+it*Math.cos(St))*Math.sin(vt),mt.z=it*Math.sin(St),dt.push(mt.x,mt.y,mt.z),ft.x=rt*Math.cos(vt),ft.y=rt*Math.sin(vt),gt.subVectors(mt,ft).normalize(),ht.push(gt.x,gt.y,gt.z),pt.push(yt/lt),pt.push(xt/st)}for(let xt=1;xt<=st;xt++)for(let yt=1;yt<=lt;yt++){const vt=(lt+1)*xt+yt-1,St=(lt+1)*(xt-1)+yt-1,Et=(lt+1)*(xt-1)+yt,wt=(lt+1)*xt+yt;ut.push(vt,St,wt),ut.push(St,Et,wt)}this.setIndex(ut),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new TorusGeometry(rt.radius,rt.tube,rt.radialSegments,rt.tubularSegments,rt.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(rt=1,it=.4,st=64,lt=8,ct=2,ut=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:rt,tube:it,tubularSegments:st,radialSegments:lt,p:ct,q:ut},st=Math.floor(st),lt=Math.floor(lt);const dt=[],ht=[],pt=[],ft=[],mt=new Vector3,gt=new Vector3,xt=new Vector3,yt=new Vector3,vt=new Vector3,St=new Vector3,Et=new Vector3;for(let Rt=0;Rt<=st;++Rt){const Tt=Rt/st*ct*Math.PI*2;wt(Tt,ct,ut,rt,xt),wt(Tt+.01,ct,ut,rt,yt),St.subVectors(yt,xt),Et.addVectors(yt,xt),vt.crossVectors(St,Et),Et.crossVectors(vt,St),vt.normalize(),Et.normalize();for(let It=0;It<=lt;++It){const At=It/lt*Math.PI*2,Dt=-it*Math.cos(At),jt=it*Math.sin(At);mt.x=xt.x+(Dt*Et.x+jt*vt.x),mt.y=xt.y+(Dt*Et.y+jt*vt.y),mt.z=xt.z+(Dt*Et.z+jt*vt.z),ht.push(mt.x,mt.y,mt.z),gt.subVectors(mt,xt).normalize(),pt.push(gt.x,gt.y,gt.z),ft.push(Rt/st),ft.push(It/lt)}}for(let Rt=1;Rt<=st;Rt++)for(let Tt=1;Tt<=lt;Tt++){const It=(lt+1)*(Rt-1)+(Tt-1),At=(lt+1)*Rt+(Tt-1),Dt=(lt+1)*Rt+Tt,jt=(lt+1)*(Rt-1)+Tt;dt.push(It,At,jt),dt.push(At,Dt,jt)}this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(ht,3)),this.setAttribute("normal",new Float32BufferAttribute(pt,3)),this.setAttribute("uv",new Float32BufferAttribute(ft,2));function wt(Rt,Tt,It,At,Dt){const jt=Math.cos(Rt),Ft=Math.sin(Rt),Lt=It/Tt*Rt,Pt=Math.cos(Lt);Dt.x=At*(2+Pt)*.5*jt,Dt.y=At*(2+Pt)*Ft*.5,Dt.z=At*Math.sin(Lt)*.5}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new TorusKnotGeometry(rt.radius,rt.tube,rt.tubularSegments,rt.radialSegments,rt.p,rt.q)}}class TubeGeometry extends BufferGeometry{constructor(rt=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),it=64,st=1,lt=8,ct=!1){super(),this.type="TubeGeometry",this.parameters={path:rt,tubularSegments:it,radius:st,radialSegments:lt,closed:ct};const ut=rt.computeFrenetFrames(it,ct);this.tangents=ut.tangents,this.normals=ut.normals,this.binormals=ut.binormals;const dt=new Vector3,ht=new Vector3,pt=new Vector2;let ft=new Vector3;const mt=[],gt=[],xt=[],yt=[];vt(),this.setIndex(yt),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(xt,2));function vt(){for(let Rt=0;Rt<it;Rt++)St(Rt);St(ct===!1?it:0),wt(),Et()}function St(Rt){ft=rt.getPointAt(Rt/it,ft);const Tt=ut.normals[Rt],It=ut.binormals[Rt];for(let At=0;At<=lt;At++){const Dt=At/lt*Math.PI*2,jt=Math.sin(Dt),Ft=-Math.cos(Dt);ht.x=Ft*Tt.x+jt*It.x,ht.y=Ft*Tt.y+jt*It.y,ht.z=Ft*Tt.z+jt*It.z,ht.normalize(),gt.push(ht.x,ht.y,ht.z),dt.x=ft.x+st*ht.x,dt.y=ft.y+st*ht.y,dt.z=ft.z+st*ht.z,mt.push(dt.x,dt.y,dt.z)}}function Et(){for(let Rt=1;Rt<=it;Rt++)for(let Tt=1;Tt<=lt;Tt++){const It=(lt+1)*(Rt-1)+(Tt-1),At=(lt+1)*Rt+(Tt-1),Dt=(lt+1)*Rt+Tt,jt=(lt+1)*(Rt-1)+Tt;yt.push(It,At,jt),yt.push(At,Dt,jt)}}function wt(){for(let Rt=0;Rt<=it;Rt++)for(let Tt=0;Tt<=lt;Tt++)pt.x=Rt/it,pt.y=Tt/lt,xt.push(pt.x,pt.y)}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON();return rt.path=this.parameters.path.toJSON(),rt}static fromJSON(rt){return new TubeGeometry(new Curves[rt.path.type]().fromJSON(rt.path),rt.tubularSegments,rt.radius,rt.radialSegments,rt.closed)}}class WireframeGeometry extends BufferGeometry{constructor(rt=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:rt},rt!==null){const it=[],st=new Set,lt=new Vector3,ct=new Vector3;if(rt.index!==null){const ut=rt.attributes.position,dt=rt.index;let ht=rt.groups;ht.length===0&&(ht=[{start:0,count:dt.count,materialIndex:0}]);for(let pt=0,ft=ht.length;pt<ft;++pt){const mt=ht[pt],gt=mt.start,xt=mt.count;for(let yt=gt,vt=gt+xt;yt<vt;yt+=3)for(let St=0;St<3;St++){const Et=dt.getX(yt+St),wt=dt.getX(yt+(St+1)%3);lt.fromBufferAttribute(ut,Et),ct.fromBufferAttribute(ut,wt),isUniqueEdge(lt,ct,st)===!0&&(it.push(lt.x,lt.y,lt.z),it.push(ct.x,ct.y,ct.z))}}}else{const ut=rt.attributes.position;for(let dt=0,ht=ut.count/3;dt<ht;dt++)for(let pt=0;pt<3;pt++){const ft=3*dt+pt,mt=3*dt+(pt+1)%3;lt.fromBufferAttribute(ut,ft),ct.fromBufferAttribute(ut,mt),isUniqueEdge(lt,ct,st)===!0&&(it.push(lt.x,lt.y,lt.z),it.push(ct.x,ct.y,ct.z))}}this.setAttribute("position",new Float32BufferAttribute(it,3))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}}function isUniqueEdge(nt,rt,it){const st=`${nt.x},${nt.y},${nt.z}-${rt.x},${rt.y},${rt.z}`,lt=`${rt.x},${rt.y},${rt.z}-${nt.x},${nt.y},${nt.z}`;return it.has(st)===!0||it.has(lt)===!0?!1:(it.add(st),it.add(lt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(rt){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.fog=rt.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(rt){super(rt),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(rt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.defines={STANDARD:""},this.color.copy(rt.color),this.roughness=rt.roughness,this.metalness=rt.metalness,this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.roughnessMap=rt.roughnessMap,this.metalnessMap=rt.metalnessMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.envMapIntensity=rt.envMapIntensity,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(rt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(it){this.ior=(1+.4*it)/(1-.4*it)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(rt)}get anisotropy(){return this._anisotropy}set anisotropy(rt){this._anisotropy>0!=rt>0&&this.version++,this._anisotropy=rt}get clearcoat(){return this._clearcoat}set clearcoat(rt){this._clearcoat>0!=rt>0&&this.version++,this._clearcoat=rt}get iridescence(){return this._iridescence}set iridescence(rt){this._iridescence>0!=rt>0&&this.version++,this._iridescence=rt}get sheen(){return this._sheen}set sheen(rt){this._sheen>0!=rt>0&&this.version++,this._sheen=rt}get transmission(){return this._transmission}set transmission(rt){this._transmission>0!=rt>0&&this.version++,this._transmission=rt}copy(rt){return super.copy(rt),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=rt.anisotropy,this.anisotropyRotation=rt.anisotropyRotation,this.anisotropyMap=rt.anisotropyMap,this.clearcoat=rt.clearcoat,this.clearcoatMap=rt.clearcoatMap,this.clearcoatRoughness=rt.clearcoatRoughness,this.clearcoatRoughnessMap=rt.clearcoatRoughnessMap,this.clearcoatNormalMap=rt.clearcoatNormalMap,this.clearcoatNormalScale.copy(rt.clearcoatNormalScale),this.ior=rt.ior,this.iridescence=rt.iridescence,this.iridescenceMap=rt.iridescenceMap,this.iridescenceIOR=rt.iridescenceIOR,this.iridescenceThicknessRange=[...rt.iridescenceThicknessRange],this.iridescenceThicknessMap=rt.iridescenceThicknessMap,this.sheen=rt.sheen,this.sheenColor.copy(rt.sheenColor),this.sheenColorMap=rt.sheenColorMap,this.sheenRoughness=rt.sheenRoughness,this.sheenRoughnessMap=rt.sheenRoughnessMap,this.transmission=rt.transmission,this.transmissionMap=rt.transmissionMap,this.thickness=rt.thickness,this.thicknessMap=rt.thicknessMap,this.attenuationDistance=rt.attenuationDistance,this.attenuationColor.copy(rt.attenuationColor),this.specularIntensity=rt.specularIntensity,this.specularIntensityMap=rt.specularIntensityMap,this.specularColor.copy(rt.specularColor),this.specularColorMap=rt.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(rt){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.specular.copy(rt.specular),this.shininess=rt.shininess,this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshToonMaterial extends Material{constructor(rt){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.gradientMap=rt.gradientMap,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.alphaMap=rt.alphaMap,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.fog=rt.fog,this}}class MeshNormalMaterial extends Material{constructor(rt){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(rt)}copy(rt){return super.copy(rt),this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.flatShading=rt.flatShading,this}}class MeshLambertMaterial extends Material{constructor(rt){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshMatcapMaterial extends Material{constructor(rt){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.defines={MATCAP:""},this.color.copy(rt.color),this.matcap=rt.matcap,this.map=rt.map,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.alphaMap=rt.alphaMap,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(rt){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(rt)}copy(rt){return super.copy(rt),this.scale=rt.scale,this.dashSize=rt.dashSize,this.gapSize=rt.gapSize,this}}function convertArray(nt,rt,it){return!nt||!it&&nt.constructor===rt?nt:typeof rt.BYTES_PER_ELEMENT=="number"?new rt(nt):Array.prototype.slice.call(nt)}function isTypedArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function getKeyframeOrder(nt){function rt(lt,ct){return nt[lt]-nt[ct]}const it=nt.length,st=new Array(it);for(let lt=0;lt!==it;++lt)st[lt]=lt;return st.sort(rt),st}function sortedArray(nt,rt,it){const st=nt.length,lt=new nt.constructor(st);for(let ct=0,ut=0;ut!==st;++ct){const dt=it[ct]*rt;for(let ht=0;ht!==rt;++ht)lt[ut++]=nt[dt+ht]}return lt}function flattenJSON(nt,rt,it,st){let lt=1,ct=nt[0];for(;ct!==void 0&&ct[st]===void 0;)ct=nt[lt++];if(ct===void 0)return;let ut=ct[st];if(ut!==void 0)if(Array.isArray(ut))do ut=ct[st],ut!==void 0&&(rt.push(ct.time),it.push.apply(it,ut)),ct=nt[lt++];while(ct!==void 0);else if(ut.toArray!==void 0)do ut=ct[st],ut!==void 0&&(rt.push(ct.time),ut.toArray(it,it.length)),ct=nt[lt++];while(ct!==void 0);else do ut=ct[st],ut!==void 0&&(rt.push(ct.time),it.push(ut)),ct=nt[lt++];while(ct!==void 0)}function subclip(nt,rt,it,st,lt=30){const ct=nt.clone();ct.name=rt;const ut=[];for(let ht=0;ht<ct.tracks.length;++ht){const pt=ct.tracks[ht],ft=pt.getValueSize(),mt=[],gt=[];for(let xt=0;xt<pt.times.length;++xt){const yt=pt.times[xt]*lt;if(!(yt<it||yt>=st)){mt.push(pt.times[xt]);for(let vt=0;vt<ft;++vt)gt.push(pt.values[xt*ft+vt])}}mt.length!==0&&(pt.times=convertArray(mt,pt.times.constructor),pt.values=convertArray(gt,pt.values.constructor),ut.push(pt))}ct.tracks=ut;let dt=1/0;for(let ht=0;ht<ct.tracks.length;++ht)dt>ct.tracks[ht].times[0]&&(dt=ct.tracks[ht].times[0]);for(let ht=0;ht<ct.tracks.length;++ht)ct.tracks[ht].shift(-1*dt);return ct.resetDuration(),ct}function makeClipAdditive(nt,rt=0,it=nt,st=30){st<=0&&(st=30);const lt=it.tracks.length,ct=rt/st;for(let ut=0;ut<lt;++ut){const dt=it.tracks[ut],ht=dt.ValueTypeName;if(ht==="bool"||ht==="string")continue;const pt=nt.tracks.find(function(Et){return Et.name===dt.name&&Et.ValueTypeName===ht});if(pt===void 0)continue;let ft=0;const mt=dt.getValueSize();dt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ft=mt/3);let gt=0;const xt=pt.getValueSize();pt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(gt=xt/3);const yt=dt.times.length-1;let vt;if(ct<=dt.times[0]){const Et=ft,wt=mt-ft;vt=dt.values.slice(Et,wt)}else if(ct>=dt.times[yt]){const Et=yt*mt+ft,wt=Et+mt-ft;vt=dt.values.slice(Et,wt)}else{const Et=dt.createInterpolant(),wt=ft,Rt=mt-ft;Et.evaluate(ct),vt=Et.resultBuffer.slice(wt,Rt)}ht==="quaternion"&&new Quaternion().fromArray(vt).normalize().conjugate().toArray(vt);const St=pt.times.length;for(let Et=0;Et<St;++Et){const wt=Et*xt+gt;if(ht==="quaternion")Quaternion.multiplyQuaternionsFlat(pt.values,wt,vt,0,pt.values,wt);else{const Rt=xt-gt*2;for(let Tt=0;Tt<Rt;++Tt)pt.values[wt+Tt]-=vt[Tt]}}}return nt.blendMode=AdditiveAnimationBlendMode,nt}const AnimationUtils={convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(rt,it,st,lt){this.parameterPositions=rt,this._cachedIndex=0,this.resultBuffer=lt!==void 0?lt:new it.constructor(st),this.sampleValues=it,this.valueSize=st,this.settings=null,this.DefaultSettings_={}}evaluate(rt){const it=this.parameterPositions;let st=this._cachedIndex,lt=it[st],ct=it[st-1];e:{t:{let ut;r:{n:if(!(rt<lt)){for(let dt=st+2;;){if(lt===void 0){if(rt<ct)break n;return st=it.length,this._cachedIndex=st,this.copySampleValue_(st-1)}if(st===dt)break;if(ct=lt,lt=it[++st],rt<lt)break t}ut=it.length;break r}if(!(rt>=ct)){const dt=it[1];rt<dt&&(st=2,ct=dt);for(let ht=st-2;;){if(ct===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(st===ht)break;if(lt=ct,ct=it[--st-1],rt>=ct)break t}ut=st,st=0;break r}break e}for(;st<ut;){const dt=st+ut>>>1;rt<it[dt]?ut=dt:st=dt+1}if(lt=it[st],ct=it[st-1],ct===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(lt===void 0)return st=it.length,this._cachedIndex=st,this.copySampleValue_(st-1)}this._cachedIndex=st,this.intervalChanged_(st,ct,lt)}return this.interpolate_(st,ct,rt,lt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(rt){const it=this.resultBuffer,st=this.sampleValues,lt=this.valueSize,ct=rt*lt;for(let ut=0;ut!==lt;++ut)it[ut]=st[ct+ut];return it}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(rt,it,st){const lt=this.parameterPositions;let ct=rt-2,ut=rt+1,dt=lt[ct],ht=lt[ut];if(dt===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ct=rt,dt=2*it-st;break;case WrapAroundEnding:ct=lt.length-2,dt=it+lt[ct]-lt[ct+1];break;default:ct=rt,dt=st}if(ht===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:ut=rt,ht=2*st-it;break;case WrapAroundEnding:ut=1,ht=st+lt[1]-lt[0];break;default:ut=rt-1,ht=it}const pt=(st-it)*.5,ft=this.valueSize;this._weightPrev=pt/(it-dt),this._weightNext=pt/(ht-st),this._offsetPrev=ct*ft,this._offsetNext=ut*ft}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=rt*dt,pt=ht-dt,ft=this._offsetPrev,mt=this._offsetNext,gt=this._weightPrev,xt=this._weightNext,yt=(st-it)/(lt-it),vt=yt*yt,St=vt*yt,Et=-gt*St+2*gt*vt-gt*yt,wt=(1+gt)*St+(-1.5-2*gt)*vt+(-.5+gt)*yt+1,Rt=(-1-xt)*St+(1.5+xt)*vt+.5*yt,Tt=xt*St-xt*vt;for(let It=0;It!==dt;++It)ct[It]=Et*ut[ft+It]+wt*ut[pt+It]+Rt*ut[ht+It]+Tt*ut[mt+It];return ct}}class LinearInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=rt*dt,pt=ht-dt,ft=(st-it)/(lt-it),mt=1-ft;for(let gt=0;gt!==dt;++gt)ct[gt]=ut[pt+gt]*mt+ut[ht+gt]*ft;return ct}}class DiscreteInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt){return this.copySampleValue_(rt-1)}}class KeyframeTrack{constructor(rt,it,st,lt){if(rt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(it===void 0||it.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+rt);this.name=rt,this.times=convertArray(it,this.TimeBufferType),this.values=convertArray(st,this.ValueBufferType),this.setInterpolation(lt||this.DefaultInterpolation)}static toJSON(rt){const it=rt.constructor;let st;if(it.toJSON!==this.toJSON)st=it.toJSON(rt);else{st={name:rt.name,times:convertArray(rt.times,Array),values:convertArray(rt.values,Array)};const lt=rt.getInterpolation();lt!==rt.DefaultInterpolation&&(st.interpolation=lt)}return st.type=rt.ValueTypeName,st}InterpolantFactoryMethodDiscrete(rt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),rt)}InterpolantFactoryMethodLinear(rt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),rt)}InterpolantFactoryMethodSmooth(rt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),rt)}setInterpolation(rt){let it;switch(rt){case InterpolateDiscrete:it=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:it=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:it=this.InterpolantFactoryMethodSmooth;break}if(it===void 0){const st="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(rt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(st);return console.warn("THREE.KeyframeTrack:",st),this}return this.createInterpolant=it,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(rt){if(rt!==0){const it=this.times;for(let st=0,lt=it.length;st!==lt;++st)it[st]+=rt}return this}scale(rt){if(rt!==1){const it=this.times;for(let st=0,lt=it.length;st!==lt;++st)it[st]*=rt}return this}trim(rt,it){const st=this.times,lt=st.length;let ct=0,ut=lt-1;for(;ct!==lt&&st[ct]<rt;)++ct;for(;ut!==-1&&st[ut]>it;)--ut;if(++ut,ct!==0||ut!==lt){ct>=ut&&(ut=Math.max(ut,1),ct=ut-1);const dt=this.getValueSize();this.times=st.slice(ct,ut),this.values=this.values.slice(ct*dt,ut*dt)}return this}validate(){let rt=!0;const it=this.getValueSize();it-Math.floor(it)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),rt=!1);const st=this.times,lt=this.values,ct=st.length;ct===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),rt=!1);let ut=null;for(let dt=0;dt!==ct;dt++){const ht=st[dt];if(typeof ht=="number"&&isNaN(ht)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,dt,ht),rt=!1;break}if(ut!==null&&ut>ht){console.error("THREE.KeyframeTrack: Out of order keys.",this,dt,ht,ut),rt=!1;break}ut=ht}if(lt!==void 0&&isTypedArray(lt))for(let dt=0,ht=lt.length;dt!==ht;++dt){const pt=lt[dt];if(isNaN(pt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,dt,pt),rt=!1;break}}return rt}optimize(){const rt=this.times.slice(),it=this.values.slice(),st=this.getValueSize(),lt=this.getInterpolation()===InterpolateSmooth,ct=rt.length-1;let ut=1;for(let dt=1;dt<ct;++dt){let ht=!1;const pt=rt[dt],ft=rt[dt+1];if(pt!==ft&&(dt!==1||pt!==rt[0]))if(lt)ht=!0;else{const mt=dt*st,gt=mt-st,xt=mt+st;for(let yt=0;yt!==st;++yt){const vt=it[mt+yt];if(vt!==it[gt+yt]||vt!==it[xt+yt]){ht=!0;break}}}if(ht){if(dt!==ut){rt[ut]=rt[dt];const mt=dt*st,gt=ut*st;for(let xt=0;xt!==st;++xt)it[gt+xt]=it[mt+xt]}++ut}}if(ct>0){rt[ut]=rt[ct];for(let dt=ct*st,ht=ut*st,pt=0;pt!==st;++pt)it[ht+pt]=it[dt+pt];++ut}return ut!==rt.length?(this.times=rt.slice(0,ut),this.values=it.slice(0,ut*st)):(this.times=rt,this.values=it),this}clone(){const rt=this.times.slice(),it=this.values.slice(),st=this.constructor,lt=new st(this.name,rt,it);return lt.createInterpolant=this.createInterpolant,lt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=(st-it)/(lt-it);let pt=rt*dt;for(let ft=pt+dt;pt!==ft;pt+=4)Quaternion.slerpFlat(ct,0,ut,pt-dt,ut,pt,ht);return ct}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(rt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),rt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(rt,it=-1,st,lt=NormalAnimationBlendMode){this.name=rt,this.tracks=st,this.duration=it,this.blendMode=lt,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(rt){const it=[],st=rt.tracks,lt=1/(rt.fps||1);for(let ut=0,dt=st.length;ut!==dt;++ut)it.push(parseKeyframeTrack(st[ut]).scale(lt));const ct=new this(rt.name,rt.duration,it,rt.blendMode);return ct.uuid=rt.uuid,ct}static toJSON(rt){const it=[],st=rt.tracks,lt={name:rt.name,duration:rt.duration,tracks:it,uuid:rt.uuid,blendMode:rt.blendMode};for(let ct=0,ut=st.length;ct!==ut;++ct)it.push(KeyframeTrack.toJSON(st[ct]));return lt}static CreateFromMorphTargetSequence(rt,it,st,lt){const ct=it.length,ut=[];for(let dt=0;dt<ct;dt++){let ht=[],pt=[];ht.push((dt+ct-1)%ct,dt,(dt+1)%ct),pt.push(0,1,0);const ft=getKeyframeOrder(ht);ht=sortedArray(ht,1,ft),pt=sortedArray(pt,1,ft),!lt&&ht[0]===0&&(ht.push(ct),pt.push(pt[0])),ut.push(new NumberKeyframeTrack(".morphTargetInfluences["+it[dt].name+"]",ht,pt).scale(1/st))}return new this(rt,-1,ut)}static findByName(rt,it){let st=rt;if(!Array.isArray(rt)){const lt=rt;st=lt.geometry&&lt.geometry.animations||lt.animations}for(let lt=0;lt<st.length;lt++)if(st[lt].name===it)return st[lt];return null}static CreateClipsFromMorphTargetSequences(rt,it,st){const lt={},ct=/^([\w-]*?)([\d]+)$/;for(let dt=0,ht=rt.length;dt<ht;dt++){const pt=rt[dt],ft=pt.name.match(ct);if(ft&&ft.length>1){const mt=ft[1];let gt=lt[mt];gt||(lt[mt]=gt=[]),gt.push(pt)}}const ut=[];for(const dt in lt)ut.push(this.CreateFromMorphTargetSequence(dt,lt[dt],it,st));return ut}static parseAnimation(rt,it){if(!rt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const st=function(mt,gt,xt,yt,vt){if(xt.length!==0){const St=[],Et=[];flattenJSON(xt,St,Et,yt),St.length!==0&&vt.push(new mt(gt,St,Et))}},lt=[],ct=rt.name||"default",ut=rt.fps||30,dt=rt.blendMode;let ht=rt.length||-1;const pt=rt.hierarchy||[];for(let mt=0;mt<pt.length;mt++){const gt=pt[mt].keys;if(!(!gt||gt.length===0))if(gt[0].morphTargets){const xt={};let yt;for(yt=0;yt<gt.length;yt++)if(gt[yt].morphTargets)for(let vt=0;vt<gt[yt].morphTargets.length;vt++)xt[gt[yt].morphTargets[vt]]=-1;for(const vt in xt){const St=[],Et=[];for(let wt=0;wt!==gt[yt].morphTargets.length;++wt){const Rt=gt[yt];St.push(Rt.time),Et.push(Rt.morphTarget===vt?1:0)}lt.push(new NumberKeyframeTrack(".morphTargetInfluence["+vt+"]",St,Et))}ht=xt.length*ut}else{const xt=".bones["+it[mt].name+"]";st(VectorKeyframeTrack,xt+".position",gt,"pos",lt),st(QuaternionKeyframeTrack,xt+".quaternion",gt,"rot",lt),st(VectorKeyframeTrack,xt+".scale",gt,"scl",lt)}}return lt.length===0?null:new this(ct,ht,lt,dt)}resetDuration(){const rt=this.tracks;let it=0;for(let st=0,lt=rt.length;st!==lt;++st){const ct=this.tracks[st];it=Math.max(it,ct.times[ct.times.length-1])}return this.duration=it,this}trim(){for(let rt=0;rt<this.tracks.length;rt++)this.tracks[rt].trim(0,this.duration);return this}validate(){let rt=!0;for(let it=0;it<this.tracks.length;it++)rt=rt&&this.tracks[it].validate();return rt}optimize(){for(let rt=0;rt<this.tracks.length;rt++)this.tracks[rt].optimize();return this}clone(){const rt=[];for(let it=0;it<this.tracks.length;it++)rt.push(this.tracks[it].clone());return new this.constructor(this.name,this.duration,rt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(nt){switch(nt.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+nt)}function parseKeyframeTrack(nt){if(nt.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const rt=getTrackTypeForValueTypeName(nt.type);if(nt.times===void 0){const it=[],st=[];flattenJSON(nt.keys,it,st,"value"),nt.times=it,nt.values=st}return rt.parse!==void 0?rt.parse(nt):new rt(nt.name,nt.times,nt.values,nt.interpolation)}const Cache={enabled:!1,files:{},add:function(nt,rt){this.enabled!==!1&&(this.files[nt]=rt)},get:function(nt){if(this.enabled!==!1)return this.files[nt]},remove:function(nt){delete this.files[nt]},clear:function(){this.files={}}};class LoadingManager{constructor(rt,it,st){const lt=this;let ct=!1,ut=0,dt=0,ht;const pt=[];this.onStart=void 0,this.onLoad=rt,this.onProgress=it,this.onError=st,this.itemStart=function(ft){dt++,ct===!1&&lt.onStart!==void 0&&lt.onStart(ft,ut,dt),ct=!0},this.itemEnd=function(ft){ut++,lt.onProgress!==void 0&&lt.onProgress(ft,ut,dt),ut===dt&&(ct=!1,lt.onLoad!==void 0&&lt.onLoad())},this.itemError=function(ft){lt.onError!==void 0&&lt.onError(ft)},this.resolveURL=function(ft){return ht?ht(ft):ft},this.setURLModifier=function(ft){return ht=ft,this},this.addHandler=function(ft,mt){return pt.push(ft,mt),this},this.removeHandler=function(ft){const mt=pt.indexOf(ft);return mt!==-1&&pt.splice(mt,2),this},this.getHandler=function(ft){for(let mt=0,gt=pt.length;mt<gt;mt+=2){const xt=pt[mt],yt=pt[mt+1];if(xt.global&&(xt.lastIndex=0),xt.test(ft))return yt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(rt){this.manager=rt!==void 0?rt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(rt,it){const st=this;return new Promise(function(lt,ct){st.load(rt,lt,it,ct)})}parse(){}setCrossOrigin(rt){return this.crossOrigin=rt,this}setWithCredentials(rt){return this.withCredentials=rt,this}setPath(rt){return this.path=rt,this}setResourcePath(rt){return this.resourcePath=rt,this}setRequestHeader(rt){return this.requestHeader=rt,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(rt,it){super(rt),this.response=it}}class FileLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){rt===void 0&&(rt=""),this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=Cache.get(rt);if(ct!==void 0)return this.manager.itemStart(rt),setTimeout(()=>{it&&it(ct),this.manager.itemEnd(rt)},0),ct;if(loading[rt]!==void 0){loading[rt].push({onLoad:it,onProgress:st,onError:lt});return}loading[rt]=[],loading[rt].push({onLoad:it,onProgress:st,onError:lt});const ut=new Request(rt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),dt=this.mimeType,ht=this.responseType;fetch(ut).then(pt=>{if(pt.status===200||pt.status===0){if(pt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||pt.body===void 0||pt.body.getReader===void 0)return pt;const ft=loading[rt],mt=pt.body.getReader(),gt=pt.headers.get("Content-Length")||pt.headers.get("X-File-Size"),xt=gt?parseInt(gt):0,yt=xt!==0;let vt=0;const St=new ReadableStream({start(Et){wt();function wt(){mt.read().then(({done:Rt,value:Tt})=>{if(Rt)Et.close();else{vt+=Tt.byteLength;const It=new ProgressEvent("progress",{lengthComputable:yt,loaded:vt,total:xt});for(let At=0,Dt=ft.length;At<Dt;At++){const jt=ft[At];jt.onProgress&&jt.onProgress(It)}Et.enqueue(Tt),wt()}})}}});return new Response(St)}else throw new HttpError(`fetch for "${pt.url}" responded with ${pt.status}: ${pt.statusText}`,pt)}).then(pt=>{switch(ht){case"arraybuffer":return pt.arrayBuffer();case"blob":return pt.blob();case"document":return pt.text().then(ft=>new DOMParser().parseFromString(ft,dt));case"json":return pt.json();default:if(dt===void 0)return pt.text();{const mt=/charset="?([^;"\s]*)"?/i.exec(dt),gt=mt&&mt[1]?mt[1].toLowerCase():void 0,xt=new TextDecoder(gt);return pt.arrayBuffer().then(yt=>xt.decode(yt))}}}).then(pt=>{Cache.add(rt,pt);const ft=loading[rt];delete loading[rt];for(let mt=0,gt=ft.length;mt<gt;mt++){const xt=ft[mt];xt.onLoad&&xt.onLoad(pt)}}).catch(pt=>{const ft=loading[rt];if(ft===void 0)throw this.manager.itemError(rt),pt;delete loading[rt];for(let mt=0,gt=ft.length;mt<gt;mt++){const xt=ft[mt];xt.onError&&xt.onError(pt)}this.manager.itemError(rt)}).finally(()=>{this.manager.itemEnd(rt)}),this.manager.itemStart(rt)}setResponseType(rt){return this.responseType=rt,this}setMimeType(rt){return this.mimeType=rt,this}}class AnimationLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it=[];for(let st=0;st<rt.length;st++){const lt=AnimationClip.parse(rt[st]);it.push(lt)}return it}}class CompressedTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=[],dt=new CompressedTexture,ht=new FileLoader(this.manager);ht.setPath(this.path),ht.setResponseType("arraybuffer"),ht.setRequestHeader(this.requestHeader),ht.setWithCredentials(ct.withCredentials);let pt=0;function ft(mt){ht.load(rt[mt],function(gt){const xt=ct.parse(gt,!0);ut[mt]={width:xt.width,height:xt.height,format:xt.format,mipmaps:xt.mipmaps},pt+=1,pt===6&&(xt.mipmapCount===1&&(dt.minFilter=LinearFilter),dt.image=ut,dt.format=xt.format,dt.needsUpdate=!0,it&&it(dt))},st,lt)}if(Array.isArray(rt))for(let mt=0,gt=rt.length;mt<gt;++mt)ft(mt);else ht.load(rt,function(mt){const gt=ct.parse(mt,!0);if(gt.isCubemap){const xt=gt.mipmaps.length/gt.mipmapCount;for(let yt=0;yt<xt;yt++){ut[yt]={mipmaps:[]};for(let vt=0;vt<gt.mipmapCount;vt++)ut[yt].mipmaps.push(gt.mipmaps[yt*gt.mipmapCount+vt]),ut[yt].format=gt.format,ut[yt].width=gt.width,ut[yt].height=gt.height}dt.image=ut}else dt.image.width=gt.width,dt.image.height=gt.height,dt.mipmaps=gt.mipmaps;gt.mipmapCount===1&&(dt.minFilter=LinearFilter),dt.format=gt.format,dt.needsUpdate=!0,it&&it(dt)},st,lt);return dt}}class ImageLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=this,ut=Cache.get(rt);if(ut!==void 0)return ct.manager.itemStart(rt),setTimeout(function(){it&&it(ut),ct.manager.itemEnd(rt)},0),ut;const dt=createElementNS("img");function ht(){ft(),Cache.add(rt,this),it&&it(this),ct.manager.itemEnd(rt)}function pt(mt){ft(),lt&&lt(mt),ct.manager.itemError(rt),ct.manager.itemEnd(rt)}function ft(){dt.removeEventListener("load",ht,!1),dt.removeEventListener("error",pt,!1)}return dt.addEventListener("load",ht,!1),dt.addEventListener("error",pt,!1),rt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(dt.crossOrigin=this.crossOrigin),ct.manager.itemStart(rt),dt.src=rt,dt}}class CubeTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=new CubeTexture;ct.colorSpace=SRGBColorSpace;const ut=new ImageLoader(this.manager);ut.setCrossOrigin(this.crossOrigin),ut.setPath(this.path);let dt=0;function ht(pt){ut.load(rt[pt],function(ft){ct.images[pt]=ft,dt++,dt===6&&(ct.needsUpdate=!0,it&&it(ct))},void 0,lt)}for(let pt=0;pt<rt.length;++pt)ht(pt);return ct}}class DataTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new DataTexture,dt=new FileLoader(this.manager);return dt.setResponseType("arraybuffer"),dt.setRequestHeader(this.requestHeader),dt.setPath(this.path),dt.setWithCredentials(ct.withCredentials),dt.load(rt,function(ht){let pt;try{pt=ct.parse(ht)}catch(ft){if(lt!==void 0)lt(ft);else{console.error(ft);return}}pt.image!==void 0?ut.image=pt.image:pt.data!==void 0&&(ut.image.width=pt.width,ut.image.height=pt.height,ut.image.data=pt.data),ut.wrapS=pt.wrapS!==void 0?pt.wrapS:ClampToEdgeWrapping,ut.wrapT=pt.wrapT!==void 0?pt.wrapT:ClampToEdgeWrapping,ut.magFilter=pt.magFilter!==void 0?pt.magFilter:LinearFilter,ut.minFilter=pt.minFilter!==void 0?pt.minFilter:LinearFilter,ut.anisotropy=pt.anisotropy!==void 0?pt.anisotropy:1,pt.colorSpace!==void 0?ut.colorSpace=pt.colorSpace:pt.encoding!==void 0&&(ut.encoding=pt.encoding),pt.flipY!==void 0&&(ut.flipY=pt.flipY),pt.format!==void 0&&(ut.format=pt.format),pt.type!==void 0&&(ut.type=pt.type),pt.mipmaps!==void 0&&(ut.mipmaps=pt.mipmaps,ut.minFilter=LinearMipmapLinearFilter),pt.mipmapCount===1&&(ut.minFilter=LinearFilter),pt.generateMipmaps!==void 0&&(ut.generateMipmaps=pt.generateMipmaps),ut.needsUpdate=!0,it&&it(ut,pt)},st,lt),ut}}class TextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=new Texture,ut=new ImageLoader(this.manager);return ut.setCrossOrigin(this.crossOrigin),ut.setPath(this.path),ut.load(rt,function(dt){ct.image=dt,ct.needsUpdate=!0,it!==void 0&&it(ct)},st,lt),ct}}class Light extends Object3D{constructor(rt,it=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(rt),this.intensity=it}dispose(){}copy(rt,it){return super.copy(rt,it),this.color.copy(rt.color),this.intensity=rt.intensity,this}toJSON(rt){const it=super.toJSON(rt);return it.object.color=this.color.getHex(),it.object.intensity=this.intensity,this.groundColor!==void 0&&(it.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(it.object.distance=this.distance),this.angle!==void 0&&(it.object.angle=this.angle),this.decay!==void 0&&(it.object.decay=this.decay),this.penumbra!==void 0&&(it.object.penumbra=this.penumbra),this.shadow!==void 0&&(it.object.shadow=this.shadow.toJSON()),it}}class HemisphereLight extends Light{constructor(rt,it,st){super(rt,st),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(it)}copy(rt,it){return super.copy(rt,it),this.groundColor.copy(rt.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(rt){this.camera=rt,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(rt){const it=this.camera,st=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(rt.matrixWorld),it.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(rt.target.matrixWorld),it.lookAt(_lookTarget$1),it.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(it.projectionMatrix,it.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),st.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),st.multiply(_projScreenMatrix$1)}getViewport(rt){return this._viewports[rt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(rt){return this.camera=rt.camera.clone(),this.bias=rt.bias,this.radius=rt.radius,this.mapSize.copy(rt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const rt={};return this.bias!==0&&(rt.bias=this.bias),this.normalBias!==0&&(rt.normalBias=this.normalBias),this.radius!==1&&(rt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(rt.mapSize=this.mapSize.toArray()),rt.camera=this.camera.toJSON(!1).object,delete rt.camera.matrix,rt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(rt){const it=this.camera,st=RAD2DEG*2*rt.angle*this.focus,lt=this.mapSize.width/this.mapSize.height,ct=rt.distance||it.far;(st!==it.fov||lt!==it.aspect||ct!==it.far)&&(it.fov=st,it.aspect=lt,it.far=ct,it.updateProjectionMatrix()),super.updateMatrices(rt)}copy(rt){return super.copy(rt),this.focus=rt.focus,this}}class SpotLight extends Light{constructor(rt,it,st=0,lt=Math.PI/3,ct=0,ut=2){super(rt,it),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=st,this.angle=lt,this.penumbra=ct,this.decay=ut,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(rt){this.intensity=rt/Math.PI}dispose(){this.shadow.dispose()}copy(rt,it){return super.copy(rt,it),this.distance=rt.distance,this.angle=rt.angle,this.penumbra=rt.penumbra,this.decay=rt.decay,this.target=rt.target.clone(),this.shadow=rt.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(rt,it=0){const st=this.camera,lt=this.matrix,ct=rt.distance||st.far;ct!==st.far&&(st.far=ct,st.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(rt.matrixWorld),st.position.copy(_lightPositionWorld),_lookTarget.copy(st.position),_lookTarget.add(this._cubeDirections[it]),st.up.copy(this._cubeUps[it]),st.lookAt(_lookTarget),st.updateMatrixWorld(),lt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(rt,it,st=0,lt=2){super(rt,it),this.isPointLight=!0,this.type="PointLight",this.distance=st,this.decay=lt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(rt){this.intensity=rt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(rt,it){return super.copy(rt,it),this.distance=rt.distance,this.decay=rt.decay,this.shadow=rt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(rt,it){super(rt,it),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(rt){return super.copy(rt),this.target=rt.target.clone(),this.shadow=rt.shadow.clone(),this}}class AmbientLight extends Light{constructor(rt,it){super(rt,it),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(rt,it,st=10,lt=10){super(rt,it),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=st,this.height=lt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(rt){this.intensity=rt/(this.width*this.height*Math.PI)}copy(rt){return super.copy(rt),this.width=rt.width,this.height=rt.height,this}toJSON(rt){const it=super.toJSON(rt);return it.object.width=this.width,it.object.height=this.height,it}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let rt=0;rt<9;rt++)this.coefficients.push(new Vector3)}set(rt){for(let it=0;it<9;it++)this.coefficients[it].copy(rt[it]);return this}zero(){for(let rt=0;rt<9;rt++)this.coefficients[rt].set(0,0,0);return this}getAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=this.coefficients;return it.copy(ut[0]).multiplyScalar(.282095),it.addScaledVector(ut[1],.488603*lt),it.addScaledVector(ut[2],.488603*ct),it.addScaledVector(ut[3],.488603*st),it.addScaledVector(ut[4],1.092548*(st*lt)),it.addScaledVector(ut[5],1.092548*(lt*ct)),it.addScaledVector(ut[6],.315392*(3*ct*ct-1)),it.addScaledVector(ut[7],1.092548*(st*ct)),it.addScaledVector(ut[8],.546274*(st*st-lt*lt)),it}getIrradianceAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=this.coefficients;return it.copy(ut[0]).multiplyScalar(.886227),it.addScaledVector(ut[1],2*.511664*lt),it.addScaledVector(ut[2],2*.511664*ct),it.addScaledVector(ut[3],2*.511664*st),it.addScaledVector(ut[4],2*.429043*st*lt),it.addScaledVector(ut[5],2*.429043*lt*ct),it.addScaledVector(ut[6],.743125*ct*ct-.247708),it.addScaledVector(ut[7],2*.429043*st*ct),it.addScaledVector(ut[8],.429043*(st*st-lt*lt)),it}add(rt){for(let it=0;it<9;it++)this.coefficients[it].add(rt.coefficients[it]);return this}addScaledSH(rt,it){for(let st=0;st<9;st++)this.coefficients[st].addScaledVector(rt.coefficients[st],it);return this}scale(rt){for(let it=0;it<9;it++)this.coefficients[it].multiplyScalar(rt);return this}lerp(rt,it){for(let st=0;st<9;st++)this.coefficients[st].lerp(rt.coefficients[st],it);return this}equals(rt){for(let it=0;it<9;it++)if(!this.coefficients[it].equals(rt.coefficients[it]))return!1;return!0}copy(rt){return this.set(rt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(rt,it=0){const st=this.coefficients;for(let lt=0;lt<9;lt++)st[lt].fromArray(rt,it+lt*3);return this}toArray(rt=[],it=0){const st=this.coefficients;for(let lt=0;lt<9;lt++)st[lt].toArray(rt,it+lt*3);return rt}static getBasisAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z;it[0]=.282095,it[1]=.488603*lt,it[2]=.488603*ct,it[3]=.488603*st,it[4]=1.092548*st*lt,it[5]=1.092548*lt*ct,it[6]=.315392*(3*ct*ct-1),it[7]=1.092548*st*ct,it[8]=.546274*(st*st-lt*lt)}}class LightProbe extends Light{constructor(rt=new SphericalHarmonics3,it=1){super(void 0,it),this.isLightProbe=!0,this.sh=rt}copy(rt){return super.copy(rt),this.sh.copy(rt.sh),this}fromJSON(rt){return this.intensity=rt.intensity,this.sh.fromArray(rt.sh),this}toJSON(rt){const it=super.toJSON(rt);return it.object.sh=this.sh.toArray(),it}}class MaterialLoader extends Loader{constructor(rt){super(rt),this.textures={}}load(rt,it,st,lt){const ct=this,ut=new FileLoader(ct.manager);ut.setPath(ct.path),ut.setRequestHeader(ct.requestHeader),ut.setWithCredentials(ct.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it=this.textures;function st(ct){return it[ct]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ct),it[ct]}const lt=MaterialLoader.createMaterialFromType(rt.type);if(rt.uuid!==void 0&&(lt.uuid=rt.uuid),rt.name!==void 0&&(lt.name=rt.name),rt.color!==void 0&&lt.color!==void 0&&lt.color.setHex(rt.color),rt.roughness!==void 0&&(lt.roughness=rt.roughness),rt.metalness!==void 0&&(lt.metalness=rt.metalness),rt.sheen!==void 0&&(lt.sheen=rt.sheen),rt.sheenColor!==void 0&&(lt.sheenColor=new Color().setHex(rt.sheenColor)),rt.sheenRoughness!==void 0&&(lt.sheenRoughness=rt.sheenRoughness),rt.emissive!==void 0&&lt.emissive!==void 0&&lt.emissive.setHex(rt.emissive),rt.specular!==void 0&&lt.specular!==void 0&&lt.specular.setHex(rt.specular),rt.specularIntensity!==void 0&&(lt.specularIntensity=rt.specularIntensity),rt.specularColor!==void 0&&lt.specularColor!==void 0&&lt.specularColor.setHex(rt.specularColor),rt.shininess!==void 0&&(lt.shininess=rt.shininess),rt.clearcoat!==void 0&&(lt.clearcoat=rt.clearcoat),rt.clearcoatRoughness!==void 0&&(lt.clearcoatRoughness=rt.clearcoatRoughness),rt.iridescence!==void 0&&(lt.iridescence=rt.iridescence),rt.iridescenceIOR!==void 0&&(lt.iridescenceIOR=rt.iridescenceIOR),rt.iridescenceThicknessRange!==void 0&&(lt.iridescenceThicknessRange=rt.iridescenceThicknessRange),rt.transmission!==void 0&&(lt.transmission=rt.transmission),rt.thickness!==void 0&&(lt.thickness=rt.thickness),rt.attenuationDistance!==void 0&&(lt.attenuationDistance=rt.attenuationDistance),rt.attenuationColor!==void 0&&lt.attenuationColor!==void 0&&lt.attenuationColor.setHex(rt.attenuationColor),rt.anisotropy!==void 0&&(lt.anisotropy=rt.anisotropy),rt.anisotropyRotation!==void 0&&(lt.anisotropyRotation=rt.anisotropyRotation),rt.fog!==void 0&&(lt.fog=rt.fog),rt.flatShading!==void 0&&(lt.flatShading=rt.flatShading),rt.blending!==void 0&&(lt.blending=rt.blending),rt.combine!==void 0&&(lt.combine=rt.combine),rt.side!==void 0&&(lt.side=rt.side),rt.shadowSide!==void 0&&(lt.shadowSide=rt.shadowSide),rt.opacity!==void 0&&(lt.opacity=rt.opacity),rt.transparent!==void 0&&(lt.transparent=rt.transparent),rt.alphaTest!==void 0&&(lt.alphaTest=rt.alphaTest),rt.alphaHash!==void 0&&(lt.alphaHash=rt.alphaHash),rt.depthFunc!==void 0&&(lt.depthFunc=rt.depthFunc),rt.depthTest!==void 0&&(lt.depthTest=rt.depthTest),rt.depthWrite!==void 0&&(lt.depthWrite=rt.depthWrite),rt.colorWrite!==void 0&&(lt.colorWrite=rt.colorWrite),rt.blendSrc!==void 0&&(lt.blendSrc=rt.blendSrc),rt.blendDst!==void 0&&(lt.blendDst=rt.blendDst),rt.blendEquation!==void 0&&(lt.blendEquation=rt.blendEquation),rt.blendSrcAlpha!==void 0&&(lt.blendSrcAlpha=rt.blendSrcAlpha),rt.blendDstAlpha!==void 0&&(lt.blendDstAlpha=rt.blendDstAlpha),rt.blendEquationAlpha!==void 0&&(lt.blendEquationAlpha=rt.blendEquationAlpha),rt.blendColor!==void 0&&lt.blendColor!==void 0&&lt.blendColor.setHex(rt.blendColor),rt.blendAlpha!==void 0&&(lt.blendAlpha=rt.blendAlpha),rt.stencilWriteMask!==void 0&&(lt.stencilWriteMask=rt.stencilWriteMask),rt.stencilFunc!==void 0&&(lt.stencilFunc=rt.stencilFunc),rt.stencilRef!==void 0&&(lt.stencilRef=rt.stencilRef),rt.stencilFuncMask!==void 0&&(lt.stencilFuncMask=rt.stencilFuncMask),rt.stencilFail!==void 0&&(lt.stencilFail=rt.stencilFail),rt.stencilZFail!==void 0&&(lt.stencilZFail=rt.stencilZFail),rt.stencilZPass!==void 0&&(lt.stencilZPass=rt.stencilZPass),rt.stencilWrite!==void 0&&(lt.stencilWrite=rt.stencilWrite),rt.wireframe!==void 0&&(lt.wireframe=rt.wireframe),rt.wireframeLinewidth!==void 0&&(lt.wireframeLinewidth=rt.wireframeLinewidth),rt.wireframeLinecap!==void 0&&(lt.wireframeLinecap=rt.wireframeLinecap),rt.wireframeLinejoin!==void 0&&(lt.wireframeLinejoin=rt.wireframeLinejoin),rt.rotation!==void 0&&(lt.rotation=rt.rotation),rt.linewidth!==void 0&&(lt.linewidth=rt.linewidth),rt.dashSize!==void 0&&(lt.dashSize=rt.dashSize),rt.gapSize!==void 0&&(lt.gapSize=rt.gapSize),rt.scale!==void 0&&(lt.scale=rt.scale),rt.polygonOffset!==void 0&&(lt.polygonOffset=rt.polygonOffset),rt.polygonOffsetFactor!==void 0&&(lt.polygonOffsetFactor=rt.polygonOffsetFactor),rt.polygonOffsetUnits!==void 0&&(lt.polygonOffsetUnits=rt.polygonOffsetUnits),rt.dithering!==void 0&&(lt.dithering=rt.dithering),rt.alphaToCoverage!==void 0&&(lt.alphaToCoverage=rt.alphaToCoverage),rt.premultipliedAlpha!==void 0&&(lt.premultipliedAlpha=rt.premultipliedAlpha),rt.forceSinglePass!==void 0&&(lt.forceSinglePass=rt.forceSinglePass),rt.visible!==void 0&&(lt.visible=rt.visible),rt.toneMapped!==void 0&&(lt.toneMapped=rt.toneMapped),rt.userData!==void 0&&(lt.userData=rt.userData),rt.vertexColors!==void 0&&(typeof rt.vertexColors=="number"?lt.vertexColors=rt.vertexColors>0:lt.vertexColors=rt.vertexColors),rt.uniforms!==void 0)for(const ct in rt.uniforms){const ut=rt.uniforms[ct];switch(lt.uniforms[ct]={},ut.type){case"t":lt.uniforms[ct].value=st(ut.value);break;case"c":lt.uniforms[ct].value=new Color().setHex(ut.value);break;case"v2":lt.uniforms[ct].value=new Vector2().fromArray(ut.value);break;case"v3":lt.uniforms[ct].value=new Vector3().fromArray(ut.value);break;case"v4":lt.uniforms[ct].value=new Vector4().fromArray(ut.value);break;case"m3":lt.uniforms[ct].value=new Matrix3().fromArray(ut.value);break;case"m4":lt.uniforms[ct].value=new Matrix4().fromArray(ut.value);break;default:lt.uniforms[ct].value=ut.value}}if(rt.defines!==void 0&&(lt.defines=rt.defines),rt.vertexShader!==void 0&&(lt.vertexShader=rt.vertexShader),rt.fragmentShader!==void 0&&(lt.fragmentShader=rt.fragmentShader),rt.glslVersion!==void 0&&(lt.glslVersion=rt.glslVersion),rt.extensions!==void 0)for(const ct in rt.extensions)lt.extensions[ct]=rt.extensions[ct];if(rt.lights!==void 0&&(lt.lights=rt.lights),rt.clipping!==void 0&&(lt.clipping=rt.clipping),rt.size!==void 0&&(lt.size=rt.size),rt.sizeAttenuation!==void 0&&(lt.sizeAttenuation=rt.sizeAttenuation),rt.map!==void 0&&(lt.map=st(rt.map)),rt.matcap!==void 0&&(lt.matcap=st(rt.matcap)),rt.alphaMap!==void 0&&(lt.alphaMap=st(rt.alphaMap)),rt.bumpMap!==void 0&&(lt.bumpMap=st(rt.bumpMap)),rt.bumpScale!==void 0&&(lt.bumpScale=rt.bumpScale),rt.normalMap!==void 0&&(lt.normalMap=st(rt.normalMap)),rt.normalMapType!==void 0&&(lt.normalMapType=rt.normalMapType),rt.normalScale!==void 0){let ct=rt.normalScale;Array.isArray(ct)===!1&&(ct=[ct,ct]),lt.normalScale=new Vector2().fromArray(ct)}return rt.displacementMap!==void 0&&(lt.displacementMap=st(rt.displacementMap)),rt.displacementScale!==void 0&&(lt.displacementScale=rt.displacementScale),rt.displacementBias!==void 0&&(lt.displacementBias=rt.displacementBias),rt.roughnessMap!==void 0&&(lt.roughnessMap=st(rt.roughnessMap)),rt.metalnessMap!==void 0&&(lt.metalnessMap=st(rt.metalnessMap)),rt.emissiveMap!==void 0&&(lt.emissiveMap=st(rt.emissiveMap)),rt.emissiveIntensity!==void 0&&(lt.emissiveIntensity=rt.emissiveIntensity),rt.specularMap!==void 0&&(lt.specularMap=st(rt.specularMap)),rt.specularIntensityMap!==void 0&&(lt.specularIntensityMap=st(rt.specularIntensityMap)),rt.specularColorMap!==void 0&&(lt.specularColorMap=st(rt.specularColorMap)),rt.envMap!==void 0&&(lt.envMap=st(rt.envMap)),rt.envMapIntensity!==void 0&&(lt.envMapIntensity=rt.envMapIntensity),rt.reflectivity!==void 0&&(lt.reflectivity=rt.reflectivity),rt.refractionRatio!==void 0&&(lt.refractionRatio=rt.refractionRatio),rt.lightMap!==void 0&&(lt.lightMap=st(rt.lightMap)),rt.lightMapIntensity!==void 0&&(lt.lightMapIntensity=rt.lightMapIntensity),rt.aoMap!==void 0&&(lt.aoMap=st(rt.aoMap)),rt.aoMapIntensity!==void 0&&(lt.aoMapIntensity=rt.aoMapIntensity),rt.gradientMap!==void 0&&(lt.gradientMap=st(rt.gradientMap)),rt.clearcoatMap!==void 0&&(lt.clearcoatMap=st(rt.clearcoatMap)),rt.clearcoatRoughnessMap!==void 0&&(lt.clearcoatRoughnessMap=st(rt.clearcoatRoughnessMap)),rt.clearcoatNormalMap!==void 0&&(lt.clearcoatNormalMap=st(rt.clearcoatNormalMap)),rt.clearcoatNormalScale!==void 0&&(lt.clearcoatNormalScale=new Vector2().fromArray(rt.clearcoatNormalScale)),rt.iridescenceMap!==void 0&&(lt.iridescenceMap=st(rt.iridescenceMap)),rt.iridescenceThicknessMap!==void 0&&(lt.iridescenceThicknessMap=st(rt.iridescenceThicknessMap)),rt.transmissionMap!==void 0&&(lt.transmissionMap=st(rt.transmissionMap)),rt.thicknessMap!==void 0&&(lt.thicknessMap=st(rt.thicknessMap)),rt.anisotropyMap!==void 0&&(lt.anisotropyMap=st(rt.anisotropyMap)),rt.sheenColorMap!==void 0&&(lt.sheenColorMap=st(rt.sheenColorMap)),rt.sheenRoughnessMap!==void 0&&(lt.sheenRoughnessMap=st(rt.sheenRoughnessMap)),lt}setTextures(rt){return this.textures=rt,this}static createMaterialFromType(rt){const it={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new it[rt]}}class LoaderUtils{static decodeText(rt){if(typeof TextDecoder<"u")return new TextDecoder().decode(rt);let it="";for(let st=0,lt=rt.length;st<lt;st++)it+=String.fromCharCode(rt[st]);try{return decodeURIComponent(escape(it))}catch{return it}}static extractUrlBase(rt){const it=rt.lastIndexOf("/");return it===-1?"./":rt.slice(0,it+1)}static resolveURL(rt,it){return typeof rt!="string"||rt===""?"":(/^https?:\/\//i.test(it)&&/^\//.test(rt)&&(it=it.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(rt)||/^data:.*,.*$/i.test(rt)||/^blob:.*$/i.test(rt)?rt:it+rt)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(rt){return super.copy(rt),this.instanceCount=rt.instanceCount,this}toJSON(){const rt=super.toJSON();return rt.instanceCount=this.instanceCount,rt.isInstancedBufferGeometry=!0,rt}}class BufferGeometryLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(ct.manager);ut.setPath(ct.path),ut.setRequestHeader(ct.requestHeader),ut.setWithCredentials(ct.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it={},st={};function lt(xt,yt){if(it[yt]!==void 0)return it[yt];const St=xt.interleavedBuffers[yt],Et=ct(xt,St.buffer),wt=getTypedArray(St.type,Et),Rt=new InterleavedBuffer(wt,St.stride);return Rt.uuid=St.uuid,it[yt]=Rt,Rt}function ct(xt,yt){if(st[yt]!==void 0)return st[yt];const St=xt.arrayBuffers[yt],Et=new Uint32Array(St).buffer;return st[yt]=Et,Et}const ut=rt.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,dt=rt.data.index;if(dt!==void 0){const xt=getTypedArray(dt.type,dt.array);ut.setIndex(new BufferAttribute(xt,1))}const ht=rt.data.attributes;for(const xt in ht){const yt=ht[xt];let vt;if(yt.isInterleavedBufferAttribute){const St=lt(rt.data,yt.data);vt=new InterleavedBufferAttribute(St,yt.itemSize,yt.offset,yt.normalized)}else{const St=getTypedArray(yt.type,yt.array),Et=yt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;vt=new Et(St,yt.itemSize,yt.normalized)}yt.name!==void 0&&(vt.name=yt.name),yt.usage!==void 0&&vt.setUsage(yt.usage),ut.setAttribute(xt,vt)}const pt=rt.data.morphAttributes;if(pt)for(const xt in pt){const yt=pt[xt],vt=[];for(let St=0,Et=yt.length;St<Et;St++){const wt=yt[St];let Rt;if(wt.isInterleavedBufferAttribute){const Tt=lt(rt.data,wt.data);Rt=new InterleavedBufferAttribute(Tt,wt.itemSize,wt.offset,wt.normalized)}else{const Tt=getTypedArray(wt.type,wt.array);Rt=new BufferAttribute(Tt,wt.itemSize,wt.normalized)}wt.name!==void 0&&(Rt.name=wt.name),vt.push(Rt)}ut.morphAttributes[xt]=vt}rt.data.morphTargetsRelative&&(ut.morphTargetsRelative=!0);const mt=rt.data.groups||rt.data.drawcalls||rt.data.offsets;if(mt!==void 0)for(let xt=0,yt=mt.length;xt!==yt;++xt){const vt=mt[xt];ut.addGroup(vt.start,vt.count,vt.materialIndex)}const gt=rt.data.boundingSphere;if(gt!==void 0){const xt=new Vector3;gt.center!==void 0&&xt.fromArray(gt.center),ut.boundingSphere=new Sphere(xt,gt.radius)}return rt.name&&(ut.name=rt.name),rt.userData&&(ut.userData=rt.userData),ut}}class ObjectLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=this.path===""?LoaderUtils.extractUrlBase(rt):this.path;this.resourcePath=this.resourcePath||ut;const dt=new FileLoader(this.manager);dt.setPath(this.path),dt.setRequestHeader(this.requestHeader),dt.setWithCredentials(this.withCredentials),dt.load(rt,function(ht){let pt=null;try{pt=JSON.parse(ht)}catch(mt){lt!==void 0&&lt(mt),console.error("THREE:ObjectLoader: Can't parse "+rt+".",mt.message);return}const ft=pt.metadata;if(ft===void 0||ft.type===void 0||ft.type.toLowerCase()==="geometry"){lt!==void 0&&lt(new Error("THREE.ObjectLoader: Can't load "+rt)),console.error("THREE.ObjectLoader: Can't load "+rt);return}ct.parse(pt,it)},st,lt)}async loadAsync(rt,it){const st=this,lt=this.path===""?LoaderUtils.extractUrlBase(rt):this.path;this.resourcePath=this.resourcePath||lt;const ct=new FileLoader(this.manager);ct.setPath(this.path),ct.setRequestHeader(this.requestHeader),ct.setWithCredentials(this.withCredentials);const ut=await ct.loadAsync(rt,it),dt=JSON.parse(ut),ht=dt.metadata;if(ht===void 0||ht.type===void 0||ht.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+rt);return await st.parseAsync(dt)}parse(rt,it){const st=this.parseAnimations(rt.animations),lt=this.parseShapes(rt.shapes),ct=this.parseGeometries(rt.geometries,lt),ut=this.parseImages(rt.images,function(){it!==void 0&&it(pt)}),dt=this.parseTextures(rt.textures,ut),ht=this.parseMaterials(rt.materials,dt),pt=this.parseObject(rt.object,ct,ht,dt,st),ft=this.parseSkeletons(rt.skeletons,pt);if(this.bindSkeletons(pt,ft),it!==void 0){let mt=!1;for(const gt in ut)if(ut[gt].data instanceof HTMLImageElement){mt=!0;break}mt===!1&&it(pt)}return pt}async parseAsync(rt){const it=this.parseAnimations(rt.animations),st=this.parseShapes(rt.shapes),lt=this.parseGeometries(rt.geometries,st),ct=await this.parseImagesAsync(rt.images),ut=this.parseTextures(rt.textures,ct),dt=this.parseMaterials(rt.materials,ut),ht=this.parseObject(rt.object,lt,dt,ut,it),pt=this.parseSkeletons(rt.skeletons,ht);return this.bindSkeletons(ht,pt),ht}parseShapes(rt){const it={};if(rt!==void 0)for(let st=0,lt=rt.length;st<lt;st++){const ct=new Shape().fromJSON(rt[st]);it[ct.uuid]=ct}return it}parseSkeletons(rt,it){const st={},lt={};if(it.traverse(function(ct){ct.isBone&&(lt[ct.uuid]=ct)}),rt!==void 0)for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=new Skeleton().fromJSON(rt[ct],lt);st[dt.uuid]=dt}return st}parseGeometries(rt,it){const st={};if(rt!==void 0){const lt=new BufferGeometryLoader;for(let ct=0,ut=rt.length;ct<ut;ct++){let dt;const ht=rt[ct];switch(ht.type){case"BufferGeometry":case"InstancedBufferGeometry":dt=lt.parse(ht);break;default:ht.type in Geometries?dt=Geometries[ht.type].fromJSON(ht,it):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${ht.type}"`)}dt.uuid=ht.uuid,ht.name!==void 0&&(dt.name=ht.name),ht.userData!==void 0&&(dt.userData=ht.userData),st[ht.uuid]=dt}}return st}parseMaterials(rt,it){const st={},lt={};if(rt!==void 0){const ct=new MaterialLoader;ct.setTextures(it);for(let ut=0,dt=rt.length;ut<dt;ut++){const ht=rt[ut];st[ht.uuid]===void 0&&(st[ht.uuid]=ct.parse(ht)),lt[ht.uuid]=st[ht.uuid]}}return lt}parseAnimations(rt){const it={};if(rt!==void 0)for(let st=0;st<rt.length;st++){const lt=rt[st],ct=AnimationClip.parse(lt);it[ct.uuid]=ct}return it}parseImages(rt,it){const st=this,lt={};let ct;function ut(ht){return st.manager.itemStart(ht),ct.load(ht,function(){st.manager.itemEnd(ht)},void 0,function(){st.manager.itemError(ht),st.manager.itemEnd(ht)})}function dt(ht){if(typeof ht=="string"){const pt=ht,ft=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(pt)?pt:st.resourcePath+pt;return ut(ft)}else return ht.data?{data:getTypedArray(ht.type,ht.data),width:ht.width,height:ht.height}:null}if(rt!==void 0&&rt.length>0){const ht=new LoadingManager(it);ct=new ImageLoader(ht),ct.setCrossOrigin(this.crossOrigin);for(let pt=0,ft=rt.length;pt<ft;pt++){const mt=rt[pt],gt=mt.url;if(Array.isArray(gt)){const xt=[];for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],Et=dt(St);Et!==null&&(Et instanceof HTMLImageElement?xt.push(Et):xt.push(new DataTexture(Et.data,Et.width,Et.height)))}lt[mt.uuid]=new Source(xt)}else{const xt=dt(mt.url);lt[mt.uuid]=new Source(xt)}}}return lt}async parseImagesAsync(rt){const it=this,st={};let lt;async function ct(ut){if(typeof ut=="string"){const dt=ut,ht=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(dt)?dt:it.resourcePath+dt;return await lt.loadAsync(ht)}else return ut.data?{data:getTypedArray(ut.type,ut.data),width:ut.width,height:ut.height}:null}if(rt!==void 0&&rt.length>0){lt=new ImageLoader(this.manager),lt.setCrossOrigin(this.crossOrigin);for(let ut=0,dt=rt.length;ut<dt;ut++){const ht=rt[ut],pt=ht.url;if(Array.isArray(pt)){const ft=[];for(let mt=0,gt=pt.length;mt<gt;mt++){const xt=pt[mt],yt=await ct(xt);yt!==null&&(yt instanceof HTMLImageElement?ft.push(yt):ft.push(new DataTexture(yt.data,yt.width,yt.height)))}st[ht.uuid]=new Source(ft)}else{const ft=await ct(ht.url);st[ht.uuid]=new Source(ft)}}}return st}parseTextures(rt,it){function st(ct,ut){return typeof ct=="number"?ct:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ct),ut[ct])}const lt={};if(rt!==void 0)for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=rt[ct];dt.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',dt.uuid),it[dt.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",dt.image);const ht=it[dt.image],pt=ht.data;let ft;Array.isArray(pt)?(ft=new CubeTexture,pt.length===6&&(ft.needsUpdate=!0)):(pt&&pt.data?ft=new DataTexture:ft=new Texture,pt&&(ft.needsUpdate=!0)),ft.source=ht,ft.uuid=dt.uuid,dt.name!==void 0&&(ft.name=dt.name),dt.mapping!==void 0&&(ft.mapping=st(dt.mapping,TEXTURE_MAPPING)),dt.channel!==void 0&&(ft.channel=dt.channel),dt.offset!==void 0&&ft.offset.fromArray(dt.offset),dt.repeat!==void 0&&ft.repeat.fromArray(dt.repeat),dt.center!==void 0&&ft.center.fromArray(dt.center),dt.rotation!==void 0&&(ft.rotation=dt.rotation),dt.wrap!==void 0&&(ft.wrapS=st(dt.wrap[0],TEXTURE_WRAPPING),ft.wrapT=st(dt.wrap[1],TEXTURE_WRAPPING)),dt.format!==void 0&&(ft.format=dt.format),dt.internalFormat!==void 0&&(ft.internalFormat=dt.internalFormat),dt.type!==void 0&&(ft.type=dt.type),dt.colorSpace!==void 0&&(ft.colorSpace=dt.colorSpace),dt.encoding!==void 0&&(ft.encoding=dt.encoding),dt.minFilter!==void 0&&(ft.minFilter=st(dt.minFilter,TEXTURE_FILTER)),dt.magFilter!==void 0&&(ft.magFilter=st(dt.magFilter,TEXTURE_FILTER)),dt.anisotropy!==void 0&&(ft.anisotropy=dt.anisotropy),dt.flipY!==void 0&&(ft.flipY=dt.flipY),dt.generateMipmaps!==void 0&&(ft.generateMipmaps=dt.generateMipmaps),dt.premultiplyAlpha!==void 0&&(ft.premultiplyAlpha=dt.premultiplyAlpha),dt.unpackAlignment!==void 0&&(ft.unpackAlignment=dt.unpackAlignment),dt.compareFunction!==void 0&&(ft.compareFunction=dt.compareFunction),dt.userData!==void 0&&(ft.userData=dt.userData),lt[dt.uuid]=ft}return lt}parseObject(rt,it,st,lt,ct){let ut;function dt(gt){return it[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",gt),it[gt]}function ht(gt){if(gt!==void 0){if(Array.isArray(gt)){const xt=[];for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt];st[St]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",St),xt.push(st[St])}return xt}return st[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",gt),st[gt]}}function pt(gt){return lt[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",gt),lt[gt]}let ft,mt;switch(rt.type){case"Scene":ut=new Scene,rt.background!==void 0&&(Number.isInteger(rt.background)?ut.background=new Color(rt.background):ut.background=pt(rt.background)),rt.environment!==void 0&&(ut.environment=pt(rt.environment)),rt.fog!==void 0&&(rt.fog.type==="Fog"?ut.fog=new Fog(rt.fog.color,rt.fog.near,rt.fog.far):rt.fog.type==="FogExp2"&&(ut.fog=new FogExp2(rt.fog.color,rt.fog.density)),rt.fog.name!==""&&(ut.fog.name=rt.fog.name)),rt.backgroundBlurriness!==void 0&&(ut.backgroundBlurriness=rt.backgroundBlurriness),rt.backgroundIntensity!==void 0&&(ut.backgroundIntensity=rt.backgroundIntensity);break;case"PerspectiveCamera":ut=new PerspectiveCamera(rt.fov,rt.aspect,rt.near,rt.far),rt.focus!==void 0&&(ut.focus=rt.focus),rt.zoom!==void 0&&(ut.zoom=rt.zoom),rt.filmGauge!==void 0&&(ut.filmGauge=rt.filmGauge),rt.filmOffset!==void 0&&(ut.filmOffset=rt.filmOffset),rt.view!==void 0&&(ut.view=Object.assign({},rt.view));break;case"OrthographicCamera":ut=new OrthographicCamera(rt.left,rt.right,rt.top,rt.bottom,rt.near,rt.far),rt.zoom!==void 0&&(ut.zoom=rt.zoom),rt.view!==void 0&&(ut.view=Object.assign({},rt.view));break;case"AmbientLight":ut=new AmbientLight(rt.color,rt.intensity);break;case"DirectionalLight":ut=new DirectionalLight(rt.color,rt.intensity);break;case"PointLight":ut=new PointLight(rt.color,rt.intensity,rt.distance,rt.decay);break;case"RectAreaLight":ut=new RectAreaLight(rt.color,rt.intensity,rt.width,rt.height);break;case"SpotLight":ut=new SpotLight(rt.color,rt.intensity,rt.distance,rt.angle,rt.penumbra,rt.decay);break;case"HemisphereLight":ut=new HemisphereLight(rt.color,rt.groundColor,rt.intensity);break;case"LightProbe":ut=new LightProbe().fromJSON(rt);break;case"SkinnedMesh":ft=dt(rt.geometry),mt=ht(rt.material),ut=new SkinnedMesh(ft,mt),rt.bindMode!==void 0&&(ut.bindMode=rt.bindMode),rt.bindMatrix!==void 0&&ut.bindMatrix.fromArray(rt.bindMatrix),rt.skeleton!==void 0&&(ut.skeleton=rt.skeleton);break;case"Mesh":ft=dt(rt.geometry),mt=ht(rt.material),ut=new Mesh(ft,mt);break;case"InstancedMesh":ft=dt(rt.geometry),mt=ht(rt.material);const gt=rt.count,xt=rt.instanceMatrix,yt=rt.instanceColor;ut=new InstancedMesh(ft,mt,gt),ut.instanceMatrix=new InstancedBufferAttribute(new Float32Array(xt.array),16),yt!==void 0&&(ut.instanceColor=new InstancedBufferAttribute(new Float32Array(yt.array),yt.itemSize));break;case"BatchedMesh":ft=dt(rt.geometry),mt=ht(rt.material),ut=new BatchedMesh(rt.maxGeometryCount,rt.maxVertexCount,rt.maxIndexCount,mt),ut.geometry=ft,ut.perObjectFrustumCulled=rt.perObjectFrustumCulled,ut.sortObjects=rt.sortObjects,ut._drawRanges=rt.drawRanges,ut._reservedRanges=rt.reservedRanges,ut._visibility=rt.visibility,ut._active=rt.active,ut._bounds=rt.bounds.map(vt=>{const St=new Box3;St.min.fromArray(vt.boxMin),St.max.fromArray(vt.boxMax);const Et=new Sphere;return Et.radius=vt.sphereRadius,Et.center.fromArray(vt.sphereCenter),{boxInitialized:vt.boxInitialized,box:St,sphereInitialized:vt.sphereInitialized,sphere:Et}}),ut._maxGeometryCount=rt.maxGeometryCount,ut._maxVertexCount=rt.maxVertexCount,ut._maxIndexCount=rt.maxIndexCount,ut._geometryInitialized=rt.geometryInitialized,ut._geometryCount=rt.geometryCount,ut._matricesTexture=pt(rt.matricesTexture.uuid);break;case"LOD":ut=new LOD;break;case"Line":ut=new Line(dt(rt.geometry),ht(rt.material));break;case"LineLoop":ut=new LineLoop(dt(rt.geometry),ht(rt.material));break;case"LineSegments":ut=new LineSegments(dt(rt.geometry),ht(rt.material));break;case"PointCloud":case"Points":ut=new Points(dt(rt.geometry),ht(rt.material));break;case"Sprite":ut=new Sprite(ht(rt.material));break;case"Group":ut=new Group;break;case"Bone":ut=new Bone;break;default:ut=new Object3D}if(ut.uuid=rt.uuid,rt.name!==void 0&&(ut.name=rt.name),rt.matrix!==void 0?(ut.matrix.fromArray(rt.matrix),rt.matrixAutoUpdate!==void 0&&(ut.matrixAutoUpdate=rt.matrixAutoUpdate),ut.matrixAutoUpdate&&ut.matrix.decompose(ut.position,ut.quaternion,ut.scale)):(rt.position!==void 0&&ut.position.fromArray(rt.position),rt.rotation!==void 0&&ut.rotation.fromArray(rt.rotation),rt.quaternion!==void 0&&ut.quaternion.fromArray(rt.quaternion),rt.scale!==void 0&&ut.scale.fromArray(rt.scale)),rt.up!==void 0&&ut.up.fromArray(rt.up),rt.castShadow!==void 0&&(ut.castShadow=rt.castShadow),rt.receiveShadow!==void 0&&(ut.receiveShadow=rt.receiveShadow),rt.shadow&&(rt.shadow.bias!==void 0&&(ut.shadow.bias=rt.shadow.bias),rt.shadow.normalBias!==void 0&&(ut.shadow.normalBias=rt.shadow.normalBias),rt.shadow.radius!==void 0&&(ut.shadow.radius=rt.shadow.radius),rt.shadow.mapSize!==void 0&&ut.shadow.mapSize.fromArray(rt.shadow.mapSize),rt.shadow.camera!==void 0&&(ut.shadow.camera=this.parseObject(rt.shadow.camera))),rt.visible!==void 0&&(ut.visible=rt.visible),rt.frustumCulled!==void 0&&(ut.frustumCulled=rt.frustumCulled),rt.renderOrder!==void 0&&(ut.renderOrder=rt.renderOrder),rt.userData!==void 0&&(ut.userData=rt.userData),rt.layers!==void 0&&(ut.layers.mask=rt.layers),rt.children!==void 0){const gt=rt.children;for(let xt=0;xt<gt.length;xt++)ut.add(this.parseObject(gt[xt],it,st,lt,ct))}if(rt.animations!==void 0){const gt=rt.animations;for(let xt=0;xt<gt.length;xt++){const yt=gt[xt];ut.animations.push(ct[yt])}}if(rt.type==="LOD"){rt.autoUpdate!==void 0&&(ut.autoUpdate=rt.autoUpdate);const gt=rt.levels;for(let xt=0;xt<gt.length;xt++){const yt=gt[xt],vt=ut.getObjectByProperty("uuid",yt.object);vt!==void 0&&ut.addLevel(vt,yt.distance,yt.hysteresis)}}return ut}bindSkeletons(rt,it){Object.keys(it).length!==0&&rt.traverse(function(st){if(st.isSkinnedMesh===!0&&st.skeleton!==void 0){const lt=it[st.skeleton];lt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",st.skeleton):st.bind(lt,st.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(rt){super(rt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(rt){return this.options=rt,this}load(rt,it,st,lt){rt===void 0&&(rt=""),this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=this,ut=Cache.get(rt);if(ut!==void 0){if(ct.manager.itemStart(rt),ut.then){ut.then(pt=>{it&&it(pt),ct.manager.itemEnd(rt)}).catch(pt=>{lt&&lt(pt)});return}return setTimeout(function(){it&&it(ut),ct.manager.itemEnd(rt)},0),ut}const dt={};dt.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",dt.headers=this.requestHeader;const ht=fetch(rt,dt).then(function(pt){return pt.blob()}).then(function(pt){return createImageBitmap(pt,Object.assign(ct.options,{colorSpaceConversion:"none"}))}).then(function(pt){return Cache.add(rt,pt),it&&it(pt),ct.manager.itemEnd(rt),pt}).catch(function(pt){lt&&lt(pt),Cache.remove(rt),ct.manager.itemError(rt),ct.manager.itemEnd(rt)});Cache.add(rt,ht),ct.manager.itemStart(rt)}}let _context,AudioContext$1=class{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(rt){_context=rt}};class AudioLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setResponseType("arraybuffer"),ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(ht){try{const pt=ht.slice(0);AudioContext$1.getContext().decodeAudioData(pt,function(mt){it(mt)}).catch(dt)}catch(pt){dt(pt)}},st,lt);function dt(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(rt){const it=this._cache;if(it.focus!==rt.focus||it.fov!==rt.fov||it.aspect!==rt.aspect*this.aspect||it.near!==rt.near||it.far!==rt.far||it.zoom!==rt.zoom||it.eyeSep!==this.eyeSep){it.focus=rt.focus,it.fov=rt.fov,it.aspect=rt.aspect*this.aspect,it.near=rt.near,it.far=rt.far,it.zoom=rt.zoom,it.eyeSep=this.eyeSep,_projectionMatrix.copy(rt.projectionMatrix);const lt=it.eyeSep/2,ct=lt*it.near/it.focus,ut=it.near*Math.tan(DEG2RAD*it.fov*.5)/it.zoom;let dt,ht;_eyeLeft.elements[12]=-lt,_eyeRight.elements[12]=lt,dt=-ut*it.aspect+ct,ht=ut*it.aspect+ct,_projectionMatrix.elements[0]=2*it.near/(ht-dt),_projectionMatrix.elements[8]=(ht+dt)/(ht-dt),this.cameraL.projectionMatrix.copy(_projectionMatrix),dt=-ut*it.aspect-ct,ht=ut*it.aspect-ct,_projectionMatrix.elements[0]=2*it.near/(ht-dt),_projectionMatrix.elements[8]=(ht+dt)/(ht-dt),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(rt.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(rt.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(rt=!0){this.autoStart=rt,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let rt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const it=now();rt=(it-this.oldTime)/1e3,this.oldTime=it,this.elapsedTime+=rt}return rt}}function now(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext$1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(rt){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=rt,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(rt){return this.gain.gain.setTargetAtTime(rt,this.context.currentTime,.01),this}updateMatrixWorld(rt){super.updateMatrixWorld(rt);const it=this.context.listener,st=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),it.positionX){const lt=this.context.currentTime+this.timeDelta;it.positionX.linearRampToValueAtTime(_position$1.x,lt),it.positionY.linearRampToValueAtTime(_position$1.y,lt),it.positionZ.linearRampToValueAtTime(_position$1.z,lt),it.forwardX.linearRampToValueAtTime(_orientation$1.x,lt),it.forwardY.linearRampToValueAtTime(_orientation$1.y,lt),it.forwardZ.linearRampToValueAtTime(_orientation$1.z,lt),it.upX.linearRampToValueAtTime(st.x,lt),it.upY.linearRampToValueAtTime(st.y,lt),it.upZ.linearRampToValueAtTime(st.z,lt)}else it.setPosition(_position$1.x,_position$1.y,_position$1.z),it.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,st.x,st.y,st.z)}}let Audio$1=class extends Object3D{constructor(rt){super(),this.type="Audio",this.listener=rt,this.context=rt.context,this.gain=this.context.createGain(),this.gain.connect(rt.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(rt){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=rt,this.connect(),this}setMediaElementSource(rt){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(rt),this.connect(),this}setMediaStreamSource(rt){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(rt),this.connect(),this}setBuffer(rt){return this.buffer=rt,this.sourceType="buffer",this.autoplay&&this.play(),this}play(rt=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+rt;const it=this.context.createBufferSource();return it.buffer=this.buffer,it.loop=this.loop,it.loopStart=this.loopStart,it.loopEnd=this.loopEnd,it.onended=this.onEnded.bind(this),it.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=it,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let rt=1,it=this.filters.length;rt<it;rt++)this.filters[rt-1].connect(this.filters[rt]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let rt=1,it=this.filters.length;rt<it;rt++)this.filters[rt-1].disconnect(this.filters[rt]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(rt){return rt||(rt=[]),this._connected===!0?(this.disconnect(),this.filters=rt.slice(),this.connect()):this.filters=rt.slice(),this}setDetune(rt){return this.detune=rt,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(rt){return this.setFilters(rt?[rt]:[])}setPlaybackRate(rt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=rt,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(rt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=rt,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(rt){return this.loopStart=rt,this}setLoopEnd(rt){return this.loopEnd=rt,this}getVolume(){return this.gain.gain.value}setVolume(rt){return this.gain.gain.setTargetAtTime(rt,this.context.currentTime,.01),this}};const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio$1{constructor(rt){super(rt),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(rt){return this.panner.refDistance=rt,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(rt){return this.panner.rolloffFactor=rt,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(rt){return this.panner.distanceModel=rt,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(rt){return this.panner.maxDistance=rt,this}setDirectionalCone(rt,it,st){return this.panner.coneInnerAngle=rt,this.panner.coneOuterAngle=it,this.panner.coneOuterGain=st,this}updateMatrixWorld(rt){if(super.updateMatrixWorld(rt),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const it=this.panner;if(it.positionX){const st=this.context.currentTime+this.listener.timeDelta;it.positionX.linearRampToValueAtTime(_position.x,st),it.positionY.linearRampToValueAtTime(_position.y,st),it.positionZ.linearRampToValueAtTime(_position.z,st),it.orientationX.linearRampToValueAtTime(_orientation.x,st),it.orientationY.linearRampToValueAtTime(_orientation.y,st),it.orientationZ.linearRampToValueAtTime(_orientation.z,st)}else it.setPosition(_position.x,_position.y,_position.z),it.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}let AudioAnalyser$1=class{constructor(rt,it=2048){this.analyser=rt.context.createAnalyser(),this.analyser.fftSize=it,this.data=new Uint8Array(this.analyser.frequencyBinCount),rt.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let rt=0;const it=this.getFrequencyData();for(let st=0;st<it.length;st++)rt+=it[st];return rt/it.length}};class PropertyMixer{constructor(rt,it,st){this.binding=rt,this.valueSize=st;let lt,ct,ut;switch(it){case"quaternion":lt=this._slerp,ct=this._slerpAdditive,ut=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(st*6),this._workIndex=5;break;case"string":case"bool":lt=this._select,ct=this._select,ut=this._setAdditiveIdentityOther,this.buffer=new Array(st*5);break;default:lt=this._lerp,ct=this._lerpAdditive,ut=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(st*5)}this._mixBufferRegion=lt,this._mixBufferRegionAdditive=ct,this._setIdentity=ut,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(rt,it){const st=this.buffer,lt=this.valueSize,ct=rt*lt+lt;let ut=this.cumulativeWeight;if(ut===0){for(let dt=0;dt!==lt;++dt)st[ct+dt]=st[dt];ut=it}else{ut+=it;const dt=it/ut;this._mixBufferRegion(st,ct,0,dt,lt)}this.cumulativeWeight=ut}accumulateAdditive(rt){const it=this.buffer,st=this.valueSize,lt=st*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(it,lt,0,rt,st),this.cumulativeWeightAdditive+=rt}apply(rt){const it=this.valueSize,st=this.buffer,lt=rt*it+it,ct=this.cumulativeWeight,ut=this.cumulativeWeightAdditive,dt=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ct<1){const ht=it*this._origIndex;this._mixBufferRegion(st,lt,ht,1-ct,it)}ut>0&&this._mixBufferRegionAdditive(st,lt,this._addIndex*it,1,it);for(let ht=it,pt=it+it;ht!==pt;++ht)if(st[ht]!==st[ht+it]){dt.setValue(st,lt);break}}saveOriginalState(){const rt=this.binding,it=this.buffer,st=this.valueSize,lt=st*this._origIndex;rt.getValue(it,lt);for(let ct=st,ut=lt;ct!==ut;++ct)it[ct]=it[lt+ct%st];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const rt=this.valueSize*3;this.binding.setValue(this.buffer,rt)}_setAdditiveIdentityNumeric(){const rt=this._addIndex*this.valueSize,it=rt+this.valueSize;for(let st=rt;st<it;st++)this.buffer[st]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const rt=this._origIndex*this.valueSize,it=this._addIndex*this.valueSize;for(let st=0;st<this.valueSize;st++)this.buffer[it+st]=this.buffer[rt+st]}_select(rt,it,st,lt,ct){if(lt>=.5)for(let ut=0;ut!==ct;++ut)rt[it+ut]=rt[st+ut]}_slerp(rt,it,st,lt){Quaternion.slerpFlat(rt,it,rt,it,rt,st,lt)}_slerpAdditive(rt,it,st,lt,ct){const ut=this._workIndex*ct;Quaternion.multiplyQuaternionsFlat(rt,ut,rt,it,rt,st),Quaternion.slerpFlat(rt,it,rt,it,rt,ut,lt)}_lerp(rt,it,st,lt,ct){const ut=1-lt;for(let dt=0;dt!==ct;++dt){const ht=it+dt;rt[ht]=rt[ht]*ut+rt[st+dt]*lt}}_lerpAdditive(rt,it,st,lt,ct){for(let ut=0;ut!==ct;++ut){const dt=it+ut;rt[dt]=rt[dt]+rt[st+ut]*lt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(rt,it,st){const lt=st||PropertyBinding.parseTrackName(it);this._targetGroup=rt,this._bindings=rt.subscribe_(it,lt)}getValue(rt,it){this.bind();const st=this._targetGroup.nCachedObjects_,lt=this._bindings[st];lt!==void 0&&lt.getValue(rt,it)}setValue(rt,it){const st=this._bindings;for(let lt=this._targetGroup.nCachedObjects_,ct=st.length;lt!==ct;++lt)st[lt].setValue(rt,it)}bind(){const rt=this._bindings;for(let it=this._targetGroup.nCachedObjects_,st=rt.length;it!==st;++it)rt[it].bind()}unbind(){const rt=this._bindings;for(let it=this._targetGroup.nCachedObjects_,st=rt.length;it!==st;++it)rt[it].unbind()}}class PropertyBinding{constructor(rt,it,st){this.path=it,this.parsedPath=st||PropertyBinding.parseTrackName(it),this.node=PropertyBinding.findNode(rt,this.parsedPath.nodeName),this.rootNode=rt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(rt,it,st){return rt&&rt.isAnimationObjectGroup?new PropertyBinding.Composite(rt,it,st):new PropertyBinding(rt,it,st)}static sanitizeNodeName(rt){return rt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(rt){const it=_trackRe.exec(rt);if(it===null)throw new Error("PropertyBinding: Cannot parse trackName: "+rt);const st={nodeName:it[2],objectName:it[3],objectIndex:it[4],propertyName:it[5],propertyIndex:it[6]},lt=st.nodeName&&st.nodeName.lastIndexOf(".");if(lt!==void 0&&lt!==-1){const ct=st.nodeName.substring(lt+1);_supportedObjectNames.indexOf(ct)!==-1&&(st.nodeName=st.nodeName.substring(0,lt),st.objectName=ct)}if(st.propertyName===null||st.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+rt);return st}static findNode(rt,it){if(it===void 0||it===""||it==="."||it===-1||it===rt.name||it===rt.uuid)return rt;if(rt.skeleton){const st=rt.skeleton.getBoneByName(it);if(st!==void 0)return st}if(rt.children){const st=function(ct){for(let ut=0;ut<ct.length;ut++){const dt=ct[ut];if(dt.name===it||dt.uuid===it)return dt;const ht=st(dt.children);if(ht)return ht}return null},lt=st(rt.children);if(lt)return lt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(rt,it){rt[it]=this.targetObject[this.propertyName]}_getValue_array(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)rt[it++]=st[lt]}_getValue_arrayElement(rt,it){rt[it]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(rt,it){this.resolvedProperty.toArray(rt,it)}_setValue_direct(rt,it){this.targetObject[this.propertyName]=rt[it]}_setValue_direct_setNeedsUpdate(rt,it){this.targetObject[this.propertyName]=rt[it],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(rt,it){this.targetObject[this.propertyName]=rt[it],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++]}_setValue_array_setNeedsUpdate(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it]}_setValue_arrayElement_setNeedsUpdate(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(rt,it){this.resolvedProperty.fromArray(rt,it)}_setValue_fromArray_setNeedsUpdate(rt,it){this.resolvedProperty.fromArray(rt,it),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(rt,it){this.resolvedProperty.fromArray(rt,it),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(rt,it){this.bind(),this.getValue(rt,it)}_setValue_unbound(rt,it){this.bind(),this.setValue(rt,it)}bind(){let rt=this.node;const it=this.parsedPath,st=it.objectName,lt=it.propertyName;let ct=it.propertyIndex;if(rt||(rt=PropertyBinding.findNode(this.rootNode,it.nodeName),this.node=rt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!rt){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(st){let pt=it.objectIndex;switch(st){case"materials":if(!rt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!rt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}rt=rt.material.materials;break;case"bones":if(!rt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}rt=rt.skeleton.bones;for(let ft=0;ft<rt.length;ft++)if(rt[ft].name===pt){pt=ft;break}break;case"map":if("map"in rt){rt=rt.map;break}if(!rt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!rt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}rt=rt.material.map;break;default:if(rt[st]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}rt=rt[st]}if(pt!==void 0){if(rt[pt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,rt);return}rt=rt[pt]}}const ut=rt[lt];if(ut===void 0){const pt=it.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+pt+"."+lt+" but it wasn't found.",rt);return}let dt=this.Versioning.None;this.targetObject=rt,rt.needsUpdate!==void 0?dt=this.Versioning.NeedsUpdate:rt.matrixWorldNeedsUpdate!==void 0&&(dt=this.Versioning.MatrixWorldNeedsUpdate);let ht=this.BindingType.Direct;if(ct!==void 0){if(lt==="morphTargetInfluences"){if(!rt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!rt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}rt.morphTargetDictionary[ct]!==void 0&&(ct=rt.morphTargetDictionary[ct])}ht=this.BindingType.ArrayElement,this.resolvedProperty=ut,this.propertyIndex=ct}else ut.fromArray!==void 0&&ut.toArray!==void 0?(ht=this.BindingType.HasFromToArray,this.resolvedProperty=ut):Array.isArray(ut)?(ht=this.BindingType.EntireArray,this.resolvedProperty=ut):this.propertyName=lt;this.getValue=this.GetterByBindingType[ht],this.setValue=this.SetterByBindingTypeAndVersioning[ht][dt]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const rt={};this._indicesByUUID=rt;for(let st=0,lt=arguments.length;st!==lt;++st)rt[arguments[st].uuid]=st;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const it=this;this.stats={objects:{get total(){return it._objects.length},get inUse(){return this.total-it.nCachedObjects_}},get bindingsPerObject(){return it._bindings.length}}}add(){const rt=this._objects,it=this._indicesByUUID,st=this._paths,lt=this._parsedPaths,ct=this._bindings,ut=ct.length;let dt,ht=rt.length,pt=this.nCachedObjects_;for(let ft=0,mt=arguments.length;ft!==mt;++ft){const gt=arguments[ft],xt=gt.uuid;let yt=it[xt];if(yt===void 0){yt=ht++,it[xt]=yt,rt.push(gt);for(let vt=0,St=ut;vt!==St;++vt)ct[vt].push(new PropertyBinding(gt,st[vt],lt[vt]))}else if(yt<pt){dt=rt[yt];const vt=--pt,St=rt[vt];it[St.uuid]=yt,rt[yt]=St,it[xt]=vt,rt[vt]=gt;for(let Et=0,wt=ut;Et!==wt;++Et){const Rt=ct[Et],Tt=Rt[vt];let It=Rt[yt];Rt[yt]=Tt,It===void 0&&(It=new PropertyBinding(gt,st[Et],lt[Et])),Rt[vt]=It}}else rt[yt]!==dt&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=pt}remove(){const rt=this._objects,it=this._indicesByUUID,st=this._bindings,lt=st.length;let ct=this.nCachedObjects_;for(let ut=0,dt=arguments.length;ut!==dt;++ut){const ht=arguments[ut],pt=ht.uuid,ft=it[pt];if(ft!==void 0&&ft>=ct){const mt=ct++,gt=rt[mt];it[gt.uuid]=ft,rt[ft]=gt,it[pt]=mt,rt[mt]=ht;for(let xt=0,yt=lt;xt!==yt;++xt){const vt=st[xt],St=vt[mt],Et=vt[ft];vt[ft]=St,vt[mt]=Et}}}this.nCachedObjects_=ct}uncache(){const rt=this._objects,it=this._indicesByUUID,st=this._bindings,lt=st.length;let ct=this.nCachedObjects_,ut=rt.length;for(let dt=0,ht=arguments.length;dt!==ht;++dt){const pt=arguments[dt],ft=pt.uuid,mt=it[ft];if(mt!==void 0)if(delete it[ft],mt<ct){const gt=--ct,xt=rt[gt],yt=--ut,vt=rt[yt];it[xt.uuid]=mt,rt[mt]=xt,it[vt.uuid]=gt,rt[gt]=vt,rt.pop();for(let St=0,Et=lt;St!==Et;++St){const wt=st[St],Rt=wt[gt],Tt=wt[yt];wt[mt]=Rt,wt[gt]=Tt,wt.pop()}}else{const gt=--ut,xt=rt[gt];gt>0&&(it[xt.uuid]=mt),rt[mt]=xt,rt.pop();for(let yt=0,vt=lt;yt!==vt;++yt){const St=st[yt];St[mt]=St[gt],St.pop()}}}this.nCachedObjects_=ct}subscribe_(rt,it){const st=this._bindingsIndicesByPath;let lt=st[rt];const ct=this._bindings;if(lt!==void 0)return ct[lt];const ut=this._paths,dt=this._parsedPaths,ht=this._objects,pt=ht.length,ft=this.nCachedObjects_,mt=new Array(pt);lt=ct.length,st[rt]=lt,ut.push(rt),dt.push(it),ct.push(mt);for(let gt=ft,xt=ht.length;gt!==xt;++gt){const yt=ht[gt];mt[gt]=new PropertyBinding(yt,rt,it)}return mt}unsubscribe_(rt){const it=this._bindingsIndicesByPath,st=it[rt];if(st!==void 0){const lt=this._paths,ct=this._parsedPaths,ut=this._bindings,dt=ut.length-1,ht=ut[dt],pt=rt[dt];it[pt]=st,ut[st]=ht,ut.pop(),ct[st]=ct[dt],ct.pop(),lt[st]=lt[dt],lt.pop()}}}class AnimationAction{constructor(rt,it,st=null,lt=it.blendMode){this._mixer=rt,this._clip=it,this._localRoot=st,this.blendMode=lt;const ct=it.tracks,ut=ct.length,dt=new Array(ut),ht={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let pt=0;pt!==ut;++pt){const ft=ct[pt].createInterpolant(null);dt[pt]=ft,ft.settings=ht}this._interpolantSettings=ht,this._interpolants=dt,this._propertyBindings=new Array(ut),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(rt){return this._startTime=rt,this}setLoop(rt,it){return this.loop=rt,this.repetitions=it,this}setEffectiveWeight(rt){return this.weight=rt,this._effectiveWeight=this.enabled?rt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(rt){return this._scheduleFading(rt,0,1)}fadeOut(rt){return this._scheduleFading(rt,1,0)}crossFadeFrom(rt,it,st){if(rt.fadeOut(it),this.fadeIn(it),st){const lt=this._clip.duration,ct=rt._clip.duration,ut=ct/lt,dt=lt/ct;rt.warp(1,ut,it),this.warp(dt,1,it)}return this}crossFadeTo(rt,it,st){return rt.crossFadeFrom(this,it,st)}stopFading(){const rt=this._weightInterpolant;return rt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(rt)),this}setEffectiveTimeScale(rt){return this.timeScale=rt,this._effectiveTimeScale=this.paused?0:rt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(rt){return this.timeScale=this._clip.duration/rt,this.stopWarping()}syncWith(rt){return this.time=rt.time,this.timeScale=rt.timeScale,this.stopWarping()}halt(rt){return this.warp(this._effectiveTimeScale,0,rt)}warp(rt,it,st){const lt=this._mixer,ct=lt.time,ut=this.timeScale;let dt=this._timeScaleInterpolant;dt===null&&(dt=lt._lendControlInterpolant(),this._timeScaleInterpolant=dt);const ht=dt.parameterPositions,pt=dt.sampleValues;return ht[0]=ct,ht[1]=ct+st,pt[0]=rt/ut,pt[1]=it/ut,this}stopWarping(){const rt=this._timeScaleInterpolant;return rt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(rt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(rt,it,st,lt){if(!this.enabled){this._updateWeight(rt);return}const ct=this._startTime;if(ct!==null){const ht=(rt-ct)*st;ht<0||st===0?it=0:(this._startTime=null,it=st*ht)}it*=this._updateTimeScale(rt);const ut=this._updateTime(it),dt=this._updateWeight(rt);if(dt>0){const ht=this._interpolants,pt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ft=0,mt=ht.length;ft!==mt;++ft)ht[ft].evaluate(ut),pt[ft].accumulateAdditive(dt);break;case NormalAnimationBlendMode:default:for(let ft=0,mt=ht.length;ft!==mt;++ft)ht[ft].evaluate(ut),pt[ft].accumulate(lt,dt)}}}_updateWeight(rt){let it=0;if(this.enabled){it=this.weight;const st=this._weightInterpolant;if(st!==null){const lt=st.evaluate(rt)[0];it*=lt,rt>st.parameterPositions[1]&&(this.stopFading(),lt===0&&(this.enabled=!1))}}return this._effectiveWeight=it,it}_updateTimeScale(rt){let it=0;if(!this.paused){it=this.timeScale;const st=this._timeScaleInterpolant;if(st!==null){const lt=st.evaluate(rt)[0];it*=lt,rt>st.parameterPositions[1]&&(this.stopWarping(),it===0?this.paused=!0:this.timeScale=it)}}return this._effectiveTimeScale=it,it}_updateTime(rt){const it=this._clip.duration,st=this.loop;let lt=this.time+rt,ct=this._loopCount;const ut=st===LoopPingPong;if(rt===0)return ct===-1?lt:ut&&(ct&1)===1?it-lt:lt;if(st===LoopOnce){ct===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(lt>=it)lt=it;else if(lt<0)lt=0;else{this.time=lt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=lt,this._mixer.dispatchEvent({type:"finished",action:this,direction:rt<0?-1:1})}}else{if(ct===-1&&(rt>=0?(ct=0,this._setEndings(!0,this.repetitions===0,ut)):this._setEndings(this.repetitions===0,!0,ut)),lt>=it||lt<0){const dt=Math.floor(lt/it);lt-=it*dt,ct+=Math.abs(dt);const ht=this.repetitions-ct;if(ht<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,lt=rt>0?it:0,this.time=lt,this._mixer.dispatchEvent({type:"finished",action:this,direction:rt>0?1:-1});else{if(ht===1){const pt=rt<0;this._setEndings(pt,!pt,ut)}else this._setEndings(!1,!1,ut);this._loopCount=ct,this.time=lt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:dt})}}else this.time=lt;if(ut&&(ct&1)===1)return it-lt}return lt}_setEndings(rt,it,st){const lt=this._interpolantSettings;st?(lt.endingStart=ZeroSlopeEnding,lt.endingEnd=ZeroSlopeEnding):(rt?lt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:lt.endingStart=WrapAroundEnding,it?lt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:lt.endingEnd=WrapAroundEnding)}_scheduleFading(rt,it,st){const lt=this._mixer,ct=lt.time;let ut=this._weightInterpolant;ut===null&&(ut=lt._lendControlInterpolant(),this._weightInterpolant=ut);const dt=ut.parameterPositions,ht=ut.sampleValues;return dt[0]=ct,ht[0]=it,dt[1]=ct+rt,ht[1]=st,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(rt){super(),this._root=rt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(rt,it){const st=rt._localRoot||this._root,lt=rt._clip.tracks,ct=lt.length,ut=rt._propertyBindings,dt=rt._interpolants,ht=st.uuid,pt=this._bindingsByRootAndName;let ft=pt[ht];ft===void 0&&(ft={},pt[ht]=ft);for(let mt=0;mt!==ct;++mt){const gt=lt[mt],xt=gt.name;let yt=ft[xt];if(yt!==void 0)++yt.referenceCount,ut[mt]=yt;else{if(yt=ut[mt],yt!==void 0){yt._cacheIndex===null&&(++yt.referenceCount,this._addInactiveBinding(yt,ht,xt));continue}const vt=it&&it._propertyBindings[mt].binding.parsedPath;yt=new PropertyMixer(PropertyBinding.create(st,xt,vt),gt.ValueTypeName,gt.getValueSize()),++yt.referenceCount,this._addInactiveBinding(yt,ht,xt),ut[mt]=yt}dt[mt].resultBuffer=yt.buffer}}_activateAction(rt){if(!this._isActiveAction(rt)){if(rt._cacheIndex===null){const st=(rt._localRoot||this._root).uuid,lt=rt._clip.uuid,ct=this._actionsByClip[lt];this._bindAction(rt,ct&&ct.knownActions[0]),this._addInactiveAction(rt,lt,st)}const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];ct.useCount++===0&&(this._lendBinding(ct),ct.saveOriginalState())}this._lendAction(rt)}}_deactivateAction(rt){if(this._isActiveAction(rt)){const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];--ct.useCount===0&&(ct.restoreOriginalState(),this._takeBackBinding(ct))}this._takeBackAction(rt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const rt=this;this.stats={actions:{get total(){return rt._actions.length},get inUse(){return rt._nActiveActions}},bindings:{get total(){return rt._bindings.length},get inUse(){return rt._nActiveBindings}},controlInterpolants:{get total(){return rt._controlInterpolants.length},get inUse(){return rt._nActiveControlInterpolants}}}}_isActiveAction(rt){const it=rt._cacheIndex;return it!==null&&it<this._nActiveActions}_addInactiveAction(rt,it,st){const lt=this._actions,ct=this._actionsByClip;let ut=ct[it];if(ut===void 0)ut={knownActions:[rt],actionByRoot:{}},rt._byClipCacheIndex=0,ct[it]=ut;else{const dt=ut.knownActions;rt._byClipCacheIndex=dt.length,dt.push(rt)}rt._cacheIndex=lt.length,lt.push(rt),ut.actionByRoot[st]=rt}_removeInactiveAction(rt){const it=this._actions,st=it[it.length-1],lt=rt._cacheIndex;st._cacheIndex=lt,it[lt]=st,it.pop(),rt._cacheIndex=null;const ct=rt._clip.uuid,ut=this._actionsByClip,dt=ut[ct],ht=dt.knownActions,pt=ht[ht.length-1],ft=rt._byClipCacheIndex;pt._byClipCacheIndex=ft,ht[ft]=pt,ht.pop(),rt._byClipCacheIndex=null;const mt=dt.actionByRoot,gt=(rt._localRoot||this._root).uuid;delete mt[gt],ht.length===0&&delete ut[ct],this._removeInactiveBindingsForAction(rt)}_removeInactiveBindingsForAction(rt){const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];--ct.referenceCount===0&&this._removeInactiveBinding(ct)}}_lendAction(rt){const it=this._actions,st=rt._cacheIndex,lt=this._nActiveActions++,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_takeBackAction(rt){const it=this._actions,st=rt._cacheIndex,lt=--this._nActiveActions,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_addInactiveBinding(rt,it,st){const lt=this._bindingsByRootAndName,ct=this._bindings;let ut=lt[it];ut===void 0&&(ut={},lt[it]=ut),ut[st]=rt,rt._cacheIndex=ct.length,ct.push(rt)}_removeInactiveBinding(rt){const it=this._bindings,st=rt.binding,lt=st.rootNode.uuid,ct=st.path,ut=this._bindingsByRootAndName,dt=ut[lt],ht=it[it.length-1],pt=rt._cacheIndex;ht._cacheIndex=pt,it[pt]=ht,it.pop(),delete dt[ct],Object.keys(dt).length===0&&delete ut[lt]}_lendBinding(rt){const it=this._bindings,st=rt._cacheIndex,lt=this._nActiveBindings++,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_takeBackBinding(rt){const it=this._bindings,st=rt._cacheIndex,lt=--this._nActiveBindings,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_lendControlInterpolant(){const rt=this._controlInterpolants,it=this._nActiveControlInterpolants++;let st=rt[it];return st===void 0&&(st=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),st.__cacheIndex=it,rt[it]=st),st}_takeBackControlInterpolant(rt){const it=this._controlInterpolants,st=rt.__cacheIndex,lt=--this._nActiveControlInterpolants,ct=it[lt];rt.__cacheIndex=lt,it[lt]=rt,ct.__cacheIndex=st,it[st]=ct}clipAction(rt,it,st){const lt=it||this._root,ct=lt.uuid;let ut=typeof rt=="string"?AnimationClip.findByName(lt,rt):rt;const dt=ut!==null?ut.uuid:rt,ht=this._actionsByClip[dt];let pt=null;if(st===void 0&&(ut!==null?st=ut.blendMode:st=NormalAnimationBlendMode),ht!==void 0){const mt=ht.actionByRoot[ct];if(mt!==void 0&&mt.blendMode===st)return mt;pt=ht.knownActions[0],ut===null&&(ut=pt._clip)}if(ut===null)return null;const ft=new AnimationAction(this,ut,it,st);return this._bindAction(ft,pt),this._addInactiveAction(ft,dt,ct),ft}existingAction(rt,it){const st=it||this._root,lt=st.uuid,ct=typeof rt=="string"?AnimationClip.findByName(st,rt):rt,ut=ct?ct.uuid:rt,dt=this._actionsByClip[ut];return dt!==void 0&&dt.actionByRoot[lt]||null}stopAllAction(){const rt=this._actions,it=this._nActiveActions;for(let st=it-1;st>=0;--st)rt[st].stop();return this}update(rt){rt*=this.timeScale;const it=this._actions,st=this._nActiveActions,lt=this.time+=rt,ct=Math.sign(rt),ut=this._accuIndex^=1;for(let pt=0;pt!==st;++pt)it[pt]._update(lt,rt,ct,ut);const dt=this._bindings,ht=this._nActiveBindings;for(let pt=0;pt!==ht;++pt)dt[pt].apply(ut);return this}setTime(rt){this.time=0;for(let it=0;it<this._actions.length;it++)this._actions[it].time=0;return this.update(rt)}getRoot(){return this._root}uncacheClip(rt){const it=this._actions,st=rt.uuid,lt=this._actionsByClip,ct=lt[st];if(ct!==void 0){const ut=ct.knownActions;for(let dt=0,ht=ut.length;dt!==ht;++dt){const pt=ut[dt];this._deactivateAction(pt);const ft=pt._cacheIndex,mt=it[it.length-1];pt._cacheIndex=null,pt._byClipCacheIndex=null,mt._cacheIndex=ft,it[ft]=mt,it.pop(),this._removeInactiveBindingsForAction(pt)}delete lt[st]}}uncacheRoot(rt){const it=rt.uuid,st=this._actionsByClip;for(const ut in st){const dt=st[ut].actionByRoot,ht=dt[it];ht!==void 0&&(this._deactivateAction(ht),this._removeInactiveAction(ht))}const lt=this._bindingsByRootAndName,ct=lt[it];if(ct!==void 0)for(const ut in ct){const dt=ct[ut];dt.restoreOriginalState(),this._removeInactiveBinding(dt)}}uncacheAction(rt,it){const st=this.existingAction(rt,it);st!==null&&(this._deactivateAction(st),this._removeInactiveAction(st))}}class Uniform{constructor(rt){this.value=rt}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(rt){return this.uniforms.push(rt),this}remove(rt){const it=this.uniforms.indexOf(rt);return it!==-1&&this.uniforms.splice(it,1),this}setName(rt){return this.name=rt,this}setUsage(rt){return this.usage=rt,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(rt){this.name=rt.name,this.usage=rt.usage;const it=rt.uniforms;this.uniforms.length=0;for(let st=0,lt=it.length;st<lt;st++){const ct=Array.isArray(it[st])?it[st]:[it[st]];for(let ut=0;ut<ct.length;ut++)this.uniforms.push(ct[ut].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(rt,it,st=1){super(rt,it),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=st}copy(rt){return super.copy(rt),this.meshPerAttribute=rt.meshPerAttribute,this}clone(rt){const it=super.clone(rt);return it.meshPerAttribute=this.meshPerAttribute,it}toJSON(rt){const it=super.toJSON(rt);return it.isInstancedInterleavedBuffer=!0,it.meshPerAttribute=this.meshPerAttribute,it}}class GLBufferAttribute{constructor(rt,it,st,lt,ct){this.isGLBufferAttribute=!0,this.name="",this.buffer=rt,this.type=it,this.itemSize=st,this.elementSize=lt,this.count=ct,this.version=0}set needsUpdate(rt){rt===!0&&this.version++}setBuffer(rt){return this.buffer=rt,this}setType(rt,it){return this.type=rt,this.elementSize=it,this}setItemSize(rt){return this.itemSize=rt,this}setCount(rt){return this.count=rt,this}}class Raycaster{constructor(rt,it,st=0,lt=1/0){this.ray=new Ray(rt,it),this.near=st,this.far=lt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(rt,it){this.ray.set(rt,it)}setFromCamera(rt,it){it.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(it.matrixWorld),this.ray.direction.set(rt.x,rt.y,.5).unproject(it).sub(this.ray.origin).normalize(),this.camera=it):it.isOrthographicCamera?(this.ray.origin.set(rt.x,rt.y,(it.near+it.far)/(it.near-it.far)).unproject(it),this.ray.direction.set(0,0,-1).transformDirection(it.matrixWorld),this.camera=it):console.error("THREE.Raycaster: Unsupported camera type: "+it.type)}intersectObject(rt,it=!0,st=[]){return intersectObject(rt,this,st,it),st.sort(ascSort),st}intersectObjects(rt,it=!0,st=[]){for(let lt=0,ct=rt.length;lt<ct;lt++)intersectObject(rt[lt],this,st,it);return st.sort(ascSort),st}}function ascSort(nt,rt){return nt.distance-rt.distance}function intersectObject(nt,rt,it,st){if(nt.layers.test(rt.layers)&&nt.raycast(rt,it),st===!0){const lt=nt.children;for(let ct=0,ut=lt.length;ct<ut;ct++)intersectObject(lt[ct],rt,it,!0)}}class Spherical{constructor(rt=1,it=0,st=0){return this.radius=rt,this.phi=it,this.theta=st,this}set(rt,it,st){return this.radius=rt,this.phi=it,this.theta=st,this}copy(rt){return this.radius=rt.radius,this.phi=rt.phi,this.theta=rt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(rt){return this.setFromCartesianCoords(rt.x,rt.y,rt.z)}setFromCartesianCoords(rt,it,st){return this.radius=Math.sqrt(rt*rt+it*it+st*st),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(rt,st),this.phi=Math.acos(clamp(it/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(rt=1,it=0,st=0){return this.radius=rt,this.theta=it,this.y=st,this}set(rt,it,st){return this.radius=rt,this.theta=it,this.y=st,this}copy(rt){return this.radius=rt.radius,this.theta=rt.theta,this.y=rt.y,this}setFromVector3(rt){return this.setFromCartesianCoords(rt.x,rt.y,rt.z)}setFromCartesianCoords(rt,it,st){return this.radius=Math.sqrt(rt*rt+st*st),this.theta=Math.atan2(rt,st),this.y=it,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(rt=new Vector2(1/0,1/0),it=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=rt,this.max=it}set(rt,it){return this.min.copy(rt),this.max.copy(it),this}setFromPoints(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it++)this.expandByPoint(rt[it]);return this}setFromCenterAndSize(rt,it){const st=_vector$4.copy(it).multiplyScalar(.5);return this.min.copy(rt).sub(st),this.max.copy(rt).add(st),this}clone(){return new this.constructor().copy(this)}copy(rt){return this.min.copy(rt.min),this.max.copy(rt.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(rt){return this.isEmpty()?rt.set(0,0):rt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(rt){return this.isEmpty()?rt.set(0,0):rt.subVectors(this.max,this.min)}expandByPoint(rt){return this.min.min(rt),this.max.max(rt),this}expandByVector(rt){return this.min.sub(rt),this.max.add(rt),this}expandByScalar(rt){return this.min.addScalar(-rt),this.max.addScalar(rt),this}containsPoint(rt){return!(rt.x<this.min.x||rt.x>this.max.x||rt.y<this.min.y||rt.y>this.max.y)}containsBox(rt){return this.min.x<=rt.min.x&&rt.max.x<=this.max.x&&this.min.y<=rt.min.y&&rt.max.y<=this.max.y}getParameter(rt,it){return it.set((rt.x-this.min.x)/(this.max.x-this.min.x),(rt.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(rt){return!(rt.max.x<this.min.x||rt.min.x>this.max.x||rt.max.y<this.min.y||rt.min.y>this.max.y)}clampPoint(rt,it){return it.copy(rt).clamp(this.min,this.max)}distanceToPoint(rt){return this.clampPoint(rt,_vector$4).distanceTo(rt)}intersect(rt){return this.min.max(rt.min),this.max.min(rt.max),this.isEmpty()&&this.makeEmpty(),this}union(rt){return this.min.min(rt.min),this.max.max(rt.max),this}translate(rt){return this.min.add(rt),this.max.add(rt),this}equals(rt){return rt.min.equals(this.min)&&rt.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(rt=new Vector3,it=new Vector3){this.start=rt,this.end=it}set(rt,it){return this.start.copy(rt),this.end.copy(it),this}copy(rt){return this.start.copy(rt.start),this.end.copy(rt.end),this}getCenter(rt){return rt.addVectors(this.start,this.end).multiplyScalar(.5)}delta(rt){return rt.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(rt,it){return this.delta(it).multiplyScalar(rt).add(this.start)}closestPointToPointParameter(rt,it){_startP.subVectors(rt,this.start),_startEnd.subVectors(this.end,this.start);const st=_startEnd.dot(_startEnd);let ct=_startEnd.dot(_startP)/st;return it&&(ct=clamp(ct,0,1)),ct}closestPointToPoint(rt,it,st){const lt=this.closestPointToPointParameter(rt,it);return this.delta(st).multiplyScalar(lt).add(this.start)}applyMatrix4(rt){return this.start.applyMatrix4(rt),this.end.applyMatrix4(rt),this}equals(rt){return rt.start.equals(this.start)&&rt.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(rt,it){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=it,this.type="SpotLightHelper";const st=new BufferGeometry,lt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let ut=0,dt=1,ht=32;ut<ht;ut++,dt++){const pt=ut/ht*Math.PI*2,ft=dt/ht*Math.PI*2;lt.push(Math.cos(pt),Math.sin(pt),1,Math.cos(ft),Math.sin(ft),1)}st.setAttribute("position",new Float32BufferAttribute(lt,3));const ct=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(st,ct),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const rt=this.light.distance?this.light.distance:1e3,it=rt*Math.tan(this.light.angle);this.cone.scale.set(it,it,rt),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(rt){const it=getBoneList(rt),st=new BufferGeometry,lt=[],ct=[],ut=new Color(0,0,1),dt=new Color(0,1,0);for(let pt=0;pt<it.length;pt++){const ft=it[pt];ft.parent&&ft.parent.isBone&&(lt.push(0,0,0),lt.push(0,0,0),ct.push(ut.r,ut.g,ut.b),ct.push(dt.r,dt.g,dt.b))}st.setAttribute("position",new Float32BufferAttribute(lt,3)),st.setAttribute("color",new Float32BufferAttribute(ct,3));const ht=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(st,ht),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=rt,this.bones=it,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(rt){const it=this.bones,st=this.geometry,lt=st.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ct=0,ut=0;ct<it.length;ct++){const dt=it[ct];dt.parent&&dt.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,dt.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),lt.setXYZ(ut,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,dt.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),lt.setXYZ(ut+1,_vector$2.x,_vector$2.y,_vector$2.z),ut+=2)}st.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(rt)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(nt){const rt=[];nt.isBone===!0&&rt.push(nt);for(let it=0;it<nt.children.length;it++)rt.push.apply(rt,getBoneList(nt.children[it]));return rt}class PointLightHelper extends Mesh{constructor(rt,it,st){const lt=new SphereGeometry(it,4,2),ct=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(lt,ct),this.light=rt,this.color=st,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(rt,it,st){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="HemisphereLightHelper";const lt=new OctahedronGeometry(it);lt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ct=lt.getAttribute("position"),ut=new Float32Array(ct.count*3);lt.setAttribute("color",new BufferAttribute(ut,3)),this.add(new Mesh(lt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const rt=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const it=rt.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let st=0,lt=it.count;st<lt;st++){const ct=st<lt/2?_color1:_color2;it.setXYZ(st,ct.r,ct.g,ct.b)}it.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),rt.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(rt=10,it=10,st=4473924,lt=8947848){st=new Color(st),lt=new Color(lt);const ct=it/2,ut=rt/it,dt=rt/2,ht=[],pt=[];for(let gt=0,xt=0,yt=-dt;gt<=it;gt++,yt+=ut){ht.push(-dt,0,yt,dt,0,yt),ht.push(yt,0,-dt,yt,0,dt);const vt=gt===ct?st:lt;vt.toArray(pt,xt),xt+=3,vt.toArray(pt,xt),xt+=3,vt.toArray(pt,xt),xt+=3,vt.toArray(pt,xt),xt+=3}const ft=new BufferGeometry;ft.setAttribute("position",new Float32BufferAttribute(ht,3)),ft.setAttribute("color",new Float32BufferAttribute(pt,3));const mt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ft,mt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(rt=10,it=16,st=8,lt=64,ct=4473924,ut=8947848){ct=new Color(ct),ut=new Color(ut);const dt=[],ht=[];if(it>1)for(let mt=0;mt<it;mt++){const gt=mt/it*(Math.PI*2),xt=Math.sin(gt)*rt,yt=Math.cos(gt)*rt;dt.push(0,0,0),dt.push(xt,0,yt);const vt=mt&1?ct:ut;ht.push(vt.r,vt.g,vt.b),ht.push(vt.r,vt.g,vt.b)}for(let mt=0;mt<st;mt++){const gt=mt&1?ct:ut,xt=rt-rt/st*mt;for(let yt=0;yt<lt;yt++){let vt=yt/lt*(Math.PI*2),St=Math.sin(vt)*xt,Et=Math.cos(vt)*xt;dt.push(St,0,Et),ht.push(gt.r,gt.g,gt.b),vt=(yt+1)/lt*(Math.PI*2),St=Math.sin(vt)*xt,Et=Math.cos(vt)*xt,dt.push(St,0,Et),ht.push(gt.r,gt.g,gt.b)}}const pt=new BufferGeometry;pt.setAttribute("position",new Float32BufferAttribute(dt,3)),pt.setAttribute("color",new Float32BufferAttribute(ht,3));const ft=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(pt,ft),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(rt,it,st){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="DirectionalLightHelper",it===void 0&&(it=1);let lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute([-it,it,0,it,it,0,it,-it,0,-it,-it,0,-it,it,0],3));const ct=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(lt,ct),this.add(this.lightPlane),lt=new BufferGeometry,lt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(lt,ct),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(rt){const it=new BufferGeometry,st=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),lt=[],ct=[],ut={};dt("n1","n2"),dt("n2","n4"),dt("n4","n3"),dt("n3","n1"),dt("f1","f2"),dt("f2","f4"),dt("f4","f3"),dt("f3","f1"),dt("n1","f1"),dt("n2","f2"),dt("n3","f3"),dt("n4","f4"),dt("p","n1"),dt("p","n2"),dt("p","n3"),dt("p","n4"),dt("u1","u2"),dt("u2","u3"),dt("u3","u1"),dt("c","t"),dt("p","c"),dt("cn1","cn2"),dt("cn3","cn4"),dt("cf1","cf2"),dt("cf3","cf4");function dt(yt,vt){ht(yt),ht(vt)}function ht(yt){lt.push(0,0,0),ct.push(0,0,0),ut[yt]===void 0&&(ut[yt]=[]),ut[yt].push(lt.length/3-1)}it.setAttribute("position",new Float32BufferAttribute(lt,3)),it.setAttribute("color",new Float32BufferAttribute(ct,3)),super(it,st),this.type="CameraHelper",this.camera=rt,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=ut,this.update();const pt=new Color(16755200),ft=new Color(16711680),mt=new Color(43775),gt=new Color(16777215),xt=new Color(3355443);this.setColors(pt,ft,mt,gt,xt)}setColors(rt,it,st,lt,ct){const dt=this.geometry.getAttribute("color");dt.setXYZ(0,rt.r,rt.g,rt.b),dt.setXYZ(1,rt.r,rt.g,rt.b),dt.setXYZ(2,rt.r,rt.g,rt.b),dt.setXYZ(3,rt.r,rt.g,rt.b),dt.setXYZ(4,rt.r,rt.g,rt.b),dt.setXYZ(5,rt.r,rt.g,rt.b),dt.setXYZ(6,rt.r,rt.g,rt.b),dt.setXYZ(7,rt.r,rt.g,rt.b),dt.setXYZ(8,rt.r,rt.g,rt.b),dt.setXYZ(9,rt.r,rt.g,rt.b),dt.setXYZ(10,rt.r,rt.g,rt.b),dt.setXYZ(11,rt.r,rt.g,rt.b),dt.setXYZ(12,rt.r,rt.g,rt.b),dt.setXYZ(13,rt.r,rt.g,rt.b),dt.setXYZ(14,rt.r,rt.g,rt.b),dt.setXYZ(15,rt.r,rt.g,rt.b),dt.setXYZ(16,rt.r,rt.g,rt.b),dt.setXYZ(17,rt.r,rt.g,rt.b),dt.setXYZ(18,rt.r,rt.g,rt.b),dt.setXYZ(19,rt.r,rt.g,rt.b),dt.setXYZ(20,rt.r,rt.g,rt.b),dt.setXYZ(21,rt.r,rt.g,rt.b),dt.setXYZ(22,rt.r,rt.g,rt.b),dt.setXYZ(23,rt.r,rt.g,rt.b),dt.setXYZ(24,it.r,it.g,it.b),dt.setXYZ(25,it.r,it.g,it.b),dt.setXYZ(26,it.r,it.g,it.b),dt.setXYZ(27,it.r,it.g,it.b),dt.setXYZ(28,it.r,it.g,it.b),dt.setXYZ(29,it.r,it.g,it.b),dt.setXYZ(30,it.r,it.g,it.b),dt.setXYZ(31,it.r,it.g,it.b),dt.setXYZ(32,st.r,st.g,st.b),dt.setXYZ(33,st.r,st.g,st.b),dt.setXYZ(34,st.r,st.g,st.b),dt.setXYZ(35,st.r,st.g,st.b),dt.setXYZ(36,st.r,st.g,st.b),dt.setXYZ(37,st.r,st.g,st.b),dt.setXYZ(38,lt.r,lt.g,lt.b),dt.setXYZ(39,lt.r,lt.g,lt.b),dt.setXYZ(40,ct.r,ct.g,ct.b),dt.setXYZ(41,ct.r,ct.g,ct.b),dt.setXYZ(42,ct.r,ct.g,ct.b),dt.setXYZ(43,ct.r,ct.g,ct.b),dt.setXYZ(44,ct.r,ct.g,ct.b),dt.setXYZ(45,ct.r,ct.g,ct.b),dt.setXYZ(46,ct.r,ct.g,ct.b),dt.setXYZ(47,ct.r,ct.g,ct.b),dt.setXYZ(48,ct.r,ct.g,ct.b),dt.setXYZ(49,ct.r,ct.g,ct.b),dt.needsUpdate=!0}update(){const rt=this.geometry,it=this.pointMap,st=1,lt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",it,rt,_camera,0,0,-1),setPoint("t",it,rt,_camera,0,0,1),setPoint("n1",it,rt,_camera,-st,-lt,-1),setPoint("n2",it,rt,_camera,st,-lt,-1),setPoint("n3",it,rt,_camera,-st,lt,-1),setPoint("n4",it,rt,_camera,st,lt,-1),setPoint("f1",it,rt,_camera,-st,-lt,1),setPoint("f2",it,rt,_camera,st,-lt,1),setPoint("f3",it,rt,_camera,-st,lt,1),setPoint("f4",it,rt,_camera,st,lt,1),setPoint("u1",it,rt,_camera,st*.7,lt*1.1,-1),setPoint("u2",it,rt,_camera,-st*.7,lt*1.1,-1),setPoint("u3",it,rt,_camera,0,lt*2,-1),setPoint("cf1",it,rt,_camera,-st,0,1),setPoint("cf2",it,rt,_camera,st,0,1),setPoint("cf3",it,rt,_camera,0,-lt,1),setPoint("cf4",it,rt,_camera,0,lt,1),setPoint("cn1",it,rt,_camera,-st,0,-1),setPoint("cn2",it,rt,_camera,st,0,-1),setPoint("cn3",it,rt,_camera,0,-lt,-1),setPoint("cn4",it,rt,_camera,0,lt,-1),rt.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(nt,rt,it,st,lt,ct,ut){_vector.set(lt,ct,ut).unproject(st);const dt=rt[nt];if(dt!==void 0){const ht=it.getAttribute("position");for(let pt=0,ft=dt.length;pt<ft;pt++)ht.setXYZ(dt[pt],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(rt,it=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),lt=new Float32Array(8*3),ct=new BufferGeometry;ct.setIndex(new BufferAttribute(st,1)),ct.setAttribute("position",new BufferAttribute(lt,3)),super(ct,new LineBasicMaterial({color:it,toneMapped:!1})),this.object=rt,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(rt){if(rt!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const it=_box.min,st=_box.max,lt=this.geometry.attributes.position,ct=lt.array;ct[0]=st.x,ct[1]=st.y,ct[2]=st.z,ct[3]=it.x,ct[4]=st.y,ct[5]=st.z,ct[6]=it.x,ct[7]=it.y,ct[8]=st.z,ct[9]=st.x,ct[10]=it.y,ct[11]=st.z,ct[12]=st.x,ct[13]=st.y,ct[14]=it.z,ct[15]=it.x,ct[16]=st.y,ct[17]=it.z,ct[18]=it.x,ct[19]=it.y,ct[20]=it.z,ct[21]=st.x,ct[22]=it.y,ct[23]=it.z,lt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(rt){return this.object=rt,this.update(),this}copy(rt,it){return super.copy(rt,it),this.object=rt.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(rt,it=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),lt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ct=new BufferGeometry;ct.setIndex(new BufferAttribute(st,1)),ct.setAttribute("position",new Float32BufferAttribute(lt,3)),super(ct,new LineBasicMaterial({color:it,toneMapped:!1})),this.box=rt,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(rt){const it=this.box;it.isEmpty()||(it.getCenter(this.position),it.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(rt))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(rt,it=1,st=16776960){const lt=st,ct=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],ut=new BufferGeometry;ut.setAttribute("position",new Float32BufferAttribute(ct,3)),ut.computeBoundingSphere(),super(ut,new LineBasicMaterial({color:lt,toneMapped:!1})),this.type="PlaneHelper",this.plane=rt,this.size=it;const dt=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ht=new BufferGeometry;ht.setAttribute("position",new Float32BufferAttribute(dt,3)),ht.computeBoundingSphere(),this.add(new Mesh(ht,new MeshBasicMaterial({color:lt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(rt){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(rt)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(rt=new Vector3(0,0,1),it=new Vector3(0,0,0),st=1,lt=16776960,ct=st*.2,ut=ct*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(it),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:lt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:lt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(rt),this.setLength(st,ct,ut)}setDirection(rt){if(rt.y>.99999)this.quaternion.set(0,0,0,1);else if(rt.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(rt.z,0,-rt.x).normalize();const it=Math.acos(rt.y);this.quaternion.setFromAxisAngle(_axis,it)}}setLength(rt,it=rt*.2,st=it*.2){this.line.scale.set(1,Math.max(1e-4,rt-it),1),this.line.updateMatrix(),this.cone.scale.set(st,it,st),this.cone.position.y=rt,this.cone.updateMatrix()}setColor(rt){this.line.material.color.set(rt),this.cone.material.color.set(rt)}copy(rt){return super.copy(rt,!1),this.line.copy(rt.line),this.cone.copy(rt.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(rt=1){const it=[0,0,0,rt,0,0,0,0,0,0,rt,0,0,0,0,0,0,rt],st=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute(it,3)),lt.setAttribute("color",new Float32BufferAttribute(st,3));const ct=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(lt,ct),this.type="AxesHelper"}setColors(rt,it,st){const lt=new Color,ct=this.geometry.attributes.color.array;return lt.set(rt),lt.toArray(ct,0),lt.toArray(ct,3),lt.set(it),lt.toArray(ct,6),lt.toArray(ct,9),lt.set(st),lt.toArray(ct,12),lt.toArray(ct,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(rt,it){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(rt,it),this}lineTo(rt,it){return this.currentPath.lineTo(rt,it),this}quadraticCurveTo(rt,it,st,lt){return this.currentPath.quadraticCurveTo(rt,it,st,lt),this}bezierCurveTo(rt,it,st,lt,ct,ut){return this.currentPath.bezierCurveTo(rt,it,st,lt,ct,ut),this}splineThru(rt){return this.currentPath.splineThru(rt),this}toShapes(rt){function it(Et){const wt=[];for(let Rt=0,Tt=Et.length;Rt<Tt;Rt++){const It=Et[Rt],At=new Shape;At.curves=It.curves,wt.push(At)}return wt}function st(Et,wt){const Rt=wt.length;let Tt=!1;for(let It=Rt-1,At=0;At<Rt;It=At++){let Dt=wt[It],jt=wt[At],Ft=jt.x-Dt.x,Lt=jt.y-Dt.y;if(Math.abs(Lt)>Number.EPSILON){if(Lt<0&&(Dt=wt[At],Ft=-Ft,jt=wt[It],Lt=-Lt),Et.y<Dt.y||Et.y>jt.y)continue;if(Et.y===Dt.y){if(Et.x===Dt.x)return!0}else{const Pt=Lt*(Et.x-Dt.x)-Ft*(Et.y-Dt.y);if(Pt===0)return!0;if(Pt<0)continue;Tt=!Tt}}else{if(Et.y!==Dt.y)continue;if(jt.x<=Et.x&&Et.x<=Dt.x||Dt.x<=Et.x&&Et.x<=jt.x)return!0}}return Tt}const lt=ShapeUtils.isClockWise,ct=this.subPaths;if(ct.length===0)return[];let ut,dt,ht;const pt=[];if(ct.length===1)return dt=ct[0],ht=new Shape,ht.curves=dt.curves,pt.push(ht),pt;let ft=!lt(ct[0].getPoints());ft=rt?!ft:ft;const mt=[],gt=[];let xt=[],yt=0,vt;gt[yt]=void 0,xt[yt]=[];for(let Et=0,wt=ct.length;Et<wt;Et++)dt=ct[Et],vt=dt.getPoints(),ut=lt(vt),ut=rt?!ut:ut,ut?(!ft&&gt[yt]&&yt++,gt[yt]={s:new Shape,p:vt},gt[yt].s.curves=dt.curves,ft&&yt++,xt[yt]=[]):xt[yt].push({h:dt,p:vt[0]});if(!gt[0])return it(ct);if(gt.length>1){let Et=!1,wt=0;for(let Rt=0,Tt=gt.length;Rt<Tt;Rt++)mt[Rt]=[];for(let Rt=0,Tt=gt.length;Rt<Tt;Rt++){const It=xt[Rt];for(let At=0;At<It.length;At++){const Dt=It[At];let jt=!0;for(let Ft=0;Ft<gt.length;Ft++)st(Dt.p,gt[Ft].p)&&(Rt!==Ft&&wt++,jt?(jt=!1,mt[Ft].push(Dt)):Et=!0);jt&&mt[Rt].push(Dt)}}wt>0&&Et===!1&&(xt=mt)}let St;for(let Et=0,wt=gt.length;Et<wt;Et++){ht=gt[Et].s,pt.push(ht),St=xt[Et];for(let Rt=0,Tt=St.length;Rt<Tt;Rt++)ht.holes.push(St[Rt].h)}return pt}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio:Audio$1,AudioAnalyser:AudioAnalyser$1,AudioContext:AudioContext$1,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearDisplayP3ColorSpace,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,P3Primaries,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,Rec709Primaries,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,createCanvasElement,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(nt){let rt;const it=new Set,st=(pt,ft)=>{const mt=typeof pt=="function"?pt(rt):pt;if(mt!==rt){const gt=rt;rt=ft?mt:Object.assign({},rt,mt),it.forEach(xt=>xt(rt,gt))}},lt=()=>rt,ct=(pt,ft=lt,mt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let gt=ft(rt);function xt(){const yt=ft(rt);if(!mt(gt,yt)){const vt=gt;pt(gt=yt,vt)}}return it.add(xt),()=>it.delete(xt)},ht={setState:st,getState:lt,subscribe:(pt,ft,mt)=>ft||mt?ct(pt,ft,mt):(it.add(pt),()=>it.delete(pt)),destroy:()=>it.clear()};return rt=nt(st,lt,ht),ht}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(nt){const rt=typeof nt=="function"?createStore$1(nt):nt,it=(st=rt.getState,lt=Object.is)=>{const[,ct]=reactExports.useReducer(St=>St+1,0),ut=rt.getState(),dt=reactExports.useRef(ut),ht=reactExports.useRef(st),pt=reactExports.useRef(lt),ft=reactExports.useRef(!1),mt=reactExports.useRef();mt.current===void 0&&(mt.current=st(ut));let gt,xt=!1;(dt.current!==ut||ht.current!==st||pt.current!==lt||ft.current)&&(gt=st(ut),xt=!lt(mt.current,gt)),useIsomorphicLayoutEffect$1(()=>{xt&&(mt.current=gt),dt.current=ut,ht.current=st,pt.current=lt,ft.current=!1});const yt=reactExports.useRef(ut);useIsomorphicLayoutEffect$1(()=>{const St=()=>{try{const wt=rt.getState(),Rt=ht.current(wt);pt.current(mt.current,Rt)||(dt.current=wt,mt.current=Rt,ct())}catch{ft.current=!0,ct()}},Et=rt.subscribe(St);return rt.getState()!==yt.current&&St(),Et},[]);const vt=xt?gt:mt.current;return reactExports.useDebugValue(vt),vt};return Object.assign(it,rt),it[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const st=[it,rt];return{next(){const lt=st.length<=0;return{value:st.shift(),done:lt}}}},it}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Kt=Gt-1>>>1,Xt=Bt[Kt];if(0<lt(Xt,Ht))Bt[Kt]=Ht,Bt[Gt]=Xt,Gt=Kt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Kt=0,Xt=Bt.length,or=Xt>>>1;Kt<or;){var tr=2*(Kt+1)-1,dr=Bt[tr],fr=tr+1,Sr=Bt[fr];if(0>lt(dr,Gt))fr<Xt&&0>lt(Sr,dr)?(Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr):(Bt[Kt]=dr,Bt[tr]=Gt,Kt=tr);else if(fr<Xt&&0>lt(Sr,Gt))Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],pt=[],ft=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(pt);Ht!==null;){if(Ht.callback===null)st(pt);else if(Ht.startTime<=Bt)st(pt),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(pt)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(pt);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,Et(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Pt());){var Kt=mt.callback;if(typeof Kt=="function"){mt.callback=null,gt=mt.priorityLevel;var Xt=Kt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Xt=="function"?mt.callback=Xt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var or=!0;else{var tr=it(pt);tr!==null&&zt(Tt,tr.startTime-Ht),or=!1}return or}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Pt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof wt=="function")Nt=function(){wt(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Kt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Kt+Gt:Kt):Gt=Kt,Bt){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=Gt+Xt,Bt={id:ft++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Xt,sortIndex:-1},Gt>Kt?(Bt.sortIndex=Gt,rt(pt,Bt),it(ht)===null&&Bt===it(pt)&&(vt?(Et(jt),jt=-1):vt=!0,zt(Tt,Gt-Kt))):(Bt.sortIndex=Xt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Pt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(rt){var it={},st=reactExports,lt=requireScheduler(),ct=Object.assign;function ut(Mt){for(var kt="https://reactjs.org/docs/error-decoder.html?invariant="+Mt,Wt=1;Wt<arguments.length;Wt++)kt+="&args[]="+encodeURIComponent(arguments[Wt]);return"Minified React error #"+Mt+"; visit "+kt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dt=st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ht=Symbol.for("react.element"),pt=Symbol.for("react.portal"),ft=Symbol.for("react.fragment"),mt=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),xt=Symbol.for("react.provider"),yt=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),Tt=Symbol.for("react.offscreen"),It=Symbol.iterator;function At(Mt){return Mt===null||typeof Mt!="object"?null:(Mt=It&&Mt[It]||Mt["@@iterator"],typeof Mt=="function"?Mt:null)}function Dt(Mt){if(Mt==null)return null;if(typeof Mt=="function")return Mt.displayName||Mt.name||null;if(typeof Mt=="string")return Mt;switch(Mt){case ft:return"Fragment";case pt:return"Portal";case gt:return"Profiler";case mt:return"StrictMode";case St:return"Suspense";case Et:return"SuspenseList"}if(typeof Mt=="object")switch(Mt.$$typeof){case yt:return(Mt.displayName||"Context")+".Consumer";case xt:return(Mt._context.displayName||"Context")+".Provider";case vt:var kt=Mt.render;return Mt=Mt.displayName,Mt||(Mt=kt.displayName||kt.name||"",Mt=Mt!==""?"ForwardRef("+Mt+")":"ForwardRef"),Mt;case wt:return kt=Mt.displayName||null,kt!==null?kt:Dt(Mt.type)||"Memo";case Rt:kt=Mt._payload,Mt=Mt._init;try{return Dt(Mt(kt))}catch{}}return null}function jt(Mt){var kt=Mt.type;switch(Mt.tag){case 24:return"Cache";case 9:return(kt.displayName||"Context")+".Consumer";case 10:return(kt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Mt=kt.render,Mt=Mt.displayName||Mt.name||"",kt.displayName||(Mt!==""?"ForwardRef("+Mt+")":"ForwardRef");case 7:return"Fragment";case 5:return kt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dt(kt);case 8:return kt===mt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof kt=="function")return kt.displayName||kt.name||null;if(typeof kt=="string")return kt}return null}function Ft(Mt){var kt=Mt,Wt=Mt;if(Mt.alternate)for(;kt.return;)kt=kt.return;else{Mt=kt;do kt=Mt,kt.flags&4098&&(Wt=kt.return),Mt=kt.return;while(Mt)}return kt.tag===3?Wt:null}function Lt(Mt){if(Ft(Mt)!==Mt)throw Error(ut(188))}function Pt(Mt){var kt=Mt.alternate;if(!kt){if(kt=Ft(Mt),kt===null)throw Error(ut(188));return kt!==Mt?null:Mt}for(var Wt=Mt,qt=kt;;){var Zt=Wt.return;if(Zt===null)break;var ir=Zt.alternate;if(ir===null){if(qt=Zt.return,qt!==null){Wt=qt;continue}break}if(Zt.child===ir.child){for(ir=Zt.child;ir;){if(ir===Wt)return Lt(Zt),Mt;if(ir===qt)return Lt(Zt),kt;ir=ir.sibling}throw Error(ut(188))}if(Wt.return!==qt.return)Wt=Zt,qt=ir;else{for(var Br=!1,un=Zt.child;un;){if(un===Wt){Br=!0,Wt=Zt,qt=ir;break}if(un===qt){Br=!0,qt=Zt,Wt=ir;break}un=un.sibling}if(!Br){for(un=ir.child;un;){if(un===Wt){Br=!0,Wt=ir,qt=Zt;break}if(un===qt){Br=!0,qt=ir,Wt=Zt;break}un=un.sibling}if(!Br)throw Error(ut(189))}}if(Wt.alternate!==qt)throw Error(ut(190))}if(Wt.tag!==3)throw Error(ut(188));return Wt.stateNode.current===Wt?Mt:kt}function Ot(Mt){return Mt=Pt(Mt),Mt!==null?Nt(Mt):null}function Nt(Mt){if(Mt.tag===5||Mt.tag===6)return Mt;for(Mt=Mt.child;Mt!==null;){var kt=Nt(Mt);if(kt!==null)return kt;Mt=Mt.sibling}return null}function $t(Mt){if(Mt.tag===5||Mt.tag===6)return Mt;for(Mt=Mt.child;Mt!==null;){if(Mt.tag!==4){var kt=$t(Mt);if(kt!==null)return kt}Mt=Mt.sibling}return null}var Vt=Array.isArray,Ut=rt.getPublicInstance,zt=rt.getRootHostContext,Bt=rt.getChildHostContext,Ht=rt.prepareForCommit,Gt=rt.resetAfterCommit,Kt=rt.createInstance,Xt=rt.appendInitialChild,or=rt.finalizeInitialChildren,tr=rt.prepareUpdate,dr=rt.shouldSetTextContent,fr=rt.createTextInstance,Sr=rt.scheduleTimeout,vr=rt.cancelTimeout,mr=rt.noTimeout,hr=rt.isPrimaryRenderer,gr=rt.supportsMutation,lr=rt.supportsPersistence,Ir=rt.supportsHydration,wr=rt.getInstanceFromNode,Fr=rt.preparePortalMount,$r=rt.getCurrentEventPriority,hn=rt.detachDeletedInstance,Zr=rt.supportsMicrotasks,Qt=rt.scheduleMicrotask,Jt=rt.supportsTestSelectors,pr=rt.findFiberRoot,Vr=rt.getBoundingRect,Wr=rt.getTextContent,zr=rt.isHiddenSubtree,ln=rt.matchAccessibilityRole,xn=rt.setFocusIfFocusable,yn=rt.setupIntersectionObserver,Wn=rt.appendChild,Mn=rt.appendChildToContainer,sn=rt.commitTextUpdate,qn=rt.commitMount,Gr=rt.commitUpdate,qr=rt.insertBefore,wn=rt.insertInContainerBefore,Cr=rt.removeChild,nr=rt.removeChildFromContainer,Ur=rt.resetTextContent,Mr=rt.hideInstance,rn=rt.hideTextInstance,Cn=rt.unhideInstance,Rr=rt.unhideTextInstance,pn=rt.clearContainer,Tr=rt.cloneInstance,xr=rt.createContainerChildSet,jr=rt.appendChildToContainerChildSet,en=rt.finalizeContainerChildren,fn=rt.replaceContainerChildren,Vn=rt.cloneHiddenInstance,Yn=rt.cloneHiddenTextInstance,Hn=rt.canHydrateInstance,Bn=rt.canHydrateTextInstance,es=rt.canHydrateSuspenseInstance,$s=rt.isSuspenseInstancePending,Ss=rt.isSuspenseInstanceFallback,zs=rt.registerSuspenseInstanceRetry,ro=rt.getNextHydratableSibling,Po=rt.getFirstHydratableChild,To=rt.getFirstHydratableChildWithinContainer,qo=rt.getFirstHydratableChildWithinSuspenseInstance,$a=rt.hydrateInstance,Ll=rt.hydrateTextInstance,Rl=rt.hydrateSuspenseInstance,Ar=rt.getNextHydratableInstanceAfterSuspenseInstance,_n=rt.commitHydratedContainer,Pn=rt.commitHydratedSuspenseInstance,Tn=rt.clearSuspenseBoundary,Or=rt.clearSuspenseBoundaryFromContainer,ds=rt.shouldDeleteUnhydratedTailInstances,_i=rt.didNotMatchHydratedContainerTextInstance,hs=rt.didNotMatchHydratedTextInstance,Ms;function Us(Mt){if(Ms===void 0)try{throw Error()}catch(Wt){var kt=Wt.stack.trim().match(/\n( *(at )?)/);Ms=kt&&kt[1]||""}return`
`+Ms+Mt}var Hs=!1;function tn(Mt,kt){if(!Mt||Hs)return"";Hs=!0;var Wt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(kt)if(kt=function(){throw Error()},Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(ls){var qt=ls}Reflect.construct(Mt,[],kt)}else{try{kt.call()}catch(ls){qt=ls}Mt.call(kt.prototype)}else{try{throw Error()}catch(ls){qt=ls}Mt()}}catch(ls){if(ls&&qt&&typeof ls.stack=="string"){for(var Zt=ls.stack.split(`
`),ir=qt.stack.split(`
`),Br=Zt.length-1,un=ir.length-1;1<=Br&&0<=un&&Zt[Br]!==ir[un];)un--;for(;1<=Br&&0<=un;Br--,un--)if(Zt[Br]!==ir[un]){if(Br!==1||un!==1)do if(Br--,un--,0>un||Zt[Br]!==ir[un]){var Fn=`
`+Zt[Br].replace(" at new "," at ");return Mt.displayName&&Fn.includes("<anonymous>")&&(Fn=Fn.replace("<anonymous>",Mt.displayName)),Fn}while(1<=Br&&0<=un);break}}}finally{Hs=!1,Error.prepareStackTrace=Wt}return(Mt=Mt?Mt.displayName||Mt.name:"")?Us(Mt):""}var Ao=Object.prototype.hasOwnProperty,mn=[],Rn=-1;function Un(Mt){return{current:Mt}}function Dn(Mt){0>Rn||(Mt.current=mn[Rn],mn[Rn]=null,Rn--)}function $n(Mt,kt){Rn++,mn[Rn]=Mt.current,Mt.current=kt}var Os={},cs=Un(Os),ks=Un(!1),Ps=Os;function oo(Mt,kt){var Wt=Mt.type.contextTypes;if(!Wt)return Os;var qt=Mt.stateNode;if(qt&&qt.__reactInternalMemoizedUnmaskedChildContext===kt)return qt.__reactInternalMemoizedMaskedChildContext;var Zt={},ir;for(ir in Wt)Zt[ir]=kt[ir];return qt&&(Mt=Mt.stateNode,Mt.__reactInternalMemoizedUnmaskedChildContext=kt,Mt.__reactInternalMemoizedMaskedChildContext=Zt),Zt}function As(Mt){return Mt=Mt.childContextTypes,Mt!=null}function Ns(){Dn(ks),Dn(cs)}function Uo(Mt,kt,Wt){if(cs.current!==Os)throw Error(ut(168));$n(cs,kt),$n(ks,Wt)}function Vo(Mt,kt,Wt){var qt=Mt.stateNode;if(kt=kt.childContextTypes,typeof qt.getChildContext!="function")return Wt;qt=qt.getChildContext();for(var Zt in qt)if(!(Zt in kt))throw Error(ut(108,jt(Mt)||"Unknown",Zt));return ct({},Wt,qt)}function yo(Mt){return Mt=(Mt=Mt.stateNode)&&Mt.__reactInternalMemoizedMergedChildContext||Os,Ps=cs.current,$n(cs,Mt),$n(ks,ks.current),!0}function Ko(Mt,kt,Wt){var qt=Mt.stateNode;if(!qt)throw Error(ut(169));Wt?(Mt=Vo(Mt,kt,Ps),qt.__reactInternalMemoizedMergedChildContext=Mt,Dn(ks),Dn(cs),$n(cs,Mt)):Dn(ks),$n(ks,Wt)}var ko=Math.clz32?Math.clz32:Dl,Tl=Math.log,Bl=Math.LN2;function Dl(Mt){return Mt>>>=0,Mt===0?32:31-(Tl(Mt)/Bl|0)|0}var Cl=64,Ol=4194304;function Ul(Mt){switch(Mt&-Mt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Mt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Mt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Mt}}function Iu(Mt,kt){var Wt=Mt.pendingLanes;if(Wt===0)return 0;var qt=0,Zt=Mt.suspendedLanes,ir=Mt.pingedLanes,Br=Wt&268435455;if(Br!==0){var un=Br&~Zt;un!==0?qt=Ul(un):(ir&=Br,ir!==0&&(qt=Ul(ir)))}else Br=Wt&~Zt,Br!==0?qt=Ul(Br):ir!==0&&(qt=Ul(ir));if(qt===0)return 0;if(kt!==0&&kt!==qt&&!(kt&Zt)&&(Zt=qt&-qt,ir=kt&-kt,Zt>=ir||Zt===16&&(ir&4194240)!==0))return kt;if(qt&4&&(qt|=Wt&16),kt=Mt.entangledLanes,kt!==0)for(Mt=Mt.entanglements,kt&=qt;0<kt;)Wt=31-ko(kt),Zt=1<<Wt,qt|=Mt[Wt],kt&=~Zt;return qt}function hp(Mt,kt){switch(Mt){case 1:case 2:case 4:return kt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return kt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wp(Mt,kt){for(var Wt=Mt.suspendedLanes,qt=Mt.pingedLanes,Zt=Mt.expirationTimes,ir=Mt.pendingLanes;0<ir;){var Br=31-ko(ir),un=1<<Br,Fn=Zt[Br];Fn===-1?(!(un&Wt)||un&qt)&&(Zt[Br]=hp(un,kt)):Fn<=kt&&(Mt.expiredLanes|=un),ir&=~un}}function qu(Mt){return Mt=Mt.pendingLanes&-1073741825,Mt!==0?Mt:Mt&1073741824?1073741824:0}function Ku(Mt){for(var kt=[],Wt=0;31>Wt;Wt++)kt.push(Mt);return kt}function Xu(Mt,kt,Wt){Mt.pendingLanes|=kt,kt!==536870912&&(Mt.suspendedLanes=0,Mt.pingedLanes=0),Mt=Mt.eventTimes,kt=31-ko(kt),Mt[kt]=Wt}function pp(Mt,kt){var Wt=Mt.pendingLanes&~kt;Mt.pendingLanes=kt,Mt.suspendedLanes=0,Mt.pingedLanes=0,Mt.expiredLanes&=kt,Mt.mutableReadLanes&=kt,Mt.entangledLanes&=kt,kt=Mt.entanglements;var qt=Mt.eventTimes;for(Mt=Mt.expirationTimes;0<Wt;){var Zt=31-ko(Wt),ir=1<<Zt;kt[Zt]=0,qt[Zt]=-1,Mt[Zt]=-1,Wt&=~ir}}function Rp(Mt,kt){var Wt=Mt.entangledLanes|=kt;for(Mt=Mt.entanglements;Wt;){var qt=31-ko(Wt),Zt=1<<qt;Zt&kt|Mt[qt]&kt&&(Mt[qt]|=kt),Wt&=~Zt}}var xo=0;function ws(Mt){return Mt&=-Mt,1<Mt?4<Mt?Mt&268435455?16:536870912:4:1}var Dr=lt.unstable_scheduleCallback,Jn=lt.unstable_cancelCallback,Qs=lt.unstable_shouldYield,Ml=lt.unstable_requestPaint,Mo=lt.unstable_now,Lu=lt.unstable_ImmediatePriority,xm=lt.unstable_UserBlockingPriority,qp=lt.unstable_NormalPriority,Sm=lt.unstable_IdlePriority,Np=null,xl=null;function sm(Mt){if(xl&&typeof xl.onCommitFiberRoot=="function")try{xl.onCommitFiberRoot(Np,Mt,void 0,(Mt.current.flags&128)===128)}catch{}}function iu(Mt,kt){return Mt===kt&&(Mt!==0||1/Mt===1/kt)||Mt!==Mt&&kt!==kt}var Yo=typeof Object.is=="function"?Object.is:iu,xu=null,Sl=!1,Ks=!1;function Tp(Mt){xu===null?xu=[Mt]:xu.push(Mt)}function zo(Mt){Sl=!0,Tp(Mt)}function Yl(){if(!Ks&&xu!==null){Ks=!0;var Mt=0,kt=xo;try{var Wt=xu;for(xo=1;Mt<Wt.length;Mt++){var qt=Wt[Mt];do qt=qt(!0);while(qt!==null)}xu=null,Sl=!1}catch(Zt){throw xu!==null&&(xu=xu.slice(Mt+1)),Dr(Lu,Yl),Zt}finally{xo=kt,Ks=!1}}return null}var Zu=dt.ReactCurrentBatchConfig;function lo(Mt,kt){if(Yo(Mt,kt))return!0;if(typeof Mt!="object"||Mt===null||typeof kt!="object"||kt===null)return!1;var Wt=Object.keys(Mt),qt=Object.keys(kt);if(Wt.length!==qt.length)return!1;for(qt=0;qt<Wt.length;qt++){var Zt=Wt[qt];if(!Ao.call(kt,Zt)||!Yo(Mt[Zt],kt[Zt]))return!1}return!0}function $p(Mt){switch(Mt.tag){case 5:return Us(Mt.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return Mt=tn(Mt.type,!1),Mt;case 11:return Mt=tn(Mt.type.render,!1),Mt;case 1:return Mt=tn(Mt.type,!0),Mt;default:return""}}function Ql(Mt,kt){if(Mt&&Mt.defaultProps){kt=ct({},kt),Mt=Mt.defaultProps;for(var Wt in Mt)kt[Wt]===void 0&&(kt[Wt]=Mt[Wt]);return kt}return kt}var fp=Un(null),mp=null,Xo=null,Pl=null;function Su(){Pl=Xo=mp=null}function Kp(Mt,kt,Wt){hr?($n(fp,kt._currentValue),kt._currentValue=Wt):($n(fp,kt._currentValue2),kt._currentValue2=Wt)}function Cp(Mt){var kt=fp.current;Dn(fp),hr?Mt._currentValue=kt:Mt._currentValue2=kt}function jp(Mt,kt,Wt){for(;Mt!==null;){var qt=Mt.alternate;if((Mt.childLanes&kt)!==kt?(Mt.childLanes|=kt,qt!==null&&(qt.childLanes|=kt)):qt!==null&&(qt.childLanes&kt)!==kt&&(qt.childLanes|=kt),Mt===Wt)break;Mt=Mt.return}}function Qr(Mt,kt){mp=Mt,Pl=Xo=null,Mt=Mt.dependencies,Mt!==null&&Mt.firstContext!==null&&(Mt.lanes&kt&&(Hl=!0),Mt.firstContext=null)}function ps(Mt){var kt=hr?Mt._currentValue:Mt._currentValue2;if(Pl!==Mt)if(Mt={context:Mt,memoizedValue:kt,next:null},Xo===null){if(mp===null)throw Error(ut(308));Xo=Mt,mp.dependencies={lanes:0,firstContext:Mt}}else Xo=Xo.next=Mt;return kt}var su=null,Ls=!1;function Fp(Mt){Mt.updateQueue={baseState:Mt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(Mt,kt){Mt=Mt.updateQueue,kt.updateQueue===Mt&&(kt.updateQueue={baseState:Mt.baseState,firstBaseUpdate:Mt.firstBaseUpdate,lastBaseUpdate:Mt.lastBaseUpdate,shared:Mt.shared,effects:Mt.effects})}function Ho(Mt,kt){return{eventTime:Mt,lane:kt,tag:0,payload:null,callback:null,next:null}}function ou(Mt,kt){var Wt=Mt.updateQueue;Wt!==null&&(Wt=Wt.shared,$l!==null&&Mt.mode&1&&!(Ro&2)?(Mt=Wt.interleaved,Mt===null?(kt.next=kt,su===null?su=[Wt]:su.push(Wt)):(kt.next=Mt.next,Mt.next=kt),Wt.interleaved=kt):(Mt=Wt.pending,Mt===null?kt.next=kt:(kt.next=Mt.next,Mt.next=kt),Wt.pending=kt))}function Mp(Mt,kt,Wt){if(kt=kt.updateQueue,kt!==null&&(kt=kt.shared,(Wt&4194240)!==0)){var qt=kt.lanes;qt&=Mt.pendingLanes,Wt|=qt,kt.lanes=Wt,Rp(Mt,Wt)}}function Xp(Mt,kt){var Wt=Mt.updateQueue,qt=Mt.alternate;if(qt!==null&&(qt=qt.updateQueue,Wt===qt)){var Zt=null,ir=null;if(Wt=Wt.firstBaseUpdate,Wt!==null){do{var Br={eventTime:Wt.eventTime,lane:Wt.lane,tag:Wt.tag,payload:Wt.payload,callback:Wt.callback,next:null};ir===null?Zt=ir=Br:ir=ir.next=Br,Wt=Wt.next}while(Wt!==null);ir===null?Zt=ir=kt:ir=ir.next=kt}else Zt=ir=kt;Wt={baseState:qt.baseState,firstBaseUpdate:Zt,lastBaseUpdate:ir,shared:qt.shared,effects:qt.effects},Mt.updateQueue=Wt;return}Mt=Wt.lastBaseUpdate,Mt===null?Wt.firstBaseUpdate=kt:Mt.next=kt,Wt.lastBaseUpdate=kt}function Bp(Mt,kt,Wt,qt){var Zt=Mt.updateQueue;Ls=!1;var ir=Zt.firstBaseUpdate,Br=Zt.lastBaseUpdate,un=Zt.shared.pending;if(un!==null){Zt.shared.pending=null;var Fn=un,ls=Fn.next;Fn.next=null,Br===null?ir=ls:Br.next=ls,Br=Fn;var Is=Mt.alternate;Is!==null&&(Is=Is.updateQueue,un=Is.lastBaseUpdate,un!==Br&&(un===null?Is.firstBaseUpdate=ls:un.next=ls,Is.lastBaseUpdate=Fn))}if(ir!==null){var go=Zt.baseState;Br=0,Is=ls=Fn=null,un=ir;do{var eo=un.lane,Jo=un.eventTime;if((qt&eo)===eo){Is!==null&&(Is=Is.next={eventTime:Jo,lane:0,tag:un.tag,payload:un.payload,callback:un.callback,next:null});e:{var qs=Mt,_u=un;switch(eo=kt,Jo=Wt,_u.tag){case 1:if(qs=_u.payload,typeof qs=="function"){go=qs.call(Jo,go,eo);break e}go=qs;break e;case 3:qs.flags=qs.flags&-65537|128;case 0:if(qs=_u.payload,eo=typeof qs=="function"?qs.call(Jo,go,eo):qs,eo==null)break e;go=ct({},go,eo);break e;case 2:Ls=!0}}un.callback!==null&&un.lane!==0&&(Mt.flags|=64,eo=Zt.effects,eo===null?Zt.effects=[un]:eo.push(un))}else Jo={eventTime:Jo,lane:eo,tag:un.tag,payload:un.payload,callback:un.callback,next:null},Is===null?(ls=Is=Jo,Fn=go):Is=Is.next=Jo,Br|=eo;if(un=un.next,un===null){if(un=Zt.shared.pending,un===null)break;eo=un,un=eo.next,eo.next=null,Zt.lastBaseUpdate=eo,Zt.shared.pending=null}}while(!0);if(Is===null&&(Fn=go),Zt.baseState=Fn,Zt.firstBaseUpdate=ls,Zt.lastBaseUpdate=Is,kt=Zt.shared.interleaved,kt!==null){Zt=kt;do Br|=Zt.lane,Zt=Zt.next;while(Zt!==kt)}else ir===null&&(Zt.shared.lanes=0);Pm|=Br,Mt.lanes=Br,Mt.memoizedState=go}}function om(Mt,kt,Wt){if(Mt=kt.effects,kt.effects=null,Mt!==null)for(kt=0;kt<Mt.length;kt++){var qt=Mt[kt],Zt=qt.callback;if(Zt!==null){if(qt.callback=null,qt=Wt,typeof Zt!="function")throw Error(ut(191,Zt));Zt.call(qt)}}}var lm=new st.Component().refs;function Zp(Mt,kt,Wt,qt){kt=Mt.memoizedState,Wt=Wt(qt,kt),Wt=Wt==null?kt:ct({},kt,Wt),Mt.memoizedState=Wt,Mt.lanes===0&&(Mt.updateQueue.baseState=Wt)}var Up={isMounted:function(Mt){return(Mt=Mt._reactInternals)?Ft(Mt)===Mt:!1},enqueueSetState:function(Mt,kt,Wt){Mt=Mt._reactInternals;var qt=ku(),Zt=em(Mt),ir=Ho(qt,Zt);ir.payload=kt,Wt!=null&&(ir.callback=Wt),ou(Mt,ir),kt=lp(Mt,Zt,qt),kt!==null&&Mp(kt,Mt,Zt)},enqueueReplaceState:function(Mt,kt,Wt){Mt=Mt._reactInternals;var qt=ku(),Zt=em(Mt),ir=Ho(qt,Zt);ir.tag=1,ir.payload=kt,Wt!=null&&(ir.callback=Wt),ou(Mt,ir),kt=lp(Mt,Zt,qt),kt!==null&&Mp(kt,Mt,Zt)},enqueueForceUpdate:function(Mt,kt){Mt=Mt._reactInternals;var Wt=ku(),qt=em(Mt),Zt=Ho(Wt,qt);Zt.tag=2,kt!=null&&(Zt.callback=kt),ou(Mt,Zt),kt=lp(Mt,qt,Wt),kt!==null&&Mp(kt,Mt,qt)}};function um(Mt,kt,Wt,qt,Zt,ir,Br){return Mt=Mt.stateNode,typeof Mt.shouldComponentUpdate=="function"?Mt.shouldComponentUpdate(qt,ir,Br):kt.prototype&&kt.prototype.isPureReactComponent?!lo(Wt,qt)||!lo(Zt,ir):!0}function dm(Mt,kt,Wt){var qt=!1,Zt=Os,ir=kt.contextType;return typeof ir=="object"&&ir!==null?ir=ps(ir):(Zt=As(kt)?Ps:cs.current,qt=kt.contextTypes,ir=(qt=qt!=null)?oo(Mt,Zt):Os),kt=new kt(Wt,ir),Mt.memoizedState=kt.state!==null&&kt.state!==void 0?kt.state:null,kt.updater=Up,Mt.stateNode=kt,kt._reactInternals=Mt,qt&&(Mt=Mt.stateNode,Mt.__reactInternalMemoizedUnmaskedChildContext=Zt,Mt.__reactInternalMemoizedMaskedChildContext=ir),kt}function hm(Mt,kt,Wt,qt){Mt=kt.state,typeof kt.componentWillReceiveProps=="function"&&kt.componentWillReceiveProps(Wt,qt),typeof kt.UNSAFE_componentWillReceiveProps=="function"&&kt.UNSAFE_componentWillReceiveProps(Wt,qt),kt.state!==Mt&&Up.enqueueReplaceState(kt,kt.state,null)}function gp(Mt,kt,Wt,qt){var Zt=Mt.stateNode;Zt.props=Wt,Zt.state=Mt.memoizedState,Zt.refs=lm,Fp(Mt);var ir=kt.contextType;typeof ir=="object"&&ir!==null?Zt.context=ps(ir):(ir=As(kt)?Ps:cs.current,Zt.context=oo(Mt,ir)),Zt.state=Mt.memoizedState,ir=kt.getDerivedStateFromProps,typeof ir=="function"&&(Zp(Mt,kt,ir,Wt),Zt.state=Mt.memoizedState),typeof kt.getDerivedStateFromProps=="function"||typeof Zt.getSnapshotBeforeUpdate=="function"||typeof Zt.UNSAFE_componentWillMount!="function"&&typeof Zt.componentWillMount!="function"||(kt=Zt.state,typeof Zt.componentWillMount=="function"&&Zt.componentWillMount(),typeof Zt.UNSAFE_componentWillMount=="function"&&Zt.UNSAFE_componentWillMount(),kt!==Zt.state&&Up.enqueueReplaceState(Zt,Zt.state,null),Bp(Mt,Wt,Zt,qt),Zt.state=Mt.memoizedState),typeof Zt.componentDidMount=="function"&&(Mt.flags|=4194308)}var Du=[],Ou=0,vp=null,yp=0,Vl=[],Nl=0,Nu=null,zl=1,lu="";function $u(Mt,kt){Du[Ou++]=yp,Du[Ou++]=vp,vp=Mt,yp=kt}function _p(Mt,kt,Wt){Vl[Nl++]=zl,Vl[Nl++]=lu,Vl[Nl++]=Nu,Nu=Mt;var qt=zl;Mt=lu;var Zt=32-ko(qt)-1;qt&=~(1<<Zt),Wt+=1;var ir=32-ko(kt)+Zt;if(30<ir){var Br=Zt-Zt%5;ir=(qt&(1<<Br)-1).toString(32),qt>>=Br,Zt-=Br,zl=1<<32-ko(kt)+Zt|Wt<<Zt|qt,lu=ir+Mt}else zl=1<<ir|Wt<<Zt|qt,lu=Mt}function _h(Mt){Mt.return!==null&&($u(Mt,1),_p(Mt,1,0))}function ep(Mt){for(;Mt===vp;)vp=Du[--Ou],Du[Ou]=null,yp=Du[--Ou],Du[Ou]=null;for(;Mt===Nu;)Nu=Vl[--Nl],Vl[Nl]=null,lu=Vl[--Nl],Vl[Nl]=null,zl=Vl[--Nl],Vl[Nl]=null}var na=null,yl=null,Pr=!1,cr=!1,sr=null;function ur(Mt,kt){var Wt=up(5,null,null,0);Wt.elementType="DELETED",Wt.stateNode=kt,Wt.return=Mt,kt=Mt.deletions,kt===null?(Mt.deletions=[Wt],Mt.flags|=16):kt.push(Wt)}function yr(Mt,kt){switch(Mt.tag){case 5:return kt=Hn(kt,Mt.type,Mt.pendingProps),kt!==null?(Mt.stateNode=kt,na=Mt,yl=Po(kt),!0):!1;case 6:return kt=Bn(kt,Mt.pendingProps),kt!==null?(Mt.stateNode=kt,na=Mt,yl=null,!0):!1;case 13:if(kt=es(kt),kt!==null){var Wt=Nu!==null?{id:zl,overflow:lu}:null;return Mt.memoizedState={dehydrated:kt,treeContext:Wt,retryLane:1073741824},Wt=up(18,null,null,0),Wt.stateNode=kt,Wt.return=Mt,Mt.child=Wt,na=Mt,yl=null,!0}return!1;default:return!1}}function Jr(Mt){return(Mt.mode&1)!==0&&(Mt.flags&128)===0}function nn(Mt){if(Pr){var kt=yl;if(kt){var Wt=kt;if(!yr(Mt,kt)){if(Jr(Mt))throw Error(ut(418));kt=ro(Wt);var qt=na;kt&&yr(Mt,kt)?ur(qt,Wt):(Mt.flags=Mt.flags&-4097|2,Pr=!1,na=Mt)}}else{if(Jr(Mt))throw Error(ut(418));Mt.flags=Mt.flags&-4097|2,Pr=!1,na=Mt}}}function Nn(Mt){for(Mt=Mt.return;Mt!==null&&Mt.tag!==5&&Mt.tag!==3&&Mt.tag!==13;)Mt=Mt.return;na=Mt}function jn(Mt){if(!Ir||Mt!==na)return!1;if(!Pr)return Nn(Mt),Pr=!0,!1;if(Mt.tag!==3&&(Mt.tag!==5||ds(Mt.type)&&!dr(Mt.type,Mt.memoizedProps))){var kt=yl;if(kt){if(Jr(Mt)){for(Mt=yl;Mt;)Mt=ro(Mt);throw Error(ut(418))}for(;kt;)ur(Mt,kt),kt=ro(kt)}}if(Nn(Mt),Mt.tag===13){if(!Ir)throw Error(ut(316));if(Mt=Mt.memoizedState,Mt=Mt!==null?Mt.dehydrated:null,!Mt)throw Error(ut(317));yl=Ar(Mt)}else yl=na?ro(Mt.stateNode):null;return!0}function ts(){Ir&&(yl=na=null,cr=Pr=!1)}function ns(Mt){sr===null?sr=[Mt]:sr.push(Mt)}function ss(Mt,kt,Wt){if(Mt=Wt.ref,Mt!==null&&typeof Mt!="function"&&typeof Mt!="object"){if(Wt._owner){if(Wt=Wt._owner,Wt){if(Wt.tag!==1)throw Error(ut(309));var qt=Wt.stateNode}if(!qt)throw Error(ut(147,Mt));var Zt=qt,ir=""+Mt;return kt!==null&&kt.ref!==null&&typeof kt.ref=="function"&&kt.ref._stringRef===ir?kt.ref:(kt=function(Br){var un=Zt.refs;un===lm&&(un=Zt.refs={}),Br===null?delete un[ir]:un[ir]=Br},kt._stringRef=ir,kt)}if(typeof Mt!="string")throw Error(ut(284));if(!Wt._owner)throw Error(ut(290,Mt))}return Mt}function Kr(Mt,kt){throw Mt=Object.prototype.toString.call(kt),Error(ut(31,Mt==="[object Object]"?"object with keys {"+Object.keys(kt).join(", ")+"}":Mt))}function dn(Mt){var kt=Mt._init;return kt(Mt._payload)}function gs(Mt){function kt(An,vn){if(Mt){var On=An.deletions;On===null?(An.deletions=[vn],An.flags|=16):On.push(vn)}}function Wt(An,vn){if(!Mt)return null;for(;vn!==null;)kt(An,vn),vn=vn.sibling;return null}function qt(An,vn){for(An=new Map;vn!==null;)vn.key!==null?An.set(vn.key,vn):An.set(vn.index,vn),vn=vn.sibling;return An}function Zt(An,vn){return An=rm(An,vn),An.index=0,An.sibling=null,An}function ir(An,vn,On){return An.index=On,Mt?(On=An.alternate,On!==null?(On=On.index,On<vn?(An.flags|=2,vn):On):(An.flags|=2,vn)):(An.flags|=1048576,vn)}function Br(An){return Mt&&An.alternate===null&&(An.flags|=2),An}function un(An,vn,On,Cs){return vn===null||vn.tag!==6?(vn=pv(On,An.mode,Cs),vn.return=An,vn):(vn=Zt(vn,On),vn.return=An,vn)}function Fn(An,vn,On,Cs){var Ws=On.type;return Ws===ft?Is(An,vn,On.props.children,Cs,On.key):vn!==null&&(vn.elementType===Ws||typeof Ws=="object"&&Ws!==null&&Ws.$$typeof===Rt&&dn(Ws)===vn.type)?(Cs=Zt(vn,On.props),Cs.ref=ss(An,vn,On),Cs.return=An,Cs):(Cs=Qm(On.type,On.key,On.props,null,An.mode,Cs),Cs.ref=ss(An,vn,On),Cs.return=An,Cs)}function ls(An,vn,On,Cs){return vn===null||vn.tag!==4||vn.stateNode.containerInfo!==On.containerInfo||vn.stateNode.implementation!==On.implementation?(vn=fv(On,An.mode,Cs),vn.return=An,vn):(vn=Zt(vn,On.children||[]),vn.return=An,vn)}function Is(An,vn,On,Cs,Ws){return vn===null||vn.tag!==7?(vn=_m(On,An.mode,Cs,Ws),vn.return=An,vn):(vn=Zt(vn,On),vn.return=An,vn)}function go(An,vn,On){if(typeof vn=="string"&&vn!==""||typeof vn=="number")return vn=pv(""+vn,An.mode,On),vn.return=An,vn;if(typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case ht:return On=Qm(vn.type,vn.key,vn.props,null,An.mode,On),On.ref=ss(An,null,vn),On.return=An,On;case pt:return vn=fv(vn,An.mode,On),vn.return=An,vn;case Rt:var Cs=vn._init;return go(An,Cs(vn._payload),On)}if(Vt(vn)||At(vn))return vn=_m(vn,An.mode,On,null),vn.return=An,vn;Kr(An,vn)}return null}function eo(An,vn,On,Cs){var Ws=vn!==null?vn.key:null;if(typeof On=="string"&&On!==""||typeof On=="number")return Ws!==null?null:un(An,vn,""+On,Cs);if(typeof On=="object"&&On!==null){switch(On.$$typeof){case ht:return On.key===Ws?Fn(An,vn,On,Cs):null;case pt:return On.key===Ws?ls(An,vn,On,Cs):null;case Rt:return Ws=On._init,eo(An,vn,Ws(On._payload),Cs)}if(Vt(On)||At(On))return Ws!==null?null:Is(An,vn,On,Cs,null);Kr(An,On)}return null}function Jo(An,vn,On,Cs,Ws){if(typeof Cs=="string"&&Cs!==""||typeof Cs=="number")return An=An.get(On)||null,un(vn,An,""+Cs,Ws);if(typeof Cs=="object"&&Cs!==null){switch(Cs.$$typeof){case ht:return An=An.get(Cs.key===null?On:Cs.key)||null,Fn(vn,An,Cs,Ws);case pt:return An=An.get(Cs.key===null?On:Cs.key)||null,ls(vn,An,Cs,Ws);case Rt:var Eo=Cs._init;return Jo(An,vn,On,Eo(Cs._payload),Ws)}if(Vt(Cs)||At(Cs))return An=An.get(On)||null,Is(vn,An,Cs,Ws,null);Kr(vn,Cs)}return null}function qs(An,vn,On,Cs){for(var Ws=null,Eo=null,vo=vn,Oo=vn=0,Zl=null;vo!==null&&Oo<On.length;Oo++){vo.index>Oo?(Zl=vo,vo=null):Zl=vo.sibling;var No=eo(An,vo,On[Oo],Cs);if(No===null){vo===null&&(vo=Zl);break}Mt&&vo&&No.alternate===null&&kt(An,vo),vn=ir(No,vn,Oo),Eo===null?Ws=No:Eo.sibling=No,Eo=No,vo=Zl}if(Oo===On.length)return Wt(An,vo),Pr&&$u(An,Oo),Ws;if(vo===null){for(;Oo<On.length;Oo++)vo=go(An,On[Oo],Cs),vo!==null&&(vn=ir(vo,vn,Oo),Eo===null?Ws=vo:Eo.sibling=vo,Eo=vo);return Pr&&$u(An,Oo),Ws}for(vo=qt(An,vo);Oo<On.length;Oo++)Zl=Jo(vo,An,Oo,On[Oo],Cs),Zl!==null&&(Mt&&Zl.alternate!==null&&vo.delete(Zl.key===null?Oo:Zl.key),vn=ir(Zl,vn,Oo),Eo===null?Ws=Zl:Eo.sibling=Zl,Eo=Zl);return Mt&&vo.forEach(function(nm){return kt(An,nm)}),Pr&&$u(An,Oo),Ws}function _u(An,vn,On,Cs){var Ws=At(On);if(typeof Ws!="function")throw Error(ut(150));if(On=Ws.call(On),On==null)throw Error(ut(151));for(var Eo=Ws=null,vo=vn,Oo=vn=0,Zl=null,No=On.next();vo!==null&&!No.done;Oo++,No=On.next()){vo.index>Oo?(Zl=vo,vo=null):Zl=vo.sibling;var nm=eo(An,vo,No.value,Cs);if(nm===null){vo===null&&(vo=Zl);break}Mt&&vo&&nm.alternate===null&&kt(An,vo),vn=ir(nm,vn,Oo),Eo===null?Ws=nm:Eo.sibling=nm,Eo=nm,vo=Zl}if(No.done)return Wt(An,vo),Pr&&$u(An,Oo),Ws;if(vo===null){for(;!No.done;Oo++,No=On.next())No=go(An,No.value,Cs),No!==null&&(vn=ir(No,vn,Oo),Eo===null?Ws=No:Eo.sibling=No,Eo=No);return Pr&&$u(An,Oo),Ws}for(vo=qt(An,vo);!No.done;Oo++,No=On.next())No=Jo(vo,An,Oo,No.value,Cs),No!==null&&(Mt&&No.alternate!==null&&vo.delete(No.key===null?Oo:No.key),vn=ir(No,vn,Oo),Eo===null?Ws=No:Eo.sibling=No,Eo=No);return Mt&&vo.forEach(function(Gv){return kt(An,Gv)}),Pr&&$u(An,Oo),Ws}function dp(An,vn,On,Cs){if(typeof On=="object"&&On!==null&&On.type===ft&&On.key===null&&(On=On.props.children),typeof On=="object"&&On!==null){switch(On.$$typeof){case ht:e:{for(var Ws=On.key,Eo=vn;Eo!==null;){if(Eo.key===Ws){if(Ws=On.type,Ws===ft){if(Eo.tag===7){Wt(An,Eo.sibling),vn=Zt(Eo,On.props.children),vn.return=An,An=vn;break e}}else if(Eo.elementType===Ws||typeof Ws=="object"&&Ws!==null&&Ws.$$typeof===Rt&&dn(Ws)===Eo.type){Wt(An,Eo.sibling),vn=Zt(Eo,On.props),vn.ref=ss(An,Eo,On),vn.return=An,An=vn;break e}Wt(An,Eo);break}else kt(An,Eo);Eo=Eo.sibling}On.type===ft?(vn=_m(On.props.children,An.mode,Cs,On.key),vn.return=An,An=vn):(Cs=Qm(On.type,On.key,On.props,null,An.mode,Cs),Cs.ref=ss(An,vn,On),Cs.return=An,An=Cs)}return Br(An);case pt:e:{for(Eo=On.key;vn!==null;){if(vn.key===Eo)if(vn.tag===4&&vn.stateNode.containerInfo===On.containerInfo&&vn.stateNode.implementation===On.implementation){Wt(An,vn.sibling),vn=Zt(vn,On.children||[]),vn.return=An,An=vn;break e}else{Wt(An,vn);break}else kt(An,vn);vn=vn.sibling}vn=fv(On,An.mode,Cs),vn.return=An,An=vn}return Br(An);case Rt:return Eo=On._init,dp(An,vn,Eo(On._payload),Cs)}if(Vt(On))return qs(An,vn,On,Cs);if(At(On))return _u(An,vn,On,Cs);Kr(An,On)}return typeof On=="string"&&On!==""||typeof On=="number"?(On=""+On,vn!==null&&vn.tag===6?(Wt(An,vn.sibling),vn=Zt(vn,On),vn.return=An,An=vn):(Wt(An,vn),vn=pv(On,An.mode,Cs),vn.return=An,An=vn),Br(An)):Wt(An,vn)}return dp}var Ts=gs(!0),Sn=gs(!1),fs={},rs=Un(fs),js=Un(fs),Gs=Un(fs);function xs(Mt){if(Mt===fs)throw Error(ut(174));return Mt}function vs(Mt,kt){$n(Gs,kt),$n(js,Mt),$n(rs,fs),Mt=zt(kt),Dn(rs),$n(rs,Mt)}function Fs(){Dn(rs),Dn(js),Dn(Gs)}function Zs(Mt){var kt=xs(Gs.current),Wt=xs(rs.current);kt=Bt(Wt,Mt.type,kt),Wt!==kt&&($n(js,Mt),$n(rs,kt))}function no(Mt){js.current===Mt&&(Dn(rs),Dn(js))}var ms=Un(0);function Ds(Mt){for(var kt=Mt;kt!==null;){if(kt.tag===13){var Wt=kt.memoizedState;if(Wt!==null&&(Wt=Wt.dehydrated,Wt===null||$s(Wt)||Ss(Wt)))return kt}else if(kt.tag===19&&kt.memoizedProps.revealOrder!==void 0){if(kt.flags&128)return kt}else if(kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===Mt)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===Mt)return null;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}return null}var $o=[];function jo(){for(var Mt=0;Mt<$o.length;Mt++){var kt=$o[Mt];hr?kt._workInProgressVersionPrimary=null:kt._workInProgressVersionSecondary=null}$o.length=0}var Xs=dt.ReactCurrentDispatcher,So=dt.ReactCurrentBatchConfig,Co=0,io=null,po=null,Js=null,ga=!1,Qn=!1,so=0,Io=0;function fo(){throw Error(ut(321))}function _a(Mt,kt){if(kt===null)return!1;for(var Wt=0;Wt<kt.length&&Wt<Mt.length;Wt++)if(!Yo(Mt[Wt],kt[Wt]))return!1;return!0}function Bs(Mt,kt,Wt,qt,Zt,ir){if(Co=ir,io=kt,kt.memoizedState=null,kt.updateQueue=null,kt.lanes=0,Xs.current=Mt===null||Mt.memoizedState===null?zu:Qu,Mt=Wt(qt,Zt),Qn){ir=0;do{if(Qn=!1,so=0,25<=ir)throw Error(ut(301));ir+=1,Js=po=null,kt.updateQueue=null,Xs.current=Ju,Mt=Wt(qt,Zt)}while(Qn)}if(Xs.current=Tu,kt=po!==null&&po.next!==null,Co=0,Js=po=io=null,ga=!1,kt)throw Error(ut(300));return Mt}function wo(){var Mt=so!==0;return so=0,Mt}function Es(){var Mt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?io.memoizedState=Js=Mt:Js=Js.next=Mt,Js}function mo(){if(po===null){var Mt=io.alternate;Mt=Mt!==null?Mt.memoizedState:null}else Mt=po.next;var kt=Js===null?io.memoizedState:Js.next;if(kt!==null)Js=kt,po=Mt;else{if(Mt===null)throw Error(ut(310));po=Mt,Mt={memoizedState:po.memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},Js===null?io.memoizedState=Js=Mt:Js=Js.next=Mt}return Js}function Wo(Mt,kt){return typeof kt=="function"?kt(Mt):kt}function Jl(Mt){var kt=mo(),Wt=kt.queue;if(Wt===null)throw Error(ut(311));Wt.lastRenderedReducer=Mt;var qt=po,Zt=qt.baseQueue,ir=Wt.pending;if(ir!==null){if(Zt!==null){var Br=Zt.next;Zt.next=ir.next,ir.next=Br}qt.baseQueue=Zt=ir,Wt.pending=null}if(Zt!==null){ir=Zt.next,qt=qt.baseState;var un=Br=null,Fn=null,ls=ir;do{var Is=ls.lane;if((Co&Is)===Is)Fn!==null&&(Fn=Fn.next={lane:0,action:ls.action,hasEagerState:ls.hasEagerState,eagerState:ls.eagerState,next:null}),qt=ls.hasEagerState?ls.eagerState:Mt(qt,ls.action);else{var go={lane:Is,action:ls.action,hasEagerState:ls.hasEagerState,eagerState:ls.eagerState,next:null};Fn===null?(un=Fn=go,Br=qt):Fn=Fn.next=go,io.lanes|=Is,Pm|=Is}ls=ls.next}while(ls!==null&&ls!==ir);Fn===null?Br=qt:Fn.next=un,Yo(qt,kt.memoizedState)||(Hl=!0),kt.memoizedState=qt,kt.baseState=Br,kt.baseQueue=Fn,Wt.lastRenderedState=qt}if(Mt=Wt.interleaved,Mt!==null){Zt=Mt;do ir=Zt.lane,io.lanes|=ir,Pm|=ir,Zt=Zt.next;while(Zt!==Mt)}else Zt===null&&(Wt.lanes=0);return[kt.memoizedState,Wt.dispatch]}function Yu(Mt){var kt=mo(),Wt=kt.queue;if(Wt===null)throw Error(ut(311));Wt.lastRenderedReducer=Mt;var qt=Wt.dispatch,Zt=Wt.pending,ir=kt.memoizedState;if(Zt!==null){Wt.pending=null;var Br=Zt=Zt.next;do ir=Mt(ir,Br.action),Br=Br.next;while(Br!==Zt);Yo(ir,kt.memoizedState)||(Hl=!0),kt.memoizedState=ir,kt.baseQueue===null&&(kt.baseState=ir),Wt.lastRenderedState=ir}return[ir,qt]}function ju(){}function Eu(Mt,kt){var Wt=io,qt=mo(),Zt=kt(),ir=!Yo(qt.memoizedState,Zt);if(ir&&(qt.memoizedState=Zt,Hl=!0),qt=qt.queue,hu(xp.bind(null,Wt,qt,Mt),[Mt]),qt.getSnapshot!==kt||ir||Js!==null&&Js.memoizedState.tag&1){if(Wt.flags|=2048,uu(9,cu.bind(null,Wt,qt,Zt,kt),void 0,null),$l===null)throw Error(ut(349));Co&30||tp(Wt,kt,Zt)}return Zt}function tp(Mt,kt,Wt){Mt.flags|=16384,Mt={getSnapshot:kt,value:Wt},kt=io.updateQueue,kt===null?(kt={lastEffect:null,stores:null},io.updateQueue=kt,kt.stores=[Mt]):(Wt=kt.stores,Wt===null?kt.stores=[Mt]:Wt.push(Mt))}function cu(Mt,kt,Wt,qt){kt.value=Wt,kt.getSnapshot=qt,Zo(kt)&&lp(Mt,1,-1)}function xp(Mt,kt,Wt){return Wt(function(){Zo(kt)&&lp(Mt,1,-1)})}function Zo(Mt){var kt=Mt.getSnapshot;Mt=Mt.value;try{var Wt=kt();return!Yo(Mt,Wt)}catch{return!0}}function wu(Mt){var kt=Es();return typeof Mt=="function"&&(Mt=Mt()),kt.memoizedState=kt.baseState=Mt,Mt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:Mt},kt.queue=Mt,Mt=Mt.dispatch=np.bind(null,io,Mt),[kt.memoizedState,Mt]}function uu(Mt,kt,Wt,qt){return Mt={tag:Mt,create:kt,destroy:Wt,deps:qt,next:null},kt=io.updateQueue,kt===null?(kt={lastEffect:null,stores:null},io.updateQueue=kt,kt.lastEffect=Mt.next=Mt):(Wt=kt.lastEffect,Wt===null?kt.lastEffect=Mt.next=Mt:(qt=Wt.next,Wt.next=Mt,Mt.next=qt,kt.lastEffect=Mt)),Mt}function _l(){return mo().memoizedState}function du(Mt,kt,Wt,qt){var Zt=Es();io.flags|=Mt,Zt.memoizedState=uu(1|kt,Wt,void 0,qt===void 0?null:qt)}function Fu(Mt,kt,Wt,qt){var Zt=mo();qt=qt===void 0?null:qt;var ir=void 0;if(po!==null){var Br=po.memoizedState;if(ir=Br.destroy,qt!==null&&_a(qt,Br.deps)){Zt.memoizedState=uu(kt,Wt,ir,qt);return}}io.flags|=Mt,Zt.memoizedState=uu(1|kt,Wt,ir,qt)}function Bu(Mt,kt){return du(8390656,8,Mt,kt)}function hu(Mt,kt){return Fu(2048,8,Mt,kt)}function _c(Mt,kt){return Fu(4,2,Mt,kt)}function pu(Mt,kt){return Fu(4,4,Mt,kt)}function Uu(Mt,kt){if(typeof kt=="function")return Mt=Mt(),kt(Mt),function(){kt(null)};if(kt!=null)return Mt=Mt(),kt.current=Mt,function(){kt.current=null}}function eu(Mt,kt,Wt){return Wt=Wt!=null?Wt.concat([Mt]):null,Fu(4,4,Uu.bind(null,kt,Mt),Wt)}function fu(){}function Lo(Mt,kt){var Wt=mo();kt=kt===void 0?null:kt;var qt=Wt.memoizedState;return qt!==null&&kt!==null&&_a(kt,qt[1])?qt[0]:(Wt.memoizedState=[Mt,kt],Mt)}function Ru(Mt,kt){var Wt=mo();kt=kt===void 0?null:kt;var qt=Wt.memoizedState;return qt!==null&&kt!==null&&_a(kt,qt[1])?qt[0]:(Mt=Mt(),Wt.memoizedState=[Mt,kt],Mt)}function Sp(Mt,kt){var Wt=xo;xo=Wt!==0&&4>Wt?Wt:4,Mt(!0);var qt=So.transition;So.transition={};try{Mt(!1),kt()}finally{xo=Wt,So.transition=qt}}function mu(){return mo().memoizedState}function rp(Mt,kt,Wt){var qt=em(Mt);Wt={lane:qt,action:Wt,hasEagerState:!1,eagerState:null,next:null},Do(Mt)?Vu(kt,Wt):(gu(Mt,kt,Wt),Wt=ku(),Mt=lp(Mt,qt,Wt),Mt!==null&&vu(Mt,kt,qt))}function np(Mt,kt,Wt){var qt=em(Mt),Zt={lane:qt,action:Wt,hasEagerState:!1,eagerState:null,next:null};if(Do(Mt))Vu(kt,Zt);else{gu(Mt,kt,Zt);var ir=Mt.alternate;if(Mt.lanes===0&&(ir===null||ir.lanes===0)&&(ir=kt.lastRenderedReducer,ir!==null))try{var Br=kt.lastRenderedState,un=ir(Br,Wt);if(Zt.hasEagerState=!0,Zt.eagerState=un,Yo(un,Br))return}catch{}finally{}Wt=ku(),Mt=lp(Mt,qt,Wt),Mt!==null&&vu(Mt,kt,qt)}}function Do(Mt){var kt=Mt.alternate;return Mt===io||kt!==null&&kt===io}function Vu(Mt,kt){Qn=ga=!0;var Wt=Mt.pending;Wt===null?kt.next=kt:(kt.next=Wt.next,Wt.next=kt),Mt.pending=kt}function gu(Mt,kt,Wt){$l!==null&&Mt.mode&1&&!(Ro&2)?(Mt=kt.interleaved,Mt===null?(Wt.next=Wt,su===null?su=[kt]:su.push(kt)):(Wt.next=Mt.next,Mt.next=Wt),kt.interleaved=Wt):(Mt=kt.pending,Mt===null?Wt.next=Wt:(Wt.next=Mt.next,Mt.next=Wt),kt.pending=Wt)}function vu(Mt,kt,Wt){if(Wt&4194240){var qt=kt.lanes;qt&=Mt.pendingLanes,Wt|=qt,kt.lanes=Wt,Rp(Mt,Wt)}}var Tu={readContext:ps,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},zu={readContext:ps,useCallback:function(Mt,kt){return Es().memoizedState=[Mt,kt===void 0?null:kt],Mt},useContext:ps,useEffect:Bu,useImperativeHandle:function(Mt,kt,Wt){return Wt=Wt!=null?Wt.concat([Mt]):null,du(4194308,4,Uu.bind(null,kt,Mt),Wt)},useLayoutEffect:function(Mt,kt){return du(4194308,4,Mt,kt)},useInsertionEffect:function(Mt,kt){return du(4,2,Mt,kt)},useMemo:function(Mt,kt){var Wt=Es();return kt=kt===void 0?null:kt,Mt=Mt(),Wt.memoizedState=[Mt,kt],Mt},useReducer:function(Mt,kt,Wt){var qt=Es();return kt=Wt!==void 0?Wt(kt):kt,qt.memoizedState=qt.baseState=kt,Mt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mt,lastRenderedState:kt},qt.queue=Mt,Mt=Mt.dispatch=rp.bind(null,io,Mt),[qt.memoizedState,Mt]},useRef:function(Mt){var kt=Es();return Mt={current:Mt},kt.memoizedState=Mt},useState:wu,useDebugValue:fu,useDeferredValue:function(Mt){var kt=wu(Mt),Wt=kt[0],qt=kt[1];return Bu(function(){var Zt=So.transition;So.transition={};try{qt(Mt)}finally{So.transition=Zt}},[Mt]),Wt},useTransition:function(){var Mt=wu(!1),kt=Mt[0];return Mt=Sp.bind(null,Mt[1]),Es().memoizedState=Mt,[kt,Mt]},useMutableSource:function(){},useSyncExternalStore:function(Mt,kt,Wt){var qt=io,Zt=Es();if(Pr){if(Wt===void 0)throw Error(ut(407));Wt=Wt()}else{if(Wt=kt(),$l===null)throw Error(ut(349));Co&30||tp(qt,kt,Wt)}Zt.memoizedState=Wt;var ir={value:Wt,getSnapshot:kt};return Zt.queue=ir,Bu(xp.bind(null,qt,ir,Mt),[Mt]),qt.flags|=2048,uu(9,cu.bind(null,qt,ir,Wt,kt),void 0,null),Wt},useId:function(){var Mt=Es(),kt=$l.identifierPrefix;if(Pr){var Wt=lu,qt=zl;Wt=(qt&~(1<<32-ko(qt)-1)).toString(32)+Wt,kt=":"+kt+"R"+Wt,Wt=so++,0<Wt&&(kt+="H"+Wt.toString(32)),kt+=":"}else Wt=Io++,kt=":"+kt+"r"+Wt.toString(32)+":";return Mt.memoizedState=kt},unstable_isNewReconciler:!1},Qu={readContext:ps,useCallback:Lo,useContext:ps,useEffect:hu,useImperativeHandle:eu,useInsertionEffect:_c,useLayoutEffect:pu,useMemo:Ru,useReducer:Jl,useRef:_l,useState:function(){return Jl(Wo)},useDebugValue:fu,useDeferredValue:function(Mt){var kt=Jl(Wo),Wt=kt[0],qt=kt[1];return hu(function(){var Zt=So.transition;So.transition={};try{qt(Mt)}finally{So.transition=Zt}},[Mt]),Wt},useTransition:function(){var Mt=Jl(Wo)[0],kt=mo().memoizedState;return[Mt,kt]},useMutableSource:ju,useSyncExternalStore:Eu,useId:mu,unstable_isNewReconciler:!1},Ju={readContext:ps,useCallback:Lo,useContext:ps,useEffect:hu,useImperativeHandle:eu,useInsertionEffect:_c,useLayoutEffect:pu,useMemo:Ru,useReducer:Yu,useRef:_l,useState:function(){return Yu(Wo)},useDebugValue:fu,useDeferredValue:function(Mt){var kt=Yu(Wo),Wt=kt[0],qt=kt[1];return hu(function(){var Zt=So.transition;So.transition={};try{qt(Mt)}finally{So.transition=Zt}},[Mt]),Wt},useTransition:function(){var Mt=Yu(Wo)[0],kt=mo().memoizedState;return[Mt,kt]},useMutableSource:ju,useSyncExternalStore:Eu,useId:mu,unstable_isNewReconciler:!1};function os(Mt,kt){try{var Wt="",qt=kt;do Wt+=$p(qt),qt=qt.return;while(qt);var Zt=Wt}catch(ir){Zt=`
Error generating stack: `+ir.message+`
`+ir.stack}return{value:Mt,source:kt,stack:Zt}}function Fo(Mt,kt){try{console.error(kt.value)}catch(Wt){setTimeout(function(){throw Wt})}}var Ep=typeof WeakMap=="function"?WeakMap:Map;function Pp(Mt,kt,Wt){Wt=Ho(-1,Wt),Wt.tag=3,Wt.payload={element:null};var qt=kt.value;return Wt.callback=function(){Wm||(Wm=!0,sv=qt),Fo(Mt,kt)},Wt}function ip(Mt,kt,Wt){Wt=Ho(-1,Wt),Wt.tag=3;var qt=Mt.type.getDerivedStateFromError;if(typeof qt=="function"){var Zt=kt.value;Wt.payload=function(){return qt(Zt)},Wt.callback=function(){Fo(Mt,kt)}}var ir=Mt.stateNode;return ir!==null&&typeof ir.componentDidCatch=="function"&&(Wt.callback=function(){Fo(Mt,kt),typeof qt!="function"&&(Jp===null?Jp=new Set([this]):Jp.add(this));var Br=kt.stack;this.componentDidCatch(kt.value,{componentStack:Br!==null?Br:""})}),Wt}function sp(Mt,kt,Wt){var qt=Mt.pingCache;if(qt===null){qt=Mt.pingCache=new Ep;var Zt=new Set;qt.set(kt,Zt)}else Zt=qt.get(kt),Zt===void 0&&(Zt=new Set,qt.set(kt,Zt));Zt.has(Wt)||(Zt.add(Wt),Mt=jv.bind(null,Mt,kt,Wt),kt.then(Mt,Mt))}function Ap(Mt){do{var kt;if((kt=Mt.tag===13)&&(kt=Mt.memoizedState,kt=kt!==null?kt.dehydrated!==null:!0),kt)return Mt;Mt=Mt.return}while(Mt!==null);return null}function Vp(Mt,kt,Wt,qt,Zt){return Mt.mode&1?(Mt.flags|=65536,Mt.lanes=Zt,Mt):(Mt===kt?Mt.flags|=65536:(Mt.flags|=128,Wt.flags|=131072,Wt.flags&=-52805,Wt.tag===1&&(Wt.alternate===null?Wt.tag=17:(kt=Ho(-1,1),kt.tag=2,ou(Wt,kt))),Wt.lanes|=1),Mt)}function Kl(Mt){Mt.flags|=4}function op(Mt,kt){if(Mt!==null&&Mt.child===kt.child)return!0;if(kt.flags&16)return!1;for(Mt=kt.child;Mt!==null;){if(Mt.flags&12854||Mt.subtreeFlags&12854)return!1;Mt=Mt.sibling}return!0}var Gn,tu,zp,Cu;if(gr)Gn=function(Mt,kt){for(var Wt=kt.child;Wt!==null;){if(Wt.tag===5||Wt.tag===6)Xt(Mt,Wt.stateNode);else if(Wt.tag!==4&&Wt.child!==null){Wt.child.return=Wt,Wt=Wt.child;continue}if(Wt===kt)break;for(;Wt.sibling===null;){if(Wt.return===null||Wt.return===kt)return;Wt=Wt.return}Wt.sibling.return=Wt.return,Wt=Wt.sibling}},tu=function(){},zp=function(Mt,kt,Wt,qt,Zt){if(Mt=Mt.memoizedProps,Mt!==qt){var ir=kt.stateNode,Br=xs(rs.current);Wt=tr(ir,Wt,Mt,qt,Zt,Br),(kt.updateQueue=Wt)&&Kl(kt)}},Cu=function(Mt,kt,Wt,qt){Wt!==qt&&Kl(kt)};else if(lr){Gn=function(Mt,kt,Wt,qt){for(var Zt=kt.child;Zt!==null;){if(Zt.tag===5){var ir=Zt.stateNode;Wt&&qt&&(ir=Vn(ir,Zt.type,Zt.memoizedProps,Zt)),Xt(Mt,ir)}else if(Zt.tag===6)ir=Zt.stateNode,Wt&&qt&&(ir=Yn(ir,Zt.memoizedProps,Zt)),Xt(Mt,ir);else if(Zt.tag!==4){if(Zt.tag===22&&Zt.memoizedState!==null)ir=Zt.child,ir!==null&&(ir.return=Zt),Gn(Mt,Zt,!0,!0);else if(Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}}if(Zt===kt)break;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===kt)return;Zt=Zt.return}Zt.sibling.return=Zt.return,Zt=Zt.sibling}};var Hp=function(Mt,kt,Wt,qt){for(var Zt=kt.child;Zt!==null;){if(Zt.tag===5){var ir=Zt.stateNode;Wt&&qt&&(ir=Vn(ir,Zt.type,Zt.memoizedProps,Zt)),jr(Mt,ir)}else if(Zt.tag===6)ir=Zt.stateNode,Wt&&qt&&(ir=Yn(ir,Zt.memoizedProps,Zt)),jr(Mt,ir);else if(Zt.tag!==4){if(Zt.tag===22&&Zt.memoizedState!==null)ir=Zt.child,ir!==null&&(ir.return=Zt),Hp(Mt,Zt,!0,!0);else if(Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}}if(Zt===kt)break;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===kt)return;Zt=Zt.return}Zt.sibling.return=Zt.return,Zt=Zt.sibling}};tu=function(Mt,kt){var Wt=kt.stateNode;if(!op(Mt,kt)){Mt=Wt.containerInfo;var qt=xr(Mt);Hp(qt,kt,!1,!1),Wt.pendingChildren=qt,Kl(kt),en(Mt,qt)}},zp=function(Mt,kt,Wt,qt,Zt){var ir=Mt.stateNode,Br=Mt.memoizedProps;if((Mt=op(Mt,kt))&&Br===qt)kt.stateNode=ir;else{var un=kt.stateNode,Fn=xs(rs.current),ls=null;Br!==qt&&(ls=tr(un,Wt,Br,qt,Zt,Fn)),Mt&&ls===null?kt.stateNode=ir:(ir=Tr(ir,ls,Wt,Br,qt,kt,Mt,un),or(ir,Wt,qt,Zt,Fn)&&Kl(kt),kt.stateNode=ir,Mt?Kl(kt):Gn(ir,kt,!1,!1))}},Cu=function(Mt,kt,Wt,qt){Wt!==qt?(Mt=xs(Gs.current),Wt=xs(rs.current),kt.stateNode=fr(qt,Mt,Wt,kt),Kl(kt)):kt.stateNode=Mt.stateNode}}else tu=function(){},zp=function(){},Cu=function(){};function kp(Mt,kt){if(!Pr)switch(Mt.tailMode){case"hidden":kt=Mt.tail;for(var Wt=null;kt!==null;)kt.alternate!==null&&(Wt=kt),kt=kt.sibling;Wt===null?Mt.tail=null:Wt.sibling=null;break;case"collapsed":Wt=Mt.tail;for(var qt=null;Wt!==null;)Wt.alternate!==null&&(qt=Wt),Wt=Wt.sibling;qt===null?kt||Mt.tail===null?Mt.tail=null:Mt.tail.sibling=null:qt.sibling=null}}function Al(Mt){var kt=Mt.alternate!==null&&Mt.alternate.child===Mt.child,Wt=0,qt=0;if(kt)for(var Zt=Mt.child;Zt!==null;)Wt|=Zt.lanes|Zt.childLanes,qt|=Zt.subtreeFlags&14680064,qt|=Zt.flags&14680064,Zt.return=Mt,Zt=Zt.sibling;else for(Zt=Mt.child;Zt!==null;)Wt|=Zt.lanes|Zt.childLanes,qt|=Zt.subtreeFlags,qt|=Zt.flags,Zt.return=Mt,Zt=Zt.sibling;return Mt.subtreeFlags|=qt,Mt.childLanes=Wt,kt}function Ip(Mt,kt,Wt){var qt=kt.pendingProps;switch(ep(kt),kt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Al(kt),null;case 1:return As(kt.type)&&Ns(),Al(kt),null;case 3:return qt=kt.stateNode,Fs(),Dn(ks),Dn(cs),jo(),qt.pendingContext&&(qt.context=qt.pendingContext,qt.pendingContext=null),(Mt===null||Mt.child===null)&&(jn(kt)?Kl(kt):Mt===null||Mt.memoizedState.isDehydrated&&!(kt.flags&256)||(kt.flags|=1024,sr!==null&&(cv(sr),sr=null))),tu(Mt,kt),Al(kt),null;case 5:no(kt),Wt=xs(Gs.current);var Zt=kt.type;if(Mt!==null&&kt.stateNode!=null)zp(Mt,kt,Zt,qt,Wt),Mt.ref!==kt.ref&&(kt.flags|=512,kt.flags|=2097152);else{if(!qt){if(kt.stateNode===null)throw Error(ut(166));return Al(kt),null}if(Mt=xs(rs.current),jn(kt)){if(!Ir)throw Error(ut(175));Mt=$a(kt.stateNode,kt.type,kt.memoizedProps,Wt,Mt,kt,!cr),kt.updateQueue=Mt,Mt!==null&&Kl(kt)}else{var ir=Kt(Zt,qt,Wt,Mt,kt);Gn(ir,kt,!1,!1),kt.stateNode=ir,or(ir,Zt,qt,Wt,Mt)&&Kl(kt)}kt.ref!==null&&(kt.flags|=512,kt.flags|=2097152)}return Al(kt),null;case 6:if(Mt&&kt.stateNode!=null)Cu(Mt,kt,Mt.memoizedProps,qt);else{if(typeof qt!="string"&&kt.stateNode===null)throw Error(ut(166));if(Mt=xs(Gs.current),Wt=xs(rs.current),jn(kt)){if(!Ir)throw Error(ut(176));if(Mt=kt.stateNode,qt=kt.memoizedProps,(Wt=Ll(Mt,qt,kt,!cr))&&(Zt=na,Zt!==null))switch(ir=(Zt.mode&1)!==0,Zt.tag){case 3:_i(Zt.stateNode.containerInfo,Mt,qt,ir);break;case 5:hs(Zt.type,Zt.memoizedProps,Zt.stateNode,Mt,qt,ir)}Wt&&Kl(kt)}else kt.stateNode=fr(qt,Mt,Wt,kt)}return Al(kt),null;case 13:if(Dn(ms),qt=kt.memoizedState,Pr&&yl!==null&&kt.mode&1&&!(kt.flags&128)){for(Mt=yl;Mt;)Mt=ro(Mt);return ts(),kt.flags|=98560,kt}if(qt!==null&&qt.dehydrated!==null){if(qt=jn(kt),Mt===null){if(!qt)throw Error(ut(318));if(!Ir)throw Error(ut(344));if(Mt=kt.memoizedState,Mt=Mt!==null?Mt.dehydrated:null,!Mt)throw Error(ut(317));Rl(Mt,kt)}else ts(),!(kt.flags&128)&&(kt.memoizedState=null),kt.flags|=4;return Al(kt),null}return sr!==null&&(cv(sr),sr=null),kt.flags&128?(kt.lanes=Wt,kt):(qt=qt!==null,Wt=!1,Mt===null?jn(kt):Wt=Mt.memoizedState!==null,qt&&!Wt&&(kt.child.flags|=8192,kt.mode&1&&(Mt===null||ms.current&1?Gl===0&&(Gl=3):dv())),kt.updateQueue!==null&&(kt.flags|=4),Al(kt),null);case 4:return Fs(),tu(Mt,kt),Mt===null&&Fr(kt.stateNode.containerInfo),Al(kt),null;case 10:return Cp(kt.type._context),Al(kt),null;case 17:return As(kt.type)&&Ns(),Al(kt),null;case 19:if(Dn(ms),Zt=kt.memoizedState,Zt===null)return Al(kt),null;if(qt=(kt.flags&128)!==0,ir=Zt.rendering,ir===null)if(qt)kp(Zt,!1);else{if(Gl!==0||Mt!==null&&Mt.flags&128)for(Mt=kt.child;Mt!==null;){if(ir=Ds(Mt),ir!==null){for(kt.flags|=128,kp(Zt,!1),Mt=ir.updateQueue,Mt!==null&&(kt.updateQueue=Mt,kt.flags|=4),kt.subtreeFlags=0,Mt=Wt,qt=kt.child;qt!==null;)Wt=qt,Zt=Mt,Wt.flags&=14680066,ir=Wt.alternate,ir===null?(Wt.childLanes=0,Wt.lanes=Zt,Wt.child=null,Wt.subtreeFlags=0,Wt.memoizedProps=null,Wt.memoizedState=null,Wt.updateQueue=null,Wt.dependencies=null,Wt.stateNode=null):(Wt.childLanes=ir.childLanes,Wt.lanes=ir.lanes,Wt.child=ir.child,Wt.subtreeFlags=0,Wt.deletions=null,Wt.memoizedProps=ir.memoizedProps,Wt.memoizedState=ir.memoizedState,Wt.updateQueue=ir.updateQueue,Wt.type=ir.type,Zt=ir.dependencies,Wt.dependencies=Zt===null?null:{lanes:Zt.lanes,firstContext:Zt.firstContext}),qt=qt.sibling;return $n(ms,ms.current&1|2),kt.child}Mt=Mt.sibling}Zt.tail!==null&&Mo()>iv&&(kt.flags|=128,qt=!0,kp(Zt,!1),kt.lanes=4194304)}else{if(!qt)if(Mt=Ds(ir),Mt!==null){if(kt.flags|=128,qt=!0,Mt=Mt.updateQueue,Mt!==null&&(kt.updateQueue=Mt,kt.flags|=4),kp(Zt,!0),Zt.tail===null&&Zt.tailMode==="hidden"&&!ir.alternate&&!Pr)return Al(kt),null}else 2*Mo()-Zt.renderingStartTime>iv&&Wt!==1073741824&&(kt.flags|=128,qt=!0,kp(Zt,!1),kt.lanes=4194304);Zt.isBackwards?(ir.sibling=kt.child,kt.child=ir):(Mt=Zt.last,Mt!==null?Mt.sibling=ir:kt.child=ir,Zt.last=ir)}return Zt.tail!==null?(kt=Zt.tail,Zt.rendering=kt,Zt.tail=kt.sibling,Zt.renderingStartTime=Mo(),kt.sibling=null,Mt=ms.current,$n(ms,qt?Mt&1|2:Mt&1),kt):(Al(kt),null);case 22:case 23:return uv(),qt=kt.memoizedState!==null,Mt!==null&&Mt.memoizedState!==null!==qt&&(kt.flags|=8192),qt&&kt.mode&1?_d&1073741824&&(Al(kt),gr&&kt.subtreeFlags&6&&(kt.flags|=8192)):Al(kt),null;case 24:return null;case 25:return null}throw Error(ut(156,kt.tag))}var Em=dt.ReactCurrentOwner,Hl=!1;function Wl(Mt,kt,Wt,qt){kt.child=Mt===null?Sn(kt,null,Wt,qt):Ts(kt,Mt.child,Wt,qt)}function Yp(Mt,kt,Wt,qt,Zt){Wt=Wt.render;var ir=kt.ref;return Qr(kt,Zt),qt=Bs(Mt,kt,Wt,qt,ir,Zt),Wt=wo(),Mt!==null&&!Hl?(kt.updateQueue=Mt.updateQueue,kt.flags&=-2053,Mt.lanes&=~Zt,Pu(Mt,kt,Zt)):(Pr&&Wt&&_h(kt),kt.flags|=1,Wl(Mt,kt,qt,Zt),kt.child)}function Lp(Mt,kt,Wt,qt,Zt){if(Mt===null){var ir=Wt.type;return typeof ir=="function"&&!hv(ir)&&ir.defaultProps===void 0&&Wt.compare===null&&Wt.defaultProps===void 0?(kt.tag=15,kt.type=ir,km(Mt,kt,ir,qt,Zt)):(Mt=Qm(Wt.type,null,qt,kt,kt.mode,Zt),Mt.ref=kt.ref,Mt.return=kt,kt.child=Mt)}if(ir=Mt.child,!(Mt.lanes&Zt)){var Br=ir.memoizedProps;if(Wt=Wt.compare,Wt=Wt!==null?Wt:lo,Wt(Br,qt)&&Mt.ref===kt.ref)return Pu(Mt,kt,Zt)}return kt.flags|=1,Mt=rm(ir,qt),Mt.ref=kt.ref,Mt.return=kt,kt.child=Mt}function km(Mt,kt,Wt,qt,Zt){if(Mt!==null&&lo(Mt.memoizedProps,qt)&&Mt.ref===kt.ref)if(Hl=!1,(Mt.lanes&Zt)!==0)Mt.flags&131072&&(Hl=!0);else return kt.lanes=Mt.lanes,Pu(Mt,kt,Zt);return Lm(Mt,kt,Wt,qt,Zt)}function Im(Mt,kt,Wt){var qt=kt.pendingProps,Zt=qt.children,ir=Mt!==null?Mt.memoizedState:null;if(qt.mode==="hidden")if(!(kt.mode&1))kt.memoizedState={baseLanes:0,cachePool:null},$n(Mm,_d),_d|=Wt;else if(Wt&1073741824)kt.memoizedState={baseLanes:0,cachePool:null},qt=ir!==null?ir.baseLanes:Wt,$n(Mm,_d),_d|=qt;else return Mt=ir!==null?ir.baseLanes|Wt:Wt,kt.lanes=kt.childLanes=1073741824,kt.memoizedState={baseLanes:Mt,cachePool:null},kt.updateQueue=null,$n(Mm,_d),_d|=Mt,null;else ir!==null?(qt=ir.baseLanes|Wt,kt.memoizedState=null):qt=Wt,$n(Mm,_d),_d|=qt;return Wl(Mt,kt,Zt,Wt),kt.child}function yu(Mt,kt){var Wt=kt.ref;(Mt===null&&Wt!==null||Mt!==null&&Mt.ref!==Wt)&&(kt.flags|=512,kt.flags|=2097152)}function Lm(Mt,kt,Wt,qt,Zt){var ir=As(Wt)?Ps:cs.current;return ir=oo(kt,ir),Qr(kt,Zt),Wt=Bs(Mt,kt,Wt,qt,ir,Zt),qt=wo(),Mt!==null&&!Hl?(kt.updateQueue=Mt.updateQueue,kt.flags&=-2053,Mt.lanes&=~Zt,Pu(Mt,kt,Zt)):(Pr&&qt&&_h(kt),kt.flags|=1,Wl(Mt,kt,Wt,Zt),kt.child)}function pm(Mt,kt,Wt,qt,Zt){if(As(Wt)){var ir=!0;yo(kt)}else ir=!1;if(Qr(kt,Zt),kt.stateNode===null)Mt!==null&&(Mt.alternate=null,kt.alternate=null,kt.flags|=2),dm(kt,Wt,qt),gp(kt,Wt,qt,Zt),qt=!0;else if(Mt===null){var Br=kt.stateNode,un=kt.memoizedProps;Br.props=un;var Fn=Br.context,ls=Wt.contextType;typeof ls=="object"&&ls!==null?ls=ps(ls):(ls=As(Wt)?Ps:cs.current,ls=oo(kt,ls));var Is=Wt.getDerivedStateFromProps,go=typeof Is=="function"||typeof Br.getSnapshotBeforeUpdate=="function";go||typeof Br.UNSAFE_componentWillReceiveProps!="function"&&typeof Br.componentWillReceiveProps!="function"||(un!==qt||Fn!==ls)&&hm(kt,Br,qt,ls),Ls=!1;var eo=kt.memoizedState;Br.state=eo,Bp(kt,qt,Br,Zt),Fn=kt.memoizedState,un!==qt||eo!==Fn||ks.current||Ls?(typeof Is=="function"&&(Zp(kt,Wt,Is,qt),Fn=kt.memoizedState),(un=Ls||um(kt,Wt,un,qt,eo,Fn,ls))?(go||typeof Br.UNSAFE_componentWillMount!="function"&&typeof Br.componentWillMount!="function"||(typeof Br.componentWillMount=="function"&&Br.componentWillMount(),typeof Br.UNSAFE_componentWillMount=="function"&&Br.UNSAFE_componentWillMount()),typeof Br.componentDidMount=="function"&&(kt.flags|=4194308)):(typeof Br.componentDidMount=="function"&&(kt.flags|=4194308),kt.memoizedProps=qt,kt.memoizedState=Fn),Br.props=qt,Br.state=Fn,Br.context=ls,qt=un):(typeof Br.componentDidMount=="function"&&(kt.flags|=4194308),qt=!1)}else{Br=kt.stateNode,Rs(Mt,kt),un=kt.memoizedProps,ls=kt.type===kt.elementType?un:Ql(kt.type,un),Br.props=ls,go=kt.pendingProps,eo=Br.context,Fn=Wt.contextType,typeof Fn=="object"&&Fn!==null?Fn=ps(Fn):(Fn=As(Wt)?Ps:cs.current,Fn=oo(kt,Fn));var Jo=Wt.getDerivedStateFromProps;(Is=typeof Jo=="function"||typeof Br.getSnapshotBeforeUpdate=="function")||typeof Br.UNSAFE_componentWillReceiveProps!="function"&&typeof Br.componentWillReceiveProps!="function"||(un!==go||eo!==Fn)&&hm(kt,Br,qt,Fn),Ls=!1,eo=kt.memoizedState,Br.state=eo,Bp(kt,qt,Br,Zt);var qs=kt.memoizedState;un!==go||eo!==qs||ks.current||Ls?(typeof Jo=="function"&&(Zp(kt,Wt,Jo,qt),qs=kt.memoizedState),(ls=Ls||um(kt,Wt,ls,qt,eo,qs,Fn)||!1)?(Is||typeof Br.UNSAFE_componentWillUpdate!="function"&&typeof Br.componentWillUpdate!="function"||(typeof Br.componentWillUpdate=="function"&&Br.componentWillUpdate(qt,qs,Fn),typeof Br.UNSAFE_componentWillUpdate=="function"&&Br.UNSAFE_componentWillUpdate(qt,qs,Fn)),typeof Br.componentDidUpdate=="function"&&(kt.flags|=4),typeof Br.getSnapshotBeforeUpdate=="function"&&(kt.flags|=1024)):(typeof Br.componentDidUpdate!="function"||un===Mt.memoizedProps&&eo===Mt.memoizedState||(kt.flags|=4),typeof Br.getSnapshotBeforeUpdate!="function"||un===Mt.memoizedProps&&eo===Mt.memoizedState||(kt.flags|=1024),kt.memoizedProps=qt,kt.memoizedState=qs),Br.props=qt,Br.state=qs,Br.context=Fn,qt=ls):(typeof Br.componentDidUpdate!="function"||un===Mt.memoizedProps&&eo===Mt.memoizedState||(kt.flags|=4),typeof Br.getSnapshotBeforeUpdate!="function"||un===Mt.memoizedProps&&eo===Mt.memoizedState||(kt.flags|=1024),qt=!1)}return wm(Mt,kt,Wt,qt,ir,Zt)}function wm(Mt,kt,Wt,qt,Zt,ir){yu(Mt,kt);var Br=(kt.flags&128)!==0;if(!qt&&!Br)return Zt&&Ko(kt,Wt,!1),Pu(Mt,kt,ir);qt=kt.stateNode,Em.current=kt;var un=Br&&typeof Wt.getDerivedStateFromError!="function"?null:qt.render();return kt.flags|=1,Mt!==null&&Br?(kt.child=Ts(kt,Mt.child,null,ir),kt.child=Ts(kt,null,un,ir)):Wl(Mt,kt,un,ir),kt.memoizedState=qt.state,Zt&&Ko(kt,Wt,!0),kt.child}function fm(Mt){var kt=Mt.stateNode;kt.pendingContext?Uo(Mt,kt.pendingContext,kt.pendingContext!==kt.context):kt.context&&Uo(Mt,kt.context,!1),vs(Mt,kt.containerInfo)}function Wp(Mt,kt,Wt,qt,Zt){return ts(),ns(Zt),kt.flags|=256,Wl(Mt,kt,Wt,qt),kt.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Tm(Mt){return{baseLanes:Mt,cachePool:null}}function Mu(Mt,kt,Wt){var qt=kt.pendingProps,Zt=ms.current,ir=!1,Br=(kt.flags&128)!==0,un;if((un=Br)||(un=Mt!==null&&Mt.memoizedState===null?!1:(Zt&2)!==0),un?(ir=!0,kt.flags&=-129):(Mt===null||Mt.memoizedState!==null)&&(Zt|=1),$n(ms,Zt&1),Mt===null)return nn(kt),Mt=kt.memoizedState,Mt!==null&&(Mt=Mt.dehydrated,Mt!==null)?(kt.mode&1?Ss(Mt)?kt.lanes=8:kt.lanes=1073741824:kt.lanes=1,null):(Zt=qt.children,Mt=qt.fallback,ir?(qt=kt.mode,ir=kt.child,Zt={mode:"hidden",children:Zt},!(qt&1)&&ir!==null?(ir.childLanes=0,ir.pendingProps=Zt):ir=Jm(Zt,qt,0,null),Mt=_m(Mt,qt,Wt,null),ir.return=kt,Mt.return=kt,ir.sibling=Mt,kt.child=ir,kt.child.memoizedState=Tm(Wt),kt.memoizedState=Rm,Mt):Qp(kt,Zt));if(Zt=Mt.memoizedState,Zt!==null){if(un=Zt.dehydrated,un!==null){if(Br)return kt.flags&256?(kt.flags&=-257,Dp(Mt,kt,Wt,Error(ut(422)))):kt.memoizedState!==null?(kt.child=Mt.child,kt.flags|=128,null):(ir=qt.fallback,Zt=kt.mode,qt=Jm({mode:"visible",children:qt.children},Zt,0,null),ir=_m(ir,Zt,Wt,null),ir.flags|=2,qt.return=kt,ir.return=kt,qt.sibling=ir,kt.child=qt,kt.mode&1&&Ts(kt,Mt.child,null,Wt),kt.child.memoizedState=Tm(Wt),kt.memoizedState=Rm,ir);if(!(kt.mode&1))kt=Dp(Mt,kt,Wt,null);else if(Ss(un))kt=Dp(Mt,kt,Wt,Error(ut(419)));else if(qt=(Wt&Mt.childLanes)!==0,Hl||qt){if(qt=$l,qt!==null){switch(Wt&-Wt){case 4:ir=2;break;case 16:ir=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ir=32;break;case 536870912:ir=268435456;break;default:ir=0}qt=ir&(qt.suspendedLanes|Wt)?0:ir,qt!==0&&qt!==Zt.retryLane&&(Zt.retryLane=qt,lp(Mt,qt,-1))}dv(),kt=Dp(Mt,kt,Wt,Error(ut(421)))}else $s(un)?(kt.flags|=128,kt.child=Mt.child,kt=Fv.bind(null,Mt),zs(un,kt),kt=null):(Wt=Zt.treeContext,Ir&&(yl=qo(un),na=kt,Pr=!0,sr=null,cr=!1,Wt!==null&&(Vl[Nl++]=zl,Vl[Nl++]=lu,Vl[Nl++]=Nu,zl=Wt.id,lu=Wt.overflow,Nu=kt)),kt=Qp(kt,kt.pendingProps.children),kt.flags|=4096);return kt}return ir?(qt=Vm(Mt,kt,qt.children,qt.fallback,Wt),ir=kt.child,Zt=Mt.child.memoizedState,ir.memoizedState=Zt===null?Tm(Wt):{baseLanes:Zt.baseLanes|Wt,cachePool:null},ir.childLanes=Mt.childLanes&~Wt,kt.memoizedState=Rm,qt):(Wt=Cm(Mt,kt,qt.children,Wt),kt.memoizedState=null,Wt)}return ir?(qt=Vm(Mt,kt,qt.children,qt.fallback,Wt),ir=kt.child,Zt=Mt.child.memoizedState,ir.memoizedState=Zt===null?Tm(Wt):{baseLanes:Zt.baseLanes|Wt,cachePool:null},ir.childLanes=Mt.childLanes&~Wt,kt.memoizedState=Rm,qt):(Wt=Cm(Mt,kt,qt.children,Wt),kt.memoizedState=null,Wt)}function Qp(Mt,kt){return kt=Jm({mode:"visible",children:kt},Mt.mode,0,null),kt.return=Mt,Mt.child=kt}function Cm(Mt,kt,Wt,qt){var Zt=Mt.child;return Mt=Zt.sibling,Wt=rm(Zt,{mode:"visible",children:Wt}),!(kt.mode&1)&&(Wt.lanes=qt),Wt.return=kt,Wt.sibling=null,Mt!==null&&(qt=kt.deletions,qt===null?(kt.deletions=[Mt],kt.flags|=16):qt.push(Mt)),kt.child=Wt}function Vm(Mt,kt,Wt,qt,Zt){var ir=kt.mode;Mt=Mt.child;var Br=Mt.sibling,un={mode:"hidden",children:Wt};return!(ir&1)&&kt.child!==Mt?(Wt=kt.child,Wt.childLanes=0,Wt.pendingProps=un,kt.deletions=null):(Wt=rm(Mt,un),Wt.subtreeFlags=Mt.subtreeFlags&14680064),Br!==null?qt=rm(Br,qt):(qt=_m(qt,ir,Zt,null),qt.flags|=2),qt.return=kt,Wt.return=kt,Wt.sibling=qt,kt.child=Wt,qt}function Dp(Mt,kt,Wt,qt){return qt!==null&&ns(qt),Ts(kt,Mt.child,null,Wt),Mt=Qp(kt,kt.pendingProps.children),Mt.flags|=2,kt.memoizedState=null,Mt}function Dm(Mt,kt,Wt){Mt.lanes|=kt;var qt=Mt.alternate;qt!==null&&(qt.lanes|=kt),jp(Mt.return,kt,Wt)}function Om(Mt,kt,Wt,qt,Zt){var ir=Mt.memoizedState;ir===null?Mt.memoizedState={isBackwards:kt,rendering:null,renderingStartTime:0,last:qt,tail:Wt,tailMode:Zt}:(ir.isBackwards=kt,ir.rendering=null,ir.renderingStartTime=0,ir.last=qt,ir.tail=Wt,ir.tailMode=Zt)}function Nm(Mt,kt,Wt){var qt=kt.pendingProps,Zt=qt.revealOrder,ir=qt.tail;if(Wl(Mt,kt,qt.children,Wt),qt=ms.current,qt&2)qt=qt&1|2,kt.flags|=128;else{if(Mt!==null&&Mt.flags&128)e:for(Mt=kt.child;Mt!==null;){if(Mt.tag===13)Mt.memoizedState!==null&&Dm(Mt,Wt,kt);else if(Mt.tag===19)Dm(Mt,Wt,kt);else if(Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===kt)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===kt)break e;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}qt&=1}if($n(ms,qt),!(kt.mode&1))kt.memoizedState=null;else switch(Zt){case"forwards":for(Wt=kt.child,Zt=null;Wt!==null;)Mt=Wt.alternate,Mt!==null&&Ds(Mt)===null&&(Zt=Wt),Wt=Wt.sibling;Wt=Zt,Wt===null?(Zt=kt.child,kt.child=null):(Zt=Wt.sibling,Wt.sibling=null),Om(kt,!1,Zt,Wt,ir);break;case"backwards":for(Wt=null,Zt=kt.child,kt.child=null;Zt!==null;){if(Mt=Zt.alternate,Mt!==null&&Ds(Mt)===null){kt.child=Zt;break}Mt=Zt.sibling,Zt.sibling=Wt,Wt=Zt,Zt=Mt}Om(kt,!0,Wt,null,ir);break;case"together":Om(kt,!1,null,null,void 0);break;default:kt.memoizedState=null}return kt.child}function Pu(Mt,kt,Wt){if(Mt!==null&&(kt.dependencies=Mt.dependencies),Pm|=kt.lanes,!(Wt&kt.childLanes))return null;if(Mt!==null&&kt.child!==Mt.child)throw Error(ut(153));if(kt.child!==null){for(Mt=kt.child,Wt=rm(Mt,Mt.pendingProps),kt.child=Wt,Wt.return=kt;Mt.sibling!==null;)Mt=Mt.sibling,Wt=Wt.sibling=rm(Mt,Mt.pendingProps),Wt.return=kt;Wt.sibling=null}return kt.child}function ev(Mt,kt,Wt){switch(kt.tag){case 3:fm(kt),ts();break;case 5:Zs(kt);break;case 1:As(kt.type)&&yo(kt);break;case 4:vs(kt,kt.stateNode.containerInfo);break;case 10:Kp(kt,kt.type._context,kt.memoizedProps.value);break;case 13:var qt=kt.memoizedState;if(qt!==null)return qt.dehydrated!==null?($n(ms,ms.current&1),kt.flags|=128,null):Wt&kt.child.childLanes?Mu(Mt,kt,Wt):($n(ms,ms.current&1),Mt=Pu(Mt,kt,Wt),Mt!==null?Mt.sibling:null);$n(ms,ms.current&1);break;case 19:if(qt=(Wt&kt.childLanes)!==0,Mt.flags&128){if(qt)return Nm(Mt,kt,Wt);kt.flags|=128}var Zt=kt.memoizedState;if(Zt!==null&&(Zt.rendering=null,Zt.tail=null,Zt.lastEffect=null),$n(ms,ms.current),qt)break;return null;case 22:case 23:return kt.lanes=0,Im(Mt,kt,Wt)}return Pu(Mt,kt,Wt)}function Yt(Mt,kt){switch(ep(kt),kt.tag){case 1:return As(kt.type)&&Ns(),Mt=kt.flags,Mt&65536?(kt.flags=Mt&-65537|128,kt):null;case 3:return Fs(),Dn(ks),Dn(cs),jo(),Mt=kt.flags,Mt&65536&&!(Mt&128)?(kt.flags=Mt&-65537|128,kt):null;case 5:return no(kt),null;case 13:if(Dn(ms),Mt=kt.memoizedState,Mt!==null&&Mt.dehydrated!==null){if(kt.alternate===null)throw Error(ut(340));ts()}return Mt=kt.flags,Mt&65536?(kt.flags=Mt&-65537|128,kt):null;case 19:return Dn(ms),null;case 4:return Fs(),null;case 10:return Cp(kt.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var er=!1,rr=!1,_r=typeof WeakSet=="function"?WeakSet:Set,Er=null;function Nr(Mt,kt){var Wt=Mt.ref;if(Wt!==null)if(typeof Wt=="function")try{Wt(null)}catch(qt){Gu(Mt,kt,qt)}else Wt.current=null}function Xr(Mt,kt,Wt){try{Wt()}catch(qt){Gu(Mt,kt,qt)}}var Yr=!1;function gn(Mt,kt){for(Ht(Mt.containerInfo),Er=kt;Er!==null;)if(Mt=Er,kt=Mt.child,(Mt.subtreeFlags&1028)!==0&&kt!==null)kt.return=Mt,Er=kt;else for(;Er!==null;){Mt=Er;try{var Wt=Mt.alternate;if(Mt.flags&1024)switch(Mt.tag){case 0:case 11:case 15:break;case 1:if(Wt!==null){var qt=Wt.memoizedProps,Zt=Wt.memoizedState,ir=Mt.stateNode,Br=ir.getSnapshotBeforeUpdate(Mt.elementType===Mt.type?qt:Ql(Mt.type,qt),Zt);ir.__reactInternalSnapshotBeforeUpdate=Br}break;case 3:gr&&pn(Mt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(un){Gu(Mt,Mt.return,un)}if(kt=Mt.sibling,kt!==null){kt.return=Mt.return,Er=kt;break}Er=Mt.return}return Wt=Yr,Yr=!1,Wt}function kr(Mt,kt,Wt){var qt=kt.updateQueue;if(qt=qt!==null?qt.lastEffect:null,qt!==null){var Zt=qt=qt.next;do{if((Zt.tag&Mt)===Mt){var ir=Zt.destroy;Zt.destroy=void 0,ir!==void 0&&Xr(kt,Wt,ir)}Zt=Zt.next}while(Zt!==qt)}}function Hr(Mt,kt){if(kt=kt.updateQueue,kt=kt!==null?kt.lastEffect:null,kt!==null){var Wt=kt=kt.next;do{if((Wt.tag&Mt)===Mt){var qt=Wt.create;Wt.destroy=qt()}Wt=Wt.next}while(Wt!==kt)}}function Lr(Mt){var kt=Mt.ref;if(kt!==null){var Wt=Mt.stateNode;switch(Mt.tag){case 5:Mt=Ut(Wt);break;default:Mt=Wt}typeof kt=="function"?kt(Mt):kt.current=Mt}}function on(Mt,kt,Wt){if(xl&&typeof xl.onCommitFiberUnmount=="function")try{xl.onCommitFiberUnmount(Np,kt)}catch{}switch(kt.tag){case 0:case 11:case 14:case 15:if(Mt=kt.updateQueue,Mt!==null&&(Mt=Mt.lastEffect,Mt!==null)){var qt=Mt=Mt.next;do{var Zt=qt,ir=Zt.destroy;Zt=Zt.tag,ir!==void 0&&(Zt&2||Zt&4)&&Xr(kt,Wt,ir),qt=qt.next}while(qt!==Mt)}break;case 1:if(Nr(kt,Wt),Mt=kt.stateNode,typeof Mt.componentWillUnmount=="function")try{Mt.props=kt.memoizedProps,Mt.state=kt.memoizedState,Mt.componentWillUnmount()}catch(Br){Gu(kt,Wt,Br)}break;case 5:Nr(kt,Wt);break;case 4:gr?Ln(Mt,kt,Wt):lr&&lr&&(kt=kt.stateNode.containerInfo,Wt=xr(kt),fn(kt,Wt))}}function En(Mt,kt,Wt){for(var qt=kt;;)if(on(Mt,qt,Wt),qt.child===null||gr&&qt.tag===4){if(qt===kt)break;for(;qt.sibling===null;){if(qt.return===null||qt.return===kt)return;qt=qt.return}qt.sibling.return=qt.return,qt=qt.sibling}else qt.child.return=qt,qt=qt.child}function Kn(Mt){var kt=Mt.alternate;kt!==null&&(Mt.alternate=null,Kn(kt)),Mt.child=null,Mt.deletions=null,Mt.sibling=null,Mt.tag===5&&(kt=Mt.stateNode,kt!==null&&hn(kt)),Mt.stateNode=null,Mt.return=null,Mt.dependencies=null,Mt.memoizedProps=null,Mt.memoizedState=null,Mt.pendingProps=null,Mt.stateNode=null,Mt.updateQueue=null}function zn(Mt){return Mt.tag===5||Mt.tag===3||Mt.tag===4}function Xn(Mt){e:for(;;){for(;Mt.sibling===null;){if(Mt.return===null||zn(Mt.return))return null;Mt=Mt.return}for(Mt.sibling.return=Mt.return,Mt=Mt.sibling;Mt.tag!==5&&Mt.tag!==6&&Mt.tag!==18;){if(Mt.flags&2||Mt.child===null||Mt.tag===4)continue e;Mt.child.return=Mt,Mt=Mt.child}if(!(Mt.flags&2))return Mt.stateNode}}function Zn(Mt){if(gr){e:{for(var kt=Mt.return;kt!==null;){if(zn(kt))break e;kt=kt.return}throw Error(ut(160))}var Wt=kt;switch(Wt.tag){case 5:kt=Wt.stateNode,Wt.flags&32&&(Ur(kt),Wt.flags&=-33),Wt=Xn(Mt),kn(Mt,Wt,kt);break;case 3:case 4:kt=Wt.stateNode.containerInfo,Wt=Xn(Mt),In(Mt,Wt,kt);break;default:throw Error(ut(161))}}}function In(Mt,kt,Wt){var qt=Mt.tag;if(qt===5||qt===6)Mt=Mt.stateNode,kt?wn(Wt,Mt,kt):Mn(Wt,Mt);else if(qt!==4&&(Mt=Mt.child,Mt!==null))for(In(Mt,kt,Wt),Mt=Mt.sibling;Mt!==null;)In(Mt,kt,Wt),Mt=Mt.sibling}function kn(Mt,kt,Wt){var qt=Mt.tag;if(qt===5||qt===6)Mt=Mt.stateNode,kt?qr(Wt,Mt,kt):Wn(Wt,Mt);else if(qt!==4&&(Mt=Mt.child,Mt!==null))for(kn(Mt,kt,Wt),Mt=Mt.sibling;Mt!==null;)kn(Mt,kt,Wt),Mt=Mt.sibling}function Ln(Mt,kt,Wt){for(var qt=kt,Zt=!1,ir,Br;;){if(!Zt){Zt=qt.return;e:for(;;){if(Zt===null)throw Error(ut(160));switch(ir=Zt.stateNode,Zt.tag){case 5:Br=!1;break e;case 3:ir=ir.containerInfo,Br=!0;break e;case 4:ir=ir.containerInfo,Br=!0;break e}Zt=Zt.return}Zt=!0}if(qt.tag===5||qt.tag===6)En(Mt,qt,Wt),Br?nr(ir,qt.stateNode):Cr(ir,qt.stateNode);else if(qt.tag===18)Br?Or(ir,qt.stateNode):Tn(ir,qt.stateNode);else if(qt.tag===4){if(qt.child!==null){ir=qt.stateNode.containerInfo,Br=!0,qt.child.return=qt,qt=qt.child;continue}}else if(on(Mt,qt,Wt),qt.child!==null){qt.child.return=qt,qt=qt.child;continue}if(qt===kt)break;for(;qt.sibling===null;){if(qt.return===null||qt.return===kt)return;qt=qt.return,qt.tag===4&&(Zt=!1)}qt.sibling.return=qt.return,qt=qt.sibling}}function us(Mt,kt){if(gr){switch(kt.tag){case 0:case 11:case 14:case 15:kr(3,kt,kt.return),Hr(3,kt),kr(5,kt,kt.return);return;case 1:return;case 5:var Wt=kt.stateNode;if(Wt!=null){var qt=kt.memoizedProps;Mt=Mt!==null?Mt.memoizedProps:qt;var Zt=kt.type,ir=kt.updateQueue;kt.updateQueue=null,ir!==null&&Gr(Wt,ir,Zt,Mt,qt,kt)}return;case 6:if(kt.stateNode===null)throw Error(ut(162));Wt=kt.memoizedProps,sn(kt.stateNode,Mt!==null?Mt.memoizedProps:Wt,Wt);return;case 3:Ir&&Mt!==null&&Mt.memoizedState.isDehydrated&&_n(kt.stateNode.containerInfo);return;case 12:return;case 13:ys(kt);return;case 19:ys(kt);return;case 17:return}throw Error(ut(163))}switch(kt.tag){case 0:case 11:case 14:case 15:kr(3,kt,kt.return),Hr(3,kt),kr(5,kt,kt.return);return;case 12:return;case 13:ys(kt);return;case 19:ys(kt);return;case 3:Ir&&Mt!==null&&Mt.memoizedState.isDehydrated&&_n(kt.stateNode.containerInfo);break;case 22:case 23:return}e:if(lr){switch(kt.tag){case 1:case 5:case 6:break e;case 3:case 4:kt=kt.stateNode,fn(kt.containerInfo,kt.pendingChildren);break e}throw Error(ut(163))}}function ys(Mt){var kt=Mt.updateQueue;if(kt!==null){Mt.updateQueue=null;var Wt=Mt.stateNode;Wt===null&&(Wt=Mt.stateNode=new _r),kt.forEach(function(qt){var Zt=Bv.bind(null,Mt,qt);Wt.has(qt)||(Wt.add(qt),qt.then(Zt,Zt))})}}function Ys(Mt,kt){for(Er=kt;Er!==null;){kt=Er;var Wt=kt.deletions;if(Wt!==null)for(var qt=0;qt<Wt.length;qt++){var Zt=Wt[qt];try{var ir=Mt;gr?Ln(ir,Zt,kt):En(ir,Zt,kt);var Br=Zt.alternate;Br!==null&&(Br.return=null),Zt.return=null}catch(Ws){Gu(Zt,kt,Ws)}}if(Wt=kt.child,kt.subtreeFlags&12854&&Wt!==null)Wt.return=kt,Er=Wt;else for(;Er!==null;){kt=Er;try{var un=kt.flags;if(un&32&&gr&&Ur(kt.stateNode),un&512){var Fn=kt.alternate;if(Fn!==null){var ls=Fn.ref;ls!==null&&(typeof ls=="function"?ls(null):ls.current=null)}}if(un&8192)switch(kt.tag){case 13:if(kt.memoizedState!==null){var Is=kt.alternate;(Is===null||Is.memoizedState===null)&&(nv=Mo())}break;case 22:var go=kt.memoizedState!==null,eo=kt.alternate,Jo=eo!==null&&eo.memoizedState!==null;if(Wt=kt,gr){e:if(qt=Wt,Zt=go,ir=null,gr)for(var qs=qt;;){if(qs.tag===5){if(ir===null){ir=qs;var _u=qs.stateNode;Zt?Mr(_u):Cn(qs.stateNode,qs.memoizedProps)}}else if(qs.tag===6){if(ir===null){var dp=qs.stateNode;Zt?rn(dp):Rr(dp,qs.memoizedProps)}}else if((qs.tag!==22&&qs.tag!==23||qs.memoizedState===null||qs===qt)&&qs.child!==null){qs.child.return=qs,qs=qs.child;continue}if(qs===qt)break;for(;qs.sibling===null;){if(qs.return===null||qs.return===qt)break e;ir===qs&&(ir=null),qs=qs.return}ir===qs&&(ir=null),qs.sibling.return=qs.return,qs=qs.sibling}}if(go&&!Jo&&Wt.mode&1){Er=Wt;for(var An=Wt.child;An!==null;){for(Wt=Er=An;Er!==null;){qt=Er;var vn=qt.child;switch(qt.tag){case 0:case 11:case 14:case 15:kr(4,qt,qt.return);break;case 1:Nr(qt,qt.return);var On=qt.stateNode;if(typeof On.componentWillUnmount=="function"){var Cs=qt.return;try{On.props=qt.memoizedProps,On.state=qt.memoizedState,On.componentWillUnmount()}catch(Ws){Gu(qt,Cs,Ws)}}break;case 5:Nr(qt,qt.return);break;case 22:if(qt.memoizedState!==null){_o(Wt);continue}}vn!==null?(vn.return=qt,Er=vn):_o(Wt)}An=An.sibling}}}switch(un&4102){case 2:Zn(kt),kt.flags&=-3;break;case 6:Zn(kt),kt.flags&=-3,us(kt.alternate,kt);break;case 4096:kt.flags&=-4097;break;case 4100:kt.flags&=-4097,us(kt.alternate,kt);break;case 4:us(kt.alternate,kt)}}catch(Ws){Gu(kt,kt.return,Ws)}if(Wt=kt.sibling,Wt!==null){Wt.return=kt.return,Er=Wt;break}Er=kt.return}}}function Vs(Mt,kt,Wt){Er=Mt,Bo(Mt)}function Bo(Mt,kt,Wt){for(var qt=(Mt.mode&1)!==0;Er!==null;){var Zt=Er,ir=Zt.child;if(Zt.tag===22&&qt){var Br=Zt.memoizedState!==null||er;if(!Br){var un=Zt.alternate,Fn=un!==null&&un.memoizedState!==null||rr;un=er;var ls=rr;if(er=Br,(rr=Fn)&&!ls)for(Er=Zt;Er!==null;)Br=Er,Fn=Br.child,Br.tag===22&&Br.memoizedState!==null?El(Zt):Fn!==null?(Fn.return=Br,Er=Fn):El(Zt);for(;ir!==null;)Er=ir,Bo(ir),ir=ir.sibling;Er=Zt,er=un,rr=ls}Go(Mt)}else Zt.subtreeFlags&8772&&ir!==null?(ir.return=Zt,Er=ir):Go(Mt)}}function Go(Mt){for(;Er!==null;){var kt=Er;if(kt.flags&8772){var Wt=kt.alternate;try{if(kt.flags&8772)switch(kt.tag){case 0:case 11:case 15:rr||Hr(5,kt);break;case 1:var qt=kt.stateNode;if(kt.flags&4&&!rr)if(Wt===null)qt.componentDidMount();else{var Zt=kt.elementType===kt.type?Wt.memoizedProps:Ql(kt.type,Wt.memoizedProps);qt.componentDidUpdate(Zt,Wt.memoizedState,qt.__reactInternalSnapshotBeforeUpdate)}var ir=kt.updateQueue;ir!==null&&om(kt,ir,qt);break;case 3:var Br=kt.updateQueue;if(Br!==null){if(Wt=null,kt.child!==null)switch(kt.child.tag){case 5:Wt=Ut(kt.child.stateNode);break;case 1:Wt=kt.child.stateNode}om(kt,Br,Wt)}break;case 5:var un=kt.stateNode;Wt===null&&kt.flags&4&&qn(un,kt.type,kt.memoizedProps,kt);break;case 6:break;case 4:break;case 12:break;case 13:if(Ir&&kt.memoizedState===null){var Fn=kt.alternate;if(Fn!==null){var ls=Fn.memoizedState;if(ls!==null){var Is=ls.dehydrated;Is!==null&&Pn(Is)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ut(163))}rr||kt.flags&512&&Lr(kt)}catch(go){Gu(kt,kt.return,go)}}if(kt===Mt){Er=null;break}if(Wt=kt.sibling,Wt!==null){Wt.return=kt.return,Er=Wt;break}Er=kt.return}}function _o(Mt){for(;Er!==null;){var kt=Er;if(kt===Mt){Er=null;break}var Wt=kt.sibling;if(Wt!==null){Wt.return=kt.return,Er=Wt;break}Er=kt.return}}function El(Mt){for(;Er!==null;){var kt=Er;try{switch(kt.tag){case 0:case 11:case 15:var Wt=kt.return;try{Hr(4,kt)}catch(Fn){Gu(kt,Wt,Fn)}break;case 1:var qt=kt.stateNode;if(typeof qt.componentDidMount=="function"){var Zt=kt.return;try{qt.componentDidMount()}catch(Fn){Gu(kt,Zt,Fn)}}var ir=kt.return;try{Lr(kt)}catch(Fn){Gu(kt,ir,Fn)}break;case 5:var Br=kt.return;try{Lr(kt)}catch(Fn){Gu(kt,Br,Fn)}}}catch(Fn){Gu(kt,kt.return,Fn)}if(kt===Mt){Er=null;break}var un=kt.sibling;if(un!==null){un.return=kt.return,Er=un;break}Er=kt.return}}var ho=0,xa=1,Xl=2,ru=3,Au=4;if(typeof Symbol=="function"&&Symbol.for){var Qo=Symbol.for;ho=Qo("selector.component"),xa=Qo("selector.has_pseudo_class"),Xl=Qo("selector.role"),ru=Qo("selector.test_id"),Au=Qo("selector.text")}function Op(Mt){var kt=wr(Mt);if(kt!=null){if(typeof kt.memoizedProps["data-testname"]!="string")throw Error(ut(364));return kt}if(Mt=pr(Mt),Mt===null)throw Error(ut(362));return Mt.stateNode.current}function Gp(Mt,kt){switch(kt.$$typeof){case ho:if(Mt.type===kt.value)return!0;break;case xa:e:{kt=kt.value,Mt=[Mt,0];for(var Wt=0;Wt<Mt.length;){var qt=Mt[Wt++],Zt=Mt[Wt++],ir=kt[Zt];if(qt.tag!==5||!zr(qt)){for(;ir!=null&&Gp(qt,ir);)Zt++,ir=kt[Zt];if(Zt===kt.length){kt=!0;break e}else for(qt=qt.child;qt!==null;)Mt.push(qt,Zt),qt=qt.sibling}}kt=!1}return kt;case Xl:if(Mt.tag===5&&ln(Mt.stateNode,kt.value))return!0;break;case Au:if((Mt.tag===5||Mt.tag===6)&&(Mt=Wr(Mt),Mt!==null&&0<=Mt.indexOf(kt.value)))return!0;break;case ru:if(Mt.tag===5&&(Mt=Mt.memoizedProps["data-testname"],typeof Mt=="string"&&Mt.toLowerCase()===kt.value.toLowerCase()))return!0;break;default:throw Error(ut(365))}return!1}function mm(Mt){switch(Mt.$$typeof){case ho:return"<"+(Dt(Mt.value)||"Unknown")+">";case xa:return":has("+(mm(Mt)||"")+")";case Xl:return'[role="'+Mt.value+'"]';case Au:return'"'+Mt.value+'"';case ru:return'[data-testname="'+Mt.value+'"]';default:throw Error(ut(365))}}function $m(Mt,kt){var Wt=[];Mt=[Mt,0];for(var qt=0;qt<Mt.length;){var Zt=Mt[qt++],ir=Mt[qt++],Br=kt[ir];if(Zt.tag!==5||!zr(Zt)){for(;Br!=null&&Gp(Zt,Br);)ir++,Br=kt[ir];if(ir===kt.length)Wt.push(Zt);else for(Zt=Zt.child;Zt!==null;)Mt.push(Zt,ir),Zt=Zt.sibling}}return Wt}function jm(Mt,kt){if(!Jt)throw Error(ut(363));Mt=Op(Mt),Mt=$m(Mt,kt),kt=[],Mt=Array.from(Mt);for(var Wt=0;Wt<Mt.length;){var qt=Mt[Wt++];if(qt.tag===5)zr(qt)||kt.push(qt.stateNode);else for(qt=qt.child;qt!==null;)Mt.push(qt),qt=qt.sibling}return kt}var Lv=Math.ceil,zm=dt.ReactCurrentDispatcher,tv=dt.ReactCurrentOwner,Il=dt.ReactCurrentBatchConfig,Ro=0,$l=null,Fl=null,nu=0,_d=0,Mm=Un(0),Gl=0,Fm=null,Pm=0,Hm=0,rv=0,Bm=null,Hu=null,nv=0,iv=1/0;function Am(){iv=Mo()+500}var Wm=!1,sv=null,Jp=null,Gm=!1,_f=null,qm=0,Um=0,ov=null,Km=-1,Xm=0;function ku(){return Ro&6?Mo():Km!==-1?Km:Km=Mo()}function em(Mt){return Mt.mode&1?Ro&2&&nu!==0?nu&-nu:Zu.transition!==null?(Xm===0&&(Mt=Cl,Cl<<=1,!(Cl&4194240)&&(Cl=64),Xm=Mt),Xm):(Mt=xo,Mt!==0?Mt:$r()):1}function lp(Mt,kt,Wt){if(50<Um)throw Um=0,ov=null,Error(ut(185));var qt=Zm(Mt,kt);return qt===null?null:(Xu(qt,kt,Wt),(!(Ro&2)||qt!==$l)&&(qt===$l&&(!(Ro&2)&&(Hm|=kt),Gl===4&&tm(qt,nu)),Wu(qt,Wt),kt===1&&Ro===0&&!(Mt.mode&1)&&(Am(),Sl&&Yl())),qt)}function Zm(Mt,kt){Mt.lanes|=kt;var Wt=Mt.alternate;for(Wt!==null&&(Wt.lanes|=kt),Wt=Mt,Mt=Mt.return;Mt!==null;)Mt.childLanes|=kt,Wt=Mt.alternate,Wt!==null&&(Wt.childLanes|=kt),Wt=Mt,Mt=Mt.return;return Wt.tag===3?Wt.stateNode:null}function Wu(Mt,kt){var Wt=Mt.callbackNode;wp(Mt,kt);var qt=Iu(Mt,Mt===$l?nu:0);if(qt===0)Wt!==null&&Jn(Wt),Mt.callbackNode=null,Mt.callbackPriority=0;else if(kt=qt&-qt,Mt.callbackPriority!==kt){if(Wt!=null&&Jn(Wt),kt===1)Mt.tag===0?zo(yv.bind(null,Mt)):Tp(yv.bind(null,Mt)),Zr?Qt(function(){Ro===0&&Yl()}):Dr(Lu,Yl),Wt=null;else{switch(ws(qt)){case 1:Wt=Lu;break;case 4:Wt=xm;break;case 16:Wt=qp;break;case 536870912:Wt=Sm;break;default:Wt=qp}Wt=Mv(Wt,vv.bind(null,Mt))}Mt.callbackPriority=kt,Mt.callbackNode=Wt}}function vv(Mt,kt){if(Km=-1,Xm=0,Ro&6)throw Error(ut(327));var Wt=Mt.callbackNode;if(ym()&&Mt.callbackNode!==Wt)return null;var qt=Iu(Mt,Mt===$l?nu:0);if(qt===0)return null;if(qt&30||qt&Mt.expiredLanes||kt)kt=Ym(Mt,qt);else{kt=qt;var Zt=Ro;Ro|=2;var ir=Sv();($l!==Mt||nu!==kt)&&(Am(),gm(Mt,kt));do try{Nv();break}catch(un){xv(Mt,un)}while(!0);Su(),zm.current=ir,Ro=Zt,Fl!==null?kt=0:($l=null,nu=0,kt=Gl)}if(kt!==0){if(kt===2&&(Zt=qu(Mt),Zt!==0&&(qt=Zt,kt=lv(Mt,Zt))),kt===1)throw Wt=Fm,gm(Mt,0),tm(Mt,qt),Wu(Mt,Mo()),Wt;if(kt===6)tm(Mt,qt);else{if(Zt=Mt.current.alternate,!(qt&30)&&!Dv(Zt)&&(kt=Ym(Mt,qt),kt===2&&(ir=qu(Mt),ir!==0&&(qt=ir,kt=lv(Mt,ir))),kt===1))throw Wt=Fm,gm(Mt,0),tm(Mt,qt),Wu(Mt,Mo()),Wt;switch(Mt.finishedWork=Zt,Mt.finishedLanes=qt,kt){case 0:case 1:throw Error(ut(345));case 2:vm(Mt,Hu);break;case 3:if(tm(Mt,qt),(qt&130023424)===qt&&(kt=nv+500-Mo(),10<kt)){if(Iu(Mt,0)!==0)break;if(Zt=Mt.suspendedLanes,(Zt&qt)!==qt){ku(),Mt.pingedLanes|=Mt.suspendedLanes&Zt;break}Mt.timeoutHandle=Sr(vm.bind(null,Mt,Hu),kt);break}vm(Mt,Hu);break;case 4:if(tm(Mt,qt),(qt&4194240)===qt)break;for(kt=Mt.eventTimes,Zt=-1;0<qt;){var Br=31-ko(qt);ir=1<<Br,Br=kt[Br],Br>Zt&&(Zt=Br),qt&=~ir}if(qt=Zt,qt=Mo()-qt,qt=(120>qt?120:480>qt?480:1080>qt?1080:1920>qt?1920:3e3>qt?3e3:4320>qt?4320:1960*Lv(qt/1960))-qt,10<qt){Mt.timeoutHandle=Sr(vm.bind(null,Mt,Hu),qt);break}vm(Mt,Hu);break;case 5:vm(Mt,Hu);break;default:throw Error(ut(329))}}}return Wu(Mt,Mo()),Mt.callbackNode===Wt?vv.bind(null,Mt):null}function lv(Mt,kt){var Wt=Bm;return Mt.current.memoizedState.isDehydrated&&(gm(Mt,kt).flags|=256),Mt=Ym(Mt,kt),Mt!==2&&(kt=Hu,Hu=Wt,kt!==null&&cv(kt)),Mt}function cv(Mt){Hu===null?Hu=Mt:Hu.push.apply(Hu,Mt)}function Dv(Mt){for(var kt=Mt;;){if(kt.flags&16384){var Wt=kt.updateQueue;if(Wt!==null&&(Wt=Wt.stores,Wt!==null))for(var qt=0;qt<Wt.length;qt++){var Zt=Wt[qt],ir=Zt.getSnapshot;Zt=Zt.value;try{if(!Yo(ir(),Zt))return!1}catch{return!1}}}if(Wt=kt.child,kt.subtreeFlags&16384&&Wt!==null)Wt.return=kt,kt=Wt;else{if(kt===Mt)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===Mt)return!0;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}}return!0}function tm(Mt,kt){for(kt&=~rv,kt&=~Hm,Mt.suspendedLanes|=kt,Mt.pingedLanes&=~kt,Mt=Mt.expirationTimes;0<kt;){var Wt=31-ko(kt),qt=1<<Wt;Mt[Wt]=-1,kt&=~qt}}function yv(Mt){if(Ro&6)throw Error(ut(327));ym();var kt=Iu(Mt,0);if(!(kt&1))return Wu(Mt,Mo()),null;var Wt=Ym(Mt,kt);if(Mt.tag!==0&&Wt===2){var qt=qu(Mt);qt!==0&&(kt=qt,Wt=lv(Mt,qt))}if(Wt===1)throw Wt=Fm,gm(Mt,0),tm(Mt,kt),Wu(Mt,Mo()),Wt;if(Wt===6)throw Error(ut(345));return Mt.finishedWork=Mt.current.alternate,Mt.finishedLanes=kt,vm(Mt,Hu),Wu(Mt,Mo()),null}function _v(Mt){_f!==null&&_f.tag===0&&!(Ro&6)&&ym();var kt=Ro;Ro|=1;var Wt=Il.transition,qt=xo;try{if(Il.transition=null,xo=1,Mt)return Mt()}finally{xo=qt,Il.transition=Wt,Ro=kt,!(Ro&6)&&Yl()}}function uv(){_d=Mm.current,Dn(Mm)}function gm(Mt,kt){Mt.finishedWork=null,Mt.finishedLanes=0;var Wt=Mt.timeoutHandle;if(Wt!==mr&&(Mt.timeoutHandle=mr,vr(Wt)),Fl!==null)for(Wt=Fl.return;Wt!==null;){var qt=Wt;switch(ep(qt),qt.tag){case 1:qt=qt.type.childContextTypes,qt!=null&&Ns();break;case 3:Fs(),Dn(ks),Dn(cs),jo();break;case 5:no(qt);break;case 4:Fs();break;case 13:Dn(ms);break;case 19:Dn(ms);break;case 10:Cp(qt.type._context);break;case 22:case 23:uv()}Wt=Wt.return}if($l=Mt,Fl=Mt=rm(Mt.current,null),nu=_d=kt,Gl=0,Fm=null,rv=Hm=Pm=0,Hu=Bm=null,su!==null){for(kt=0;kt<su.length;kt++)if(Wt=su[kt],qt=Wt.interleaved,qt!==null){Wt.interleaved=null;var Zt=qt.next,ir=Wt.pending;if(ir!==null){var Br=ir.next;ir.next=Zt,qt.next=Br}Wt.pending=qt}su=null}return Mt}function xv(Mt,kt){do{var Wt=Fl;try{if(Su(),Xs.current=Tu,ga){for(var qt=io.memoizedState;qt!==null;){var Zt=qt.queue;Zt!==null&&(Zt.pending=null),qt=qt.next}ga=!1}if(Co=0,Js=po=io=null,Qn=!1,so=0,tv.current=null,Wt===null||Wt.return===null){Gl=1,Fm=kt,Fl=null;break}e:{var ir=Mt,Br=Wt.return,un=Wt,Fn=kt;if(kt=nu,un.flags|=32768,Fn!==null&&typeof Fn=="object"&&typeof Fn.then=="function"){var ls=Fn,Is=un,go=Is.tag;if(!(Is.mode&1)&&(go===0||go===11||go===15)){var eo=Is.alternate;eo?(Is.updateQueue=eo.updateQueue,Is.memoizedState=eo.memoizedState,Is.lanes=eo.lanes):(Is.updateQueue=null,Is.memoizedState=null)}var Jo=Ap(Br);if(Jo!==null){Jo.flags&=-257,Vp(Jo,Br,un,ir,kt),Jo.mode&1&&sp(ir,ls,kt),kt=Jo,Fn=ls;var qs=kt.updateQueue;if(qs===null){var _u=new Set;_u.add(Fn),kt.updateQueue=_u}else qs.add(Fn);break e}else{if(!(kt&1)){sp(ir,ls,kt),dv();break e}Fn=Error(ut(426))}}else if(Pr&&un.mode&1){var dp=Ap(Br);if(dp!==null){!(dp.flags&65536)&&(dp.flags|=256),Vp(dp,Br,un,ir,kt),ns(Fn);break e}}ir=Fn,Gl!==4&&(Gl=2),Bm===null?Bm=[ir]:Bm.push(ir),Fn=os(Fn,un),un=Br;do{switch(un.tag){case 3:un.flags|=65536,kt&=-kt,un.lanes|=kt;var An=Pp(un,Fn,kt);Xp(un,An);break e;case 1:ir=Fn;var vn=un.type,On=un.stateNode;if(!(un.flags&128)&&(typeof vn.getDerivedStateFromError=="function"||On!==null&&typeof On.componentDidCatch=="function"&&(Jp===null||!Jp.has(On)))){un.flags|=65536,kt&=-kt,un.lanes|=kt;var Cs=ip(un,ir,kt);Xp(un,Cs);break e}}un=un.return}while(un!==null)}wv(Wt)}catch(Ws){kt=Ws,Fl===Wt&&Wt!==null&&(Fl=Wt=Wt.return);continue}break}while(!0)}function Sv(){var Mt=zm.current;return zm.current=Tu,Mt===null?Tu:Mt}function dv(){(Gl===0||Gl===3||Gl===2)&&(Gl=4),$l===null||!(Pm&268435455)&&!(Hm&268435455)||tm($l,nu)}function Ym(Mt,kt){var Wt=Ro;Ro|=2;var qt=Sv();$l===Mt&&nu===kt||gm(Mt,kt);do try{Ov();break}catch(Zt){xv(Mt,Zt)}while(!0);if(Su(),Ro=Wt,zm.current=qt,Fl!==null)throw Error(ut(261));return $l=null,nu=0,Gl}function Ov(){for(;Fl!==null;)Ev(Fl)}function Nv(){for(;Fl!==null&&!Qs();)Ev(Fl)}function Ev(Mt){var kt=Cv(Mt.alternate,Mt,_d);Mt.memoizedProps=Mt.pendingProps,kt===null?wv(Mt):Fl=kt,tv.current=null}function wv(Mt){var kt=Mt;do{var Wt=kt.alternate;if(Mt=kt.return,kt.flags&32768){if(Wt=Yt(Wt,kt),Wt!==null){Wt.flags&=32767,Fl=Wt;return}if(Mt!==null)Mt.flags|=32768,Mt.subtreeFlags=0,Mt.deletions=null;else{Gl=6,Fl=null;return}}else if(Wt=Ip(Wt,kt,_d),Wt!==null){Fl=Wt;return}if(kt=kt.sibling,kt!==null){Fl=kt;return}Fl=kt=Mt}while(kt!==null);Gl===0&&(Gl=5)}function vm(Mt,kt){var Wt=xo,qt=Il.transition;try{Il.transition=null,xo=1,$v(Mt,kt,Wt)}finally{Il.transition=qt,xo=Wt}return null}function $v(Mt,kt,Wt){do ym();while(_f!==null);if(Ro&6)throw Error(ut(327));var qt=Mt.finishedWork,Zt=Mt.finishedLanes;if(qt===null)return null;if(Mt.finishedWork=null,Mt.finishedLanes=0,qt===Mt.current)throw Error(ut(177));Mt.callbackNode=null,Mt.callbackPriority=0;var ir=qt.lanes|qt.childLanes;if(pp(Mt,ir),Mt===$l&&(Fl=$l=null,nu=0),!(qt.subtreeFlags&2064)&&!(qt.flags&2064)||Gm||(Gm=!0,Mv(qp,function(){return ym(),null})),ir=(qt.flags&15990)!==0,qt.subtreeFlags&15990||ir){ir=Il.transition,Il.transition=null;var Br=xo;xo=1;var un=Ro;Ro|=4,tv.current=null,gn(Mt,qt),Ys(Mt,qt),Gt(Mt.containerInfo),Mt.current=qt,Vs(qt),Ml(),Ro=un,xo=Br,Il.transition=ir}else Mt.current=qt;if(Gm&&(Gm=!1,_f=Mt,qm=Zt),ir=Mt.pendingLanes,ir===0&&(Jp=null),sm(qt.stateNode),Wu(Mt,Mo()),kt!==null)for(Wt=Mt.onRecoverableError,qt=0;qt<kt.length;qt++)Wt(kt[qt]);if(Wm)throw Wm=!1,Mt=sv,sv=null,Mt;return qm&1&&Mt.tag!==0&&ym(),ir=Mt.pendingLanes,ir&1?Mt===ov?Um++:(Um=0,ov=Mt):Um=0,Yl(),null}function ym(){if(_f!==null){var Mt=ws(qm),kt=Il.transition,Wt=xo;try{if(Il.transition=null,xo=16>Mt?16:Mt,_f===null)var qt=!1;else{if(Mt=_f,_f=null,qm=0,Ro&6)throw Error(ut(331));var Zt=Ro;for(Ro|=4,Er=Mt.current;Er!==null;){var ir=Er,Br=ir.child;if(Er.flags&16){var un=ir.deletions;if(un!==null){for(var Fn=0;Fn<un.length;Fn++){var ls=un[Fn];for(Er=ls;Er!==null;){var Is=Er;switch(Is.tag){case 0:case 11:case 15:kr(8,Is,ir)}var go=Is.child;if(go!==null)go.return=Is,Er=go;else for(;Er!==null;){Is=Er;var eo=Is.sibling,Jo=Is.return;if(Kn(Is),Is===ls){Er=null;break}if(eo!==null){eo.return=Jo,Er=eo;break}Er=Jo}}}var qs=ir.alternate;if(qs!==null){var _u=qs.child;if(_u!==null){qs.child=null;do{var dp=_u.sibling;_u.sibling=null,_u=dp}while(_u!==null)}}Er=ir}}if(ir.subtreeFlags&2064&&Br!==null)Br.return=ir,Er=Br;else e:for(;Er!==null;){if(ir=Er,ir.flags&2048)switch(ir.tag){case 0:case 11:case 15:kr(9,ir,ir.return)}var An=ir.sibling;if(An!==null){An.return=ir.return,Er=An;break e}Er=ir.return}}var vn=Mt.current;for(Er=vn;Er!==null;){Br=Er;var On=Br.child;if(Br.subtreeFlags&2064&&On!==null)On.return=Br,Er=On;else e:for(Br=vn;Er!==null;){if(un=Er,un.flags&2048)try{switch(un.tag){case 0:case 11:case 15:Hr(9,un)}}catch(Ws){Gu(un,un.return,Ws)}if(un===Br){Er=null;break e}var Cs=un.sibling;if(Cs!==null){Cs.return=un.return,Er=Cs;break e}Er=un.return}}if(Ro=Zt,Yl(),xl&&typeof xl.onPostCommitFiberRoot=="function")try{xl.onPostCommitFiberRoot(Np,Mt)}catch{}qt=!0}return qt}finally{xo=Wt,Il.transition=kt}}return!1}function Rv(Mt,kt,Wt){kt=os(Wt,kt),kt=Pp(Mt,kt,1),ou(Mt,kt),kt=ku(),Mt=Zm(Mt,1),Mt!==null&&(Xu(Mt,1,kt),Wu(Mt,kt))}function Gu(Mt,kt,Wt){if(Mt.tag===3)Rv(Mt,Mt,Wt);else for(;kt!==null;){if(kt.tag===3){Rv(kt,Mt,Wt);break}else if(kt.tag===1){var qt=kt.stateNode;if(typeof kt.type.getDerivedStateFromError=="function"||typeof qt.componentDidCatch=="function"&&(Jp===null||!Jp.has(qt))){Mt=os(Wt,Mt),Mt=ip(kt,Mt,1),ou(kt,Mt),Mt=ku(),kt=Zm(kt,1),kt!==null&&(Xu(kt,1,Mt),Wu(kt,Mt));break}}kt=kt.return}}function jv(Mt,kt,Wt){var qt=Mt.pingCache;qt!==null&&qt.delete(kt),kt=ku(),Mt.pingedLanes|=Mt.suspendedLanes&Wt,$l===Mt&&(nu&Wt)===Wt&&(Gl===4||Gl===3&&(nu&130023424)===nu&&500>Mo()-nv?gm(Mt,0):rv|=Wt),Wu(Mt,kt)}function Tv(Mt,kt){kt===0&&(Mt.mode&1?(kt=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):kt=1);var Wt=ku();Mt=Zm(Mt,kt),Mt!==null&&(Xu(Mt,kt,Wt),Wu(Mt,Wt))}function Fv(Mt){var kt=Mt.memoizedState,Wt=0;kt!==null&&(Wt=kt.retryLane),Tv(Mt,Wt)}function Bv(Mt,kt){var Wt=0;switch(Mt.tag){case 13:var qt=Mt.stateNode,Zt=Mt.memoizedState;Zt!==null&&(Wt=Zt.retryLane);break;case 19:qt=Mt.stateNode;break;default:throw Error(ut(314))}qt!==null&&qt.delete(kt),Tv(Mt,Wt)}var Cv;Cv=function(Mt,kt,Wt){if(Mt!==null)if(Mt.memoizedProps!==kt.pendingProps||ks.current)Hl=!0;else{if(!(Mt.lanes&Wt)&&!(kt.flags&128))return Hl=!1,ev(Mt,kt,Wt);Hl=!!(Mt.flags&131072)}else Hl=!1,Pr&&kt.flags&1048576&&_p(kt,yp,kt.index);switch(kt.lanes=0,kt.tag){case 2:var qt=kt.type;Mt!==null&&(Mt.alternate=null,kt.alternate=null,kt.flags|=2),Mt=kt.pendingProps;var Zt=oo(kt,cs.current);Qr(kt,Wt),Zt=Bs(null,kt,qt,Mt,Zt,Wt);var ir=wo();return kt.flags|=1,typeof Zt=="object"&&Zt!==null&&typeof Zt.render=="function"&&Zt.$$typeof===void 0?(kt.tag=1,kt.memoizedState=null,kt.updateQueue=null,As(qt)?(ir=!0,yo(kt)):ir=!1,kt.memoizedState=Zt.state!==null&&Zt.state!==void 0?Zt.state:null,Fp(kt),Zt.updater=Up,kt.stateNode=Zt,Zt._reactInternals=kt,gp(kt,qt,Mt,Wt),kt=wm(null,kt,qt,!0,ir,Wt)):(kt.tag=0,Pr&&ir&&_h(kt),Wl(null,kt,Zt,Wt),kt=kt.child),kt;case 16:qt=kt.elementType;e:{switch(Mt!==null&&(Mt.alternate=null,kt.alternate=null,kt.flags|=2),Mt=kt.pendingProps,Zt=qt._init,qt=Zt(qt._payload),kt.type=qt,Zt=kt.tag=Vv(qt),Mt=Ql(qt,Mt),Zt){case 0:kt=Lm(null,kt,qt,Mt,Wt);break e;case 1:kt=pm(null,kt,qt,Mt,Wt);break e;case 11:kt=Yp(null,kt,qt,Mt,Wt);break e;case 14:kt=Lp(null,kt,qt,Ql(qt.type,Mt),Wt);break e}throw Error(ut(306,qt,""))}return kt;case 0:return qt=kt.type,Zt=kt.pendingProps,Zt=kt.elementType===qt?Zt:Ql(qt,Zt),Lm(Mt,kt,qt,Zt,Wt);case 1:return qt=kt.type,Zt=kt.pendingProps,Zt=kt.elementType===qt?Zt:Ql(qt,Zt),pm(Mt,kt,qt,Zt,Wt);case 3:e:{if(fm(kt),Mt===null)throw Error(ut(387));qt=kt.pendingProps,ir=kt.memoizedState,Zt=ir.element,Rs(Mt,kt),Bp(kt,qt,null,Wt);var Br=kt.memoizedState;if(qt=Br.element,Ir&&ir.isDehydrated)if(ir={element:qt,isDehydrated:!1,cache:Br.cache,transitions:Br.transitions},kt.updateQueue.baseState=ir,kt.memoizedState=ir,kt.flags&256){Zt=Error(ut(423)),kt=Wp(Mt,kt,qt,Wt,Zt);break e}else if(qt!==Zt){Zt=Error(ut(424)),kt=Wp(Mt,kt,qt,Wt,Zt);break e}else for(Ir&&(yl=To(kt.stateNode.containerInfo),na=kt,Pr=!0,sr=null,cr=!1),Wt=Sn(kt,null,qt,Wt),kt.child=Wt;Wt;)Wt.flags=Wt.flags&-3|4096,Wt=Wt.sibling;else{if(ts(),qt===Zt){kt=Pu(Mt,kt,Wt);break e}Wl(Mt,kt,qt,Wt)}kt=kt.child}return kt;case 5:return Zs(kt),Mt===null&&nn(kt),qt=kt.type,Zt=kt.pendingProps,ir=Mt!==null?Mt.memoizedProps:null,Br=Zt.children,dr(qt,Zt)?Br=null:ir!==null&&dr(qt,ir)&&(kt.flags|=32),yu(Mt,kt),Wl(Mt,kt,Br,Wt),kt.child;case 6:return Mt===null&&nn(kt),null;case 13:return Mu(Mt,kt,Wt);case 4:return vs(kt,kt.stateNode.containerInfo),qt=kt.pendingProps,Mt===null?kt.child=Ts(kt,null,qt,Wt):Wl(Mt,kt,qt,Wt),kt.child;case 11:return qt=kt.type,Zt=kt.pendingProps,Zt=kt.elementType===qt?Zt:Ql(qt,Zt),Yp(Mt,kt,qt,Zt,Wt);case 7:return Wl(Mt,kt,kt.pendingProps,Wt),kt.child;case 8:return Wl(Mt,kt,kt.pendingProps.children,Wt),kt.child;case 12:return Wl(Mt,kt,kt.pendingProps.children,Wt),kt.child;case 10:e:{if(qt=kt.type._context,Zt=kt.pendingProps,ir=kt.memoizedProps,Br=Zt.value,Kp(kt,qt,Br),ir!==null)if(Yo(ir.value,Br)){if(ir.children===Zt.children&&!ks.current){kt=Pu(Mt,kt,Wt);break e}}else for(ir=kt.child,ir!==null&&(ir.return=kt);ir!==null;){var un=ir.dependencies;if(un!==null){Br=ir.child;for(var Fn=un.firstContext;Fn!==null;){if(Fn.context===qt){if(ir.tag===1){Fn=Ho(-1,Wt&-Wt),Fn.tag=2;var ls=ir.updateQueue;if(ls!==null){ls=ls.shared;var Is=ls.pending;Is===null?Fn.next=Fn:(Fn.next=Is.next,Is.next=Fn),ls.pending=Fn}}ir.lanes|=Wt,Fn=ir.alternate,Fn!==null&&(Fn.lanes|=Wt),jp(ir.return,Wt,kt),un.lanes|=Wt;break}Fn=Fn.next}}else if(ir.tag===10)Br=ir.type===kt.type?null:ir.child;else if(ir.tag===18){if(Br=ir.return,Br===null)throw Error(ut(341));Br.lanes|=Wt,un=Br.alternate,un!==null&&(un.lanes|=Wt),jp(Br,Wt,kt),Br=ir.sibling}else Br=ir.child;if(Br!==null)Br.return=ir;else for(Br=ir;Br!==null;){if(Br===kt){Br=null;break}if(ir=Br.sibling,ir!==null){ir.return=Br.return,Br=ir;break}Br=Br.return}ir=Br}Wl(Mt,kt,Zt.children,Wt),kt=kt.child}return kt;case 9:return Zt=kt.type,qt=kt.pendingProps.children,Qr(kt,Wt),Zt=ps(Zt),qt=qt(Zt),kt.flags|=1,Wl(Mt,kt,qt,Wt),kt.child;case 14:return qt=kt.type,Zt=Ql(qt,kt.pendingProps),Zt=Ql(qt.type,Zt),Lp(Mt,kt,qt,Zt,Wt);case 15:return km(Mt,kt,kt.type,kt.pendingProps,Wt);case 17:return qt=kt.type,Zt=kt.pendingProps,Zt=kt.elementType===qt?Zt:Ql(qt,Zt),Mt!==null&&(Mt.alternate=null,kt.alternate=null,kt.flags|=2),kt.tag=1,As(qt)?(Mt=!0,yo(kt)):Mt=!1,Qr(kt,Wt),dm(kt,qt,Zt),gp(kt,qt,Zt,Wt),wm(null,kt,qt,!0,Mt,Wt);case 19:return Nm(Mt,kt,Wt);case 22:return Im(Mt,kt,Wt)}throw Error(ut(156,kt.tag))};function Mv(Mt,kt){return Dr(Mt,kt)}function Uv(Mt,kt,Wt,qt){this.tag=Mt,this.key=Wt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=kt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=qt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function up(Mt,kt,Wt,qt){return new Uv(Mt,kt,Wt,qt)}function hv(Mt){return Mt=Mt.prototype,!(!Mt||!Mt.isReactComponent)}function Vv(Mt){if(typeof Mt=="function")return hv(Mt)?1:0;if(Mt!=null){if(Mt=Mt.$$typeof,Mt===vt)return 11;if(Mt===wt)return 14}return 2}function rm(Mt,kt){var Wt=Mt.alternate;return Wt===null?(Wt=up(Mt.tag,kt,Mt.key,Mt.mode),Wt.elementType=Mt.elementType,Wt.type=Mt.type,Wt.stateNode=Mt.stateNode,Wt.alternate=Mt,Mt.alternate=Wt):(Wt.pendingProps=kt,Wt.type=Mt.type,Wt.flags=0,Wt.subtreeFlags=0,Wt.deletions=null),Wt.flags=Mt.flags&14680064,Wt.childLanes=Mt.childLanes,Wt.lanes=Mt.lanes,Wt.child=Mt.child,Wt.memoizedProps=Mt.memoizedProps,Wt.memoizedState=Mt.memoizedState,Wt.updateQueue=Mt.updateQueue,kt=Mt.dependencies,Wt.dependencies=kt===null?null:{lanes:kt.lanes,firstContext:kt.firstContext},Wt.sibling=Mt.sibling,Wt.index=Mt.index,Wt.ref=Mt.ref,Wt}function Qm(Mt,kt,Wt,qt,Zt,ir){var Br=2;if(qt=Mt,typeof Mt=="function")hv(Mt)&&(Br=1);else if(typeof Mt=="string")Br=5;else e:switch(Mt){case ft:return _m(Wt.children,Zt,ir,kt);case mt:Br=8,Zt|=8;break;case gt:return Mt=up(12,Wt,kt,Zt|2),Mt.elementType=gt,Mt.lanes=ir,Mt;case St:return Mt=up(13,Wt,kt,Zt),Mt.elementType=St,Mt.lanes=ir,Mt;case Et:return Mt=up(19,Wt,kt,Zt),Mt.elementType=Et,Mt.lanes=ir,Mt;case Tt:return Jm(Wt,Zt,ir,kt);default:if(typeof Mt=="object"&&Mt!==null)switch(Mt.$$typeof){case xt:Br=10;break e;case yt:Br=9;break e;case vt:Br=11;break e;case wt:Br=14;break e;case Rt:Br=16,qt=null;break e}throw Error(ut(130,Mt==null?Mt:typeof Mt,""))}return kt=up(Br,Wt,kt,Zt),kt.elementType=Mt,kt.type=qt,kt.lanes=ir,kt}function _m(Mt,kt,Wt,qt){return Mt=up(7,Mt,qt,kt),Mt.lanes=Wt,Mt}function Jm(Mt,kt,Wt,qt){return Mt=up(22,Mt,qt,kt),Mt.elementType=Tt,Mt.lanes=Wt,Mt.stateNode={},Mt}function pv(Mt,kt,Wt){return Mt=up(6,Mt,null,kt),Mt.lanes=Wt,Mt}function fv(Mt,kt,Wt){return kt=up(4,Mt.children!==null?Mt.children:[],Mt.key,kt),kt.lanes=Wt,kt.stateNode={containerInfo:Mt.containerInfo,pendingChildren:null,implementation:Mt.implementation},kt}function zv(Mt,kt,Wt,qt,Zt){this.tag=kt,this.containerInfo=Mt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=mr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ku(0),this.expirationTimes=Ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ku(0),this.identifierPrefix=qt,this.onRecoverableError=Zt,Ir&&(this.mutableSourceEagerHydrationData=null)}function Pv(Mt,kt,Wt,qt,Zt,ir,Br,un,Fn){return Mt=new zv(Mt,kt,Wt,un,Fn),kt===1?(kt=1,ir===!0&&(kt|=8)):kt=0,ir=up(3,null,null,kt),Mt.current=ir,ir.stateNode=Mt,ir.memoizedState={element:qt,isDehydrated:Wt,cache:null,transitions:null},Fp(ir),Mt}function Av(Mt){if(!Mt)return Os;Mt=Mt._reactInternals;e:{if(Ft(Mt)!==Mt||Mt.tag!==1)throw Error(ut(170));var kt=Mt;do{switch(kt.tag){case 3:kt=kt.stateNode.context;break e;case 1:if(As(kt.type)){kt=kt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}kt=kt.return}while(kt!==null);throw Error(ut(171))}if(Mt.tag===1){var Wt=Mt.type;if(As(Wt))return Vo(Mt,Wt,kt)}return kt}function kv(Mt){var kt=Mt._reactInternals;if(kt===void 0)throw typeof Mt.render=="function"?Error(ut(188)):(Mt=Object.keys(Mt).join(","),Error(ut(268,Mt)));return Mt=Ot(kt),Mt===null?null:Mt.stateNode}function Iv(Mt,kt){if(Mt=Mt.memoizedState,Mt!==null&&Mt.dehydrated!==null){var Wt=Mt.retryLane;Mt.retryLane=Wt!==0&&Wt<kt?Wt:kt}}function mv(Mt,kt){Iv(Mt,kt),(Mt=Mt.alternate)&&Iv(Mt,kt)}function Hv(Mt){return Mt=Ot(Mt),Mt===null?null:Mt.stateNode}function Wv(){return null}return it.attemptContinuousHydration=function(Mt){if(Mt.tag===13){var kt=ku();lp(Mt,134217728,kt),mv(Mt,134217728)}},it.attemptHydrationAtCurrentPriority=function(Mt){if(Mt.tag===13){var kt=ku(),Wt=em(Mt);lp(Mt,Wt,kt),mv(Mt,Wt)}},it.attemptSynchronousHydration=function(Mt){switch(Mt.tag){case 3:var kt=Mt.stateNode;if(kt.current.memoizedState.isDehydrated){var Wt=Ul(kt.pendingLanes);Wt!==0&&(Rp(kt,Wt|1),Wu(kt,Mo()),!(Ro&6)&&(Am(),Yl()))}break;case 13:var qt=ku();_v(function(){return lp(Mt,1,qt)}),mv(Mt,1)}},it.batchedUpdates=function(Mt,kt){var Wt=Ro;Ro|=1;try{return Mt(kt)}finally{Ro=Wt,Ro===0&&(Am(),Sl&&Yl())}},it.createComponentSelector=function(Mt){return{$$typeof:ho,value:Mt}},it.createContainer=function(Mt,kt,Wt,qt,Zt,ir,Br){return Pv(Mt,kt,!1,null,Wt,qt,Zt,ir,Br)},it.createHasPseudoClassSelector=function(Mt){return{$$typeof:xa,value:Mt}},it.createHydrationContainer=function(Mt,kt,Wt,qt,Zt,ir,Br,un,Fn){return Mt=Pv(Wt,qt,!0,Mt,Zt,ir,Br,un,Fn),Mt.context=Av(null),Wt=Mt.current,qt=ku(),Zt=em(Wt),ir=Ho(qt,Zt),ir.callback=kt??null,ou(Wt,ir),Mt.current.lanes=Zt,Xu(Mt,Zt,qt),Wu(Mt,qt),Mt},it.createPortal=function(Mt,kt,Wt){var qt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pt,key:qt==null?null:""+qt,children:Mt,containerInfo:kt,implementation:Wt}},it.createRoleSelector=function(Mt){return{$$typeof:Xl,value:Mt}},it.createTestNameSelector=function(Mt){return{$$typeof:ru,value:Mt}},it.createTextSelector=function(Mt){return{$$typeof:Au,value:Mt}},it.deferredUpdates=function(Mt){var kt=xo,Wt=Il.transition;try{return Il.transition=null,xo=16,Mt()}finally{xo=kt,Il.transition=Wt}},it.discreteUpdates=function(Mt,kt,Wt,qt,Zt){var ir=xo,Br=Il.transition;try{return Il.transition=null,xo=1,Mt(kt,Wt,qt,Zt)}finally{xo=ir,Il.transition=Br,Ro===0&&Am()}},it.findAllNodes=jm,it.findBoundingRects=function(Mt,kt){if(!Jt)throw Error(ut(363));kt=jm(Mt,kt),Mt=[];for(var Wt=0;Wt<kt.length;Wt++)Mt.push(Vr(kt[Wt]));for(kt=Mt.length-1;0<kt;kt--){Wt=Mt[kt];for(var qt=Wt.x,Zt=qt+Wt.width,ir=Wt.y,Br=ir+Wt.height,un=kt-1;0<=un;un--)if(kt!==un){var Fn=Mt[un],ls=Fn.x,Is=ls+Fn.width,go=Fn.y,eo=go+Fn.height;if(qt>=ls&&ir>=go&&Zt<=Is&&Br<=eo){Mt.splice(kt,1);break}else if(qt!==ls||Wt.width!==Fn.width||eo<ir||go>Br){if(!(ir!==go||Wt.height!==Fn.height||Is<qt||ls>Zt)){ls>qt&&(Fn.width+=ls-qt,Fn.x=qt),Is<Zt&&(Fn.width=Zt-ls),Mt.splice(kt,1);break}}else{go>ir&&(Fn.height+=go-ir,Fn.y=ir),eo<Br&&(Fn.height=Br-go),Mt.splice(kt,1);break}}}return Mt},it.findHostInstance=kv,it.findHostInstanceWithNoPortals=function(Mt){return Mt=Pt(Mt),Mt=Mt!==null?$t(Mt):null,Mt===null?null:Mt.stateNode},it.findHostInstanceWithWarning=function(Mt){return kv(Mt)},it.flushControlled=function(Mt){var kt=Ro;Ro|=1;var Wt=Il.transition,qt=xo;try{Il.transition=null,xo=1,Mt()}finally{xo=qt,Il.transition=Wt,Ro=kt,Ro===0&&(Am(),Yl())}},it.flushPassiveEffects=ym,it.flushSync=_v,it.focusWithin=function(Mt,kt){if(!Jt)throw Error(ut(363));for(Mt=Op(Mt),kt=$m(Mt,kt),kt=Array.from(kt),Mt=0;Mt<kt.length;){var Wt=kt[Mt++];if(!zr(Wt)){if(Wt.tag===5&&xn(Wt.stateNode))return!0;for(Wt=Wt.child;Wt!==null;)kt.push(Wt),Wt=Wt.sibling}}return!1},it.getCurrentUpdatePriority=function(){return xo},it.getFindAllNodesFailureDescription=function(Mt,kt){if(!Jt)throw Error(ut(363));var Wt=0,qt=[];Mt=[Op(Mt),0];for(var Zt=0;Zt<Mt.length;){var ir=Mt[Zt++],Br=Mt[Zt++],un=kt[Br];if((ir.tag!==5||!zr(ir))&&(Gp(ir,un)&&(qt.push(mm(un)),Br++,Br>Wt&&(Wt=Br)),Br<kt.length))for(ir=ir.child;ir!==null;)Mt.push(ir,Br),ir=ir.sibling}if(Wt<kt.length){for(Mt=[];Wt<kt.length;Wt++)Mt.push(mm(kt[Wt]));return`findAllNodes was able to match part of the selector:
  `+(qt.join(" > ")+`

No matching component was found for:
  `)+Mt.join(" > ")}return null},it.getPublicRootInstance=function(Mt){if(Mt=Mt.current,!Mt.child)return null;switch(Mt.child.tag){case 5:return Ut(Mt.child.stateNode);default:return Mt.child.stateNode}},it.injectIntoDevTools=function(Mt){if(Mt={bundleType:Mt.bundleType,version:Mt.version,rendererPackageName:Mt.rendererPackageName,rendererConfig:Mt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dt.ReactCurrentDispatcher,findHostInstanceByFiber:Hv,findFiberByHostInstance:Mt.findFiberByHostInstance||Wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Mt=!1;else{var kt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(kt.isDisabled||!kt.supportsFiber)Mt=!0;else{try{Np=kt.inject(Mt),xl=kt}catch{}Mt=!!kt.checkDCE}}return Mt},it.isAlreadyRendering=function(){return!1},it.observeVisibleRects=function(Mt,kt,Wt,qt){if(!Jt)throw Error(ut(363));Mt=jm(Mt,kt);var Zt=yn(Mt,Wt,qt).disconnect;return{disconnect:function(){Zt()}}},it.registerMutableSourceForHydration=function(Mt,kt){var Wt=kt._getVersion;Wt=Wt(kt._source),Mt.mutableSourceEagerHydrationData==null?Mt.mutableSourceEagerHydrationData=[kt,Wt]:Mt.mutableSourceEagerHydrationData.push(kt,Wt)},it.runWithPriority=function(Mt,kt){var Wt=xo;try{return xo=Mt,kt()}finally{xo=Wt}},it.shouldError=function(){return null},it.shouldSuspend=function(){return!1},it.updateContainer=function(Mt,kt,Wt,qt){var Zt=kt.current,ir=ku(),Br=em(Zt);return Wt=Av(Wt),kt.context===null?kt.context=Wt:kt.pendingContext=Wt,kt=Ho(ir,Br),kt.payload={element:Mt},qt=qt===void 0?null:qt,qt!==null&&(kt.callback=qt),ou(Zt,kt),Mt=lp(Zt,Br,ir),Mt!==null&&Mp(Mt,Zt,Br),Br},it};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Kt=Gt-1>>>1,Xt=Bt[Kt];if(0<lt(Xt,Ht))Bt[Kt]=Ht,Bt[Gt]=Xt,Gt=Kt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Kt=0,Xt=Bt.length,or=Xt>>>1;Kt<or;){var tr=2*(Kt+1)-1,dr=Bt[tr],fr=tr+1,Sr=Bt[fr];if(0>lt(dr,Gt))fr<Xt&&0>lt(Sr,dr)?(Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr):(Bt[Kt]=dr,Bt[tr]=Gt,Kt=tr);else if(fr<Xt&&0>lt(Sr,Gt))Bt[Kt]=Sr,Bt[fr]=Gt,Kt=fr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],pt=[],ft=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(pt);Ht!==null;){if(Ht.callback===null)st(pt);else if(Ht.startTime<=Bt)st(pt),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(pt)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(pt);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,Et(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Pt());){var Kt=mt.callback;if(typeof Kt=="function"){mt.callback=null,gt=mt.priorityLevel;var Xt=Kt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Xt=="function"?mt.callback=Xt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var or=!0;else{var tr=it(pt);tr!==null&&zt(Tt,tr.startTime-Ht),or=!1}return or}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Pt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof wt=="function")Nt=function(){wt(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Kt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Kt+Gt:Kt):Gt=Kt,Bt){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=Gt+Xt,Bt={id:ft++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Xt,sortIndex:-1},Gt>Kt?(Bt.sortIndex=Gt,rt(pt,Bt),it(ht)===null&&Bt===it(pt)&&(vt?(Et(jt),jt=-1):vt=!0,zt(Tt,Gt-Kt))):(Bt.sortIndex=Xt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Pt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;const isPromise=nt=>typeof nt=="object"&&typeof nt.then=="function",globalCache=[];function shallowEqualArrays(nt,rt,it=(st,lt)=>st===lt){if(nt===rt)return!0;if(!nt||!rt)return!1;const st=nt.length;if(rt.length!==st)return!1;for(let lt=0;lt<st;lt++)if(!it(nt[lt],rt[lt]))return!1;return!0}function query(nt,rt=null,it=!1,st={}){rt===null&&(rt=[nt]);for(const ct of globalCache)if(shallowEqualArrays(rt,ct.keys,ct.equal)){if(it)return;if(Object.prototype.hasOwnProperty.call(ct,"error"))throw ct.error;if(Object.prototype.hasOwnProperty.call(ct,"response"))return st.lifespan&&st.lifespan>0&&(ct.timeout&&clearTimeout(ct.timeout),ct.timeout=setTimeout(ct.remove,st.lifespan)),ct.response;if(!it)throw ct.promise}const lt={keys:rt,equal:st.equal,remove:()=>{const ct=globalCache.indexOf(lt);ct!==-1&&globalCache.splice(ct,1)},promise:(isPromise(nt)?nt:nt(...rt)).then(ct=>{lt.response=ct,st.lifespan&&st.lifespan>0&&(lt.timeout=setTimeout(lt.remove,st.lifespan))}).catch(ct=>lt.error=ct)};if(globalCache.push(lt),!it)throw lt.promise}const suspend=(nt,rt,it)=>query(nt,rt,!1,it),preload=(nt,rt,it)=>void query(nt,rt,!0,it),clear=nt=>{if(nt===void 0||nt.length===0)globalCache.splice(0,globalCache.length);else{const rt=globalCache.find(it=>shallowEqualArrays(nt,it.keys,it.equal));rt&&rt.remove()}},catalogue={},extend=nt=>void Object.assign(catalogue,nt);function createRenderer(nt,rt){function it(ft,{args:mt=[],attach:gt,...xt},yt){let vt=`${ft[0].toUpperCase()}${ft.slice(1)}`,St;if(ft==="primitive"){if(xt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const Et=xt.object;St=prepare(Et,{type:ft,root:yt,attach:gt,primitive:!0})}else{const Et=catalogue[vt];if(!Et)throw new Error(`R3F: ${vt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(mt))throw new Error("R3F: The args prop must be an array!");St=prepare(new Et(...mt),{type:ft,root:yt,attach:gt,memoizedProps:{args:mt}})}return St.__r3f.attach===void 0&&(St instanceof BufferGeometry?St.__r3f.attach="geometry":St instanceof Material&&(St.__r3f.attach="material")),vt!=="inject"&&applyProps$1(St,xt),St}function st(ft,mt){let gt=!1;if(mt){var xt,yt;(xt=mt.__r3f)!=null&&xt.attach?attach(ft,mt,mt.__r3f.attach):mt.isObject3D&&ft.isObject3D&&(ft.add(mt),gt=!0),gt||(yt=ft.__r3f)==null||yt.objects.push(mt),mt.__r3f||prepare(mt,{}),mt.__r3f.parent=ft,updateInstance(mt),invalidateInstance(mt)}}function lt(ft,mt,gt){let xt=!1;if(mt){var yt,vt;if((yt=mt.__r3f)!=null&&yt.attach)attach(ft,mt,mt.__r3f.attach);else if(mt.isObject3D&&ft.isObject3D){mt.parent=ft,mt.dispatchEvent({type:"added"});const St=ft.children.filter(wt=>wt!==mt),Et=St.indexOf(gt);ft.children=[...St.slice(0,Et),mt,...St.slice(Et)],xt=!0}xt||(vt=ft.__r3f)==null||vt.objects.push(mt),mt.__r3f||prepare(mt,{}),mt.__r3f.parent=ft,updateInstance(mt),invalidateInstance(mt)}}function ct(ft,mt,gt=!1){ft&&[...ft].forEach(xt=>ut(mt,xt,gt))}function ut(ft,mt,gt){if(mt){var xt,yt,vt;if(mt.__r3f&&(mt.__r3f.parent=null),(xt=ft.__r3f)!=null&&xt.objects&&(ft.__r3f.objects=ft.__r3f.objects.filter(Tt=>Tt!==mt)),(yt=mt.__r3f)!=null&&yt.attach)detach(ft,mt,mt.__r3f.attach);else if(mt.isObject3D&&ft.isObject3D){var St;ft.remove(mt),(St=mt.__r3f)!=null&&St.root&&removeInteractivity(findInitialRoot(mt),mt)}const wt=(vt=mt.__r3f)==null?void 0:vt.primitive,Rt=!wt&&(gt===void 0?mt.dispose!==null:gt);if(!wt){var Et;ct((Et=mt.__r3f)==null?void 0:Et.objects,mt,Rt),ct(mt.children,mt,Rt)}if(delete mt.__r3f,Rt&&mt.dispose&&mt.type!=="Scene"){const Tt=()=>{try{mt.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,Tt):Tt()}invalidateInstance(ft)}}function dt(ft,mt,gt,xt){var yt;const vt=(yt=ft.__r3f)==null?void 0:yt.parent;if(!vt)return;const St=it(mt,gt,ft.__r3f.root);if(ft.children){for(const Et of ft.children)Et.__r3f&&st(St,Et);ft.children=ft.children.filter(Et=>!Et.__r3f)}ft.__r3f.objects.forEach(Et=>st(St,Et)),ft.__r3f.objects=[],ft.__r3f.autoRemovedBeforeAppend||ut(vt,ft),St.parent&&(St.__r3f.autoRemovedBeforeAppend=!0),st(vt,St),St.raycast&&St.__r3f.eventCount&&findInitialRoot(St).getState().internal.interaction.push(St),[xt,xt.alternate].forEach(Et=>{Et!==null&&(Et.stateNode=St,Et.ref&&(typeof Et.ref=="function"?Et.ref(St):Et.ref.current=St))})}const ht=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:it,removeChild:ut,appendChild:st,appendInitialChild:st,insertBefore:lt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(ft,mt)=>{if(!mt)return;const gt=ft.getState().scene;gt.__r3f&&(gt.__r3f.root=ft,st(gt,mt))},removeChildFromContainer:(ft,mt)=>{mt&&ut(ft.getState().scene,mt)},insertInContainerBefore:(ft,mt,gt)=>{if(!mt||!gt)return;const xt=ft.getState().scene;xt.__r3f&&lt(xt,mt,gt)},getRootHostContext:()=>null,getChildHostContext:ft=>ft,finalizeInitialChildren(ft){var mt;return!!((mt=ft==null?void 0:ft.__r3f)!=null?mt:{}).handlers},prepareUpdate(ft,mt,gt,xt){var yt;if(((yt=ft==null?void 0:ft.__r3f)!=null?yt:{}).primitive&&xt.object&&xt.object!==ft)return[!0];{const{args:St=[],children:Et,...wt}=xt,{args:Rt=[],children:Tt,...It}=gt;if(!Array.isArray(St))throw new Error("R3F: the args prop must be an array!");if(St.some((Dt,jt)=>Dt!==Rt[jt]))return[!0];const At=diffProps(ft,wt,It,!0);return At.changes.length?[!1,At]:null}},commitUpdate(ft,[mt,gt],xt,yt,vt,St){mt?dt(ft,xt,vt,St):applyProps$1(ft,gt)},commitMount(ft,mt,gt,xt){var yt;const vt=(yt=ft.__r3f)!=null?yt:{};ft.raycast&&vt.handlers&&vt.eventCount&&findInitialRoot(ft).getState().internal.interaction.push(ft)},getPublicInstance:ft=>ft,prepareForCommit:()=>null,preparePortalMount:ft=>prepare(ft.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(ft){var mt;const{attach:gt,parent:xt}=(mt=ft.__r3f)!=null?mt:{};gt&&xt&&detach(xt,ft,gt),ft.isObject3D&&(ft.visible=!1),invalidateInstance(ft)},unhideInstance(ft,mt){var gt;const{attach:xt,parent:yt}=(gt=ft.__r3f)!=null?gt:{};xt&&yt&&attach(yt,ft,xt),(ft.isObject3D&&mt.visible==null||mt.visible)&&(ft.visible=!0),invalidateInstance(ft)},createTextInstance:ht,hideTextInstance:ht,unhideTextInstance:ht,getCurrentEventPriority:()=>rt?rt():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=nt=>"colorSpace"in nt||"outputColorSpace"in nt,getColorManagement=()=>{var nt;return(nt=catalogue.ColorManagement)!=null?nt:null},isOrthographicCamera=nt=>nt&&nt.isOrthographicCamera,isRef=nt=>nt&&nt.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(nt){const rt=reactExports.useRef(nt);return useIsomorphicLayoutEffect(()=>void(rt.current=nt),[nt]),rt}function Block({set:nt}){return useIsomorphicLayoutEffect(()=>(nt(new Promise(()=>null)),()=>nt(!1)),[nt]),null}class ErrorBoundary extends reactExports.Component{constructor(...rt){super(...rt),this.state={error:!1}}componentDidCatch(rt){this.props.set(rt)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=nt=>nt&&!!nt.memoized&&!!nt.changes;function calculateDpr(nt){var rt;const it=typeof window<"u"?(rt=window.devicePixelRatio)!=null?rt:2:1;return Array.isArray(nt)?Math.min(Math.max(nt[0],it),nt[1]):nt}const getRootState=nt=>{var rt;return(rt=nt.__r3f)==null?void 0:rt.root.getState()};function findInitialRoot(nt){let rt=nt.__r3f.root;for(;rt.getState().previousRoot;)rt=rt.getState().previousRoot;return rt}const is={obj:nt=>nt===Object(nt)&&!is.arr(nt)&&typeof nt!="function",fun:nt=>typeof nt=="function",str:nt=>typeof nt=="string",num:nt=>typeof nt=="number",boo:nt=>typeof nt=="boolean",und:nt=>nt===void 0,arr:nt=>Array.isArray(nt),equ(nt,rt,{arrays:it="shallow",objects:st="reference",strict:lt=!0}={}){if(typeof nt!=typeof rt||!!nt!=!!rt)return!1;if(is.str(nt)||is.num(nt))return nt===rt;const ct=is.obj(nt);if(ct&&st==="reference")return nt===rt;const ut=is.arr(nt);if(ut&&it==="reference")return nt===rt;if((ut||ct)&&nt===rt)return!0;let dt;for(dt in nt)if(!(dt in rt))return!1;if(ct&&it==="shallow"&&st==="shallow"){for(dt in lt?rt:nt)if(!is.equ(nt[dt],rt[dt],{strict:lt,objects:"reference"}))return!1}else for(dt in lt?rt:nt)if(nt[dt]!==rt[dt])return!1;if(is.und(dt)){if(ut&&nt.length===0&&rt.length===0||ct&&Object.keys(nt).length===0&&Object.keys(rt).length===0)return!0;if(nt!==rt)return!1}return!0}};function buildGraph(nt){const rt={nodes:{},materials:{}};return nt&&nt.traverse(it=>{it.name&&(rt.nodes[it.name]=it),it.material&&!rt.materials[it.material.name]&&(rt.materials[it.material.name]=it.material)}),rt}function dispose(nt){nt.dispose&&nt.type!=="Scene"&&nt.dispose();for(const rt in nt)rt.dispose==null||rt.dispose(),delete nt[rt]}function prepare(nt,rt){const it=nt;return it.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...rt},nt}function resolve(nt,rt){let it=nt;if(rt.includes("-")){const st=rt.split("-"),lt=st.pop();return it=st.reduce((ct,ut)=>ct[ut],nt),{target:it,key:lt}}else return{target:it,key:rt}}const INDEX_REGEX=/-\d+$/;function attach(nt,rt,it){if(is.str(it)){if(INDEX_REGEX.test(it)){const ct=it.replace(INDEX_REGEX,""),{target:ut,key:dt}=resolve(nt,ct);Array.isArray(ut[dt])||(ut[dt]=[])}const{target:st,key:lt}=resolve(nt,it);rt.__r3f.previousAttach=st[lt],st[lt]=rt}else rt.__r3f.previousAttach=it(nt,rt)}function detach(nt,rt,it){var st,lt;if(is.str(it)){const{target:ct,key:ut}=resolve(nt,it),dt=rt.__r3f.previousAttach;dt===void 0?delete ct[ut]:ct[ut]=dt}else(st=rt.__r3f)==null||st.previousAttach==null||st.previousAttach(nt,rt);(lt=rt.__r3f)==null||delete lt.previousAttach}function diffProps(nt,{children:rt,key:it,ref:st,...lt},{children:ct,key:ut,ref:dt,...ht}={},pt=!1){var ft;const mt=(ft=nt==null?void 0:nt.__r3f)!=null?ft:{},gt=Object.entries(lt),xt=[];if(pt){const vt=Object.keys(ht);for(let St=0;St<vt.length;St++)lt.hasOwnProperty(vt[St])||gt.unshift([vt[St],DEFAULT+"remove"])}gt.forEach(([vt,St])=>{var Et;if((Et=nt.__r3f)!=null&&Et.primitive&&vt==="object"||is.equ(St,ht[vt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(vt))return xt.push([vt,St,!0,[]]);let wt=[];vt.includes("-")&&(wt=vt.split("-")),xt.push([vt,St,!1,wt]);for(const Rt in lt){const Tt=lt[Rt];Rt.startsWith(`${vt}-`)&&xt.push([Rt,Tt,!1,Rt.split("-")])}});const yt={...lt};return mt.memoizedProps&&mt.memoizedProps.args&&(yt.args=mt.memoizedProps.args),mt.memoizedProps&&mt.memoizedProps.attach&&(yt.attach=mt.memoizedProps.attach),{memoized:yt,changes:xt}}const __DEV__=typeof process<"u"&&!1;function applyProps$1(nt,rt){var it,st,lt;const ct=(it=nt.__r3f)!=null?it:{},ut=ct.root,dt=(st=ut==null||ut.getState==null?void 0:ut.getState())!=null?st:{},{memoized:ht,changes:pt}=isDiffSet(rt)?rt:diffProps(nt,rt),ft=ct.eventCount;nt.__r3f&&(nt.__r3f.memoizedProps=ht);for(let gt=0;gt<pt.length;gt++){let[xt,yt,vt,St]=pt[gt];if(hasColorSpace(nt)){const Tt="srgb",It="srgb-linear";xt==="encoding"?(xt="colorSpace",yt=yt===3001?Tt:It):xt==="outputEncoding"&&(xt="outputColorSpace",yt=yt===3001?Tt:It)}let Et=nt,wt=Et[xt];if(St.length&&(wt=St.reduce((Rt,Tt)=>Rt[Tt],nt),!(wt&&wt.set))){const[Rt,...Tt]=St.reverse();Et=Tt.reverse().reduce((It,At)=>It[At],nt),xt=Rt}if(yt===DEFAULT+"remove")if(Et.constructor){let Rt=DEFAULTS.get(Et.constructor);Rt||(Rt=new Et.constructor,DEFAULTS.set(Et.constructor,Rt)),yt=Rt[xt]}else yt=0;if(vt)yt?ct.handlers[xt]=yt:delete ct.handlers[xt],ct.eventCount=Object.keys(ct.handlers).length;else if(wt&&wt.set&&(wt.copy||wt instanceof Layers)){if(Array.isArray(yt))wt.fromArray?wt.fromArray(yt):wt.set(...yt);else if(wt.copy&&yt&&yt.constructor&&(__DEV__?wt.constructor.name===yt.constructor.name:wt.constructor===yt.constructor))wt.copy(yt);else if(yt!==void 0){const Rt=wt instanceof Color;!Rt&&wt.setScalar?wt.setScalar(yt):wt instanceof Layers&&yt instanceof Layers?wt.mask=yt.mask:wt.set(yt),!getColorManagement()&&!dt.linear&&Rt&&wt.convertSRGBToLinear()}}else if(Et[xt]=yt,Et[xt]instanceof Texture&&Et[xt].format===RGBAFormat&&Et[xt].type===UnsignedByteType){const Rt=Et[xt];hasColorSpace(Rt)&&hasColorSpace(dt.gl)?Rt.colorSpace=dt.gl.outputColorSpace:Rt.encoding=dt.gl.outputEncoding}invalidateInstance(nt)}if(ct.parent&&nt.raycast&&ft!==ct.eventCount){const gt=findInitialRoot(nt).getState().internal,xt=gt.interaction.indexOf(nt);xt>-1&&gt.interaction.splice(xt,1),ct.eventCount&&gt.interaction.push(nt)}return!(pt.length===1&&pt[0][0]==="onUpdate")&&pt.length&&(lt=nt.__r3f)!=null&&lt.parent&&updateInstance(nt),nt}function invalidateInstance(nt){var rt,it;const st=(rt=nt.__r3f)==null||(it=rt.root)==null||it.getState==null?void 0:it.getState();st&&st.internal.frames===0&&st.invalidate()}function updateInstance(nt){nt.onUpdate==null||nt.onUpdate(nt)}function updateCamera(nt,rt){nt.manual||(isOrthographicCamera(nt)?(nt.left=rt.width/-2,nt.right=rt.width/2,nt.top=rt.height/2,nt.bottom=rt.height/-2):nt.aspect=rt.width/rt.height,nt.updateProjectionMatrix(),nt.updateMatrixWorld())}function makeId(nt){return(nt.eventObject||nt.object).uuid+"/"+nt.index+nt.instanceId}function getEventPriority(){var nt;const rt=typeof self<"u"&&self||typeof window<"u"&&window;if(!rt)return constantsExports.DefaultEventPriority;switch((nt=rt.event)==null?void 0:nt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(nt,rt,it,st){const lt=it.get(rt);lt&&(it.delete(rt),it.size===0&&(nt.delete(st),lt.target.releasePointerCapture(st)))}function removeInteractivity(nt,rt){const{internal:it}=nt.getState();it.interaction=it.interaction.filter(st=>st!==rt),it.initialHits=it.initialHits.filter(st=>st!==rt),it.hovered.forEach((st,lt)=>{(st.eventObject===rt||st.object===rt)&&it.hovered.delete(lt)}),it.capturedMap.forEach((st,lt)=>{releaseInternalPointerCapture(it.capturedMap,rt,st,lt)})}function createEvents(nt){function rt(ht){const{internal:pt}=nt.getState(),ft=ht.offsetX-pt.initialClick[0],mt=ht.offsetY-pt.initialClick[1];return Math.round(Math.sqrt(ft*ft+mt*mt))}function it(ht){return ht.filter(pt=>["Move","Over","Enter","Out","Leave"].some(ft=>{var mt;return(mt=pt.__r3f)==null?void 0:mt.handlers["onPointer"+ft]}))}function st(ht,pt){const ft=nt.getState(),mt=new Set,gt=[],xt=pt?pt(ft.internal.interaction):ft.internal.interaction;for(let Et=0;Et<xt.length;Et++){const wt=getRootState(xt[Et]);wt&&(wt.raycaster.camera=void 0)}ft.previousRoot||ft.events.compute==null||ft.events.compute(ht,ft);function yt(Et){const wt=getRootState(Et);if(!wt||!wt.events.enabled||wt.raycaster.camera===null)return[];if(wt.raycaster.camera===void 0){var Rt;wt.events.compute==null||wt.events.compute(ht,wt,(Rt=wt.previousRoot)==null?void 0:Rt.getState()),wt.raycaster.camera===void 0&&(wt.raycaster.camera=null)}return wt.raycaster.camera?wt.raycaster.intersectObject(Et,!0):[]}let vt=xt.flatMap(yt).sort((Et,wt)=>{const Rt=getRootState(Et.object),Tt=getRootState(wt.object);return!Rt||!Tt?Et.distance-wt.distance:Tt.events.priority-Rt.events.priority||Et.distance-wt.distance}).filter(Et=>{const wt=makeId(Et);return mt.has(wt)?!1:(mt.add(wt),!0)});ft.events.filter&&(vt=ft.events.filter(vt,ft));for(const Et of vt){let wt=Et.object;for(;wt;){var St;(St=wt.__r3f)!=null&&St.eventCount&&gt.push({...Et,eventObject:wt}),wt=wt.parent}}if("pointerId"in ht&&ft.internal.capturedMap.has(ht.pointerId))for(let Et of ft.internal.capturedMap.get(ht.pointerId).values())mt.has(makeId(Et.intersection))||gt.push(Et.intersection);return gt}function lt(ht,pt,ft,mt){const gt=nt.getState();if(ht.length){const xt={stopped:!1};for(const yt of ht){const vt=getRootState(yt.object)||gt,{raycaster:St,pointer:Et,camera:wt,internal:Rt}=vt,Tt=new Vector3(Et.x,Et.y,0).unproject(wt),It=Lt=>{var Pt,Ot;return(Pt=(Ot=Rt.capturedMap.get(Lt))==null?void 0:Ot.has(yt.eventObject))!=null?Pt:!1},At=Lt=>{const Pt={intersection:yt,target:pt.target};Rt.capturedMap.has(Lt)?Rt.capturedMap.get(Lt).set(yt.eventObject,Pt):Rt.capturedMap.set(Lt,new Map([[yt.eventObject,Pt]])),pt.target.setPointerCapture(Lt)},Dt=Lt=>{const Pt=Rt.capturedMap.get(Lt);Pt&&releaseInternalPointerCapture(Rt.capturedMap,yt.eventObject,Pt,Lt)};let jt={};for(let Lt in pt){let Pt=pt[Lt];typeof Pt!="function"&&(jt[Lt]=Pt)}let Ft={...yt,...jt,pointer:Et,intersections:ht,stopped:xt.stopped,delta:ft,unprojectedPoint:Tt,ray:St.ray,camera:wt,stopPropagation(){const Lt="pointerId"in pt&&Rt.capturedMap.get(pt.pointerId);if((!Lt||Lt.has(yt.eventObject))&&(Ft.stopped=xt.stopped=!0,Rt.hovered.size&&Array.from(Rt.hovered.values()).find(Pt=>Pt.eventObject===yt.eventObject))){const Pt=ht.slice(0,ht.indexOf(yt));ct([...Pt,yt])}},target:{hasPointerCapture:It,setPointerCapture:At,releasePointerCapture:Dt},currentTarget:{hasPointerCapture:It,setPointerCapture:At,releasePointerCapture:Dt},nativeEvent:pt};if(mt(Ft),xt.stopped===!0)break}}return ht}function ct(ht){const{internal:pt}=nt.getState();for(const ft of pt.hovered.values())if(!ht.length||!ht.find(mt=>mt.object===ft.object&&mt.index===ft.index&&mt.instanceId===ft.instanceId)){const gt=ft.eventObject.__r3f,xt=gt==null?void 0:gt.handlers;if(pt.hovered.delete(makeId(ft)),gt!=null&&gt.eventCount){const yt={...ft,intersections:ht};xt.onPointerOut==null||xt.onPointerOut(yt),xt.onPointerLeave==null||xt.onPointerLeave(yt)}}}function ut(ht,pt){for(let ft=0;ft<pt.length;ft++){const mt=pt[ft].__r3f;mt==null||mt.handlers.onPointerMissed==null||mt.handlers.onPointerMissed(ht)}}function dt(ht){switch(ht){case"onPointerLeave":case"onPointerCancel":return()=>ct([]);case"onLostPointerCapture":return pt=>{const{internal:ft}=nt.getState();"pointerId"in pt&&ft.capturedMap.has(pt.pointerId)&&requestAnimationFrame(()=>{ft.capturedMap.has(pt.pointerId)&&(ft.capturedMap.delete(pt.pointerId),ct([]))})}}return function(ft){const{onPointerMissed:mt,internal:gt}=nt.getState();gt.lastEvent.current=ft;const xt=ht==="onPointerMove",yt=ht==="onClick"||ht==="onContextMenu"||ht==="onDoubleClick",St=st(ft,xt?it:void 0),Et=yt?rt(ft):0;ht==="onPointerDown"&&(gt.initialClick=[ft.offsetX,ft.offsetY],gt.initialHits=St.map(Rt=>Rt.eventObject)),yt&&!St.length&&Et<=2&&(ut(ft,gt.interaction),mt&&mt(ft)),xt&&ct(St);function wt(Rt){const Tt=Rt.eventObject,It=Tt.__r3f,At=It==null?void 0:It.handlers;if(It!=null&&It.eventCount)if(xt){if(At.onPointerOver||At.onPointerEnter||At.onPointerOut||At.onPointerLeave){const Dt=makeId(Rt),jt=gt.hovered.get(Dt);jt?jt.stopped&&Rt.stopPropagation():(gt.hovered.set(Dt,Rt),At.onPointerOver==null||At.onPointerOver(Rt),At.onPointerEnter==null||At.onPointerEnter(Rt))}At.onPointerMove==null||At.onPointerMove(Rt)}else{const Dt=At[ht];Dt?(!yt||gt.initialHits.includes(Tt))&&(ut(ft,gt.interaction.filter(jt=>!gt.initialHits.includes(jt))),Dt(Rt)):yt&&gt.initialHits.includes(Tt)&&ut(ft,gt.interaction.filter(jt=>!gt.initialHits.includes(jt)))}}lt(St,ft,Et,wt)}}return{handlePointer:dt}}const isRenderer=nt=>!!(nt!=null&&nt.render),context=reactExports.createContext(null),createStore=(nt,rt)=>{const it=create((dt,ht)=>{const pt=new Vector3,ft=new Vector3,mt=new Vector3;function gt(Et=ht().camera,wt=ft,Rt=ht().size){const{width:Tt,height:It,top:At,left:Dt}=Rt,jt=Tt/It;wt instanceof Vector3?mt.copy(wt):mt.set(...wt);const Ft=Et.getWorldPosition(pt).distanceTo(mt);if(isOrthographicCamera(Et))return{width:Tt/Et.zoom,height:It/Et.zoom,top:At,left:Dt,factor:1,distance:Ft,aspect:jt};{const Lt=Et.fov*Math.PI/180,Pt=2*Math.tan(Lt/2)*Ft,Ot=Pt*(Tt/It);return{width:Ot,height:Pt,top:At,left:Dt,factor:Tt/Ot,distance:Ft,aspect:jt}}}let xt;const yt=Et=>dt(wt=>({performance:{...wt.performance,current:Et}})),vt=new Vector2;return{set:dt,get:ht,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Et=1)=>nt(ht(),Et),advance:(Et,wt)=>rt(Et,wt,ht()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:vt,mouse:vt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Et=ht();xt&&clearTimeout(xt),Et.performance.current!==Et.performance.min&&yt(Et.performance.min),xt=setTimeout(()=>yt(ht().performance.max),Et.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:gt},setEvents:Et=>dt(wt=>({...wt,events:{...wt.events,...Et}})),setSize:(Et,wt,Rt,Tt,It)=>{const At=ht().camera,Dt={width:Et,height:wt,top:Tt||0,left:It||0,updateStyle:Rt};dt(jt=>({size:Dt,viewport:{...jt.viewport,...gt(At,ft,Dt)}}))},setDpr:Et=>dt(wt=>{const Rt=calculateDpr(Et);return{viewport:{...wt.viewport,dpr:Rt,initialDpr:wt.viewport.initialDpr||Rt}}}),setFrameloop:(Et="always")=>{const wt=ht().clock;wt.stop(),wt.elapsedTime=0,Et!=="never"&&(wt.start(),wt.elapsedTime=0),dt(()=>({frameloop:Et}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Et,wt,Rt)=>{const Tt=ht().internal;return Tt.priority=Tt.priority+(wt>0?1:0),Tt.subscribers.push({ref:Et,priority:wt,store:Rt}),Tt.subscribers=Tt.subscribers.sort((It,At)=>It.priority-At.priority),()=>{const It=ht().internal;It!=null&&It.subscribers&&(It.priority=It.priority-(wt>0?1:0),It.subscribers=It.subscribers.filter(At=>At.ref!==Et))}}}}}),st=it.getState();let lt=st.size,ct=st.viewport.dpr,ut=st.camera;return it.subscribe(()=>{const{camera:dt,size:ht,viewport:pt,gl:ft,set:mt}=it.getState();if(ht.width!==lt.width||ht.height!==lt.height||pt.dpr!==ct){var gt;lt=ht,ct=pt.dpr,updateCamera(dt,ht),ft.setPixelRatio(pt.dpr);const xt=(gt=ht.updateStyle)!=null?gt:typeof HTMLCanvasElement<"u"&&ft.domElement instanceof HTMLCanvasElement;ft.setSize(ht.width,ht.height,xt)}dt!==ut&&(ut=dt,mt(xt=>({viewport:{...xt.viewport,...xt.viewport.getCurrentViewport(dt)}})))}),it.subscribe(dt=>nt(dt)),it};let i$5,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(nt,rt){if(nt.size)for(const{callback:it}of nt.values())it(rt)}function flushGlobalEffects(nt,rt){switch(nt){case"before":return run(globalEffects,rt);case"after":return run(globalAfterEffects,rt);case"tail":return run(globalTailEffects,rt)}}let subscribers,subscription;function render$1(nt,rt,it){let st=rt.clock.getDelta();for(rt.frameloop==="never"&&typeof nt=="number"&&(st=nt-rt.clock.elapsedTime,rt.clock.oldTime=rt.clock.elapsedTime,rt.clock.elapsedTime=nt),subscribers=rt.internal.subscribers,i$5=0;i$5<subscribers.length;i$5++)subscription=subscribers[i$5],subscription.ref.current(subscription.store.getState(),st,it);return!rt.internal.priority&&rt.gl.render&&rt.gl.render(rt.scene,rt.camera),rt.internal.frames=Math.max(0,rt.internal.frames-1),rt.frameloop==="always"?1:rt.internal.frames}function createLoop(nt){let rt=!1,it,st,lt;function ct(ht){st=requestAnimationFrame(ct),rt=!0,it=0,flushGlobalEffects("before",ht);for(const ft of nt.values()){var pt;lt=ft.store.getState(),lt.internal.active&&(lt.frameloop==="always"||lt.internal.frames>0)&&!((pt=lt.gl.xr)!=null&&pt.isPresenting)&&(it+=render$1(ht,lt))}if(flushGlobalEffects("after",ht),it===0)return flushGlobalEffects("tail",ht),rt=!1,cancelAnimationFrame(st)}function ut(ht,pt=1){var ft;if(!ht)return nt.forEach(mt=>ut(mt.store.getState()),pt);(ft=ht.gl.xr)!=null&&ft.isPresenting||!ht.internal.active||ht.frameloop==="never"||(ht.internal.frames=Math.min(60,ht.internal.frames+pt),rt||(rt=!0,requestAnimationFrame(ct)))}function dt(ht,pt=!0,ft,mt){if(pt&&flushGlobalEffects("before",ht),ft)render$1(ht,ft,mt);else for(const gt of nt.values())render$1(ht,gt.store.getState());pt&&flushGlobalEffects("after",ht)}return{loop:ct,invalidate:ut,advance:dt}}function useStore(){const nt=reactExports.useContext(context);if(!nt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return nt}function useThree(nt=it=>it,rt){return useStore()(nt,rt)}function useFrame(nt,rt=0){const it=useStore(),st=it.getState().internal.subscribe,lt=useMutableCallback(nt);return useIsomorphicLayoutEffect(()=>st(lt,rt,it),[rt,st,it]),null}const memoizedLoaders=new WeakMap;function loadingFn(nt,rt){return function(it,...st){let lt=memoizedLoaders.get(it);return lt||(lt=new it,memoizedLoaders.set(it,lt)),nt&&nt(lt),Promise.all(st.map(ct=>new Promise((ut,dt)=>lt.load(ct,ht=>{ht.scene&&Object.assign(ht,buildGraph(ht.scene)),ut(ht)},rt,ht=>dt(new Error(`Could not load ${ct}: ${ht==null?void 0:ht.message}`)))))).finally(()=>lt.dispose==null?void 0:lt.dispose())}}function useLoader(nt,rt,it,st){const lt=Array.isArray(rt)?rt:[rt],ct=suspend(loadingFn(it,st),[nt,...lt],{equal:is.equ});return Array.isArray(rt)?ct:ct[0]}useLoader.preload=function(nt,rt,it){const st=Array.isArray(rt)?rt:[rt];return preload(loadingFn(it),[nt,...st])};useLoader.clear=function(nt,rt){const it=Array.isArray(rt)?rt:[rt];return clear([nt,...it])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(nt,rt)=>{const it=typeof nt=="function"?nt(rt):nt;return isRenderer(it)?it:new WebGLRenderer({powerPreference:"high-performance",canvas:rt,antialias:!0,alpha:!0,...nt})};function computeInitialSize(nt,rt){const it=typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement;if(rt){const{width:st,height:lt,top:ct,left:ut,updateStyle:dt=it}=rt;return{width:st,height:lt,top:ct,left:ut,updateStyle:dt}}else if(typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement&&nt.parentElement){const{width:st,height:lt,top:ct,left:ut}=nt.parentElement.getBoundingClientRect();return{width:st,height:lt,top:ct,left:ut,updateStyle:it}}else if(typeof OffscreenCanvas<"u"&&nt instanceof OffscreenCanvas)return{width:nt.width,height:nt.height,top:0,left:0,updateStyle:it};return{width:0,height:0,top:0,left:0}}function createRoot(nt){const rt=roots.get(nt),it=rt==null?void 0:rt.fiber,st=rt==null?void 0:rt.store;rt&&console.warn("R3F.createRoot should only be called once!");const lt=typeof reportError=="function"?reportError:console.error,ct=st||createStore(invalidate,advance),ut=it||reconciler.createContainer(ct,constantsExports.ConcurrentRoot,null,!1,null,"",lt,null);rt||roots.set(nt,{fiber:ut,store:ct});let dt,ht=!1,pt;return{configure(ft={}){let{gl:mt,size:gt,scene:xt,events:yt,onCreated:vt,shadows:St=!1,linear:Et=!1,flat:wt=!1,legacy:Rt=!1,orthographic:Tt=!1,frameloop:It="always",dpr:At=[1,2],performance:Dt,raycaster:jt,camera:Ft,onPointerMissed:Lt}=ft,Pt=ct.getState(),Ot=Pt.gl;Pt.gl||Pt.set({gl:Ot=createRendererInstance(mt,nt)});let Nt=Pt.raycaster;Nt||Pt.set({raycaster:Nt=new Raycaster});const{params:$t,...Vt}=jt||{};if(is.equ(Vt,Nt,shallowLoose)||applyProps(Nt,{...Vt}),is.equ($t,Nt.params,shallowLoose)||applyProps(Nt,{params:{...Nt.params,...$t}}),!Pt.camera||Pt.camera===pt&&!is.equ(pt,Ft,shallowLoose)){pt=Ft;const Xt=Ft instanceof Camera,or=Xt?Ft:Tt?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Xt||(or.position.z=5,Ft&&applyProps(or,Ft),!Pt.camera&&!(Ft!=null&&Ft.rotation)&&or.lookAt(0,0,0)),Pt.set({camera:or}),Nt.camera=or}if(!Pt.scene){let Xt;xt instanceof Scene?Xt=xt:(Xt=new Scene,xt&&applyProps(Xt,xt)),Pt.set({scene:prepare(Xt)})}if(!Pt.xr){var Ut;const Xt=(dr,fr)=>{const Sr=ct.getState();Sr.frameloop!=="never"&&advance(dr,!0,Sr,fr)},or=()=>{const dr=ct.getState();dr.gl.xr.enabled=dr.gl.xr.isPresenting,dr.gl.xr.setAnimationLoop(dr.gl.xr.isPresenting?Xt:null),dr.gl.xr.isPresenting||invalidate(dr)},tr={connect(){const dr=ct.getState().gl;dr.xr.addEventListener("sessionstart",or),dr.xr.addEventListener("sessionend",or)},disconnect(){const dr=ct.getState().gl;dr.xr.removeEventListener("sessionstart",or),dr.xr.removeEventListener("sessionend",or)}};typeof((Ut=Ot.xr)==null?void 0:Ut.addEventListener)=="function"&&tr.connect(),Pt.set({xr:tr})}if(Ot.shadowMap){const Xt=Ot.shadowMap.enabled,or=Ot.shadowMap.type;if(Ot.shadowMap.enabled=!!St,is.boo(St))Ot.shadowMap.type=PCFSoftShadowMap;else if(is.str(St)){var zt;const tr={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ot.shadowMap.type=(zt=tr[St])!=null?zt:PCFSoftShadowMap}else is.obj(St)&&Object.assign(Ot.shadowMap,St);(Xt!==Ot.shadowMap.enabled||or!==Ot.shadowMap.type)&&(Ot.shadowMap.needsUpdate=!0)}const Bt=getColorManagement();Bt&&("enabled"in Bt?Bt.enabled=!Rt:"legacyMode"in Bt&&(Bt.legacyMode=Rt)),applyProps(Ot,{outputEncoding:Et?3e3:3001,toneMapping:wt?NoToneMapping:ACESFilmicToneMapping}),Pt.legacy!==Rt&&Pt.set(()=>({legacy:Rt})),Pt.linear!==Et&&Pt.set(()=>({linear:Et})),Pt.flat!==wt&&Pt.set(()=>({flat:wt})),mt&&!is.fun(mt)&&!isRenderer(mt)&&!is.equ(mt,Ot,shallowLoose)&&applyProps(Ot,mt),yt&&!Pt.events.handlers&&Pt.set({events:yt(ct)});const Kt=computeInitialSize(nt,gt);return is.equ(Kt,Pt.size,shallowLoose)||Pt.setSize(Kt.width,Kt.height,Kt.updateStyle,Kt.top,Kt.left),At&&Pt.viewport.dpr!==calculateDpr(At)&&Pt.setDpr(At),Pt.frameloop!==It&&Pt.setFrameloop(It),Pt.onPointerMissed||Pt.set({onPointerMissed:Lt}),Dt&&!is.equ(Dt,Pt.performance,shallowLoose)&&Pt.set(Xt=>({performance:{...Xt.performance,...Dt}})),dt=vt,ht=!0,this},render(ft){return ht||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:ct,children:ft,onCreated:dt,rootElement:nt}),ut,null,()=>{}),ct},unmount(){unmountComponentAtNode(nt)}}}function Provider({store:nt,children:rt,onCreated:it,rootElement:st}){return useIsomorphicLayoutEffect(()=>{const lt=nt.getState();lt.set(ct=>({internal:{...ct.internal,active:!0}})),it&&it(lt),nt.getState().events.connected||lt.events.connect==null||lt.events.connect(st)},[]),reactExports.createElement(context.Provider,{value:nt},rt)}function unmountComponentAtNode(nt,rt){const it=roots.get(nt),st=it==null?void 0:it.fiber;if(st){const lt=it==null?void 0:it.store.getState();lt&&(lt.internal.active=!1),reconciler.updateContainer(null,st,null,()=>{lt&&setTimeout(()=>{try{var ct,ut,dt,ht;lt.events.disconnect==null||lt.events.disconnect(),(ct=lt.gl)==null||(ut=ct.renderLists)==null||ut.dispose==null||ut.dispose(),(dt=lt.gl)==null||dt.forceContextLoss==null||dt.forceContextLoss(),(ht=lt.gl)!=null&&ht.xr&&lt.xr.disconnect(),dispose(lt),roots.delete(nt),rt&&rt(nt)}catch{}},500)})}}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function debounce$1(nt,rt,it){var st,lt,ct,ut,dt;rt==null&&(rt=100);function ht(){var ft=Date.now()-ut;ft<rt&&ft>=0?st=setTimeout(ht,rt-ft):(st=null,it||(dt=nt.apply(ct,lt),ct=lt=null))}var pt=function(){ct=this,lt=arguments,ut=Date.now();var ft=it&&!st;return st||(st=setTimeout(ht,rt)),ft&&(dt=nt.apply(ct,lt),ct=lt=null),dt};return pt.clear=function(){st&&(clearTimeout(st),st=null)},pt.flush=function(){st&&(dt=nt.apply(ct,lt),ct=lt=null,clearTimeout(st),st=null)},pt}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(nt){let{debounce:rt,scroll:it,polyfill:st,offsetSize:lt}=nt===void 0?{debounce:0,scroll:!1,offsetSize:!1}:nt;const ct=st||(typeof window>"u"?class{}:window.ResizeObserver);if(!ct)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ut,dt]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ht=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ut}),pt=rt?typeof rt=="number"?rt:rt.scroll:null,ft=rt?typeof rt=="number"?rt:rt.resize:null,mt=reactExports.useRef(!1);reactExports.useEffect(()=>(mt.current=!0,()=>void(mt.current=!1)));const[gt,xt,yt]=reactExports.useMemo(()=>{const wt=()=>{if(!ht.current.element)return;const{left:Rt,top:Tt,width:It,height:At,bottom:Dt,right:jt,x:Ft,y:Lt}=ht.current.element.getBoundingClientRect(),Pt={left:Rt,top:Tt,width:It,height:At,bottom:Dt,right:jt,x:Ft,y:Lt};ht.current.element instanceof HTMLElement&&lt&&(Pt.height=ht.current.element.offsetHeight,Pt.width=ht.current.element.offsetWidth),Object.freeze(Pt),mt.current&&!areBoundsEqual(ht.current.lastBounds,Pt)&&dt(ht.current.lastBounds=Pt)};return[wt,ft?createDebounce(wt,ft):wt,pt?createDebounce(wt,pt):wt]},[dt,lt,pt,ft]);function vt(){ht.current.scrollContainers&&(ht.current.scrollContainers.forEach(wt=>wt.removeEventListener("scroll",yt,!0)),ht.current.scrollContainers=null),ht.current.resizeObserver&&(ht.current.resizeObserver.disconnect(),ht.current.resizeObserver=null)}function St(){ht.current.element&&(ht.current.resizeObserver=new ct(yt),ht.current.resizeObserver.observe(ht.current.element),it&&ht.current.scrollContainers&&ht.current.scrollContainers.forEach(wt=>wt.addEventListener("scroll",yt,{capture:!0,passive:!0})))}const Et=wt=>{!wt||wt===ht.current.element||(vt(),ht.current.element=wt,ht.current.scrollContainers=findScrollContainers(wt),St())};return useOnWindowScroll(yt,!!it),useOnWindowResize(xt),reactExports.useEffect(()=>{vt(),St()},[it,yt,xt]),reactExports.useEffect(()=>vt,[]),[Et,ut,gt]}function useOnWindowResize(nt){reactExports.useEffect(()=>{const rt=nt;return window.addEventListener("resize",rt),()=>void window.removeEventListener("resize",rt)},[nt])}function useOnWindowScroll(nt,rt){reactExports.useEffect(()=>{if(rt){const it=nt;return window.addEventListener("scroll",it,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",it,!0)}},[nt,rt])}function findScrollContainers(nt){const rt=[];if(!nt||nt===document.body)return rt;const{overflow:it,overflowX:st,overflowY:lt}=window.getComputedStyle(nt);return[it,st,lt].some(ct=>ct==="auto"||ct==="scroll")&&rt.push(nt),[...rt,...findScrollContainers(nt.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(nt,rt)=>keys.every(it=>nt[it]===rt[it]);var __defProp$8=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp$7=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$3=(nt,rt,it)=>rt in nt?__defProp$8(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp$7.call(rt,it)&&__defNormalProp$3(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp$3(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt));function traverseFiber(nt,rt,it){if(!nt)return;if(it(nt)===!0)return nt;let st=rt?nt.return:nt.child;for(;st;){const lt=traverseFiber(st,rt,it);if(lt)return lt;st=rt?null:st.sibling}}function wrapContext(nt){try{return Object.defineProperties(nt,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return nt}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const nt=reactExports.useContext(FiberContext);if(nt===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const rt=reactExports.useId();return reactExports.useMemo(()=>{for(const st of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,nt,nt==null?void 0:nt.alternate]){if(!st)continue;const lt=traverseFiber(st,!1,ct=>{let ut=ct.memoizedState;for(;ut;){if(ut.memoizedState===rt)return!0;ut=ut.next}});if(lt)return lt}},[nt,rt])}function useContextMap(){var nt,rt;const it=useFiber(),[st]=reactExports.useState(()=>new Map);st.clear();let lt=it;for(;lt;){const ct=(nt=lt.type)==null?void 0:nt._context;ct&&ct!==FiberContext&&!st.has(ct)&&st.set(ct,(rt=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:rt.readContext(wrapContext(ct))),lt=lt.return}return st}function useContextBridge(){const nt=useContextMap();return reactExports.useMemo(()=>Array.from(nt.keys()).reduce((rt,it)=>st=>reactExports.createElement(rt,null,reactExports.createElement(it.Provider,__spreadProps(__spreadValues({},st),{value:nt.get(it)}))),rt=>reactExports.createElement(FiberProvider,__spreadValues({},rt))),[nt])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(nt){const{handlePointer:rt}=createEvents(nt);return{priority:1,enabled:!0,compute(it,st,lt){st.pointer.set(it.offsetX/st.size.width*2-1,-(it.offsetY/st.size.height)*2+1),st.raycaster.setFromCamera(st.pointer,st.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((it,st)=>({...it,[st]:rt(st)}),{}),update:()=>{var it;const{events:st,internal:lt}=nt.getState();(it=lt.lastEvent)!=null&&it.current&&st.handlers&&st.handlers.onPointerMove(lt.lastEvent.current)},connect:it=>{var st;const{set:lt,events:ct}=nt.getState();ct.disconnect==null||ct.disconnect(),lt(ut=>({events:{...ut.events,connected:it}})),Object.entries((st=ct.handlers)!=null?st:[]).forEach(([ut,dt])=>{const[ht,pt]=DOM_EVENTS[ut];it.addEventListener(ht,dt,{passive:pt})})},disconnect:()=>{const{set:it,events:st}=nt.getState();if(st.connected){var lt;Object.entries((lt=st.handlers)!=null?lt:[]).forEach(([ct,ut])=>{if(st&&st.connected instanceof HTMLElement){const[dt]=DOM_EVENTS[ct];st.connected.removeEventListener(dt,ut)}}),it(ct=>({events:{...ct.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:rt,fallback:it,resize:st,style:lt,gl:ct,events:ut=createPointerEvents,eventSource:dt,eventPrefix:ht,shadows:pt,linear:ft,flat:mt,legacy:gt,orthographic:xt,frameloop:yt,dpr:vt,performance:St,raycaster:Et,camera:wt,scene:Rt,onPointerMissed:Tt,onCreated:It,...At},Dt){reactExports.useMemo(()=>extend(THREE),[]);const jt=useContextBridge(),[Ft,Lt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...st}),Pt=reactExports.useRef(null),Ot=reactExports.useRef(null);reactExports.useImperativeHandle(Dt,()=>Pt.current);const Nt=useMutableCallback(Tt),[$t,Vt]=reactExports.useState(!1),[Ut,zt]=reactExports.useState(!1);if($t)throw $t;if(Ut)throw Ut;const Bt=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Gt=Pt.current;Lt.width>0&&Lt.height>0&&Gt&&(Bt.current||(Bt.current=createRoot(Gt)),Bt.current.configure({gl:ct,events:ut,shadows:pt,linear:ft,flat:mt,legacy:gt,orthographic:xt,frameloop:yt,dpr:vt,performance:St,raycaster:Et,camera:wt,scene:Rt,size:Lt,onPointerMissed:(...Kt)=>Nt.current==null?void 0:Nt.current(...Kt),onCreated:Kt=>{Kt.events.connect==null||Kt.events.connect(dt?isRef(dt)?dt.current:dt:Ot.current),ht&&Kt.setEvents({compute:(Xt,or)=>{const tr=Xt[ht+"X"],dr=Xt[ht+"Y"];or.pointer.set(tr/or.size.width*2-1,-(dr/or.size.height)*2+1),or.raycaster.setFromCamera(or.pointer,or.camera)}}),It==null||It(Kt)}}),Bt.current.render(reactExports.createElement(jt,null,reactExports.createElement(ErrorBoundary,{set:zt},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:Vt})},rt)))))}),reactExports.useEffect(()=>{const Gt=Pt.current;if(Gt)return()=>unmountComponentAtNode(Gt)},[]);const Ht=dt?"none":"auto";return reactExports.createElement("div",_extends({ref:Ot,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ht,...lt}},At),reactExports.createElement("div",{ref:Ft,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Pt,style:{display:"block"}},it)))}),Canvas=reactExports.forwardRef(function(rt,it){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},rt,{ref:it})))});var __defProp$7=Object.defineProperty,__defNormalProp$2=(nt,rt,it)=>rt in nt?__defProp$7(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__publicField$2=(nt,rt,it)=>(__defNormalProp$2(nt,typeof rt!="symbol"?rt+"":rt,it),it);const _ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(nt,rt)=>(nt%rt+rt)%rt;let OrbitControls$1=class extends EventDispatcher{constructor(rt,it){super(),__publicField$2(this,"object"),__publicField$2(this,"domElement"),__publicField$2(this,"enabled",!0),__publicField$2(this,"target",new Vector3),__publicField$2(this,"minDistance",0),__publicField$2(this,"maxDistance",1/0),__publicField$2(this,"minZoom",0),__publicField$2(this,"maxZoom",1/0),__publicField$2(this,"minPolarAngle",0),__publicField$2(this,"maxPolarAngle",Math.PI),__publicField$2(this,"minAzimuthAngle",-1/0),__publicField$2(this,"maxAzimuthAngle",1/0),__publicField$2(this,"enableDamping",!1),__publicField$2(this,"dampingFactor",.05),__publicField$2(this,"enableZoom",!0),__publicField$2(this,"zoomSpeed",1),__publicField$2(this,"enableRotate",!0),__publicField$2(this,"rotateSpeed",1),__publicField$2(this,"enablePan",!0),__publicField$2(this,"panSpeed",1),__publicField$2(this,"screenSpacePanning",!0),__publicField$2(this,"keyPanSpeed",7),__publicField$2(this,"zoomToCursor",!1),__publicField$2(this,"autoRotate",!1),__publicField$2(this,"autoRotateSpeed",2),__publicField$2(this,"reverseOrbit",!1),__publicField$2(this,"reverseHorizontalOrbit",!1),__publicField$2(this,"reverseVerticalOrbit",!1),__publicField$2(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField$2(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField$2(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField$2(this,"target0"),__publicField$2(this,"position0"),__publicField$2(this,"zoom0"),__publicField$2(this,"_domElementKeyEvents",null),__publicField$2(this,"getPolarAngle"),__publicField$2(this,"getAzimuthalAngle"),__publicField$2(this,"setPolarAngle"),__publicField$2(this,"setAzimuthalAngle"),__publicField$2(this,"getDistance"),__publicField$2(this,"listenToKeyEvents"),__publicField$2(this,"stopListenToKeyEvents"),__publicField$2(this,"saveState"),__publicField$2(this,"reset"),__publicField$2(this,"update"),__publicField$2(this,"connect"),__publicField$2(this,"dispose"),this.object=rt,this.domElement=it,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>ft.phi,this.getAzimuthalAngle=()=>ft.theta,this.setPolarAngle=nr=>{let Ur=moduloWrapAround(nr,2*Math.PI),Mr=ft.phi;Mr<0&&(Mr+=2*Math.PI),Ur<0&&(Ur+=2*Math.PI);let rn=Math.abs(Ur-Mr);2*Math.PI-rn<rn&&(Ur<Mr?Ur+=2*Math.PI:Mr+=2*Math.PI),mt.phi=Ur-Mr,st.update()},this.setAzimuthalAngle=nr=>{let Ur=moduloWrapAround(nr,2*Math.PI),Mr=ft.theta;Mr<0&&(Mr+=2*Math.PI),Ur<0&&(Ur+=2*Math.PI);let rn=Math.abs(Ur-Mr);2*Math.PI-rn<rn&&(Ur<Mr?Ur+=2*Math.PI:Mr+=2*Math.PI),mt.theta=Ur-Mr,st.update()},this.getDistance=()=>st.object.position.distanceTo(st.target),this.listenToKeyEvents=nr=>{nr.addEventListener("keydown",Wn),this._domElementKeyEvents=nr},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Wn),this._domElementKeyEvents=null},this.saveState=()=>{st.target0.copy(st.target),st.position0.copy(st.object.position),st.zoom0=st.object.zoom},this.reset=()=>{st.target.copy(st.target0),st.object.position.copy(st.position0),st.object.zoom=st.zoom0,st.object.updateProjectionMatrix(),st.dispatchEvent(lt),st.update(),ht=dt.NONE},this.update=(()=>{const nr=new Vector3,Ur=new Vector3(0,1,0),Mr=new Quaternion().setFromUnitVectors(rt.up,Ur),rn=Mr.clone().invert(),Cn=new Vector3,Rr=new Quaternion,pn=2*Math.PI;return function(){const xr=st.object.position;Mr.setFromUnitVectors(rt.up,Ur),rn.copy(Mr).invert(),nr.copy(xr).sub(st.target),nr.applyQuaternion(Mr),ft.setFromVector3(nr),st.autoRotate&&ht===dt.NONE&&$t(Ot()),st.enableDamping?(ft.theta+=mt.theta*st.dampingFactor,ft.phi+=mt.phi*st.dampingFactor):(ft.theta+=mt.theta,ft.phi+=mt.phi);let jr=st.minAzimuthAngle,en=st.maxAzimuthAngle;isFinite(jr)&&isFinite(en)&&(jr<-Math.PI?jr+=pn:jr>Math.PI&&(jr-=pn),en<-Math.PI?en+=pn:en>Math.PI&&(en-=pn),jr<=en?ft.theta=Math.max(jr,Math.min(en,ft.theta)):ft.theta=ft.theta>(jr+en)/2?Math.max(jr,ft.theta):Math.min(en,ft.theta)),ft.phi=Math.max(st.minPolarAngle,Math.min(st.maxPolarAngle,ft.phi)),ft.makeSafe(),st.enableDamping===!0?st.target.addScaledVector(xt,st.dampingFactor):st.target.add(xt),st.zoomToCursor&&Ft||st.object.isOrthographicCamera?ft.radius=Xt(ft.radius):ft.radius=Xt(ft.radius*gt),nr.setFromSpherical(ft),nr.applyQuaternion(rn),xr.copy(st.target).add(nr),st.object.matrixAutoUpdate||st.object.updateMatrix(),st.object.lookAt(st.target),st.enableDamping===!0?(mt.theta*=1-st.dampingFactor,mt.phi*=1-st.dampingFactor,xt.multiplyScalar(1-st.dampingFactor)):(mt.set(0,0,0),xt.set(0,0,0));let fn=!1;if(st.zoomToCursor&&Ft){let Vn=null;if(st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera){const Yn=nr.length();Vn=Xt(Yn*gt);const Hn=Yn-Vn;st.object.position.addScaledVector(Dt,Hn),st.object.updateMatrixWorld()}else if(st.object.isOrthographicCamera){const Yn=new Vector3(jt.x,jt.y,0);Yn.unproject(st.object),st.object.zoom=Math.max(st.minZoom,Math.min(st.maxZoom,st.object.zoom/gt)),st.object.updateProjectionMatrix(),fn=!0;const Hn=new Vector3(jt.x,jt.y,0);Hn.unproject(st.object),st.object.position.sub(Hn).add(Yn),st.object.updateMatrixWorld(),Vn=nr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),st.zoomToCursor=!1;Vn!==null&&(st.screenSpacePanning?st.target.set(0,0,-1).transformDirection(st.object.matrix).multiplyScalar(Vn).add(st.object.position):(_ray.origin.copy(st.object.position),_ray.direction.set(0,0,-1).transformDirection(st.object.matrix),Math.abs(st.object.up.dot(_ray.direction))<TILT_LIMIT?rt.lookAt(st.target):(_plane.setFromNormalAndCoplanarPoint(st.object.up,st.target),_ray.intersectPlane(_plane,st.target))))}else st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera&&(fn=gt!==1,fn&&(st.object.zoom=Math.max(st.minZoom,Math.min(st.maxZoom,st.object.zoom/gt)),st.object.updateProjectionMatrix()));return gt=1,Ft=!1,fn||Cn.distanceToSquared(st.object.position)>pt||8*(1-Rr.dot(st.object.quaternion))>pt?(st.dispatchEvent(lt),Cn.copy(st.object.position),Rr.copy(st.object.quaternion),fn=!1,!0):!1}})(),this.connect=nr=>{nr===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),st.domElement=nr,st.domElement.style.touchAction="none",st.domElement.addEventListener("contextmenu",qn),st.domElement.addEventListener("pointerdown",pr),st.domElement.addEventListener("pointercancel",zr),st.domElement.addEventListener("wheel",yn)},this.dispose=()=>{var nr,Ur,Mr,rn,Cn,Rr;(nr=st.domElement)==null||nr.removeEventListener("contextmenu",qn),(Ur=st.domElement)==null||Ur.removeEventListener("pointerdown",pr),(Mr=st.domElement)==null||Mr.removeEventListener("pointercancel",zr),(rn=st.domElement)==null||rn.removeEventListener("wheel",yn),(Cn=st.domElement)==null||Cn.ownerDocument.removeEventListener("pointermove",Vr),(Rr=st.domElement)==null||Rr.ownerDocument.removeEventListener("pointerup",Wr),st._domElementKeyEvents!==null&&st._domElementKeyEvents.removeEventListener("keydown",Wn)};const st=this,lt={type:"change"},ct={type:"start"},ut={type:"end"},dt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ht=dt.NONE;const pt=1e-6,ft=new Spherical,mt=new Spherical;let gt=1;const xt=new Vector3,yt=new Vector2,vt=new Vector2,St=new Vector2,Et=new Vector2,wt=new Vector2,Rt=new Vector2,Tt=new Vector2,It=new Vector2,At=new Vector2,Dt=new Vector3,jt=new Vector2;let Ft=!1;const Lt=[],Pt={};function Ot(){return 2*Math.PI/60/60*st.autoRotateSpeed}function Nt(){return Math.pow(.95,st.zoomSpeed)}function $t(nr){st.reverseOrbit||st.reverseHorizontalOrbit?mt.theta+=nr:mt.theta-=nr}function Vt(nr){st.reverseOrbit||st.reverseVerticalOrbit?mt.phi+=nr:mt.phi-=nr}const Ut=(()=>{const nr=new Vector3;return function(Mr,rn){nr.setFromMatrixColumn(rn,0),nr.multiplyScalar(-Mr),xt.add(nr)}})(),zt=(()=>{const nr=new Vector3;return function(Mr,rn){st.screenSpacePanning===!0?nr.setFromMatrixColumn(rn,1):(nr.setFromMatrixColumn(rn,0),nr.crossVectors(st.object.up,nr)),nr.multiplyScalar(Mr),xt.add(nr)}})(),Bt=(()=>{const nr=new Vector3;return function(Mr,rn){const Cn=st.domElement;if(Cn&&st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera){const Rr=st.object.position;nr.copy(Rr).sub(st.target);let pn=nr.length();pn*=Math.tan(st.object.fov/2*Math.PI/180),Ut(2*Mr*pn/Cn.clientHeight,st.object.matrix),zt(2*rn*pn/Cn.clientHeight,st.object.matrix)}else Cn&&st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?(Ut(Mr*(st.object.right-st.object.left)/st.object.zoom/Cn.clientWidth,st.object.matrix),zt(rn*(st.object.top-st.object.bottom)/st.object.zoom/Cn.clientHeight,st.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),st.enablePan=!1)}})();function Ht(nr){st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera||st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?gt/=nr:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),st.enableZoom=!1)}function Gt(nr){st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera||st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?gt*=nr:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),st.enableZoom=!1)}function Kt(nr){if(!st.zoomToCursor||!st.domElement)return;Ft=!0;const Ur=st.domElement.getBoundingClientRect(),Mr=nr.clientX-Ur.left,rn=nr.clientY-Ur.top,Cn=Ur.width,Rr=Ur.height;jt.x=Mr/Cn*2-1,jt.y=-(rn/Rr)*2+1,Dt.set(jt.x,jt.y,1).unproject(st.object).sub(st.object.position).normalize()}function Xt(nr){return Math.max(st.minDistance,Math.min(st.maxDistance,nr))}function or(nr){yt.set(nr.clientX,nr.clientY)}function tr(nr){Kt(nr),Tt.set(nr.clientX,nr.clientY)}function dr(nr){Et.set(nr.clientX,nr.clientY)}function fr(nr){vt.set(nr.clientX,nr.clientY),St.subVectors(vt,yt).multiplyScalar(st.rotateSpeed);const Ur=st.domElement;Ur&&($t(2*Math.PI*St.x/Ur.clientHeight),Vt(2*Math.PI*St.y/Ur.clientHeight)),yt.copy(vt),st.update()}function Sr(nr){It.set(nr.clientX,nr.clientY),At.subVectors(It,Tt),At.y>0?Ht(Nt()):At.y<0&&Gt(Nt()),Tt.copy(It),st.update()}function vr(nr){wt.set(nr.clientX,nr.clientY),Rt.subVectors(wt,Et).multiplyScalar(st.panSpeed),Bt(Rt.x,Rt.y),Et.copy(wt),st.update()}function mr(nr){Kt(nr),nr.deltaY<0?Gt(Nt()):nr.deltaY>0&&Ht(Nt()),st.update()}function hr(nr){let Ur=!1;switch(nr.code){case st.keys.UP:Bt(0,st.keyPanSpeed),Ur=!0;break;case st.keys.BOTTOM:Bt(0,-st.keyPanSpeed),Ur=!0;break;case st.keys.LEFT:Bt(st.keyPanSpeed,0),Ur=!0;break;case st.keys.RIGHT:Bt(-st.keyPanSpeed,0),Ur=!0;break}Ur&&(nr.preventDefault(),st.update())}function gr(){if(Lt.length==1)yt.set(Lt[0].pageX,Lt[0].pageY);else{const nr=.5*(Lt[0].pageX+Lt[1].pageX),Ur=.5*(Lt[0].pageY+Lt[1].pageY);yt.set(nr,Ur)}}function lr(){if(Lt.length==1)Et.set(Lt[0].pageX,Lt[0].pageY);else{const nr=.5*(Lt[0].pageX+Lt[1].pageX),Ur=.5*(Lt[0].pageY+Lt[1].pageY);Et.set(nr,Ur)}}function Ir(){const nr=Lt[0].pageX-Lt[1].pageX,Ur=Lt[0].pageY-Lt[1].pageY,Mr=Math.sqrt(nr*nr+Ur*Ur);Tt.set(0,Mr)}function wr(){st.enableZoom&&Ir(),st.enablePan&&lr()}function Fr(){st.enableZoom&&Ir(),st.enableRotate&&gr()}function $r(nr){if(Lt.length==1)vt.set(nr.pageX,nr.pageY);else{const Mr=Cr(nr),rn=.5*(nr.pageX+Mr.x),Cn=.5*(nr.pageY+Mr.y);vt.set(rn,Cn)}St.subVectors(vt,yt).multiplyScalar(st.rotateSpeed);const Ur=st.domElement;Ur&&($t(2*Math.PI*St.x/Ur.clientHeight),Vt(2*Math.PI*St.y/Ur.clientHeight)),yt.copy(vt)}function hn(nr){if(Lt.length==1)wt.set(nr.pageX,nr.pageY);else{const Ur=Cr(nr),Mr=.5*(nr.pageX+Ur.x),rn=.5*(nr.pageY+Ur.y);wt.set(Mr,rn)}Rt.subVectors(wt,Et).multiplyScalar(st.panSpeed),Bt(Rt.x,Rt.y),Et.copy(wt)}function Zr(nr){const Ur=Cr(nr),Mr=nr.pageX-Ur.x,rn=nr.pageY-Ur.y,Cn=Math.sqrt(Mr*Mr+rn*rn);It.set(0,Cn),At.set(0,Math.pow(It.y/Tt.y,st.zoomSpeed)),Ht(At.y),Tt.copy(It)}function Qt(nr){st.enableZoom&&Zr(nr),st.enablePan&&hn(nr)}function Jt(nr){st.enableZoom&&Zr(nr),st.enableRotate&&$r(nr)}function pr(nr){var Ur,Mr;st.enabled!==!1&&(Lt.length===0&&((Ur=st.domElement)==null||Ur.ownerDocument.addEventListener("pointermove",Vr),(Mr=st.domElement)==null||Mr.ownerDocument.addEventListener("pointerup",Wr)),Gr(nr),nr.pointerType==="touch"?Mn(nr):ln(nr))}function Vr(nr){st.enabled!==!1&&(nr.pointerType==="touch"?sn(nr):xn(nr))}function Wr(nr){var Ur,Mr,rn;qr(nr),Lt.length===0&&((Ur=st.domElement)==null||Ur.releasePointerCapture(nr.pointerId),(Mr=st.domElement)==null||Mr.ownerDocument.removeEventListener("pointermove",Vr),(rn=st.domElement)==null||rn.ownerDocument.removeEventListener("pointerup",Wr)),st.dispatchEvent(ut),ht=dt.NONE}function zr(nr){qr(nr)}function ln(nr){let Ur;switch(nr.button){case 0:Ur=st.mouseButtons.LEFT;break;case 1:Ur=st.mouseButtons.MIDDLE;break;case 2:Ur=st.mouseButtons.RIGHT;break;default:Ur=-1}switch(Ur){case MOUSE.DOLLY:if(st.enableZoom===!1)return;tr(nr),ht=dt.DOLLY;break;case MOUSE.ROTATE:if(nr.ctrlKey||nr.metaKey||nr.shiftKey){if(st.enablePan===!1)return;dr(nr),ht=dt.PAN}else{if(st.enableRotate===!1)return;or(nr),ht=dt.ROTATE}break;case MOUSE.PAN:if(nr.ctrlKey||nr.metaKey||nr.shiftKey){if(st.enableRotate===!1)return;or(nr),ht=dt.ROTATE}else{if(st.enablePan===!1)return;dr(nr),ht=dt.PAN}break;default:ht=dt.NONE}ht!==dt.NONE&&st.dispatchEvent(ct)}function xn(nr){if(st.enabled!==!1)switch(ht){case dt.ROTATE:if(st.enableRotate===!1)return;fr(nr);break;case dt.DOLLY:if(st.enableZoom===!1)return;Sr(nr);break;case dt.PAN:if(st.enablePan===!1)return;vr(nr);break}}function yn(nr){st.enabled===!1||st.enableZoom===!1||ht!==dt.NONE&&ht!==dt.ROTATE||(nr.preventDefault(),st.dispatchEvent(ct),mr(nr),st.dispatchEvent(ut))}function Wn(nr){st.enabled===!1||st.enablePan===!1||hr(nr)}function Mn(nr){switch(wn(nr),Lt.length){case 1:switch(st.touches.ONE){case TOUCH.ROTATE:if(st.enableRotate===!1)return;gr(),ht=dt.TOUCH_ROTATE;break;case TOUCH.PAN:if(st.enablePan===!1)return;lr(),ht=dt.TOUCH_PAN;break;default:ht=dt.NONE}break;case 2:switch(st.touches.TWO){case TOUCH.DOLLY_PAN:if(st.enableZoom===!1&&st.enablePan===!1)return;wr(),ht=dt.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(st.enableZoom===!1&&st.enableRotate===!1)return;Fr(),ht=dt.TOUCH_DOLLY_ROTATE;break;default:ht=dt.NONE}break;default:ht=dt.NONE}ht!==dt.NONE&&st.dispatchEvent(ct)}function sn(nr){switch(wn(nr),ht){case dt.TOUCH_ROTATE:if(st.enableRotate===!1)return;$r(nr),st.update();break;case dt.TOUCH_PAN:if(st.enablePan===!1)return;hn(nr),st.update();break;case dt.TOUCH_DOLLY_PAN:if(st.enableZoom===!1&&st.enablePan===!1)return;Qt(nr),st.update();break;case dt.TOUCH_DOLLY_ROTATE:if(st.enableZoom===!1&&st.enableRotate===!1)return;Jt(nr),st.update();break;default:ht=dt.NONE}}function qn(nr){st.enabled!==!1&&nr.preventDefault()}function Gr(nr){Lt.push(nr)}function qr(nr){delete Pt[nr.pointerId];for(let Ur=0;Ur<Lt.length;Ur++)if(Lt[Ur].pointerId==nr.pointerId){Lt.splice(Ur,1);return}}function wn(nr){let Ur=Pt[nr.pointerId];Ur===void 0&&(Ur=new Vector2,Pt[nr.pointerId]=Ur),Ur.set(nr.pageX,nr.pageY)}function Cr(nr){const Ur=nr.pointerId===Lt[0].pointerId?Lt[1]:Lt[0];return Pt[Ur.pointerId]}it!==void 0&&this.connect(it),this.update()}};const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},OrbitControls=reactExports.forwardRef(({makeDefault:nt,camera:rt,regress:it,domElement:st,enableDamping:lt=!0,keyEvents:ct=!1,onChange:ut,onStart:dt,onEnd:ht,...pt},ft)=>{const mt=useThree(At=>At.invalidate),gt=useThree(At=>At.camera),xt=useThree(At=>At.gl),yt=useThree(At=>At.events),vt=useThree(At=>At.setEvents),St=useThree(At=>At.set),Et=useThree(At=>At.get),wt=useThree(At=>At.performance),Rt=rt||gt,Tt=st||yt.connected||xt.domElement,It=reactExports.useMemo(()=>new OrbitControls$1(Rt),[Rt]);return useFrame(()=>{It.enabled&&It.update()},-1),reactExports.useEffect(()=>(ct&&It.connect(ct===!0?Tt:ct),It.connect(Tt),()=>void It.dispose()),[ct,Tt,it,It,mt]),reactExports.useEffect(()=>{const At=Ft=>{mt(),it&&wt.regress(),ut&&ut(Ft)},Dt=Ft=>{dt&&dt(Ft)},jt=Ft=>{ht&&ht(Ft)};return It.addEventListener("change",At),It.addEventListener("start",Dt),It.addEventListener("end",jt),()=>{It.removeEventListener("start",Dt),It.removeEventListener("end",jt),It.removeEventListener("change",At)}},[ut,dt,ht,It,mt,vt]),reactExports.useEffect(()=>{if(nt){const At=Et().controls;return St({controls:It}),()=>St({controls:At})}},[nt,It]),reactExports.createElement("primitive",_extends({ref:ft,object:It,enableDamping:lt},pt))}),ContactShadows=reactExports.forwardRef(({scale:nt=10,frames:rt=1/0,opacity:it=1,width:st=1,height:lt=1,blur:ct=1,near:ut=0,far:dt=10,resolution:ht=512,smooth:pt=!0,color:ft="#000000",depthWrite:mt=!1,renderOrder:gt,...xt},yt)=>{const vt=reactExports.useRef(null),St=useThree($t=>$t.scene),Et=useThree($t=>$t.gl),wt=reactExports.useRef(null);st=st*(Array.isArray(nt)?nt[0]:nt||1),lt=lt*(Array.isArray(nt)?nt[1]:nt||1);const[Rt,Tt,It,At,Dt,jt,Ft]=reactExports.useMemo(()=>{const $t=new WebGLRenderTarget(ht,ht),Vt=new WebGLRenderTarget(ht,ht);Vt.texture.generateMipmaps=$t.texture.generateMipmaps=!1;const Ut=new PlaneGeometry(st,lt).rotateX(Math.PI/2),zt=new Mesh(Ut),Bt=new MeshDepthMaterial;Bt.depthTest=Bt.depthWrite=!1,Bt.onBeforeCompile=Kt=>{Kt.uniforms={...Kt.uniforms,ucolor:{value:new Color(ft)}},Kt.fragmentShader=Kt.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Kt.fragmentShader=Kt.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ht=new ShaderMaterial(HorizontalBlurShader),Gt=new ShaderMaterial(VerticalBlurShader);return Gt.depthTest=Ht.depthTest=!1,[$t,Ut,Bt,zt,Ht,Gt,Vt]},[ht,st,lt,nt,ft]),Lt=$t=>{At.visible=!0,At.material=Dt,Dt.uniforms.tDiffuse.value=Rt.texture,Dt.uniforms.h.value=$t*1/256,Et.setRenderTarget(Ft),Et.render(At,wt.current),At.material=jt,jt.uniforms.tDiffuse.value=Ft.texture,jt.uniforms.v.value=$t*1/256,Et.setRenderTarget(Rt),Et.render(At,wt.current),At.visible=!1};let Pt=0,Ot,Nt;return useFrame(()=>{wt.current&&(rt===1/0||Pt<rt)&&(Pt++,Ot=St.background,Nt=St.overrideMaterial,vt.current.visible=!1,St.background=null,St.overrideMaterial=It,Et.setRenderTarget(Rt),Et.render(St,wt.current),Lt(ct),pt&&Lt(ct*.4),Et.setRenderTarget(null),vt.current.visible=!0,St.overrideMaterial=Nt,St.background=Ot)}),reactExports.useImperativeHandle(yt,()=>vt.current,[]),reactExports.createElement("group",_extends({"rotation-x":Math.PI/2},xt,{ref:vt}),reactExports.createElement("mesh",{renderOrder:gt,geometry:Tt,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},reactExports.createElement("meshBasicMaterial",{transparent:!0,map:Rt.texture,opacity:it,depthWrite:mt})),reactExports.createElement("orthographicCamera",{ref:wt,args:[-st/2,st/2,lt/2,-lt/2,ut,dt]}))}),scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,st){let lt=Promise.resolve();if(it&&it.length>0){const ct=document.getElementsByTagName("link");lt=Promise.all(it.map(ut=>{if(ut=assetsURL(ut),ut in seen)return;seen[ut]=!0;const dt=ut.endsWith(".css"),ht=dt?'[rel="stylesheet"]':"";if(!!st)for(let mt=ct.length-1;mt>=0;mt--){const gt=ct[mt];if(gt.href===ut&&(!dt||gt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ut}"]${ht}`))return;const ft=document.createElement("link");if(ft.rel=dt?"stylesheet":scriptRel,dt||(ft.as="script",ft.crossOrigin=""),ft.href=ut,document.head.appendChild(ft),dt)return new Promise((mt,gt)=>{ft.addEventListener("load",mt),ft.addEventListener("error",()=>gt(new Error(`Unable to preload CSS for ${ut}`)))})}))}return lt.then(()=>rt()).catch(ct=>{const ut=new Event("vite:preloadError",{cancelable:!0});if(ut.payload=ct,window.dispatchEvent(ut),!ut.defaultPrevented)throw ct})},_object_pattern=/^[og]\s*(.+)?/,_material_library_pattern=/^mtllib /,_material_use_pattern=/^usemtl /,_map_use_pattern=/^usemap /,_face_vertex_data_separator_pattern=/\s+/,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_ab=new Vector3,_cb=new Vector3,_color=new Color;function ParserState(){const nt={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(rt,it){if(this.object&&this.object.fromDeclaration===!1){this.object.name=rt,this.object.fromDeclaration=it!==!1;return}const st=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:rt||"",fromDeclaration:it!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(lt,ct){const ut=this._finalize(!1);ut&&(ut.inherited||ut.groupCount<=0)&&this.materials.splice(ut.index,1);const dt={index:this.materials.length,name:lt||"",mtllib:Array.isArray(ct)&&ct.length>0?ct[ct.length-1]:"",smooth:ut!==void 0?ut.smooth:this.smooth,groupStart:ut!==void 0?ut.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(ht){const pt={index:typeof ht=="number"?ht:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return pt.clone=this.clone.bind(pt),pt}};return this.materials.push(dt),dt},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(lt){const ct=this.currentMaterial();if(ct&&ct.groupEnd===-1&&(ct.groupEnd=this.geometry.vertices.length/3,ct.groupCount=ct.groupEnd-ct.groupStart,ct.inherited=!1),lt&&this.materials.length>1)for(let ut=this.materials.length-1;ut>=0;ut--)this.materials[ut].groupCount<=0&&this.materials.splice(ut,1);return lt&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),ct}},st&&st.name&&typeof st.clone=="function"){const lt=st.clone(0);lt.inherited=!0,this.object.materials.push(lt)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/3)*3},parseNormalIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/3)*3},parseUVIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/2)*2},addVertex:function(rt,it,st){const lt=this.vertices,ct=this.object.geometry.vertices;ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),ct.push(lt[it+0],lt[it+1],lt[it+2]),ct.push(lt[st+0],lt[st+1],lt[st+2])},addVertexPoint:function(rt){const it=this.vertices;this.object.geometry.vertices.push(it[rt+0],it[rt+1],it[rt+2])},addVertexLine:function(rt){const it=this.vertices;this.object.geometry.vertices.push(it[rt+0],it[rt+1],it[rt+2])},addNormal:function(rt,it,st){const lt=this.normals,ct=this.object.geometry.normals;ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),ct.push(lt[it+0],lt[it+1],lt[it+2]),ct.push(lt[st+0],lt[st+1],lt[st+2])},addFaceNormal:function(rt,it,st){const lt=this.vertices,ct=this.object.geometry.normals;_vA.fromArray(lt,rt),_vB.fromArray(lt,it),_vC.fromArray(lt,st),_cb.subVectors(_vC,_vB),_ab.subVectors(_vA,_vB),_cb.cross(_ab),_cb.normalize(),ct.push(_cb.x,_cb.y,_cb.z),ct.push(_cb.x,_cb.y,_cb.z),ct.push(_cb.x,_cb.y,_cb.z)},addColor:function(rt,it,st){const lt=this.colors,ct=this.object.geometry.colors;lt[rt]!==void 0&&ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),lt[it]!==void 0&&ct.push(lt[it+0],lt[it+1],lt[it+2]),lt[st]!==void 0&&ct.push(lt[st+0],lt[st+1],lt[st+2])},addUV:function(rt,it,st){const lt=this.uvs,ct=this.object.geometry.uvs;ct.push(lt[rt+0],lt[rt+1]),ct.push(lt[it+0],lt[it+1]),ct.push(lt[st+0],lt[st+1])},addDefaultUV:function(){const rt=this.object.geometry.uvs;rt.push(0,0),rt.push(0,0),rt.push(0,0)},addUVLine:function(rt){const it=this.uvs;this.object.geometry.uvs.push(it[rt+0],it[rt+1])},addFace:function(rt,it,st,lt,ct,ut,dt,ht,pt){const ft=this.vertices.length;let mt=this.parseVertexIndex(rt,ft),gt=this.parseVertexIndex(it,ft),xt=this.parseVertexIndex(st,ft);if(this.addVertex(mt,gt,xt),this.addColor(mt,gt,xt),dt!==void 0&&dt!==""){const yt=this.normals.length;mt=this.parseNormalIndex(dt,yt),gt=this.parseNormalIndex(ht,yt),xt=this.parseNormalIndex(pt,yt),this.addNormal(mt,gt,xt)}else this.addFaceNormal(mt,gt,xt);if(lt!==void 0&&lt!==""){const yt=this.uvs.length;mt=this.parseUVIndex(lt,yt),gt=this.parseUVIndex(ct,yt),xt=this.parseUVIndex(ut,yt),this.addUV(mt,gt,xt),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(rt){this.object.geometry.type="Points";const it=this.vertices.length;for(let st=0,lt=rt.length;st<lt;st++){const ct=this.parseVertexIndex(rt[st],it);this.addVertexPoint(ct),this.addColor(ct)}},addLineGeometry:function(rt,it){this.object.geometry.type="Line";const st=this.vertices.length,lt=this.uvs.length;for(let ct=0,ut=rt.length;ct<ut;ct++)this.addVertexLine(this.parseVertexIndex(rt[ct],st));for(let ct=0,ut=it.length;ct<ut;ct++)this.addUVLine(this.parseUVIndex(it[ct],lt))}};return nt.startObject("",!1),nt}class OBJLoader extends Loader{constructor(rt){super(rt),this.materials=null}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(dt))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}setMaterials(rt){return this.materials=rt,this}parse(rt){const it=new ParserState;rt.indexOf(`\r
`)!==-1&&(rt=rt.replace(/\r\n/g,`
`)),rt.indexOf(`\\
`)!==-1&&(rt=rt.replace(/\\\n/g,""));const st=rt.split(`
`);let lt=[];for(let dt=0,ht=st.length;dt<ht;dt++){const pt=st[dt].trimStart();if(pt.length===0)continue;const ft=pt.charAt(0);if(ft!=="#")if(ft==="v"){const mt=pt.split(_face_vertex_data_separator_pattern);switch(mt[0]){case"v":it.vertices.push(parseFloat(mt[1]),parseFloat(mt[2]),parseFloat(mt[3])),mt.length>=7?(_color.setRGB(parseFloat(mt[4]),parseFloat(mt[5]),parseFloat(mt[6])).convertSRGBToLinear(),it.colors.push(_color.r,_color.g,_color.b)):it.colors.push(void 0,void 0,void 0);break;case"vn":it.normals.push(parseFloat(mt[1]),parseFloat(mt[2]),parseFloat(mt[3]));break;case"vt":it.uvs.push(parseFloat(mt[1]),parseFloat(mt[2]));break}}else if(ft==="f"){const gt=pt.slice(1).trim().split(_face_vertex_data_separator_pattern),xt=[];for(let vt=0,St=gt.length;vt<St;vt++){const Et=gt[vt];if(Et.length>0){const wt=Et.split("/");xt.push(wt)}}const yt=xt[0];for(let vt=1,St=xt.length-1;vt<St;vt++){const Et=xt[vt],wt=xt[vt+1];it.addFace(yt[0],Et[0],wt[0],yt[1],Et[1],wt[1],yt[2],Et[2],wt[2])}}else if(ft==="l"){const mt=pt.substring(1).trim().split(" ");let gt=[];const xt=[];if(pt.indexOf("/")===-1)gt=mt;else for(let yt=0,vt=mt.length;yt<vt;yt++){const St=mt[yt].split("/");St[0]!==""&&gt.push(St[0]),St[1]!==""&&xt.push(St[1])}it.addLineGeometry(gt,xt)}else if(ft==="p"){const gt=pt.slice(1).trim().split(" ");it.addPointGeometry(gt)}else if((lt=_object_pattern.exec(pt))!==null){const mt=(" "+lt[0].slice(1).trim()).slice(1);it.startObject(mt)}else if(_material_use_pattern.test(pt))it.object.startMaterial(pt.substring(7).trim(),it.materialLibraries);else if(_material_library_pattern.test(pt))it.materialLibraries.push(pt.substring(7).trim());else if(_map_use_pattern.test(pt))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(ft==="s"){if(lt=pt.split(" "),lt.length>1){const gt=lt[1].trim().toLowerCase();it.object.smooth=gt!=="0"&&gt!=="off"}else it.object.smooth=!0;const mt=it.object.currentMaterial();mt&&(mt.smooth=it.object.smooth)}else{if(pt==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+pt+'"')}}it.finalize();const ct=new Group;if(ct.materialLibraries=[].concat(it.materialLibraries),!(it.objects.length===1&&it.objects[0].geometry.vertices.length===0)===!0)for(let dt=0,ht=it.objects.length;dt<ht;dt++){const pt=it.objects[dt],ft=pt.geometry,mt=pt.materials,gt=ft.type==="Line",xt=ft.type==="Points";let yt=!1;if(ft.vertices.length===0)continue;const vt=new BufferGeometry;vt.setAttribute("position",new Float32BufferAttribute(ft.vertices,3)),ft.normals.length>0&&vt.setAttribute("normal",new Float32BufferAttribute(ft.normals,3)),ft.colors.length>0&&(yt=!0,vt.setAttribute("color",new Float32BufferAttribute(ft.colors,3))),ft.hasUVIndices===!0&&vt.setAttribute("uv",new Float32BufferAttribute(ft.uvs,2));const St=[];for(let wt=0,Rt=mt.length;wt<Rt;wt++){const Tt=mt[wt],It=Tt.name+"_"+Tt.smooth+"_"+yt;let At=it.materials[It];if(this.materials!==null){if(At=this.materials.create(Tt.name),gt&&At&&!(At instanceof LineBasicMaterial)){const Dt=new LineBasicMaterial;Material.prototype.copy.call(Dt,At),Dt.color.copy(At.color),At=Dt}else if(xt&&At&&!(At instanceof PointsMaterial)){const Dt=new PointsMaterial({size:10,sizeAttenuation:!1});Material.prototype.copy.call(Dt,At),Dt.color.copy(At.color),Dt.map=At.map,At=Dt}}At===void 0&&(gt?At=new LineBasicMaterial:xt?At=new PointsMaterial({size:1,sizeAttenuation:!1}):At=new MeshPhongMaterial,At.name=Tt.name,At.flatShading=!Tt.smooth,At.vertexColors=yt,it.materials[It]=At),St.push(At)}let Et;if(St.length>1){for(let wt=0,Rt=mt.length;wt<Rt;wt++){const Tt=mt[wt];vt.addGroup(Tt.groupStart,Tt.groupCount,wt)}gt?Et=new LineSegments(vt,St):xt?Et=new Points(vt,St):Et=new Mesh(vt,St)}else gt?Et=new LineSegments(vt,St[0]):xt?Et=new Points(vt,St[0]):Et=new Mesh(vt,St[0]);Et.name=pt.name,ct.add(Et)}else if(it.vertices.length>0){const dt=new PointsMaterial({size:1,sizeAttenuation:!1}),ht=new BufferGeometry;ht.setAttribute("position",new Float32BufferAttribute(it.vertices,3)),it.colors.length>0&&it.colors[0]!==void 0&&(ht.setAttribute("color",new Float32BufferAttribute(it.colors,3)),dt.vertexColors=!0);const pt=new Points(ht,dt);ct.add(pt)}return ct}}const ThreeD=()=>{const nt=Recoil_index_20(selectedInbodyState),rt=Recoil_index_20(targetInbodyState),it=Recoil_index_20(toggleModelState),st=Recoil_index_20(pinNumberState),lt=Recoil_index_24(modalState),ct=Recoil_index_20(userState),[ut,dt]=reactExports.useState(""),ht=Recoil_index_20(muscleRoundState);Recoil_index_20(isValidMuscleState);const pt=gt=>ht[gt];reactExports.useEffect(()=>{it==="left"?dt(`/3D/${ct.info.gender}_${Math.round(nt.weight/10)*10}_${pt(nt.muscle)}_.obj`):rt!=null&&rt.weight?dt(`/3D/${ct.info.gender}_${Math.round(rt.weight/10)*10}_${pt(rt.muscle)}_.obj`):dt(`/3D/${ct.info.gender}_${Math.round(nt.weight/10)*10}_${pt(nt.muscle)}_.obj`)},[nt,rt,it]);const ft=useLoader(OBJLoader,ut),mt=()=>{lt({type:"pinNumber",data:""})};return jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center -z-10",children:[jsxRuntimeExports.jsxs(Canvas,{style:{width:"100vw",height:"75vh",backgroundColor:"#E5E7EB",filter:st?null:"blur(20px)"},camera:{position:[0,0,8],fov:50},children:[jsxRuntimeExports.jsx(OrbitControls,{autoRotate:!0,autoRotateSpeed:4}),jsxRuntimeExports.jsx("directionalLight",{}),jsxRuntimeExports.jsx("hemisphereLight",{color:"white",groundColor:"brown",intensity:.75}),jsxRuntimeExports.jsx("spotLight",{position:[50,50,10],angle:.15,penumbra:1}),jsxRuntimeExports.jsx(ContactShadows,{scale:20,position:[0,-2.7,0],blur:2,far:100}),jsxRuntimeExports.jsx("primitive",{scale:3,object:ft,position:[0,-2.7,0]})]}),jsxRuntimeExports.jsx("div",{className:st?"hidden":"absolute flex items-center justify-center h-16 bg-white border-2 rounded-full",onClick:mt,children:jsxRuntimeExports.jsx(LockClosedIcon$3,{className:"w-16 h-12"})})]})},InBodyNodata=()=>{const nt=Recoil_index_24(modalState),rt=()=>{nt({type:"modelDetail",data:""})};return jsxRuntimeExports.jsx("div",{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg",children:["아래의"," ",jsxRuntimeExports.jsx("span",{onClick:rt,className:"font-semibold text-teal-700",children:"상세 정보 보기"}),"를 클릭 후"]}),jsxRuntimeExports.jsx("p",{className:"text-lg",children:"인바디 정보를 등록해주세요"})]})})},LoadingSpinner=()=>jsxRuntimeExports.jsx("div",{className:"fixed inset-x-0 overflow-auto transform -translate-y-1/2 top-1/2",children:jsxRuntimeExports.jsx("img",{src:"/loading/로고흰색배경.gif",alt:"",className:"w-1/2 mx-auto"})}),HomePage=()=>{const[nt,rt]=Recoil_index_22(modalState),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),[lt,ct]=Recoil_index_22(inbodyListState),[ut,dt]=Recoil_index_22(selectedInbodyState),ht=Recoil_index_20(loadingState),pt=Recoil_index_20(toggleModelState),ft=()=>{rt({type:"modelDetail",data:""})},mt=()=>{axios({method:"get",url:`${it}api/inbody/${st.info.userId}`,headers:{Authorization:`Bearer ${st.token}`}}).then(gt=>{ct(gt.data.data_body);const xt=gt.data.data_body[gt.data.data_body.length-1].inbody_id;axios({method:"get",url:`${it}api/inbody/${st.info.userId}/${xt}`,headers:{Authorization:`Bearer ${st.token}`}}).then(yt=>{dt(yt.data.data_body)}).catch(yt=>{console.log(yt)})}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{pt==="left"&&mt()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ht&&jsxRuntimeExports.jsx(LoadingSpinner,{}),!ht&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:"/fullLogo.png",alt:"",className:"h-14"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"현재",rightTitle:"목표",state:toggleModelState}),lt.length?jsxRuntimeExports.jsx(ThreeD,{}):jsxRuntimeExports.jsx(InBodyNodata,{}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 rounded-md",children:jsxRuntimeExports.jsx(Button,{btnCss:"w-full",buttonName:pt==="left"?"상세 정보 보기":"데이터 입력",onClick:ft})})})]})]})},PasswordChangePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),{watch:it,getValues:st,register:lt,handleSubmit:ct,reset:ut,setError:dt,clearErrors:ht,formState:{errors:pt}}=useForm({mode:"onChange",defaultValues:{currentPassword:"",newPassword:"",newPasswordCheck:""}});reactExports.useEffect(()=>{it("newPassword")!==it("newPasswordCheck")&&it("newPasswordCheck")?dt("newPasswordCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):ht("newPasswordCheck")},[it("newPassword"),it("newPasswordCheck")]);const ft=mt=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/password`,headers:{Authorization:`Bearer ${rt.token}`},data:{current_password:mt.currentPassword,new_password:mt.newPassword,new_passwordCheck:mt.newPasswordCheck}}).then(gt=>{gt.data.data_header.success_code===0?(localStorage.clear(),window.location.reload("/")):(alert("비밀번호 변경 실패 재입력!!"),ut())})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"비밀번호 변경"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:ct(ft),className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"currentPassword",children:"현재 비밀번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"currentPassword",placeholder:"기존 비밀번호",type:"password",autoComplete:"on",...lt("currentPassword",{required:!0})}),jsxRuntimeExports.jsx("label",{htmlFor:"newPassword",children:"새 비밀번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPassword",type:"password",autoComplete:"on",placeholder:"새 비밀번호",...lt("newPassword",{required:!0,pattern:{value:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,20}$/,message:"영문, 숫자, 특수문자 포함 8 ~ 20자로 입력해주세요"}})}),pt.newPassword&&jsxRuntimeExports.jsx("p",{children:pt.newPassword.message}),jsxRuntimeExports.jsx("label",{htmlFor:"newPasswordCheck",children:"새 비밀번호 확인"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPasswordCheck",type:"password",autoComplete:"on",placeholder:"새 비밀번호 확인",...lt("newPasswordCheck",{required:!0,validate:{matchPassword:mt=>{const{newPassword:gt}=st();return gt===mt||"비밀번호가 일치하지 않습니다"}}})}),pt.newPasswordCheck&&jsxRuntimeExports.jsx("p",{children:pt.newPasswordCheck.message}),jsxRuntimeExports.jsx("input",{type:"submit",className:"p-2 text-white bg-teal-700 border rounded-md"})]})})]})},userHistoryState=Recoil_index_8({key:"userHistoryState",default:[]}),selectedHistoryListState=Recoil_index_8({key:"selectedHistoryListState",default:[]}),HistoryDetailBox=({data:nt})=>{const[rt,it]=reactExports.useState(!1),[st,lt]=Recoil_index_22(selectedHistoryListState),ct=["일","월","화","수","목","금","토"],ut=new Date(nt.date),dt=ct[ut.getDay()],[ht,pt]=reactExports.useState([]),ft=mt=>{st.includes(mt)?lt(st.filter(gt=>gt!==mt)):lt([...st,mt])};return reactExports.useEffect(()=>{const mt=nt.user_training_list.map(gt=>gt.category);pt([...new Set(mt)])},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:()=>it(!rt),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Description,{Title:`${ut.getMonth()}월 ${ut.getDate()}일 (${dt})`,subTitle:ht.join(" ")})}),rt?jsxRuntimeExports.jsx(ChevronUpIcon$1,{className:"w-6 h-6 my-auto"}):jsxRuntimeExports.jsx(ChevronDownIcon$1,{className:"w-6 h-6 my-auto"})]}),jsxRuntimeExports.jsx("div",{className:`${rt?"":"hidden"} flex flex-col gap-2 pt-2`,children:nt.user_training_list.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"gap-2",children:[jsxRuntimeExports.jsx("hr",{className:"pb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>ft(mt),checked:st.includes(mt),className:"w-5 h-5 mt-1 mr-2 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:mt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:mt.name})]}),mt.sets.map((xt,yt)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-sm text-gray-500 ps-1",children:[jsxRuntimeExports.jsxs("p",{children:[yt+1,"세트"]}),jsxRuntimeExports.jsxs("p",{children:[xt.kg,"kg"]}),jsxRuntimeExports.jsxs("p",{children:[xt.count,"회"]})]},yt))]})]})]},gt))})]})};HistoryDetailBox.propTypes={data:PropTypes.object};const HistoryList=()=>{const nt=Recoil_index_20(userHistoryState);return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 pb-4",children:nt.map((rt,it)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-lg",children:jsxRuntimeExports.jsx(HistoryDetailBox,{data:rt})},it))})},HistoryNoData=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-6 mt-48",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"운동 기록이 없습니다."}),jsxRuntimeExports.jsx("p",{children:"지금 바로 운동을 계획해보세요!"})]}),jsxRuntimeExports.jsx("div",{className:"w-1/2 p-2 font-semibold text-center text-teal-700 border border-teal-700 rounded-full",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx("button",{children:"운동하러 가기"})})})]}),TrainingLoadPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),{basepage:st}=useParams(),[lt,ct]=Recoil_index_22(userHistoryState),ut=Recoil_index_20(selectedHistoryListState),dt=Recoil_index_25(selectedHistoryListState),ht=Recoil_index_20(selectedRoutineState),pt=useNavigate(),ft=async()=>{await axios.post(`${nt}api/management/training/add?year=${it[0]}&month=${it[1]}&day=${it[2]}`,ut).then(yt=>{dt(),pt(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)}).catch(yt=>{console.log(yt)})},mt=async()=>{await axios.post(`${nt}api/management/routine/add?routine_id=${ht.routineId}`,ut).then(yt=>{dt(),pt("/diary/training/myroutine/edit")}).catch(yt=>{console.log(yt)})},gt=()=>jsxRuntimeExports.jsx("div",{className:"p-2 text-center border-teal-700 rounded-md  bg-teal-700 text-white",children:jsxRuntimeExports.jsx(Button,{buttonName:"확인",onClick:()=>st==="basic"?ft():mt()})}),xt=async()=>{await axios.get(`${nt}api/management/training/user/${rt.info.userId}`).then(yt=>{ct(yt.data.reverse())}).catch(yt=>{console.log(yt)})};return reactExports.useEffect(()=>{xt()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:`${st==="basic"?"불러오기":"전체 운동 기록"}`}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(Description,{size:"base",subsize:"sm"})})]}),jsxRuntimeExports.jsx("div",{className:"mx-4 mb-32",children:lt.length?jsxRuntimeExports.jsx(HistoryList,{}):jsxRuntimeExports.jsx(HistoryNoData,{})}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"m-4",children:gt()})})]})},Search=({onSubmit:nt,onChange:rt,placeholder:it,onBlur:st})=>jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 p-2 bg-gray-200 border-2 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(MagnifyingGlassIcon$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("form",{onSubmit:nt,onBlur:st,children:jsxRuntimeExports.jsx("input",{onChange:rt,placeholder:it,className:"bg-gray-200 outline-none w-72"})})]})});Search.propTypes={onSubmit:PropTypes.func,onChange:PropTypes.func,placeholder:PropTypes.string,onBlur:PropTypes.func};const selectedRoutineTrainingState=Recoil_index_8({key:"selectedRoutineTrainingState",default:[]}),TrainingChoicePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState([]),[dt,ht]=reactExports.useState(""),[pt,ft]=reactExports.useState([]),{basepage:mt}=useParams(),gt=Recoil_index_24(selectedRoutineTrainingState),xt=useNavigate(),yt=It=>{lt(It.target.value)},vt=async It=>{It.preventDefault(),await axios.get(`${nt}api/management/training/list?category=${dt}&keyword=${st}`).then(At=>{ut(At.data)}).catch(At=>{console.log(At)})},St=async()=>{await axios.get(`${nt}api/management/training/list?category=${dt}&keyword=${st}`).then(It=>{ut(It.data)}).catch(It=>{console.log(It)})},Et=It=>{dt===It.target.innerText?ht(""):ht(It.target.innerText)},wt=It=>{pt.includes(It)?ft(pt.filter(At=>At!==It)):ft([...pt,It])},Rt=async()=>{await axios.post(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`,pt).then(It=>{xt(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)}).catch(It=>{console.log(It)})},Tt=()=>{gt(pt),xt("/diary/training/myroutine/edit")};return reactExports.useEffect(()=>{St()},[dt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"운동 선택하기"}),jsxRuntimeExports.jsx(Search,{onSubmit:vt,onChange:yt,placeholder:"찾으시는 운동을 검색해보세요.",onBlur:vt}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between px-4 pb-4",children:[jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="하체"?"bg-teal-700 text-white":""}`,buttonName:"하체",onClick:Et}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="가슴"?"bg-teal-700 text-white":""}`,buttonName:"가슴",onClick:Et}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="등"?"bg-teal-700 text-white":""}`,buttonName:"등",onClick:Et}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="어깨"?"bg-teal-700 text-white":""}`,buttonName:"어깨",onClick:Et}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="팔"?"bg-teal-700 text-white":""}`,buttonName:"팔",onClick:Et})]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 mx-4 mb-32",children:ct.map(It=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>wt(It.training_id),checked:pt.includes(It.training_id),className:"w-6 ml-4 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 py-2 pl-4",children:[jsxRuntimeExports.jsx("img",{src:It.image,alt:"img",className:"w-8 h-8"}),jsxRuntimeExports.jsx("p",{children:It.name})]})]}),jsxRuntimeExports.jsx("hr",{})]},It.training_id))}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:`p-2 m-4 text-center border border-teal-700 rounded-md ${pt.length?"bg-teal-700 text-white":"text-teal-700"}`,children:pt.length?jsxRuntimeExports.jsx(Button,{buttonName:`${pt.length}개의 운동 추가하기`,onClick:()=>{mt==="basic"?Rt():Tt()}}):jsxRuntimeExports.jsx(Button,{buttonName:"운동을 선택하세요",disabled:!0})})})]})},userRoutineState=Recoil_index_8({key:"userRoutineState",default:[]}),RoutineNoData=()=>{const nt=Recoil_index_24(modalState),rt=()=>{nt({type:"routineCreate",data:""})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-6 mt-48",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"저장된 루틴이 없습니다."}),jsxRuntimeExports.jsx("p",{children:"루틴을 만들어 바로 운동해보세요!"})]}),jsxRuntimeExports.jsx("div",{className:"w-1/2 p-2 font-semibold text-center text-teal-700 border border-teal-700 rounded-full",children:jsxRuntimeExports.jsx("button",{onClick:rt,children:"루틴 만들기"})})]})},RoutineDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(modalState),lt=Recoil_index_24(selectedRoutineState),ct=Recoil_index_24(selectedRoutineInfoState),ut=async()=>{ct(nt),await axios.get(`${it}api/management/routine/detail?routine_id=${nt.routineId}`).then(pt=>{lt(pt.data)}).catch(pt=>{console.log(pt)})},dt=()=>{st({type:"routineDetail",data:""})},ht=()=>{st({type:"routineEditMenu",data:""})};return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:ut,children:[jsxRuntimeExports.jsx("div",{onClick:dt,children:jsxRuntimeExports.jsx(Description,{Title:nt.title,subTitle:`${rt+1}번 운동 목록`})}),jsxRuntimeExports.jsx(EllipsisVerticalIcon$1,{className:"w-6 h-6 my-auto",onClick:ht})]})};RoutineDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const RoutineList=()=>{const nt=Recoil_index_20(userRoutineState);return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:nt.map((rt,it)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-lg",children:jsxRuntimeExports.jsx(RoutineDetailBox,{data:rt,idx:it})},rt.routineId))})},MyRoutinePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=useNavigate(),[lt,ct]=Recoil_index_22(userRoutineState),[ut,dt]=Recoil_index_22(modalState),ht=()=>{st(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)},pt=()=>{dt({type:"routineCreate",data:""})},ft=async()=>{await axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(mt=>{ct(mt.data)}).catch(mt=>{console.log(mt)})};return reactExports.useEffect(()=>{ft()},[ut]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute my-4",children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 text-blue-500",onClick:ht})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"나만의 루틴"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:["전체 ",lt.length,"개"]}),jsxRuntimeExports.jsx("button",{onClick:pt,children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"})})]}),lt.length?jsxRuntimeExports.jsx(RoutineList,{}):jsxRuntimeExports.jsx(RoutineNoData,{})]})]})},EditRoutineSetBox=({set:nt,setIdx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(selectedRoutineState),lt=Recoil_index_20(selectedRoutineInfoState),[ct,ut]=reactExports.useState(nt.kg),[dt,ht]=reactExports.useState(nt.count),[pt,ft]=reactExports.useState(!0),mt=St=>{ut(St.target.value)},gt=St=>{ht(St.target.value)},xt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/routine/set`,{routineTrainingListId:nt.routineTrainingListId,kg:ct,count:nt.count}).then(Et=>{console.log("kg 수정 성공"),ft(!pt)}).catch(Et=>{console.log(Et)})},yt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/routine/set`,{routineTrainingListId:nt.routineTrainingListId,kg:nt.kg,count:dt}).then(Et=>{console.log("count 수정 성공"),ft(!pt)}).catch(Et=>{console.log(Et)})},vt=async()=>{await axios.get(`${it}api/management/routine/detail?routine_id=${lt.routineId}`).then(St=>{st(St.data)}).catch(St=>{console.log(St)})};return reactExports.useEffect(()=>{vt()},[pt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("td",{children:rt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:xt,onBlur:xt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ct,onChange:mt})})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:yt,onBlur:yt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:dt,onChange:gt})})})]})};EditRoutineSetBox.propTypes={set:PropTypes.object,setIdx:PropTypes.number};const EditRoutineDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(selectedRoutineState),lt=Recoil_index_20(selectedRoutineInfoState),[ct,ut]=reactExports.useState(!0),dt=()=>nt.sets.reduce((gt,xt)=>gt+xt.count*xt.kg,0),ht=async()=>{await axios.delete(`${it}api/management/routine/delete?routine_id=${nt.routineId}&training_id=${nt.trainingId}`).then(gt=>{console.log("루틴 내 운동 삭제 성공"),ut(!ct)}).catch(gt=>{console.log(gt)})},pt=async()=>{await axios.delete(`${it}api/management/routine/set/${nt.routineTrainingListId}`).then(gt=>{console.log("루틴 내 운동 세트 삭제"),ut(!ct)}).catch(gt=>{console.log(gt)})},ft=async()=>{await axios.post(`${it}api/management/routine/set`,{routineId:nt.routineId,trainingId:nt.trainingId}).then(gt=>{console.log("루틴 내 운동 세트 추가"),ut(!ct)}).catch(gt=>{console.log(gt)})},mt=async()=>{await axios.get(`${it}api/management/routine/detail?routine_id=${lt.routineId}`).then(gt=>{st(gt.data)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{mt()},[ct]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:rt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:nt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:nt.name})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",onClick:()=>ht(),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[dt(),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400 ",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"})]})}),jsxRuntimeExports.jsx("tbody",{children:nt.sets.map((gt,xt)=>jsxRuntimeExports.jsx("tr",{className:"text-center",children:jsxRuntimeExports.jsx(EditRoutineSetBox,{set:gt,setIdx:xt})},xt))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-4 pb-2 text-center divide-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2",onClick:()=>pt(),children:[jsxRuntimeExports.jsx(MinusIcon$1,{className:"w-6 h-6"}),"세트 삭제"]}),jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2 text-teal-700",onClick:()=>ft(),children:[jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"}),"세트 추가"]})]})]})};EditRoutineDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const RoutineEditPage=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(selectedRoutineState),st=Recoil_index_20(selectedRoutineInfoState),[lt,ct]=Recoil_index_22(selectedRoutineTrainingState),[ut,dt]=reactExports.useState(st.title),ht=xt=>{dt(xt.target.value)},pt=async()=>{await axios.get(`${nt}api/management/routine/detail?routine_id=${st.routineId}`).then(xt=>{it(xt.data)}).catch(xt=>{console.log(xt)})},ft=async()=>{await axios.patch(`${nt}api/management/routine/update/${st.routineId}?title=${ut}`).then(xt=>{}).catch(xt=>{console.log(xt)})},mt=async()=>{lt.length&&await axios.post(`${nt}api/management/routine?routine_id=${st.routineId}`,lt).then(xt=>{ct([])}).catch(xt=>{console.log(xt)})},gt=()=>{st.title!==ut&&ft()};return reactExports.useEffect(()=>{mt()},[]),reactExports.useEffect(()=>{pt()},[lt]),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx("div",{className:"absolute right-0",children:jsxRuntimeExports.jsx(XMarkIcon$1,{className:"w-6 h-6 my-4 mr-2"})})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"루틴 편집"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsx(Input,{value:ut,onChange:ht})}),jsxRuntimeExports.jsx("hr",{className:"mt-4"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pt-4 pb-32 mx-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-x-0 bg-gray-100 h-2/3 -z-10"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:rt.routine_training_list.map((xt,yt)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white rounded-lg",children:jsxRuntimeExports.jsx(EditRoutineDetailBox,{data:xt,idx:yt})},yt))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-2 mb-4 text-center divide-x-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/routine",children:"운동추가"}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/routine",children:"불러오기"})]})]}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 rounded-md",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx(Button,{buttonName:"루틴으로 저장하기",onClick:()=>gt()})})})})]})},ChallengeRegistrationPage=()=>{const[nt,rt]=reactExports.useState(""),[it,st]=reactExports.useState(""),[lt,ct]=reactExports.useState(""),ut=new Date().toISOString().slice(0,10),[dt,ht]=reactExports.useState(`${ut}T00:00`),[pt,ft]=reactExports.useState(`${ut}T00:00`),mt=Recoil_index_20(baseUrlState),gt=Recoil_index_20(userState),xt="ap-northeast-2",yt="3dbody-image";let vt="";const[St,Et]=reactExports.useState({}),[wt,Rt]=reactExports.useState(""),[Tt,It]=reactExports.useState({}),[At,Dt]=reactExports.useState(""),jt=new S3Client({region:xt,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),Ft=Ht=>{Et(Ht.currentTarget.files[0]),Rt(`${uuid$1()}_${Ht.currentTarget.files[0].name}`)},Lt=Ht=>{It(Ht.currentTarget.files[0]),Dt(`${uuid$1()}_${Ht.currentTarget.files[0].name}`)},Pt=Ht=>{rt(Ht.currentTarget.value)},Ot=Ht=>{st(Ht.currentTarget.value)},Nt=Ht=>{ct(Ht.currentTarget.value)},$t=Ht=>{ht(Ht.currentTarget.value)},Vt=Ht=>{Ht.currentTarget.value<dt?alert("종료일이 시작일보다 빠릅니다."):ft(Ht.currentTarget.value)},Ut=async Ht=>{Ht.preventDefault(),await axios.post(`${mt}api/challenge`,{thumbnail:`https://do9nz79ez57wg.cloudfront.net/${wt}`,image:`https://do9nz79ez57wg.cloudfront.net/${At}`,title:nt,summary:it,content:lt,start_date:dt,end_date:pt,user_id:gt.info.userId}).then(()=>{window.location.replace("/challenge")})},zt=async Ht=>{Ht.preventDefault(),wt.includes("jpg")||wt.includes("jpeg")?vt="image/jpeg":wt.includes("png")?vt="image/png":wt.includes("gif")&&(vt="image/gif");const Gt={Bucket:yt,Key:wt,Body:St,ContentType:vt};jt.send(new PutObjectCommand(Gt)).then(()=>{alert("등록되었습니다.")})},Bt=async Ht=>{Ht.preventDefault(),At.includes("jpg")||At.includes("jpeg")?vt="image/jpeg":At.includes("png")?vt="image/png":At.includes("gif")&&(vt="image/gif");const Gt={Bucket:yt,Key:At,Body:Tt,ContentType:vt};jt.send(new PutObjectCommand(Gt)).then(()=>{alert("등록되었습니다.")})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute flex justify-between w-full",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지 등록"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs("form",{onSubmit:zt,className:"flex items-center mx-4 mt-2 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[St.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:St.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"썸네일을 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Ft})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Bt,className:"flex items-center mx-4 mt-1 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[Tt.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:Tt.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"포스터를 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Lt})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ut,children:[jsxRuntimeExports.jsx("div",{className:"pt-4 mx-4",children:jsxRuntimeExports.jsx("input",{type:"text",value:nt,onChange:Pt,className:"p-2 border-2 rounded-md",placeholder:"제목"})}),jsxRuntimeExports.jsx("div",{className:"mx-4 my-2",children:jsxRuntimeExports.jsx("input",{type:"text",value:it,onChange:Ot,className:"p-2 border-2 rounded-md",placeholder:"한줄 설명"})}),jsxRuntimeExports.jsx("div",{className:"mx-4",children:jsxRuntimeExports.jsx("textarea",{value:lt,onChange:Nt,className:"w-full h-40 p-2 border-2 rounded-md",placeholder:"내용을 입력하세요."})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"시작일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:dt,onChange:$t,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"종료일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:pt,onChange:Vt,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"등록하기"})})]})]})]})},ChallengeUpdatePage=()=>{const{challengeId:nt}=useParams(),it=useLocation().state.value,[st,lt]=reactExports.useState(`${it.title}`),[ct,ut]=reactExports.useState(`${it.summary}`),[dt,ht]=reactExports.useState(`${it.content}`),[pt,ft]=reactExports.useState(`${it.start_date}`),[mt,gt]=reactExports.useState(`${it.end_date}`),xt=Recoil_index_20(baseUrlState),yt=Recoil_index_20(userState),vt="ap-northeast-2",St="3dbody-image";let Et="";const[wt,Rt]=reactExports.useState({}),[Tt,It]=reactExports.useState(""),[At,Dt]=reactExports.useState({}),[jt,Ft]=reactExports.useState(""),Lt=new S3Client({region:vt,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),Pt=Kt=>{Rt(Kt.currentTarget.files[0]),It(`${uuid$1()}_${Kt.currentTarget.files[0].name}`)},Ot=Kt=>{Dt(Kt.currentTarget.files[0]),Ft(`${uuid$1()}_${Kt.currentTarget.files[0].name}`)},Nt=Kt=>{lt(Kt.currentTarget.value)},$t=Kt=>{ut(Kt.currentTarget.value)},Vt=Kt=>{ht(Kt.currentTarget.value)},Ut=Kt=>{Kt.currentTarget.value>mt?alert("종료일이 시작일보다 빠릅니다."):ft(Kt.currentTarget.value)},zt=Kt=>{Kt.currentTarget.value<pt?alert("종료일이 시작일보다 빠릅니다."):gt(Kt.currentTarget.value)},Bt=async Kt=>{Kt.preventDefault(),await axios.put(`${xt}api/challenge/${nt}`,{thumbnail:`https://do9nz79ez57wg.cloudfront.net/${Tt}`,image:`https://do9nz79ez57wg.cloudfront.net/${jt}`,title:st,summary:ct,content:dt,start_date:pt,end_date:mt,user_id:yt.info.userId}).then(()=>{window.location.replace("/challenge")})},Ht=async Kt=>{Kt.preventDefault(),Tt.includes("jpg")||Tt.includes("jpeg")?Et="image/jpeg":Tt.includes("png")?Et="image/png":Tt.includes("gif")&&(Et="image/gif");const Xt={Bucket:St,Key:Tt,Body:wt,ContentType:Et};Lt.send(new PutObjectCommand(Xt)).then(()=>{alert("등록되었습니다.")})},Gt=async Kt=>{Kt.preventDefault(),jt.includes("jpg")||jt.includes("jpeg")?Et="image/jpeg":jt.includes("png")?Et="image/png":jt.includes("gif")&&(Et="image/gif");const Xt={Bucket:St,Key:jt,Body:At,ContentType:Et};Lt.send(new PutObjectCommand(Xt)).then(()=>{alert("등록되었습니다.")})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute flex justify-between w-full",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지 수정"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs("form",{onSubmit:Ht,className:"flex items-center mx-4 mt-2 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[wt.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:wt.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"썸네일을 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Pt})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Gt,className:"flex items-center mx-4 mt-1 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[At.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:At.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"포스터를 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Ot})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Bt,children:[jsxRuntimeExports.jsx("div",{className:"pt-4 mx-4",children:jsxRuntimeExports.jsx("input",{type:"text",value:st,onChange:Nt,className:"p-2 border-2 rounded-md",placeholder:"제목"})}),jsxRuntimeExports.jsx("div",{className:"mx-4 my-2",children:jsxRuntimeExports.jsx("input",{type:"text",value:ct,onChange:$t,className:"p-2 border-2 rounded-md",placeholder:"한줄 설명"})}),jsxRuntimeExports.jsx("div",{className:"mx-4",children:jsxRuntimeExports.jsx("textarea",{value:dt,onChange:Vt,className:"w-full h-40 p-2 border-2 rounded-md",placeholder:"내용을 입력하세요."})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"시작일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:pt,onChange:Ut,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"종료일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:mt,onChange:zt,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"등록하기"})})]})]})]})};var events$1={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function(rt,it,st){return Function.prototype.apply.call(rt,it,st)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(rt){return Object.getOwnPropertyNames(rt).concat(Object.getOwnPropertySymbols(rt))}:ReflectOwnKeys=function(rt){return Object.getOwnPropertyNames(rt)};function ProcessEmitWarning(nt){console&&console.warn&&console.warn(nt)}var NumberIsNaN=Number.isNaN||function(rt){return rt!==rt};function EventEmitter(){EventEmitter.init.call(this)}events$1.exports=EventEmitter;events$1.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(nt){if(typeof nt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof nt)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(nt){if(typeof nt!="number"||nt<0||NumberIsNaN(nt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+nt+".");defaultMaxListeners=nt}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(rt){if(typeof rt!="number"||rt<0||NumberIsNaN(rt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+rt+".");return this._maxListeners=rt,this};function _getMaxListeners(nt){return nt._maxListeners===void 0?EventEmitter.defaultMaxListeners:nt._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(rt){for(var it=[],st=1;st<arguments.length;st++)it.push(arguments[st]);var lt=rt==="error",ct=this._events;if(ct!==void 0)lt=lt&&ct.error===void 0;else if(!lt)return!1;if(lt){var ut;if(it.length>0&&(ut=it[0]),ut instanceof Error)throw ut;var dt=new Error("Unhandled error."+(ut?" ("+ut.message+")":""));throw dt.context=ut,dt}var ht=ct[rt];if(ht===void 0)return!1;if(typeof ht=="function")ReflectApply(ht,this,it);else for(var pt=ht.length,ft=arrayClone(ht,pt),st=0;st<pt;++st)ReflectApply(ft[st],this,it);return!0};function _addListener(nt,rt,it,st){var lt,ct,ut;if(checkListener(it),ct=nt._events,ct===void 0?(ct=nt._events=Object.create(null),nt._eventsCount=0):(ct.newListener!==void 0&&(nt.emit("newListener",rt,it.listener?it.listener:it),ct=nt._events),ut=ct[rt]),ut===void 0)ut=ct[rt]=it,++nt._eventsCount;else if(typeof ut=="function"?ut=ct[rt]=st?[it,ut]:[ut,it]:st?ut.unshift(it):ut.push(it),lt=_getMaxListeners(nt),lt>0&&ut.length>lt&&!ut.warned){ut.warned=!0;var dt=new Error("Possible EventEmitter memory leak detected. "+ut.length+" "+String(rt)+" listeners added. Use emitter.setMaxListeners() to increase limit");dt.name="MaxListenersExceededWarning",dt.emitter=nt,dt.type=rt,dt.count=ut.length,ProcessEmitWarning(dt)}return nt}EventEmitter.prototype.addListener=function(rt,it){return _addListener(this,rt,it,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(rt,it){return _addListener(this,rt,it,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(nt,rt,it){var st={fired:!1,wrapFn:void 0,target:nt,type:rt,listener:it},lt=onceWrapper.bind(st);return lt.listener=it,st.wrapFn=lt,lt}EventEmitter.prototype.once=function(rt,it){return checkListener(it),this.on(rt,_onceWrap(this,rt,it)),this};EventEmitter.prototype.prependOnceListener=function(rt,it){return checkListener(it),this.prependListener(rt,_onceWrap(this,rt,it)),this};EventEmitter.prototype.removeListener=function(rt,it){var st,lt,ct,ut,dt;if(checkListener(it),lt=this._events,lt===void 0)return this;if(st=lt[rt],st===void 0)return this;if(st===it||st.listener===it)--this._eventsCount===0?this._events=Object.create(null):(delete lt[rt],lt.removeListener&&this.emit("removeListener",rt,st.listener||it));else if(typeof st!="function"){for(ct=-1,ut=st.length-1;ut>=0;ut--)if(st[ut]===it||st[ut].listener===it){dt=st[ut].listener,ct=ut;break}if(ct<0)return this;ct===0?st.shift():spliceOne(st,ct),st.length===1&&(lt[rt]=st[0]),lt.removeListener!==void 0&&this.emit("removeListener",rt,dt||it)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(rt){var it,st,lt;if(st=this._events,st===void 0)return this;if(st.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):st[rt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete st[rt]),this;if(arguments.length===0){var ct=Object.keys(st),ut;for(lt=0;lt<ct.length;++lt)ut=ct[lt],ut!=="removeListener"&&this.removeAllListeners(ut);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(it=st[rt],typeof it=="function")this.removeListener(rt,it);else if(it!==void 0)for(lt=it.length-1;lt>=0;lt--)this.removeListener(rt,it[lt]);return this};function _listeners(nt,rt,it){var st=nt._events;if(st===void 0)return[];var lt=st[rt];return lt===void 0?[]:typeof lt=="function"?it?[lt.listener||lt]:[lt]:it?unwrapListeners(lt):arrayClone(lt,lt.length)}EventEmitter.prototype.listeners=function(rt){return _listeners(this,rt,!0)};EventEmitter.prototype.rawListeners=function(rt){return _listeners(this,rt,!1)};EventEmitter.listenerCount=function(nt,rt){return typeof nt.listenerCount=="function"?nt.listenerCount(rt):listenerCount.call(nt,rt)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(nt){var rt=this._events;if(rt!==void 0){var it=rt[nt];if(typeof it=="function")return 1;if(it!==void 0)return it.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(nt,rt){for(var it=new Array(rt),st=0;st<rt;++st)it[st]=nt[st];return it}function spliceOne(nt,rt){for(;rt+1<nt.length;rt++)nt[rt]=nt[rt+1];nt.pop()}function unwrapListeners(nt){for(var rt=new Array(nt.length),it=0;it<rt.length;++it)rt[it]=nt[it].listener||nt[it];return rt}function once(nt,rt){return new Promise(function(it,st){function lt(ut){nt.removeListener(rt,ct),st(ut)}function ct(){typeof nt.removeListener=="function"&&nt.removeListener("error",lt),it([].slice.call(arguments))}eventTargetAgnosticAddListener(nt,rt,ct,{once:!0}),rt!=="error"&&addErrorHandlerIfEventEmitter(nt,lt,{once:!0})})}function addErrorHandlerIfEventEmitter(nt,rt,it){typeof nt.on=="function"&&eventTargetAgnosticAddListener(nt,"error",rt,it)}function eventTargetAgnosticAddListener(nt,rt,it,st){if(typeof nt.on=="function")st.once?nt.once(rt,it):nt.on(rt,it);else if(typeof nt.addEventListener=="function")nt.addEventListener(rt,function lt(ct){st.once&&nt.removeEventListener(rt,lt),it(ct)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof nt)}var eventsExports=events$1.exports;const EventEmitter$1=getDefaultExportFromCjs(eventsExports);var videosdk={exports:{}};(function(nt,rt){var it={};/*! For license information please see videosdk.js.LICENSE.txt */(function(st,lt){nt.exports=lt()})(self,()=>(()=>{var st={4180:ut=>{ut.exports=(()=>{var dt={43:function(mt,gt,xt){var yt,vt;(function(St,Et){yt=function(){var wt=function(){},Rt="undefined",Tt=typeof window!==Rt&&typeof window.navigator!==Rt&&/Trident\/|MSIE /.test(window.navigator.userAgent),It=["trace","debug","info","warn","error"];function At(Ut,zt){var Bt=Ut[zt];if(typeof Bt.bind=="function")return Bt.bind(Ut);try{return Function.prototype.bind.call(Bt,Ut)}catch{return function(){return Function.prototype.apply.apply(Bt,[Ut,arguments])}}}function Dt(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function jt(Ut){return Ut==="debug"&&(Ut="log"),typeof console!==Rt&&(Ut==="trace"&&Tt?Dt:console[Ut]!==void 0?At(console,Ut):console.log!==void 0?At(console,"log"):wt)}function Ft(Ut,zt){for(var Bt=0;Bt<It.length;Bt++){var Ht=It[Bt];this[Ht]=Bt<Ut?wt:this.methodFactory(Ht,Ut,zt)}this.log=this.debug}function Lt(Ut,zt,Bt){return function(){typeof console!==Rt&&(Ft.call(this,zt,Bt),this[Ut].apply(this,arguments))}}function Pt(Ut,zt,Bt){return jt(Ut)||Lt.apply(this,arguments)}function Ot(Ut,zt,Bt){var Ht,Gt=this,Kt="loglevel";function Xt(){var tr;if(typeof window!==Rt&&Kt){try{tr=window.localStorage[Kt]}catch{}if(typeof tr===Rt)try{var dr=window.document.cookie,fr=dr.indexOf(encodeURIComponent(Kt)+"=");fr!==-1&&(tr=/^([^;]+)/.exec(dr.slice(fr))[1])}catch{}return Gt.levels[tr]===void 0&&(tr=void 0),tr}}typeof Ut=="string"?Kt+=":"+Ut:typeof Ut=="symbol"&&(Kt=void 0),Gt.name=Ut,Gt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Gt.methodFactory=Bt||Pt,Gt.getLevel=function(){return Ht},Gt.setLevel=function(tr,dr){if(typeof tr=="string"&&Gt.levels[tr.toUpperCase()]!==void 0&&(tr=Gt.levels[tr.toUpperCase()]),!(typeof tr=="number"&&tr>=0&&tr<=Gt.levels.SILENT))throw"log.setLevel() called with invalid level: "+tr;if(Ht=tr,dr!==!1&&function(fr){var Sr=(It[fr]||"silent").toUpperCase();if(typeof window!==Rt&&Kt){try{return void(window.localStorage[Kt]=Sr)}catch{}try{window.document.cookie=encodeURIComponent(Kt)+"="+Sr+";"}catch{}}}(tr),Ft.call(Gt,tr,Ut),typeof console===Rt&&tr<Gt.levels.SILENT)return"No console available for logging"},Gt.setDefaultLevel=function(tr){Xt()||Gt.setLevel(tr,!1)},Gt.enableAll=function(tr){Gt.setLevel(Gt.levels.TRACE,tr)},Gt.disableAll=function(tr){Gt.setLevel(Gt.levels.SILENT,tr)};var or=Xt();or==null&&(or=zt??"WARN"),Gt.setLevel(or,!1)}var Nt=new Ot,$t={};Nt.getLogger=function(Ut){if(typeof Ut!="symbol"&&typeof Ut!="string"||Ut==="")throw new TypeError("You must supply a name when creating a logger.");var zt=$t[Ut];return zt||(zt=$t[Ut]=new Ot(Ut,Nt.getLevel(),Nt.methodFactory)),zt};var Vt=typeof window!==Rt?window.log:void 0;return Nt.noConflict=function(){return typeof window!==Rt&&window.log===Nt&&(window.log=Vt),Nt},Nt.getLoggers=function(){return $t},Nt.default=Nt,Nt},(vt=yt.call(gt,xt,gt,mt))===void 0||(mt.exports=vt)})()}},ht={};function pt(mt){var gt=ht[mt];if(gt!==void 0)return gt.exports;var xt=ht[mt]={exports:{}};return dt[mt].call(xt.exports,xt,xt.exports,pt),xt.exports}pt.d=(mt,gt)=>{for(var xt in gt)pt.o(gt,xt)&&!pt.o(mt,xt)&&Object.defineProperty(mt,xt,{enumerable:!0,get:gt[xt]})},pt.o=(mt,gt)=>Object.prototype.hasOwnProperty.call(mt,gt),pt.r=mt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(mt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(mt,"__esModule",{value:!0})};var ft={};return(()=>{pt.r(ft),pt.d(ft,{VideoSDKMetrics:()=>qn});const mt="inbound",gt="outbound",xt={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:mt},yt={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:gt},vt={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:mt},St={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:gt},Et="inbound-rtp",wt="bytesReceived",Rt="bytesSent",Tt="currentRoundTripTime",It="roundTripTime",At="fractionLost",Dt="frameHeight",jt="frameWidth",Ft="qualityLimitationReason",Lt="qualityLimitationDurations",Pt="qualityLimitationResolutionChanges",Ot="jitter",Nt="packetsLost",$t="packetsReceived",Vt="packetsSent",Ut="responsesReceived",zt="selected",Bt="totalRoundTripTime",Ht="roundTripTimeMeasurements",Gt="framesDecoded",Kt="framesEncoded",Xt="totalDecodeTime",or="totalEncodeTime",tr="pliCount",dr="nackCount",fr="audio",Sr="video",vr={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},mr="audio",hr="video",gr="network",lr="data";var Ir=pt(43);const wr=()=>`${new Date().toISOString()} | metrics`,Fr=(Gr,qr,wn)=>`${Gr} | ${qr} | ${wn}`;Ir.setDefaultLevel(Ir.levels.TRACE);const $r=(Gr,qr,wn)=>{wn?Ir.debug(Fr(wr(),Gr,qr),wn):Ir.debug(Fr(wr(),Gr,qr))},hn=(Gr,qr)=>{Ir.warn(Fr(wr(),Gr,qr))},Zr=(Gr,qr)=>{Ir.error(Fr(wr(),Gr,qr))},Qt="extractor   ",Jt=(Gr,qr,wn)=>{if(!qr)return null;const Cr={};let nr=qr.audio[Gr];nr||(nr=wn===mt?{...xt}:{...yt}),Cr.audio=nr;let Ur=qr.video[Gr];return Ur||(Ur=wn===mt?{...vt}:{...St}),Cr.video=Ur,Cr},pr=(Gr,qr,wn,Cr)=>{let nr=!1;const Ur=Cr[qr].total_rtt_ms_out,Mr=Cr[qr].total_rtt_measure_out,rn=wn?wn[qr].total_rtt_ms_out:0,Cn=wn?wn[qr].total_rtt_measure_out:0,Rr={rtt:null,totalRTT:Ur,totalRTTMeasurements:Mr};if(Gr.timestamp===Cr[qr].timestamp_out||!Object.prototype.hasOwnProperty.call(Gr,It)||Object.prototype.hasOwnProperty.call(Gr,Ht)&&(nr=!0,Number(Gr.roundTripTimeMeasurements)===0||Number(Gr.roundTripTimeMeasurements)-Cn===Mr))return Rr;const pn=1e3*Number(Gr.roundTripTime);let Tr=Ur+pn,xr=Mr+1;return nr&&(Tr=1e3*Number(Gr.totalRoundTripTime)-rn,xr=Number(Gr.roundTripTimeMeasurements)-Cn),{rtt:pn,totalRTT:Tr,totalRTTMeasurements:xr}},Vr=(Gr,qr,wn)=>Gr.timestamp===wn[qr].timestamp_out?null:Object.prototype.hasOwnProperty.call(Gr,Ot)?1e3*(Number(Gr.jitter)||0):null,Wr=(Gr,qr,wn,Cr)=>{if(!Object.prototype.hasOwnProperty.call(Gr,Vt)||!Object.prototype.hasOwnProperty.call(Gr,Rt))return{packetsSent:wn[qr].total_packets_out,packetsLost:wn[qr].total_packets_lost_out,bytesSent:wn[qr].total_KBytes_out};const nr=Number(Gr.packetsSent)||0-(Cr?Cr[qr].total_packets_out:0),Ur=nr-wn[qr].total_packets_out,Mr=Number(Gr.bytesSent)/1024-(Cr?Cr[qr].total_KBytes_out:0),rn=Mr-wn[qr].total_KBytes_out,Cn=Gr.timestamp||Date.now(),Rr=Cr?Cr.timestamp:null;let pn=wn.timestamp;!pn&&Rr&&(pn=Rr);const Tr=pn?Cn-pn:0;return{packetsSent:nr,deltaPacketsSent:Ur,KBytesSent:Mr,deltaKBytesSent:rn,kbsSent:Tr>0?.008*rn*1024/Tr*1e3:0}},zr=(Gr,qr,wn,Cr)=>{let nr=wn[qr].total_packets_lost_out,Ur=0,Mr=0;return Object.prototype.hasOwnProperty.call(Gr,Nt)&&(nr=Number(Gr.packetsLost)||0-(Cr?Cr[qr].total_packets_lost_out:0),Ur=nr-wn[qr].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Gr,At)&&(Mr=Number(100*Gr.fractionLost)),{packetsLost:nr,deltaPacketsLost:Ur,fractionLost:Mr}},ln=(Gr,qr,wn,Cr)=>{if(!Object.prototype.hasOwnProperty.call(Gr,$t)||!Object.prototype.hasOwnProperty.call(Gr,Nt)||!Object.prototype.hasOwnProperty.call(Gr,wt))return{percent_packets_lost:wn[qr].percent_packets_lost_in,packetsReceived:wn[qr].total_packets_in,packetsLost:wn[qr].total_packets_lost_in,bytesReceived:wn[qr].total_KBytes_in};const nr=(Number(Gr.packetsReceived)||0)-(Cr?Cr[qr].total_packets_in:0),Ur=(Number(Gr.packetsLost)||0)-(Cr?Cr[qr].total_packets_lost_in:0),Mr=Ur-wn[qr].total_packets_lost_in,rn=nr-wn[qr].total_packets_in,Cn=nr!==wn[qr].total_packets_in?100*Mr/(Mr+rn):0,Rr=Number(Gr.bytesReceived)/1024-(Cr?Cr[qr].total_KBytes_in:0),pn=Rr-wn[qr].total_KBytes_in,Tr=Gr.timestamp||Date.now(),xr=Cr?Cr.timestamp:null;let jr=wn.timestamp;!jr&&xr&&(jr=xr);const en=jr?Tr-jr:0;return{percentPacketsLost:Cn,packetsReceived:nr,deltaPacketsReceived:rn,packetsLost:Ur,deltaPacketsLost:Mr,KBytesReceived:Rr,deltaKBytesReceived:pn,kbsReceived:en>0?.008*pn*1024/en*1e3:0}},xn=Gr=>Gr.candidateType!=="relay"?"":Gr.relayProtocol||"",yn=Gr=>Object.prototype.hasOwnProperty.call(Gr,Dt)&&Object.prototype.hasOwnProperty.call(Gr,jt)?{width:Gr.frameWidth||null,height:Gr.frameHeight||null,framerate:Gr.framesPerSecond}:{width:null,height:null,framerate:null};class Wn{constructor(qr,wn){this._callbacks={onStatsCollected:null},this._id=`collector-${wn}`,this._moduleName=this._id,this._probeId=wn,this._config=qr,this._state="idle",this._statsReports=[]}registerCallback(qr,wn,Cr){qr in this._callbacks?(this._callbacks[qr]={callback:wn,context:Cr},$r(this._moduleName,`registered callback '${qr}'`)):Zr(this._moduleName,`can't register callback for '${qr}' - not found`)}unregisterCallback(qr){qr in this._callbacks?(this._callbacks[qr]=null,delete this._callbacks[qr],$r(this._moduleName,`unregistered callback '${qr}'`)):Zr(this._moduleName,`can't unregister callback for '${qr}' - not found`)}analyze(qr,wn){const Cr=(Ur=>{const Mr={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Ur){const rn={...Ur,audio:{},video:{},data:{...Ur.data},network:{...Ur.network}};return Object.keys(Ur.audio).forEach(Cn=>{rn.audio[Cn]={...Ur.audio[Cn]}}),Object.keys(Ur.video).forEach(Cn=>{rn.video[Cn]={...Ur.video[Cn]}}),rn}return{...Mr,audio:{},video:{},data:{...Mr.data},network:{...Mr.network}}})(wn);Cr.name=this._config.name,Cr.meetingId=this._config.meetingId,Cr.peerId=this._config.peerId,Cr.count=wn?wn.count+1:1;let nr=null;return qr.forEach(Ur=>{!nr&&Ur.timestamp&&(nr=Ur.timestamp),((Mr,rn,Cn,Rr)=>{if(!Mr)return[];switch(Mr.type){case"candidate-pair":let pn=!1;if(Mr.nominated&&Mr.state==="succeeded"&&(pn=!0,$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr),zt in Mr&&!Mr.selected&&(pn=!1)),pn){Mr.localCandidateId,Mr.remoteCandidateId;const xr=((en,fn,Vn)=>{const Yn=(en.bytesReceived||0)/1024-(Vn?Vn.data.total_KBytes_in:0),Hn=(en.bytesSent||0)/1024-(Vn?Vn.data.total_KBytes_out:0),Bn=en.timestamp||Date.now(),es=Yn-fn.data.total_KBytes_in,$s=Hn-fn.data.total_KBytes_out,Ss=Vn?Vn.timestamp:null;let zs=fn.timestamp;!zs&&Ss&&(zs=Ss);const ro=zs?Bn-zs:0;return{total_KBytes_received:Yn,total_KBytes_sent:Hn,delta_KBytes_received:es,delta_KBytes_sent:$s,kbs_speed_received:ro>0?.008*es*1024/ro*1e3:0,kbs_speed_sent:ro>0?.008*$s*1024/ro*1e3:0}})(Mr,rn,Rr),jr=((en=>{en.availableIncomingBitrate,en.availableOutgoingBitrate})(Mr),((en,fn,Vn,Yn)=>{if(!Object.prototype.hasOwnProperty.call(en,Tt))return{rtt:null,totalRTT:Yn.data.total_rtt_connectivity_ms,totalRTTMeasurements:Yn.data.total_rtt_connectivity_measure};const Hn=1e3*Number(en.currentRoundTripTime);let Bn=Yn.data.total_rtt_connectivity_ms+Hn,es=Yn.data.total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(en,Bt)&&(Bn=1e3*Number(en.totalRoundTripTime)-(Vn?Vn.data.total_rtt_connectivity_ms:0)),Object.prototype.hasOwnProperty.call(en,Ut)&&(es=Number(en.responsesReceived)-(Vn?Vn.data.total_rtt_connectivity_measure:0)),{rtt:Hn,totalRTT:Bn,totalRTTMeasurements:es}})(Mr,0,Rr,rn));return[{type:lr,value:{total_KBytes_in:xr.total_KBytes_received}},{type:lr,value:{total_KBytes_out:xr.total_KBytes_sent}},{type:lr,value:{delta_KBytes_in:xr.delta_KBytes_received}},{type:lr,value:{delta_KBytes_out:xr.delta_KBytes_sent}},{type:lr,value:{delta_kbs_in:xr.kbs_speed_received}},{type:lr,value:{delta_kbs_out:xr.kbs_speed_sent}},{type:lr,value:{delta_rtt_connectivity_ms:jr.rtt}}]}break;case"local-candidate":if(Mr.id===rn.network.local_candidate_id)return[{type:gr,value:{infrastructure:Mr.networkType}},{type:gr,value:{local_candidate_protocol:Mr.protocol||""}},{type:gr,value:{local_candidate_relay_protocol:xn(Mr)}}];break;case Et:{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=Mr.ssrc,jr=Jt(xr,rn,mt);jr&&(jr.timestamp=rn.timestamp);const en=Jt(xr,Rr,mt);if(en&&(en.timestamp=Rr.timestamp),Mr.mediaType===fr){const fn=ln(Mr,fr,jr,en),Vn=Vr(Mr,fr,jr),Yn=Mr.codecId||"",Hn=((Bn,es,$s,Ss)=>{const zs=Number(Bn.concealmentEvents)||0,ro=zs-($s.audio.total_concealment_events||0),Po=Number(Bn.insertedSamplesForDeceleration)||0,To=Po-($s.audio.total_inserted_samples_for_decelaration||0),qo=Number(Bn.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:zs,deltaConcealmentEvents:ro,totalInsertedSamplesForDecelaration:Po,deltaInsertedSamplesForDecelaration:To,totalRemovedSamplesForAccelaration:qo,deltaRemovedSampleForAccelaration:qo-($s.audio.total_removed_samples_for_accelaration||0)}})(Mr,0,jr);return[{ssrc:xr,type:mr,value:{codec_id_in:Yn}},{ssrc:xr,type:mr,value:{total_packets_in:fn.packetsReceived}},{ssrc:xr,type:mr,value:{delta_packets_in:fn.deltaPacketsReceived}},{ssrc:xr,type:mr,value:{total_packets_lost_in:fn.packetsLost}},{ssrc:xr,type:mr,value:{delta_packets_lost_in:fn.deltaPacketsLost}},{ssrc:xr,type:mr,value:{percent_packets_lost_in:fn.percentPacketsLost}},{ssrc:xr,type:mr,value:{total_KBytes_in:fn.KBytesReceived}},{ssrc:xr,type:mr,value:{delta_KBytes_in:fn.deltaKBytesReceived}},{ssrc:xr,type:mr,value:{delta_kbs_in:fn.kbsReceived}},{ssrc:xr,type:mr,value:{delta_jitter_ms_in:Vn}},{ssrc:xr,type:mr,value:{total_concealment_events:Hn.totalConcealmentEvents}},{ssrc:xr,type:mr,value:{delta_concealment_events:Hn.deltaConcealmentEvents}},{ssrc:xr,type:mr,value:{total_inserted_samples_for_decelaration:Hn.totalInsertedSamplesForDecelaration}},{ssrc:xr,type:mr,value:{delta_inserted_samples_for_decelaration:Hn.deltaInsertedSamplesForDecelaration}},{ssrc:xr,type:mr,value:{total_removed_samples_for_accelaration:Hn.totalRemovedSamplesForAccelaration}},{ssrc:xr,type:mr,value:{delta_removed_samples_for_accelaration:Hn.deltaRemovedSampleForAccelaration}},{ssrc:xr,type:mr,value:{track_in:Mr.trackId}},{ssrc:xr,type:mr,value:{track_id_in:Mr.trackIdentifier}},{ssrc:xr,type:mr,value:{media_source_id:Mr.mediaSourceId}}]}if(Mr.mediaType===Sr){((Bn,es)=>{if(!Object.prototype.hasOwnProperty.call(Bn,Gt)||!Object.prototype.hasOwnProperty.call(Bn,Xt))return{delta_ms_decode_frame:es.video.delta_ms_decode_frame_in,frames_decoded:es.video.total_frames_decoded_in,total_decode_time:es.video.total_time_decoded_in};Bn.framesDecoded,Bn.totalDecodeTime,es.video.total_time_decoded_in,es.video.total_frames_decoded_in})(Mr,jr);const fn=ln(Mr,Sr,jr,en),Vn=Vr(Mr,Sr,jr),Yn=(Mr.decoderImplementation,Mr.codecId||null),Hn=yn(Mr);return((Bn,es,$s)=>{if(!Object.prototype.hasOwnProperty.call(Bn,tr)||!Object.prototype.hasOwnProperty.call(Bn,dr))return{pliCount:es.total_pli_sent_in,nackCount:es.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Bn.pliCount,$s&&$s.video.total_pli_sent_in,Bn.nackCount,$s&&$s.video.total_nack_sent_in,es.video.total_pli_sent_in,es.video.total_nack_sent_in})(Mr,jr,en),[{ssrc:xr,type:hr,value:{codec_id_in:Yn}},{ssrc:xr,type:hr,value:{total_packets_in:fn.packetsReceived}},{ssrc:xr,type:hr,value:{delta_packets_in:fn.deltaPacketsReceived}},{ssrc:xr,type:hr,value:{total_packets_lost_in:fn.packetsLost}},{ssrc:xr,type:hr,value:{delta_packets_lost_in:fn.deltaPacketsLost}},{ssrc:xr,type:hr,value:{percent_packets_lost_in:fn.percentPacketsLost}},{ssrc:xr,type:hr,value:{total_KBytes_in:fn.KBytesReceived}},{ssrc:xr,type:hr,value:{delta_KBytes_in:fn.deltaKBytesReceived}},{ssrc:xr,type:hr,value:{delta_kbs_in:fn.kbsReceived}},{ssrc:xr,type:hr,value:{delta_jitter_ms_in:Vn}},{ssrc:xr,type:hr,value:{size_in:Hn}},{ssrc:xr,type:hr,value:{track_in:Mr.trackId}},{ssrc:xr,type:hr,value:{track_id_in:Mr.trackIdentifier}},{ssrc:xr,type:hr,value:{media_source_id:Mr.mediaSourceId}}]}break}case"outbound-rtp":{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=Mr.ssrc,jr=Jt(xr,rn,gt);jr&&(jr.timestamp=rn.timestamp);const en=Jt(xr,Rr,gt);if(en&&(en.timestamp=Rr.timestamp),Mr.mediaType===fr){const fn=Mr.codecId||null,Vn=Wr(Mr,fr,jr,en);return[{ssrc:xr,type:mr,value:{codec_id_out:fn}},{ssrc:xr,type:mr,value:{total_packets_out:Vn.packetsSent}},{ssrc:xr,type:mr,value:{delta_packets_out:Vn.deltaPacketsSent}},{ssrc:xr,type:mr,value:{total_KBytes_out:Vn.KBytesSent}},{ssrc:xr,type:mr,value:{delta_KBytes_out:Vn.deltaKBytesSent}},{ssrc:xr,type:mr,value:{delta_kbs_out:Vn.kbsSent}},{ssrc:xr,type:mr,value:{track_out:Mr.trackId}},{ssrc:xr,type:mr,value:{track_id_out:Mr.trackIdentifier}},{ssrc:xr,type:mr,value:{media_source_id:Mr.mediaSourceId}}]}if(Mr.mediaType===Sr){Mr.encoderImplementation;const fn=Mr.codecId||null,Vn=(((Bn,es)=>{if(!Object.prototype.hasOwnProperty.call(Bn,Kt)||!Object.prototype.hasOwnProperty.call(Bn,or))return{delta_ms_encode_frame:es.video.delta_ms_encode_frame_out,frames_encoded:es.video.total_frames_encoded_out,total_encode_time:es.video.total_time_encoded_out};Bn.framesEncoded,Bn.totalEncodeTime,es.video.total_time_encoded_out,es.video.total_frames_encoded_out})(Mr,jr),yn(Mr)),Yn=(Bn=>{const es=Object.prototype.hasOwnProperty.call(Bn,Ft)?Bn.qualityLimitationReason:null,$s=Object.prototype.hasOwnProperty.call(Bn,Pt)?Bn.qualityLimitationResolutionChanges:null,Ss=Object.prototype.hasOwnProperty.call(Bn,Lt)?Bn.qualityLimitationDurations:null;return Ss&&Object.keys(Ss).forEach(zs=>{Ss[zs]>1e3&&(Ss[zs]=Number(Ss[zs]/1e3))}),{reason:es,durations:Ss,resolutionChanges:$s}})(Mr),Hn=(((Bn,es,$s)=>{if(!Object.prototype.hasOwnProperty.call(Bn,tr)||!Object.prototype.hasOwnProperty.call(Bn,dr))return{pliCount:es.total_pli_received_out,nackCount:es.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Bn.pliCount,$s&&$s.video.total_pli_received_out,Bn.nackCount,$s&&$s.video.total_nack_received_out,es.video.total_pli_received_out,es.video.total_nack_received_out})(Mr,jr,en),Wr(Mr,Sr,jr,en));return[{ssrc:xr,type:hr,value:{codec_id_out:fn}},{ssrc:xr,type:hr,value:{total_packets_out:Hn.packetsSent}},{ssrc:xr,type:hr,value:{delta_packets_out:Hn.deltaPacketsSent}},{ssrc:xr,type:hr,value:{total_KBytes_out:Hn.KBytesSent}},{ssrc:xr,type:hr,value:{delta_KBytes_out:Hn.deltaKBytesSent}},{ssrc:xr,type:hr,value:{delta_kbs_out:Hn.kbsSent}},{ssrc:xr,type:hr,value:{size_out:Vn}},{ssrc:xr,type:hr,value:{limitation_out:Yn}},{ssrc:xr,type:hr,value:{track_out:Mr.trackId}},{ssrc:xr,type:hr,value:{track_id_out:Mr.trackIdentifier}},{ssrc:xr,type:hr,value:{media_source_id:Mr.mediaSourceId}}]}break}case"media-source":{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=[];return Object.keys(rn.audio).forEach(jr=>{const en=rn.audio[jr];if(en.media_source_id===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);var fn=Mr.trackIdentifier;xr.push({ssrc:en.ssrc,type:mr,value:{track_id_out:fn}})}}),Object.keys(rn.video).forEach(jr=>{const en=rn.video[jr];if(en.media_source_id===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);var fn=Mr.trackIdentifier;xr.push({ssrc:en.ssrc,type:hr,value:{track_id_out:fn}})}}),xr}case"track":{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=[];return Object.keys(rn.audio).forEach(jr=>{const en=rn.audio[jr];if(en.track_in===Mr.id||en.track_out===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);var fn=Mr.trackIdentifier;Mr.id===en.track_in?xr.push({ssrc:en.ssrc,type:mr,value:{track_id_in:fn}}):xr.push({ssrc:en.ssrc,type:mr,value:{track_id_out:fn}})}}),Object.keys(rn.video).forEach(jr=>{const en=rn.video[jr];if(en.track_in===Mr.id||en.track_out===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);var fn=Mr.trackIdentifier;Mr.id===en.track_in?xr.push({ssrc:en.ssrc,type:hr,value:{track_id_in:fn}}):xr.push({ssrc:en.ssrc,type:hr,value:{track_id_out:fn}})}}),xr}case"codec":const Tr=[];return Object.keys(rn.audio).forEach(xr=>{const jr=rn.audio[xr];if(jr.codec_id_in===Mr.id||jr.codec_id_out===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const en=(fn=>({channels:fn.channels||null,clock_rate:fn.clockRate||null,mime_type:fn.mimeType||null,sdp_fmtp_line:fn.sdpFmtpLine||null}))(Mr);Mr.id===jr.codec_id_in?Tr.push({ssrc:jr.ssrc,type:mr,value:{codec_in:en}}):Tr.push({ssrc:jr.ssrc,type:mr,value:{codec_out:en}})}}),Object.keys(rn.video).forEach(xr=>{const jr=rn.video[xr];if(jr.codec_id_in===Mr.id||jr.codec_id_out===Mr.id){$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const en=(fn=>({clock_rate:fn.clockRate||null,mime_type:fn.mimeType||null}))(Mr);Mr.id===jr.codec_id_in?Tr.push({ssrc:jr.ssrc,type:hr,value:{codec_in:en}}):Tr.push({ssrc:jr.ssrc,type:hr,value:{codec_out:en}})}}),Tr;case"remote-inbound-rtp":{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=Mr.ssrc,jr=Jt(xr,rn,gt),en=Jt(xr,Rr,gt);if(Mr.kind===fr){const fn=pr(Mr,fr,en,jr),Vn=Vr(Mr,fr,jr),Yn=zr(Mr,fr,jr,en);return[{ssrc:xr,type:mr,value:{delta_rtt_ms_out:fn.rtt}},{ssrc:xr,type:mr,value:{delta_jitter_ms_out:Vn}},{ssrc:xr,type:mr,value:{timestamp_out:Mr.timestamp}},{ssrc:xr,type:mr,value:{total_packets_lost_out:Yn.packetsLost}},{ssrc:xr,type:mr,value:{delta_packets_lost_out:Yn.deltaPacketsLost}},{ssrc:xr,type:mr,value:{percent_packets_lost_out:Yn.fractionLost}}]}if(Mr.kind===Sr){const fn=pr(Mr,Sr,en,jr),Vn=Vr(Mr,Sr,jr),Yn=zr(Mr,Sr,jr,en);return[{ssrc:xr,type:hr,value:{delta_rtt_ms_out:fn.rtt}},{ssrc:xr,type:hr,value:{delta_jitter_ms_out:Vn}},{ssrc:xr,type:hr,value:{timestamp_out:Mr.timestamp}},{ssrc:xr,type:hr,value:{total_packets_lost_out:Yn.packetsLost}},{ssrc:xr,type:hr,value:{delta_packets_lost_out:Yn.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{$r(Qt,`analyze() - got stats ${Mr.type} for ${Cn}`,Mr);const xr=Mr.ssrc,jr=Jt(xr,rn,gt),en=Jt(xr,Rr,gt);if(Mr.kind===fr){const fn=pr(Mr,fr,en,jr);return[{ssrc:xr,type:mr,value:{delta_rtt_ms_in:fn.rtt}},{ssrc:xr,type:mr,value:{timestamp_in:Mr.timestamp}}]}break}}return[]})(Ur,Cr,Cr.name,null).forEach(Mr=>{if(Mr.value&&Mr.type)if(Mr.ssrc){let Rr=Cr[Mr.type][Mr.ssrc];Rr||(rn=Mr.type,Cn=Ur.type,Rr=rn===fr?Cn===Et?{...xt}:{...yt}:Cn===Et?{...vt}:{...St},Rr.ssrc=Mr.ssrc,Cr[Mr.type][Mr.ssrc]=Rr),Object.keys(Mr.value).forEach(pn=>{Mr.value[pn]!==void 0&&(Rr[pn]=Mr.value[pn])})}else Object.keys(Mr.value).forEach(Rr=>{Mr.value[Rr]!==void 0&&(Cr[Mr.type][Rr]=Mr.value[Rr])});var rn,Cn})}),Cr.timestamp=nr,Cr}async collectStats(){try{const qr=await this._config.monitoringObject.getStats(),wn=this.analyze(qr,this._statsReports.slice().pop()||null);return this._statsReports.push(wn),this.fireOnStatsCollected(wn),qr}catch(qr){return Zr(this._moduleName,`got error ${qr}`),null}}fireOnStatsCollected(qr){if(this._callbacks.onStatsCollected){const wn={};wn.meetingId=qr.meetingId,wn.peerId=qr.peerId,wn.name=qr.name,wn.audio=[],wn.video=[],Object.values(qr.audio).forEach(Cr=>{const nr={};nr.network=vr[qr.network.infrastructure],nr.timestamp=qr.timestamp,Cr.direction==mt?(nr.codec=Cr.codec_in.mime_type,nr.jitter=Cr.delta_jitter_ms_in,nr.bitrate=Cr.delta_kbs_in,nr.packetsLost=Cr.delta_packets_lost_in,nr.rtt=qr.data.delta_rtt_connectivity_ms||0,nr.totalPackets=Cr.delta_packets_in,nr.concealmentEvents=Cr.delta_concealment_events,nr.removedSampleForAccelaration=Cr.delta_removed_samples_for_accelaration,nr.insertedSamplesForDecelaration=Cr.delta_inserted_samples_for_decelaration,nr.trackId=Cr.track_id_in):Cr.direction==gt&&(nr.codec=Cr.codec_out.mime_type,nr.jitter=Cr.delta_jitter_ms_out,nr.bitrate=Cr.delta_kbs_out,nr.packetsLost=Cr.delta_packets_lost_out,nr.rtt=qr.data.delta_rtt_connectivity_ms||0,nr.totalPackets=Cr.delta_packets_out,nr.trackId=Cr.track_id_out),wn.audio.push(nr)}),Object.values(qr.video).forEach(Cr=>{const nr={};nr.network=vr[qr.network.infrastructure],nr.timestamp=qr.timestamp,Cr.direction==mt?(nr.codec=Cr.codec_in.mime_type,nr.jitter=Cr.delta_jitter_ms_in,nr.bitrate=Cr.delta_kbs_in,nr.packetsLost=Cr.delta_packets_lost_in,nr.rtt=qr.data.delta_rtt_connectivity_ms||0,nr.totalPackets=Cr.delta_packets_in,nr.size=Cr.size_in,nr.trackId=Cr.track_id_in):Cr.direction==gt&&(nr.codec=Cr.codec_out.mime_type,nr.jitter=Cr.delta_jitter_ms_out,nr.bitrate=Cr.delta_kbs_out,nr.packetsLost=Cr.delta_packets_lost_out,nr.rtt=qr.data.delta_rtt_connectivity_ms||0,nr.totalPackets=Cr.delta_packets_out,nr.limitation=Cr.limitation_out,nr.size=Cr.size_out,nr.trackId=Cr.track_id_out),wn.video.push(nr)}),this._callbacks.onStatsCollected.callback(wn)}}}class Mn{constructor(qr){this._id=qr.name&&qr.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=qr,this._collector=new Wn(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?hn("Probe already started."):($r(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{$r(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),$r(this._moduleName,"Probe Stopped")):hn("Probe not running, Please start first.")}set onStatsCollected(qr){qr?this._collector.registerCallback("onStatsCollected",qr):this._collector.unregisterCallback("onStatsCollected")}}const sn={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class qn{constructor(qr){var wn;this._config={defaultConfig:sn,...qr},this._probes=[],wn=this._config.verbose||!1,Ir.setLevel(wn?Ir.levels.TRACE:Ir.levels.INFO),$r("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(qr,wn){if(!qr)throw new Error("undefined monitoring object");const Cr={monitoringObject:qr,...wn,...this._config},nr=new Mn(Cr);return this._probes.push(nr),nr}removeExistingProbe(qr){if(!qr)throw new Error("undefined probe");qr.stop(),this._probes=this._probes.filter(wn=>qr.id!==wn.id)}startAllProbes(){this._probes.forEach((qr,wn)=>{qr.start()})}stopAllProbes(){this._probes.forEach(qr=>qr.stop())}}})(),ft})()},7329:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const pt=ht(1227),ft="awaitqueue";dt.Logger=class{constructor(mt){mt?(this._debug=(0,pt.default)(`${ft}:${mt}`),this._warn=(0,pt.default)(`${ft}:WARN:${mt}`),this._error=(0,pt.default)(`${ft}:ERROR:${mt}`)):(this._debug=(0,pt.default)(ft),this._warn=(0,pt.default)(`${ft}:WARN`),this._error=(0,pt.default)(`${ft}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},2186:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.AwaitQueue=dt.AwaitQueueRemovedTaskError=dt.AwaitQueueStoppedError=void 0;const pt=new(ht(7329)).Logger;class ft extends Error{constructor(xt){super(xt??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ft)}}dt.AwaitQueueStoppedError=ft;class mt extends Error{constructor(xt){super(xt??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,mt)}}dt.AwaitQueueRemovedTaskError=mt,dt.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(gt,xt){if(xt=xt??gt.name,pt.debug(`push() [name:${xt}]`),typeof gt!="function")throw new TypeError("given task is not a function");if(xt)try{Object.defineProperty(gt,"name",{value:xt})}catch{}return new Promise((yt,vt)=>{const St={id:this.nextTaskId++,task:gt,name:xt,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:Et=>{if(St.completed)return;St.completed=!0,this.pendingTasks.delete(St.id),pt.debug(`resolving task [name:${St.name}]`),yt(Et);const[wt]=this.pendingTasks.values();wt&&!wt.executedAt&&this.execute(wt)},reject:Et=>{if(!St.completed&&(St.completed=!0,this.pendingTasks.delete(St.id),pt.debug(`rejecting task [name:${St.name}]: %s`,String(Et)),vt(Et),!this.stopping)){const[wt]=this.pendingTasks.values();wt&&!wt.executedAt&&this.execute(wt)}}};this.pendingTasks.set(St.id,St),this.pendingTasks.size===1&&this.execute(St)})}stop(){pt.debug("stop()"),this.stopping=!0;for(const gt of this.pendingTasks.values())pt.debug(`stop() | stopping task [name:${gt.name}]`),gt.reject(new ft);this.stopping=!1}remove(gt){pt.debug(`remove() [taskIdx:${gt}]`);const xt=Array.from(this.pendingTasks.values())[gt];xt?xt.reject(new mt):pt.debug(`stop() | no task with given idx [taskIdx:${gt}]`)}dump(){const gt=Date.now();let xt=0;return Array.from(this.pendingTasks.values()).map(yt=>({idx:xt++,task:yt.task,name:yt.name,enqueuedTime:yt.executedAt?yt.executedAt-yt.enqueuedAt:gt-yt.enqueuedAt,executionTime:yt.executedAt?gt-yt.executedAt:0}))}async execute(gt){if(pt.debug(`execute() [name:${gt.name}]`),gt.executedAt)throw new Error("task already being executed");gt.executedAt=Date.now();try{const xt=await gt.task();gt.resolve(xt)}catch(xt){gt.reject(xt)}}}},8962:(ut,dt,ht)=>{ht.d(dt,{v:()=>pt});var pt={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:3},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:15}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},6900:(ut,dt,ht)=>{ht.d(dt,{H:()=>ft,R:()=>pt});var pt={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016},ft={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."}}},6380:(ut,dt,ht)=>{ht.d(dt,{o:()=>pt});var pt={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},3430:(ut,dt,ht)=>{ht.d(dt,{S:()=>pt});var pt={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},8225:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{VideoSDK:()=>Pu,ZujoSDK:()=>ev});var pt=ht(1002),ft=ht(5861),mt=ht(5671),gt=ht(3144),xt=ht(4942),yt=ht(4687),vt=ht.n(yt),St=ht(1206),Et=ht.n(St);function wt(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function Rt(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?wt(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):wt(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}function Tt(Yt){return"Minified Redux error #"+Yt+"; visit https://redux.js.org/Errors?code="+Yt+" for the full message or use the non-minified dev environment for full errors. "}var It=typeof Symbol=="function"&&Symbol.observable||"@@observable",At=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dt={INIT:"@@redux/INIT"+At(),REPLACE:"@@redux/REPLACE"+At(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+At()}};function jt(Yt){if(typeof Yt!="object"||Yt===null)return!1;for(var er=Yt;Object.getPrototypeOf(er)!==null;)er=Object.getPrototypeOf(er);return Object.getPrototypeOf(Yt)===er}function Ft(Yt,er,rr){var _r;if(typeof er=="function"&&typeof rr=="function"||typeof rr=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof er=="function"&&rr===void 0&&(rr=er,er=void 0),rr!==void 0){if(typeof rr!="function")throw new Error(Tt(1));return rr(Ft)(Yt,er)}if(typeof Yt!="function")throw new Error(Tt(2));var Er=Yt,Nr=er,Xr=[],Yr=Xr,gn=!1;function kr(){Yr===Xr&&(Yr=Xr.slice())}function Hr(){if(gn)throw new Error(Tt(3));return Nr}function Lr(En){if(typeof En!="function")throw new Error(Tt(4));if(gn)throw new Error(Tt(5));var Kn=!0;return kr(),Yr.push(En),function(){if(Kn){if(gn)throw new Error(Tt(6));Kn=!1,kr();var zn=Yr.indexOf(En);Yr.splice(zn,1),Xr=null}}}function on(En){if(!jt(En))throw new Error(Tt(7));if(En.type===void 0)throw new Error(Tt(8));if(gn)throw new Error(Tt(9));try{gn=!0,Nr=Er(Nr,En)}finally{gn=!1}for(var Kn=Xr=Yr,zn=0;zn<Kn.length;zn++)(0,Kn[zn])();return En}return on({type:Dt.INIT}),(_r={dispatch:on,subscribe:Lr,getState:Hr,replaceReducer:function(En){if(typeof En!="function")throw new Error(Tt(10));Er=En,on({type:Dt.REPLACE})}})[It]=function(){var En,Kn=Lr;return(En={subscribe:function(zn){if(typeof zn!="object"||zn===null)throw new Error(Tt(11));function Xn(){zn.next&&zn.next(Hr())}return Xn(),{unsubscribe:Kn(Xn)}}})[It]=function(){return this},En},_r}function Lt(){for(var Yt=arguments.length,er=new Array(Yt),rr=0;rr<Yt;rr++)er[rr]=arguments[rr];return er.length===0?function(_r){return _r}:er.length===1?er[0]:er.reduce(function(_r,Er){return function(){return _r(Er.apply(void 0,arguments))}})}function Pt(){for(var Yt=arguments.length,er=new Array(Yt),rr=0;rr<Yt;rr++)er[rr]=arguments[rr];return function(_r){return function(){var Er=_r.apply(void 0,arguments),Nr=function(){throw new Error(Tt(15))},Xr={getState:Er.getState,dispatch:function(){return Nr.apply(void 0,arguments)}},Yr=er.map(function(gn){return gn(Xr)});return Nr=Lt.apply(void 0,Yr)(Er.dispatch),Rt(Rt({},Er),{},{dispatch:Nr})}}}function Ot(Yt){return function(er){var rr=er.dispatch,_r=er.getState;return function(Er){return function(Nr){return typeof Nr=="function"?Nr(rr,_r,Yt):Er(Nr)}}}}var Nt=Ot();Nt.withExtraArgument=Ot;const $t=Nt;var Vt=ht(3196),Ut=ht.n(Vt);function zt(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function Bt(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?zt(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):zt(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var Ht={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const Gt=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_URL":var rr=er.payload.url;return Bt(Bt({},Yt),{},{url:rr});case"SET_ROOM_STATE":var _r=er.payload.state;return Bt(Bt({},Yt),{},_r==="connected"?{state:_r}:{state:_r,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Er=er.payload.peerId;return Bt(Bt({},Yt),{},{activeSpeakerId:Er});case"SET_ROOM_STATS_PEER_ID":var Nr=er.payload.peerId;return Yt.statsPeerId===Nr?Bt(Bt({},Yt),{},{statsPeerId:null}):Bt(Bt({},Yt),{},{statsPeerId:Nr});case"SET_FACE_DETECTION":var Xr=er.payload;return Bt(Bt({},Yt),{},{faceDetection:Xr});case"REMOVE_PEER":var Yr=er.payload.peerId,gn=Bt({},Yt);return Yr&&Yr===Yt.activeSpeakerId&&(gn.activeSpeakerId=null),Yr&&Yr===Yt.statsPeerId&&(gn.statsPeerId=null),gn;default:return Yt}};function Kt(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function Xt(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?Kt(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):Kt(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var or={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const tr=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:or,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?Xt(Xt({},Yt),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):Yt;case"SET_ME":var rr=er.payload,_r=rr.peerId,Er=rr.displayName,Nr=rr.displayNameSet,Xr=rr.device;return Xt(Xt({},Yt),{},{id:_r,displayName:Er,displayNameSet:Nr,device:Xr});case"SET_MEDIA_CAPABILITIES":var Yr=er.payload,gn=Yr.canSendMic,kr=Yr.canSendWebcam;return Xt(Xt({},Yt),{},{canSendMic:gn,canSendWebcam:kr});case"SET_CAN_CHANGE_WEBCAM":var Hr=er.payload;return Xt(Xt({},Yt),{},{canChangeWebcam:Hr});case"SET_WEBCAM_IN_PROGRESS":var Lr=er.payload.flag;return Xt(Xt({},Yt),{},{webcamInProgress:Lr});case"SET_SHARE_IN_PROGRESS":var on=er.payload.flag;return Xt(Xt({},Yt),{},{shareInProgress:on});case"SET_DISPLAY_NAME":var En=er.payload.displayName;return En||(En=Yt.displayName),Xt(Xt({},Yt),{},{displayName:En,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var Kn=er.payload.enabled;return Xt(Xt({},Yt),{},{audioOnly:Kn});case"SET_AUDIO_ONLY_IN_PROGRESS":var zn=er.payload.flag;return Xt(Xt({},Yt),{},{audioOnlyInProgress:zn});case"SET_AUDIO_MUTED_STATE":var Xn=er.payload.enabled;return Xt(Xt({},Yt),{},{audioMuted:Xn});case"SET_RESTART_ICE_IN_PROGRESS":var Zn=er.payload.flag;return Xt(Xt({},Yt),{},{restartIceInProgress:Zn});default:return Yt}};function dr(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function fr(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?dr(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):dr(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var Sr={};const vr=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sr,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?{}:Yt;case"ADD_PRODUCER":var rr=er.payload.producer;return fr(fr({},Yt),{},(0,xt.Z)({},rr.id,rr));case"REMOVE_PRODUCER":var _r=er.payload.producerId,Er=fr({},Yt);return delete Er[_r],Er;case"SET_PRODUCER_PAUSED":var Nr=er.payload.producerId,Xr=fr(fr({},Yt[Nr]),{},{paused:!0});return fr(fr({},Yt),{},(0,xt.Z)({},Nr,Xr));case"SET_PRODUCER_RESUMED":var Yr=er.payload.producerId,gn=fr(fr({},Yt[Yr]),{},{paused:!1});return fr(fr({},Yt),{},(0,xt.Z)({},Yr,gn));case"SET_PRODUCER_TRACK":var kr=er.payload,Hr=kr.producerId,Lr=kr.track,on=fr(fr({},Yt[Hr]),{},{track:Lr});return fr(fr({},Yt),{},(0,xt.Z)({},Hr,on));case"SET_PRODUCER_SCORE":var En=er.payload,Kn=En.producerId,zn=En.score,Xn=Yt[Kn];if(!Xn)return Yt;var Zn=fr(fr({},Xn),{},{score:zn});return fr(fr({},Yt),{},(0,xt.Z)({},Kn,Zn));default:return Yt}};function mr(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function hr(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?mr(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):mr(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var gr={};const lr=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gr,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?{}:Yt;case"ADD_DATA_PRODUCER":var rr=er.payload.dataProducer;return hr(hr({},Yt),{},(0,xt.Z)({},rr.id,rr));case"REMOVE_DATA_PRODUCER":var _r=er.payload.dataProducerId,Er=hr({},Yt);return delete Er[_r],Er;default:return Yt}};var Ir=ht(2982);function wr(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function Fr(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?wr(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):wr(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var $r={};function hn(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function Zr(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?hn(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):hn(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var Qt={};function Jt(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function pr(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?Jt(Object(rr),!0).forEach(function(_r){(0,xt.Z)(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):Jt(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}var Vr={},Wr=[];const zr=function(Yt){for(var er=Object.keys(Yt),rr={},_r=0;_r<er.length;_r++){var Er=er[_r];typeof Yt[Er]=="function"&&(rr[Er]=Yt[Er])}var Nr,Xr=Object.keys(rr);try{(function(Yr){Object.keys(Yr).forEach(function(gn){var kr=Yr[gn];if(kr(void 0,{type:Dt.INIT})===void 0)throw new Error(Tt(12));if(kr(void 0,{type:Dt.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(Tt(13))})})(rr)}catch(Yr){Nr=Yr}return function(Yr,gn){if(Yr===void 0&&(Yr={}),Nr)throw Nr;for(var kr=!1,Hr={},Lr=0;Lr<Xr.length;Lr++){var on=Xr[Lr],En=rr[on],Kn=Yr[on],zn=En(Kn,gn);if(zn===void 0)throw gn&&gn.type,new Error(Tt(14));Hr[on]=zn,kr=kr||zn!==Kn}return(kr=kr||Xr.length!==Object.keys(Yr).length)?Hr:Yr}}({room:Gt,me:tr,producers:vr,dataProducers:lr,peers:function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$r,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?{}:Yt;case"ADD_PEER":var rr=er.payload.peer;return Fr(Fr({},Yt),{},(0,xt.Z)({},rr.id,rr));case"REMOVE_PEER":var _r=er.payload.peerId,Er=Fr({},Yt);return delete Er[_r],Er;case"SET_PEER_DISPLAY_NAME":var Nr=er.payload,Xr=Nr.displayName,Yr=Yt[Nr.peerId];if(!Yr)throw new Error("no Peer found");var gn=Fr(Fr({},Yr),{},{displayName:Xr});return Fr(Fr({},Yt),{},(0,xt.Z)({},gn.id,gn));case"ADD_CONSUMER":var kr=er.payload,Hr=kr.consumer,Lr=Yt[kr.peerId];if(!Lr)throw new Error("no Peer found for new Consumer");var on=[].concat((0,Ir.Z)(Lr.consumers),[Hr.id]),En=Fr(Fr({},Lr),{},{consumers:on});return Fr(Fr({},Yt),{},(0,xt.Z)({},En.id,En));case"REMOVE_CONSUMER":var Kn=er.payload,zn=Kn.consumerId,Xn=Yt[Kn.peerId];if(!Xn)return Yt;var Zn=Xn.consumers.indexOf(zn);if(Zn===-1)throw new Error("Consumer not found");var In=Xn.consumers.slice();In.splice(Zn,1);var kn=Fr(Fr({},Xn),{},{consumers:In});return Fr(Fr({},Yt),{},(0,xt.Z)({},kn.id,kn));case"ADD_DATA_CONSUMER":var Ln=er.payload,us=Ln.dataConsumer,ys=Ln.peerId;if(!ys)return Yt;var Ys=Yt[ys];if(!Ys)throw new Error("no Peer found for new DataConsumer");var Vs=[].concat((0,Ir.Z)(Ys.dataConsumers),[us.id]),Bo=Fr(Fr({},Ys),{},{dataConsumers:Vs});return Fr(Fr({},Yt),{},(0,xt.Z)({},Bo.id,Bo));case"REMOVE_DATA_CONSUMER":var Go=er.payload,_o=Go.dataConsumerId,El=Go.peerId;if(!El)return Yt;var ho=Yt[El];if(!ho)return Yt;var xa=ho.dataConsumers.indexOf(_o);if(xa===-1)throw new Error("DataConsumer not found");var Xl=ho.dataConsumers.slice();Xl.splice(xa,1);var ru=Fr(Fr({},ho),{},{dataConsumers:Xl});return Fr(Fr({},Yt),{},(0,xt.Z)({},ru.id,ru));default:return Yt}},consumers:function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?{}:Yt;case"ADD_CONSUMER":var rr=er.payload.consumer;return Zr(Zr({},Yt),{},(0,xt.Z)({},rr.id,rr));case"REMOVE_CONSUMER":var _r=er.payload.consumerId,Er=Zr({},Yt);return delete Er[_r],Er;case"SET_CONSUMER_PAUSED":var Nr,Xr=er.payload,Yr=Xr.consumerId,gn=Xr.originator,kr=Yt[Yr];return Nr=Zr(Zr({},kr),{},gn==="local"?{locallyPaused:!0}:{remotelyPaused:!0}),Zr(Zr({},Yt),{},(0,xt.Z)({},Yr,Nr));case"SET_CONSUMER_RESUMED":var Hr,Lr=er.payload,on=Lr.consumerId,En=Lr.originator,Kn=Yt[on];return Hr=Zr(Zr({},Kn),{},En==="local"?{locallyPaused:!1}:{remotelyPaused:!1}),Zr(Zr({},Yt),{},(0,xt.Z)({},on,Hr));case"SET_CONSUMER_CURRENT_LAYERS":var zn=er.payload,Xn=zn.consumerId,Zn=zn.spatialLayer,In=zn.temporalLayer,kn=Zr(Zr({},Yt[Xn]),{},{currentSpatialLayer:Zn,currentTemporalLayer:In});return Zr(Zr({},Yt),{},(0,xt.Z)({},Xn,kn));case"SET_CONSUMER_PREFERRED_LAYERS":var Ln=er.payload,us=Ln.consumerId,ys=Ln.spatialLayer,Ys=Ln.temporalLayer,Vs=Zr(Zr({},Yt[us]),{},{preferredSpatialLayer:ys,preferredTemporalLayer:Ys});return Zr(Zr({},Yt),{},(0,xt.Z)({},us,Vs));case"SET_CONSUMER_PRIORITY":var Bo=er.payload,Go=Bo.consumerId,_o=Bo.priority,El=Zr(Zr({},Yt[Go]),{},{priority:_o});return Zr(Zr({},Yt),{},(0,xt.Z)({},Go,El));case"SET_CONSUMER_TRACK":var ho=er.payload,xa=ho.consumerId,Xl=ho.track,ru=Zr(Zr({},Yt[xa]),{},{track:Xl});return Zr(Zr({},Yt),{},(0,xt.Z)({},xa,ru));case"SET_CONSUMER_SCORE":var Au=er.payload,Qo=Au.consumerId,Op=Au.score,Gp=Yt[Qo];if(!Gp)return Yt;var mm=Zr(Zr({},Gp),{},{score:Op});return Zr(Zr({},Yt),{},(0,xt.Z)({},Qo,mm));default:return Yt}},dataConsumers:function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vr,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"SET_ROOM_STATE":return er.payload.state==="closed"?{}:Yt;case"ADD_DATA_CONSUMER":var rr=er.payload.dataConsumer;return pr(pr({},Yt),{},(0,xt.Z)({},rr.id,rr));case"REMOVE_DATA_CONSUMER":var _r=er.payload.dataConsumerId,Er=pr({},Yt);return delete Er[_r],Er;default:return Yt}},notifications:function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wr,er=arguments.length>1?arguments[1]:void 0;switch(er.type){case"ADD_NOTIFICATION":var rr=er.payload.notification;return[].concat((0,Ir.Z)(Yt),[rr]);case"REMOVE_NOTIFICATION":var _r=er.payload.notificationId;return Yt.filter(function(Er){return Er.id!==_r});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return Yt}}});var ln=ht(3003);function xn(Yt,er,rr){if(!er.has(Yt))throw new TypeError("attempted to "+rr+" private field on non-instance");return er.get(Yt)}function yn(Yt,er){return function(rr,_r){return _r.get?_r.get.call(rr):_r.value}(Yt,xn(Yt,er,"get"))}function Wn(Yt,er,rr){return function(_r,Er,Nr){if(Er.set)Er.set.call(_r,Nr);else{if(!Er.writable)throw new TypeError("attempted to set read only private field");Er.value=Nr}}(Yt,xn(Yt,er,"set"),rr),rr}var Mn=ht(7187),sn=ht(885),qn=(ht(3003).default,(0,gt.Z)(function Yt(){(0,mt.Z)(this,Yt),this.roomClient=null})),Gr=new(function(){function Yt(){(0,mt.Z)(this,Yt),Yt.instance||(Yt.instance=new qn)}return(0,gt.Z)(Yt,[{key:"getInstance",value:function(){return Yt.instance}}]),Yt}());Object.freeze(Gr);var qr=Gr.getInstance(),wn=function(){function Yt(er){(0,mt.Z)(this,Yt),this.id=er.id,this.kind=er.track.kind,this.codec=er.codec,this.track=er.track,this.producerOrConsumer=er.instance,er.appData&&er.appData.share===!0&&er.track.kind==="video"&&(this.kind="share"),er.appData&&er.appData.share===!0&&er.track.kind==="audio"&&(this.kind="shareAudio")}return(0,gt.Z)(Yt,[{key:"pause",value:function(){qr.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){qr.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}]),Yt}();function Cr(Yt,er){var rr=typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(!rr){if(Array.isArray(Yt)||(rr=function(gn,kr){if(gn){if(typeof gn=="string")return nr(gn,kr);var Hr=Object.prototype.toString.call(gn).slice(8,-1);if(Hr==="Object"&&gn.constructor&&(Hr=gn.constructor.name),Hr==="Map"||Hr==="Set")return Array.from(gn);if(Hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Hr))return nr(gn,kr)}}(Yt))||er&&Yt&&typeof Yt.length=="number"){rr&&(Yt=rr);var _r=0,Er=function(){};return{s:Er,n:function(){return _r>=Yt.length?{done:!0}:{done:!1,value:Yt[_r++]}},e:function(gn){throw gn},f:Er}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nr,Xr=!0,Yr=!1;return{s:function(){rr=rr.call(Yt)},n:function(){var gn=rr.next();return Xr=gn.done,gn},e:function(gn){Yr=!0,Nr=gn},f:function(){try{Xr||rr.return==null||rr.return()}finally{if(Yr)throw Nr}}}}function nr(Yt,er){(er==null||er>Yt.length)&&(er=Yt.length);for(var rr=0,_r=new Array(er);rr<er;rr++)_r[rr]=Yt[rr];return _r}var Ur="stream-enabled",Mr="stream-disabled",rn="media-status-changed",Cn="video-quality-changed",Rr=function(){function Yt(Nr){var Xr=this;(0,mt.Z)(this,Yt),(0,xt.Z)(this,"captureImage",(0,ft.Z)(vt().mark(function Yr(){var gn,kr,Hr,Lr,on,En,Kn,zn,Xn=arguments;return vt().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:kr=(gn=Xn.length>0&&Xn[0]!==void 0?Xn[0]:{}).height,Hr=gn.width,Zn.prev=1,Lr=(0,Ir.Z)(Xr.streams.values()),on=Cr(Lr),Zn.prev=4,Kn=vt().mark(function In(){var kn,Ln,us,ys,Ys;return vt().wrap(function(Vs){for(;;)switch(Vs.prev=Vs.next){case 0:if((kn=En.value).kind!="video"){Vs.next=19;break}return Vs.prev=2,(Ln=new MediaStream).addTrack(kn.track),(us=document.createElement("video")).srcObject=Ln,us.playsInline=!0,(ys=document.createElement("canvas")).id="canvasId",Vs.next=12,new Promise(function(Bo,Go){us.addEventListener("loadeddata",(0,ft.Z)(vt().mark(function _o(){var El,ho,xa,Xl,ru,Au;return vt().wrap(function(Qo){for(;;)switch(Qo.prev=Qo.next){case 0:return El=us.videoWidth,ho=us.videoHeight,xa=16/9,kr==null&&Hr==null&&(kr=ho,Hr=El),kr==null&&kr==null||(kr<=0||kr>ho)&&(kr=ho),Hr==null&&Hr==null||(Hr<=0||Hr>El)&&(Hr=El),kr==null&&(kr=Hr/xa),Hr==null&&(Hr=kr*xa),ys.width=Hr,ys.height=kr,Qo.prev=9,Qo.next=12,us.play();case 12:document.body.appendChild(us),Xl=(ys.width-El*xa)/2,ru=(ys.height-ho*xa)/2,ys.getContext("2d").clearRect(0,0,Xl/2,ru/2),ys.getContext("2d").drawImage(us,0,0),Au=ys.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(ys),document.body.removeChild(ys),document.body.removeChild(us),Bo(Au),Qo.next=28;break;case 24:Qo.prev=24,Qo.t0=Qo.catch(9),Go(Qo.t0),console.log("error in video",Qo.t0);case 28:case"end":return Qo.stop()}},_o,null,[[9,24]])})))});case 12:return Ys=Vs.sent,Vs.abrupt("return",{v:Ys});case 16:Vs.prev=16,Vs.t0=Vs.catch(2),console.error("err on image capture",Vs.t0);case 19:case"end":return Vs.stop()}},In,null,[[2,16]])}),on.s();case 7:if((En=on.n()).done){Zn.next=14;break}return Zn.delegateYield(Kn(),"t0",9);case 9:if(!(zn=Zn.t0)){Zn.next=12;break}return Zn.abrupt("return",zn.v);case 12:Zn.next=7;break;case 14:Zn.next=19;break;case 16:Zn.prev=16,Zn.t1=Zn.catch(4),on.e(Zn.t1);case 19:return Zn.prev=19,on.f(),Zn.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:Zn.prev=25,Zn.t2=Zn.catch(1),console.error("Error in captureImage::",Zn.t2),qr.roomClient._videosdkLogs&&qr.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:Zn.t2.message}});case 29:case"end":return Zn.stop()}},Yr,null,[[1,25],[4,16,19,22]])}))),this.id=Nr.id,this.displayName=Nr.displayName,this.streams=new Map,this.quality="low",this.local=Nr.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=Nr.mode,this.metaData=Nr.metaData,this.eventEmitter=new Mn.EventEmitter}var er,rr,_r,Er;return(0,gt.Z)(Yt,[{key:"_setPinState",value:function(Nr){Nr.cam!=null&&(this.pinState.cam=Nr.cam),Nr.share!=null&&(this.pinState.share=Nr.share)}},{key:"remove",value:function(){qr.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){qr.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){qr.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){qr.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){qr.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(Nr){this.streams.set(Nr.id,Nr),Nr.kind!=="video"||this.local||qr.roomClient.setConsumerQuality(Nr.id,this.quality),this.eventEmitter.emit(Ur,Nr)}},{key:"updateStream",value:function(Nr){this.streams.set(Nr.id,Nr),this.eventEmitter.emit(Ur,Nr)}},{key:"deleteStream",value:function(Nr){var Xr=this.streams.get(Nr);if(Xr!=null)return this.streams.delete(Nr),this.eventEmitter.emit(Mr,Xr),Xr}},{key:"updateParticipantMediaState",value:function(Nr,Xr){Nr=="audio"?this.micOn=Xr:Nr=="video"&&(this.webcamOn=Xr),this.eventEmitter.emit(rn,{peerId:this.id,kind:Nr,newStatus:Xr})}},{key:"videoQualityChanged",value:function(Nr,Xr){this.eventEmitter.emit(Cn,{peerId:this.id,prevQuality:Nr,currentQuality:Xr})}},{key:"setQuality",value:function(Nr){this.quality===Nr||this.local||(this.quality=Nr,(0,Ir.Z)(this.streams.entries()).forEach(function(Xr){var Yr=Xr[1];Yr.kind==="video"&&qr.roomClient.setConsumerQuality(Yr.id,Nr)}))}},{key:"setViewPort",value:function(Nr,Xr){(0,Ir.Z)(this.streams.entries()).forEach(function(Yr){var gn=Yr[1];gn.kind==="video"&&qr.roomClient.setViewPort(gn.producerOrConsumer,Nr,Xr)})}},{key:"pin",value:function(Nr){switch(Nr){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}qr.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(Nr){switch(Nr){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}qr.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Er=(0,ft.Z)(vt().mark(function Nr(Xr){var Yr,gn,kr;return vt().wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return Yr=Xr.meetingId,gn=Xr.payload,kr=Xr.token,Hr.next=3,qr.roomClient.switchPeerRoom({peerId:this.id,roomId:Yr,payload:gn,token:kr});case 3:case"end":return Hr.stop()}},Nr,this)})),function(Nr){return Er.apply(this,arguments)})},{key:"getVideoStats",value:(_r=(0,ft.Z)(vt().mark(function Nr(){var Xr,Yr,gn,kr,Hr;return vt().wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:if(!this.local){Lr.next=6;break}return Lr.next=3,qr.roomClient.getVideoRemoteStats();case 3:return Lr.abrupt("return",Lr.sent);case 6:Xr=(0,Ir.Z)(this.streams.entries()),Yr=Cr(Xr),Lr.prev=8,Yr.s();case 10:if((gn=Yr.n()).done){Lr.next=18;break}if(kr=(0,sn.Z)(gn.value,2),Hr=kr[0],kr[1].kind!="video"){Lr.next=16;break}return Lr.next=15,qr.roomClient.getConsumerRemoteStats(Hr);case 15:return Lr.abrupt("return",Lr.sent);case 16:Lr.next=10;break;case 18:Lr.next=23;break;case 20:Lr.prev=20,Lr.t0=Lr.catch(8),Yr.e(Lr.t0);case 23:return Lr.prev=23,Yr.f(),Lr.finish(23);case 26:case"end":return Lr.stop()}},Nr,this,[[8,20,23,26]])})),function(){return _r.apply(this,arguments)})},{key:"getShareStats",value:(rr=(0,ft.Z)(vt().mark(function Nr(){var Xr,Yr,gn,kr,Hr;return vt().wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:if(!this.local){Lr.next=6;break}return Lr.next=3,qr.roomClient.getShareRemoteStats();case 3:return Lr.abrupt("return",Lr.sent);case 6:Xr=(0,Ir.Z)(this.streams.entries()),Yr=Cr(Xr),Lr.prev=8,Yr.s();case 10:if((gn=Yr.n()).done){Lr.next=18;break}if(kr=(0,sn.Z)(gn.value,2),Hr=kr[0],kr[1].kind!="share"){Lr.next=16;break}return Lr.next=15,qr.roomClient.getConsumerRemoteStats(Hr);case 15:return Lr.abrupt("return",Lr.sent);case 16:Lr.next=10;break;case 18:Lr.next=23;break;case 20:Lr.prev=20,Lr.t0=Lr.catch(8),Yr.e(Lr.t0);case 23:return Lr.prev=23,Yr.f(),Lr.finish(23);case 26:case"end":return Lr.stop()}},Nr,this,[[8,20,23,26]])})),function(){return rr.apply(this,arguments)})},{key:"getAudioStats",value:(er=(0,ft.Z)(vt().mark(function Nr(){var Xr,Yr,gn,kr,Hr;return vt().wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:if(this.micOn){Lr.next=2;break}return Lr.abrupt("return",[]);case 2:if(!this.local){Lr.next=8;break}return Lr.next=5,qr.roomClient.getAudioRemoteStats();case 5:return Lr.abrupt("return",Lr.sent);case 8:Xr=(0,Ir.Z)(this.streams.entries()),Yr=Cr(Xr),Lr.prev=10,Yr.s();case 12:if((gn=Yr.n()).done){Lr.next=20;break}if(kr=(0,sn.Z)(gn.value,2),Hr=kr[0],kr[1].kind!="audio"){Lr.next=18;break}return Lr.next=17,qr.roomClient.getConsumerRemoteStats(Hr);case 17:return Lr.abrupt("return",Lr.sent);case 18:Lr.next=12;break;case 20:Lr.next=25;break;case 22:Lr.prev=22,Lr.t0=Lr.catch(10),Yr.e(Lr.t0);case 25:return Lr.prev=25,Yr.f(),Lr.finish(25);case 28:case"end":return Lr.stop()}},Nr,this,[[10,22,25,28]])})),function(){return er.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){qr.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){qr.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){qr.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){qr.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(Nr,Xr){switch(Nr){case Ur:case Mr:case rn:case Cn:this.eventEmitter.on(Nr,Xr);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(Nr,Xr){switch(Nr){case Ur:case Mr:case rn:case Cn:this.eventEmitter.off(Nr,Xr);break;default:throw new Error("Invalid event type")}}}]),Yt}();function pn(Yt,er,rr){(function(_r,Er){if(Er.has(_r))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Yt,er),er.set(Yt,rr)}var Tr=new WeakMap,xr=function(){function Yt(rr,_r){var Er=rr.id,Nr=rr.displayName;(0,mt.Z)(this,Yt),pn(this,Tr,{writable:!0,value:void 0}),this.id=Er,this.displayName=Nr,Wn(this,Tr,_r)}var er;return(0,gt.Z)(Yt,[{key:"switchTo",value:(er=(0,ft.Z)(vt().mark(function rr(_r){var Er,Nr,Xr;return vt().wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:return Er=_r.meetingId,Nr=_r.payload,Xr=_r.token,Yr.next=3,qr.roomClient.connectionSwitchPeerRoom({roomId:Er,connectionRoomId:yn(this,Tr),payload:Nr,peerId:this.id,token:Xr});case 3:case"end":return Yr.stop()}},rr,this)})),function(rr){return er.apply(this,arguments)})}]),Yt}(),jr="participant-joined",en="participant-left",fn="chat-message",Vn=function(){function Yt(rr,_r){var Er=this;(0,mt.Z)(this,Yt),this.eventEmitter=new Mn.EventEmitter,this.id=rr,this.participants=new Map,_r.forEach(function(Nr){Er.participants.set(Nr.id,new xr(Nr,Er.id))})}var er;return(0,gt.Z)(Yt,[{key:"participantJoin",value:function(rr){var _r=new xr(rr,this.id);this.participants.set(rr.id,_r),this.eventEmitter.emit(jr,_r)}},{key:"participantLeft",value:function(rr){this.participants.delete(rr),this.eventEmitter.emit(en,rr)}},{key:"sendChatMessage",value:function(rr){qr.roomClient.connectionSendChatMessage({roomId:this.id,message:rr})}},{key:"sendChatMessageEvent",value:function(rr){var _r=rr.participantId,Er=rr.message;this.eventEmitter.emit(fn,{participantId:_r,message:Er})}},{key:"end",value:(er=(0,ft.Z)(vt().mark(function rr(){return vt().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return _r.next=2,qr.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return _r.stop()}},rr,this)})),function(){return er.apply(this,arguments)})},{key:"on",value:function(rr,_r){switch(rr){case jr:case en:case fn:this.eventEmitter.on(rr,_r);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(rr,_r){switch(rr){case jr:case en:case fn:this.eventEmitter.off(rr,_r);break;default:throw new Error("Invalid event type")}}}]),Yt}(),Yn=function(){function Yt(er){var rr=er.roomId,_r=er.peers,Er=er.payload;(0,mt.Z)(this,Yt),this.id=rr,this.payload=Er,this.meeting=new Vn(rr,_r)}return(0,gt.Z)(Yt,[{key:"close",value:function(){qr.roomClient.closeConnection(this.id)}}]),Yt}();function Hn(Yt,er){Bn(Yt,er),er.add(Yt)}function Bn(Yt,er){if(er.has(Yt))throw new TypeError("Cannot initialize the same private elements twice on an object")}function es(Yt,er,rr){if(!er.has(Yt))throw new TypeError("attempted to get private field on non-instance");return rr}var $s="error",Ss="meeting-joined",zs="meeting-left",ro="participant-mode-changed",Po="participant-joined",To="participant-left",qo="speaker-changed",$a="presenter-changed",Ll="main-participant-changed",Rl="chat-message",Ar="entry-requested",_n="entry-responded",Pn="recording-state-changed",Tn="recording-started",Or="recording-stopped",ds="livestream-state-changed",_i="livestream-started",hs="livestream-stopped",Ms="hls-state-changed",Us="hls-started",Hs="hls-stopped",tn="whiteboard-started",Ao="whiteboard-stopped",mn="video-state-changed",Rn="video-seeked",Un="mic-requested",Dn="webcam-requested",$n="stream-enabled",Os="stream-disabled",cs="pin-state-changed",ks="connection-open",Ps="connection-close",oo="switch-meeting",As="meeting-state-changed",Ns=new WeakMap,Uo=new WeakSet,Vo=new WeakSet,yo=function(){function Yt(kr,Hr,Lr){var on,En,Kn,zn,Xn,Zn,In=this;(0,mt.Z)(this,Yt),Hn(this,Vo),Hn(this,Uo),Kn={writable:!0,value:void 0},Bn(on=this,En=Ns),En.set(on,Kn),(0,xt.Z)(this,"pubSub",{publish:(Zn=(0,ft.Z)(vt().mark(function kn(Ln,us,ys,Ys){return vt().wrap(function(Vs){for(;;)switch(Vs.prev=Vs.next){case 0:if(Ys==null){Vs.next=3;break}if((0,pt.Z)(Ys)=="object"){Vs.next=3;break}throw new Error('"payload" can only be object.');case 3:return Vs.next=5,In.roomClient.pubsubPublish(Ln,us,ys,Ys);case 5:case"end":return Vs.stop()}},kn)})),function(kn,Ln,us,ys){return Zn.apply(this,arguments)}),subscribe:(Xn=(0,ft.Z)(vt().mark(function kn(Ln,us){var ys;return vt().wrap(function(Ys){for(;;)switch(Ys.prev=Ys.next){case 0:if(!yn(In,Ns).listeners(Ln).includes(us)){Ys.next=2;break}return Ys.abrupt("return");case 2:return Ys.next=4,In.roomClient.pubsubSubscribe(Ln);case 4:return ys=Ys.sent,yn(In,Ns).on(Ln,us),Ys.abrupt("return",ys);case 7:case"end":return Ys.stop()}},kn)})),function(kn,Ln){return Xn.apply(this,arguments)}),unsubscribe:(zn=(0,ft.Z)(vt().mark(function kn(Ln,us){return vt().wrap(function(ys){for(;;)switch(ys.prev=ys.next){case 0:if(yn(In,Ns).off(Ln,us),yn(In,Ns).listeners(Ln).length!=0){ys.next=4;break}return ys.next=4,In.roomClient.pubsubUnsubscribe(Ln);case 4:case"end":return ys.stop()}},kn)})),function(kn,Ln){return zn.apply(this,arguments)})}),(0,xt.Z)(this,"uploadBase64File",function(){var kn=(0,ft.Z)(vt().mark(function Ln(us){var ys,Ys,Vs,Bo,Go,_o,El;return vt().wrap(function(ho){for(;;)switch(ho.prev=ho.next){case 0:if(ys=us.base64Data,Ys=us.token,Vs=us.fileName,ho.prev=1,ys&&Ys&&Vs){ho.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Bo="https://".concat(In.baseUrl,"/base64-upload?roomId=").concat(In.id),Go={fileName:Vs,base64Data:ys},ho.next=8,fetch(Bo,{method:"POST",body:JSON.stringify(Go),headers:{"Content-Type":"application/json",Authorization:Ys}});case 8:return _o=ho.sent,ho.next=11,_o.json();case 11:return El=ho.sent,ho.abrupt("return",El.url);case 15:ho.prev=15,ho.t0=ho.catch(1),console.error("Error while Uploading Base64 File::",ho.t0),In.roomClient._videosdkLogs&&In.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:ho.t0.message}});case 19:case"end":return ho.stop()}},Ln,null,[[1,15]])}));return function(Ln){return kn.apply(this,arguments)}}()),(0,xt.Z)(this,"fetchBase64File",function(){var kn=(0,ft.Z)(vt().mark(function Ln(us){var ys,Ys,Vs,Bo,Go;return vt().wrap(function(_o){for(;;)switch(_o.prev=_o.next){case 0:if(ys=us.url,Ys=us.token,_o.prev=1,ys&&Ys){_o.next=4;break}throw new Error("please provide url and token");case 4:return _o.next=6,fetch(ys,{headers:{Authorization:Ys}});case 6:return Vs=_o.sent,_o.next=9,Vs.arrayBuffer();case 9:return Bo=_o.sent,Go=window.btoa(new Uint8Array(Bo).reduce(function(El,ho){return El+String.fromCharCode(ho)},"")),_o.abrupt("return",Go);case 14:_o.prev=14,_o.t0=_o.catch(1),console.error("Error while fetching Base64 File::",_o.t0),In.roomClient._videosdkLogs&&In.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:_o.t0.message}});case 18:case"end":return _o.stop()}},Ln,null,[[1,14]])}));return function(Ln){return kn.apply(this,arguments)}}()),this.id=kr,this.roomClient=Lr,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Hr,this.participants=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Mn.EventEmitter,Wn(this,Ns,new Mn.EventEmitter),this.eventEmitter.setMaxListeners(9999),yn(this,Ns).setMaxListeners(9999),this.roomClient.on("ERROR",function(kn){return In.handleError(kn)}),this.roomClient.on("ADD_PEER",function(kn){return In.handlePeerAdd(kn)}),this.roomClient.on("REMOVE_PEER",function(kn){return In.handlePeerRemove(kn)}),this.roomClient.on("ADD_PRODUCER",function(kn){return In.handleProducerAdd(kn)}),this.roomClient.on("UPDATE_PRODUCER",function(kn){return In.handleUpdateProducer(kn)}),this.roomClient.on("REMOVE_PRODUCER",function(kn){return In.handleProducerRemove(kn)}),this.roomClient.on("ADD_CONSUMER",function(kn){return In.handleConsumerAdd(kn)}),this.roomClient.on("REMOVE_CONSUMER",function(kn){return In.handleConsumerRemove(kn)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(kn){return In.handleParticipantMediaStateChanged(kn)}),this.roomClient.on("CHAT_MESSAGE",function(kn){return In.handleNewChatMessage(kn)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(kn){return In.handleSpeakerChange(kn)}),this.roomClient.on("ENTRY_REQUESTED",function(kn){return In.handleEntryRequested(kn)}),this.roomClient.on("ENTRY_RESPONDED",function(kn){return In.handleEntryResponded(kn)}),this.roomClient.on("MEETING_JOINED",function(kn){return In.handleMeetingJoined(kn)}),this.roomClient.on("MEETING_LEFT",function(kn){return In.handleMeetingLeft(kn)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(kn){In.handleRecordingStateChanged(kn)}),this.roomClient.on("RECORDING_STARTED",function(kn){return In.handleRecordingStarted(kn)}),this.roomClient.on("RECORDING_STOPPED",function(kn){return In.handleRecordingStopped(kn)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(kn){In.handleLivestreamStateChanged(kn)}),this.roomClient.on("LIVESTREAM_STARTED",function(kn){return In.handleLivestreamStarted(kn)}),this.roomClient.on("LIVESTREAM_STOPPED",function(kn){return In.handleLivestreamStopped(kn)}),this.roomClient.on("HLS_STATE_CHANGED",function(kn){In.handleHlsStateChanged(kn)}),this.roomClient.on("HLS_STARTED",function(kn){In.handleHlsStarted(kn)}),this.roomClient.on("HLS_STOPPED",function(kn){In.handleHlsStopped(kn)}),this.roomClient.on("WHITEBOARD_STARTED",function(kn){return In.handleWhiteboardStarted(kn)}),this.roomClient.on("WHITEBOARD_STOPPED",function(kn){return In.handleWhiteboardStopped(kn)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(kn){return In.handleVideoStateChanged(kn)}),this.roomClient.on("VIDEO_SEEKED",function(kn){return In.handleVideoSeeked(kn)}),this.roomClient.on("PIN_STATE_CHANGED",function(kn){In.handlePinStateChanged(kn)}),this.roomClient.on("MIC_REQUESTED",function(kn){return In.handleMicRequested(kn)}),this.roomClient.on("WEBCAM_REQUESTED",function(kn){return In.handleWebcamRequested(kn)}),this.roomClient.on("CONNECTION_OPEN",function(kn){return In.handleConnectionOpen(kn)}),this.roomClient.on("CONNECTION_CLOSE",function(kn){return In.handleConnectionClose(kn)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(kn){return In.handleConnectionParticipantJoin(kn)}),this.roomClient.on("SWITCH_ROOM",function(kn){return In.handleSwitchMeeting(kn)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(kn){return In.handleConnectionChatMessage(kn)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(kn){In.handleConnectionParticipantLeft(kn)}),this.roomClient.on("PUBSUB_MESSAGE",function(kn){return es(In,Uo,Ko).call(In,kn)}),this.roomClient.on("PEER_MODE_CHANGED",function(kn){return es(In,Vo,ko).call(In,kn)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(kn){return In.handleMeetingStateChanged(kn)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(kn){return In.handleVideoQualityChanged(kn)})}var er,rr,_r,Er,Nr,Xr,Yr,gn;return(0,gt.Z)(Yt,[{key:"handleError",value:function(kr){this.eventEmitter.emit($s,kr)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(kr){this.roomClient.changeMode(kr)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(kr,Hr){this.roomClient.respondEntry(kr,Hr)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(kr)}},{key:"publishAudio",value:(gn=(0,ft.Z)(vt().mark(function kr(){var Hr,Lr=arguments;return vt().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return Hr=Lr.length>0&&Lr[0]!==void 0?Lr[0]:void 0,on.next=3,this.roomClient.enableMic(Hr);case 3:return on.abrupt("return");case 4:case"end":return on.stop()}},kr,this)})),function(){return gn.apply(this,arguments)})},{key:"unpublishAudio",value:(Yr=(0,ft.Z)(vt().mark(function kr(){return vt().wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return Hr.next=2,this.roomClient.disableMic();case 2:return Hr.abrupt("return");case 3:case"end":return Hr.stop()}},kr,this)})),function(){return Yr.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(kr)}},{key:"publishVideo",value:(Xr=(0,ft.Z)(vt().mark(function kr(){var Hr,Lr=arguments;return vt().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return Hr=Lr.length>0&&Lr[0]!==void 0?Lr[0]:void 0,this.roomClient.enableWebcam(Hr),on.abrupt("return");case 3:case"end":return on.stop()}},kr,this)})),function(){return Xr.apply(this,arguments)})},{key:"unpublishVideo",value:(Nr=(0,ft.Z)(vt().mark(function kr(){return vt().wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return this.roomClient.disableWebcam(),Hr.abrupt("return");case 2:case"end":return Hr.stop()}},kr,this)})),function(){return Nr.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(kr)}},{key:"pubblishScreenShare",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(kr)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(kr){this.roomClient.sendChatMessage(kr);var Hr={text:kr,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(Hr)}},{key:"startRecording",value:function(kr,Hr,Lr){this.roomClient.startRecording(kr,Hr,Lr)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startLivestream",value:function(kr,Hr){this.roomClient.startLivestream(kr,Hr)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Er=(0,ft.Z)(vt().mark(function kr(Hr){return vt().wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:return Lr.next=2,this.roomClient.startHls(Hr);case 2:case"end":return Lr.stop()}},kr,this)})),function(kr){return Er.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"getMics",value:(_r=(0,ft.Z)(vt().mark(function kr(){return vt().wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return Hr.next=2,this.roomClient.getMics();case 2:return Hr.abrupt("return",Hr.sent);case 3:case"end":return Hr.stop()}},kr,this)})),function(){return _r.apply(this,arguments)})},{key:"getWebcams",value:(rr=(0,ft.Z)(vt().mark(function kr(){return vt().wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return Hr.next=2,this.roomClient.getWebcams();case 2:return Hr.abrupt("return",Hr.sent);case 3:case"end":return Hr.stop()}},kr,this)})),function(){return rr.apply(this,arguments)})},{key:"changeMic",value:function(kr){this.roomClient.changeMic(kr)}},{key:"changeWebcam",value:function(kr){this.roomClient.changeWebcam(kr)}},{key:"replaceWebcamStream",value:function(kr){this.roomClient.replaceWebcamStream(kr)}},{key:"setWebcamQuality",value:function(kr){this.roomClient.setWebcamQuality(kr)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(kr){var Hr=kr.link;this.roomClient.startVideo({link:Hr})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(kr){var Hr=kr.currentTime;this.roomClient.pauseVideo(Hr)}},{key:"seekVideo",value:function(kr){var Hr=kr.currentTime;this.roomClient.seekVideo(Hr)}},{key:"handlePeerAdd",value:function(kr){var Hr=kr.peer,Lr=new Rr(Hr);this.participants.set(Lr.id,Lr),this.eventEmitter.emit(Po,Lr),this.participants.size===1&&this.updateMainParticipant(Lr.id)}},{key:"handlePeerRemove",value:function(kr){var Hr=kr.peerId,Lr=this.participants.get(Hr);Lr!=null&&(this.participants.delete(Hr),this.eventEmitter.emit(To,Lr),this.activePresenterId===Lr.id&&(this.activePresenterId=null,this.eventEmitter.emit($a,this.activePresenterId)),this.mainParticipantId===Lr.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(kr){var Hr=kr.producer,Lr=new wn(Hr);this.localParticipant.addStream(Lr),Lr.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit($a,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(kr){var Hr=kr.producer,Lr=new wn(Hr);this.localParticipant.updateStream(Lr)}},{key:"handleProducerRemove",value:function(kr){var Hr=kr.producerId,Lr=this.localParticipant.deleteStream(Hr);if(Lr&&Lr.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit($a,this.activePresenterId);var on=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||on||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(kr){var Hr=kr.consumer,Lr=kr.peerId,on=this.participants.get(Lr);if(on){var En=new wn(Hr);on.addStream(En),this.eventEmitter.emit($n,En),En.kind==="share"&&(this.activePresenterId=on.id,this.eventEmitter.emit($a,this.activePresenterId),this.updateMainParticipant(on.id))}}},{key:"handleConsumerRemove",value:function(kr){var Hr=kr.consumerId,Lr=kr.peerId,on=this.participants.get(Lr);if(on!=null&&on){var En=on.deleteStream(Hr);if(this.eventEmitter.emit(Os,En),En&&En.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit($a,this.activePresenterId);var Kn=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Kn||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(kr){var Hr=kr.peerId,Lr=kr.kind,on=kr.newState,En=this.participants.get(Hr);En&&En&&(Lr=="audio"?En.micOn=on:Lr=="video"&&(En.webcamOn=on),En.updateParticipantMediaState(Lr,on))}},{key:"handleSpeakerChange",value:function(kr){var Hr=kr.peerId;this.activeSpeakerId!==Hr&&(this.activeSpeakerId=Hr,this.eventEmitter.emit(qo,Hr),Hr&&Hr!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&Hr!==this.mainParticipantId&&this.updateMainParticipant(Hr))}},{key:"handleNewChatMessage",value:function(kr){var Hr=kr.senderId,Lr={senderId:Hr,text:kr.text,timestamp:kr.timestamp};if(this.localParticipant.id===Hr)Lr.senderName=this.localParticipant.displayName;else{var on=this.participants.get(Hr);on&&(Lr.senderName=on.displayName)}this.messages.push(Lr),this.eventEmitter.emit(Rl,Lr)}},{key:"updateMainParticipant",value:function(kr){this.mainParticipantId=kr;var Hr=null;Hr=kr===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Ll,Hr)}},{key:"handleEntryRequested",value:function(kr){var Hr=this,Lr=kr.id,on=kr.name;this.eventEmitter.emit(Ar,{participantId:Lr,name:on,allow:function(){Hr.roomClient.respondEntry(Lr,"allowed")},deny:function(){Hr.roomClient.respondEntry(Lr,"denied")}})}},{key:"handleEntryResponded",value:function(kr){var Hr=kr.id,Lr=kr.decision;this.eventEmitter.emit(_n,Hr,Lr)}},{key:"handleMeetingJoined",value:function(kr){var Hr=kr.peers,Lr=kr.poll,on=kr.messages,En=kr.baseUrl;this.baseUrl=En,on.length>0&&(this.messages=on),this.eventEmitter.emit(Ss,{peers:Hr,poll:Lr,messages:on})}},{key:"handleMeetingLeft",value:function(kr){this.eventEmitter.emit(zs,kr)}},{key:"handleRecordingStateChanged",value:function(kr){this.recordingState=kr.status,this.eventEmitter.emit(Pn,kr)}},{key:"handleLivestreamStateChanged",value:function(kr){this.livestreamState=kr.status,this.eventEmitter.emit(ds,kr)}},{key:"handleHlsStateChanged",value:function(kr){this.hlsState=kr.status,kr.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:kr.downstreamUrl,playbackHlsUrl:kr.playbackHlsUrl,livestreamUrl:kr.livestreamUrl}:kr.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(Ms,kr)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Tn)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Or)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(_i)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(hs)}},{key:"handleHlsStarted",value:function(kr){this.eventEmitter.emit(Us,kr)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Hs)}},{key:"handleWhiteboardStarted",value:function(kr){var Hr=kr.state;this.eventEmitter.emit(tn,Hr)}},{key:"handleWhiteboardStopped",value:function(kr){(function(Hr){if(Hr==null)throw new TypeError("Cannot destructure "+Hr)})(kr),this.eventEmitter.emit(Ao)}},{key:"handleVideoStateChanged",value:function(kr){this.eventEmitter.emit(mn,kr)}},{key:"handleVideoSeeked",value:function(kr){var Hr=kr.currentTime;this.eventEmitter.emit(Rn,{currentTime:Hr})}},{key:"handlePinStateChanged",value:function(kr){var Hr=kr.peerId,Lr=kr.state,on=kr.pinnedBy;this.eventEmitter.emit(cs,{participantId:Hr,state:Lr,pinnedBy:on})}},{key:"handleMeetingStateChanged",value:function(kr){var Hr=kr.state;this.eventEmitter.emit(As,{state:Hr})}},{key:"handleVideoQualityChanged",value:function(kr){var Hr=kr.peerId,Lr=kr.prevQuality,on=kr.currentQuality,En=this.participants.get(Hr);En&&En&&En.videoQualityChanged(Lr,on)}},{key:"handleMicRequested",value:function(kr){var Hr=this,Lr=kr.peerId;this.eventEmitter.emit(Un,{participantId:Lr,accept:function(){return Hr.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(kr){var Hr=this,Lr=kr.peerId;this.eventEmitter.emit(Dn,{participantId:Lr,accept:function(){return Hr.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(kr){var Hr=kr.roomId,Lr=kr.peer,on=this.connections.get(Hr);on!=null&&on.meeting.participantJoin(Lr)}},{key:"handleConnectionParticipantLeft",value:function(kr){var Hr=kr.roomId,Lr=kr.peerId,on=this.connections.get(Hr);on!=null&&on.meeting.participantLeft(Lr)}},{key:"handleConnectionOpen",value:function(kr){var Hr=kr.peers,Lr=kr.roomId,on=kr.payload,En=new Yn({roomId:Lr,peers:Hr,payload:on});this.connections.set(En.id,En),this.eventEmitter.emit(ks,En)}},{key:"handleConnectionClose",value:function(kr){var Hr=kr.roomId;this.connections.get(Hr)!=null&&(this.connections.delete(Hr),this.eventEmitter.emit(Ps,Hr))}},{key:"handleSwitchMeeting",value:function(kr){var Hr=kr.roomId,Lr=kr.token,on=kr.payload,En=kr.peerId,Kn=kr.connectionPeerId,zn=kr.connectionRoomId,Xn=En?{meetingId:Hr,payload:on,token:Lr,participantId:En}:{meetingId:Hr,payload:on,token:Lr,connectionParticipantId:Kn,connectionMeetingId:zn};this.eventEmitter.emit(oo,Xn)}},{key:"handleConnectionChatMessage",value:function(kr){var Hr=kr.roomId,Lr=kr.peerId,on=kr.message,En=this.connections.get(Hr);En!=null&&En.meeting.sendChatMessageEvent({participantId:Lr,message:on})}},{key:"connectTo",value:(er=(0,ft.Z)(vt().mark(function kr(Hr){var Lr,on;return vt().wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return Lr=Hr.meetingId,on=Hr.payload,En.next=3,this.roomClient.openConnection({roomId:Lr,payload:on});case 3:case"end":return En.stop()}},kr,this)})),function(kr){return er.apply(this,arguments)})},{key:"selectedCameraDevice",get:function(){var kr;return(kr=this.roomClient._webcam)===null||kr===void 0?void 0:kr.device}},{key:"selectedMicrophoneDevice",get:function(){var kr;return(kr=this.roomClient._mic)===null||kr===void 0?void 0:kr.device}},{key:"on",value:function(kr,Hr){switch(kr){case Po:case To:case qo:case $a:case Ll:case Rl:case Ar:case _n:case Pn:case Tn:case Or:case ds:case _i:case hs:case Us:case Hs:case Ms:case $n:case Os:case tn:case Ao:case Ss:case zs:case mn:case Rn:case Un:case Dn:case cs:case ks:case Ps:case oo:case As:case ro:case $s:this.eventEmitter.on(kr,Hr);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(kr,Hr){switch(kr){case Po:case To:case qo:case $a:case Ll:case Rl:case Ar:case _n:case Pn:case Tn:case Or:case ds:case _i:case hs:case Ms:case Us:case Hs:case $n:case Os:case tn:case Ao:case Ss:case zs:case mn:case Rn:case Un:case Dn:case cs:case ks:case Ps:case oo:case As:case $s:case ro:this.eventEmitter.off(kr,Hr);break;default:throw new Error("Invalid event type")}}}]),Yt}();function Ko(Yt){var er=Yt.topic,rr=Yt.message,_r=Yt.senderId,Er=Yt.timestamp,Nr=Yt.senderName,Xr=Yt.id,Yr=Yt.payload;er&&rr&&yn(this,Ns).emit(er,{message:rr,senderId:_r,timestamp:Er,topic:er,senderName:Nr,id:Xr,payload:Yr})}function ko(Yt){var er=Yt.peerId,rr=Yt.mode;er===this.localParticipant.id?this.localParticipant.mode=rr:this.participants.get(er).mode=rr,this.eventEmitter.emit(ro,{participantId:er,mode:rr})}var Tl=ht(6900),Bl=ht(6380),Dl=ht(3430),Cl=ht(8962),Ol=function(){var Yt=(0,ft.Z)(vt().mark(function er(rr){return vt().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(Er){var Nr=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return Nr?new Promise(function(Xr,Yr){Nr.call(navigator,Er,Xr,Yr)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),_r.next=4,navigator.mediaDevices.getUserMedia(rr);case 4:return _r.abrupt("return",_r.sent);case 5:case"end":return _r.stop()}},er)}));return function(er){return Yt.apply(this,arguments)}}(),Ul=function(){var Yt=(0,ft.Z)(vt().mark(function er(rr){return vt().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(Er){var Nr=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return Nr?new Promise(function(Xr,Yr){Nr.call(navigator,Er,Xr,Yr)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),_r.next=4,navigator.mediaDevices.getDisplayMedia(rr);case 4:return _r.abrupt("return",_r.sent);case 5:case"end":return _r.stop()}},er)}));return function(er){return Yt.apply(this,arguments)}}();function Iu(Yt,er){if(er&&((0,pt.Z)(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(rr){if(rr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rr}(Yt)}function hp(Yt){return hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(er){return er.__proto__||Object.getPrototypeOf(er)},hp(Yt)}function wp(Yt,er){return wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rr,_r){return rr.__proto__=_r,rr},wp(Yt,er)}function qu(Yt,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(er&&er.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),er&&wp(Yt,er)}function Ku(Yt,er,rr){return er=hp(er),Iu(Yt,Xu()?Reflect.construct(er,rr||[],hp(Yt).constructor):er.apply(Yt,rr))}function Xu(){try{var Yt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xu=function(){return!!Yt})()}var pp=function(Yt){function er(rr,_r,Er,Nr){return(0,mt.Z)(this,er),Ku(this,er,[rr,_r,Er,Nr])}return qu(er,Yt),(0,gt.Z)(er)}((0,gt.Z)(function Yt(er,rr,_r,Er){(0,mt.Z)(this,Yt),this.deviceId=er,this.groupId=rr,this.kind=_r,this.label=Er})),Rp=function(Yt){function er(rr,_r,Er,Nr){return(0,mt.Z)(this,er),Ku(this,er,[rr,_r,Er,Nr])}return qu(er,Yt),(0,gt.Z)(er)}(pp),xo=function(Yt){function er(rr,_r,Er,Nr){return(0,mt.Z)(this,er),Ku(this,er,[rr,_r,Er,Nr])}return qu(er,Yt),(0,gt.Z)(er)}(pp),ws=function(Yt){function er(rr,_r,Er,Nr){return(0,mt.Z)(this,er),Ku(this,er,[rr,_r,Er,Nr])}return qu(er,Yt),(0,gt.Z)(er)}(pp),Dr={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},Jn=(ht(4301),ht(773));function Qs(Yt,er){return Yt==null||er==null?NaN:Yt<er?-1:Yt>er?1:Yt>=er?0:NaN}function Ml(Yt,er){return Yt==null||er==null?NaN:er<Yt?-1:er>Yt?1:er>=Yt?0:NaN}function Mo(Yt){let er,rr,_r;function Er(Nr,Xr,Yr=0,gn=Nr.length){if(Yr<gn){if(er(Xr,Xr)!==0)return gn;do{const kr=Yr+gn>>>1;rr(Nr[kr],Xr)<0?Yr=kr+1:gn=kr}while(Yr<gn)}return Yr}return Yt.length!==2?(er=Qs,rr=(Nr,Xr)=>Qs(Yt(Nr),Xr),_r=(Nr,Xr)=>Yt(Nr)-Xr):(er=Yt===Qs||Yt===Ml?Yt:Lu,rr=Yt,_r=Yt),{left:Er,center:function(Nr,Xr,Yr=0,gn=Nr.length){const kr=Er(Nr,Xr,Yr,gn-1);return kr>Yr&&_r(Nr[kr-1],Xr)>-_r(Nr[kr],Xr)?kr-1:kr},right:function(Nr,Xr,Yr=0,gn=Nr.length){if(Yr<gn){if(er(Xr,Xr)!==0)return gn;do{const kr=Yr+gn>>>1;rr(Nr[kr],Xr)<=0?Yr=kr+1:gn=kr}while(Yr<gn)}return Yr}}}function Lu(){return 0}const xm=Mo(Qs),qp=xm.right,Sm=(Mo(function(Yt){return Yt===null?NaN:+Yt}).center,qp);function Np(Yt,er){switch(arguments.length){case 0:break;case 1:this.range(Yt);break;default:this.range(er).domain(Yt)}return this}function xl(){var Yt,er=[.5],rr=[0,1],_r=1;function Er(Nr){return Nr!=null&&Nr<=Nr?rr[Sm(er,Nr,0,_r)]:Yt}return Er.domain=function(Nr){return arguments.length?(er=Array.from(Nr),_r=Math.min(er.length,rr.length-1),Er):er.slice()},Er.range=function(Nr){return arguments.length?(rr=Array.from(Nr),_r=Math.min(er.length,rr.length-1),Er):rr.slice()},Er.invertExtent=function(Nr){var Xr=rr.indexOf(Nr);return[er[Xr-1],er[Xr]]},Er.unknown=function(Nr){return arguments.length?(Yt=Nr,Er):Yt},Er.copy=function(){return xl().domain(er).range(rr).unknown(Yt)},Np.apply(Er,arguments)}function sm(Yt,er){var rr=Object.keys(Yt);if(Object.getOwnPropertySymbols){var _r=Object.getOwnPropertySymbols(Yt);er&&(_r=_r.filter(function(Er){return Object.getOwnPropertyDescriptor(Yt,Er).enumerable})),rr.push.apply(rr,_r)}return rr}function iu(Yt){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?sm(Object(rr),!0).forEach(function(_r){Ks(Yt,_r,rr[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(rr)):sm(Object(rr)).forEach(function(_r){Object.defineProperty(Yt,_r,Object.getOwnPropertyDescriptor(rr,_r))})}return Yt}function Yo(Yt,er){if(!(Yt instanceof er))throw new TypeError("Cannot call a class as a function")}function xu(Yt,er){for(var rr=0;rr<er.length;rr++){var _r=er[rr];_r.enumerable=_r.enumerable||!1,_r.configurable=!0,"value"in _r&&(_r.writable=!0),Object.defineProperty(Yt,jp(_r.key),_r)}}function Sl(Yt,er,rr){return er&&xu(Yt.prototype,er),rr&&xu(Yt,rr),Object.defineProperty(Yt,"prototype",{writable:!1}),Yt}function Ks(Yt,er,rr){return(er=jp(er))in Yt?Object.defineProperty(Yt,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):Yt[er]=rr,Yt}function Tp(Yt,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(er&&er.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),er&&Yl(Yt,er)}function zo(Yt){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(er){return er.__proto__||Object.getPrototypeOf(er)},zo(Yt)}function Yl(Yt,er){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rr,_r){return rr.__proto__=_r,rr},Yl(Yt,er)}function Zu(Yt,er){if(Yt==null)return{};var rr,_r,Er=function(Xr,Yr){if(Xr==null)return{};var gn,kr,Hr={},Lr=Object.keys(Xr);for(kr=0;kr<Lr.length;kr++)gn=Lr[kr],Yr.indexOf(gn)>=0||(Hr[gn]=Xr[gn]);return Hr}(Yt,er);if(Object.getOwnPropertySymbols){var Nr=Object.getOwnPropertySymbols(Yt);for(_r=0;_r<Nr.length;_r++)rr=Nr[_r],er.indexOf(rr)>=0||Object.prototype.propertyIsEnumerable.call(Yt,rr)&&(Er[rr]=Yt[rr])}return Er}function lo(Yt){if(Yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt}function $p(Yt){var er=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var rr,_r=zo(Yt);if(er){var Er=zo(this).constructor;rr=Reflect.construct(_r,arguments,Er)}else rr=_r.apply(this,arguments);return function(Nr,Xr){if(Xr&&(typeof Xr=="object"||typeof Xr=="function"))return Xr;if(Xr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lo(Nr)}(this,rr)}}function Ql(Yt,er){for(;!Object.prototype.hasOwnProperty.call(Yt,er)&&(Yt=zo(Yt))!==null;);return Yt}function fp(){return fp=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Yt,er,rr){var _r=Ql(Yt,er);if(_r){var Er=Object.getOwnPropertyDescriptor(_r,er);return Er.get?Er.get.call(arguments.length<3?Yt:rr):Er.value}},fp.apply(this,arguments)}function mp(Yt,er,rr,_r){return mp=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Er,Nr,Xr,Yr){var gn,kr=Ql(Er,Nr);if(kr){if((gn=Object.getOwnPropertyDescriptor(kr,Nr)).set)return gn.set.call(Yr,Xr),!0;if(!gn.writable)return!1}if(gn=Object.getOwnPropertyDescriptor(Yr,Nr)){if(!gn.writable)return!1;gn.value=Xr,Object.defineProperty(Yr,Nr,gn)}else Ks(Yr,Nr,Xr);return!0},mp(Yt,er,rr,_r)}function Xo(Yt,er,rr,_r,Er){if(!mp(Yt,er,rr,_r||Yt)&&Er)throw new TypeError("failed to set property");return rr}function Pl(Yt,er){return function(rr){if(Array.isArray(rr))return rr}(Yt)||function(rr,_r){var Er=rr==null?null:typeof Symbol<"u"&&rr[Symbol.iterator]||rr["@@iterator"];if(Er!=null){var Nr,Xr,Yr,gn,kr=[],Hr=!0,Lr=!1;try{if(Yr=(Er=Er.call(rr)).next,_r===0){if(Object(Er)!==Er)return;Hr=!1}else for(;!(Hr=(Nr=Yr.call(Er)).done)&&(kr.push(Nr.value),kr.length!==_r);Hr=!0);}catch(on){Lr=!0,Xr=on}finally{try{if(!Hr&&Er.return!=null&&(gn=Er.return(),Object(gn)!==gn))return}finally{if(Lr)throw Xr}}return kr}}(Yt,er)||Kp(Yt,er)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Su(Yt){return function(er){if(Array.isArray(er))return Cp(er)}(Yt)||function(er){if(typeof Symbol<"u"&&er[Symbol.iterator]!=null||er["@@iterator"]!=null)return Array.from(er)}(Yt)||Kp(Yt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kp(Yt,er){if(Yt){if(typeof Yt=="string")return Cp(Yt,er);var rr=Object.prototype.toString.call(Yt).slice(8,-1);return rr==="Object"&&Yt.constructor&&(rr=Yt.constructor.name),rr==="Map"||rr==="Set"?Array.from(Yt):rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr)?Cp(Yt,er):void 0}}function Cp(Yt,er){(er==null||er>Yt.length)&&(er=Yt.length);for(var rr=0,_r=new Array(er);rr<er;rr++)_r[rr]=Yt[rr];return _r}function jp(Yt){var er=function(rr,_r){if(typeof rr!="object"||rr===null)return rr;var Er=rr[Symbol.toPrimitive];if(Er!==void 0){var Nr=Er.call(rr,_r||"default");if(typeof Nr!="object")return Nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_r==="string"?String:Number)(rr)}(Yt,"string");return typeof er=="symbol"?er:String(er)}function Qr(Yt,er){return function(rr,_r){return _r.get?_r.get.call(rr):_r.value}(Yt,su(Yt,er,"get"))}function ps(Yt,er,rr){return function(_r,Er,Nr){if(Er.set)Er.set.call(_r,Nr);else{if(!Er.writable)throw new TypeError("attempted to set read only private field");Er.value=Nr}}(Yt,su(Yt,er,"set"),rr),rr}function su(Yt,er,rr){if(!er.has(Yt))throw new TypeError("attempted to "+rr+" private field on non-instance");return er.get(Yt)}function Ls(Yt,er,rr){if(!er.has(Yt))throw new TypeError("attempted to get private field on non-instance");return rr}function Fp(Yt,er){if(er.has(Yt))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rs(Yt,er,rr){Fp(Yt,er),er.set(Yt,rr)}function Ho(Yt,er){Fp(Yt,er),er.add(Yt)}var ou="https://speed.cloudflare.com",Mp={autoStart:!0,downloadApiUrl:"".concat(ou,"/__down"),uploadApiUrl:"".concat(ou,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(ou,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(ou,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Xp={aimMeasurementScoring:{packetLoss:xl([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:xl([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:xl([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:xl([10,20,100,500],[10,5,0,-10,-20]),download:xl([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:xl([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Bp=function(Yt){var er=Yt.headers.get("server-timing");if(er){var rr=er.match(/dur=([0-9.]+)/);if(rr)return+rr[1]}},om=function(Yt){return Yt.responseStart-Yt.requestStart},lm=function(Yt){return Yt.responseEnd-Yt.responseStart},Zp=function(Yt){return Yt.ping+Yt.payloadDownloadTime},Up=function(Yt){return Yt.ttfb},um=function(Yt,er){var rr=Yt.duration,_r=Yt.transferSize,Er=rr/1e3;return Er?8*(_r||1.005*+er)/Er:void 0},dm=function(Yt,er){var rr=Yt.duration/1e3;return rr?8*er*1.005/rr:void 0},hm=Jn(function(Yt){return"0".repeat(Yt)}),gp=new WeakMap,Du=new WeakMap,Ou=new WeakMap,vp=new WeakMap,yp=new WeakMap,Vl=new WeakMap,Nl=new WeakMap,Nu=new WeakMap,zl=new WeakMap,lu=new WeakMap,$u=new WeakMap,_p=new WeakMap,_h=new WeakMap,ep=new WeakMap,na=new WeakMap,yl=new WeakMap,Pr=new WeakMap,cr=new WeakMap,sr=new WeakMap,ur=new WeakMap,yr=new WeakMap,Jr=new WeakMap,nn=new WeakSet,Nn=new WeakSet,jn=new WeakSet,ts=new WeakSet;function ns(Yt){var er=this;Yt!==Qr(this,_p)&&(ps(this,_p,Yt),setTimeout(function(){return Qr(er,vp).call(er,Qr(er,_p))}))}function ss(Yt,er){var rr=this,_r=Qr(this,zl)[Yt],Er=_r.bytes,Nr=_r.dir,Xr=Qr(this,ep),Yr=Xr[Nr].hasOwnProperty(Er)?Xr[Nr][Er]:{timings:[],numMeasurements:Qr(this,zl).filter(function(gn){var kr=gn.bytes,Hr=gn.dir;return Er===kr&&Nr===Hr}).map(function(gn){return gn.count}).reduce(function(gn,kr){return gn+kr},0)};er&&Yr.timings.push(er),Yr.timings=Yr.timings.slice(-Yr.numMeasurements),Xr[Nr][Er]=Yr,er?setTimeout(function(){Qr(rr,Vl).call(rr,iu({type:Nr,bytes:Er},er),Xr)}):Qr(this,yp).call(this,Qr(this,zl)[Yt],Xr)}function Kr(){var Yt=this,er=Qr(this,zl),rr=er[Qr(this,na)];if(Qr(this,yl)>=rr.count){var _r=Qr(this,_h);if(Qr(this,cr)>this.finishRequestDuration&&!rr.bypassMinDuration){var Er=rr.dir;Qr(this,_h)[Er]=!0,Object.values(Qr(this,_h)).every(function(zn){return zn})&&Qr(this,Nl).call(this,Qr(this,ep))}ps(this,yl,0),ps(this,cr,-1/0),performance.clearResourceTimings();do ps(this,na,Qr(this,na)+1);while(Qr(this,na)<er.length&&_r[er[Qr(this,na)].dir]);if(Qr(this,na)>=er.length)return ps(this,_h,{down:!0,up:!0}),Ls(this,nn,ns).call(this,!1),void Qr(this,Nl).call(this,Qr(this,ep));rr=er[Qr(this,na)]}var Nr=Qr(this,na);Qr(this,yl)===0&&Ls(this,Nn,ss).call(this,Nr);var Xr=rr,Yr=Xr.bytes,gn=Xr.dir==="down",kr=Qr(this,gn?lu:$u),Hr=Object.assign({},Qr(this,gp));gn&&(Hr.bytes="".concat(Yr));var Lr,on="".concat(kr.startsWith("http")||kr.startsWith("//")?"":window.location.origin).concat(kr,"?").concat(Object.entries(Hr).map(function(zn){var Xn=Pl(zn,2),Zn=Xn[0],In=Xn[1];return"".concat(Zn,"=").concat(In)}).join("&")),En=Object.assign({},gn?{}:{method:"POST",body:hm(Yr)},Qr(this,Du)),Kn=ps(this,yr,fetch(on,En).then(function(zn){if(zn.ok)return zn;throw Error(zn.statusText)}).then(function(zn){return Yt.getServerTime&&(Lr=Yt.getServerTime(zn)),zn}).then(function(zn){return zn.text().then(function(Xn){return Qr(Yt,Ou)&&Qr(Yt,Ou).call(Yt,{url:on,headers:zn.headers,body:Xn}),Xn})}).then(function(zn,Xn){if(Kn._cancel)Xn("cancelled");else{var Zn=performance.getEntriesByName(on).slice(-1)[0],In={transferSize:Zn.transferSize,ttfb:om(Zn),payloadDownloadTime:lm(Zn),serverTime:Lr||-1,measTime:new Date};if(In.ping=Math.max(.01,In.ttfb-(Lr||Qr(Yt,ur))),In.duration=(gn?Zp:Up)(In),In.bps=(gn?um:dm)(In,Yr),gn&&Yr){var kn=+Yr;In.transferSize&&(In.transferSize<kn||In.transferSize/kn>1.05)&&console.warn("Requested ".concat(kn,"B but received ").concat(In.transferSize,"B (").concat(Math.round(In.transferSize/kn*1e4)/100,"%)."))}Ls(Yt,Nn,ss).call(Yt,Nr,In);var Ln=In.duration;ps(Yt,cr,Qr(Yt,cr)<0?Ln:Math.min(Qr(Yt,cr),Ln)),ps(Yt,yl,Qr(Yt,yl)+1),ps(Yt,Pr,0),Qr(Yt,sr)?ps(Yt,Jr,setTimeout(function(){return Ls(Yt,jn,Kr).call(Yt)},Qr(Yt,sr))):Ls(Yt,jn,Kr).call(Yt)}}).catch(function(zn){var Xn,Zn;Kn._cancel||(console.warn("Error fetching ".concat(on,": ").concat(zn)),ps(Yt,Pr,(Xn=Qr(Yt,Pr),Zn=Xn++,Xn)),Zn<20?Ls(Yt,jn,Kr).call(Yt):(ps(Yt,Pr,0),Ls(Yt,nn,ns).call(Yt,!1),Qr(Yt,Nu).call(Yt,"Connection failed to ".concat(on,". Gave up after ").concat(20," retries."))))}))}function dn(){var Yt=Qr(this,yr);Yt&&(Yt._cancel=!0)}var gs=function(){function Yt(er){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_r=rr.downloadApiUrl,Er=rr.uploadApiUrl,Nr=rr.throttleMs,Xr=Nr===void 0?0:Nr,Yr=rr.estimatedServerTime,gn=Yr===void 0?0:Yr;if(Yo(this,Yt),Ho(this,ts),Ho(this,jn),Ho(this,Nn),Ho(this,nn),Rs(this,gp,{writable:!0,value:{}}),Rs(this,Du,{writable:!0,value:{}}),Ks(this,"finishRequestDuration",1e3),Ks(this,"getServerTime",Bp),Rs(this,Ou,{writable:!0,value:function(kr){return kr}}),Rs(this,vp,{writable:!0,value:function(){}}),Rs(this,yp,{writable:!0,value:function(){}}),Rs(this,Vl,{writable:!0,value:function(){}}),Rs(this,Nl,{writable:!0,value:function(){}}),Rs(this,Nu,{writable:!0,value:function(){}}),Rs(this,zl,{writable:!0,value:void 0}),Rs(this,lu,{writable:!0,value:void 0}),Rs(this,$u,{writable:!0,value:void 0}),Rs(this,_p,{writable:!0,value:!1}),Rs(this,_h,{writable:!0,value:{down:!1,up:!1}}),Rs(this,ep,{writable:!0,value:{down:{},up:{}}}),Rs(this,na,{writable:!0,value:0}),Rs(this,yl,{writable:!0,value:0}),Rs(this,Pr,{writable:!0,value:0}),Rs(this,cr,{writable:!0,value:-1/0}),Rs(this,sr,{writable:!0,value:0}),Rs(this,ur,{writable:!0,value:0}),Rs(this,yr,{writable:!0,value:void 0}),Rs(this,Jr,{writable:!0,value:void 0}),!er)throw new Error("Missing measurements argument");if(!_r)throw new Error("Missing downloadApiUrl argument");if(!Er)throw new Error("Missing uploadApiUrl argument");ps(this,zl,er),ps(this,lu,_r),ps(this,$u,Er),ps(this,sr,Xr),ps(this,ur,Math.max(0,gn))}return Sl(Yt,[{key:"results",get:function(){return Qr(this,ep)}},{key:"qsParams",get:function(){return Qr(this,gp)},set:function(er){ps(this,gp,er)}},{key:"fetchOptions",get:function(){return Qr(this,Du)},set:function(er){ps(this,Du,er)}},{key:"responseHook",set:function(er){ps(this,Ou,er)}},{key:"onRunningChange",set:function(er){ps(this,vp,er)}},{key:"onNewMeasurementStarted",set:function(er){ps(this,yp,er)}},{key:"onMeasurementResult",set:function(er){ps(this,Vl,er)}},{key:"onFinished",set:function(er){ps(this,Nl,er)}},{key:"onConnectionError",set:function(er){ps(this,Nu,er)}},{key:"pause",value:function(){clearTimeout(Qr(this,Jr)),Ls(this,ts,dn).call(this),Ls(this,nn,ns).call(this,!1)}},{key:"play",value:function(){Qr(this,_p)||(Ls(this,nn,ns).call(this,!0),Ls(this,jn,Kr).call(this))}}]),Yt}(),Ts=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Sn=new WeakMap,fs=new WeakSet;function rs(Yt){var er=this;Qr(this,Sn)&&(Yt?setTimeout(function(){return Qr(er,Sn).play()},20):Qr(this,Sn).pause())}var js=function(Yt){Tp(rr,Yt);var er=$p(rr);function rr(_r){var Er,Nr,Xr,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gn=Yr.measureParallelLatency,kr=gn!==void 0&&gn,Hr=Yr.parallelLatencyThrottleMs,Lr=Hr===void 0?100:Hr,on=Yr.downloadApiUrl,En=Yr.uploadApiUrl,Kn=Yr.estimatedServerTime,zn=Kn===void 0?0:Kn,Xn=Zu(Yr,Ts);return Yo(this,rr),Ho(lo(Xr=er.call(this,_r,iu({downloadApiUrl:on,uploadApiUrl:En,estimatedServerTime:zn},Xn))),fs),Rs(lo(Xr),Sn,{writable:!0,value:void 0}),kr&&(ps(lo(Xr),Sn,new gs([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:on,uploadApiUrl:En,estimatedServerTime:zn,throttleMs:Lr})),Qr(lo(Xr),Sn).qsParams={during:"".concat(_r[0].dir,"load")},Xo((Er=lo(Xr),zo(rr.prototype)),"onRunningChange",Ls(lo(Xr),fs,rs),Er,!0),Xo((Nr=lo(Xr),zo(rr.prototype)),"onConnectionError",function(){return Qr(lo(Xr),Sn).pause()},Nr,!0)),Xr}return Sl(rr,[{key:"latencyResults",get:function(){return Qr(this,Sn)&&Qr(this,Sn).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(_r){Qr(this,Sn)&&(Qr(this,Sn).onMeasurementResult=function(Er){return _r(Er)})}},{key:"fetchOptions",get:function(){return fp(zo(rr.prototype),"fetchOptions",this)},set:function(_r){Xo(zo(rr.prototype),"fetchOptions",_r,this,!0),Qr(this,Sn)&&(Qr(this,Sn).fetchOptions=_r)}},{key:"onRunningChange",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onRunningChange",function(Nr){Ls(Er,fs,rs).call(Er,Nr),_r(Nr)},this,!0)}},{key:"onConnectionError",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onConnectionError",function(){Qr(Er,Sn)&&Qr(Er,Sn).pause(),_r.apply(void 0,arguments)},this,!0)}}]),rr}(gs),Gs=["measurementId","logApiUrl"],xs=new WeakMap,vs=new WeakMap,Fs=new WeakMap,Zs=new WeakMap,no=new WeakSet,ms=new WeakSet;function Ds(Yt){Qr(this,Zs)&&(ps(this,Fs,+Yt.headers.get("cf-meta-request-time")),ps(this,vs,Yt.body.slice(-300).split("___").pop()))}function $o(Yt){if(Qr(this,Zs)){var er={type:Yt.type,bytes:Yt.bytes,ping:Math.round(Yt.ping),ttfb:Math.round(Yt.ttfb),payloadDownloadTime:Math.round(Yt.payloadDownloadTime),duration:Math.round(Yt.duration),transferSize:Math.round(Yt.transferSize),serverTime:Math.round(Yt.serverTime),token:Qr(this,vs),requestTime:Qr(this,Fs),measId:Qr(this,xs)};ps(this,vs,null),ps(this,Fs,null),fetch(Qr(this,Zs),iu({method:"POST",body:JSON.stringify(er)},this.fetchOptions))}}var jo=function(Yt){Tp(rr,Yt);var er=$p(rr);function rr(_r){var Er,Nr,Xr,Yr,gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kr=gn.measurementId,Hr=gn.logApiUrl,Lr=Zu(gn,Gs);return Yo(this,rr),Ho(lo(Yr=er.call(this,_r,Lr)),ms),Ho(lo(Yr),no),Rs(lo(Yr),xs,{writable:!0,value:void 0}),Rs(lo(Yr),vs,{writable:!0,value:void 0}),Rs(lo(Yr),Fs,{writable:!0,value:void 0}),Rs(lo(Yr),Zs,{writable:!0,value:void 0}),ps(lo(Yr),xs,kr),ps(lo(Yr),Zs,Hr),Xo((Er=lo(Yr),zo(rr.prototype)),"qsParams",Hr?{measId:Qr(lo(Yr),xs)}:{},Er,!0),Xo((Nr=lo(Yr),zo(rr.prototype)),"responseHook",function(on){return Ls(lo(Yr),no,Ds).call(lo(Yr),on)},Nr,!0),Xo((Xr=lo(Yr),zo(rr.prototype)),"onMeasurementResult",function(on){return Ls(lo(Yr),ms,$o).call(lo(Yr),on)},Xr,!0),Yr}return Sl(rr,[{key:"qsParams",set:function(_r){Xo(zo(rr.prototype),"qsParams",Qr(this,Zs)?iu({measId:Qr(this,xs)},_r):_r,this,!0)}},{key:"responseHook",set:function(_r){var Er=this;Xo(zo(rr.prototype),"responseHook",function(Nr){_r(Nr),Ls(Er,no,Ds).call(Er,Nr)},this,!0)}},{key:"onMeasurementResult",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onMeasurementResult",function(Nr){for(var Xr=arguments.length,Yr=new Array(Xr>1?Xr-1:0),gn=1;gn<Xr;gn++)Yr[gn-1]=arguments[gn];_r.apply(void 0,[Nr].concat(Yr)),Ls(Er,ms,$o).call(Er,Nr)},this,!0)}}]),rr}(js),Xs=new WeakMap,So=new WeakMap,Co=new WeakMap,io=new WeakSet,po=new WeakSet,Js=new WeakSet,ga=function(){function Yt(er){if(Yo(this,Yt),Ho(this,Js),Ho(this,po),Ho(this,io),Rs(this,Xs,{writable:!0,value:!1}),Rs(this,So,{writable:!0,value:void 0}),Rs(this,Co,{writable:!0,value:void 0}),!er)throw new Error("Missing operation to perform");ps(this,Co,er),this.play()}return Sl(Yt,[{key:"pause",value:function(){Ls(this,Js,Io).call(this),Ls(this,io,Qn).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Qr(this,Xs)||(Ls(this,io,Qn).call(this,!0),Ls(this,po,so).call(this))}}]),Yt}();function Qn(Yt){Yt!==Qr(this,Xs)&&ps(this,Xs,Yt)}function so(){var Yt=this,er=ps(this,So,Qr(this,Co).call(this).then(function(){!er._cancel&&Ls(Yt,po,so).call(Yt)}))}function Io(){var Yt=Qr(this,So);Yt&&(Yt._cancel=!0)}var fo=new WeakMap,_a=function(){function Yt(){var er=this,rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=rr.download,Er=rr.upload;if(Yo(this,Yt),Ks(this,"qsParams",{}),Ks(this,"fetchOptions",{}),Rs(this,fo,{writable:!0,value:[]}),!_r&&!Er)throw new Error("Missing at least one of download/upload config");[[_r,"download"],[Er,"upload"]].filter(function(Xr){return Pl(Xr,1)[0]}).forEach(function(Xr){var Yr=Pl(Xr,2),gn=Yr[0],kr=Yr[1],Hr=gn.apiUrl,Lr=gn.chunkSize;if(!Hr)throw new Error("Missing ".concat(kr," apiUrl argument"));if(!Lr)throw new Error("Missing ".concat(kr," chunkSize argument"))});var Nr=function(Xr){var Yr=Xr.apiUrl,gn=Xr.qsParams,kr=gn===void 0?{}:gn,Hr=Xr.fetchOptions,Lr=Hr===void 0?{}:Hr;return new ga(function(){var on=Object.assign({},kr,er.qsParams),En="".concat(Yr.startsWith("http")||Yr.startsWith("//")?"":window.location.origin).concat(Yr,"?").concat(Object.entries(on).map(function(zn){var Xn=Pl(zn,2),Zn=Xn[0],In=Xn[1];return"".concat(Zn,"=").concat(In)}).join("&")),Kn=Object.assign({},Lr,er.fetchOptions);return fetch(En,Kn).then(function(zn){if(zn.ok)return zn;throw Error(zn.statusText)}).then(function(zn){return zn.text()})})};_r&&Qr(this,fo).push(Nr({apiUrl:_r.apiUrl,qsParams:{bytes:"".concat(_r.chunkSize)}})),Er&&Qr(this,fo).push(Nr({apiUrl:Er.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Er.chunkSize)}}))}return Sl(Yt,[{key:"pause",value:function(){Qr(this,fo).forEach(function(er){return er.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Qr(this,fo).forEach(function(er){return er.play()})}}]),Yt}(),Bs=["iceServers","acceptIceCandidate","dataChannelCfg"],wo=new WeakMap,Es=new WeakMap,mo=new WeakMap,Wo=new WeakMap,Jl=new WeakMap,Yu=function(){function Yt(){var er=this,rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=rr.iceServers,Er=_r===void 0?[]:_r,Nr=rr.acceptIceCandidate,Xr=Nr===void 0?function(En){var Kn=En.protocol||"";if(!Kn&&En.candidate){var zn=En.candidate.split(" ");zn.length>=3&&(Kn=zn[2])}return Kn.toLowerCase()==="udp"}:Nr,Yr=rr.dataChannelCfg,gn=Yr===void 0?{ordered:!1,maxRetransmits:0}:Yr,kr=Zu(rr,Bs);Yo(this,Yt),Ks(this,"onOpen",function(){}),Ks(this,"onClose",function(){}),Ks(this,"onMessageReceived",function(){}),Rs(this,wo,{writable:!0,value:!1}),Rs(this,Es,{writable:!0,value:void 0}),Rs(this,mo,{writable:!0,value:void 0}),Rs(this,Wo,{writable:!0,value:void 0}),Rs(this,Jl,{writable:!0,value:void 0});var Hr=new RTCPeerConnection(iu({iceServers:Er},kr)),Lr=new RTCPeerConnection(iu({iceServers:Er},kr)),on=Hr.createDataChannel("channel",gn);on.onopen=function(){ps(er,wo,!0),er.onOpen()},on.onclose=function(){return er.close()},Lr.ondatachannel=function(En){var Kn=En.channel;Kn.onclose=function(){return er.close()},Kn.onmessage=function(zn){return er.onMessageReceived(zn.data)},ps(er,Jl,Kn)},Hr.onicecandidate=function(En){En.candidate&&Xr(En.candidate)&&Lr.addIceCandidate(En.candidate)},Lr.onicecandidate=function(En){En.candidate&&Xr(En.candidate)&&Hr.addIceCandidate(En.candidate)},Hr.createOffer().then(function(En){return Hr.setLocalDescription(En)}).then(function(){return Lr.setRemoteDescription(Hr.localDescription)}).then(function(){return Lr.createAnswer()}).then(function(En){return Lr.setLocalDescription(En)}).then(function(){return Hr.setRemoteDescription(Lr.localDescription)}),ps(this,Es,Hr),ps(this,mo,Lr),ps(this,Wo,on),ps(this,wo,!1)}return Sl(Yt,[{key:"send",value:function(er){return Qr(this,Wo).send(er)}},{key:"close",value:function(){return Qr(this,Es)&&Qr(this,Es).close(),Qr(this,mo)&&Qr(this,mo).close(),Qr(this,Wo)&&Qr(this,Wo).close(),Qr(this,Jl)&&Qr(this,Jl).close(),Qr(this,wo)&&this.onClose(),ps(this,wo,!1),this}}]),Yt}(),ju=new WeakMap,Eu=new WeakMap,tp=new WeakMap,cu=new WeakMap,xp=new WeakMap,Zo=new WeakMap,wu=function(){function Yt(){var er=this,rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=rr.turnServerUri,Er=rr.turnServerCredsApi,Nr=rr.turnServerCredsApiParser,Xr=Nr===void 0?function(us){return{turnServerUser:us.username,turnServerPass:us.credential}}:Nr,Yr=rr.turnServerCredsApiIncludeCredentials,gn=Yr!==void 0&&Yr,kr=rr.turnServerUser,Hr=rr.turnServerPass,Lr=rr.numMsgs,on=Lr===void 0?100:Lr,En=rr.batchSize,Kn=En===void 0?10:En,zn=rr.batchWaitTime,Xn=zn===void 0?10:zn,Zn=rr.responsesWaitTime,In=Zn===void 0?5e3:Zn,kn=rr.connectionTimeout,Ln=kn===void 0?5e3:kn;if(Yo(this,Yt),Rs(this,ju,{writable:!0,value:function(){}}),Rs(this,Eu,{writable:!0,value:function(){}}),Rs(this,tp,{writable:!0,value:function(){}}),Ks(this,"onMsgSent",function(){}),Ks(this,"onAllMsgsSent",function(){}),Ks(this,"onMsgReceived",function(){}),Rs(this,cu,{writable:!0,value:{}}),Rs(this,xp,{writable:!0,value:void 0}),Rs(this,Zo,{writable:!0,value:void 0}),!_r)throw new Error("Missing turnServerUri argument");if(!(kr&&Hr||Er))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");ps(this,Zo,on),(kr&&Hr?Promise.resolve({turnServerUser:kr,turnServerPass:Hr}):fetch(Er,{credentials:gn?"include":void 0}).then(function(us){return us.json()}).then(function(us){if(us.error)throw us.error;return us}).then(Xr)).catch(function(us){return Qr(er,ju).call(er,us)}).then(function(us){var ys=us.turnServerUser,Ys=us.turnServerPass,Vs=ps(er,xp,new Yu({iceServers:[{urls:"turn:".concat(_r,"?transport=udp"),username:ys,credential:Ys}],iceTransportPolicy:"relay"})),Bo=!1;setTimeout(function(){Bo||(Vs.close(),Qr(er,Eu).call(er,"ICE connection timeout!"))},Ln);var Go=Qr(er,cu);Vs.onOpen=function(){Bo=!0;var _o=er;(function El(ho){if(ho<=on){for(var xa=ho;xa<=Math.min(on,ho+Kn-1);)Go[xa]=!1,Vs.send(xa),_o.onMsgSent(xa),xa++;setTimeout(function(){return El(xa)},Xn)}else{_o.onAllMsgsSent(Object.keys(Go).length);var Xl=function(){Vs.close(),Qr(_o,tp).call(_o,_o.results)},ru=setTimeout(Xl,In),Au=Object.values(Qr(_o,cu)).filter(function(Qo){return!Qo}).length;Vs.onMessageReceived=function(Qo){clearTimeout(ru),Go[Qo]=!0,_o.onMsgReceived(Qo),--Au<=0&&Object.values(Qr(_o,cu)).every(function(Op){return Op})?Xl():ru=setTimeout(Xl,In)}}})(1)},Vs.onMessageReceived=function(_o){Go[_o]=!0,er.onMsgReceived(_o)}}).catch(function(us){return Qr(er,Eu).call(er,us.toString())})}return Sl(Yt,[{key:"onCredentialsFailure",set:function(er){ps(this,ju,er)}},{key:"onConnectionError",set:function(er){ps(this,Eu,er)}},{key:"onFinished",set:function(er){ps(this,tp,er)}},{key:"results",get:function(){var er=Qr(this,Zo),rr=Object.keys(Qr(this,cu)).length,_r=Object.entries(Qr(this,cu)).filter(function(Er){return!Pl(Er,2)[1]}).map(function(Er){return+Pl(Er,1)[0]});return{totalMessages:er,numMessagesSent:rr,packetLoss:_r.length/rr,lostMessages:_r}}}]),Yt}(),uu=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],_l=new WeakMap,du=function(Yt){Tp(rr,Yt);var er=$p(rr);function rr(){var _r,Er,Nr,Xr,Yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gn=Yr.downloadChunkSize,kr=Yr.uploadChunkSize,Hr=Yr.downloadApiUrl,Lr=Yr.uploadApiUrl,on=Zu(Yr,uu);return Yo(this,rr),Rs(lo(Xr=er.call(this,on)),_l,{writable:!0,value:void 0}),(gn||kr)&&(ps(lo(Xr),_l,new _a({download:gn?{apiUrl:Hr,chunkSize:gn}:null,upload:kr?{apiUrl:Lr,chunkSize:kr}:null})),Xo((_r=lo(Xr),zo(rr.prototype)),"onCredentialsFailure",Xo((Nr=lo(Xr),zo(rr.prototype)),"onConnectionError",Xo((Er=lo(Xr),zo(rr.prototype)),"onFinished",function(){return Qr(lo(Xr),_l).stop()},Er,!0),Nr,!0),_r,!0)),Xr}return Sl(rr,[{key:"qsParams",set:function(_r){Qr(this,_l)&&(Qr(this,_l).qsParams=_r)}},{key:"fetchOptions",set:function(_r){Qr(this,_l)&&(Qr(this,_l).fetchOptions=_r)}},{key:"onCredentialsFailure",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onCredentialsFailure",function(){_r.apply(void 0,arguments),Qr(Er,_l)&&Qr(Er,_l).stop()},this,!0)}},{key:"onConnectionError",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onConnectionError",function(){_r.apply(void 0,arguments),Qr(Er,_l)&&Qr(Er,_l).stop()},this,!0)}},{key:"onFinished",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onFinished",function(){_r.apply(void 0,arguments),Qr(Er,_l)&&Qr(Er,_l).stop()},this,!0)}}]),rr}(wu),Fu=["reachable"],Bu=Sl(function Yt(er){var rr=this,_r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Er=_r.timeout,Nr=Er===void 0?-1:Er,Xr=_r.fetchOptions,Yr=Xr===void 0?{}:Xr;Yo(this,Yt),Ks(this,"onFinished",function(){});var gn=!1,kr=function(Hr){var Lr=Hr.reachable,on=Zu(Hr,Fu);gn||(gn=!0,rr.onFinished(iu({targetUrl:er,reachable:Lr},on)))};fetch(er,Yr).then(function(Hr){kr({reachable:!0,response:Hr})}).catch(function(Hr){kr({reachable:!1,error:Hr})}),Nr>0&&setTimeout(function(){return kr({reachable:!1,error:"Request timeout"})},Nr)}),hu=function(Yt){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!Yt.length)return 0;var rr=Yt.slice().sort(function(Xr,Yr){return Xr-Yr}),_r=(Yt.length-1)*er,Er=_r%1;if(Er===0)return rr[Math.round(_r)];var Nr=[Math.floor,Math.ceil].map(function(Xr){return rr[Xr(_r)]});return Nr[0]+(Nr[1]-Nr[0])*Er},_c=new WeakMap,pu=new WeakMap,Uu=function(){function Yt(er){var rr=this;Yo(this,Yt),Ks(this,"getLatencyPoints",function(_r){return _r.timings.map(function(Er){return Er.ping})}),Ks(this,"getLatency",function(_r){return hu(rr.getLatencyPoints(_r),Qr(rr,_c).latencyPercentile)}),Ks(this,"getBandwidthPoints",function(_r){return Object.entries(_r).map(function(Er){var Nr=Pl(Er,2),Xr=Nr[0];return Nr[1].timings.map(function(Yr){var gn=Yr.bps,kr=Yr.duration,Hr=Yr.ping,Lr=Yr.measTime,on=Yr.serverTime,En=Yr.transferSize;return{bytes:+Xr,bps:gn,duration:kr,ping:Hr,measTime:Lr,serverTime:on,transferSize:En}})}).flat()}),Ks(this,"getBandwidth",function(_r){return hu(rr.getBandwidthPoints(_r).filter(function(Er){return Er.duration>=Qr(rr,_c).bandwidthMinRequestDuration}).map(function(Er){return Er.bps}).filter(function(Er){return Er}),Qr(rr,_c).bandwidthPercentile)}),Ks(this,"getLoadedLatency",function(_r){return rr.getLatency({timings:Qr(rr,pu).call(rr,_r)})}),Ks(this,"getLoadedJitter",function(_r){return rr.getJitter({timings:Qr(rr,pu).call(rr,_r)})}),Ks(this,"getLoadedLatencyPoints",function(_r){return rr.getLatencyPoints({timings:Qr(rr,pu).call(rr,_r)})}),Ks(this,"getPacketLoss",function(_r){return _r.packetLoss}),Ks(this,"getPacketLossDetails",function(_r){return _r}),Ks(this,"getReachability",function(_r){return!!_r.reachable}),Ks(this,"getReachabilityDetails",function(_r){return{host:_r.host,reachable:_r.reachable}}),Rs(this,_c,{writable:!0,value:void 0}),Rs(this,pu,{writable:!0,value:function(_r){return Object.values(_r).filter(function(Er){return Er.timings.length&&Math.min.apply(Math,Su(Er.timings.map(function(Nr){return Nr.duration})))>=Qr(rr,_c).loadedRequestMinDuration}).map(function(Er){return Er.sideLatency||[]}).flat().slice(-Qr(rr,_c).loadedLatencyMaxPoints)}}),ps(this,_c,er)}return Sl(Yt,[{key:"getJitter",value:function(er){var rr=this.getLatencyPoints(er);return rr.length<2?null:rr.reduce(function(_r,Er){var Nr=_r.sumDeltas,Xr=Nr===void 0?0:Nr,Yr=_r.prevLatency;return{sumDeltas:Xr+(Yr!==void 0?Math.abs(Yr-Er):0),prevLatency:Er}},{}).sumDeltas/(rr.length-1)}}]),Yt}(),eu=["bad","poor","average","good","great"],fu={loadedLatencyIncrease:function(Yt){return Yt.latency&&(Yt.downLoadedLatency||Yt.upLoadedLatency)?Math.max(Yt.downLoadedLatency,Yt.upLoadedLatency)-Yt.latency:void 0}},Lo={packetLoss:0},Ru=new WeakMap,Sp=function(){function Yt(er){Yo(this,Yt),Rs(this,Ru,{writable:!0,value:void 0}),ps(this,Ru,er)}return Sl(Yt,[{key:"getScores",value:function(er){var rr=Object.assign.apply(Object,Su(Object.entries(Qr(this,Ru).aimMeasurementScoring).map(function(_r){var Er=Pl(_r,2),Nr=Er[0],Xr=Er[1],Yr=fu.hasOwnProperty(Nr)?fu[Nr](er):er[Nr];return Yr===void 0?Lo.hasOwnProperty(Nr)?Ks({},Nr,Lo[Nr]):{}:Ks({},Nr,Yr===void 0?0:+Xr(Yr))})));return Object.assign.apply(Object,[{}].concat(Su(Object.entries(Qr(this,Ru).aimExperiencesDefs).filter(function(_r){return Pl(_r,2)[1].input.every(function(Er){return rr.hasOwnProperty(Er)})}).map(function(_r){var Er,Nr=Pl(_r,2),Xr=Nr[0],Yr=Nr[1],gn=Yr.input,kr=Yr.pointThresholds,Hr=Math.max(0,(Er=gn.map(function(on){return rr[on]}),Er.reduce(function(on,En){return on+En},0))),Lr=xl(kr,[0,1,2,3,4])(Hr);return Ks({},Xr,{points:Hr,classificationIdx:Lr,classificationName:eu[Lr]})}))))}}]),Yt}(),mu=new WeakMap,rp=new WeakMap,np=new WeakMap,Do=new WeakMap,Vu=new WeakMap,gu=new WeakMap,vu=new WeakMap,Tu=new WeakMap,zu=function(){function Yt(er){var rr=this;Yo(this,Yt),Ks(this,"raw",void 0),Ks(this,"getUnloadedLatency",function(){return Qr(rr,Do).call(rr,"getLatency","latency")}),Ks(this,"getUnloadedJitter",function(){return Qr(rr,Do).call(rr,"getJitter","latency")}),Ks(this,"getUnloadedLatencyPoints",function(){return Qr(rr,Do).call(rr,"getLatencyPoints","latency",[])}),Ks(this,"getDownLoadedLatency",function(){return Qr(rr,Do).call(rr,"getLoadedLatency","download")}),Ks(this,"getDownLoadedJitter",function(){return Qr(rr,Do).call(rr,"getLoadedJitter","download")}),Ks(this,"getDownLoadedLatencyPoints",function(){return Qr(rr,Do).call(rr,"getLoadedLatencyPoints","download",[])}),Ks(this,"getUpLoadedLatency",function(){return Qr(rr,Do).call(rr,"getLoadedLatency","upload")}),Ks(this,"getUpLoadedJitter",function(){return Qr(rr,Do).call(rr,"getLoadedJitter","upload")}),Ks(this,"getUpLoadedLatencyPoints",function(){return Qr(rr,Do).call(rr,"getLoadedLatencyPoints","upload",[])}),Ks(this,"getDownloadBandwidth",function(){return Qr(rr,Do).call(rr,"getBandwidth","download")}),Ks(this,"getDownloadBandwidthPoints",function(){return Qr(rr,Do).call(rr,"getBandwidthPoints","download",[])}),Ks(this,"getUploadBandwidth",function(){return Qr(rr,Do).call(rr,"getBandwidth","upload")}),Ks(this,"getUploadBandwidthPoints",function(){return Qr(rr,Do).call(rr,"getBandwidthPoints","upload",[])}),Ks(this,"getPacketLoss",function(){return Qr(rr,Do).call(rr,"getPacketLoss","packetLoss")}),Ks(this,"getPacketLossDetails",function(){return Qr(rr,Do).call(rr,"getPacketLossDetails","packetLoss",void 0,!0)}),Ks(this,"getScores",function(){return Qr(rr,np).getScores(rr.getSummary())}),Rs(this,mu,{writable:!0,value:void 0}),Rs(this,rp,{writable:!0,value:void 0}),Rs(this,np,{writable:!0,value:void 0}),Rs(this,Do,{writable:!0,value:function(_r,Er){var Nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Xr=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return rr.raw.hasOwnProperty(Er)&&rr.raw[Er].started?Xr&&rr.raw[Er].error?{error:rr.raw[Er].error}:Qr(rr,rp)[_r](rr.raw[Er].results):Nr}}),Rs(this,Vu,{writable:!0,value:function(){return Qr(rr,Do).call(rr,"getReachability","v4Reachability")}}),Rs(this,gu,{writable:!0,value:function(){return Qr(rr,Do).call(rr,"getReachabilityDetails","v4Reachability")}}),Rs(this,vu,{writable:!0,value:function(){return Qr(rr,Do).call(rr,"getReachability","v6Reachability")}}),Rs(this,Tu,{writable:!0,value:function(){return Qr(rr,Do).call(rr,"getReachabilityDetails","v6Reachability")}}),ps(this,mu,er),this.clear(),ps(this,rp,new Uu(Qr(this,mu))),ps(this,np,new Sp(Qr(this,mu)))}return Sl(Yt,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(er){return er.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Su(Su(new Set(Qr(this,mu).measurements.map(function(er){return er.type}))).map(function(er){return Ks({},er,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var er={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:Qr(this,Vu),v6Reachability:Qr(this,vu)};return Object.assign.apply(Object,Su(Object.entries(er).map(function(rr){var _r=Pl(rr,2),Er=_r[0],Nr=(0,_r[1])();return Nr===void 0?{}:Ks({},Er,Nr)})))}}]),Yt}(),Qu=function(Yt){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Yt&&Math.round(Yt*Math.pow(10,er))/Math.pow(10,er)},Ju=function(Yt){return Yt.map(function(er){return Qu(er,2)})},os=function(Yt){return Yt.map(function(er){return{bytes:+er.bytes,bps:Qu(er.bps)}})},Fo={latencyMs:["getUnloadedLatencyPoints",Ju],download:["getDownloadBandwidthPoints",os],upload:["getUploadBandwidthPoints",os],downLoadedLatencyMs:["getDownLoadedLatencyPoints",Ju],upLoadedLatencyMs:["getUpLoadedLatencyPoints",Ju],packetLoss:["getPacketLossDetails",function(Yt){return Yt.error?void 0:{numMessages:Yt.numMessagesSent,lossRatio:Qu(Yt.packetLoss,4)}}]},Ep=function(Yt,er){var rr=er.apiUrl,_r={};Object.entries(Fo).forEach(function(Nr){var Xr=Pl(Nr,2),Yr=Xr[0],gn=Pl(Xr[1],2),kr=gn[0],Hr=gn[1],Lr=Hr===void 0?function(En){return En}:Hr,on=Yt[kr]();on&&(_r[Yr]=Lr(on))});var Er=Yt.getScores();Er&&(_r.scores=Object.assign.apply(Object,[{}].concat(Su(Object.entries(Er).map(function(Nr){var Xr,Yr=Pl(Nr,2),gn=Yr[0],kr=Yr[1];return Ks({},gn,{points:(Xr=kr).points,classification:Xr.classificationName})}))))),fetch(rr,{method:"POST",body:JSON.stringify(_r)})},Pp=["type"],ip=["numPackets"],sp=["bytes"],Ap=["latency","latencyUnderLoad","download","upload"],Vp=function(){return"".concat(Math.round(1e16*Math.random()))},Kl=new WeakMap,op=new WeakMap,Gn=new WeakMap,tu=new WeakMap,zp=new WeakMap,Cu=new WeakMap,Hp=new WeakMap,kp=new WeakMap,Al=new WeakMap,Ip=new WeakMap,Em=new WeakMap,Hl=new WeakSet,Wl=new WeakSet,Yp=new WeakSet,Lp=new WeakSet,km=new WeakSet,Im=new WeakSet,yu=new WeakSet,Lm=function(){function Yt(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yo(this,Yt),Ho(this,yu),Ho(this,Im),Ho(this,km),Ho(this,Lp),Ho(this,Yp),Ho(this,Wl),Ho(this,Hl),Ks(this,"onRunningChange",function(){}),Ks(this,"onResultsChange",function(){}),Rs(this,Kl,{writable:!0,value:function(){}}),Rs(this,op,{writable:!0,value:function(){}}),Rs(this,Gn,{writable:!0,value:void 0}),Rs(this,tu,{writable:!0,value:void 0}),Rs(this,zp,{writable:!0,value:Vp()}),Rs(this,Cu,{writable:!0,value:-1}),Rs(this,Hp,{writable:!0,value:void 0}),Rs(this,kp,{writable:!0,value:1e6}),Rs(this,Al,{writable:!0,value:1e6}),Rs(this,Ip,{writable:!0,value:!1}),Rs(this,Em,{writable:!0,value:!1}),ps(this,Gn,Object.assign({},Mp,er,Xp)),ps(this,tu,new zu(Qr(this,Gn))),Qr(this,Gn).autoStart&&this.play()}return Sl(Yt,[{key:"results",get:function(){return Qr(this,tu)}},{key:"isRunning",get:function(){return Qr(this,Ip)}},{key:"isFinished",get:function(){return Qr(this,Em)}},{key:"onFinish",set:function(er){ps(this,Kl,er)}},{key:"onError",set:function(er){ps(this,op,er)}},{key:"pause",value:function(){Ap.includes(Ls(this,Yp,fm).call(this))&&Qr(this,Hp).pause(),Ls(this,Hl,pm).call(this,!1)}},{key:"play",value:function(){Qr(this,Ip)||(Ls(this,Hl,pm).call(this,!0),Ls(this,yu,Mu).call(this))}},{key:"restart",value:function(){Ls(this,km,Rm).call(this),this.play()}}]),Yt}();function pm(Yt){Yt!==Qr(this,Ip)&&(ps(this,Ip,Yt),this.onRunningChange(Qr(this,Ip)))}function wm(Yt){var er=this;Yt!==Qr(this,Em)&&(ps(this,Em,Yt),Yt&&setTimeout(function(){return Qr(er,Kl).call(er,er.results)}))}function fm(){return Qr(this,Cu)<0||Qr(this,Cu)>=Qr(this,Gn).measurements.length?null:Qr(this,Gn).measurements[Qr(this,Cu)].type}function Wp(){return Qr(this,tu).raw[Ls(this,Yp,fm).call(this)]||void 0}function Rm(){Ls(this,Im,Tm).call(this),ps(this,zp,Vp()),ps(this,Cu,-1),ps(this,Hp,void 0),Ls(this,Hl,pm).call(this,!1),Ls(this,Wl,wm).call(this,!1),Qr(this,tu).clear()}function Tm(){var Yt=Qr(this,Hp);Yt&&(Yt.onFinished=Yt.onConnectionError=Yt.onFail=Yt.onMsgReceived=Yt.onCredentialsFailure=Yt.onMeasurementResult=function(){},Ap.includes(Ls(this,Yp,fm).call(this))&&Yt.pause())}function Mu(){var Yt,er=this;if(!(Ap.includes(Ls(this,Yp,fm).call(this))&&Ls(this,Lp,Wp).call(this)&&Ls(this,Lp,Wp).call(this).started)||Ls(this,Lp,Wp).call(this).finished||Ls(this,Lp,Wp).call(this).finishedCurrentRound||Ls(this,Lp,Wp).call(this).error){if(ps(this,Cu,(Yt=Qr(this,Cu),++Yt)),Qr(this,Cu)>=Qr(this,Gn).measurements.length)return Ls(this,Hl,pm).call(this,!1),void Ls(this,Wl,wm).call(this,!0);var rr,_r=Qr(this,Gn).measurements[Qr(this,Cu)],Er=_r.type,Nr=Zu(_r,Pp),Xr=Ls(this,Lp,Wp).call(this),Yr=Qr(this,Gn),gn=Yr.downloadApiUrl,kr=Yr.uploadApiUrl,Hr=Yr.estimatedServerTime;switch(Er){case"v4Reachability":case"v6Reachability":(rr=new Bu("https://".concat(Nr.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(Ln){Xr.finished=!0,Xr.results=iu({host:Nr.host},Ln),er.onResultsChange({type:Er}),Ls(er,yu,Mu).call(er)};break;case"rpki":(rr=new Bu("https://".concat(Qr(this,Gn).rpkiInvalidHost),{timeout:5e3})).onFinished=function(Ln){(Ln.response?Ln.response.json():Promise.resolve()).then(function(us){Xr.finished=!0,Xr.results=iu({host:Qr(er,Gn).rpkiInvalidHost,filteringInvalids:!Ln.reachable},us?{asn:us.asn,name:us.name}:{}),er.onResultsChange({type:Er}),Ls(er,yu,Mu).call(er)})};break;case"nxdomain":(rr=new Bu("https://".concat(Nr.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(Ln){Xr.finished=!0,Xr.results={host:Nr.nxhost,reachable:Ln.reachable},er.onResultsChange({type:Er}),Ls(er,yu,Mu).call(er)};break;case"packetLoss":case"packetLossUnderLoad":Xr.finished=!1;var Lr=Nr.numPackets,on=Zu(Nr,ip),En=Qr(this,Gn),Kn=En.turnServerUri,zn=En.turnServerCredsApiUrl,Xn=En.turnServerUser,Zn=En.turnServerPass,In=En.includeCredentials;(rr=new du(iu({turnServerUri:Kn,turnServerCredsApi:zn,turnServerCredsApiIncludeCredentials:In,turnServerUser:Xn,turnServerPass:Zn,numMsgs:Lr,downloadChunkSize:Nr.loadDown?Qr(this,kp):void 0,uploadChunkSize:Nr.loadUp?Qr(this,Al):void 0,downloadApiUrl:gn,uploadApiUrl:kr},on))).onMsgReceived=function(){Xr.results=Object.assign({},rr.results),er.onResultsChange({type:Er})},rr.onFinished=function(){Xr.finished=!0,er.onResultsChange({type:Er}),Ls(er,yu,Mu).call(er)},rr.onConnectionError=function(Ln){Xr.error=Ln,er.onResultsChange({type:Er}),Qr(er,op).call(er,"Connection error while measuring packet loss: ".concat(Ln)),Ls(er,yu,Mu).call(er)},rr.onCredentialsFailure=function(){Xr.error="unable to get turn server credentials",er.onResultsChange({type:Er}),Qr(er,op).call(er,"Error while measuring packet loss: unable to get turn server credentials."),Ls(er,yu,Mu).call(er)};break;case"latency":case"latencyUnderLoad":Xr.finished=!1,(rr=new jo([{dir:"down",bytes:0,count:Nr.numPackets,bypassMinDuration:!0}],{downloadApiUrl:gn,uploadApiUrl:kr,estimatedServerTime:Hr,logApiUrl:Qr(this,Gn).logMeasurementApiUrl,measurementId:Qr(this,zp),downloadChunkSize:Nr.loadDown?Qr(this,kp):void 0,uploadChunkSize:Nr.loadUp?Qr(this,Al):void 0})).fetchOptions={credentials:Qr(this,Gn).includeCredentials?"include":void 0},rr.onMeasurementResult=rr.onNewMeasurementStarted=function(Ln,us){Xr.results=Object.assign({},us.down[0]),er.onResultsChange({type:Er})},rr.onFinished=function(){Xr.finished=!0,er.onResultsChange({type:Er}),Qr(er,Ip)&&Ls(er,yu,Mu).call(er)},rr.onConnectionError=function(Ln){Xr.error=Ln,er.onResultsChange({type:Er}),Qr(er,op).call(er,"Connection error while measuring latency: ".concat(Ln)),Ls(er,yu,Mu).call(er)},rr.play();break;case"download":case"upload":if(Xr.finished||Xr.error)Ls(this,yu,Mu).call(this);else{delete Xr.finishedCurrentRound;var kn=Qr(this,Gn)["measure".concat(Er==="download"?"Down":"Up","loadLoadedLatency")];(rr=new jo([iu({dir:Er==="download"?"down":"up"},Nr)],{downloadApiUrl:gn,uploadApiUrl:kr,estimatedServerTime:Hr,logApiUrl:Qr(this,Gn).logMeasurementApiUrl,measurementId:Qr(this,zp),measureParallelLatency:kn,parallelLatencyThrottleMs:Qr(this,Gn).loadedLatencyThrottle})).fetchOptions={credentials:Qr(this,Gn).includeCredentials?"include":void 0},rr.finishRequestDuration=Qr(this,Gn).bandwidthFinishRequestDuration,rr.onNewMeasurementStarted=function(Ln){var us=Ln.count,ys=Ln.bytes,Ys=Xr.results=Object.assign({},Xr.results);!Ys.hasOwnProperty(ys)&&(Ys[ys]={timings:[],numMeasurements:0,sideLatency:kn?[]:void 0}),Ys[ys].numMeasurements-Ys[ys].timings.length!==us&&(Ys[ys].numMeasurements+=us,er.onResultsChange({type:Er}))},rr.onMeasurementResult=function(Ln){var us=Ln.bytes,ys=Zu(Ln,sp);Xr.results[us].timings.push(ys),Xr.results=Object.assign({},Xr.results),er.onResultsChange({type:Er})},rr.onParallelLatencyResult=function(Ln){Xr.results[Nr.bytes].sideLatency.push(Ln),Xr.results=Object.assign({},Xr.results),er.onResultsChange({type:Er})},rr.onFinished=function(Ln){var us=!Qr(er,Gn).measurements.slice(Qr(er,Cu)+1).map(function(Vs){return Vs.type}).includes(Er),ys=Math.min.apply(Math,Su(Object.values(Er==="download"?Ln.down:Ln.up).slice(-1)[0].timings.map(function(Vs){return Vs.duration})));if(us||!Nr.bypassMinDuration&&ys>Qr(er,Gn).bandwidthFinishRequestDuration){Xr.finished=!0,er.onResultsChange({type:Er});var Ys=.5*Object.keys(Xr.results).map(function(Vs){return+Vs}).sort(function(Vs,Bo){return Bo-Vs})[0];Er==="download"&&ps(er,kp,Ys),Er==="upload"&&ps(er,Al,Ys)}else Xr.finishedCurrentRound=!0;Qr(er,Ip)&&Ls(er,yu,Mu).call(er)},rr.onConnectionError=function(Ln){Xr.error=Ln,er.onResultsChange({type:Er}),Qr(er,op).call(er,"Connection error while measuring ".concat(Er,": ").concat(Ln)),Ls(er,yu,Mu).call(er)},rr.play()}}ps(this,Hp,rr),Xr.started=!0,this.onResultsChange({type:Er})}else Qr(this,Hp).play()}var Qp=new WeakMap,Cm=new WeakMap,Vm=function(Yt){Tp(rr,Yt);var er=$p(rr);function rr(_r){var Er,Nr;Yo(this,rr);for(var Xr=arguments.length,Yr=new Array(Xr>1?Xr-1:0),gn=1;gn<Xr;gn++)Yr[gn-1]=arguments[gn];return Rs(lo(Nr=er.call.apply(er,[this,_r].concat(Yr))),Qp,{writable:!0,value:void 0}),Rs(lo(Nr),Cm,{writable:!0,value:function(kr){Qr(lo(Nr),Qp)&&Ep(kr,{apiUrl:Qr(lo(Nr),Qp)})}}),Xo((Er=lo(Nr),zo(rr.prototype)),"onFinish",Qr(lo(Nr),Cm),Er,!0),ps(lo(Nr),Qp,Object.assign({},Mp,_r,Xp).logAimApiUrl),Nr}return Sl(rr,[{key:"onFinish",set:function(_r){var Er=this;Xo(zo(rr.prototype),"onFinish",function(Nr){_r(Nr),Qr(Er,Cm).call(Er,Nr)},this,!0)}}]),rr}(Lm);function Dp(Yt,er){var rr=typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(!rr){if(Array.isArray(Yt)||(rr=function(gn,kr){if(gn){if(typeof gn=="string")return Dm(gn,kr);var Hr=Object.prototype.toString.call(gn).slice(8,-1);if(Hr==="Object"&&gn.constructor&&(Hr=gn.constructor.name),Hr==="Map"||Hr==="Set")return Array.from(gn);if(Hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Hr))return Dm(gn,kr)}}(Yt))||er&&Yt&&typeof Yt.length=="number"){rr&&(Yt=rr);var _r=0,Er=function(){};return{s:Er,n:function(){return _r>=Yt.length?{done:!0}:{done:!1,value:Yt[_r++]}},e:function(gn){throw gn},f:Er}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nr,Xr=!0,Yr=!1;return{s:function(){rr=rr.call(Yt)},n:function(){var gn=rr.next();return Xr=gn.done,gn},e:function(gn){Yr=!0,Nr=gn},f:function(){try{Xr||rr.return==null||rr.return()}finally{if(Yr)throw Nr}}}}function Dm(Yt,er){(er==null||er>Yt.length)&&(er=Yt.length);for(var rr=0,_r=new Array(er);rr<er;rr++)_r[rr]=Yt[rr];return _r}var Om=[$t],Nm=!1,Pu=function(){function Yt(){(0,mt.Z)(this,Yt)}var er,rr,_r,Er,Nr,Xr,Yr,gn,kr,Hr;return(0,gt.Z)(Yt,null,[{key:"config",value:function(Lr){if(!Lr)throw new Error("'token' is empty, please provide it in config");this.apiKey=Lr;var on=Ft(zr,void 0,Pt.apply(void 0,Om));window.STORE=on,ln.default.init({store:on})}},{key:"getCameras",value:(Hr=(0,ft.Z)(vt().mark(function Lr(){var on,En,Kn,zn,Xn;return vt().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return Zn.next=2,navigator.mediaDevices.enumerateDevices();case 2:on=Zn.sent,En=[],Kn=Dp(on);try{for(Kn.s();!(zn=Kn.n()).done;)(Xn=zn.value).kind=="videoinput"&&En.push(new Rp(Xn.deviceId,Xn.groupId,Xn.kind,Xn.label))}catch(In){Kn.e(In)}finally{Kn.f()}return Zn.abrupt("return",En);case 7:case"end":return Zn.stop()}},Lr)})),function(){return Hr.apply(this,arguments)})},{key:"getMicrophones",value:(kr=(0,ft.Z)(vt().mark(function Lr(){var on,En,Kn,zn,Xn;return vt().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return Zn.next=2,navigator.mediaDevices.enumerateDevices();case 2:on=Zn.sent,En=[],Kn=Dp(on);try{for(Kn.s();!(zn=Kn.n()).done;)(Xn=zn.value).kind=="audioinput"&&En.push(new xo(Xn.deviceId,Xn.groupId,Xn.kind,Xn.label))}catch(In){Kn.e(In)}finally{Kn.f()}return Zn.abrupt("return",En);case 7:case"end":return Zn.stop()}},Lr)})),function(){return kr.apply(this,arguments)})},{key:"getPlaybackDevices",value:(gn=(0,ft.Z)(vt().mark(function Lr(){var on,En,Kn,zn,Xn;return vt().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return Zn.next=2,navigator.mediaDevices.enumerateDevices();case 2:on=Zn.sent,En=[],Kn=Dp(on);try{for(Kn.s();!(zn=Kn.n()).done;)(Xn=zn.value).kind=="audiooutput"&&En.push(new ws(Xn.deviceId,Xn.groupId,Xn.kind,Xn.label))}catch(In){Kn.e(In)}finally{Kn.f()}return Zn.abrupt("return",En);case 7:case"end":return Zn.stop()}},Lr)})),function(){return gn.apply(this,arguments)})},{key:"getDevices",value:(Yr=(0,ft.Z)(vt().mark(function Lr(){var on,En,Kn,zn,Xn;return vt().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return Zn.next=2,navigator.mediaDevices.enumerateDevices();case 2:on=Zn.sent,En=[],Kn=Dp(on);try{for(Kn.s();!(zn=Kn.n()).done;)Xn=zn.value,En.push(new pp(Xn.deviceId,Xn.groupId,Xn.kind,Xn.label))}catch(In){Kn.e(In)}finally{Kn.f()}return Zn.abrupt("return",En);case 7:case"end":return Zn.stop()}},Lr)})),function(){return Yr.apply(this,arguments)})},{key:"on",value:function(Lr,on){if(Lr!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(Lr,on)}},{key:"addDeviceChangeEvent",value:function(){var Lr=this;Nm||(this.getDevices().then(function(on){Lr.devices=on}),navigator.mediaDevices.addEventListener("devicechange",function(){var on=(0,ft.Z)(vt().mark(function En(Kn){var zn,Xn,Zn,In,kn;return vt().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return zn=Lr.devices,Ln.next=3,Lr.getDevices();case 3:Lr.devices=Ln.sent,Xn=new Array,Zn=Dp(Lr.devices),Ln.prev=6,kn=vt().mark(function us(){var ys;return vt().wrap(function(Ys){for(;;)switch(Ys.prev=Ys.next){case 0:ys=In.value,zn.filter(function(Vs){return Vs.deviceId==ys.deviceId&&Vs.kind==ys.kind}).length==0?Xn.push(ys):zn=zn.filter(function(Vs){return!(Vs.deviceId==ys.deviceId&&Vs.kind==ys.kind)});case 3:case"end":return Ys.stop()}},us)}),Zn.s();case 9:if((In=Zn.n()).done){Ln.next=13;break}return Ln.delegateYield(kn(),"t0",11);case 11:Ln.next=9;break;case 13:Ln.next=18;break;case 15:Ln.prev=15,Ln.t1=Ln.catch(6),Zn.e(Ln.t1);case 18:return Ln.prev=18,Zn.f(),Ln.finish(18);case 21:Xn.length!=0&&Lr.eventEmitter.emit("device-changed",{devices:Lr.devices}),zn.length!=0&&Lr.eventEmitter.emit("device-changed",{devices:Lr.devices});case 23:case"end":return Ln.stop()}},En,null,[[6,15,18,21]])}));return function(En){return on.apply(this,arguments)}}()),Nm=!0)}},{key:"off",value:function(Lr,on){if(Lr!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(Lr,on)}},{key:"checkPermissions",value:(Xr=(0,ft.Z)(vt().mark(function Lr(on){var En,Kn,zn,Xn,Zn;return vt().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(on||(on=Dr.AUDIO_AND_VIDEO),En=new Map,!on.includes(Dr.AUDIO)&&!on.includes(Dr.AUDIO_AND_VIDEO)){In.next=15;break}return Kn=!0,In.prev=4,In.next=7,navigator.permissions.query({name:"microphone"});case 7:(zn=In.sent).state!="prompt"&&zn.state!="denied"||(Kn=!1),In.next=14;break;case 11:throw In.prev=11,In.t0=In.catch(4),Error("Browser does not support microphone permission check");case 14:En.set(Dr.AUDIO,Kn);case 15:if(!on.includes(Dr.VIDEO)&&!on.includes(Dr.AUDIO_AND_VIDEO)){In.next=28;break}return Xn=!0,In.prev=17,In.next=20,navigator.permissions.query({name:"camera"});case 20:(Zn=In.sent).state!="prompt"&&Zn.state!="denied"||(Xn=!1),In.next=27;break;case 24:throw In.prev=24,In.t1=In.catch(17),Error("Browser does not support camera permission check");case 27:En.set(Dr.VIDEO,Xn);case 28:return In.abrupt("return",En);case 29:case"end":return In.stop()}},Lr,null,[[4,11],[17,24]])})),function(Lr){return Xr.apply(this,arguments)})},{key:"requestPermission",value:(Nr=(0,ft.Z)(vt().mark(function Lr(on){var En,Kn,zn,Xn,Zn,In,kn;return vt().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:if(on||(on=Dr.AUDIO_AND_VIDEO),En=new Map,!on.includes(Dr.VIDEO)&&!on.includes(Dr.AUDIO_AND_VIDEO)){Ln.next=27;break}return zn={audio:!1,video:!0},Xn=!0,Ln.prev=5,Ln.next=8,navigator.mediaDevices.getUserMedia(zn);case 8:Kn=Ln.sent,Ln.next=25;break;case 11:if(Ln.prev=11,Ln.t0=Ln.catch(5),!(Ln.t0 instanceof DOMException)){Ln.next=23;break}if(Ln.t0.name!=="NotAllowedError"){Ln.next=17;break}Ln.next=21;break;case 17:if(Ln.t0.name!=="NotFoundError"){Ln.next=21;break}throw new Error("No Video Device Found");case 21:Ln.next=24;break;case 23:console.error("Error",Ln.t0);case 24:Xn=!1;case 25:Kn&&Kn.getTracks().forEach(function(us){us.stop()}),En.set(Dr.VIDEO,Xn);case 27:if(!on.includes(Dr.AUDIO)&&!on.includes(Dr.AUDIO_AND_VIDEO)){Ln.next=52;break}return In={audio:!0,video:!1},kn=!0,Ln.prev=30,Ln.next=33,navigator.mediaDevices.getUserMedia(In);case 33:Zn=Ln.sent,Ln.next=50;break;case 36:if(Ln.prev=36,Ln.t1=Ln.catch(30),!(Ln.t1 instanceof DOMException)){Ln.next=48;break}if(Ln.t1.name!=="NotAllowedError"){Ln.next=42;break}Ln.next=46;break;case 42:if(Ln.t1.name!=="NotFoundError"){Ln.next=46;break}throw new Error("No Audio Device Found");case 46:Ln.next=49;break;case 48:console.error("Error",Ln.t1);case 49:kn=!1;case 50:Zn&&Zn.getTracks().forEach(function(us){us.stop()}),En.set(Dr.AUDIO,kn);case 52:return Ln.abrupt("return",En);case 53:case"end":return Ln.stop()}},Lr,null,[[5,11],[30,36]])})),function(Lr){return Nr.apply(this,arguments)})},{key:"isInt",value:function(Lr){return typeof Lr=="number"&&Lr%1==0}},{key:"getNetworkStats",value:(Er=(0,ft.Z)(vt().mark(function Lr(){var on,En,Kn,zn=arguments;return vt().wrap(function(Xn){for(;;)switch(Xn.prev=Xn.next){case 0:return(on=(zn.length>0&&zn[0]!==void 0?zn[0]:{}).timeoutDuration)&&this.isInt(on)||(on=6e4),En=new Promise(function(Zn,In){setTimeout(function(){In("Not able to get NetworkStats due to timeout")},on)}),Kn=new Promise(function(Zn,In){if(navigator.onLine){var kn=new Vm({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}]});kn.isRunning?(kn.onFinish=function(Ln){Zn({downloadSpeed:parseFloat(Number(Ln.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Ln.getUploadBandwidth()/1048576).toFixed(2))})},kn.onError=function(Ln){In("Not able to get NetworkStats")}):In("Not able to get NetworkStats")}else In("Not able to get NetworkStats due to no Network")}),Xn.abrupt("return",Promise.race([Kn,En]));case 5:case"end":return Xn.stop()}},Lr,this)})),function(){return Er.apply(this,arguments)})},{key:"analytics",value:function(Lr){var on,En,Kn;!Lr&&navigator&&navigator.userAgent&&(En=navigator.userAgent,delete(Kn=Et().parse(En)).engine);try{var zn;(zn=Lr)!==null&&zn!==void 0&&zn.browserUserAgent||(En=navigator.userAgent,delete(Kn=Et().parse(En)).engine)}catch{}Lr&&Lr.rawUserAgent&&(En=Lr.rawUserAgent,delete(Kn=Et().parse(En)).engine),Lr||(Lr={});var Xn={};Xn.sdkType=Lr.sdkType||"javascript",Xn.sdkVersion=Lr.sdkVersion||"0.0.80",Xn.platform=Lr.platform||((on=Kn)===null||on===void 0||(on=on.platform)===null||on===void 0?void 0:on.type)||"",Lr.browserUserAgent=="null"?Xn.browserUserAgent=void 0:Xn.browserUserAgent=Kn,Lr.deviceUserAgent&&(Xn.deviceUserAgent=Lr.deviceUserAgent),this._deviceInfo=Xn}},{key:"initMeeting",value:function(Lr){var on,En=Lr.meetingId,Kn=Lr.customCameraVideoTrack,zn=Kn===void 0?void 0:Kn,Xn=Lr.customMicrophoneAudioTrack,Zn=Xn===void 0?void 0:Xn,In=Lr.autoConsume,kn=In===void 0||In,Ln=Lr.preferredProtocol,us=Lr.mode,ys=Lr.multiStream,Ys=ys===void 0||ys,Vs=Lr.participantId,Bo=Lr.name,Go=Lr.micEnabled,_o=Lr.webcamEnabled,El=Lr.maxResolution,ho=Lr.metaData,xa=Lr.chatEnabled,Xl=Lr.useSpartialLayerAnalytics,ru=Lr.signalingBaseUrl,Au=Lr.defaultCamera;if(!En)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Qo=Vs?Vs.toString():Ut()({length:8}).toLowerCase(),Op=Bo||Ut()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof Ln!="string"&&(Ln="UDP_ONLY"),(on=Ln)===null||on===void 0?void 0:on.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":Ln=Ln.toUpperCase();break;default:Ln="UDP_ONLY"}if(us||(us=Dl.S.CONFERENCE),us!==Dl.S.CONFERENCE&&us!==Dl.S.VIEWER)throw new Error('"mode" can only be either '.concat(Dl.S.CONFERENCE," or ").concat(Dl.S.VIEWER));if(ho!=null&&(0,pt.Z)(ho)!="object")throw new Error('"metaData" can only be object.');var Gp=this._deviceInfo.sdkType==="react-native",mm=Gp?Au?Au==="front"?1:0:zn?zn.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Gp?1:0:0,$m=new ln.default({roomId:En,peerId:Qo,secret:this.apiKey,device:"unknown",displayName:Op,mode:us,useSimulcast:Ys,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:xa!==!1,micEnabled:Go!==!1,webcamEnabled:_o!==!1,maxResolution:El||"hd",useSpartialLayerAnalytics:Xl,_deviceInfo:this._deviceInfo,customCameraVideoTrack:zn,customMicrophoneAudioTrack:Zn,autoConsume:kn,preferredProtocol:Ln,signalingBaseUrl:ru,metaData:ho,defaultCameraIndex:mm});qr.roomClient=$m;var jm=new Rr({id:Qo,displayName:Op,local:!0,mode:us,metaData:ho});return new yo(En,jm,$m)}},{key:"createCameraVideoTrack",value:(_r=(0,ft.Z)(vt().mark(function Lr(on){var En,Kn,zn,Xn,Zn,In,kn,Ln,us,ys,Ys,Vs,Bo;return vt().wrap(function(Go){for(;;)switch(Go.prev=Go.next){case 0:return En=on.cameraId,Kn=En===void 0?void 0:En,zn=on.encoderConfig,Xn=zn===void 0?void 0:zn,Zn=on.facingMode,In=Zn===void 0?void 0:Zn,kn=on.optimizationMode,Ln=kn===void 0?void 0:kn,us=on.multiStream,ys=us===void 0||us,Ys=Xn?Cl.v.videoProfiles[Xn]:Cl.v.videoProfiles.h360p_w640p,Vs={video:{deviceId:Kn||void 0,facingMode:In||void 0,width:Ys.width,height:Ys.height,frameRate:Ys.frameRate}},Go.next=5,Ol(Vs);case 5:return Bo=Go.sent,Ln&&(Bo.contentHint=Ln),Bo.encoderConfig=Xn||"h360p_w640p",Bo.contentHint=Ln||"",Bo.multiStream=ys,Bo.cameraId=Kn,Go.abrupt("return",Bo);case 12:case"end":return Go.stop()}},Lr)})),function(Lr){return _r.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(rr=(0,ft.Z)(vt().mark(function Lr(on){var En,Kn,zn,Xn,Zn,In,kn,Ln,us;return vt().wrap(function(ys){for(;;)switch(ys.prev=ys.next){case 0:return En=on.encoderConfig,Kn=En===void 0?void 0:En,zn=on.optimizationMode,Xn=zn===void 0?void 0:zn,Zn=on.withAudio,In=Zn===void 0?"enable":Zn,kn=Kn?Cl.v.screenShareProfiles[Kn]:Cl.v.screenShareProfiles.h720p_15fps,Ln={audio:In==="enable",video:{width:kn.width,height:kn.height,frameRate:kn.frameRate}},ys.next=5,Ul(Ln);case 5:return us=ys.sent,Xn&&(us.contentHint=Xn),ys.abrupt("return",us);case 8:case"end":return ys.stop()}},Lr)})),function(Lr){return rr.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(er=(0,ft.Z)(vt().mark(function Lr(on){var En,Kn,zn,Xn,Zn,In,kn,Ln,us;return vt().wrap(function(ys){for(;;)switch(ys.prev=ys.next){case 0:return En=on.noiseConfig,Kn=En===void 0?void 0:En,zn=on.encoderConfig,Xn=zn===void 0?void 0:zn,Zn=on.microphoneId,In=Zn===void 0?void 0:Zn,kn=Xn?Cl.v.audioProfiles[Xn]:Cl.v.audioProfiles.speech_standard,Ln={audio:{deviceId:In,sampleRate:kn.sampleRate,echoCancellation:Kn?Kn&&Kn.acousticEchoCancellation:kn.echoCancellation,autoGainControl:Kn?Kn&&Kn.autoGainControl:kn.autoGainControl,noiseSuppression:Kn?Kn&&Kn.noiseSuppression:kn.noiseSuppression,channelCount:kn.channelCount}},ys.next=5,Ol(Ln);case 5:return(us=ys.sent).encoderConfig=Xn||"speech_standard",us.microphoneId=In,ys.abrupt("return",us);case 9:case"end":return ys.stop()}},Lr)})),function(Lr){return er.apply(this,arguments)})}]),Yt}();(0,xt.Z)(Pu,"devices",[]),(0,xt.Z)(Pu,"eventEmitter",new Mn),(0,xt.Z)(Pu,"Constants",{errors:Tl.R,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},hlsEvents:Bl.o,modes:Dl.S,permission:Dr});var ev=Pu},3003:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{default:()=>Ao});var pt=ht(1002),ft=ht(5861),mt=ht(5671),gt=ht(3144),xt=ht(4942),yt=ht(4687),vt=ht.n(yt),St=ht(9293),Et=ht(960),wt=ht(1227),Rt=ht.n(wt),Tt="mediasoup-demo",It=function(){function mn(Rn){(0,mt.Z)(this,mn),Rn?(this._debug=Rt()("".concat(Tt,":").concat(Rn)),this._warn=Rt()("".concat(Tt,":WARN:").concat(Rn)),this._error=Rt()("".concat(Tt,":ERROR:").concat(Rn))):(this._debug=Rt()(Tt),this._warn=Rt()("".concat(Tt,":WARN")),this._error=Rt()("".concat(Tt,":ERROR"))),Rt().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,gt.Z)(mn,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),mn}(),At=ht(1354),Dt=At.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),jt=At.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function Ft(mn){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,ft.Z)(vt().mark(function mn(Rn){var Un,Dn,$n,Os,cs,ks,Ps,oo,As,Ns,Uo,Vo,yo;return vt().wrap(function(Ko){for(;;)switch(Ko.prev=Ko.next){case 0:return Un=Rn.roomId,Dn=Rn.secret,$n=Rn.signalingBaseUrl,Os="call-api.videosdk.live",cs=[],ks=null,Ps={},oo={},As={},Ns=null,Ko.next=10,fetch("https://".concat($n,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:Dn,"Content-Type":"application/json"},body:JSON.stringify({roomId:Un})}).then(function(ko){return ko.json()}).catch(function(ko){return{}});case 10:return Uo=Ko.sent,(Vo=Uo.data)&&(Os=Vo.baseUrl,yo=Vo.observability,cs=Pt(Vo.iceServers),ks=yo.jwt,Ps=yo.traces,oo=yo.logs,As=yo.metaData,Ns=Vo.signalingUrl),Ko.abrupt("return",{baseUrl:Os,iceServers:cs,observabilityJwt:ks,traces:Ps,logs:oo,metaData:As,signalingUrl:Ns});case 14:case"end":return Ko.stop()}},mn)}))).apply(this,arguments)}function Pt(mn){try{var Rn=At.AES.decrypt(mn,Dt,{iv:jt,mode:At.mode.CBC,padding:At.pad.ZeroPadding}).toString(At.enc.Utf8);return JSON.parse(Rn)}catch{return[]}}var Ot=ht(6808),Nt=ht.n(Ot),$t="mediasoup-demo.user",Vt="mediasoup-demo.devices";function Ut(mn){var Rn=mn.displayName;Nt().set($t,{displayName:Rn})}function zt(){return Nt().getJSON(Vt)}var Bt=ht(3196),Ht=ht.n(Bt),Gt=function(mn){return{type:"SET_ROOM_STATE",payload:{state:mn}}},Kt=function(mn){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:mn}}},Xt=function(mn){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:mn}}},or=function(mn){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:mn.canSendMic,canSendWebcam:mn.canSendWebcam}}},tr=function(mn){return{type:"SET_DISPLAY_NAME",payload:{displayName:mn}}},dr=function(mn){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:mn}}},fr=function(mn){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:mn}}},Sr=function(mn){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:mn}}},vr=function(mn){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:mn}}},mr=function(mn){return{type:"ADD_PRODUCER",payload:{producer:mn}}},hr=function(mn){return{type:"REMOVE_PRODUCER",payload:{producerId:mn}}},gr=function(mn,Rn){return{type:"SET_PRODUCER_TRACK",payload:{producerId:mn,track:Rn}}},lr=function(mn,Rn){return{type:"SET_PRODUCER_SCORE",payload:{producerId:mn,score:Rn}}},Ir=function(mn){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:mn}}},wr=function(mn){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:mn}}},Fr=function(mn){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:mn}}},$r=function(mn){return{type:"ADD_PEER",payload:{peer:mn}}},hn=function(mn){return{type:"REMOVE_PEER",payload:{peerId:mn}}},Zr=function(mn,Rn){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:mn,peerId:Rn}}},Qt=function(mn,Rn){return{type:"ADD_CONSUMER",payload:{consumer:mn,peerId:Rn}}},Jt=function(mn,Rn){return{type:"REMOVE_CONSUMER",payload:{consumerId:mn,peerId:Rn}}},pr=function(mn,Rn){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:mn,originator:Rn}}},Vr=function(mn,Rn){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:mn,originator:Rn}}},Wr=function(mn,Rn,Un){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:mn,spatialLayer:Rn,temporalLayer:Un}}},zr=function(mn,Rn,Un){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:mn,spatialLayer:Rn,temporalLayer:Un}}},ln=function(mn,Rn){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:mn,priority:Rn}}},xn=function(mn,Rn){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:mn,score:Rn}}},yn=function(mn,Rn){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:mn,peerId:Rn}}},Wn=function(mn,Rn){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:mn,peerId:Rn}}},Mn=function(mn){var Rn=mn.type,Un=Rn===void 0?"info":Rn,Dn=mn.text,$n=mn.title,Os=mn.timeout;if(!Os)switch(Un){case"info":Os=3e3;break;case"error":Os=5e3}var cs={id:Ht()({length:6}).toLowerCase(),type:Un,title:$n,text:Dn,timeout:Os};return function(ks){ks(function(Ps){return{type:"ADD_NOTIFICATION",payload:{notification:Ps}}}(cs)),setTimeout(function(){ks({type:"REMOVE_NOTIFICATION",payload:{notificationId:cs.id}})},Os)}},sn=ht(7187),qn=ht(885),Gr=ht(8962),qr={},wn={},Cr={};for(var nr in Gr.v.videoProfiles)Gr.v.videoProfiles[nr].aspectRatio=="oneSixNine"&&(qr[nr]=Gr.v.videoProfiles[nr],qr[nr].encoding={maxBitrate:qr[nr].bitRate,maxFramerate:qr[nr].frameRate}),Gr.v.videoProfiles[nr].aspectRatio=="fourThree"&&(wn[nr]=Gr.v.videoProfiles[nr],wn[nr].encoding={maxBitrate:wn[nr].bitRate,maxFramerate:wn[nr].frameRate});for(var nr in Gr.v.screenShareProfiles)Cr[nr]=Gr.v.screenShareProfiles[nr],Cr[nr].encoding={maxBitrate:Cr[nr].bitRate,maxFramerate:Cr[nr].frameRate};var Ur=Object.values(qr),Mr=Object.values(wn),rn=Object.values(Cr),Cn=[qr.h180p_w320p,qr.h360p_w640p],Rr=[wn.h180p_w240p,wn.h360p_w480p],pn=function(mn){return[{scaleResolutionDownBy:2,fps:3}].map(function(Rn){var Un;return{width:Math.floor(mn.width/Rn.scaleResolutionDownBy),height:Math.floor(mn.height/Rn.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(mn.encoding.maxBitrate/(Math.pow(Rn.scaleResolutionDownBy,2)*(((Un=mn.encoding.maxFramerate)!==null&&Un!==void 0?Un:30)/Rn.fps)))),maxFramerate:Rn.fps}}})},Tr=["q","h","f"];function xr(mn,Rn,Un,Dn){var $n=Dn&&Dn.videoEncoding;mn&&($n=Dn&&Dn.screenShareEncoding);var Os=Dn==null?void 0:Dn.simulcast;if($n||($n=function(Uo,Vo,yo){for(var Ko=function(Cl,Ol,Ul){if(Cl)return rn;var Iu=Ol>Ul?Ol/Ul:Ul/Ol;return Math.abs(Iu-1.7777777777777777)<Math.abs(Iu-1.3333333333333333)?Ur:Mr}(Uo,Vo,yo),ko=Ko[0].encoding,Tl=Math.max(Vo,yo),Bl=0;Bl<Ko.length;Bl+=1){var Dl=Ko[Bl];if(ko=Dl.encoding,Dl.width>=Tl)break}return ko}(mn,Rn,Un)),!Os)return[$n];var cs,ks={width:Rn,height:Un,encoding:{maxBitrate:$n.maxBitrate,maxFramerate:$n.maxFramerate}},Ps=[],oo=(Ps=jr(mn,ks))[0];if(Ps.length>1){var As=Ps;cs=(0,qn.Z)(As,2)[1]}var Ns=Math.max(Rn,Un);return en(Rn,Un,Ns>=960&&cs?[oo,cs,ks]:Ns>=480?[oo,ks]:[ks])}function jr(mn,Rn){mn&&pn(Rn);var Un=Rn.width,Dn=Rn.height,$n=Un>Dn?Un/Dn:Dn/Un;return Math.abs($n-1.7777777777777777)<Math.abs($n-1.3333333333333333)?Cn:Rr}function en(mn,Rn,Un){var Dn=[];return Un.forEach(function($n,Os){if(!(Os>=Tr.length)){var cs=Math.min(mn,Rn),ks={rid:Tr[Os],scaleResolutionDownBy:cs/Math.min($n.width,$n.height),maxBitrate:$n.encoding.maxBitrate,maxFramerate:$n.encoding.maxFramerate};Dn.push(ks)}}),Dn}function fn(mn,Rn,Un){if(!mn)return{};var Dn=mn.id,$n=(mn.preferredSpatialLayer,mn.preferredTemporalLayer,mn.appData),Os=$n.width,cs=$n.height,ks=$n.encodings;try{var Ps=function(Tl){var Bl=[];if(Tl&&Tl.length!=0){if(Tl.length===1){for(var Dl=0;Dl<3;Dl++)Bl.push(Math.pow(2,3-Dl-1));return Bl}var Cl=!1;return Tl.forEach(function(Ol){Ol.scaleResolutionDownBy!==void 0?(Cl=!0,Bl.push(Math.max(1,Ol.scaleResolutionDownBy))):Bl.push(1)}),Cl||Tl.forEach(function(Ol,Ul){Bl[Ul]=Math.pow(2,Tl.length-Ul-1)}),Bl}}(ks);if(!Ps)return{};for(var oo=Math.min(Math.max(Gr.v.adaptiveScalingFactor||.75,.5),1),As=0,Ns=0;Ns<Ps.length;Ns++){var Uo=oo*Os/Ps[Ns],Vo=oo*cs/Ps[Ns];if(!(Rn>=Uo&&Un>=Vo))break;As=Ns}var yo=(mn.temporalLayers?mn.temporalLayers:3)-1;if(As===0&&yo>0){var Ko=Os/Ps[0],ko=cs/Ps[0];Rn<.5*Ko&&Un<.5*ko&&(yo-=1),yo>0&&Rn<.25*Ko&&Un<.25*ko&&(yo-=1)}return{consumerId:Dn,newPreferredSpatialLayer:As,newPreferredTemporalLayer:yo}}catch{return{}}}var Vn=ht(6900),Yn=ht(8225),Hn=ht(4180),Bn=ht(3430),es=ht(6380),$s=ht(2982),Ss=Array(32);function zs(){for(var mn=0;mn<16;mn++)Ss[mn]=Math.floor(16*Math.random())+48,Ss[mn]>=58&&(Ss[mn]+=39);return String.fromCharCode.apply(null,Ss.slice(0,16))}function ro(){var mn=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(mn)}function Po(mn,Rn){var Un=Object.keys(mn);if(Object.getOwnPropertySymbols){var Dn=Object.getOwnPropertySymbols(mn);Rn&&(Dn=Dn.filter(function($n){return Object.getOwnPropertyDescriptor(mn,$n).enumerable})),Un.push.apply(Un,Dn)}return Un}function To(mn){for(var Rn=1;Rn<arguments.length;Rn++){var Un=arguments[Rn]!=null?arguments[Rn]:{};Rn%2?Po(Object(Un),!0).forEach(function(Dn){(0,xt.Z)(mn,Dn,Un[Dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mn,Object.getOwnPropertyDescriptors(Un)):Po(Object(Un)).forEach(function(Dn){Object.defineProperty(mn,Dn,Object.getOwnPropertyDescriptor(Un,Dn))})}return mn}var qo=function(){function mn(Rn){var Un=this,Dn=Rn.roomId,$n=Rn.peerId,Os=Rn.sdkName,cs=Rn.observabilityJwt,ks=Rn.metaData,Ps=Rn.traces;(0,mt.Z)(this,mn),this._traceId=function(){for(var As=0;As<32;As++)Ss[As]=Math.floor(16*Math.random())+48,Ss[As]>=58&&(Ss[As]+=39);return String.fromCharCode.apply(null,Ss.slice(0,32))}(),this._rootSpanId=zs(),this._observabilityJwt=cs,this._tracesEnabled=Ps.enabled;var oo=function(As){for(var Ns="0123456789abcdefghijklmnopqrstuvwxyz",Uo="",Vo=As;Vo>0;Vo--)Uo+=Ns[Math.floor(36*Math.random())];return Uo}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.0.1"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:oo},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(Dn,$n,Os,ks),setInterval(function(){Un.processQueue()},4e3))}return(0,gt.Z)(mn,[{key:"addRootSpan",value:function(Rn,Un,Dn,$n){if(this._tracesEnabled){var Os={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(Rn,"_peer_").concat(Un,"_sdk_").concat(Dn),kind:1,startTimeUnixNano:ro(),endTimeUnixNano:ro(),attributes:[{key:"roomId",value:{stringValue:Rn}},{key:"peerId",value:{stringValue:Un}},{key:"sdkName",value:{stringValue:Dn}},{key:"userId",value:{stringValue:$n.userId}},{key:"email",value:{stringValue:$n.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(Os)}}},{key:"addSpanToTrace",value:function(Rn){this._spans.push(Rn)}},{key:"trace",value:function(Rn){var Un=Rn.spanName,Dn=Rn.attributes,$n=Dn===void 0?{}:Dn,Os=Rn.span,cs=Os===void 0?void 0:Os;if(this._tracesEnabled){var ks=zs(),Ps=ro(),oo={traceId:this._traceId,spanId:ks,parentSpanId:cs||this._rootSpanId,name:Un,kind:1,startTimeUnixNano:Ps,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys($n).length>0&&(oo.attributes=Object.entries($n).map(function(As){var Ns=(0,qn.Z)(As,2);return{key:Ns[0],value:{stringValue:Ns[1]}}})),this.addSpanToTrace(oo),ks}}},{key:"traceAutoComplete",value:function(Rn){var Un=Rn.spanName,Dn=Rn.attributes,$n=Dn===void 0?{}:Dn,Os=Rn.status,cs=Os===void 0?1:Os,ks=Rn.span,Ps=ks===void 0?void 0:ks,oo=Rn.message,As=oo===void 0?"SUCCESS":oo;if(this._tracesEnabled){var Ns=zs(),Uo=ro(),Vo=ro(),yo={traceId:this._traceId,spanId:Ns,parentSpanId:Ps||this._rootSpanId,name:Un,kind:1,startTimeUnixNano:Uo,endTimeUnixNano:Vo,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:cs,message:As}};Object.keys($n).length>0&&(yo.attributes=Object.entries($n).map(function(Ko){var ko=(0,qn.Z)(Ko,2);return{key:ko[0],value:{stringValue:ko[1]}}})),this.addSpanToTrace(yo)}}},{key:"completeSpan",value:function(Rn){var Un=Rn.span,Dn=Rn.status,$n=Rn.message,Os=Rn.attributes,cs=Os===void 0?{}:Os;if(this._tracesEnabled){var ks=ro();this._spans=this._spans.map(function(Ps){if(Ps.spanId!==Un)return Ps;var oo=Object.entries(cs).map(function(As){var Ns=(0,qn.Z)(As,2);return{key:Ns[0],value:{stringValue:Ns[1]}}});return Ps.attributes=Ps.attributes?[].concat((0,$s.Z)(Ps.attributes),(0,$s.Z)(oo)):oo,To(To({},Ps),{},{status:{code:Dn,message:$n},endTimeUnixNano:ks})})}}},{key:"processQueue",value:function(){var Rn=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Un={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch("https://api.videosdk.live/otel/v1/traces",Un).then(function(){var Dn=(0,ft.Z)(vt().mark(function $n(Os){return vt().wrap(function(cs){for(;;)switch(cs.prev=cs.next){case 0:return Rn._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],cs.next=3,Os.text();case 3:return cs.abrupt("return",cs.sent);case 4:case"end":return cs.stop()}},$n)}));return function($n){return Dn.apply(this,arguments)}}()).then(function(Dn){}).catch(function(Dn){Rn._spans=Rn._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",Dn)})}}}]),mn}();function $a(mn,Rn){var Un=Object.keys(mn);if(Object.getOwnPropertySymbols){var Dn=Object.getOwnPropertySymbols(mn);Rn&&(Dn=Dn.filter(function($n){return Object.getOwnPropertyDescriptor(mn,$n).enumerable})),Un.push.apply(Un,Dn)}return Un}function Ll(mn){for(var Rn=1;Rn<arguments.length;Rn++){var Un=arguments[Rn]!=null?arguments[Rn]:{};Rn%2?$a(Object(Un),!0).forEach(function(Dn){(0,xt.Z)(mn,Dn,Un[Dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mn,Object.getOwnPropertyDescriptors(Un)):$a(Object(Un)).forEach(function(Dn){Object.defineProperty(mn,Dn,Object.getOwnPropertyDescriptor(Un,Dn))})}return mn}var Rl=function(){function mn(Un){var Dn=Un.roomId,$n=Un.peerId,Os=Un.sdkName,cs=Un.logs,ks=Un.observabilityJwt;(0,mt.Z)(this,mn),this._peerId=$n,this._roomId=Dn,this._logs=cs,this._observabilityJwt=ks,this._sdkName=Os}var Rn;return(0,gt.Z)(mn,[{key:"pushLogs",value:(Rn=(0,ft.Z)(vt().mark(function Un(Dn){var $n,Os,cs,ks,Ps,oo;return vt().wrap(function(As){for(;;)switch(As.prev=As.next){case 0:if($n=Dn.logType,Os=Dn.logText,cs=Dn.attributes,ks=this._logs,Ps=ks.enabled,oo=ks.endPoint,!Ps){As.next=8;break}return As.next=5,fetch(oo,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:$n,logText:Os,attributes:Ll(Ll({},cs),{},{roomId:this._roomId,peerId:this._peerId,SDK:this._sdkName})})}).then(function(Ns){return Ns.json()}).catch(function(Ns){return console.log("error",Ns),{}});case 5:return As.abrupt("return",As.sent);case 8:return As.abrupt("return",null);case 9:case"end":return As.stop()}},Un,this)})),function(Un){return Rn.apply(this,arguments)})}]),mn}();function Ar(mn,Rn){var Un=typeof Symbol<"u"&&mn[Symbol.iterator]||mn["@@iterator"];if(!Un){if(Array.isArray(mn)||(Un=function(Ps,oo){if(Ps){if(typeof Ps=="string")return _n(Ps,oo);var As=Object.prototype.toString.call(Ps).slice(8,-1);if(As==="Object"&&Ps.constructor&&(As=Ps.constructor.name),As==="Map"||As==="Set")return Array.from(Ps);if(As==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(As))return _n(Ps,oo)}}(mn))||Rn&&mn&&typeof mn.length=="number"){Un&&(mn=Un);var Dn=0,$n=function(){};return{s:$n,n:function(){return Dn>=mn.length?{done:!0}:{done:!1,value:mn[Dn++]}},e:function(Ps){throw Ps},f:$n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Os,cs=!0,ks=!1;return{s:function(){Un=Un.call(mn)},n:function(){var Ps=Un.next();return cs=Ps.done,Ps},e:function(Ps){ks=!0,Os=Ps},f:function(){try{cs||Un.return==null||Un.return()}finally{if(ks)throw Os}}}}function _n(mn,Rn){(Rn==null||Rn>mn.length)&&(Rn=mn.length);for(var Un=0,Dn=new Array(Rn);Un<Rn;Un++)Dn[Un]=mn[Un];return Dn}function Pn(mn,Rn){var Un=Object.keys(mn);if(Object.getOwnPropertySymbols){var Dn=Object.getOwnPropertySymbols(mn);Rn&&(Dn=Dn.filter(function($n){return Object.getOwnPropertyDescriptor(mn,$n).enumerable})),Un.push.apply(Un,Dn)}return Un}function Tn(mn){for(var Rn=1;Rn<arguments.length;Rn++){var Un=arguments[Rn]!=null?arguments[Rn]:{};Rn%2?Pn(Object(Un),!0).forEach(function(Dn){(0,xt.Z)(mn,Dn,Un[Dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mn,Object.getOwnPropertyDescriptors(Un)):Pn(Object(Un)).forEach(function(Dn){Object.defineProperty(mn,Dn,Object.getOwnPropertyDescriptor(Un,Dn))})}return mn}var Or,ds={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},_i={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},hs={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Ms=[{scalabilityMode:"S3T3_KEY"}],Us=[{dtx:!0,maxFramerate:10}],Hs=[{scalabilityMode:"S3T3",dtx:!0}],tn=new It("RoomClient"),Ao=function(){function mn(Pr){var cr,sr,ur=Pr.roomId,yr=Pr.peerId,Jr=Pr.secret,nn=Pr.displayName,Nn=Pr.device,jn=Pr.handlerName,ts=Pr.useSimulcast,ns=Pr.useSharingSimulcast,ss=Pr.forceTcp,Kr=Pr.mode,dn=Pr.forceH264,gs=Pr.forceVP9,Ts=Pr.svc,Sn=Pr.datachannel,fs=Pr.externalVideo,rs=Pr.micEnabled,js=Pr.webcamEnabled,Gs=Pr.maxResolution,xs=Pr.useSpartialLayerAnalytics,vs=Pr._deviceInfo,Fs=Pr.customCameraVideoTrack,Zs=Pr.customMicrophoneAudioTrack,no=Pr.autoConsume,ms=Pr.preferredProtocol,Ds=Pr.signalingBaseUrl,$o=Pr.metaData,jo=Pr.defaultCameraIndex;(0,mt.Z)(this,mn),(0,xt.Z)(this,"delay",function(Xs){return new Promise(function(So){return setTimeout(So,Xs)})}),tn.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',ur,yr,nn,Nn.flag),this.useSpartialLayerAnalytics=xs||!1,this._deviceInfo=vs,this._eventEmitter=new sn.EventEmitter,this._closed=!1,this._displayName=nn,this._device=Nn,this._forceTcp=ss,this._preferredProtocol=ms,Kr==Bn.S.CONFERENCE?(cr=!0,sr=!0):(cr=!1,sr=!1),this._mode=Kr,this._produce=cr,this._consume=sr,this._useDataChannel=Sn,this._forceH264=!!dn,this._forceVP9=!!gs,this._micEnabled=!!rs,this._webcamEnabled=!!js,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,fs&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=fs,this._externalVideo.play().catch(function(Xs){return tn.warn("externalVideo.play() failed:%o",Xs)})),this._handlerName=jn,this._useSimulcast=ts,this._useSharingSimulcast=ns,this._protooUrl="",this._secret=Jr,this._peerId=yr,this._roomId=ur,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Gs||"hd"},this._pinnedParticipants=new Map,Ts&&(Ms[0].scalabilityMode="".concat(Ts,"_KEY"),Hs[0].scalabilityMode=Ts),this.customCameraVideoTrack=Fs,this.customMicrophoneAudioTrack=Zs,this._autoConsume=no,this._iceServers=[],this._metrics=new Hn.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._collectStats=vs.sdkType!="react-native",this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Ds||"api.videosdk.live",this._metaData=$o,this._defaultCameraIndex=jo}var Rn,Un,Dn,$n,Os,cs,ks,Ps,oo,As,Ns,Uo,Vo,yo,Ko,ko,Tl,Bl,Dl,Cl,Ol,Ul,Iu,hp,wp,qu,Ku,Xu,pp,Rp,xo,ws,Dr,Jn,Qs,Ml,Mo,Lu,xm,qp,Sm,Np,xl,sm,iu,Yo,xu,Sl,Ks,Tp,zo,Yl,Zu,lo,$p,Ql,fp,mp,Xo,Pl,Su,Kp,Cp,jp,Qr,ps,su,Ls,Fp,Rs,Ho,ou,Mp,Xp,Bp,om,lm,Zp,Up,um,dm,hm,gp,Du,Ou,vp,yp,Vl,Nl,Nu,zl,lu,$u,_p,_h,ep,na,yl;return(0,gt.Z)(mn,[{key:"on",value:function(Pr,cr){this._eventEmitter.on(Pr,cr)}},{key:"close",value:function(Pr){var cr,sr,ur,yr,Jr,nn=Pr.sendLeft,Nn=nn===void 0||nn;if(Nn&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),tn.debug("close()");var jn=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:jn,status:1,message:"Closed Trasnport"}),Or.dispatch(Gt("closed")),Nn&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),(ur=this._openTelemetry)===null||ur===void 0||ur.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Nn&&this._eventEmitter.emit("MEETING_LEFT"),(yr=this._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(yl=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr=this;return vt().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return dn.next=2,Ft({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:ur=dn.sent,yr=ur.baseUrl,Jr=ur.iceServers,nn=ur.logs,Nn=ur.observabilityJwt,jn=ur.traces,ts=ur.metaData,ns=ur.signalingUrl,this._baseUrl=yr,this._protooUrl="".concat(ns||"wss://".concat(this._baseUrl),"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=Jr,this._tracesEnabled=jn.enabled,this._openTelemetry=new qo((0,xt.Z)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:jn,logs:nn,observabilityJwt:Nn,metaData:ts},"traces",jn)),this._videosdkLogs=new Rl({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),logs:nn,observabilityJwt:Nn}),this._joinSpan=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:ns||"signalingUrl not specify"}}),ss=new St.qo(this._protooUrl),this._protoo=new St._z(ss),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),Or.dispatch(Gt("connecting")),(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._protoo.on("open",function(){var gs;Kr._isWebsocketAlive=!0,Kr._closed=!1,Kr.startPingPong(),Kr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),(gs=Kr._openTelemetry)===null||gs===void 0||gs.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:Kr._joinSpan,status:1}),Kr.requestEntry()}),this._protoo.on("failed",function(){var gs;Kr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),(gs=Kr._openTelemetry)===null||gs===void 0||gs.traceAutoComplete({spanName:"Meeting is in FAILED State",span:Kr._joinSpan,status:2}),Or.dispatch(Mn({type:"error",text:"WebSocket connection failed"}))}),this._protoo.on("disconnected",function(){var gs;Kr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),(gs=Kr._openTelemetry)===null||gs===void 0||gs.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",span:Kr._joinSpan,status:1}),Or.dispatch(Mn({type:"error",text:"WebSocket disconnected"})),Kr._sendTransport&&(Kr._sendTransport.close(),Kr._sendTransport=null),Kr._recvTransport&&(Kr._recvTransport.close(),Kr._recvTransport=null),Or.dispatch(Gt("closed"))}),this._protoo.on("close",function(){Kr._closed||Kr.close({sendLeft:!0})}),this._protoo.on("request",function(){var gs=(0,ft.Z)(vt().mark(function Ts(Sn,fs,rs){var js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo,Xs,So,Co,io,po,Js,ga,Qn,so,Io,fo,_a,Bs,wo,Es,mo,Wo,Jl,Yu,ju,Eu,tp,cu,xp,Zo,wu,uu,_l,du,Fu,Bu,hu,_c,pu,Uu,eu,fu,Lo,Ru,Sp,mu,rp,np,Do,Vu,gu,vu,Tu,zu,Qu,Ju;return vt().wrap(function(os){for(;;)switch(os.prev=os.next){case 0:tn.debug('proto "request" event [method:%s, data:%o]',Sn.method,Sn.data),os.t0=Sn.method,os.next=os.t0==="close"?4:os.t0==="newConsumer"?7:os.t0==="newDataConsumer"?45:os.t0==="enableMic"?72:os.t0==="disableMic"?74:os.t0==="enableWebcam"?88:os.t0==="disableWebcam"?90:os.t0==="pinStateChanged"?104:os.t0==="switchRoom"?124:os.t0==="statsData"?127:130;break;case 4:return fs(),Kr.close({sendLeft:!0}),os.abrupt("break",130);case 7:if(xs=(js=Kr._openTelemetry)===null||js===void 0?void 0:js.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(Sn)}}),Kr._consume){os.next=12;break}return rs(403,"I do not want to consume"),(vs=Kr._openTelemetry)===null||vs===void 0||vs.completeSpan({span:xs,status:2,message:"I do not want to consume"}),os.abrupt("break",130);case 12:return Fs=Sn.data,Zs=Fs.peerId,no=Fs.producerId,ms=Fs.id,Ds=Fs.kind,$o=Fs.rtpParameters,jo=Fs.type,Xs=Fs.appData,So=Fs.producerPaused,Co=(Gs=Kr._openTelemetry)===null||Gs===void 0?void 0:Gs.trace({spanName:"Creating Consumer",span:xs}),os.prev=14,os.next=17,Kr._recvTransport.consume({id:ms,producerId:no,kind:Ds,rtpParameters:$o,appData:Tn(Tn({},Xs),{},{peerId:Zs})});case 17:Qn=os.sent,so=Et.parseScalabilityMode(Qn.rtpParameters.encodings[0].scalabilityMode),Io=so.spatialLayers,fo=so.temporalLayers,Qn.spatialLayers=Io,Qn.temporalLayers=fo,Qn.currentSpatialLayers=Io-1,Qn.currentTemporalLayers=fo-1,Kr._consumers.set(Qn.id,Qn),Qn.on("transportclose",function(){Kr._consumers.delete(Qn.id);var Fo=Jt(Qn.id,Zs);Or.dispatch(Fo),Kr._eventEmitter.emit(Fo.type,Fo.payload)}),(io=Kr._openTelemetry)===null||io===void 0||io.completeSpan({span:Co,status:1,message:"Consumer Created"}),Co=(po=Kr._openTelemetry)===null||po===void 0?void 0:po.trace({spanName:"Sending Stream Enabled Event",span:xs}),_a=Qt({id:Qn.id,type:jo,locallyPaused:!1,remotelyPaused:So,rtpParameters:Qn.rtpParameters,spatialLayers:Io,temporalLayers:fo,currentSpatialLayer:Io-1,currentTemporalLayer:fo-1,preferredSpatialLayer:Io-1,preferredTemporalLayer:fo-1,priority:1,codec:Qn.rtpParameters.codecs[0].mimeType.split("/")[1],track:Qn.track,appData:Xs,instance:Qn},Zs),Or.dispatch(_a),Kr._eventEmitter.emit(_a.type,_a.payload),fs(),Qn.kind==="video"&&Or.getState().me.audioOnly&&Kr._pauseConsumer(Qn),(Js=Kr._openTelemetry)===null||Js===void 0||Js.completeSpan({span:Co,status:1,message:"Event Send Successfully"}),(ga=Kr._openTelemetry)===null||ga===void 0||ga.completeSpan({span:xs,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Qn.id}}),Qn.kind=="video"&&Qn.appData.share&&((Bs=Kr._openTelemetry)===null||Bs===void 0||Bs.traceAutoComplete({spanName:"Presenter Changed",span:xs,attributes:{"peer.id":Zs}})),os.next=44;break;case 37:throw os.prev=37,os.t1=os.catch(14),(wo=Kr._openTelemetry)===null||wo===void 0||wo.completeSpan({span:Co,status:2,message:"Error creating a Consumer: ".concat(os.t1)}),(Es=Kr._openTelemetry)===null||Es===void 0||Es.completeSpan({span:xs,status:2,message:"Error creating a Consumer: ".concat(os.t1)}),Or.dispatch(Mn({type:"error",text:"Error creating a Consumer: ".concat(os.t1)})),(mo=Kr._videosdkLogs)===null||mo===void 0||mo.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:os.t1.message}}),os.t1;case 44:return os.abrupt("break",130);case 45:if(Kr._consume){os.next=48;break}return rs(403,"I do not want to data consume"),os.abrupt("break",130);case 48:if(Kr._useDataChannel){os.next=51;break}return rs(403,"I do not want DataChannels"),os.abrupt("break",130);case 51:return Wo=Sn.data,Jl=Wo.peerId,Yu=Wo.dataProducerId,ju=Wo.id,Eu=Wo.sctpStreamParameters,tp=Wo.label,cu=Wo.protocol,xp=Wo.appData,os.prev=52,os.next=55,Kr._recvTransport.consumeData({id:ju,dataProducerId:Yu,sctpStreamParameters:Eu,label:tp,protocol:cu,appData:Tn(Tn({},xp),{},{peerId:Jl})});case 55:Zo=os.sent,Kr._dataConsumers.set(Zo.id,Zo),Zo.on("transportclose",function(){Kr._dataConsumers.delete(Zo.id)}),Zo.on("open",function(){tn.debug('DataConsumer "open" event')}),Zo.on("close",function(){tn.warn('DataConsumer "close" event'),Kr._dataConsumers.delete(Zo.id),Or.dispatch(Mn({type:"error",text:"DataConsumer closed"}))}),Zo.on("error",function(Fo){tn.error('DataConsumer "error" event:%o',Fo),Or.dispatch(Mn({type:"error",text:"DataConsumer error: ".concat(Fo)}))}),Zo.on("message",function(Fo){if(tn.debug('DataConsumer "message" event [streamId:%d]',Zo.sctpStreamParameters.streamId),window.DC_MESSAGE=Fo,Fo instanceof ArrayBuffer){var Ep=new DataView(Fo).getUint32();return Ep==Math.pow(2,32)-1?(tn.warn("dataChannelTest finished!"),void(Kr._nextDataChannelTestNumber=0)):(Ep>Kr._nextDataChannelTestNumber&&tn.warn("dataChannelTest: %s packets missing",Ep-Kr._nextDataChannelTestNumber),void(Kr._nextDataChannelTestNumber=Ep+1))}if(typeof Fo=="string")switch(Zo.label){case"chat":var Pp=Or.getState().peers,ip=Object.keys(Pp).map(function(sp){return Pp[sp]}).find(function(sp){return sp.dataConsumers.includes(Zo.id)});if(!ip){tn.warn('DataConsumer "message" from unknown peer');break}Or.dispatch(Mn({title:"".concat(ip.displayName," says:"),text:Fo,timeout:5e3})),Kr._eventEmitter.emit("CHAT_MESSAGE",{text:Fo,senderId:ip.id,timestamp:new Date().getTime()});break;case"bot":Or.dispatch(Mn({title:"Message from Bot:",text:Fo,timeout:5e3}))}else tn.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=Zo,Or.dispatch(yn({id:Zo.id,sctpStreamParameters:Zo.sctpStreamParameters,label:Zo.label,protocol:Zo.protocol},Jl)),fs(),os.next=71;break;case 67:os.prev=67,os.t2=os.catch(52),tn.error('"newDataConsumer" request failed:%o',os.t2),Or.dispatch(Mn({type:"error",text:"Error creating a DataConsumer: ".concat(os.t2)}));case 71:return os.abrupt("break",130);case 72:try{uu=Sn.data.peerId,(wu=Kr._openTelemetry)===null||wu===void 0||wu.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic for ".concat(uu),status:1}),Kr._eventEmitter.emit("MIC_REQUESTED",{peerId:uu}),fs()}catch(Fo){tn.error('"enableMic" request failed:%o',Fo),(_l=Kr._videosdkLogs)===null||_l===void 0||_l.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:Fo.message}}),Kr._emitError({code:3027,message:Fo.message})}return os.abrupt("break",130);case 74:return os.prev=74,du=(Fu=Kr._openTelemetry)===null||Fu===void 0?void 0:Fu.trace({spanName:"Protoo REQ: disableMic"}),os.next=78,Kr.disableMic(!1,du);case 78:(Bu=Kr._openTelemetry)===null||Bu===void 0||Bu.completeSpan({span:du,status:1,message:"Request Completed"}),fs(),os.next=87;break;case 82:os.prev=82,os.t3=os.catch(74),(hu=Kr._openTelemetry)===null||hu===void 0||hu.completeSpan({span:du,status:2,message:"disableMic request failed ".concat(os.t3)}),(_c=Kr._videosdkLogs)===null||_c===void 0||_c.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:os.t3.message}}),Kr._emitError({code:3028,message:os.t3.message});case 87:return os.abrupt("break",130);case 88:try{Uu=Sn.data.peerId,(pu=Kr._openTelemetry)===null||pu===void 0||pu.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam for ".concat(Uu),status:1}),Kr._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Uu}),fs()}catch(Fo){tn.error('"enableWebcam" request failed:%o',Fo),(eu=Kr._videosdkLogs)===null||eu===void 0||eu.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:Fo.message}}),Kr._emitError({code:3029,message:Fo.message})}return os.abrupt("break",130);case 90:return os.prev=90,fu=(Lo=Kr._openTelemetry)===null||Lo===void 0?void 0:Lo.trace({spanName:"Protoo REQ: disableWebcam"}),os.next=94,Kr.disableWebcam(fu);case 94:(Ru=Kr._openTelemetry)===null||Ru===void 0||Ru.completeSpan({span:fu,status:1,message:"Request Completed"}),fs(),os.next=103;break;case 98:os.prev=98,os.t4=os.catch(90),(Sp=Kr._openTelemetry)===null||Sp===void 0||Sp.completeSpan({span:fu,status:2,message:"disableWebcam request failed ".concat(os.t4)}),(mu=Kr._videosdkLogs)===null||mu===void 0||mu.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:os.t4.message}}),Kr._emitError({code:3030,message:os.t4.message});case 103:return os.abrupt("break",130);case 104:os.prev=104,Vu=Sn.data,gu=Vu.peerId,vu=Vu.state,Tu=Vu.pinnedBy,rp=(np=Kr._openTelemetry)===null||np===void 0?void 0:np.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:gu,state:vu,pinnedBy:Tu})}}),Kr._pinnedParticipants.has(gu)||Kr._pinnedParticipants.set(gu,{cam:!1,share:!1}),zu=Kr._pinnedParticipants.get(gu),vu.cam!=null&&(zu.cam=vu.cam),vu.share!=null&&(zu.share=vu.share),Kr._pinnedParticipants.set(gu,zu),Kr._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:gu,state:vu,pinnedBy:Tu}),zu.share==0&&zu.cam==0&&Kr._pinnedParticipants.delete(gu),(Do=Kr._openTelemetry)===null||Do===void 0||Do.completeSpan({span:rp,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(Kr._pinnedParticipants)}}),fs(),os.next=123;break;case 118:throw os.prev=118,os.t5=os.catch(104),(Qu=Kr._openTelemetry)===null||Qu===void 0||Qu.completeSpan({span:rp,status:2,message:"pinStateChanged request failed"}),(Ju=Kr._videosdkLogs)===null||Ju===void 0||Ju.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:os.t5.message}}),os.t5;case 123:return os.abrupt("break",130);case 124:return Kr._eventEmitter.emit("SWITCH_ROOM",Sn.data),fs(),os.abrupt("break",130);case 127:return fs({peerId:Kr._peerId,statsData:Kr._stats}),Kr._stats={},os.abrupt("break",130);case 130:case"end":return os.stop()}},Ts,null,[[14,37],[52,67],[74,82],[90,98],[104,118]])}));return function(Ts,Sn,fs){return gs.apply(this,arguments)}}()),this._protoo.on("notification",function(){var gs=(0,ft.Z)(vt().mark(function Ts(Sn){var fs,rs,js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo,Xs,So,Co,io,po,Js,ga,Qn,so,Io,fo,_a,Bs,wo,Es,mo,Wo,Jl,Yu,ju,Eu,tp,cu,xp,Zo,wu,uu,_l,du,Fu,Bu,hu,_c,pu,Uu,eu,fu,Lo,Ru,Sp,mu,rp,np,Do,Vu,gu,vu,Tu,zu,Qu,Ju,os,Fo,Ep,Pp,ip,sp,Ap,Vp,Kl,op;return vt().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:tn.debug('proto "notification" event [method:%s, data:%o]',Sn.method,Sn.data),Gn.t0=Sn.method,Gn.next=Gn.t0==="error"?4:Gn.t0==="participantMediaStateChanged"?9:Gn.t0==="producerScore"?10:Gn.t0==="entryRequested"?13:Gn.t0==="entryResponded"?17:Gn.t0==="newPeer"?22:Gn.t0==="peerClosed"?29:Gn.t0==="peerDisplayNameChanged"?35:Gn.t0==="downlinkBwe"?39:Gn.t0==="consumerClosed"?41:Gn.t0==="consumerPaused"?53:Gn.t0==="consumerResumed"?60:Gn.t0==="consumerLayersChanged"?67:Gn.t0==="consumerScore"?78:Gn.t0==="dataConsumerClosed"?81:Gn.t0==="activeSpeaker"?90:Gn.t0==="recordingStateChanged"?95:Gn.t0==="recordingStarted"?98:Gn.t0==="recordingStopped"?100:Gn.t0==="livestreamStateChanged"?102:Gn.t0==="livestreamStarted"?105:Gn.t0==="livestreamStopped"?107:Gn.t0==="hlsStateChanged"?109:Gn.t0==="hlsPlayableStateChanged"?112:Gn.t0==="hlsStarted"?114:Gn.t0==="hlsStopped"?117:Gn.t0==="whiteboardStarted"?119:Gn.t0==="whiteboardStopped"?122:Gn.t0==="videoStatusChanged"?124:Gn.t0==="videoSeeked"?126:Gn.t0==="connectionOpen"?129:Gn.t0==="connectionClose"?131:Gn.t0==="connectionChatMessage"?133:Gn.t0==="connectionParticipantJoined"?135:Gn.t0==="connectionParticipantLeft"?137:Gn.t0==="pubsubMessage"?139:Gn.t0==="peerModeChanged"?141:Gn.t0==="restartIce"?144:148;break;case 4:return js=Sn.data,Kr._eventEmitter.emit("ERROR",js),(fs=Kr._videosdkLogs)===null||fs===void 0||fs.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:js.message}}),(rs=Kr._openTelemetry)===null||rs===void 0||rs.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:js.message},status:2}),Gn.abrupt("break",149);case 9:try{Gs=Sn.data,xs=Gs.peerId,vs=Gs.kind,Fs=Gs.newState,Kr._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:xs,kind:vs,newState:Fs}),vs=="video"&&((Zs=Kr._openTelemetry)===null||Zs===void 0||Zs.traceAutoComplete({spanName:"".concat(xs," has ").concat(Fs?"enable":"disable"," ").concat(vs),status:1}))}catch(tu){tn.error('"newProducer" request failed:%o',tu),(no=Kr._videosdkLogs)===null||no===void 0||no.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:tu.message}})}case 10:return ms=Sn.data,Ds=ms.producerId,$o=ms.score,Or.dispatch(lr(Ds,$o)),Gn.abrupt("break",149);case 13:return Xs=Sn.data,So=Xs.id,Co=Xs.name,io=(jo=Kr._openTelemetry)===null||jo===void 0?void 0:jo.trace({spanName:"Protoo Noti: entryRequested",span:Kr._joinSpan,attributes:{data:JSON.stringify({id:So,name:Co})}}),So!==Kr._peerId?(Kr._eventEmitter.emit("ENTRY_REQUESTED",{id:So,name:Co}),(po=Kr._openTelemetry)===null||po===void 0||po.completeSpan({span:io,status:1,message:"EntryResponded Recieved"})):(Js=Kr._openTelemetry)===null||Js===void 0||Js.completeSpan({span:io,status:2,message:"Entry Request Failed"}),Gn.abrupt("break",149);case 17:return Qn=Sn.data,so=Qn.id,Io=Qn.decision,Qn.sessionId,Kr._eventEmitter.emit("ENTRY_RESPONDED",{id:so,decision:Io}),fo=(ga=Kr._openTelemetry)===null||ga===void 0?void 0:ga.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:so,decision:Io})},span:Kr._joinSpan}),so===Kr._peerId&&Io==="allowed"?(Kr.joinRoom(),(_a=Kr._openTelemetry)===null||_a===void 0||_a.completeSpan({span:fo,status:1,message:"EntryResponded Recieved"})):(Bs=Kr._openTelemetry)===null||Bs===void 0||Bs.completeSpan({span:Kr._joinSpan,status:2,message:"Join Request Denied"}),Gn.abrupt("break",149);case 22:wo=Sn.data,Es=$r(Tn(Tn({},wo),{},{consumers:[],dataConsumers:[]})),Or.dispatch(Es),Kr._eventEmitter.emit(Es.type,Es.payload),Or.dispatch(Mn({text:"".concat(wo.displayName," has joined the room")}));try{(mo=Kr._openTelemetry)===null||mo===void 0||mo.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(wo.displayName),attributes:{peerData:JSON.stringify(wo)}})}catch(tu){(Wo=Kr._videosdkLogs)===null||Wo===void 0||Wo.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:tu.message}}),console.error(tu)}return Gn.abrupt("break",149);case 29:return Yu=Sn.data.peerId,ju=hn(Yu),Or.dispatch(ju),Kr._eventEmitter.emit(ju.type,ju.payload),(Jl=Kr._openTelemetry)===null||Jl===void 0||Jl.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(Yu)}),Gn.abrupt("break",149);case 35:return Eu=Sn.data,tp=Eu.peerId,cu=Eu.displayName,xp=Eu.oldDisplayName,Or.dispatch(Zr(cu,tp)),Or.dispatch(Mn({text:"".concat(xp," is now ").concat(cu)})),Gn.abrupt("break",149);case 39:return tn.debug("'downlinkBwe' event:%o",Sn.data),Gn.abrupt("break",149);case 41:if(wu=Sn.data.consumerId,uu=Kr._consumers.get(wu)){Gn.next=45;break}return Gn.abrupt("break",149);case 45:return uu.close(),Kr._consumers.delete(wu),_l=uu.appData.peerId,du=Jt(wu,_l),Or.dispatch(du),Kr._eventEmitter.emit(du.type,du.payload),(Zo=Kr._openTelemetry)===null||Zo===void 0||Zo.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for id ".concat(wu),attributes:{consumerData:JSON.stringify(uu)}}),Gn.abrupt("break",149);case 53:if(Fu=Sn.data.consumerId,Bu=Kr._consumers.get(Fu)){Gn.next=57;break}return Gn.abrupt("break",149);case 57:return Bu.pause(),Or.dispatch(pr(Fu,"remote")),Gn.abrupt("break",149);case 60:if(hu=Sn.data.consumerId,_c=Kr._consumers.get(hu)){Gn.next=64;break}return Gn.abrupt("break",149);case 64:return _c.resume(),Or.dispatch(Vr(hu,"remote")),Gn.abrupt("break",149);case 67:if(pu=Sn.data,Uu=pu.consumerId,eu=pu.spatialLayer,fu=pu.temporalLayer,(Lo=Kr._consumers.get(Uu)).currentSpatialLayer=eu,Lo.currentTemporalLayer=fu,Lo){Gn.next=73;break}return Gn.abrupt("break",149);case 73:return Lo.appData.encodings.length>1?(Kr._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Lo.appData.peerId,prevQuality:Lo.spatialLayers-1-Lo.currentSpatialLayer==0?"HIGH":Lo.spatialLayers-1-Lo.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Lo.spatialLayers-1-eu==0?"HIGH":Lo.spatialLayers-1-eu==1?"MEDIUM":"LOW"}),(Ru=Kr._videosdkLogs)===null||Ru===void 0||Ru.pushLogs({logText:"Consumer Peer ".concat(Lo.appData.peerId," changed to ").concat(Lo.spatialLayers-1-eu==0?"HIGH":Lo.spatialLayers-1-eu==1?"MEDIUM":"LOW",", previous quality was ").concat(Lo.spatialLayers-1-Lo.currentSpatialLayer==0?"HIGH":Lo.spatialLayers-1-Lo.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:Uu}})):(Kr._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Lo.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),(Sp=Kr._videosdkLogs)===null||Sp===void 0||Sp.pushLogs({logText:"Consumer Peer ".concat(Lo.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:Uu}})),Lo.currentSpatialLayer=eu,Lo.currentTemporalLayer=fu,Or.dispatch(Wr(Uu,eu,fu)),Gn.abrupt("break",149);case 78:return mu=Sn.data,rp=mu.consumerId,np=mu.score,Or.dispatch(xn(rp,np)),Gn.abrupt("break",149);case 81:if(Do=Sn.data.dataConsumerId,Vu=Kr._dataConsumers.get(Do)){Gn.next=85;break}return Gn.abrupt("break",149);case 85:return Vu.close(),Kr._dataConsumers.delete(Do),gu=Vu.appData.peerId,Or.dispatch(Wn(Do,gu)),Gn.abrupt("break",149);case 90:return vu=Sn.data.peerId,Tu=Kt(vu),Or.dispatch(Tu),Kr._eventEmitter.emit(Tu.type,Tu.payload),Gn.abrupt("break",149);case 95:return Kr._eventEmitter.emit("RECORDING_STATE_CHANGED",Sn.data),(zu=Kr._openTelemetry)===null||zu===void 0||zu.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Gn.abrupt("break",149);case 98:return Kr._eventEmitter.emit("RECORDING_STARTED",{}),Gn.abrupt("break",149);case 100:return Kr._eventEmitter.emit("RECORDING_STOPPED",{}),Gn.abrupt("break",149);case 102:return Kr._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Sn.data),(Qu=Kr._openTelemetry)===null||Qu===void 0||Qu.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Gn.abrupt("break",149);case 105:return Kr._eventEmitter.emit("LIVESTREAM_STARTED",{}),Gn.abrupt("break",149);case 107:return Kr._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Gn.abrupt("break",149);case 109:return Kr._eventEmitter.emit("HLS_STATE_CHANGED",Sn.data),(Ju=Kr._openTelemetry)===null||Ju===void 0||Ju.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Gn.abrupt("break",149);case 112:return Sn.data.isPlayable&&(Kr._eventEmitter.emit("HLS_STATE_CHANGED",Tn(Tn({},Sn.data),{},{status:es.o.HLS_PLAYABLE})),(os=Kr._openTelemetry)===null||os===void 0||os.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),Gn.abrupt("break",149);case 114:return Fo=Sn.data.downstreamUrl,Kr._eventEmitter.emit("HLS_STARTED",Fo),Gn.abrupt("break",149);case 117:return Kr._eventEmitter.emit("HLS_STOPPED",{}),Gn.abrupt("break",149);case 119:return Ep=Sn.data.state,Kr._eventEmitter.emit("WHITEBOARD_STARTED",{state:Ep}),Gn.abrupt("break",149);case 122:return Kr._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Gn.abrupt("break",149);case 124:return Kr._eventEmitter.emit("VIDEO_STATE_CHANGED",Sn.data),Gn.abrupt("break",149);case 126:return Pp=Sn.data.currentTime,Kr._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Pp}),Gn.abrupt("break",149);case 129:return Kr._eventEmitter.emit("CONNECTION_OPEN",Sn.data),Gn.abrupt("break",149);case 131:return Kr._eventEmitter.emit("CONNECTION_CLOSE",Sn.data),Gn.abrupt("break",149);case 133:return Kr._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Sn.data),Gn.abrupt("break",149);case 135:return Kr._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Sn.data),Gn.abrupt("break",149);case 137:return Kr._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Sn.data),Gn.abrupt("break",149);case 139:return Kr._eventEmitter.emit("PUBSUB_MESSAGE",Sn.data),Gn.abrupt("break",149);case 141:return Kr._eventEmitter.emit("PEER_MODE_CHANGED",Sn.data),(ip=Kr._openTelemetry)===null||ip===void 0||ip.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Sn.data)},status:1}),Gn.abrupt("break",149);case 144:return Ap=Sn.data,Vp=Ap.transportId,Kl=Ap.iceParameters,op=(sp=Kr._openTelemetry)===null||sp===void 0?void 0:sp.trace({spanName:"Protoo Noti: restartIce for transportId :".concat(Vp),attributes:{iceParameters:JSON.stringify(Kl)}}),Kr.handleRemoteRestartIce({transportId:Vp,iceParameters:Kl,internalSpan:op}),Gn.abrupt("break",149);case 148:tn.error('unknown protoo notification.method "%s"',Sn.method);case 149:case"end":return Gn.stop()}},Ts)}));return function(Ts){return gs.apply(this,arguments)}}());case 28:case"end":return dn.stop()}},Pr,this)})),function(){return yl.apply(this,arguments)})},{key:"requestEntry",value:(na=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return ur=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Requesting Entry",span:this._joinSpan}),yr.next=3,this._protoo.request("requestEntry",{name:this._displayName});case 3:(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:ur,status:1,message:"Entry Requested Successfully"});case 4:case"end":return yr.stop()}},Pr,this)})),function(){return na.apply(this,arguments)})},{key:"respondEntry",value:(ep=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return Jr=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:"Responding Entry",attributes:{peerId:cr,decision:sr},span:this._joinSpan}),nn.next=3,this._protoo.request("respondEntry",{id:cr,decision:sr});case 3:(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({message:"Entry Responded Successfully",span:Jr,status:1});case 4:case"end":return nn.stop()}},Pr,this)})),function(Pr,cr){return ep.apply(this,arguments)})},{key:"startRecording",value:(_h=(0,ft.Z)(vt().mark(function Pr(cr,sr,ur){var yr,Jr,nn,Nn,jn;return vt().wrap(function(ts){for(;;)switch(ts.prev=ts.next){case 0:return tn.debug("startRecording()"),nn=(yr=this._openTelemetry)===null||yr===void 0?void 0:yr.trace({spanName:"startRecording() Start",attributes:{webhookUrl:cr||"webhookUrl Not Specify",awsDirPath:sr||"awsDirPath Not Specify",config:ur?JSON.stringify(ur):"config Not Specify"}}),ts.prev=2,ts.next=5,this._protoo.request("startRecording",{webhookUrl:cr,awsDirPath:sr,config:ur});case 5:ts.next=13;break;case 7:ts.prev=7,ts.t0=ts.catch(2),tn.error("startRecording() | failed:%o",ts.t0),(Nn=this._openTelemetry)===null||Nn===void 0||Nn.completeSpan({span:nn,status:2,message:"startRecording() failed"}),(jn=this._videosdkLogs)===null||jn===void 0||jn.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:ts.t0.message}}),this._emitError({code:3017,message:ts.t0.message});case 13:(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:nn,status:1,message:"startRecording() End"});case 14:case"end":return ts.stop()}},Pr,this,[[2,7]])})),function(Pr,cr,sr){return _h.apply(this,arguments)})},{key:"stopRecording",value:(_p=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return tn.debug("stopRecording()"),ur=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"stopRecording() Start"}),nn.prev=2,nn.next=5,this._protoo.request("stopRecording",{});case 5:nn.next=12;break;case 7:nn.prev=7,nn.t0=nn.catch(2),(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({span:ur,status:2,message:"stopRecording() failed"}),(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:nn.t0.message}}),this._emitError({code:3018,message:nn.t0.message});case 12:(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:ur,status:1,message:"stopRecording() End"});case 13:case"end":return nn.stop()}},Pr,this,[[2,7]])})),function(){return _p.apply(this,arguments)})},{key:"startLivestream",value:($u=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur,yr,Jr,nn,Nn;return vt().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:return tn.debug("startLivestream()"),Jr=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:"startLivestream() Start",attributes:{outputs:cr?JSON.stringify(cr):"outputs Not Specify",config:sr?JSON.stringify(sr):"config Not Specify"}}),jn.prev=2,jn.next=5,this._protoo.request("startLivestream",{outputs:cr,config:sr});case 5:jn.next=12;break;case 7:jn.prev=7,jn.t0=jn.catch(2),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Jr,status:1,message:"startLivestream() End"}),(Nn=this._videosdkLogs)===null||Nn===void 0||Nn.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:jn.t0.message}}),this._emitError({code:3019,message:jn.t0.message});case 12:(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({span:Jr,status:1,message:"startLivestream() End"});case 13:case"end":return jn.stop()}},Pr,this,[[2,7]])})),function(Pr,cr){return $u.apply(this,arguments)})},{key:"stopLivestream",value:(lu=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return tn.debug("stopLivestream()"),ur=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"stopLivestream() Start"}),nn.prev=2,nn.next=5,this._protoo.request("stopLivestream",{});case 5:nn.next=12;break;case 7:nn.prev=7,nn.t0=nn.catch(2),(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:nn.t0.message}}),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:ur,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:3020,message:nn.t0.message});case 12:(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:ur,status:1,message:"stopLivestream() End"});case 13:case"end":return nn.stop()}},Pr,this,[[2,7]])})),function(){return lu.apply(this,arguments)})},{key:"startHls",value:(zl=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn;return vt().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return cr=cr||{},tn.debug("startHls()"),yr=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"startHls() Start",attributes:{config:cr?JSON.stringify(cr):"config Not Specify"}}),Nn.prev=3,Nn.next=6,this._protoo.request("startHls",{config:cr});case 6:Nn.next=13;break;case 8:Nn.prev=8,Nn.t0=Nn.catch(3),(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Nn.t0.message}}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:yr,status:2,message:"Error startHls() failed"}),tn.error("startHls() | failed:%o",Nn.t0);case 13:(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({span:yr,status:1,message:"startHlsSpan() End"});case 14:case"end":return Nn.stop()}},Pr,this,[[3,8]])})),function(Pr){return zl.apply(this,arguments)})},{key:"stopHls",value:(Nu=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return tn.debug("stopHls()"),ur=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"stopHls() Start"}),nn.prev=2,nn.next=5,this._protoo.request("stopHls",{});case 5:nn.next=11;break;case 7:nn.prev=7,nn.t0=nn.catch(2),(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:nn.t0.message}}),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:ur,status:2,message:"Error stopHls() failed"});case 11:(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:ur,status:1,message:"stopHls() End"});case 12:case"end":return nn.stop()}},Pr,this,[[2,7]])})),function(){return Nu.apply(this,arguments)})},{key:"startWhiteboard",value:(Nl=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return tn.debug("startWhiteboard()"),cr.prev=1,cr.next=4,this._protoo.request("startWhiteboard",{});case 4:cr.next=10;break;case 6:cr.prev=6,cr.t0=cr.catch(1),tn.error("startWhiteboard() | failed:%o",cr.t0),this._emitError({code:3021,message:cr.t0.message});case 10:case"end":return cr.stop()}},Pr,this,[[1,6]])})),function(){return Nl.apply(this,arguments)})},{key:"stopWhiteboard",value:(Vl=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return tn.debug("stopWhiteboard()"),cr.prev=1,cr.next=4,this._protoo.request("stopWhiteboard",{});case 4:cr.next=10;break;case 6:cr.prev=6,cr.t0=cr.catch(1),tn.error("stopWhiteboard() | failed:%o",cr.t0),this._emitError({code:3022,message:cr.t0.message});case 10:case"end":return cr.stop()}},Pr,this,[[1,6]])})),function(){return Vl.apply(this,arguments)})},{key:"pinStateChange",value:(yp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return ur=cr.peerId,yr=cr.state,(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Pin state Change for ".concat(ur),attributes:{state:yr?JSON.stringify(yr):null},status:1}),nn.prev=2,nn.next=5,this._protoo.request("pinStateChanged",{peerId:ur,state:yr});case 5:nn.next=11;break;case 7:nn.prev=7,nn.t0=nn.catch(2),(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:nn.t0.message}}),tn.error("pinStateChange() | failed");case 11:case"end":return nn.stop()}},Pr,this,[[2,7]])})),function(Pr){return yp.apply(this,arguments)})},{key:"startVideo",value:(vp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr;return vt().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:return ur=cr.link,tn.debug("startVideo()"),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),Jr.prev=3,Jr.next=6,this._protoo.request("startVideo",{link:ur});case 6:Jr.next=13;break;case 8:Jr.prev=8,Jr.t0=Jr.catch(3),(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:Jr.t0.message}}),tn.error("startVideo() | failed:%o",Jr.t0),this._emitError({code:3023,message:Jr.t0.message});case 13:case"end":return Jr.stop()}},Pr,this,[[3,8]])})),function(Pr){return vp.apply(this,arguments)})},{key:"stopVideo",value:(Ou=(0,ft.Z)(vt().mark(function Pr(){var cr,sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return tn.debug("stopVideo()"),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),ur.prev=2,ur.next=5,this._protoo.request("stopVideo",{});case 5:ur.next=12;break;case 7:ur.prev=7,ur.t0=ur.catch(2),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:ur.t0.message}}),tn.error("stopVideo() | failed:%o",ur.t0),this._emitError({code:3024,message:ur.t0.message});case 12:case"end":return ur.stop()}},Pr,this,[[2,7]])})),function(){return Ou.apply(this,arguments)})},{key:"pauseVideo",value:(Du=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return tn.debug("pauseVideo()"),sr.prev=1,sr.next=4,this._protoo.request("pauseVideo",{currentTime:cr});case 4:sr.next=10;break;case 6:sr.prev=6,sr.t0=sr.catch(1),tn.error("pauseVideo() | failed:%o",sr.t0),this._emitError({code:3025,message:sr.t0.message});case 10:case"end":return sr.stop()}},Pr,this,[[1,6]])})),function(Pr){return Du.apply(this,arguments)})},{key:"resumeVideo",value:(gp=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return tn.debug("resumeVideo()"),cr.prev=1,cr.next=4,this._protoo.request("resumeVideo",{});case 4:cr.next=10;break;case 6:cr.prev=6,cr.t0=cr.catch(1),tn.error("resumeVideo() | failed:%o",cr.t0),this._emitError({code:3026,message:cr.t0.message});case 10:case"end":return cr.stop()}},Pr,this,[[1,6]])})),function(){return gp.apply(this,arguments)})},{key:"seekVideo",value:(hm=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return tn.debug("seekVideo()"),sr.prev=1,sr.next=4,this._protoo.request("seekVideo",{currentTime:cr});case 4:sr.next=10;break;case 6:sr.prev=6,sr.t0=sr.catch(1),tn.error("seekVideo() | failed:%o",sr.t0),this._emitError({code:3031,message:sr.t0.message});case 10:case"end":return sr.stop()}},Pr,this,[[1,6]])})),function(Pr){return hm.apply(this,arguments)})},{key:"enablePeerMic",value:(dm=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Enabling peer ".concat(cr," Mic"),status:1}),tn.debug("enablePeerMic()"),yr.prev=2,yr.next=5,this._protoo.request("enablePeerMic",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("enablePeerMic() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return dm.apply(this,arguments)})},{key:"disablePeerMic",value:(um=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Disabling peer ".concat(cr," Mic"),status:1}),tn.debug("disablePeerMic()"),yr.prev=2,yr.next=5,this._protoo.request("disablePeerMic",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("disablePeerMic() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return um.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Up=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return tn.debug("consumeWebcamStreams()"),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:cr}}),yr.prev=2,yr.next=5,this._protoo.request("consumeVideoStreams",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("consumeWebcamStreams() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return Up.apply(this,arguments)})},{key:"consumeMicStreams",value:(Zp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return tn.debug("consumeMicStreams()"),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:cr}}),yr.prev=2,yr.next=5,this._protoo.request("consumeAudioStreams",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("consumeMicStreams() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return Zp.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(lm=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return tn.debug("stopConsumingAudioStreams()"),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:cr}}),yr.prev=2,yr.next=5,this._protoo.request("stopConsumingAudioStreams",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("stopConsumingMicStreams() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return lm.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(om=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return tn.debug("stopConsumingWebcamStreams()"),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:cr}}),yr.prev=2,yr.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("stopConsumingWebcamStreams() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return om.apply(this,arguments)})},{key:"changeMode",value:(Bp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo=this;return vt().wrap(function(Xs){for(;;)switch(Xs.prev=Xs.next){case 0:if(ur=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"changeMode() Calling with mode : ".concat(cr)}),yr=this._mode,Xs.prev=2,yr!==cr){Xs.next=7;break}throw(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:ur,status:2,message:"changeMode() Ending"}),(nn=this._videosdkLogs)===null||nn===void 0||nn.pushLogs({logText:"You are already in ".concat(cr," mode"),logType:"INFO"}),new Error("You are already in ".concat(cr," mode"));case 7:if(this._mode=cr,cr!==Bn.S.CONFERENCE){Xs.next=38;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new Et.Device({handlerName:this._handlerName}),Xs.next=14,this._protoo.request("getRouterRtpCapabilities");case 14:return ts=Xs.sent,Xs.next=17,this._mediasoupDevice.load({routerRtpCapabilities:ts});case 17:if(!this._produce){Xs.next=22;break}return Xs.next=20,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 20:ns=Xs.sent,this.createProducerTransport(ns,ur);case 22:if(!this._consume){Xs.next=29;break}return Xs.next=25,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 25:ss=Xs.sent,Kr=ss.id,dn=ss.iceParameters,gs=ss.iceCandidates,Ts=ss.dtlsParameters,Sn=ss.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Kr,iceParameters:dn,iceCandidates:gs,dtlsParameters:Ts,sctpParameters:Sn,iceServers:this._iceServers}),this._recvTransport.on("connect",function(So,Co,io){var po=So.dtlsParameters;jo._protoo.request("connectWebRtcTransport",{transportId:jo._recvTransport.id,dtlsParameters:po}).then(Co).catch(io)});case 29:return(Nn=this._openTelemetry)===null||Nn===void 0||Nn.traceAutoComplete({spanName:"Sending changeMode request to server",span:ur,status:1}),Xs.next=32,this._protoo.request("changeMode",{mode:cr});case 32:this._produce&&(Or.dispatch(or({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),fs=zt(),this._webcamEnabled&&(!fs||fs.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,ur),this.enableChatDataProducer()),window.SHOW_INFO&&(rs=Or.getState(),js=rs.me,Or.dispatch(Xt(js.id))),(jn=this._openTelemetry)===null||jn===void 0||jn.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),span:ur,status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),Xs.next=52;break;case 38:if(cr!==Bn.S.VIEWER){Xs.next=52;break}return(Gs=this._openTelemetry)===null||Gs===void 0||Gs.traceAutoComplete({spanName:"Sending changeMode request to server",span:ur,status:1}),Xs.next=42,this._protoo.request("changeMode",{mode:cr});case 42:this._consume=!1,this._produce=!1,this._dataConsumers.clear(),ms=(xs=this._openTelemetry)===null||xs===void 0?void 0:xs.trace({spanName:"Closing Trasnport",span:ur}),(vs=this._sendTransport)===null||vs===void 0||vs.close(),this._sendTransport=null,(Fs=this._recvTransport)===null||Fs===void 0||Fs.close(),this._recvTransport=null,(Zs=this._openTelemetry)===null||Zs===void 0||Zs.completeSpan({span:ms,status:1,message:"Closed Trasnport"}),(no=this._openTelemetry)===null||no===void 0||no.completeSpan({span:ms,status:1,message:"changeMode() Ending"});case 52:Xs.next=58;break;case 54:Xs.prev=54,Xs.t0=Xs.catch(2),(Ds=this._videosdkLogs)===null||Ds===void 0||Ds.pushLogs({logText:"Error changeMode(".concat(cr,") | failed"),logType:"ERROR",attributes:{error:Xs.t0.message}}),($o=this._openTelemetry)===null||$o===void 0||$o.completeSpan({span:ur,status:2,message:"changeMode(".concat(cr,") | failed")});case 58:case"end":return Xs.stop()}},Pr,this,[[2,54]])})),function(Pr){return Bp.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Xp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Enabling peer ".concat(cr," Webcam"),status:1}),tn.debug("enablePeerWebcam()"),yr.prev=2,yr.next=5,this._protoo.request("enablePeerWebcam",{peerId:cr});case 5:yr.next=11;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("enablePeerWebcam() | failed:%o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return Xp.apply(this,arguments)})},{key:"disablePeerWebcam",value:(Mp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return(sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Disabling peer ".concat(cr," Webcam"),status:1}),tn.debug("disablePeerWebcam()"),yr.prev=2,yr.next=5,this._protoo.request("disablePeerWebcam",{peerId:cr});case 5:yr.next=10;break;case 7:yr.prev=7,yr.t0=yr.catch(2),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:yr.t0.message}});case 10:case"end":return yr.stop()}},Pr,this,[[2,7]])})),function(Pr){return Mp.apply(this,arguments)})},{key:"enableMic",value:(ou=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo,Xs,So,Co,io,po,Js,ga,Qn,so,Io,fo=this,_a=arguments;return vt().wrap(function(Bs){for(;;)switch(Bs.prev=Bs.next){case 0:if(sr=_a.length>0&&_a[0]!==void 0?_a[0]:void 0,ur=_a.length>1&&_a[1]!==void 0?_a[1]:void 0,yr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"enableMic() Calling ".concat(sr?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:sr?JSON.stringify(sr):"Not Specify Custom Track"},span:ur||null}),tn.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Bs.next=20;break}return jn=(Jr=this._openTelemetry)===null||Jr===void 0?void 0:Jr.trace({spanName:"Mic Producer found",span:yr}),sr&&((ts=this._openTelemetry)===null||ts===void 0||ts.traceAutoComplete({spanName:"Stopping customAudioTrack",span:yr,status:1}),sr.getTracks().forEach(function(wo){wo.stop()})),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:jn,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),ns=this._micProducer,Bs.next=13,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 13:return this._micProducer=Bs.sent,ss=mr({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:ns._appData.encodings,codecOptions:ns._appData.codecOptions,instance:this._micProducer}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Or.dispatch(ss),this._eventEmitter.emit(ss.type,ss.payload),(Nn=this._openTelemetry)===null||Nn===void 0||Nn.completeSpan({span:yr,status:1,message:"Enable Mic Successful"}),Bs.abrupt("return");case 20:if(this._mediasoupDevice.canProduce("audio")){Bs.next=24;break}return tn.error("enableMic() | cannot produce audio"),(Kr=this._openTelemetry)===null||Kr===void 0||Kr.completeSpan({span:yr,status:2,message:'enableMic() | cannot produce audio"'}),Bs.abrupt("return");case 24:if(Bs.prev=24,this._externalVideo){Bs.next=52;break}return tn.debug("enableMic() | calling getUserMedia()"),Bs.next=29,this._updateMics(yr);case 29:if(this._mic.device){Bs.next=33;break}throw(Gs=this._openTelemetry)===null||Gs===void 0||Gs.traceAutoComplete({spanName:"Mic Device Not Found",span:yr,status:2}),(xs=this._videosdkLogs)===null||xs===void 0||xs.pushLogs({logText:"Error Mic Device Not Found",logType:"ERROR"}),new Error("no mic devices");case 33:try{sr&&(dn=sr.getAudioTracks()[0]).readyState=="ended"&&(dn=null,(vs=this._openTelemetry)===null||vs===void 0||vs.traceAutoComplete({spanName:"Dispose Audio Custom Track, it is in ended state",span:yr,status:2}))}catch(wo){(Fs=this._videosdkLogs)===null||Fs===void 0||Fs.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:wo.message}}),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(wo))}if(dn){Bs.next=50;break}return ms=(Zs=this._openTelemetry)===null||Zs===void 0?void 0:Zs.trace({spanName:"Creating Track",span:yr}),Bs.prev=36,Bs.next=39,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 39:Ds=Bs.sent,Bs.next=48;break;case 42:return Bs.prev=42,Bs.t0=Bs.catch(36),($o=this._videosdkLogs)===null||$o===void 0||$o.pushLogs({logText:"Error in getUserMedia for audio",logType:"ERROR",attributes:{error:JSON.stringify(Bs.t0)}}),(jo=this._openTelemetry)===null||jo===void 0||jo.completeSpan({span:yr,status:2,message:"Error in getUserMedia for audio"}),Bs.t0.message==="Permission denied"||Bs.t0.name==="NotAllowedError"?((Xs=this._videosdkLogs)===null||Xs===void 0||Xs.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(error),logType:"ERROR"}),this._emitError(Vn.H.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED)):this._emitError(Vn.H.ERROR_GET_AUDIO_MEDIA),Bs.abrupt("return");case 48:dn=Ds.getAudioTracks()[0],(no=this._openTelemetry)===null||no===void 0||no.completeSpan({message:"Audio Track Generated",span:ms,status:1});case 50:Bs.next=56;break;case 52:return Bs.next=54,this._getExternalVideoStream();case 54:So=Bs.sent,dn=So.getAudioTracks()[0].clone();case 56:return Co=(gs=this._openTelemetry)===null||gs===void 0?void 0:gs.trace({spanName:"Generating Producer Configuration",span:yr}),io={opusStereo:1,opusDtx:1},sr&&(po=sr.encoderConfig?Gr.v.audioProfiles[sr.encoderConfig]:Gr.v.audioProfiles.speech_standard,io={opusStereo:po.stereo?1:0,opusFec:po.fec?1:0,opusDtx:po.dtx?1:0,opusMaxPlaybackRate:po.maxPlaybackRate,opusPtime:po.packetTime}),ga={encodings:Js=[{networkPriority:"high"}],codecOptions:io},(Ts=this._openTelemetry)===null||Ts===void 0||Ts.traceAutoComplete({spanName:"Generated AppData",span:Co,attributes:{appData:JSON.stringify(ga)},status:1}),(Sn=this._openTelemetry)===null||Sn===void 0||Sn.completeSpan({span:Co,status:1,message:"Producer Configuration Generated"}),Co=(fs=this._openTelemetry)===null||fs===void 0?void 0:fs.trace({spanName:"Creating Mic Producer",span:yr}),Bs.next=67,this._sendTransport.produce({track:dn,encodings:Js,codecOptions:io,appData:ga});case 67:this._micProducer=Bs.sent,dn.getConstraints().deviceId&&(this._mic.device=this._mics.get(dn.getConstraints().deviceId)),Qn=mr({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Js,codecOptions:io,instance:this._micProducer}),Or.dispatch(Qn),this._eventEmitter.emit(Qn.type,Qn.payload),this._micProducer.on("transportclose",function(){var wo,Es=hr(fo._micProducer.id);Or.dispatch(Es),fo._eventEmitter.emit(Es.type,Es.payload),(wo=fo._micProducer)===null||wo===void 0||wo.close(),fo._micProducer=null}),this._micProducer.on("trackended",function(){var wo;(wo=fo._openTelemetry)===null||wo===void 0||wo.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Co,status:2}),Or.dispatch(Mn({type:"error",text:"Microphone disconnected!"})),fo.disableMic(!0,yr).catch(function(){})}),(rs=this._openTelemetry)===null||rs===void 0||rs.completeSpan({span:Co,status:1,message:"Mic Producer Created"}),(js=this._openTelemetry)===null||js===void 0||js.completeSpan({span:yr,status:1,message:"Enable Mic Successful"}),Bs.next=87;break;case 78:return Bs.prev=78,Bs.t1=Bs.catch(24),(so=this._openTelemetry)===null||so===void 0||so.completeSpan({span:yr,status:2,message:"Error enabling microphone: ".concat(Bs.t1)}),(Io=this._videosdkLogs)===null||Io===void 0||Io.pushLogs({logText:"Error enabling microphone",logType:"ERROR",attributes:{error:Bs.t1.message}}),tn.error("enableMic() | failed:%o",Bs.t1),Or.dispatch(Mn({type:"error",text:"Error enabling microphone: ".concat(Bs.t1)})),Bs.next=86,this._protoo.request("produceError",{mediaType:"audio",message:Bs.t1.message});case 86:dn&&dn.stop();case 87:case"end":return Bs.stop()}},Pr,this,[[24,78],[36,42]])})),function(){return ou.apply(this,arguments)})},{key:"disableMic",value:(Ho=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs=arguments;return vt().wrap(function(vs){for(;;)switch(vs.prev=vs.next){case 0:if(ur=xs.length>0&&xs[0]!==void 0&&xs[0],yr=xs.length>1&&xs[1]!==void 0?xs[1]:void 0,tn.debug("disableMic()"),Jr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"disableMic() Calling",status:1,span:yr||null}),this._micProducer){vs.next=7;break}return(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Jr,status:2,message:"Mic Producer Not found"}),vs.abrupt("return");case 7:if(Nn=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"Closing Mic Producer",span:Jr,status:1}),this._micEnabled=!1,!this._micProducer||ur){vs.next=29;break}return ss=(jn=this._openTelemetry)===null||jn===void 0?void 0:jn.trace({spanName:"Pausing Mic Producer",span:Nn,status:1}),this._micProducer.pause(),Kr=hr(this._micProducer.id),(ts=this._openTelemetry)===null||ts===void 0||ts.completeSpan({span:ss,status:1,message:"Pause Mic Successfully"}),Or.dispatch(Kr),this._eventEmitter.emit(Kr.type,Kr.payload),vs.prev=16,vs.next=19,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 19:(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:Nn,status:1,message:"Requested Server to Close Producer"}),vs.next=27;break;case 22:vs.prev=22,vs.t0=vs.catch(16),Or.dispatch(Mn({type:"error",text:"Error closing server-side mic Producer: ".concat(vs.t0)})),(gs=this._openTelemetry)===null||gs===void 0||gs.completeSpan({span:Jr,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(ur)}),(Ts=this._videosdkLogs)===null||Ts===void 0||Ts.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(ur),logType:"ERROR",attributes:{error:vs.t0.message}});case 27:return(ns=this._openTelemetry)===null||ns===void 0||ns.completeSpan({span:Jr,status:1,message:"Mic Disabled Successfully"}),vs.abrupt("return");case 29:return this._micProducer.close(),Sn=hr(this._micProducer.id),Or.dispatch(Sn),this._eventEmitter.emit(Sn.type,Sn.payload),vs.prev=33,vs.next=36,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 36:(fs=this._openTelemetry)===null||fs===void 0||fs.completeSpan({span:Nn,status:1,message:"Requested Server to Close Producer"}),(rs=this._openTelemetry)===null||rs===void 0||rs.completeSpan({span:Jr,status:1,message:"Mic Disabled Successfully"}),vs.next=45;break;case 40:vs.prev=40,vs.t1=vs.catch(33),Or.dispatch(Mn({type:"error",text:"Error closing server-side mic Producer: ".concat(vs.t1)})),(js=this._openTelemetry)===null||js===void 0||js.completeSpan({span:Jr,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(ur)}),(Gs=this._videosdkLogs)===null||Gs===void 0||Gs.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(ur),logType:"ERROR",attributes:{error:vs.t1.message}});case 45:this._micProducer=null;case 46:case"end":return vs.stop()}},Pr,this,[[16,22],[33,40]])})),function(){return Ho.apply(this,arguments)})},{key:"muteMic",value:(Rs=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return tn.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),sr.prev=3,sr.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:Or.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),sr.next=14;break;case 9:sr.prev=9,sr.t0=sr.catch(3),tn.error("muteMic() | failed: %o",sr.t0),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:sr.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error pausing server-side mic Producer: ".concat(sr.t0)}));case 14:case"end":return sr.stop()}},Pr,this,[[3,9]])})),function(){return Rs.apply(this,arguments)})},{key:"unmuteMic",value:(Fp=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return tn.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),sr.prev=3,sr.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:Or.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),sr.next=14;break;case 9:sr.prev=9,sr.t0=sr.catch(3),tn.error("unmuteMic() | failed: %o",sr.t0),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:sr.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error resuming server-side mic Producer: ".concat(sr.t0)}));case 14:case"end":return sr.stop()}},Pr,this,[[3,9]])})),function(){return Fp.apply(this,arguments)})},{key:"enableWebcam",value:(Ls=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo,Xs,So,Co,io,po,Js,ga,Qn,so,Io,fo,_a,Bs=this,wo=arguments;return vt().wrap(function(Es){for(;;)switch(Es.prev=Es.next){case 0:if(sr=wo.length>0&&wo[0]!==void 0?wo[0]:void 0,ur=wo.length>1&&wo[1]!==void 0?wo[1]:void 0,yr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"enableWebcam() Calling ".concat(sr?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:sr?JSON.stringify(sr):"Not Specify Custom Track"},span:ur||null}),tn.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){Es.next=8;break}return(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:yr,status:2,message:"Webcam Producer found"}),Es.abrupt("return");case 8:if(this._mediasoupDevice.canProduce("video")){Es.next=12;break}return(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:yr,status:2,message:"enableWebcam() | cannot produce video"}),tn.error("enableWebcam() | cannot produce video"),Es.abrupt("return");case 12:if(Or.dispatch(wr(!0)),ts=this._webcam.resolution,Es.prev=14,this._externalVideo){Es.next=53;break}return Es.next=18,this._updateWebcams(yr);case 18:if(jn=this._webcam.device){Es.next=23;break}throw(Sn=this._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"Webcam Device Not Found",span:yr,status:2}),(fs=this._videosdkLogs)===null||fs===void 0||fs.pushLogs({logText:"Error Webcam Device Not Found",logType:"ERROR"}),new Error("no webcam devices");case 23:tn.debug("enableWebcam() | calling getUserMedia()");try{sr&&(Nn=sr.getVideoTracks()[0]).readyState=="ended"&&(Nn=null,(rs=this._openTelemetry)===null||rs===void 0||rs.traceAutoComplete({spanName:"Dispose Video Custom Track, it is in ended state",span:yr,status:2}))}catch(mo){(js=this._videosdkLogs)===null||js===void 0||js.pushLogs({logText:"Error Invalid Custom Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:mo.message}}),console.log("Invalid Custom Track Passed. Reverting to default Error: ".concat(mo))}if(Nn){Es.next=51;break}if(xs=(Gs=this._openTelemetry)===null||Gs===void 0?void 0:Gs.trace({spanName:"Creating Track",span:yr}),vs=null,Es.prev=28,this._webcam.resolution!="hd"){Es.next=36;break}return Es.next=32,Yn.VideoSDK.createCameraVideoTrack({cameraId:jn.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:jn.facing});case 32:sr=Es.sent,vs=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),Es.next=40;break;case 36:return Es.next=38,Yn.VideoSDK.createCameraVideoTrack({cameraId:jn.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:jn.facing});case 38:sr=Es.sent,vs=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 40:Nn=sr.getVideoTracks()[0],(Fs=this._openTelemetry)===null||Fs===void 0||Fs.completeSpan({message:"Video Track Generated",span:xs,attributes:{customVideoTrackConfig:vs},status:1}),Es.next=51;break;case 44:return Es.prev=44,Es.t0=Es.catch(28),(Zs=this._videosdkLogs)===null||Zs===void 0||Zs.pushLogs({logText:"Error Creating VideoTrack",logType:"ERROR",attributes:{error:Es.t0.message}}),(no=this._openTelemetry)===null||no===void 0||no.completeSpan({message:"Error Creating VideoTrack",span:yr,status:2}),console.log("Error Creating VideoTrack: ",Es.t0),Es.t0.message==="Permission denied"||Es.t0.name==="NotAllowedError"?this._emitError(Vn.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(Vn.H.ERROR_GET_VIDEO_MEDIA),Es.abrupt("return");case 51:Es.next=58;break;case 53:return jn={label:"external video"},Es.next=56,this._getExternalVideoStream();case 56:ms=Es.sent,Nn=ms.getVideoTracks()[0].clone();case 58:if(Ds=(ns=this._openTelemetry)===null||ns===void 0?void 0:ns.trace({spanName:"Generating Producer Configuration",span:yr}),Xs={videoGoogleStartBitrate:1e3},!this._forceH264){Es.next=67;break}if(jo=this._mediasoupDevice.rtpCapabilities.codecs.find(function(mo){return mo.mimeType.toLowerCase()==="video/h264"})){Es.next=65;break}throw(So=this._videosdkLogs)===null||So===void 0||So.pushLogs({logText:"Error desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 65:Es.next=72;break;case 67:if(!this._forceVP9){Es.next=72;break}if(jo=this._mediasoupDevice.rtpCapabilities.codecs.find(function(mo){return mo.mimeType.toLowerCase()==="video/vp9"})){Es.next=72;break}throw(Co=this._videosdkLogs)===null||Co===void 0||Co.pushLogs({logText:"Error desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 72:Nn?(io=Nn.getConstraints(),$o=xr(!1,io.width,io.height,{simulcast:sr.multiStream})):this._useSimulcast&&(po=this._mediasoupDevice.rtpCapabilities.codecs.find(function(mo){return mo.kind==="video"}),$o=this._forceVP9&&jo||po.mimeType.toLowerCase()==="video/vp9"?Ms:hs[this._webcam.resolution]),Js={};try{Js={encodings:$o,width:sr?(ga=Nn)===null||ga===void 0?void 0:ga.getConstraints().width:_i[ts].width.ideal,height:sr?(Qn=Nn)===null||Qn===void 0?void 0:Qn.getConstraints().height:_i[ts].height.ideal}}catch(mo){(so=this._videosdkLogs)===null||so===void 0||so.pushLogs({logText:"Error Enable Webcam AppData",logType:"ERROR",attributes:{error:mo.message}}),console.log(mo)}return(ss=this._openTelemetry)===null||ss===void 0||ss.traceAutoComplete({spanName:"Track Generated with height ".concat(Js.height," and width ").concat(Js.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Js)},span:yr,status:1}),(Kr=this._openTelemetry)===null||Kr===void 0||Kr.completeSpan({span:Ds,status:1,message:"Producer Configuration Generated"}),Ds=(dn=this._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Creating Webcam Producer",span:yr}),Es.next=80,this._sendTransport.produce({track:Nn,encodings:$o,codecOptions:Xs,codec:jo,appData:Js});case 80:this._webcamProducer=Es.sent,Nn.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(Nn.getConstraints().deviceId)),Io=mr({id:this._webcamProducer.id,deviceLabel:jn.label,type:this._getWebcamType(jn),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),Or.dispatch(Io),this._eventEmitter.emit(Io.type,Io.payload),this._webcamProducer.on("transportclose",function(){var mo,Wo=hr(Bs._webcamProducer.id);Or.dispatch(Wo),Bs._eventEmitter.emit(Wo.type,Wo.payload),(mo=Bs._webcamProducer)===null||mo===void 0||mo.close(),Bs._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var mo;(mo=Bs._openTelemetry)===null||mo===void 0||mo.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:yr,status:2}),Or.dispatch(Mn({type:"error",text:"Webcam disconnected!"})),Bs.disableWebcam(yr).catch(function(){})}),(gs=this._openTelemetry)===null||gs===void 0||gs.completeSpan({span:Ds,status:1,message:"Webcam Producer Created"}),(Ts=this._openTelemetry)===null||Ts===void 0||Ts.completeSpan({span:yr,status:1,message:"Enable Webcam Successful"}),Es.next=100;break;case 91:return Es.prev=91,Es.t1=Es.catch(14),console.log("enableWebcam() | failed:%o",Es.t1),(fo=this._videosdkLogs)===null||fo===void 0||fo.pushLogs({logText:"Error enabling webcam",logType:"ERROR",attributes:{error:Es.t1.message}}),(_a=this._openTelemetry)===null||_a===void 0||_a.completeSpan({span:yr,status:2,message:"Error enabling webcam"}),Or.dispatch(Mn({type:"error",text:"Error enabling webcam: ".concat(Es.t1)})),Es.next=99,this._protoo.request("produceError",{mediaType:"video",message:Es.t1.message});case 99:Nn&&Nn.stop();case 100:Or.dispatch(wr(!1));case 101:case"end":return Es.stop()}},Pr,this,[[14,91],[28,44]])})),function(){return Ls.apply(this,arguments)})},{key:"disableWebcam",value:(su=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr=arguments;return vt().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(yr=Kr.length>0&&Kr[0]!==void 0?Kr[0]:void 0,Jr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"disableWebcam() Calling",status:1,span:yr||null}),tn.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){dn.next=7;break}return(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Jr,status:2,message:"Webcam Producer Not found"}),dn.abrupt("return");case 7:return Nn=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"Closing Webcam Producer",span:Jr,status:1}),this._webcamProducer.close(),jn=hr(this._webcamProducer.id),Or.dispatch(jn),this._eventEmitter.emit(jn.type,jn.payload),dn.prev=12,dn.next=15,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 15:(ts=this._openTelemetry)===null||ts===void 0||ts.completeSpan({span:Nn,status:1,message:"Requested Server to Close Producer"}),dn.next=23;break;case 18:dn.prev=18,dn.t0=dn.catch(12),(ns=this._videosdkLogs)===null||ns===void 0||ns.pushLogs({logText:"Error closing server-side webcam Producer",logType:"ERROR",attributes:{error:dn.t0.message}}),(ss=this._openTelemetry)===null||ss===void 0||ss.completeSpan({span:Jr,status:2,message:"Error closing server-side webcam Producer: ".concat(dn.t0)}),Or.dispatch(Mn({type:"error",text:"Error closing server-side webcam Producer: ".concat(dn.t0)}));case 23:this._webcamProducer=null,(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({span:Jr,status:1,message:"Webcam Disabled Successfully"});case 25:case"end":return dn.stop()}},Pr,this,[[12,18]])})),function(){return su.apply(this,arguments)})},{key:"getMics",value:(ps=(0,ft.Z)(vt().mark(function Pr(){var cr,sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return cr=[],ur.prev=1,ur.next=4,this._updateMics();case 4:this._mics.forEach(function(yr,Jr){cr.push({deviceId:Jr,label:yr.label})}),ur.next=11;break;case 7:ur.prev=7,ur.t0=ur.catch(1),tn.error("getMics() | Error",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error getMics() | Error",logType:"ERROR",attributes:{error:ur.t0.message}});case 11:return ur.abrupt("return",cr);case 12:case"end":return ur.stop()}},Pr,this,[[1,7]])})),function(){return ps.apply(this,arguments)})},{key:"changeMic",value:(Qr=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts;return vt().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:if(ur=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"changeMic() Calling"}),Sn.prev=1,(0,pt.Z)(cr)!="object"){Sn.next=9;break}return Sn.next=5,this.disableMic(!0,ur);case 5:return Sn.next=7,this.enableMic(cr,ur);case 7:Sn.next=27;break;case 9:return Nn=cr,Sn.next=12,this._updateMics();case 12:if(jn=Array.from(this._mics.keys()),ts=jn.length,ns=this._mic.device?this._mic.device.deviceId:void 0,Nn!=null&&Nn!=null?ss=jn.indexOf(Nn):(ss=jn.indexOf(ns))<ts-1?ss++:ss=0,this._mic.device=this._mics.get(jn[ss]),Kr=(yr=this._openTelemetry)===null||yr===void 0?void 0:yr.trace({spanName:"Getting Selected Mic",span:ur,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){Sn.next=21;break}throw(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return Sn.next=23,this.disableMic(!0,ur);case 23:return Sn.next=25,this.enableMic(void 0,ur);case 25:(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:Kr,status:1,message:"Done"}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:ur,status:1,message:"changeMic() Ending"});case 27:Sn.next=33;break;case 29:Sn.prev=29,Sn.t0=Sn.catch(1),(gs=this._openTelemetry)===null||gs===void 0||gs.completeSpan({span:ur,status:2,message:"changeMic() | Error ".concat(Sn.t0)}),(Ts=this._videosdkLogs)===null||Ts===void 0||Ts.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Sn.t0.message}});case 33:case"end":return Sn.stop()}},Pr,this,[[1,29]])})),function(Pr){return Qr.apply(this,arguments)})},{key:"getWebcams",value:(jp=(0,ft.Z)(vt().mark(function Pr(){var cr,sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return cr=[],ur.prev=1,ur.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(yr,Jr){cr.push({deviceId:Jr,label:yr.label,facingMode:yr.facing||"environment"})}),ur.next=11;break;case 7:ur.prev=7,ur.t0=ur.catch(1),tn.error("getWebcams() | failed %o",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error getWebcams() | failed",logType:"ERROR",attributes:{error:ur.t0.message}});case 11:return ur.abrupt("return",cr);case 12:case"end":return ur.stop()}},Pr,this,[[1,7]])})),function(){return jp.apply(this,arguments)})},{key:"replaceWebcamStream",value:(Cp=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(!this._webcamProducer){ur.next=7;break}return sr=cr.getVideoTracks()[0],ur.next=4,this._webcamProducer.replaceTrack({track:sr});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),ur.next=11;break;case 7:return ur.next=9,this.disableWebcam();case 9:return ur.next=11,this.enableWebcam(cr);case 11:case"end":return ur.stop()}},Pr,this)})),function(Pr){return Cp.apply(this,arguments)})},{key:"changeWebcam",value:(Kp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts;return vt().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:if(ur=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"changeWebcam() Calling"}),Or.dispatch(wr(!0)),(0,pt.Z)(cr)!=="object"){Sn.next=17;break}return Sn.prev=3,Sn.next=6,this.disableWebcam(ur);case 6:return Sn.next=8,this.enableWebcam(cr,ur);case 8:Sn.next=15;break;case 10:Sn.prev=10,Sn.t0=Sn.catch(3),tn.error("changeWebcam() | failed: %o",Sn.t0),(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(cr),error:Sn.t0.message}}),Or.dispatch(Mn({type:"error",text:"Could not change webcam: ".concat(Sn.t0)}));case 15:Sn.next=46;break;case 17:return Sn.prev=17,Sn.next=20,this._updateWebcams(ur);case 20:if(jn=Array.from(this._webcams.keys()),ts=jn.length,ns=this._webcam.device?this._webcam.device.deviceId:void 0,cr!=null&&cr!=null?ss=jn.indexOf(cr):(ss=jn.indexOf(ns))<ts-1?ss++:ss=0,this._webcam.device=this._webcams.get(jn[ss]),tn.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",Kr=(Jr=this._openTelemetry)===null||Jr===void 0?void 0:Jr.trace({spanName:"Getting Selected Webcam",span:ur,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Sn.next=31;break}throw(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return Sn.next=33,this.disableWebcam(ur);case 33:return Sn.next=35,this.enableWebcam(void 0,ur);case 35:return(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Kr,status:1,message:"Done"}),(Nn=this._openTelemetry)===null||Nn===void 0||Nn.completeSpan({span:ur,status:1,message:"changeWebcam() Ending"}),Sn.abrupt("return");case 40:Sn.prev=40,Sn.t1=Sn.catch(17),tn.error("changeWebcam() | failed: %o",Sn.t1),(gs=this._videosdkLogs)===null||gs===void 0||gs.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(cr),error:Sn.t1.message}}),(Ts=this._openTelemetry)===null||Ts===void 0||Ts.completeSpan({span:ur,status:2,message:"Could not change webcam ".concat(Sn.t1)}),Or.dispatch(Mn({type:"error",text:"Could not change webcam: ".concat(Sn.t1)}));case 46:Or.dispatch(wr(!1));case 47:case"end":return Sn.stop()}},Pr,this,[[3,10],[17,40]])})),function(Pr){return Kp.apply(this,arguments)})},{key:"changeWebcamResolution",value:(Su=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr;return vt().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:tn.debug("changeWebcamResolution()"),Or.dispatch(wr(!0)),Jr.prev=2,Jr.t0=this._webcam.resolution,Jr.next=Jr.t0==="qvga"?6:Jr.t0==="vga"?8:Jr.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",Jr.abrupt("break",13);case 8:return this._webcam.resolution="hd",Jr.abrupt("break",13);case 10:return this._webcam.resolution="qvga",Jr.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return tn.debug("changeWebcamResolution() | calling getUserMedia()"),Jr.prev=14,Jr.next=17,navigator.mediaDevices.getUserMedia({video:Tn({deviceId:{exact:this._webcam.device.deviceId}},_i[this._webcam.resolution])});case 17:cr=Jr.sent,Jr.next=25;break;case 20:return Jr.prev=20,Jr.t1=Jr.catch(14),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(Jr.t1)}}),Jr.t1.message==="Permission denied"||Jr.t1.name==="NotAllowedError"?this._emitError(Vn.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(Vn.H.ERROR_GET_VIDEO_MEDIA),Jr.abrupt("return");case 25:return ur=cr.getVideoTracks()[0],Jr.next=28,this._webcamProducer.replaceTrack({track:ur});case 28:Or.dispatch(gr(this._webcamProducer.id,ur)),Jr.next=36;break;case 31:Jr.prev=31,Jr.t2=Jr.catch(2),tn.error("changeWebcamResolution() | failed: %o",Jr.t2),(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:Jr.t2.message}}),Or.dispatch(Mn({type:"error",text:"Could not change webcam resolution: ".concat(Jr.t2)}));case 36:Or.dispatch(wr(!1));case 37:case"end":return Jr.stop()}},Pr,this,[[2,31],[14,20]])})),function(){return Su.apply(this,arguments)})},{key:"enableShare",value:(Pl=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs,vs,Fs,Zs,no,ms,Ds,$o,jo,Xs,So,Co,io,po,Js=this,ga=arguments;return vt().wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:if(sr=ga.length>0&&ga[0]!==void 0?ga[0]:void 0,ur=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"enableShare() Calling ".concat(sr?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:sr?JSON.stringify(sr):"Not Specify Custom Track"}}),tn.debug("enableShare()"),!this._shareProducer){Qn.next=6;break}return(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({span:ur,status:2,message:"Screen Share Producer found"}),Qn.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){Qn.next=10;break}return(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:ur,status:2,message:"enableShare() | cannot produce video"}),tn.error("enableShare() | cannot produce video"),Qn.abrupt("return");case 10:if(Or.dispatch(Fr(!0)),Qn.prev=11,tn.debug("enableShare() | calling getUserMedia()"),gs=(jn=this._openTelemetry)===null||jn===void 0?void 0:jn.trace({spanName:"Creating Track",span:ur}),!sr||!sr.active){Qn.next=19;break}nn=sr.getVideoTracks()[0],Nn=sr.getAudioTracks()[0],Qn.next=38;break;case 19:return Qn.prev=19,Qn.next=22,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 22:Sn=Qn.sent,Qn.next=31;break;case 25:return Qn.prev=25,Qn.t0=Qn.catch(19),(fs=this._videosdkLogs)===null||fs===void 0||fs.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(Qn.t0)}}),(rs=this._openTelemetry)===null||rs===void 0||rs.completeSpan({span:ur,status:2,message:"Error in getDisplayMedia for screen share ".concat(Qn.t0)}),Qn.t0.message==="Permission denied"||Qn.t0.name==="NotAllowedError"?this._emitError(Vn.H.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(Vn.H.ERROR_GET_DISPLAY_MEDIA),Qn.abrupt("return");case 31:if(Sn){Qn.next=35;break}return Or.dispatch(Fr(!0)),(js=this._openTelemetry)===null||js===void 0||js.completeSpan({span:ur,status:2,message:"Stream not found"}),Qn.abrupt("return");case 35:nn=Sn.getVideoTracks()[0],Nn=Sn.getAudioTracks()[0],(Ts=this._openTelemetry)===null||Ts===void 0||Ts.completeSpan({message:"Track Generated with height ".concat(nn.getSettings().height," and width ").concat(nn.getSettings().width),span:gs,status:1});case 38:if(Gs=(ts=this._openTelemetry)===null||ts===void 0?void 0:ts.trace({spanName:"Generating Producer Configuration",span:ur}),Fs={videoGoogleStartBitrate:1e3},!this._forceH264){Qn.next=47;break}if(vs=this._mediasoupDevice.rtpCapabilities.codecs.find(function(so){return so.mimeType.toLowerCase()==="video/h264"})){Qn.next=45;break}throw(Zs=this._videosdkLogs)===null||Zs===void 0||Zs.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 45:Qn.next=52;break;case 47:if(!this._forceVP9){Qn.next=52;break}if(vs=this._mediasoupDevice.rtpCapabilities.codecs.find(function(so){return so.mimeType.toLowerCase()==="video/vp9"})){Qn.next=52;break}throw(no=this._videosdkLogs)===null||no===void 0||no.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 52:return this._useSharingSimulcast&&(ms=this._mediasoupDevice.rtpCapabilities.codecs.find(function(so){return so.kind==="video"}),xs=this._forceVP9&&vs||ms.mimeType.toLowerCase()==="video/vp9"?Hs:Us.map(function(so){return Tn(Tn({},so),{},{dtx:!0})})),(ns=this._openTelemetry)===null||ns===void 0||ns.completeSpan({span:Gs,status:1,message:"Producer Configuration Generated"}),Gs=(ss=this._openTelemetry)===null||ss===void 0?void 0:ss.trace({spanName:"Creating Share Producer",span:ur}),Qn.next=57,this._sendTransport.produce({track:nn,encodings:xs,codecOptions:Fs,codec:vs,appData:{share:!0}});case 57:if(this._shareProducer=Qn.sent,Ds=mr({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),Or.dispatch(Ds),this._eventEmitter.emit(Ds.type,Ds.payload),this._shareProducer.on("transportclose",function(){var so,Io=hr(Js._shareProducer.id);Or.dispatch(Io),Js._eventEmitter.emit(Io.type,Io.payload),(so=Js._shareProducer)===null||so===void 0||so.close(),Js._shareProducer=null}),this._shareProducer.on("trackended",function(){var so;(so=Js._openTelemetry)===null||so===void 0||so.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:ur,status:2}),Or.dispatch(Mn({type:"error",text:"Share disconnected!"})),Js.disableShare().catch(function(){})}),(Kr=this._openTelemetry)===null||Kr===void 0||Kr.completeSpan({span:Gs,status:1,message:"Share Producer Created"}),!Nn){Qn.next=84;break}return Qn.prev=65,Xs={opusStereo:1,opusDtx:1},Gs=($o=this._openTelemetry)===null||$o===void 0?void 0:$o.trace({spanName:"Creating Share Audio Producer",span:ur}),Qn.next=70,this._sendTransport.produce({track:Nn,codecOptions:Xs,appData:{share:!0}});case 70:this._shareAudioProducer=Qn.sent,So=mr({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),Or.dispatch(So),this._eventEmitter.emit(So.type,So.payload),this._shareAudioProducer.on("transportclose",function(){var so,Io=hr(Js._shareAudioProducer.id);Or.dispatch(Io),Js._eventEmitter.emit(Io.type,Io.payload),(so=Js._shareAudioProducer)===null||so===void 0||so.close(),Js._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var so;(so=Js._openTelemetry)===null||so===void 0||so.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:ur,status:2}),Or.dispatch(Mn({type:"error",text:"Share disconnected!"}))}),(jo=this._openTelemetry)===null||jo===void 0||jo.completeSpan({span:Gs,status:1,message:"Share Audio Producer Created"}),Qn.next=84;break;case 79:return Qn.prev=79,Qn.t1=Qn.catch(65),Qn.next=83,this._protoo.request("produceError",{mediaType:"shareAudio",message:Qn.t1.message});case 83:(Co=this._videosdkLogs)===null||Co===void 0||Co.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Qn.t1.message}});case 84:(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:ur,status:1,message:"Enable Share Successful"}),Qn.next=98;break;case 87:return Qn.prev=87,Qn.t2=Qn.catch(11),tn.error("enableShare() | failed:%o",Qn.t2),(io=this._openTelemetry)===null||io===void 0||io.completeSpan({span:ur,status:2,attributes:{error:Qn.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",Qn.t2.message),(po=this._videosdkLogs)===null||po===void 0||po.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:Qn.t2.message}}),Qn.t2.name!=="NotAllowedError"&&Or.dispatch(Mn({type:"error",text:"Error sharing: ".concat(Qn.t2)})),Qn.next=96,this._protoo.request("produceError",{mediaType:"share",message:Qn.t2.message});case 96:nn&&nn.stop(),Nn&&Nn.stop();case 98:Or.dispatch(Fr(!1));case 99:case"end":return Qn.stop()}},Pr,this,[[11,87],[19,25],[65,79]])})),function(){return Pl.apply(this,arguments)})},{key:"disableShare",value:(Xo=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn;return vt().wrap(function(gs){for(;;)switch(gs.prev=gs.next){case 0:if(tn.debug("disableShare()"),yr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){gs.next=5;break}return(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:yr,status:2,message:"Share Producer Not found"}),gs.abrupt("return");case 5:return nn=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"Closing Share Producer",span:yr,status:1}),this._shareProducer.close(),Nn=hr(this._shareProducer.id),Or.dispatch(Nn),this._eventEmitter.emit(Nn.type,Nn.payload),this._shareAudioProducer&&(ns=(jn=this._openTelemetry)===null||jn===void 0?void 0:jn.trace({spanName:"Closing Share Audio Producer",span:yr,status:1}),this._shareAudioProducer.close(),Nn=hr(this._shareAudioProducer.id),Or.dispatch(Nn),this._eventEmitter.emit(Nn.type,Nn.payload),(ts=this._openTelemetry)===null||ts===void 0||ts.completeSpan({span:ns,status:1,message:"Closed Share Audio Producer"})),gs.prev=11,gs.next=14,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){gs.next=17;break}return gs.next=17,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(ss=this._openTelemetry)===null||ss===void 0||ss.completeSpan({span:nn,status:1,message:"Requested Server to Close Producer"}),gs.next=25;break;case 20:gs.prev=20,gs.t0=gs.catch(11),Or.dispatch(Mn({type:"error",text:"Error closing server-side share Producer: ".concat(gs.t0)})),(Kr=this._openTelemetry)===null||Kr===void 0||Kr.completeSpan({span:yr,status:2,message:"Error closing server-side share Producer ".concat(gs.t0)}),(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:gs.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({span:yr,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return gs.stop()}},Pr,this,[[11,20]])})),function(){return Xo.apply(this,arguments)})},{key:"enableAudioOnly",value:(mp=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:tn.debug("enableAudioOnly()"),Or.dispatch(fr(!0)),this.disableWebcam(),cr=Ar(this._consumers.values()),yr.prev=4,cr.s();case 6:if((sr=cr.n()).done){yr.next=13;break}if((ur=sr.value).kind==="video"){yr.next=10;break}return yr.abrupt("continue",11);case 10:this._pauseConsumer(ur);case 11:yr.next=6;break;case 13:yr.next=18;break;case 15:yr.prev=15,yr.t0=yr.catch(4),cr.e(yr.t0);case 18:return yr.prev=18,cr.f(),yr.finish(18);case 21:Or.dispatch(dr(!0)),Or.dispatch(fr(!1));case 23:case"end":return yr.stop()}},Pr,this,[[4,15,18,21]])})),function(){return mp.apply(this,arguments)})},{key:"disableAudioOnly",value:(fp=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:tn.debug("disableAudioOnly()"),Or.dispatch(fr(!0)),!this._webcamProducer&&this._produce&&(zt()||{}).webcamEnabled&&this.enableWebcam(),cr=Ar(this._consumers.values()),yr.prev=4,cr.s();case 6:if((sr=cr.n()).done){yr.next=13;break}if((ur=sr.value).kind==="video"){yr.next=10;break}return yr.abrupt("continue",11);case 10:this._resumeConsumer(ur);case 11:yr.next=6;break;case 13:yr.next=18;break;case 15:yr.prev=15,yr.t0=yr.catch(4),cr.e(yr.t0);case 18:return yr.prev=18,cr.f(),yr.finish(18);case 21:Or.dispatch(dr(!1)),Or.dispatch(fr(!1));case 23:case"end":return yr.stop()}},Pr,this,[[4,15,18,21]])})),function(){return fp.apply(this,arguments)})},{key:"muteAudio",value:(Ql=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:tn.debug("muteAudio()"),Or.dispatch(Sr(!0));case 2:case"end":return cr.stop()}},Pr)})),function(){return Ql.apply(this,arguments)})},{key:"unmuteAudio",value:($p=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:tn.debug("unmuteAudio()"),Or.dispatch(Sr(!1));case 2:case"end":return cr.stop()}},Pr)})),function(){return $p.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(lo=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn,Nn,jn,ts;return vt().wrap(function(ns){for(;;)switch(ns.prev=ns.next){case 0:return yr=cr.iceParameters,Jr=cr.transportId,nn=cr.internalSpan,Jr===((sr=this._sendTransport)===null||sr===void 0?void 0:sr.id)&&this._sendTransport.restartIce({iceParameters:yr}),Jr===((ur=this._recvTransport)===null||ur===void 0?void 0:ur.id)&&this._recvTransport.restartIce({iceParameters:yr}),ns.prev=3,ns.next=6,this._protoo.request("iceRestarted",{transportId:Jr});case 6:(Nn=this._openTelemetry)===null||Nn===void 0||Nn.completeSpan({span:nn,status:1,message:"iceRestarted"}),ns.next=14;break;case 9:ns.prev=9,ns.t0=ns.catch(3),(jn=this._openTelemetry)===null||jn===void 0||jn.completeSpan({span:nn,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(ns.t0)}),(ts=this._videosdkLogs)===null||ts===void 0||ts.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:ns.t0.message}}),Or.dispatch(Mn({type:"error",text:"ICE restart failed: ".concat(ns.t0)}));case 14:case"end":return ns.stop()}},Pr,this,[[3,9]])})),function(Pr){return lo.apply(this,arguments)})},{key:"restartIce",value:(Zu=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(tn.debug("restartIce()"),Or.dispatch(vr(!0)),yr.prev=2,!this._sendTransport){yr.next=9;break}return yr.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return cr=yr.sent,yr.next=9,this._sendTransport.restartIce({iceParameters:cr});case 9:if(!this._recvTransport){yr.next=15;break}return yr.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return sr=yr.sent,yr.next=15,this._recvTransport.restartIce({iceParameters:sr});case 15:Or.dispatch(Mn({text:"ICE restarted"})),yr.next=23;break;case 18:yr.prev=18,yr.t0=yr.catch(2),tn.error("restartIce() | failed:%o",yr.t0),Or.dispatch(Mn({type:"error",text:"ICE restart failed: ".concat(yr.t0)})),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:yr.t0.message}});case 23:Or.dispatch(vr(!1));case 24:case"end":return yr.stop()}},Pr,this,[[2,18]])})),function(){return Zu.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(Yl=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(tn.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",cr),ur.prev=1,!this._webcamProducer){ur.next=7;break}return ur.next=5,this._webcamProducer.setMaxSpatialLayer(cr);case 5:ur.next=10;break;case 7:if(!this._shareProducer){ur.next=10;break}return ur.next=10,this._shareProducer.setMaxSpatialLayer(cr);case 10:ur.next=17;break;case 12:ur.prev=12,ur.t0=ur.catch(1),tn.error("setMaxSendingSpatialLayer() | failed:%o",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error setting max sending video spatial layer: ".concat(ur.t0)}));case 17:case"end":return ur.stop()}},Pr,this,[[1,12]])})),function(Pr){return Yl.apply(this,arguments)})},{key:"setWebcamQuality",value:(zo=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(this._webcamProducer){yr.next=2;break}return yr.abrupt("return");case 2:if(sr=this._webcam.resolution,ur=ds[sr][cr].s,this._webcamProducer.maxSpatialLayer!=ur){yr.next=6;break}return yr.abrupt("return");case 6:return yr.next=8,this._webcamProducer.setMaxSpatialLayer(ur);case 8:case"end":return yr.stop()}},Pr,this)})),function(Pr){return zo.apply(this,arguments)})},{key:"setConsumerQuality",value:(Tp=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur,yr,Jr,nn,Nn,jn,ts;return vt().wrap(function(ns){for(;;)switch(ns.prev=ns.next){case 0:return nn=this._webcam.resolution,Nn=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:'Setting "'.concat(sr,'" Quality')}),jn=ds[nn][sr].s,ts=ds[nn][sr].t,(yr=this._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Nn,attributes:{spatialLayers:JSON.parse(jn),temporalLayers:JSON.parse(ts)},status:1}),ns.next=7,this.setConsumerPreferredLayers(cr,jn,ts);case 7:(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({message:"Done",span:Nn,status:1});case 8:case"end":return ns.stop()}},Pr,this)})),function(Pr,cr){return Tp.apply(this,arguments)})},{key:"setViewPort",value:(Ks=(0,ft.Z)(vt().mark(function Pr(cr,sr,ur){var yr,Jr,nn,Nn;return vt().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:if(this._consumers.get(cr.id)){jn.next=2;break}return jn.abrupt("return");case 2:if(yr=fn(this._consumers.get(cr.id),sr,ur),Jr=yr.consumerId,nn=yr.newPreferredSpatialLayer,Nn=yr.newPreferredTemporalLayer,!Jr){jn.next=6;break}return jn.next=6,this.setConsumerPreferredLayers(Jr,nn,Nn);case 6:case"end":return jn.stop()}},Pr,this)})),function(Pr,cr,sr){return Ks.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Sl=(0,ft.Z)(vt().mark(function Pr(cr,sr,ur){var yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return tn.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",cr,sr,ur),nn.prev=1,(yr=this._consumers.get(cr)).spatialLayers>1&&(yr.preferredSpatialLayer=sr,yr.preferredTemporalLayer=ur),nn.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:cr,spatialLayer:sr,temporalLayer:ur});case 6:Or.dispatch(zr(cr,sr,ur)),nn.next=14;break;case 9:nn.prev=9,nn.t0=nn.catch(1),tn.error("setConsumerPreferredLayers() | failed:%o",nn.t0),(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:nn.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error setting Consumer preferred layers: ".concat(nn.t0)}));case 14:case"end":return nn.stop()}},Pr,this,[[1,9]])})),function(Pr,cr,sr){return Sl.apply(this,arguments)})},{key:"setConsumerPriority",value:(xu=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return tn.debug("setConsumerPriority() [consumerId:%s, priority:%d]",cr,sr),yr.prev=1,yr.next=4,this._protoo.request("setConsumerPriority",{consumerId:cr,priority:sr});case 4:Or.dispatch(ln(cr,sr)),yr.next=12;break;case 7:yr.prev=7,yr.t0=yr.catch(1),tn.error("setConsumerPriority() | failed:%o",yr.t0),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:yr.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error setting Consumer priority: ".concat(yr.t0)}));case 12:case"end":return yr.stop()}},Pr,this,[[1,7]])})),function(Pr,cr){return xu.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(Yo=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return tn.debug("requestConsumerKeyFrame() [consumerId:%s]",cr),ur.prev=1,ur.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:cr});case 4:Or.dispatch(Mn({text:"Keyframe requested for video consumer"})),ur.next=12;break;case 7:ur.prev=7,ur.t0=ur.catch(1),tn.error("requestConsumerKeyFrame() | failed:%o",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error requesting key frame for Consumer: ".concat(ur.t0)}));case 12:case"end":return ur.stop()}},Pr,this,[[1,7]])})),function(Pr){return Yo.apply(this,arguments)})},{key:"enableChatDataProducer",value:(iu=(0,ft.Z)(vt().mark(function Pr(){var cr,sr=this;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(tn.debug("enableChatDataProducer()"),this._useDataChannel){ur.next=3;break}return ur.abrupt("return");case 3:return ur.prev=3,ur.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=ur.sent,Or.dispatch(Ir({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){sr._chatDataProducer=null}),this._chatDataProducer.on("open",function(){tn.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){tn.error('chat DataProducer "close" event'),sr._chatDataProducer=null,Or.dispatch(Mn({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(yr){tn.error('chat DataProducer "error" event:%o',yr),Or.dispatch(Mn({type:"error",text:"Chat DataProducer error: ".concat(yr)}))}),this._chatDataProducer.on("bufferedamountlow",function(){tn.debug('chat DataProducer "bufferedamountlow" event')}),ur.next=21;break;case 15:throw ur.prev=15,ur.t0=ur.catch(3),tn.error("enableChatDataProducer() | failed:%o",ur.t0),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error enabling chat DataProducer: ".concat(ur.t0)})),ur.t0;case 21:case"end":return ur.stop()}},Pr,this,[[3,15]])})),function(){return iu.apply(this,arguments)})},{key:"enableBotDataProducer",value:(sm=(0,ft.Z)(vt().mark(function Pr(){var cr,sr=this;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(tn.debug("enableBotDataProducer()"),this._useDataChannel){ur.next=3;break}return ur.abrupt("return");case 3:return ur.prev=3,ur.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=ur.sent,Or.dispatch(Ir({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){sr._botDataProducer=null}),this._botDataProducer.on("open",function(){tn.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){tn.error('bot DataProducer "close" event'),sr._botDataProducer=null,Or.dispatch(Mn({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(yr){tn.error('bot DataProducer "error" event:%o',yr),Or.dispatch(Mn({type:"error",text:"Bot DataProducer error: ".concat(yr)}))}),this._botDataProducer.on("bufferedamountlow",function(){tn.debug('bot DataProducer "bufferedamountlow" event')}),ur.next=21;break;case 15:throw ur.prev=15,ur.t0=ur.catch(3),tn.error("enableBotDataProducer() | failed:%o",ur.t0),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error enabling bot DataProducer: ".concat(ur.t0)})),ur.t0;case 21:case"end":return ur.stop()}},Pr,this,[[3,15]])})),function(){return sm.apply(this,arguments)})},{key:"sendChatMessage",value:(xl=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug('sendChatMessage() [text:"%s]',cr),this._chatDataProducer){sr.next=4;break}return Or.dispatch(Mn({type:"error",text:"No chat DataProducer"})),sr.abrupt("return");case 4:try{this._chatDataProducer.send(cr)}catch(ur){tn.error("chat DataProducer.send() failed:%o",ur),Or.dispatch(Mn({type:"error",text:"chat DataProducer.send() failed: ".concat(ur)}))}case 5:case"end":return sr.stop()}},Pr,this)})),function(Pr){return xl.apply(this,arguments)})},{key:"sendBotMessage",value:(Np=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug('sendBotMessage() [text:"%s]',cr),this._botDataProducer){sr.next=4;break}return Or.dispatch(Mn({type:"error",text:"No bot DataProducer"})),sr.abrupt("return");case 4:try{this._botDataProducer.send(cr)}catch(ur){tn.error("bot DataProducer.send() failed:%o",ur),Or.dispatch(Mn({type:"error",text:"bot DataProducer.send() failed: ".concat(ur)}))}case 5:case"end":return sr.stop()}},Pr,this)})),function(Pr){return Np.apply(this,arguments)})},{key:"changeDisplayName",value:(Sm=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return tn.debug('changeDisplayName() [displayName:"%s"]',cr),Ut({displayName:cr}),sr.prev=2,sr.next=5,this._protoo.request("changeDisplayName",{displayName:cr});case 5:this._displayName=cr,Or.dispatch(tr(cr)),Or.dispatch(Mn({text:"Display name changed"})),sr.next=15;break;case 10:sr.prev=10,sr.t0=sr.catch(2),tn.error("changeDisplayName() | failed: %o",sr.t0),Or.dispatch(Mn({type:"error",text:"Could not change display name: ".concat(sr.t0)})),Or.dispatch(tr());case 15:case"end":return sr.stop()}},Pr,this,[[2,10]])})),function(Pr){return Sm.apply(this,arguments)})},{key:"openConnection",value:(qp=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return sr=cr.roomId,ur=cr.payload,yr.next=3,this._protoo.request("openConnection",{roomId:sr,payload:ur}).catch(function(Jr){throw new Error(Jr)});case 3:case"end":return yr.stop()}},Pr,this)})),function(Pr){return qp.apply(this,arguments)})},{key:"closeConnection",value:(xm=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return sr.next=2,this._protoo.request("closeConnection",{roomId:cr});case 2:case"end":return sr.stop()}},Pr,this)})),function(Pr){return xm.apply(this,arguments)})},{key:"switchTo",value:(Lu=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr;return vt().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:return sr=cr.roomId,ur=cr.peerIds,yr=cr.payload,Jr.next=3,this._protoo.request("requestSwitchRoom",{roomId:sr,peerIds:ur,payload:yr});case 3:case"end":return Jr.stop()}},Pr,this)})),function(Pr){return Lu.apply(this,arguments)})},{key:"switchPeerRoom",value:(Mo=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return sr=cr.peerId,ur=cr.roomId,yr=cr.payload,Jr=cr.token,nn.next=3,this._protoo.request("switchPeerRoom",{roomId:ur,peerId:sr,payload:yr,token:Jr});case 3:case"end":return nn.stop()}},Pr,this)})),function(Pr){return Mo.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Ml=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr,nn;return vt().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return sr=cr.roomId,ur=cr.connectionRoomId,yr=cr.peerId,Jr=cr.payload,nn=cr.token,Nn.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:sr,connectionRoomId:ur,peerId:yr,payload:Jr,token:nn});case 3:case"end":return Nn.stop()}},Pr,this)})),function(Pr){return Ml.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(Qs=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return sr=cr.roomId,ur=cr.message,yr.next=3,this._protoo.request("connectionSendChatMessage",{roomId:sr,message:ur});case 3:case"end":return yr.stop()}},Pr,this)})),function(Pr){return Qs.apply(this,arguments)})},{key:"connectionEndMeeting",value:(Jn=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return sr=cr.roomId,ur.next=3,this._protoo.request("connectionCloseRoom",{roomId:sr});case 3:case"end":return ur.stop()}},Pr,this)})),function(Pr){return Jn.apply(this,arguments)})},{key:"pubsubPublish",value:(Dr=(0,ft.Z)(vt().mark(function Pr(cr,sr,ur,yr){var Jr,nn,Nn,jn,ts,ns;return vt().wrap(function(ss){for(;;)switch(ss.prev=ss.next){case 0:if(ss.prev=0,ur!=null&&ur.sendOnly){if(Jr=ur.sendOnly,nn=[],Jr){Nn=Ar(Jr);try{for(Nn.s();!(jn=Nn.n()).done;)(ts=jn.value)&&nn.push(ts.toString())}catch(Kr){Nn.e(Kr)}finally{Nn.f()}}ur.sendOnly=nn}return ss.next=4,this._protoo.request("pubsubPublish",{topic:cr,message:sr,options:ur,payload:yr});case 4:ss.next=10;break;case 6:ss.prev=6,ss.t0=ss.catch(0),(ns=this._videosdkLogs)===null||ns===void 0||ns.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:ss.t0.message}}),tn.error("pubsubPublish() | failed: %o",ss.t0);case 10:case"end":return ss.stop()}},Pr,this,[[0,6]])})),function(Pr,cr,sr,ur){return Dr.apply(this,arguments)})},{key:"pubsubSubscribe",value:(ws=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur;return vt().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return yr.prev=0,yr.next=3,this._protoo.request("pubsubSubscribe",{topic:cr});case 3:return sr=yr.sent,yr.abrupt("return",sr);case 7:yr.prev=7,yr.t0=yr.catch(0),(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:yr.t0.message}}),tn.error("pubsubSubscribe() | failed: %o",yr.t0);case 11:case"end":return yr.stop()}},Pr,this,[[0,7]])})),function(Pr){return ws.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(xo=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return ur.prev=0,ur.next=3,this._protoo.request("pubsubUnsubscribe",{topic:cr});case 3:ur.next=9;break;case 5:ur.prev=5,ur.t0=ur.catch(0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:ur.t0.message}}),tn.error("pubsubUnsubscribe() | failed: %o",ur.t0);case 9:case"end":return ur.stop()}},Pr,this,[[0,5]])})),function(Pr){return xo.apply(this,arguments)})},{key:"closeRoom",value:(Rp=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return cr.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return cr.stop()}},Pr,this)})),function(){return Rp.apply(this,arguments)})},{key:"removePeer",value:(pp=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if((sr=this._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Removing peer ".concat(cr),status:1}),cr!=null){ur.next=3;break}return ur.abrupt("return");case 3:return ur.next=5,this._protoo.request("removePeer",{peerId:cr});case 5:case"end":return ur.stop()}},Pr,this)})),function(Pr){return pp.apply(this,arguments)})},{key:"startPingPong",value:(Xu=(0,ft.Z)(vt().mark(function Pr(){var cr=this;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:this._pingWebsocketInterval!=null&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval(function(){cr.pingWebSocket()},2e3);case 2:case"end":return sr.stop()}},Pr,this)})),function(){return Xu.apply(this,arguments)})},{key:"pingWebSocket",value:(Ku=(0,ft.Z)(vt().mark(function Pr(){var cr,sr=this;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(!this._closed){ur.next=2;break}return ur.abrupt("return");case 2:cr=!1,this._protoo.request("ping").then(function(yr){yr&&(cr=!0)}).catch(function(yr){}),setTimeout(function(){cr?(!sr._isWebsocketAlive||sr._pingWebsocketFailedCounter>1?(sr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),sr._isWebsocketAlive=!0,sr._pingWebsocketFailedCounter=0,sr.restartIce()):sr._transportState!="failed"&&sr._transportState!="disconnected"||(console.log("Calling Restart Ice based on transport state",sr._transportState),sr.restartIce()),sr._pingWebsocketFailedCounter=0):(sr._isWebsocketAlive&&sr._pingWebsocketFailedCounter>1&&(sr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),sr._isWebsocketAlive=!1,sr.startInternetPingPong()),sr._pingWebsocketFailedCounter=sr._pingWebsocketFailedCounter+1)},1e3);case 5:case"end":return ur.stop()}},Pr,this)})),function(){return Ku.apply(this,arguments)})},{key:"startInternetPingPong",value:(qu=(0,ft.Z)(vt().mark(function Pr(){var cr=this;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:this._pingInternetInterval!=null&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval(function(){cr.pingInternet()},2e3);case 2:case"end":return sr.stop()}},Pr,this)})),function(){return qu.apply(this,arguments)})},{key:"pingInternet",value:(wp=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn=this;return vt().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:if(!this._closed){jn.next=2;break}return jn.abrupt("return");case 2:return(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"pinging internet",logType:"INFO"}),sr=new AbortController,ur=sr.signal,yr=setTimeout(function(){sr.abort()},1e3),jn.next=8,fetch("https://".concat(this._signalingBaseUrl,"/ping"),{method:"GET",signal:ur}).then(function(ts){return clearTimeout(yr),ts.text()}).catch(function(ts){var ns;return(ns=Nn._videosdkLogs)===null||ns===void 0||ns.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:ts.message}}),"failed"});case 8:if(jn.sent!="pong"){jn.next=19;break}if((Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){jn.next=17;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),(nn=this._videosdkLogs)===null||nn===void 0||nn.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),jn.next=17,this.join();case 17:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,this._pingInternetInterval!=null&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 19:case"end":return jn.stop()}},Pr,this)})),function(){return wp.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(hp=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getSendTransportRemoteStats()"),this._sendTransport){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return cr.stop()}},Pr,this)})),function(){return hp.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Iu=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getRecvTransportRemoteStats()"),this._recvTransport){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return cr.stop()}},Pr,this)})),function(){return Iu.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Ul=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getAudioRemoteStats()"),this._micProducer){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._latestStats[this._micProducer.id]);case 4:case"end":return cr.stop()}},Pr,this)})),function(){return Ul.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Ol=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getVideoRemoteStats()"),cr=this._webcamProducer){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",this._latestStats[cr.id]);case 5:case"end":return sr.stop()}},Pr,this)})),function(){return Ol.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Cl=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getVideoRemoteStats()"),cr=this._shareProducer){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",this._latestStats[cr.id]);case 5:case"end":return sr.stop()}},Pr,this)})),function(){return Cl.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Dl=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(tn.debug("getConsumerRemoteStats()"),sr=this._consumers.get(cr)){ur.next=4;break}return ur.abrupt("return");case 4:return this._latestStats[cr]&&(this._latestStats[cr][0].currentSpatialLayer=sr.currentSpatialLayer,this._latestStats[cr][0].currentTemporalLayer=sr.currentTemporalLayer,this._latestStats[cr][0].preferredSpatialLayer=sr.preferredSpatialLayer,this._latestStats[cr][0].preferredTemporalLayer=sr.preferredTemporalLayer),ur.abrupt("return",this._latestStats[cr]);case 6:case"end":return ur.stop()}},Pr,this)})),function(Pr){return Dl.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Bl=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getChatDataProducerRemoteStats()"),cr=this._chatDataProducer){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:cr.id}));case 5:case"end":return sr.stop()}},Pr,this)})),function(){return Bl.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(Tl=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getBotDataProducerRemoteStats()"),cr=this._botDataProducer){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:cr.id}));case 5:case"end":return sr.stop()}},Pr,this)})),function(){return Tl.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(ko=(0,ft.Z)(vt().mark(function Pr(cr){return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(cr)){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:cr}));case 5:case"end":return sr.stop()}},Pr,this)})),function(Pr){return ko.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Ko=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getSendTransportLocalStats()"),this._sendTransport){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._sendTransport.getStats());case 4:case"end":return cr.stop()}},Pr,this)})),function(){return Ko.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(yo=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getRecvTransportLocalStats()"),this._recvTransport){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._recvTransport.getStats());case 4:case"end":return cr.stop()}},Pr,this)})),function(){return yo.apply(this,arguments)})},{key:"getAudioLocalStats",value:(Vo=(0,ft.Z)(vt().mark(function Pr(){return vt().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(tn.debug("getAudioLocalStats()"),this._micProducer){cr.next=3;break}return cr.abrupt("return");case 3:return cr.abrupt("return",this._micProducer.getStats());case 4:case"end":return cr.stop()}},Pr,this)})),function(){return Vo.apply(this,arguments)})},{key:"getVideoLocalStats",value:(Uo=(0,ft.Z)(vt().mark(function Pr(){var cr;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(tn.debug("getVideoLocalStats()"),cr=this._webcamProducer||this._shareProducer){sr.next=4;break}return sr.abrupt("return");case 4:return sr.abrupt("return",cr.getStats());case 5:case"end":return sr.stop()}},Pr,this)})),function(){return Uo.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Ns=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(sr=this._consumers.get(cr)){ur.next=3;break}return ur.abrupt("return");case 3:return ur.abrupt("return",sr.getStats());case 4:case"end":return ur.stop()}},Pr,this)})),function(Pr){return Ns.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(As=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr,Jr;return vt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return sr=cr.uplink,ur=cr.downlink,yr=cr.rtt,Jr=cr.secret,tn.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",sr,ur,yr),nn.prev=2,nn.next=5,this._protoo.request("applyNetworkThrottle",{uplink:sr,downlink:ur,rtt:yr,secret:Jr});case 5:nn.next=11;break;case 7:nn.prev=7,nn.t0=nn.catch(2),tn.error("applyNetworkThrottle() | failed:%o",nn.t0),Or.dispatch(Mn({type:"error",text:"Error applying network throttle: ".concat(nn.t0)}));case 11:case"end":return nn.stop()}},Pr,this,[[2,7]])})),function(Pr){return As.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(oo=(0,ft.Z)(vt().mark(function Pr(cr){var sr,ur,yr;return vt().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:return sr=cr.silent,ur=sr!==void 0&&sr,yr=cr.secret,tn.debug("resetNetworkThrottle()"),Jr.prev=2,Jr.next=5,this._protoo.request("resetNetworkThrottle",{secret:yr});case 5:Jr.next=10;break;case 7:Jr.prev=7,Jr.t0=Jr.catch(2),ur||(tn.error("resetNetworkThrottle() | failed:%o",Jr.t0),Or.dispatch(Mn({type:"error",text:"Error resetting network throttle: ".concat(Jr.t0)})));case 10:case"end":return Jr.stop()}},Pr,this,[[2,7]])})),function(Pr){return oo.apply(this,arguments)})},{key:"createProducerTransport",value:(Ps=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn=this;return vt().wrap(function(gs){for(;;)switch(gs.prev=gs.next){case 0:Jr=cr.id,nn=cr.iceParameters,Nn=cr.iceCandidates,jn=cr.dtlsParameters,ts=cr.sctpParameters,ns=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:"Creating Send Transport",span:sr||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:Jr,iceParameters:nn,iceCandidates:Nn,dtlsParameters:jn,sctpParameters:ts,iceServers:this._iceServers}),this._sendTransport.on("connect",function(Ts,Sn,fs){var rs,js=Ts.dtlsParameters;(rs=dn._openTelemetry)===null||rs===void 0||rs.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:ns,status:1}),dn._protoo.request("connectWebRtcTransport",{transportId:dn._sendTransport.id,dtlsParameters:js}).then(Sn).catch(fs)}),this._sendTransport.on("produce",function(){var Ts=(0,ft.Z)(vt().mark(function Sn(fs,rs,js){var Gs,xs,vs,Fs,Zs,no,ms;return vt().wrap(function(Ds){for(;;)switch(Ds.prev=Ds.next){case 0:return Gs=fs.kind,xs=fs.rtpParameters,vs=fs.appData,Ds.prev=1,(Fs=dn._openTelemetry)===null||Fs===void 0||Fs.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:ns,status:1}),Ds.next=5,dn._protoo.request("produce",{transportId:dn._sendTransport.id,kind:Gs,rtpParameters:xs,appData:vs});case 5:Zs=Ds.sent,no=Zs.id,rs({id:no}),Ds.next=14;break;case 10:Ds.prev=10,Ds.t0=Ds.catch(1),(ms=dn._videosdkLogs)===null||ms===void 0||ms.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:Ds.t0.message}}),js(Ds.t0);case 14:case"end":return Ds.stop()}},Sn,null,[[1,10]])}));return function(Sn,fs,rs){return Ts.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var Ts=(0,ft.Z)(vt().mark(function Sn(fs,rs,js){var Gs,xs,vs,Fs,Zs,no,ms;return vt().wrap(function(Ds){for(;;)switch(Ds.prev=Ds.next){case 0:return Gs=fs.sctpStreamParameters,xs=fs.label,vs=fs.protocol,Fs=fs.appData,tn.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',Gs,Fs),Ds.prev=2,Ds.next=5,dn._protoo.request("produceData",{transportId:dn._sendTransport.id,sctpStreamParameters:Gs,label:xs,protocol:vs,appData:Fs});case 5:Zs=Ds.sent,no=Zs.id,rs({id:no}),Ds.next=14;break;case 10:Ds.prev=10,Ds.t0=Ds.catch(2),(ms=dn._videosdkLogs)===null||ms===void 0||ms.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:Ds.t0.message}}),js(Ds.t0);case 14:case"end":return Ds.stop()}},Sn,null,[[2,10]])}));return function(Sn,fs,rs){return Ts.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(Ts){var Sn;(Sn=dn._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ts),span:ns,status:1}),Ts==="failed"&&dn.restartIce(),dn._transportState=Ts}),ss=0,(Kr=this._metrics.addNewProbe(this._sendTransport,"sendTransport")).onStatsCollected=function(Ts){try{var Sn,fs,rs,js;dn._stats.producerStats||(dn._stats.producerStats={}),dn._stats.producerStats.audio||(dn._stats.producerStats.audio=[]),dn._stats.producerStats.shareAudio||(dn._stats.producerStats.shareAudio=[]),dn._micProducer&&(dn._latestStats[(Sn=dn._micProducer)===null||Sn===void 0?void 0:Sn.id]=[]),dn._shareAudioProducer&&(dn._latestStats[(fs=dn._shareAudioProducer)===null||fs===void 0?void 0:fs.id]=[]),Ts.audio.forEach(function(xs){var vs,Fs,Zs;if(dn._micProducer&&xs.trackId==((vs=dn._micProducer)===null||vs===void 0?void 0:vs.track.id))dn._latestStats[(Zs=dn._micProducer)===null||Zs===void 0?void 0:Zs.id].push(xs),ss%5==0&&dn._stats.producerStats.audio.push(xs);else if(dn._shareAudioProducer&&xs.trackId==((Fs=dn._shareAudioProducer)===null||Fs===void 0?void 0:Fs.track.id)){var no;dn._latestStats[(no=dn._shareAudioProducer)===null||no===void 0?void 0:no.id].push(xs),ss%5==0&&dn._stats.producerStats.shareAudio.push(xs)}}),dn._stats.producerStats.video||(dn._stats.producerStats.video=[]),dn._stats.producerStats.share||(dn._stats.producerStats.share=[]),dn._webcamProducer&&(dn._latestStats[(rs=dn._webcamProducer)===null||rs===void 0?void 0:rs.id]=[]),dn._shareProducer&&(dn._latestStats[(js=dn._shareProducer)===null||js===void 0?void 0:js.id]=[]),Ts.video.forEach(function(xs){var vs,Fs,Zs;if(dn._webcamProducer&&xs.trackId==((vs=dn._webcamProducer)===null||vs===void 0?void 0:vs.track.id))dn._latestStats[(Zs=dn._webcamProducer)===null||Zs===void 0?void 0:Zs.id].push(xs);else if(dn._shareProducer&&xs.trackId==((Fs=dn._shareProducer)===null||Fs===void 0?void 0:Fs.track.id)){var no;dn._latestStats[(no=dn._shareProducer)===null||no===void 0?void 0:no.id].push(xs)}}),ss%5==0&&dn._webcamProducer!=null&&dn._stats.producerStats.video.push({timestamp:new Date,stats:dn._latestStats[dn._webcamProducer.id]}),ss%5==0&&dn._shareProducer!=null&&dn._stats.producerStats.share.push({timestamp:new Date,stats:dn._latestStats[dn._shareProducer.id]}),ss++}catch(xs){var Gs;(Gs=dn._videosdkLogs)===null||Gs===void 0||Gs.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:xs.message}}),console.log("PRODUCER ERROR",xs)}},Kr.start(),this._sendTransport.observer.on("close",function(){Kr.stop(),dn._metrics.removeExistingProbe(Kr)}),(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({span:ns,status:1,message:"Send Transport Created Successfully"});case 13:case"end":return gs.stop()}},Pr,this)})),function(Pr,cr){return Ps.apply(this,arguments)})},{key:"createConsumerTransport",value:(ks=(0,ft.Z)(vt().mark(function Pr(cr,sr){var ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn=this;return vt().wrap(function(gs){for(;;)switch(gs.prev=gs.next){case 0:Jr=cr.id,nn=cr.iceParameters,Nn=cr.iceCandidates,jn=cr.dtlsParameters,ts=cr.sctpParameters,ns=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:"Creating Recieve Transport",span:sr||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Jr,iceParameters:nn,iceCandidates:Nn,dtlsParameters:jn,sctpParameters:ts,iceServers:this._iceServers}),this._recvTransport.on("connect",function(Ts,Sn,fs){var rs,js=Ts.dtlsParameters;(rs=dn._openTelemetry)===null||rs===void 0||rs.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:ns,status:1}),dn._protoo.request("connectWebRtcTransport",{transportId:dn._recvTransport.id,dtlsParameters:js}).then(Sn).catch(fs)}),this._recvTransport.on("connectionstatechange",function(Ts){var Sn;(Sn=dn._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ts),span:ns,status:1}),Ts==="failed"&&dn.restartIce(),dn._transportState=Ts}),ss=0,(Kr=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(Ts){try{Ts.audio.forEach(function(fs){var rs=dn._consumers.get(fs.trackId);if(rs!=null){var js=rs.appData.share==1?rs.kind=="audio"?"shareAudio":"share":rs.kind;dn._stats.consumerStats||(dn._stats.consumerStats={}),dn._stats.consumerStats[rs.appData.peerId]||(dn._stats.consumerStats[rs.appData.peerId]={}),dn._stats.consumerStats[rs.appData.peerId][js]||(dn._stats.consumerStats[rs.appData.peerId][js]=[]),fs.trackId==rs.id&&(dn._latestStats[rs.id]=[],dn._latestStats[rs.id].push(fs),ss%5==0&&dn._stats.consumerStats[rs.appData.peerId][js].push(fs))}}),Ts.video.forEach(function(fs){var rs=dn._consumers.get(fs.trackId);if(rs!=null){var js=rs.appData.share==1?rs.kind=="audio"?"shareAudio":"share":rs.kind;dn._stats.consumerStats||(dn._stats.consumerStats={}),dn._stats.consumerStats[rs.appData.peerId]||(dn._stats.consumerStats[rs.appData.peerId]={}),dn._stats.consumerStats[rs.appData.peerId][js]||(dn._stats.consumerStats[rs.appData.peerId][js]=[]),fs.trackId==rs.id&&(dn._latestStats[rs.id]=[],dn._latestStats[rs.id].push(fs),ss%5==0&&dn._stats.consumerStats[rs.appData.peerId][js].push(fs))}}),ss++}catch(fs){var Sn;(Sn=dn._videosdkLogs)===null||Sn===void 0||Sn.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:fs.message}}),console.log("CONSUMER CATCH",fs)}},Kr.start(),this._recvTransport.observer.on("close",function(){Kr.stop(),dn._metrics.removeExistingProbe(Kr)}),(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({span:ns,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return gs.stop()}},Pr,this)})),function(Pr,cr){return ks.apply(this,arguments)})},{key:"joinRoom",value:(cs=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr,dn,gs,Ts,Sn,fs,rs,js,Gs,xs,vs,Fs,Zs,no;return vt().wrap(function(ms){for(;;)switch(ms.prev=ms.next){case 0:return tn.debug("joinRoom()"),ms.prev=1,Nn=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Et.Device({handlerName:this._handlerName}),ms.next=6,this._protoo.request("getRouterRtpCapabilities");case 6:return jn=ms.sent,ms.next=9,this._mediasoupDevice.load({routerRtpCapabilities:jn});case 9:if((sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:Nn,status:1,attributes:{routerRtpCapabilities:JSON.stringify(jn).toString()},message:"Router Capabilities Loaded"}),!this._produce){ms.next=15;break}return ms.next=13,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 13:ts=ms.sent,this.createProducerTransport(ts,this._joinSpan);case 15:if(!this._consume){ms.next=20;break}return ms.next=18,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 18:ns=ms.sent,this.createConsumerTransport(ns,this._joinSpan);case 20:return ms.next=22,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(ur=this._mediasoupDevice)===null||ur===void 0?void 0:ur.rtpCapabilities,sctpCapabilities:(yr=this._mediasoupDevice)===null||yr===void 0?void 0:yr.sctpCapabilities,deviceInfo:this._deviceInfo,autoConsume:this._autoConsume,metaData:this._metaData});case 22:ss=ms.sent,Kr=ss.peers,dn=ss.poll,gs=ss.messages,Or.dispatch(Gt("connected")),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:Kr,poll:dn,messages:gs,baseUrl:this._baseUrl}),Or.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Or.dispatch(Mn({text:"You are in the room!",timeout:3e3})),Ts=Ar(Kr);try{for(Ts.s();!(Sn=Ts.n()).done;)fs=Sn.value,rs=$r(Tn(Tn({},fs),{},{consumers:[],dataConsumers:[]})),Or.dispatch(rs),this._eventEmitter.emit(rs.type,rs.payload)}catch(Ds){Ts.e(Ds)}finally{Ts.f()}this._produce&&(Or.dispatch(or({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((js=this._openTelemetry)===null||js===void 0||js.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Ds){Ds.stop()})),Gs=zt(),this._webcamEnabled&&(!Gs||Gs.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((xs=this._openTelemetry)===null||xs===void 0||xs.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Ds){Ds.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(vs=Or.getState(),Fs=vs.me,Or.dispatch(Xt(Fs.id))),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),ms.next=45;break;case 38:ms.prev=38,ms.t0=ms.catch(1),tn.error("joinRoom() failed:%o",ms.t0),(Zs=this._videosdkLogs)===null||Zs===void 0||Zs.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:ms.t0.message}}),(no=this._openTelemetry)===null||no===void 0||no.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(ms.t0)}),Or.dispatch(Mn({type:"error",text:"Could not join the room: ".concat(ms.t0)})),this.close({sendLeft:!0});case 45:case"end":return ms.stop()}},Pr,this,[[1,38]])})),function(){return cs.apply(this,arguments)})},{key:"_updateMics",value:(Os=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr=arguments;return vt().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return ur=Kr.length>0&&Kr[0]!==void 0?Kr[0]:void 0,this._mics=new Map,tn.debug("_updateMics() |"),dn.next=5,navigator.mediaDevices.enumerateDevices();case 5:yr=dn.sent,Jr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"_updateMics() Calling for Getting System Mic list",attributes:{systemDevice:yr?JSON.stringify(yr):"Device not found"},span:ur||null}),nn=Ar(yr);try{for(nn.s();!(Nn=nn.n()).done;)(jn=Nn.value).kind=="audioinput"&&this._mics.set(jn.deviceId,jn)}catch(gs){nn.e(gs)}finally{nn.f()}ts=Array.from(this._mics.values()),ns=ts.length,ss=this._mic.device?this._mic.device.deviceId:void 0,ns===0?this._mic.device=null:this._mics.has(ss)||(this._mic.device=ts[0]),(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:Jr,status:1,message:"Update Mic"});case 14:case"end":return dn.stop()}},Pr,this)})),function(){return Os.apply(this,arguments)})},{key:"_updateWebcams",value:($n=(0,ft.Z)(vt().mark(function Pr(){var cr,sr,ur,yr,Jr,nn,Nn,jn,ts,ns,ss,Kr=arguments;return vt().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return ur=Kr.length>0&&Kr[0]!==void 0?Kr[0]:void 0,tn.debug("_updateWebcams()"),this._webcams=new Map,tn.debug("_updateWebcams() | calling enumerateDevices()"),dn.next=6,navigator.mediaDevices.enumerateDevices();case 6:yr=dn.sent,Jr=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",attributes:{systemDevice:yr?JSON.stringify(yr):"Device not found"},span:ur||null}),nn=Ar(yr),dn.prev=9,nn.s();case 11:if((Nn=nn.n()).done){dn.next=18;break}if((jn=Nn.value).kind==="videoinput"){dn.next=15;break}return dn.abrupt("continue",16);case 15:this._webcams.set(jn.deviceId,jn);case 16:dn.next=11;break;case 18:dn.next=23;break;case 20:dn.prev=20,dn.t0=dn.catch(9),nn.e(dn.t0);case 23:return dn.prev=23,nn.f(),dn.finish(23);case 26:ts=Array.from(this._webcams.values()),ns=ts.length,(ss=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=ss),tn.debug("_updateWebcams() [webcams:%o]",ts),ns===0?this._webcam.device=null:this._webcams.has(ss)||(this._webcam.device=ts[this._defaultCameraIndex]),(sr=this._openTelemetry)===null||sr===void 0||sr.completeSpan({span:Jr,status:1,message:"Update Webcam"}),Or.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1});case 34:case"end":return dn.stop()}},Pr,this,[[9,20,23,26]])})),function(){return $n.apply(this,arguments)})},{key:"_getWebcamType",value:function(Pr){return/(back|rear)/i.test(Pr.label)?(tn.debug("_getWebcamType() | it seems to be a back camera"),"back"):(tn.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(Dn=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(!cr.paused){ur.next=2;break}return ur.abrupt("return");case 2:return ur.prev=2,ur.next=5,this._protoo.request("pauseConsumer",{consumerId:cr.id});case 5:cr.pause(),Or.dispatch(pr(cr.id,"local")),ur.next=14;break;case 9:ur.prev=9,ur.t0=ur.catch(2),tn.error("_pauseConsumer() | failed:%o",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error pausing Consumer: ".concat(ur.t0)}));case 14:case"end":return ur.stop()}},Pr,this,[[2,9]])})),function(Pr){return Dn.apply(this,arguments)})},{key:"_resumeConsumer",value:(Un=(0,ft.Z)(vt().mark(function Pr(cr){var sr;return vt().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(cr.paused){ur.next=2;break}return ur.abrupt("return");case 2:return ur.prev=2,ur.next=5,this._protoo.request("resumeConsumer",{consumerId:cr.id});case 5:cr.resume(),Or.dispatch(Vr(cr.id,"local")),ur.next=14;break;case 9:ur.prev=9,ur.t0=ur.catch(2),tn.error("_resumeConsumer() | failed:%o",ur.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:ur.t0.message}}),Or.dispatch(Mn({type:"error",text:"Error resuming Consumer: ".concat(ur.t0)}));case 14:case"end":return ur.stop()}},Pr,this,[[2,9]])})),function(Pr){return Un.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Rn=(0,ft.Z)(vt().mark(function Pr(){var cr=this;return vt().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(!this._externalVideoStream){sr.next=2;break}return sr.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){sr.next=5;break}return sr.next=5,new Promise(function(ur){return cr._externalVideo.addEventListener("canplay",ur)});case 5:if(!this._externalVideo.captureStream){sr.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),sr.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){sr.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),sr.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return sr.abrupt("return",this._externalVideoStream);case 15:case"end":return sr.stop()}},Pr,this)})),function(){return Rn.apply(this,arguments)})},{key:"_emitError",value:function(Pr){this._eventEmitter.emit("ERROR",Pr)}}],[{key:"init",value:function(Pr){Or=Pr.store}}]),mn}()},1206:function(ut){ut.exports=function(dt){var ht={};function pt(ft){if(ht[ft])return ht[ft].exports;var mt=ht[ft]={i:ft,l:!1,exports:{}};return dt[ft].call(mt.exports,mt,mt.exports,pt),mt.l=!0,mt.exports}return pt.m=dt,pt.c=ht,pt.d=function(ft,mt,gt){pt.o(ft,mt)||Object.defineProperty(ft,mt,{enumerable:!0,get:gt})},pt.r=function(ft){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ft,"__esModule",{value:!0})},pt.t=function(ft,mt){if(1&mt&&(ft=pt(ft)),8&mt||4&mt&&typeof ft=="object"&&ft&&ft.__esModule)return ft;var gt=Object.create(null);if(pt.r(gt),Object.defineProperty(gt,"default",{enumerable:!0,value:ft}),2&mt&&typeof ft!="string")for(var xt in ft)pt.d(gt,xt,(function(yt){return ft[yt]}).bind(null,xt));return gt},pt.n=function(ft){var mt=ft&&ft.__esModule?function(){return ft.default}:function(){return ft};return pt.d(mt,"a",mt),mt},pt.o=function(ft,mt){return Object.prototype.hasOwnProperty.call(ft,mt)},pt.p="",pt(pt.s=90)}({17:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft=pt(18),mt=function(){function gt(){}return gt.getFirstMatch=function(xt,yt){var vt=yt.match(xt);return vt&&vt.length>0&&vt[1]||""},gt.getSecondMatch=function(xt,yt){var vt=yt.match(xt);return vt&&vt.length>1&&vt[2]||""},gt.matchAndReturnConst=function(xt,yt,vt){if(xt.test(yt))return vt},gt.getWindowsVersionName=function(xt){switch(xt){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},gt.getMacOSVersionName=function(xt){var yt=xt.split(".").splice(0,2).map(function(vt){return parseInt(vt,10)||0});if(yt.push(0),yt[0]===10)switch(yt[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},gt.getAndroidVersionName=function(xt){var yt=xt.split(".").splice(0,2).map(function(vt){return parseInt(vt,10)||0});if(yt.push(0),!(yt[0]===1&&yt[1]<5))return yt[0]===1&&yt[1]<6?"Cupcake":yt[0]===1&&yt[1]>=6?"Donut":yt[0]===2&&yt[1]<2?"Eclair":yt[0]===2&&yt[1]===2?"Froyo":yt[0]===2&&yt[1]>2?"Gingerbread":yt[0]===3?"Honeycomb":yt[0]===4&&yt[1]<1?"Ice Cream Sandwich":yt[0]===4&&yt[1]<4?"Jelly Bean":yt[0]===4&&yt[1]>=4?"KitKat":yt[0]===5?"Lollipop":yt[0]===6?"Marshmallow":yt[0]===7?"Nougat":yt[0]===8?"Oreo":yt[0]===9?"Pie":void 0},gt.getVersionPrecision=function(xt){return xt.split(".").length},gt.compareVersions=function(xt,yt,vt){vt===void 0&&(vt=!1);var St=gt.getVersionPrecision(xt),Et=gt.getVersionPrecision(yt),wt=Math.max(St,Et),Rt=0,Tt=gt.map([xt,yt],function(It){var At=wt-gt.getVersionPrecision(It),Dt=It+new Array(At+1).join(".0");return gt.map(Dt.split("."),function(jt){return new Array(20-jt.length).join("0")+jt}).reverse()});for(vt&&(Rt=wt-Math.min(St,Et)),wt-=1;wt>=Rt;){if(Tt[0][wt]>Tt[1][wt])return 1;if(Tt[0][wt]===Tt[1][wt]){if(wt===Rt)return 0;wt-=1}else if(Tt[0][wt]<Tt[1][wt])return-1}},gt.map=function(xt,yt){var vt,St=[];if(Array.prototype.map)return Array.prototype.map.call(xt,yt);for(vt=0;vt<xt.length;vt+=1)St.push(yt(xt[vt]));return St},gt.find=function(xt,yt){var vt,St;if(Array.prototype.find)return Array.prototype.find.call(xt,yt);for(vt=0,St=xt.length;vt<St;vt+=1){var Et=xt[vt];if(yt(Et,vt))return Et}},gt.assign=function(xt){for(var yt,vt,St=xt,Et=arguments.length,wt=new Array(Et>1?Et-1:0),Rt=1;Rt<Et;Rt++)wt[Rt-1]=arguments[Rt];if(Object.assign)return Object.assign.apply(Object,[xt].concat(wt));var Tt=function(){var It=wt[yt];typeof It=="object"&&It!==null&&Object.keys(It).forEach(function(At){St[At]=It[At]})};for(yt=0,vt=wt.length;yt<vt;yt+=1)Tt();return xt},gt.getBrowserAlias=function(xt){return ft.BROWSER_ALIASES_MAP[xt]},gt.getBrowserTypeByAlias=function(xt){return ft.BROWSER_MAP[xt]||""},gt}();ht.default=mt,dt.exports=ht.default},18:function(dt,ht,pt){ht.__esModule=!0,ht.ENGINE_MAP=ht.OS_MAP=ht.PLATFORMS_MAP=ht.BROWSER_MAP=ht.BROWSER_ALIASES_MAP=void 0,ht.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ht.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ht.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ht.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ht.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft,mt=(ft=pt(91))&&ft.__esModule?ft:{default:ft},gt=pt(18);function xt(vt,St){for(var Et=0;Et<St.length;Et++){var wt=St[Et];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(vt,wt.key,wt)}}var yt=function(){function vt(){}var St,Et,wt;return vt.getParser=function(Rt,Tt){if(Tt===void 0&&(Tt=!1),typeof Rt!="string")throw new Error("UserAgent should be a string");return new mt.default(Rt,Tt)},vt.parse=function(Rt){return new mt.default(Rt).getResult()},St=vt,wt=[{key:"BROWSER_MAP",get:function(){return gt.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return gt.ENGINE_MAP}},{key:"OS_MAP",get:function(){return gt.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return gt.PLATFORMS_MAP}}],(Et=null)&&xt(St.prototype,Et),wt&&xt(St,wt),vt}();ht.default=yt,dt.exports=ht.default},91:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft=vt(pt(92)),mt=vt(pt(93)),gt=vt(pt(94)),xt=vt(pt(95)),yt=vt(pt(17));function vt(Et){return Et&&Et.__esModule?Et:{default:Et}}var St=function(){function Et(Rt,Tt){if(Tt===void 0&&(Tt=!1),Rt==null||Rt==="")throw new Error("UserAgent parameter can't be empty");this._ua=Rt,this.parsedResult={},Tt!==!0&&this.parse()}var wt=Et.prototype;return wt.getUA=function(){return this._ua},wt.test=function(Rt){return Rt.test(this._ua)},wt.parseBrowser=function(){var Rt=this;this.parsedResult.browser={};var Tt=yt.default.find(ft.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.browser=Tt.describe(this.getUA())),this.parsedResult.browser},wt.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},wt.getBrowserName=function(Rt){return Rt?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},wt.getBrowserVersion=function(){return this.getBrowser().version},wt.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},wt.parseOS=function(){var Rt=this;this.parsedResult.os={};var Tt=yt.default.find(mt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.os=Tt.describe(this.getUA())),this.parsedResult.os},wt.getOSName=function(Rt){var Tt=this.getOS().name;return Rt?String(Tt).toLowerCase()||"":Tt||""},wt.getOSVersion=function(){return this.getOS().version},wt.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},wt.getPlatformType=function(Rt){Rt===void 0&&(Rt=!1);var Tt=this.getPlatform().type;return Rt?String(Tt).toLowerCase()||"":Tt||""},wt.parsePlatform=function(){var Rt=this;this.parsedResult.platform={};var Tt=yt.default.find(gt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.platform=Tt.describe(this.getUA())),this.parsedResult.platform},wt.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},wt.getEngineName=function(Rt){return Rt?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},wt.parseEngine=function(){var Rt=this;this.parsedResult.engine={};var Tt=yt.default.find(xt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.engine=Tt.describe(this.getUA())),this.parsedResult.engine},wt.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},wt.getResult=function(){return yt.default.assign({},this.parsedResult)},wt.satisfies=function(Rt){var Tt=this,It={},At=0,Dt={},jt=0;if(Object.keys(Rt).forEach(function(Ut){var zt=Rt[Ut];typeof zt=="string"?(Dt[Ut]=zt,jt+=1):typeof zt=="object"&&(It[Ut]=zt,At+=1)}),At>0){var Ft=Object.keys(It),Lt=yt.default.find(Ft,function(Ut){return Tt.isOS(Ut)});if(Lt){var Pt=this.satisfies(It[Lt]);if(Pt!==void 0)return Pt}var Ot=yt.default.find(Ft,function(Ut){return Tt.isPlatform(Ut)});if(Ot){var Nt=this.satisfies(It[Ot]);if(Nt!==void 0)return Nt}}if(jt>0){var $t=Object.keys(Dt),Vt=yt.default.find($t,function(Ut){return Tt.isBrowser(Ut,!0)});if(Vt!==void 0)return this.compareVersion(Dt[Vt])}},wt.isBrowser=function(Rt,Tt){Tt===void 0&&(Tt=!1);var It=this.getBrowserName().toLowerCase(),At=Rt.toLowerCase(),Dt=yt.default.getBrowserTypeByAlias(At);return Tt&&Dt&&(At=Dt.toLowerCase()),At===It},wt.compareVersion=function(Rt){var Tt=[0],It=Rt,At=!1,Dt=this.getBrowserVersion();if(typeof Dt=="string")return Rt[0]===">"||Rt[0]==="<"?(It=Rt.substr(1),Rt[1]==="="?(At=!0,It=Rt.substr(2)):Tt=[],Rt[0]===">"?Tt.push(1):Tt.push(-1)):Rt[0]==="="?It=Rt.substr(1):Rt[0]==="~"&&(At=!0,It=Rt.substr(1)),Tt.indexOf(yt.default.compareVersions(Dt,It,At))>-1},wt.isOS=function(Rt){return this.getOSName(!0)===String(Rt).toLowerCase()},wt.isPlatform=function(Rt){return this.getPlatformType(!0)===String(Rt).toLowerCase()},wt.isEngine=function(Rt){return this.getEngineName(!0)===String(Rt).toLowerCase()},wt.is=function(Rt,Tt){return Tt===void 0&&(Tt=!1),this.isBrowser(Rt,Tt)||this.isOS(Rt)||this.isPlatform(Rt)},wt.some=function(Rt){var Tt=this;return Rt===void 0&&(Rt=[]),Rt.some(function(It){return Tt.is(It)})},Et}();ht.default=St,dt.exports=ht.default},92:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft,mt=(ft=pt(17))&&ft.__esModule?ft:{default:ft},gt=/version\/(\d+(\.?_?\d+)+)/i,xt=[{test:[/googlebot/i],describe:function(yt){var vt={name:"Googlebot"},St=mt.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/opera/i],describe:function(yt){var vt={name:"Opera"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/opr\/|opios/i],describe:function(yt){var vt={name:"Opera"},St=mt.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/SamsungBrowser/i],describe:function(yt){var vt={name:"Samsung Internet for Android"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/Whale/i],describe:function(yt){var vt={name:"NAVER Whale Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/MZBrowser/i],describe:function(yt){var vt={name:"MZ Browser"},St=mt.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/focus/i],describe:function(yt){var vt={name:"Focus"},St=mt.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/swing/i],describe:function(yt){var vt={name:"Swing"},St=mt.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/coast/i],describe:function(yt){var vt={name:"Opera Coast"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(yt){var vt={name:"Opera Touch"},St=mt.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/yabrowser/i],describe:function(yt){var vt={name:"Yandex Browser"},St=mt.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/ucbrowser/i],describe:function(yt){var vt={name:"UC Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/Maxthon|mxios/i],describe:function(yt){var vt={name:"Maxthon"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/epiphany/i],describe:function(yt){var vt={name:"Epiphany"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/puffin/i],describe:function(yt){var vt={name:"Puffin"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/sleipnir/i],describe:function(yt){var vt={name:"Sleipnir"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/k-meleon/i],describe:function(yt){var vt={name:"K-Meleon"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/micromessenger/i],describe:function(yt){var vt={name:"WeChat"},St=mt.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/qqbrowser/i],describe:function(yt){var vt={name:/qqbrowserlite/i.test(yt)?"QQ Browser Lite":"QQ Browser"},St=mt.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/msie|trident/i],describe:function(yt){var vt={name:"Internet Explorer"},St=mt.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/\sedg\//i],describe:function(yt){var vt={name:"Microsoft Edge"},St=mt.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/edg([ea]|ios)/i],describe:function(yt){var vt={name:"Microsoft Edge"},St=mt.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/vivaldi/i],describe:function(yt){var vt={name:"Vivaldi"},St=mt.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/seamonkey/i],describe:function(yt){var vt={name:"SeaMonkey"},St=mt.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/sailfish/i],describe:function(yt){var vt={name:"Sailfish"},St=mt.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,yt);return St&&(vt.version=St),vt}},{test:[/silk/i],describe:function(yt){var vt={name:"Amazon Silk"},St=mt.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/phantom/i],describe:function(yt){var vt={name:"PhantomJS"},St=mt.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/slimerjs/i],describe:function(yt){var vt={name:"SlimerJS"},St=mt.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(yt){var vt={name:"BlackBerry"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/(web|hpw)[o0]s/i],describe:function(yt){var vt={name:"WebOS Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/bada/i],describe:function(yt){var vt={name:"Bada"},St=mt.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/tizen/i],describe:function(yt){var vt={name:"Tizen"},St=mt.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/qupzilla/i],describe:function(yt){var vt={name:"QupZilla"},St=mt.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/firefox|iceweasel|fxios/i],describe:function(yt){var vt={name:"Firefox"},St=mt.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/electron/i],describe:function(yt){var vt={name:"Electron"},St=mt.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/MiuiBrowser/i],describe:function(yt){var vt={name:"Miui"},St=mt.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/chromium/i],describe:function(yt){var vt={name:"Chromium"},St=mt.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/chrome|crios|crmo/i],describe:function(yt){var vt={name:"Chrome"},St=mt.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/GSA/i],describe:function(yt){var vt={name:"Google Search"},St=mt.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){var vt=!yt.test(/like android/i),St=yt.test(/android/i);return vt&&St},describe:function(yt){var vt={name:"Android Browser"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/playstation 4/i],describe:function(yt){var vt={name:"PlayStation 4"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/safari|applewebkit/i],describe:function(yt){var vt={name:"Safari"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/.*/i],describe:function(yt){var vt=yt.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:mt.default.getFirstMatch(vt,yt),version:mt.default.getSecondMatch(vt,yt)}}}];ht.default=xt,dt.exports=ht.default},93:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft,mt=(ft=pt(17))&&ft.__esModule?ft:{default:ft},gt=pt(18),xt=[{test:[/Roku\/DVP/],describe:function(yt){var vt=mt.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,yt);return{name:gt.OS_MAP.Roku,version:vt}}},{test:[/windows phone/i],describe:function(yt){var vt=mt.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.WindowsPhone,version:vt}}},{test:[/windows /i],describe:function(yt){var vt=mt.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,yt),St=mt.default.getWindowsVersionName(vt);return{name:gt.OS_MAP.Windows,version:vt,versionName:St}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(yt){var vt={name:gt.OS_MAP.iOS},St=mt.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,yt);return St&&(vt.version=St),vt}},{test:[/macintosh/i],describe:function(yt){var vt=mt.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,yt).replace(/[_\s]/g,"."),St=mt.default.getMacOSVersionName(vt),Et={name:gt.OS_MAP.MacOS,version:vt};return St&&(Et.versionName=St),Et}},{test:[/(ipod|iphone|ipad)/i],describe:function(yt){var vt=mt.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,yt).replace(/[_\s]/g,".");return{name:gt.OS_MAP.iOS,version:vt}}},{test:function(yt){var vt=!yt.test(/like android/i),St=yt.test(/android/i);return vt&&St},describe:function(yt){var vt=mt.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,yt),St=mt.default.getAndroidVersionName(vt),Et={name:gt.OS_MAP.Android,version:vt};return St&&(Et.versionName=St),Et}},{test:[/(web|hpw)[o0]s/i],describe:function(yt){var vt=mt.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,yt),St={name:gt.OS_MAP.WebOS};return vt&&vt.length&&(St.version=vt),St}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(yt){var vt=mt.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,yt)||mt.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,yt)||mt.default.getFirstMatch(/\bbb(\d+)/i,yt);return{name:gt.OS_MAP.BlackBerry,version:vt}}},{test:[/bada/i],describe:function(yt){var vt=mt.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.Bada,version:vt}}},{test:[/tizen/i],describe:function(yt){var vt=mt.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.Tizen,version:vt}}},{test:[/linux/i],describe:function(){return{name:gt.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:gt.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(yt){var vt=mt.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.PlayStation4,version:vt}}}];ht.default=xt,dt.exports=ht.default},94:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft,mt=(ft=pt(17))&&ft.__esModule?ft:{default:ft},gt=pt(18),xt=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(yt){var vt=mt.default.getFirstMatch(/(can-l01)/i,yt)&&"Nova",St={type:gt.PLATFORMS_MAP.mobile,vendor:"Huawei"};return vt&&(St.model=vt),St}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet}}},{test:function(yt){var vt=yt.test(/ipod|iphone/i),St=yt.test(/like (ipod|iphone)/i);return vt&&!St},describe:function(yt){var vt=mt.default.getFirstMatch(/(ipod|iphone)/i,yt);return{type:gt.PLATFORMS_MAP.mobile,vendor:"Apple",model:vt}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getBrowserName(!0)==="blackberry"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(yt){return yt.getBrowserName(!0)==="bada"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getBrowserName()==="windows phone"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(yt){var vt=Number(String(yt.getOSVersion()).split(".")[0]);return yt.getOSName(!0)==="android"&&vt>=3},describe:function(){return{type:gt.PLATFORMS_MAP.tablet}}},{test:function(yt){return yt.getOSName(!0)==="android"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getOSName(!0)==="macos"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(yt){return yt.getOSName(!0)==="windows"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop}}},{test:function(yt){return yt.getOSName(!0)==="linux"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop}}},{test:function(yt){return yt.getOSName(!0)==="playstation 4"},describe:function(){return{type:gt.PLATFORMS_MAP.tv}}},{test:function(yt){return yt.getOSName(!0)==="roku"},describe:function(){return{type:gt.PLATFORMS_MAP.tv}}}];ht.default=xt,dt.exports=ht.default},95:function(dt,ht,pt){ht.__esModule=!0,ht.default=void 0;var ft,mt=(ft=pt(17))&&ft.__esModule?ft:{default:ft},gt=pt(18),xt=[{test:function(yt){return yt.getBrowserName(!0)==="microsoft edge"},describe:function(yt){if(/\sedg\//i.test(yt))return{name:gt.ENGINE_MAP.Blink};var vt=mt.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,yt);return{name:gt.ENGINE_MAP.EdgeHTML,version:vt}}},{test:[/trident/i],describe:function(yt){var vt={name:gt.ENGINE_MAP.Trident},St=mt.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){return yt.test(/presto/i)},describe:function(yt){var vt={name:gt.ENGINE_MAP.Presto},St=mt.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){var vt=yt.test(/gecko/i),St=yt.test(/like gecko/i);return vt&&!St},describe:function(yt){var vt={name:gt.ENGINE_MAP.Gecko},St=mt.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:gt.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(yt){var vt={name:gt.ENGINE_MAP.WebKit},St=mt.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}}];ht.default=xt,dt.exports=ht.default}})},452:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib.BlockCipher,gt=ft.algo,xt=[],yt=[],vt=[],St=[],Et=[],wt=[],Rt=[],Tt=[],It=[],At=[];(function(){for(var Ft=[],Lt=0;Lt<256;Lt++)Ft[Lt]=Lt<128?Lt<<1:Lt<<1^283;var Pt=0,Ot=0;for(Lt=0;Lt<256;Lt++){var Nt=Ot^Ot<<1^Ot<<2^Ot<<3^Ot<<4;Nt=Nt>>>8^255&Nt^99,xt[Pt]=Nt,yt[Nt]=Pt;var $t=Ft[Pt],Vt=Ft[$t],Ut=Ft[Vt],zt=257*Ft[Nt]^16843008*Nt;vt[Pt]=zt<<24|zt>>>8,St[Pt]=zt<<16|zt>>>16,Et[Pt]=zt<<8|zt>>>24,wt[Pt]=zt,zt=16843009*Ut^65537*Vt^257*$t^16843008*Pt,Rt[Nt]=zt<<24|zt>>>8,Tt[Nt]=zt<<16|zt>>>16,It[Nt]=zt<<8|zt>>>24,At[Nt]=zt,Pt?(Pt=$t^Ft[Ft[Ft[Ut^$t]]],Ot^=Ft[Ft[Ot]]):Pt=Ot=1}})();var Dt=[0,1,2,4,8,16,32,64,128,27,54],jt=gt.AES=mt.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Ft=this._keyPriorReset=this._key,Lt=Ft.words,Pt=Ft.sigBytes/4,Ot=4*((this._nRounds=Pt+6)+1),Nt=this._keySchedule=[],$t=0;$t<Ot;$t++)$t<Pt?Nt[$t]=Lt[$t]:(zt=Nt[$t-1],$t%Pt?Pt>6&&$t%Pt==4&&(zt=xt[zt>>>24]<<24|xt[zt>>>16&255]<<16|xt[zt>>>8&255]<<8|xt[255&zt]):(zt=xt[(zt=zt<<8|zt>>>24)>>>24]<<24|xt[zt>>>16&255]<<16|xt[zt>>>8&255]<<8|xt[255&zt],zt^=Dt[$t/Pt|0]<<24),Nt[$t]=Nt[$t-Pt]^zt);for(var Vt=this._invKeySchedule=[],Ut=0;Ut<Ot;Ut++){if($t=Ot-Ut,Ut%4)var zt=Nt[$t];else zt=Nt[$t-4];Vt[Ut]=Ut<4||$t<=4?zt:Rt[xt[zt>>>24]]^Tt[xt[zt>>>16&255]]^It[xt[zt>>>8&255]]^At[xt[255&zt]]}}},encryptBlock:function(Ft,Lt){this._doCryptBlock(Ft,Lt,this._keySchedule,vt,St,Et,wt,xt)},decryptBlock:function(Ft,Lt){var Pt=Ft[Lt+1];Ft[Lt+1]=Ft[Lt+3],Ft[Lt+3]=Pt,this._doCryptBlock(Ft,Lt,this._invKeySchedule,Rt,Tt,It,At,yt),Pt=Ft[Lt+1],Ft[Lt+1]=Ft[Lt+3],Ft[Lt+3]=Pt},_doCryptBlock:function(Ft,Lt,Pt,Ot,Nt,$t,Vt,Ut){for(var zt=this._nRounds,Bt=Ft[Lt]^Pt[0],Ht=Ft[Lt+1]^Pt[1],Gt=Ft[Lt+2]^Pt[2],Kt=Ft[Lt+3]^Pt[3],Xt=4,or=1;or<zt;or++){var tr=Ot[Bt>>>24]^Nt[Ht>>>16&255]^$t[Gt>>>8&255]^Vt[255&Kt]^Pt[Xt++],dr=Ot[Ht>>>24]^Nt[Gt>>>16&255]^$t[Kt>>>8&255]^Vt[255&Bt]^Pt[Xt++],fr=Ot[Gt>>>24]^Nt[Kt>>>16&255]^$t[Bt>>>8&255]^Vt[255&Ht]^Pt[Xt++],Sr=Ot[Kt>>>24]^Nt[Bt>>>16&255]^$t[Ht>>>8&255]^Vt[255&Gt]^Pt[Xt++];Bt=tr,Ht=dr,Gt=fr,Kt=Sr}tr=(Ut[Bt>>>24]<<24|Ut[Ht>>>16&255]<<16|Ut[Gt>>>8&255]<<8|Ut[255&Kt])^Pt[Xt++],dr=(Ut[Ht>>>24]<<24|Ut[Gt>>>16&255]<<16|Ut[Kt>>>8&255]<<8|Ut[255&Bt])^Pt[Xt++],fr=(Ut[Gt>>>24]<<24|Ut[Kt>>>16&255]<<16|Ut[Bt>>>8&255]<<8|Ut[255&Ht])^Pt[Xt++],Sr=(Ut[Kt>>>24]<<24|Ut[Bt>>>16&255]<<16|Ut[Ht>>>8&255]<<8|Ut[255&Gt])^Pt[Xt++],Ft[Lt]=tr,Ft[Lt+1]=dr,Ft[Lt+2]=fr,Ft[Lt+3]=Sr},keySize:8});ft.AES=mt._createHelper(jt)}(),pt.AES)},7407:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib.BlockCipher,gt=ft.algo;const xt=16,yt=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],vt=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var St={pbox:[],sbox:[]};function Et(At,Dt){let jt=Dt>>24&255,Ft=Dt>>16&255,Lt=Dt>>8&255,Pt=255&Dt,Ot=At.sbox[0][jt]+At.sbox[1][Ft];return Ot^=At.sbox[2][Lt],Ot+=At.sbox[3][Pt],Ot}function wt(At,Dt,jt){let Ft,Lt=Dt,Pt=jt;for(let Ot=0;Ot<xt;++Ot)Lt^=At.pbox[Ot],Pt=Et(At,Lt)^Pt,Ft=Lt,Lt=Pt,Pt=Ft;return Ft=Lt,Lt=Pt,Pt=Ft,Pt^=At.pbox[xt],Lt^=At.pbox[xt+1],{left:Lt,right:Pt}}function Rt(At,Dt,jt){let Ft,Lt=Dt,Pt=jt;for(let Ot=xt+1;Ot>1;--Ot)Lt^=At.pbox[Ot],Pt=Et(At,Lt)^Pt,Ft=Lt,Lt=Pt,Pt=Ft;return Ft=Lt,Lt=Pt,Pt=Ft,Pt^=At.pbox[1],Lt^=At.pbox[0],{left:Lt,right:Pt}}function Tt(At,Dt,jt){for(let Nt=0;Nt<4;Nt++){At.sbox[Nt]=[];for(let $t=0;$t<256;$t++)At.sbox[Nt][$t]=vt[Nt][$t]}let Ft=0;for(let Nt=0;Nt<xt+2;Nt++)At.pbox[Nt]=yt[Nt]^Dt[Ft],Ft++,Ft>=jt&&(Ft=0);let Lt=0,Pt=0,Ot=0;for(let Nt=0;Nt<xt+2;Nt+=2)Ot=wt(At,Lt,Pt),Lt=Ot.left,Pt=Ot.right,At.pbox[Nt]=Lt,At.pbox[Nt+1]=Pt;for(let Nt=0;Nt<4;Nt++)for(let $t=0;$t<256;$t+=2)Ot=wt(At,Lt,Pt),Lt=Ot.left,Pt=Ot.right,At.sbox[Nt][$t]=Lt,At.sbox[Nt][$t+1]=Pt;return!0}var It=gt.Blowfish=mt.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var At=this._keyPriorReset=this._key,Dt=At.words,jt=At.sigBytes/4;Tt(St,Dt,jt)}},encryptBlock:function(At,Dt){var jt=wt(St,At[Dt],At[Dt+1]);At[Dt]=jt.left,At[Dt+1]=jt.right},decryptBlock:function(At,Dt){var jt=Rt(St,At[Dt],At[Dt+1]);At[Dt]=jt.left,At[Dt+1]=jt.right},blockSize:2,keySize:4,ivSize:2});ft.Blowfish=mt._createHelper(It)}(),pt.Blowfish)},5109:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(888),void(pt.lib.Cipher||function(ft){var mt=pt,gt=mt.lib,xt=gt.Base,yt=gt.WordArray,vt=gt.BufferedBlockAlgorithm,St=mt.enc,Et=(St.Utf8,St.Base64),wt=mt.algo.EvpKDF,Rt=gt.Cipher=vt.extend({cfg:xt.extend(),createEncryptor:function(Nt,$t){return this.create(this._ENC_XFORM_MODE,Nt,$t)},createDecryptor:function(Nt,$t){return this.create(this._DEC_XFORM_MODE,Nt,$t)},init:function(Nt,$t,Vt){this.cfg=this.cfg.extend(Vt),this._xformMode=Nt,this._key=$t,this.reset()},reset:function(){vt.reset.call(this),this._doReset()},process:function(Nt){return this._append(Nt),this._process()},finalize:function(Nt){return Nt&&this._append(Nt),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Nt($t){return typeof $t=="string"?Ot:Lt}return function($t){return{encrypt:function(Vt,Ut,zt){return Nt(Ut).encrypt($t,Vt,Ut,zt)},decrypt:function(Vt,Ut,zt){return Nt(Ut).decrypt($t,Vt,Ut,zt)}}}}()}),Tt=(gt.StreamCipher=Rt.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),mt.mode={}),It=gt.BlockCipherMode=xt.extend({createEncryptor:function(Nt,$t){return this.Encryptor.create(Nt,$t)},createDecryptor:function(Nt,$t){return this.Decryptor.create(Nt,$t)},init:function(Nt,$t){this._cipher=Nt,this._iv=$t}}),At=Tt.CBC=function(){var Nt=It.extend();function $t(Vt,Ut,zt){var Bt,Ht=this._iv;Ht?(Bt=Ht,this._iv=ft):Bt=this._prevBlock;for(var Gt=0;Gt<zt;Gt++)Vt[Ut+Gt]^=Bt[Gt]}return Nt.Encryptor=Nt.extend({processBlock:function(Vt,Ut){var zt=this._cipher,Bt=zt.blockSize;$t.call(this,Vt,Ut,Bt),zt.encryptBlock(Vt,Ut),this._prevBlock=Vt.slice(Ut,Ut+Bt)}}),Nt.Decryptor=Nt.extend({processBlock:function(Vt,Ut){var zt=this._cipher,Bt=zt.blockSize,Ht=Vt.slice(Ut,Ut+Bt);zt.decryptBlock(Vt,Ut),$t.call(this,Vt,Ut,Bt),this._prevBlock=Ht}}),Nt}(),Dt=(mt.pad={}).Pkcs7={pad:function(Nt,$t){for(var Vt=4*$t,Ut=Vt-Nt.sigBytes%Vt,zt=Ut<<24|Ut<<16|Ut<<8|Ut,Bt=[],Ht=0;Ht<Ut;Ht+=4)Bt.push(zt);var Gt=yt.create(Bt,Ut);Nt.concat(Gt)},unpad:function(Nt){var $t=255&Nt.words[Nt.sigBytes-1>>>2];Nt.sigBytes-=$t}},jt=(gt.BlockCipher=Rt.extend({cfg:Rt.cfg.extend({mode:At,padding:Dt}),reset:function(){var Nt;Rt.reset.call(this);var $t=this.cfg,Vt=$t.iv,Ut=$t.mode;this._xformMode==this._ENC_XFORM_MODE?Nt=Ut.createEncryptor:(Nt=Ut.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Nt?this._mode.init(this,Vt&&Vt.words):(this._mode=Nt.call(Ut,this,Vt&&Vt.words),this._mode.__creator=Nt)},_doProcessBlock:function(Nt,$t){this._mode.processBlock(Nt,$t)},_doFinalize:function(){var Nt,$t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?($t.pad(this._data,this.blockSize),Nt=this._process(!0)):(Nt=this._process(!0),$t.unpad(Nt)),Nt},blockSize:4}),gt.CipherParams=xt.extend({init:function(Nt){this.mixIn(Nt)},toString:function(Nt){return(Nt||this.formatter).stringify(this)}})),Ft=(mt.format={}).OpenSSL={stringify:function(Nt){var $t=Nt.ciphertext,Vt=Nt.salt;return(Vt?yt.create([1398893684,1701076831]).concat(Vt).concat($t):$t).toString(Et)},parse:function(Nt){var $t,Vt=Et.parse(Nt),Ut=Vt.words;return Ut[0]==1398893684&&Ut[1]==1701076831&&($t=yt.create(Ut.slice(2,4)),Ut.splice(0,4),Vt.sigBytes-=16),jt.create({ciphertext:Vt,salt:$t})}},Lt=gt.SerializableCipher=xt.extend({cfg:xt.extend({format:Ft}),encrypt:function(Nt,$t,Vt,Ut){Ut=this.cfg.extend(Ut);var zt=Nt.createEncryptor(Vt,Ut),Bt=zt.finalize($t),Ht=zt.cfg;return jt.create({ciphertext:Bt,key:Vt,iv:Ht.iv,algorithm:Nt,mode:Ht.mode,padding:Ht.padding,blockSize:Nt.blockSize,formatter:Ut.format})},decrypt:function(Nt,$t,Vt,Ut){return Ut=this.cfg.extend(Ut),$t=this._parse($t,Ut.format),Nt.createDecryptor(Vt,Ut).finalize($t.ciphertext)},_parse:function(Nt,$t){return typeof Nt=="string"?$t.parse(Nt,this):Nt}}),Pt=(mt.kdf={}).OpenSSL={execute:function(Nt,$t,Vt,Ut,zt){if(Ut||(Ut=yt.random(8)),zt)Bt=wt.create({keySize:$t+Vt,hasher:zt}).compute(Nt,Ut);else var Bt=wt.create({keySize:$t+Vt}).compute(Nt,Ut);var Ht=yt.create(Bt.words.slice($t),4*Vt);return Bt.sigBytes=4*$t,jt.create({key:Bt,iv:Ht,salt:Ut})}},Ot=gt.PasswordBasedCipher=Lt.extend({cfg:Lt.cfg.extend({kdf:Pt}),encrypt:function(Nt,$t,Vt,Ut){var zt=(Ut=this.cfg.extend(Ut)).kdf.execute(Vt,Nt.keySize,Nt.ivSize,Ut.salt,Ut.hasher);Ut.iv=zt.iv;var Bt=Lt.encrypt.call(this,Nt,$t,zt.key,Ut);return Bt.mixIn(zt),Bt},decrypt:function(Nt,$t,Vt,Ut){Ut=this.cfg.extend(Ut),$t=this._parse($t,Ut.format);var zt=Ut.kdf.execute(Vt,Nt.keySize,Nt.ivSize,$t.salt,Ut.hasher);return Ut.iv=zt.iv,Lt.decrypt.call(this,Nt,$t,zt.key,Ut)}})}()))},8249:function(ut,dt,ht){var pt;ut.exports=(pt=pt||function(ft,mt){var gt;if(typeof window<"u"&&window.crypto&&(gt=window.crypto),typeof self<"u"&&self.crypto&&(gt=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(gt=globalThis.crypto),!gt&&typeof window<"u"&&window.msCrypto&&(gt=window.msCrypto),!gt&&ht.g!==void 0&&ht.g.crypto&&(gt=ht.g.crypto),!gt)try{gt=ht(2480)}catch{}var xt=function(){if(gt){if(typeof gt.getRandomValues=="function")try{return gt.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof gt.randomBytes=="function")try{return gt.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},yt=Object.create||function(){function Ft(){}return function(Lt){var Pt;return Ft.prototype=Lt,Pt=new Ft,Ft.prototype=null,Pt}}(),vt={},St=vt.lib={},Et=St.Base={extend:function(Ft){var Lt=yt(this);return Ft&&Lt.mixIn(Ft),Lt.hasOwnProperty("init")&&this.init!==Lt.init||(Lt.init=function(){Lt.$super.init.apply(this,arguments)}),Lt.init.prototype=Lt,Lt.$super=this,Lt},create:function(){var Ft=this.extend();return Ft.init.apply(Ft,arguments),Ft},init:function(){},mixIn:function(Ft){for(var Lt in Ft)Ft.hasOwnProperty(Lt)&&(this[Lt]=Ft[Lt]);Ft.hasOwnProperty("toString")&&(this.toString=Ft.toString)},clone:function(){return this.init.prototype.extend(this)}},wt=St.WordArray=Et.extend({init:function(Ft,Lt){Ft=this.words=Ft||[],this.sigBytes=Lt!=mt?Lt:4*Ft.length},toString:function(Ft){return(Ft||Tt).stringify(this)},concat:function(Ft){var Lt=this.words,Pt=Ft.words,Ot=this.sigBytes,Nt=Ft.sigBytes;if(this.clamp(),Ot%4)for(var $t=0;$t<Nt;$t++){var Vt=Pt[$t>>>2]>>>24-$t%4*8&255;Lt[Ot+$t>>>2]|=Vt<<24-(Ot+$t)%4*8}else for(var Ut=0;Ut<Nt;Ut+=4)Lt[Ot+Ut>>>2]=Pt[Ut>>>2];return this.sigBytes+=Nt,this},clamp:function(){var Ft=this.words,Lt=this.sigBytes;Ft[Lt>>>2]&=4294967295<<32-Lt%4*8,Ft.length=ft.ceil(Lt/4)},clone:function(){var Ft=Et.clone.call(this);return Ft.words=this.words.slice(0),Ft},random:function(Ft){for(var Lt=[],Pt=0;Pt<Ft;Pt+=4)Lt.push(xt());return new wt.init(Lt,Ft)}}),Rt=vt.enc={},Tt=Rt.Hex={stringify:function(Ft){for(var Lt=Ft.words,Pt=Ft.sigBytes,Ot=[],Nt=0;Nt<Pt;Nt++){var $t=Lt[Nt>>>2]>>>24-Nt%4*8&255;Ot.push(($t>>>4).toString(16)),Ot.push((15&$t).toString(16))}return Ot.join("")},parse:function(Ft){for(var Lt=Ft.length,Pt=[],Ot=0;Ot<Lt;Ot+=2)Pt[Ot>>>3]|=parseInt(Ft.substr(Ot,2),16)<<24-Ot%8*4;return new wt.init(Pt,Lt/2)}},It=Rt.Latin1={stringify:function(Ft){for(var Lt=Ft.words,Pt=Ft.sigBytes,Ot=[],Nt=0;Nt<Pt;Nt++){var $t=Lt[Nt>>>2]>>>24-Nt%4*8&255;Ot.push(String.fromCharCode($t))}return Ot.join("")},parse:function(Ft){for(var Lt=Ft.length,Pt=[],Ot=0;Ot<Lt;Ot++)Pt[Ot>>>2]|=(255&Ft.charCodeAt(Ot))<<24-Ot%4*8;return new wt.init(Pt,Lt)}},At=Rt.Utf8={stringify:function(Ft){try{return decodeURIComponent(escape(It.stringify(Ft)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ft){return It.parse(unescape(encodeURIComponent(Ft)))}},Dt=St.BufferedBlockAlgorithm=Et.extend({reset:function(){this._data=new wt.init,this._nDataBytes=0},_append:function(Ft){typeof Ft=="string"&&(Ft=At.parse(Ft)),this._data.concat(Ft),this._nDataBytes+=Ft.sigBytes},_process:function(Ft){var Lt,Pt=this._data,Ot=Pt.words,Nt=Pt.sigBytes,$t=this.blockSize,Vt=Nt/(4*$t),Ut=(Vt=Ft?ft.ceil(Vt):ft.max((0|Vt)-this._minBufferSize,0))*$t,zt=ft.min(4*Ut,Nt);if(Ut){for(var Bt=0;Bt<Ut;Bt+=$t)this._doProcessBlock(Ot,Bt);Lt=Ot.splice(0,Ut),Pt.sigBytes-=zt}return new wt.init(Lt,zt)},clone:function(){var Ft=Et.clone.call(this);return Ft._data=this._data.clone(),Ft},_minBufferSize:0}),jt=(St.Hasher=Dt.extend({cfg:Et.extend(),init:function(Ft){this.cfg=this.cfg.extend(Ft),this.reset()},reset:function(){Dt.reset.call(this),this._doReset()},update:function(Ft){return this._append(Ft),this._process(),this},finalize:function(Ft){return Ft&&this._append(Ft),this._doFinalize()},blockSize:16,_createHelper:function(Ft){return function(Lt,Pt){return new Ft.init(Pt).finalize(Lt)}},_createHmacHelper:function(Ft){return function(Lt,Pt){return new jt.HMAC.init(Ft,Pt).finalize(Lt)}}}),vt.algo={});return vt}(Math),pt)},8269:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(){var ft=pt,mt=ft.lib.WordArray;function gt(xt,yt,vt){for(var St=[],Et=0,wt=0;wt<yt;wt++)if(wt%4){var Rt=vt[xt.charCodeAt(wt-1)]<<wt%4*2|vt[xt.charCodeAt(wt)]>>>6-wt%4*2;St[Et>>>2]|=Rt<<24-Et%4*8,Et++}return mt.create(St,Et)}ft.enc.Base64={stringify:function(xt){var yt=xt.words,vt=xt.sigBytes,St=this._map;xt.clamp();for(var Et=[],wt=0;wt<vt;wt+=3)for(var Rt=(yt[wt>>>2]>>>24-wt%4*8&255)<<16|(yt[wt+1>>>2]>>>24-(wt+1)%4*8&255)<<8|yt[wt+2>>>2]>>>24-(wt+2)%4*8&255,Tt=0;Tt<4&&wt+.75*Tt<vt;Tt++)Et.push(St.charAt(Rt>>>6*(3-Tt)&63));var It=St.charAt(64);if(It)for(;Et.length%4;)Et.push(It);return Et.join("")},parse:function(xt){var yt=xt.length,vt=this._map,St=this._reverseMap;if(!St){St=this._reverseMap=[];for(var Et=0;Et<vt.length;Et++)St[vt.charCodeAt(Et)]=Et}var wt=vt.charAt(64);if(wt){var Rt=xt.indexOf(wt);Rt!==-1&&(yt=Rt)}return gt(xt,yt,St)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),pt.enc.Base64)},3786:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(){var ft=pt,mt=ft.lib.WordArray;function gt(xt,yt,vt){for(var St=[],Et=0,wt=0;wt<yt;wt++)if(wt%4){var Rt=vt[xt.charCodeAt(wt-1)]<<wt%4*2|vt[xt.charCodeAt(wt)]>>>6-wt%4*2;St[Et>>>2]|=Rt<<24-Et%4*8,Et++}return mt.create(St,Et)}ft.enc.Base64url={stringify:function(xt,yt){yt===void 0&&(yt=!0);var vt=xt.words,St=xt.sigBytes,Et=yt?this._safe_map:this._map;xt.clamp();for(var wt=[],Rt=0;Rt<St;Rt+=3)for(var Tt=(vt[Rt>>>2]>>>24-Rt%4*8&255)<<16|(vt[Rt+1>>>2]>>>24-(Rt+1)%4*8&255)<<8|vt[Rt+2>>>2]>>>24-(Rt+2)%4*8&255,It=0;It<4&&Rt+.75*It<St;It++)wt.push(Et.charAt(Tt>>>6*(3-It)&63));var At=Et.charAt(64);if(At)for(;wt.length%4;)wt.push(At);return wt.join("")},parse:function(xt,yt){yt===void 0&&(yt=!0);var vt=xt.length,St=yt?this._safe_map:this._map,Et=this._reverseMap;if(!Et){Et=this._reverseMap=[];for(var wt=0;wt<St.length;wt++)Et[St.charCodeAt(wt)]=wt}var Rt=St.charAt(64);if(Rt){var Tt=xt.indexOf(Rt);Tt!==-1&&(vt=Tt)}return gt(xt,vt,Et)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),pt.enc.Base64url)},298:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(){var ft=pt,mt=ft.lib.WordArray,gt=ft.enc;function xt(yt){return yt<<8&4278255360|yt>>>8&16711935}gt.Utf16=gt.Utf16BE={stringify:function(yt){for(var vt=yt.words,St=yt.sigBytes,Et=[],wt=0;wt<St;wt+=2){var Rt=vt[wt>>>2]>>>16-wt%4*8&65535;Et.push(String.fromCharCode(Rt))}return Et.join("")},parse:function(yt){for(var vt=yt.length,St=[],Et=0;Et<vt;Et++)St[Et>>>1]|=yt.charCodeAt(Et)<<16-Et%2*16;return mt.create(St,2*vt)}},gt.Utf16LE={stringify:function(yt){for(var vt=yt.words,St=yt.sigBytes,Et=[],wt=0;wt<St;wt+=2){var Rt=xt(vt[wt>>>2]>>>16-wt%4*8&65535);Et.push(String.fromCharCode(Rt))}return Et.join("")},parse:function(yt){for(var vt=yt.length,St=[],Et=0;Et<vt;Et++)St[Et>>>1]|=xt(yt.charCodeAt(Et)<<16-Et%2*16);return mt.create(St,2*vt)}}}(),pt.enc.Utf16)},888:function(ut,dt,ht){var pt,ft,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),ht(2783),ht(9824),ft=(pt=St).lib,mt=ft.Base,gt=ft.WordArray,xt=pt.algo,yt=xt.MD5,vt=xt.EvpKDF=mt.extend({cfg:mt.extend({keySize:4,hasher:yt,iterations:1}),init:function(Et){this.cfg=this.cfg.extend(Et)},compute:function(Et,wt){for(var Rt,Tt=this.cfg,It=Tt.hasher.create(),At=gt.create(),Dt=At.words,jt=Tt.keySize,Ft=Tt.iterations;Dt.length<jt;){Rt&&It.update(Rt),Rt=It.update(Et).finalize(wt),It.reset();for(var Lt=1;Lt<Ft;Lt++)Rt=It.finalize(Rt),It.reset();At.concat(Rt)}return At.sigBytes=4*jt,At}}),pt.EvpKDF=function(Et,wt,Rt){return vt.create(Rt).compute(Et,wt)},St.EvpKDF)},2209:function(ut,dt,ht){var pt,ft,mt,gt;ut.exports=(gt=ht(8249),ht(5109),ft=(pt=gt).lib.CipherParams,mt=pt.enc.Hex,pt.format.Hex={stringify:function(xt){return xt.ciphertext.toString(mt)},parse:function(xt){var yt=mt.parse(xt);return ft.create({ciphertext:yt})}},gt.format.Hex)},9824:function(ut,dt,ht){var pt,ft,mt,gt;ut.exports=(pt=ht(8249),mt=(ft=pt).lib.Base,gt=ft.enc.Utf8,void(ft.algo.HMAC=mt.extend({init:function(xt,yt){xt=this._hasher=new xt.init,typeof yt=="string"&&(yt=gt.parse(yt));var vt=xt.blockSize,St=4*vt;yt.sigBytes>St&&(yt=xt.finalize(yt)),yt.clamp();for(var Et=this._oKey=yt.clone(),wt=this._iKey=yt.clone(),Rt=Et.words,Tt=wt.words,It=0;It<vt;It++)Rt[It]^=1549556828,Tt[It]^=909522486;Et.sigBytes=wt.sigBytes=St,this.reset()},reset:function(){var xt=this._hasher;xt.reset(),xt.update(this._iKey)},update:function(xt){return this._hasher.update(xt),this},finalize:function(xt){var yt=this._hasher,vt=yt.finalize(xt);return yt.reset(),yt.finalize(this._oKey.clone().concat(vt))}})))},1354:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(4938),ht(4433),ht(298),ht(8269),ht(3786),ht(8214),ht(2783),ht(2153),ht(7792),ht(34),ht(7460),ht(3327),ht(706),ht(9824),ht(2112),ht(888),ht(5109),ht(8568),ht(4242),ht(9968),ht(7660),ht(1148),ht(3615),ht(2807),ht(1077),ht(6475),ht(6991),ht(2209),ht(452),ht(4253),ht(1857),ht(4454),ht(3974),ht(7407),pt)},4433:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(){if(typeof ArrayBuffer=="function"){var ft=pt.lib.WordArray,mt=ft.init,gt=ft.init=function(xt){if(xt instanceof ArrayBuffer&&(xt=new Uint8Array(xt)),(xt instanceof Int8Array||typeof Uint8ClampedArray<"u"&&xt instanceof Uint8ClampedArray||xt instanceof Int16Array||xt instanceof Uint16Array||xt instanceof Int32Array||xt instanceof Uint32Array||xt instanceof Float32Array||xt instanceof Float64Array)&&(xt=new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength)),xt instanceof Uint8Array){for(var yt=xt.byteLength,vt=[],St=0;St<yt;St++)vt[St>>>2]|=xt[St]<<24-St%4*8;mt.call(this,vt,yt)}else mt.apply(this,arguments)};gt.prototype=ft}}(),pt.lib.WordArray)},8214:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(ft){var mt=pt,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=[];(function(){for(var At=0;At<64;At++)St[At]=4294967296*ft.abs(ft.sin(At+1))|0})();var Et=vt.MD5=yt.extend({_doReset:function(){this._hash=new xt.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(At,Dt){for(var jt=0;jt<16;jt++){var Ft=Dt+jt,Lt=At[Ft];At[Ft]=16711935&(Lt<<8|Lt>>>24)|4278255360&(Lt<<24|Lt>>>8)}var Pt=this._hash.words,Ot=At[Dt+0],Nt=At[Dt+1],$t=At[Dt+2],Vt=At[Dt+3],Ut=At[Dt+4],zt=At[Dt+5],Bt=At[Dt+6],Ht=At[Dt+7],Gt=At[Dt+8],Kt=At[Dt+9],Xt=At[Dt+10],or=At[Dt+11],tr=At[Dt+12],dr=At[Dt+13],fr=At[Dt+14],Sr=At[Dt+15],vr=Pt[0],mr=Pt[1],hr=Pt[2],gr=Pt[3];vr=wt(vr,mr,hr,gr,Ot,7,St[0]),gr=wt(gr,vr,mr,hr,Nt,12,St[1]),hr=wt(hr,gr,vr,mr,$t,17,St[2]),mr=wt(mr,hr,gr,vr,Vt,22,St[3]),vr=wt(vr,mr,hr,gr,Ut,7,St[4]),gr=wt(gr,vr,mr,hr,zt,12,St[5]),hr=wt(hr,gr,vr,mr,Bt,17,St[6]),mr=wt(mr,hr,gr,vr,Ht,22,St[7]),vr=wt(vr,mr,hr,gr,Gt,7,St[8]),gr=wt(gr,vr,mr,hr,Kt,12,St[9]),hr=wt(hr,gr,vr,mr,Xt,17,St[10]),mr=wt(mr,hr,gr,vr,or,22,St[11]),vr=wt(vr,mr,hr,gr,tr,7,St[12]),gr=wt(gr,vr,mr,hr,dr,12,St[13]),hr=wt(hr,gr,vr,mr,fr,17,St[14]),vr=Rt(vr,mr=wt(mr,hr,gr,vr,Sr,22,St[15]),hr,gr,Nt,5,St[16]),gr=Rt(gr,vr,mr,hr,Bt,9,St[17]),hr=Rt(hr,gr,vr,mr,or,14,St[18]),mr=Rt(mr,hr,gr,vr,Ot,20,St[19]),vr=Rt(vr,mr,hr,gr,zt,5,St[20]),gr=Rt(gr,vr,mr,hr,Xt,9,St[21]),hr=Rt(hr,gr,vr,mr,Sr,14,St[22]),mr=Rt(mr,hr,gr,vr,Ut,20,St[23]),vr=Rt(vr,mr,hr,gr,Kt,5,St[24]),gr=Rt(gr,vr,mr,hr,fr,9,St[25]),hr=Rt(hr,gr,vr,mr,Vt,14,St[26]),mr=Rt(mr,hr,gr,vr,Gt,20,St[27]),vr=Rt(vr,mr,hr,gr,dr,5,St[28]),gr=Rt(gr,vr,mr,hr,$t,9,St[29]),hr=Rt(hr,gr,vr,mr,Ht,14,St[30]),vr=Tt(vr,mr=Rt(mr,hr,gr,vr,tr,20,St[31]),hr,gr,zt,4,St[32]),gr=Tt(gr,vr,mr,hr,Gt,11,St[33]),hr=Tt(hr,gr,vr,mr,or,16,St[34]),mr=Tt(mr,hr,gr,vr,fr,23,St[35]),vr=Tt(vr,mr,hr,gr,Nt,4,St[36]),gr=Tt(gr,vr,mr,hr,Ut,11,St[37]),hr=Tt(hr,gr,vr,mr,Ht,16,St[38]),mr=Tt(mr,hr,gr,vr,Xt,23,St[39]),vr=Tt(vr,mr,hr,gr,dr,4,St[40]),gr=Tt(gr,vr,mr,hr,Ot,11,St[41]),hr=Tt(hr,gr,vr,mr,Vt,16,St[42]),mr=Tt(mr,hr,gr,vr,Bt,23,St[43]),vr=Tt(vr,mr,hr,gr,Kt,4,St[44]),gr=Tt(gr,vr,mr,hr,tr,11,St[45]),hr=Tt(hr,gr,vr,mr,Sr,16,St[46]),vr=It(vr,mr=Tt(mr,hr,gr,vr,$t,23,St[47]),hr,gr,Ot,6,St[48]),gr=It(gr,vr,mr,hr,Ht,10,St[49]),hr=It(hr,gr,vr,mr,fr,15,St[50]),mr=It(mr,hr,gr,vr,zt,21,St[51]),vr=It(vr,mr,hr,gr,tr,6,St[52]),gr=It(gr,vr,mr,hr,Vt,10,St[53]),hr=It(hr,gr,vr,mr,Xt,15,St[54]),mr=It(mr,hr,gr,vr,Nt,21,St[55]),vr=It(vr,mr,hr,gr,Gt,6,St[56]),gr=It(gr,vr,mr,hr,Sr,10,St[57]),hr=It(hr,gr,vr,mr,Bt,15,St[58]),mr=It(mr,hr,gr,vr,dr,21,St[59]),vr=It(vr,mr,hr,gr,Ut,6,St[60]),gr=It(gr,vr,mr,hr,or,10,St[61]),hr=It(hr,gr,vr,mr,$t,15,St[62]),mr=It(mr,hr,gr,vr,Kt,21,St[63]),Pt[0]=Pt[0]+vr|0,Pt[1]=Pt[1]+mr|0,Pt[2]=Pt[2]+hr|0,Pt[3]=Pt[3]+gr|0},_doFinalize:function(){var At=this._data,Dt=At.words,jt=8*this._nDataBytes,Ft=8*At.sigBytes;Dt[Ft>>>5]|=128<<24-Ft%32;var Lt=ft.floor(jt/4294967296),Pt=jt;Dt[15+(Ft+64>>>9<<4)]=16711935&(Lt<<8|Lt>>>24)|4278255360&(Lt<<24|Lt>>>8),Dt[14+(Ft+64>>>9<<4)]=16711935&(Pt<<8|Pt>>>24)|4278255360&(Pt<<24|Pt>>>8),At.sigBytes=4*(Dt.length+1),this._process();for(var Ot=this._hash,Nt=Ot.words,$t=0;$t<4;$t++){var Vt=Nt[$t];Nt[$t]=16711935&(Vt<<8|Vt>>>24)|4278255360&(Vt<<24|Vt>>>8)}return Ot},clone:function(){var At=yt.clone.call(this);return At._hash=this._hash.clone(),At}});function wt(At,Dt,jt,Ft,Lt,Pt,Ot){var Nt=At+(Dt&jt|~Dt&Ft)+Lt+Ot;return(Nt<<Pt|Nt>>>32-Pt)+Dt}function Rt(At,Dt,jt,Ft,Lt,Pt,Ot){var Nt=At+(Dt&Ft|jt&~Ft)+Lt+Ot;return(Nt<<Pt|Nt>>>32-Pt)+Dt}function Tt(At,Dt,jt,Ft,Lt,Pt,Ot){var Nt=At+(Dt^jt^Ft)+Lt+Ot;return(Nt<<Pt|Nt>>>32-Pt)+Dt}function It(At,Dt,jt,Ft,Lt,Pt,Ot){var Nt=At+(jt^(Dt|~Ft))+Lt+Ot;return(Nt<<Pt|Nt>>>32-Pt)+Dt}mt.MD5=yt._createHelper(Et),mt.HmacMD5=yt._createHmacHelper(Et)}(Math),pt.MD5)},8568:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.mode.CFB=function(){var ft=pt.lib.BlockCipherMode.extend();function mt(gt,xt,yt,vt){var St,Et=this._iv;Et?(St=Et.slice(0),this._iv=void 0):St=this._prevBlock,vt.encryptBlock(St,0);for(var wt=0;wt<yt;wt++)gt[xt+wt]^=St[wt]}return ft.Encryptor=ft.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize;mt.call(this,gt,xt,vt,yt),this._prevBlock=gt.slice(xt,xt+vt)}}),ft.Decryptor=ft.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=gt.slice(xt,xt+vt);mt.call(this,gt,xt,vt,yt),this._prevBlock=St}}),ft}(),pt.mode.CFB)},9968:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.mode.CTRGladman=function(){var ft=pt.lib.BlockCipherMode.extend();function mt(yt){if((yt>>24&255)==255){var vt=yt>>16&255,St=yt>>8&255,Et=255&yt;vt===255?(vt=0,St===255?(St=0,Et===255?Et=0:++Et):++St):++vt,yt=0,yt+=vt<<16,yt+=St<<8,yt+=Et}else yt+=16777216;return yt}function gt(yt){return(yt[0]=mt(yt[0]))===0&&(yt[1]=mt(yt[1])),yt}var xt=ft.Encryptor=ft.extend({processBlock:function(yt,vt){var St=this._cipher,Et=St.blockSize,wt=this._iv,Rt=this._counter;wt&&(Rt=this._counter=wt.slice(0),this._iv=void 0),gt(Rt);var Tt=Rt.slice(0);St.encryptBlock(Tt,0);for(var It=0;It<Et;It++)yt[vt+It]^=Tt[It]}});return ft.Decryptor=xt,ft}(),pt.mode.CTRGladman)},4242:function(ut,dt,ht){var pt,ft,mt;ut.exports=(mt=ht(8249),ht(5109),mt.mode.CTR=(pt=mt.lib.BlockCipherMode.extend(),ft=pt.Encryptor=pt.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=this._iv,Et=this._counter;St&&(Et=this._counter=St.slice(0),this._iv=void 0);var wt=Et.slice(0);yt.encryptBlock(wt,0),Et[vt-1]=Et[vt-1]+1|0;for(var Rt=0;Rt<vt;Rt++)gt[xt+Rt]^=wt[Rt]}}),pt.Decryptor=ft,pt),mt.mode.CTR)},1148:function(ut,dt,ht){var pt,ft;ut.exports=(ft=ht(8249),ht(5109),ft.mode.ECB=((pt=ft.lib.BlockCipherMode.extend()).Encryptor=pt.extend({processBlock:function(mt,gt){this._cipher.encryptBlock(mt,gt)}}),pt.Decryptor=pt.extend({processBlock:function(mt,gt){this._cipher.decryptBlock(mt,gt)}}),pt),ft.mode.ECB)},7660:function(ut,dt,ht){var pt,ft,mt;ut.exports=(mt=ht(8249),ht(5109),mt.mode.OFB=(pt=mt.lib.BlockCipherMode.extend(),ft=pt.Encryptor=pt.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=this._iv,Et=this._keystream;St&&(Et=this._keystream=St.slice(0),this._iv=void 0),yt.encryptBlock(Et,0);for(var wt=0;wt<vt;wt++)gt[xt+wt]^=Et[wt]}}),pt.Decryptor=ft,pt),mt.mode.OFB)},3615:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.pad.AnsiX923={pad:function(ft,mt){var gt=ft.sigBytes,xt=4*mt,yt=xt-gt%xt,vt=gt+yt-1;ft.clamp(),ft.words[vt>>>2]|=yt<<24-vt%4*8,ft.sigBytes+=yt},unpad:function(ft){var mt=255&ft.words[ft.sigBytes-1>>>2];ft.sigBytes-=mt}},pt.pad.Ansix923)},2807:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.pad.Iso10126={pad:function(ft,mt){var gt=4*mt,xt=gt-ft.sigBytes%gt;ft.concat(pt.lib.WordArray.random(xt-1)).concat(pt.lib.WordArray.create([xt<<24],1))},unpad:function(ft){var mt=255&ft.words[ft.sigBytes-1>>>2];ft.sigBytes-=mt}},pt.pad.Iso10126)},1077:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.pad.Iso97971={pad:function(ft,mt){ft.concat(pt.lib.WordArray.create([2147483648],1)),pt.pad.ZeroPadding.pad(ft,mt)},unpad:function(ft){pt.pad.ZeroPadding.unpad(ft),ft.sigBytes--}},pt.pad.Iso97971)},6991:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.pad.NoPadding={pad:function(){},unpad:function(){}},pt.pad.NoPadding)},6475:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(5109),pt.pad.ZeroPadding={pad:function(ft,mt){var gt=4*mt;ft.clamp(),ft.sigBytes+=gt-(ft.sigBytes%gt||gt)},unpad:function(ft){var mt=ft.words,gt=ft.sigBytes-1;for(gt=ft.sigBytes-1;gt>=0;gt--)if(mt[gt>>>2]>>>24-gt%4*8&255){ft.sigBytes=gt+1;break}}},pt.pad.ZeroPadding)},2112:function(ut,dt,ht){var pt,ft,mt,gt,xt,yt,vt,St,Et;ut.exports=(Et=ht(8249),ht(2153),ht(9824),ft=(pt=Et).lib,mt=ft.Base,gt=ft.WordArray,xt=pt.algo,yt=xt.SHA256,vt=xt.HMAC,St=xt.PBKDF2=mt.extend({cfg:mt.extend({keySize:4,hasher:yt,iterations:25e4}),init:function(wt){this.cfg=this.cfg.extend(wt)},compute:function(wt,Rt){for(var Tt=this.cfg,It=vt.create(Tt.hasher,wt),At=gt.create(),Dt=gt.create([1]),jt=At.words,Ft=Dt.words,Lt=Tt.keySize,Pt=Tt.iterations;jt.length<Lt;){var Ot=It.update(Rt).finalize(Dt);It.reset();for(var Nt=Ot.words,$t=Nt.length,Vt=Ot,Ut=1;Ut<Pt;Ut++){Vt=It.finalize(Vt),It.reset();for(var zt=Vt.words,Bt=0;Bt<$t;Bt++)Nt[Bt]^=zt[Bt]}At.concat(Ot),Ft[0]++}return At.sigBytes=4*Lt,At}}),pt.PBKDF2=function(wt,Rt,Tt){return St.create(Tt).compute(wt,Rt)},Et.PBKDF2)},3974:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib.StreamCipher,gt=ft.algo,xt=[],yt=[],vt=[],St=gt.RabbitLegacy=mt.extend({_doReset:function(){var wt=this._key.words,Rt=this.cfg.iv,Tt=this._X=[wt[0],wt[3]<<16|wt[2]>>>16,wt[1],wt[0]<<16|wt[3]>>>16,wt[2],wt[1]<<16|wt[0]>>>16,wt[3],wt[2]<<16|wt[1]>>>16],It=this._C=[wt[2]<<16|wt[2]>>>16,4294901760&wt[0]|65535&wt[1],wt[3]<<16|wt[3]>>>16,4294901760&wt[1]|65535&wt[2],wt[0]<<16|wt[0]>>>16,4294901760&wt[2]|65535&wt[3],wt[1]<<16|wt[1]>>>16,4294901760&wt[3]|65535&wt[0]];this._b=0;for(var At=0;At<4;At++)Et.call(this);for(At=0;At<8;At++)It[At]^=Tt[At+4&7];if(Rt){var Dt=Rt.words,jt=Dt[0],Ft=Dt[1],Lt=16711935&(jt<<8|jt>>>24)|4278255360&(jt<<24|jt>>>8),Pt=16711935&(Ft<<8|Ft>>>24)|4278255360&(Ft<<24|Ft>>>8),Ot=Lt>>>16|4294901760&Pt,Nt=Pt<<16|65535&Lt;for(It[0]^=Lt,It[1]^=Ot,It[2]^=Pt,It[3]^=Nt,It[4]^=Lt,It[5]^=Ot,It[6]^=Pt,It[7]^=Nt,At=0;At<4;At++)Et.call(this)}},_doProcessBlock:function(wt,Rt){var Tt=this._X;Et.call(this),xt[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,xt[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,xt[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,xt[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var It=0;It<4;It++)xt[It]=16711935&(xt[It]<<8|xt[It]>>>24)|4278255360&(xt[It]<<24|xt[It]>>>8),wt[Rt+It]^=xt[It]},blockSize:4,ivSize:2});function Et(){for(var wt=this._X,Rt=this._C,Tt=0;Tt<8;Tt++)yt[Tt]=Rt[Tt];for(Rt[0]=Rt[0]+1295307597+this._b|0,Rt[1]=Rt[1]+3545052371+(Rt[0]>>>0<yt[0]>>>0?1:0)|0,Rt[2]=Rt[2]+886263092+(Rt[1]>>>0<yt[1]>>>0?1:0)|0,Rt[3]=Rt[3]+1295307597+(Rt[2]>>>0<yt[2]>>>0?1:0)|0,Rt[4]=Rt[4]+3545052371+(Rt[3]>>>0<yt[3]>>>0?1:0)|0,Rt[5]=Rt[5]+886263092+(Rt[4]>>>0<yt[4]>>>0?1:0)|0,Rt[6]=Rt[6]+1295307597+(Rt[5]>>>0<yt[5]>>>0?1:0)|0,Rt[7]=Rt[7]+3545052371+(Rt[6]>>>0<yt[6]>>>0?1:0)|0,this._b=Rt[7]>>>0<yt[7]>>>0?1:0,Tt=0;Tt<8;Tt++){var It=wt[Tt]+Rt[Tt],At=65535&It,Dt=It>>>16,jt=((At*At>>>17)+At*Dt>>>15)+Dt*Dt,Ft=((4294901760&It)*It|0)+((65535&It)*It|0);vt[Tt]=jt^Ft}wt[0]=vt[0]+(vt[7]<<16|vt[7]>>>16)+(vt[6]<<16|vt[6]>>>16)|0,wt[1]=vt[1]+(vt[0]<<8|vt[0]>>>24)+vt[7]|0,wt[2]=vt[2]+(vt[1]<<16|vt[1]>>>16)+(vt[0]<<16|vt[0]>>>16)|0,wt[3]=vt[3]+(vt[2]<<8|vt[2]>>>24)+vt[1]|0,wt[4]=vt[4]+(vt[3]<<16|vt[3]>>>16)+(vt[2]<<16|vt[2]>>>16)|0,wt[5]=vt[5]+(vt[4]<<8|vt[4]>>>24)+vt[3]|0,wt[6]=vt[6]+(vt[5]<<16|vt[5]>>>16)+(vt[4]<<16|vt[4]>>>16)|0,wt[7]=vt[7]+(vt[6]<<8|vt[6]>>>24)+vt[5]|0}ft.RabbitLegacy=mt._createHelper(St)}(),pt.RabbitLegacy)},4454:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib.StreamCipher,gt=ft.algo,xt=[],yt=[],vt=[],St=gt.Rabbit=mt.extend({_doReset:function(){for(var wt=this._key.words,Rt=this.cfg.iv,Tt=0;Tt<4;Tt++)wt[Tt]=16711935&(wt[Tt]<<8|wt[Tt]>>>24)|4278255360&(wt[Tt]<<24|wt[Tt]>>>8);var It=this._X=[wt[0],wt[3]<<16|wt[2]>>>16,wt[1],wt[0]<<16|wt[3]>>>16,wt[2],wt[1]<<16|wt[0]>>>16,wt[3],wt[2]<<16|wt[1]>>>16],At=this._C=[wt[2]<<16|wt[2]>>>16,4294901760&wt[0]|65535&wt[1],wt[3]<<16|wt[3]>>>16,4294901760&wt[1]|65535&wt[2],wt[0]<<16|wt[0]>>>16,4294901760&wt[2]|65535&wt[3],wt[1]<<16|wt[1]>>>16,4294901760&wt[3]|65535&wt[0]];for(this._b=0,Tt=0;Tt<4;Tt++)Et.call(this);for(Tt=0;Tt<8;Tt++)At[Tt]^=It[Tt+4&7];if(Rt){var Dt=Rt.words,jt=Dt[0],Ft=Dt[1],Lt=16711935&(jt<<8|jt>>>24)|4278255360&(jt<<24|jt>>>8),Pt=16711935&(Ft<<8|Ft>>>24)|4278255360&(Ft<<24|Ft>>>8),Ot=Lt>>>16|4294901760&Pt,Nt=Pt<<16|65535&Lt;for(At[0]^=Lt,At[1]^=Ot,At[2]^=Pt,At[3]^=Nt,At[4]^=Lt,At[5]^=Ot,At[6]^=Pt,At[7]^=Nt,Tt=0;Tt<4;Tt++)Et.call(this)}},_doProcessBlock:function(wt,Rt){var Tt=this._X;Et.call(this),xt[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,xt[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,xt[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,xt[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var It=0;It<4;It++)xt[It]=16711935&(xt[It]<<8|xt[It]>>>24)|4278255360&(xt[It]<<24|xt[It]>>>8),wt[Rt+It]^=xt[It]},blockSize:4,ivSize:2});function Et(){for(var wt=this._X,Rt=this._C,Tt=0;Tt<8;Tt++)yt[Tt]=Rt[Tt];for(Rt[0]=Rt[0]+1295307597+this._b|0,Rt[1]=Rt[1]+3545052371+(Rt[0]>>>0<yt[0]>>>0?1:0)|0,Rt[2]=Rt[2]+886263092+(Rt[1]>>>0<yt[1]>>>0?1:0)|0,Rt[3]=Rt[3]+1295307597+(Rt[2]>>>0<yt[2]>>>0?1:0)|0,Rt[4]=Rt[4]+3545052371+(Rt[3]>>>0<yt[3]>>>0?1:0)|0,Rt[5]=Rt[5]+886263092+(Rt[4]>>>0<yt[4]>>>0?1:0)|0,Rt[6]=Rt[6]+1295307597+(Rt[5]>>>0<yt[5]>>>0?1:0)|0,Rt[7]=Rt[7]+3545052371+(Rt[6]>>>0<yt[6]>>>0?1:0)|0,this._b=Rt[7]>>>0<yt[7]>>>0?1:0,Tt=0;Tt<8;Tt++){var It=wt[Tt]+Rt[Tt],At=65535&It,Dt=It>>>16,jt=((At*At>>>17)+At*Dt>>>15)+Dt*Dt,Ft=((4294901760&It)*It|0)+((65535&It)*It|0);vt[Tt]=jt^Ft}wt[0]=vt[0]+(vt[7]<<16|vt[7]>>>16)+(vt[6]<<16|vt[6]>>>16)|0,wt[1]=vt[1]+(vt[0]<<8|vt[0]>>>24)+vt[7]|0,wt[2]=vt[2]+(vt[1]<<16|vt[1]>>>16)+(vt[0]<<16|vt[0]>>>16)|0,wt[3]=vt[3]+(vt[2]<<8|vt[2]>>>24)+vt[1]|0,wt[4]=vt[4]+(vt[3]<<16|vt[3]>>>16)+(vt[2]<<16|vt[2]>>>16)|0,wt[5]=vt[5]+(vt[4]<<8|vt[4]>>>24)+vt[3]|0,wt[6]=vt[6]+(vt[5]<<16|vt[5]>>>16)+(vt[4]<<16|vt[4]>>>16)|0,wt[7]=vt[7]+(vt[6]<<8|vt[6]>>>24)+vt[5]|0}ft.Rabbit=mt._createHelper(St)}(),pt.Rabbit)},1857:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib.StreamCipher,gt=ft.algo,xt=gt.RC4=mt.extend({_doReset:function(){for(var St=this._key,Et=St.words,wt=St.sigBytes,Rt=this._S=[],Tt=0;Tt<256;Tt++)Rt[Tt]=Tt;Tt=0;for(var It=0;Tt<256;Tt++){var At=Tt%wt,Dt=Et[At>>>2]>>>24-At%4*8&255;It=(It+Rt[Tt]+Dt)%256;var jt=Rt[Tt];Rt[Tt]=Rt[It],Rt[It]=jt}this._i=this._j=0},_doProcessBlock:function(St,Et){St[Et]^=yt.call(this)},keySize:8,ivSize:0});function yt(){for(var St=this._S,Et=this._i,wt=this._j,Rt=0,Tt=0;Tt<4;Tt++){wt=(wt+St[Et=(Et+1)%256])%256;var It=St[Et];St[Et]=St[wt],St[wt]=It,Rt|=St[(St[Et]+St[wt])%256]<<24-8*Tt}return this._i=Et,this._j=wt,Rt}ft.RC4=mt._createHelper(xt);var vt=gt.RC4Drop=xt.extend({cfg:xt.cfg.extend({drop:192}),_doReset:function(){xt._doReset.call(this);for(var St=this.cfg.drop;St>0;St--)yt.call(this)}});ft.RC4Drop=mt._createHelper(vt)}(),pt.RC4)},706:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(ft){var mt=pt,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=xt.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Et=xt.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),wt=xt.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Rt=xt.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Tt=xt.create([0,1518500249,1859775393,2400959708,2840853838]),It=xt.create([1352829926,1548603684,1836072691,2053994217,0]),At=vt.RIPEMD160=yt.extend({_doReset:function(){this._hash=xt.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Nt,$t){for(var Vt=0;Vt<16;Vt++){var Ut=$t+Vt,zt=Nt[Ut];Nt[Ut]=16711935&(zt<<8|zt>>>24)|4278255360&(zt<<24|zt>>>8)}var Bt,Ht,Gt,Kt,Xt,or,tr,dr,fr,Sr,vr,mr=this._hash.words,hr=Tt.words,gr=It.words,lr=St.words,Ir=Et.words,wr=wt.words,Fr=Rt.words;for(or=Bt=mr[0],tr=Ht=mr[1],dr=Gt=mr[2],fr=Kt=mr[3],Sr=Xt=mr[4],Vt=0;Vt<80;Vt+=1)vr=Bt+Nt[$t+lr[Vt]]|0,vr+=Vt<16?Dt(Ht,Gt,Kt)+hr[0]:Vt<32?jt(Ht,Gt,Kt)+hr[1]:Vt<48?Ft(Ht,Gt,Kt)+hr[2]:Vt<64?Lt(Ht,Gt,Kt)+hr[3]:Pt(Ht,Gt,Kt)+hr[4],vr=(vr=Ot(vr|=0,wr[Vt]))+Xt|0,Bt=Xt,Xt=Kt,Kt=Ot(Gt,10),Gt=Ht,Ht=vr,vr=or+Nt[$t+Ir[Vt]]|0,vr+=Vt<16?Pt(tr,dr,fr)+gr[0]:Vt<32?Lt(tr,dr,fr)+gr[1]:Vt<48?Ft(tr,dr,fr)+gr[2]:Vt<64?jt(tr,dr,fr)+gr[3]:Dt(tr,dr,fr)+gr[4],vr=(vr=Ot(vr|=0,Fr[Vt]))+Sr|0,or=Sr,Sr=fr,fr=Ot(dr,10),dr=tr,tr=vr;vr=mr[1]+Gt+fr|0,mr[1]=mr[2]+Kt+Sr|0,mr[2]=mr[3]+Xt+or|0,mr[3]=mr[4]+Bt+tr|0,mr[4]=mr[0]+Ht+dr|0,mr[0]=vr},_doFinalize:function(){var Nt=this._data,$t=Nt.words,Vt=8*this._nDataBytes,Ut=8*Nt.sigBytes;$t[Ut>>>5]|=128<<24-Ut%32,$t[14+(Ut+64>>>9<<4)]=16711935&(Vt<<8|Vt>>>24)|4278255360&(Vt<<24|Vt>>>8),Nt.sigBytes=4*($t.length+1),this._process();for(var zt=this._hash,Bt=zt.words,Ht=0;Ht<5;Ht++){var Gt=Bt[Ht];Bt[Ht]=16711935&(Gt<<8|Gt>>>24)|4278255360&(Gt<<24|Gt>>>8)}return zt},clone:function(){var Nt=yt.clone.call(this);return Nt._hash=this._hash.clone(),Nt}});function Dt(Nt,$t,Vt){return Nt^$t^Vt}function jt(Nt,$t,Vt){return Nt&$t|~Nt&Vt}function Ft(Nt,$t,Vt){return(Nt|~$t)^Vt}function Lt(Nt,$t,Vt){return Nt&Vt|$t&~Vt}function Pt(Nt,$t,Vt){return Nt^($t|~Vt)}function Ot(Nt,$t){return Nt<<$t|Nt>>>32-$t}mt.RIPEMD160=yt._createHelper(At),mt.HmacRIPEMD160=yt._createHmacHelper(At)}(),pt.RIPEMD160)},2783:function(ut,dt,ht){var pt,ft,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),ft=(pt=St).lib,mt=ft.WordArray,gt=ft.Hasher,xt=pt.algo,yt=[],vt=xt.SHA1=gt.extend({_doReset:function(){this._hash=new mt.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Et,wt){for(var Rt=this._hash.words,Tt=Rt[0],It=Rt[1],At=Rt[2],Dt=Rt[3],jt=Rt[4],Ft=0;Ft<80;Ft++){if(Ft<16)yt[Ft]=0|Et[wt+Ft];else{var Lt=yt[Ft-3]^yt[Ft-8]^yt[Ft-14]^yt[Ft-16];yt[Ft]=Lt<<1|Lt>>>31}var Pt=(Tt<<5|Tt>>>27)+jt+yt[Ft];Pt+=Ft<20?1518500249+(It&At|~It&Dt):Ft<40?1859775393+(It^At^Dt):Ft<60?(It&At|It&Dt|At&Dt)-1894007588:(It^At^Dt)-899497514,jt=Dt,Dt=At,At=It<<30|It>>>2,It=Tt,Tt=Pt}Rt[0]=Rt[0]+Tt|0,Rt[1]=Rt[1]+It|0,Rt[2]=Rt[2]+At|0,Rt[3]=Rt[3]+Dt|0,Rt[4]=Rt[4]+jt|0},_doFinalize:function(){var Et=this._data,wt=Et.words,Rt=8*this._nDataBytes,Tt=8*Et.sigBytes;return wt[Tt>>>5]|=128<<24-Tt%32,wt[14+(Tt+64>>>9<<4)]=Math.floor(Rt/4294967296),wt[15+(Tt+64>>>9<<4)]=Rt,Et.sigBytes=4*wt.length,this._process(),this._hash},clone:function(){var Et=gt.clone.call(this);return Et._hash=this._hash.clone(),Et}}),pt.SHA1=gt._createHelper(vt),pt.HmacSHA1=gt._createHmacHelper(vt),St.SHA1)},7792:function(ut,dt,ht){var pt,ft,mt,gt,xt,yt;ut.exports=(yt=ht(8249),ht(2153),ft=(pt=yt).lib.WordArray,mt=pt.algo,gt=mt.SHA256,xt=mt.SHA224=gt.extend({_doReset:function(){this._hash=new ft.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var vt=gt._doFinalize.call(this);return vt.sigBytes-=4,vt}}),pt.SHA224=gt._createHelper(xt),pt.HmacSHA224=gt._createHmacHelper(xt),yt.SHA224)},2153:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(ft){var mt=pt,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=[],Et=[];(function(){function Tt(jt){for(var Ft=ft.sqrt(jt),Lt=2;Lt<=Ft;Lt++)if(!(jt%Lt))return!1;return!0}function It(jt){return 4294967296*(jt-(0|jt))|0}for(var At=2,Dt=0;Dt<64;)Tt(At)&&(Dt<8&&(St[Dt]=It(ft.pow(At,.5))),Et[Dt]=It(ft.pow(At,.3333333333333333)),Dt++),At++})();var wt=[],Rt=vt.SHA256=yt.extend({_doReset:function(){this._hash=new xt.init(St.slice(0))},_doProcessBlock:function(Tt,It){for(var At=this._hash.words,Dt=At[0],jt=At[1],Ft=At[2],Lt=At[3],Pt=At[4],Ot=At[5],Nt=At[6],$t=At[7],Vt=0;Vt<64;Vt++){if(Vt<16)wt[Vt]=0|Tt[It+Vt];else{var Ut=wt[Vt-15],zt=(Ut<<25|Ut>>>7)^(Ut<<14|Ut>>>18)^Ut>>>3,Bt=wt[Vt-2],Ht=(Bt<<15|Bt>>>17)^(Bt<<13|Bt>>>19)^Bt>>>10;wt[Vt]=zt+wt[Vt-7]+Ht+wt[Vt-16]}var Gt=Dt&jt^Dt&Ft^jt&Ft,Kt=(Dt<<30|Dt>>>2)^(Dt<<19|Dt>>>13)^(Dt<<10|Dt>>>22),Xt=$t+((Pt<<26|Pt>>>6)^(Pt<<21|Pt>>>11)^(Pt<<7|Pt>>>25))+(Pt&Ot^~Pt&Nt)+Et[Vt]+wt[Vt];$t=Nt,Nt=Ot,Ot=Pt,Pt=Lt+Xt|0,Lt=Ft,Ft=jt,jt=Dt,Dt=Xt+(Kt+Gt)|0}At[0]=At[0]+Dt|0,At[1]=At[1]+jt|0,At[2]=At[2]+Ft|0,At[3]=At[3]+Lt|0,At[4]=At[4]+Pt|0,At[5]=At[5]+Ot|0,At[6]=At[6]+Nt|0,At[7]=At[7]+$t|0},_doFinalize:function(){var Tt=this._data,It=Tt.words,At=8*this._nDataBytes,Dt=8*Tt.sigBytes;return It[Dt>>>5]|=128<<24-Dt%32,It[14+(Dt+64>>>9<<4)]=ft.floor(At/4294967296),It[15+(Dt+64>>>9<<4)]=At,Tt.sigBytes=4*It.length,this._process(),this._hash},clone:function(){var Tt=yt.clone.call(this);return Tt._hash=this._hash.clone(),Tt}});mt.SHA256=yt._createHelper(Rt),mt.HmacSHA256=yt._createHmacHelper(Rt)}(Math),pt.SHA256)},3327:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(4938),function(ft){var mt=pt,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.x64.Word,St=mt.algo,Et=[],wt=[],Rt=[];(function(){for(var At=1,Dt=0,jt=0;jt<24;jt++){Et[At+5*Dt]=(jt+1)*(jt+2)/2%64;var Ft=(2*At+3*Dt)%5;At=Dt%5,Dt=Ft}for(At=0;At<5;At++)for(Dt=0;Dt<5;Dt++)wt[At+5*Dt]=Dt+(2*At+3*Dt)%5*5;for(var Lt=1,Pt=0;Pt<24;Pt++){for(var Ot=0,Nt=0,$t=0;$t<7;$t++){if(1&Lt){var Vt=(1<<$t)-1;Vt<32?Nt^=1<<Vt:Ot^=1<<Vt-32}128&Lt?Lt=Lt<<1^113:Lt<<=1}Rt[Pt]=vt.create(Ot,Nt)}})();var Tt=[];(function(){for(var At=0;At<25;At++)Tt[At]=vt.create()})();var It=St.SHA3=yt.extend({cfg:yt.cfg.extend({outputLength:512}),_doReset:function(){for(var At=this._state=[],Dt=0;Dt<25;Dt++)At[Dt]=new vt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(At,Dt){for(var jt=this._state,Ft=this.blockSize/2,Lt=0;Lt<Ft;Lt++){var Pt=At[Dt+2*Lt],Ot=At[Dt+2*Lt+1];Pt=16711935&(Pt<<8|Pt>>>24)|4278255360&(Pt<<24|Pt>>>8),Ot=16711935&(Ot<<8|Ot>>>24)|4278255360&(Ot<<24|Ot>>>8),(hr=jt[Lt]).high^=Ot,hr.low^=Pt}for(var Nt=0;Nt<24;Nt++){for(var $t=0;$t<5;$t++){for(var Vt=0,Ut=0,zt=0;zt<5;zt++)Vt^=(hr=jt[$t+5*zt]).high,Ut^=hr.low;var Bt=Tt[$t];Bt.high=Vt,Bt.low=Ut}for($t=0;$t<5;$t++){var Ht=Tt[($t+4)%5],Gt=Tt[($t+1)%5],Kt=Gt.high,Xt=Gt.low;for(Vt=Ht.high^(Kt<<1|Xt>>>31),Ut=Ht.low^(Xt<<1|Kt>>>31),zt=0;zt<5;zt++)(hr=jt[$t+5*zt]).high^=Vt,hr.low^=Ut}for(var or=1;or<25;or++){var tr=(hr=jt[or]).high,dr=hr.low,fr=Et[or];fr<32?(Vt=tr<<fr|dr>>>32-fr,Ut=dr<<fr|tr>>>32-fr):(Vt=dr<<fr-32|tr>>>64-fr,Ut=tr<<fr-32|dr>>>64-fr);var Sr=Tt[wt[or]];Sr.high=Vt,Sr.low=Ut}var vr=Tt[0],mr=jt[0];for(vr.high=mr.high,vr.low=mr.low,$t=0;$t<5;$t++)for(zt=0;zt<5;zt++){var hr=jt[or=$t+5*zt],gr=Tt[or],lr=Tt[($t+1)%5+5*zt],Ir=Tt[($t+2)%5+5*zt];hr.high=gr.high^~lr.high&Ir.high,hr.low=gr.low^~lr.low&Ir.low}hr=jt[0];var wr=Rt[Nt];hr.high^=wr.high,hr.low^=wr.low}},_doFinalize:function(){var At=this._data,Dt=At.words,jt=(this._nDataBytes,8*At.sigBytes),Ft=32*this.blockSize;Dt[jt>>>5]|=1<<24-jt%32,Dt[(ft.ceil((jt+1)/Ft)*Ft>>>5)-1]|=128,At.sigBytes=4*Dt.length,this._process();for(var Lt=this._state,Pt=this.cfg.outputLength/8,Ot=Pt/8,Nt=[],$t=0;$t<Ot;$t++){var Vt=Lt[$t],Ut=Vt.high,zt=Vt.low;Ut=16711935&(Ut<<8|Ut>>>24)|4278255360&(Ut<<24|Ut>>>8),zt=16711935&(zt<<8|zt>>>24)|4278255360&(zt<<24|zt>>>8),Nt.push(zt),Nt.push(Ut)}return new xt.init(Nt,Pt)},clone:function(){for(var At=yt.clone.call(this),Dt=At._state=this._state.slice(0),jt=0;jt<25;jt++)Dt[jt]=Dt[jt].clone();return At}});mt.SHA3=yt._createHelper(It),mt.HmacSHA3=yt._createHmacHelper(It)}(Math),pt.SHA3)},7460:function(ut,dt,ht){var pt,ft,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),ht(4938),ht(34),ft=(pt=St).x64,mt=ft.Word,gt=ft.WordArray,xt=pt.algo,yt=xt.SHA512,vt=xt.SHA384=yt.extend({_doReset:function(){this._hash=new gt.init([new mt.init(3418070365,3238371032),new mt.init(1654270250,914150663),new mt.init(2438529370,812702999),new mt.init(355462360,4144912697),new mt.init(1731405415,4290775857),new mt.init(2394180231,1750603025),new mt.init(3675008525,1694076839),new mt.init(1203062813,3204075428)])},_doFinalize:function(){var Et=yt._doFinalize.call(this);return Et.sigBytes-=16,Et}}),pt.SHA384=yt._createHelper(vt),pt.HmacSHA384=yt._createHmacHelper(vt),St.SHA384)},34:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(4938),function(){var ft=pt,mt=ft.lib.Hasher,gt=ft.x64,xt=gt.Word,yt=gt.WordArray,vt=ft.algo;function St(){return xt.create.apply(xt,arguments)}var Et=[St(1116352408,3609767458),St(1899447441,602891725),St(3049323471,3964484399),St(3921009573,2173295548),St(961987163,4081628472),St(1508970993,3053834265),St(2453635748,2937671579),St(2870763221,3664609560),St(3624381080,2734883394),St(310598401,1164996542),St(607225278,1323610764),St(1426881987,3590304994),St(1925078388,4068182383),St(2162078206,991336113),St(2614888103,633803317),St(3248222580,3479774868),St(3835390401,2666613458),St(4022224774,944711139),St(264347078,2341262773),St(604807628,2007800933),St(770255983,1495990901),St(1249150122,1856431235),St(1555081692,3175218132),St(1996064986,2198950837),St(2554220882,3999719339),St(2821834349,766784016),St(2952996808,2566594879),St(3210313671,3203337956),St(3336571891,1034457026),St(3584528711,2466948901),St(113926993,3758326383),St(338241895,168717936),St(666307205,1188179964),St(773529912,1546045734),St(1294757372,1522805485),St(1396182291,2643833823),St(1695183700,2343527390),St(1986661051,1014477480),St(2177026350,1206759142),St(2456956037,344077627),St(2730485921,1290863460),St(2820302411,3158454273),St(3259730800,3505952657),St(3345764771,106217008),St(3516065817,3606008344),St(3600352804,1432725776),St(4094571909,1467031594),St(275423344,851169720),St(430227734,3100823752),St(506948616,1363258195),St(659060556,3750685593),St(883997877,3785050280),St(958139571,3318307427),St(1322822218,3812723403),St(1537002063,2003034995),St(1747873779,3602036899),St(1955562222,1575990012),St(2024104815,1125592928),St(2227730452,2716904306),St(2361852424,442776044),St(2428436474,593698344),St(2756734187,3733110249),St(3204031479,2999351573),St(3329325298,3815920427),St(3391569614,3928383900),St(3515267271,566280711),St(3940187606,3454069534),St(4118630271,4000239992),St(116418474,1914138554),St(174292421,2731055270),St(289380356,3203993006),St(460393269,320620315),St(685471733,587496836),St(852142971,1086792851),St(1017036298,365543100),St(1126000580,2618297676),St(1288033470,3409855158),St(1501505948,4234509866),St(1607167915,987167468),St(1816402316,1246189591)],wt=[];(function(){for(var Tt=0;Tt<80;Tt++)wt[Tt]=St()})();var Rt=vt.SHA512=mt.extend({_doReset:function(){this._hash=new yt.init([new xt.init(1779033703,4089235720),new xt.init(3144134277,2227873595),new xt.init(1013904242,4271175723),new xt.init(2773480762,1595750129),new xt.init(1359893119,2917565137),new xt.init(2600822924,725511199),new xt.init(528734635,4215389547),new xt.init(1541459225,327033209)])},_doProcessBlock:function(Tt,It){for(var At=this._hash.words,Dt=At[0],jt=At[1],Ft=At[2],Lt=At[3],Pt=At[4],Ot=At[5],Nt=At[6],$t=At[7],Vt=Dt.high,Ut=Dt.low,zt=jt.high,Bt=jt.low,Ht=Ft.high,Gt=Ft.low,Kt=Lt.high,Xt=Lt.low,or=Pt.high,tr=Pt.low,dr=Ot.high,fr=Ot.low,Sr=Nt.high,vr=Nt.low,mr=$t.high,hr=$t.low,gr=Vt,lr=Ut,Ir=zt,wr=Bt,Fr=Ht,$r=Gt,hn=Kt,Zr=Xt,Qt=or,Jt=tr,pr=dr,Vr=fr,Wr=Sr,zr=vr,ln=mr,xn=hr,yn=0;yn<80;yn++){var Wn,Mn,sn=wt[yn];if(yn<16)Mn=sn.high=0|Tt[It+2*yn],Wn=sn.low=0|Tt[It+2*yn+1];else{var qn=wt[yn-15],Gr=qn.high,qr=qn.low,wn=(Gr>>>1|qr<<31)^(Gr>>>8|qr<<24)^Gr>>>7,Cr=(qr>>>1|Gr<<31)^(qr>>>8|Gr<<24)^(qr>>>7|Gr<<25),nr=wt[yn-2],Ur=nr.high,Mr=nr.low,rn=(Ur>>>19|Mr<<13)^(Ur<<3|Mr>>>29)^Ur>>>6,Cn=(Mr>>>19|Ur<<13)^(Mr<<3|Ur>>>29)^(Mr>>>6|Ur<<26),Rr=wt[yn-7],pn=Rr.high,Tr=Rr.low,xr=wt[yn-16],jr=xr.high,en=xr.low;Mn=(Mn=(Mn=wn+pn+((Wn=Cr+Tr)>>>0<Cr>>>0?1:0))+rn+((Wn+=Cn)>>>0<Cn>>>0?1:0))+jr+((Wn+=en)>>>0<en>>>0?1:0),sn.high=Mn,sn.low=Wn}var fn,Vn=Qt&pr^~Qt&Wr,Yn=Jt&Vr^~Jt&zr,Hn=gr&Ir^gr&Fr^Ir&Fr,Bn=lr&wr^lr&$r^wr&$r,es=(gr>>>28|lr<<4)^(gr<<30|lr>>>2)^(gr<<25|lr>>>7),$s=(lr>>>28|gr<<4)^(lr<<30|gr>>>2)^(lr<<25|gr>>>7),Ss=(Qt>>>14|Jt<<18)^(Qt>>>18|Jt<<14)^(Qt<<23|Jt>>>9),zs=(Jt>>>14|Qt<<18)^(Jt>>>18|Qt<<14)^(Jt<<23|Qt>>>9),ro=Et[yn],Po=ro.high,To=ro.low,qo=ln+Ss+((fn=xn+zs)>>>0<xn>>>0?1:0),$a=$s+Bn;ln=Wr,xn=zr,Wr=pr,zr=Vr,pr=Qt,Vr=Jt,Qt=hn+(qo=(qo=(qo=qo+Vn+((fn+=Yn)>>>0<Yn>>>0?1:0))+Po+((fn+=To)>>>0<To>>>0?1:0))+Mn+((fn+=Wn)>>>0<Wn>>>0?1:0))+((Jt=Zr+fn|0)>>>0<Zr>>>0?1:0)|0,hn=Fr,Zr=$r,Fr=Ir,$r=wr,Ir=gr,wr=lr,gr=qo+(es+Hn+($a>>>0<$s>>>0?1:0))+((lr=fn+$a|0)>>>0<fn>>>0?1:0)|0}Ut=Dt.low=Ut+lr,Dt.high=Vt+gr+(Ut>>>0<lr>>>0?1:0),Bt=jt.low=Bt+wr,jt.high=zt+Ir+(Bt>>>0<wr>>>0?1:0),Gt=Ft.low=Gt+$r,Ft.high=Ht+Fr+(Gt>>>0<$r>>>0?1:0),Xt=Lt.low=Xt+Zr,Lt.high=Kt+hn+(Xt>>>0<Zr>>>0?1:0),tr=Pt.low=tr+Jt,Pt.high=or+Qt+(tr>>>0<Jt>>>0?1:0),fr=Ot.low=fr+Vr,Ot.high=dr+pr+(fr>>>0<Vr>>>0?1:0),vr=Nt.low=vr+zr,Nt.high=Sr+Wr+(vr>>>0<zr>>>0?1:0),hr=$t.low=hr+xn,$t.high=mr+ln+(hr>>>0<xn>>>0?1:0)},_doFinalize:function(){var Tt=this._data,It=Tt.words,At=8*this._nDataBytes,Dt=8*Tt.sigBytes;return It[Dt>>>5]|=128<<24-Dt%32,It[30+(Dt+128>>>10<<5)]=Math.floor(At/4294967296),It[31+(Dt+128>>>10<<5)]=At,Tt.sigBytes=4*It.length,this._process(),this._hash.toX32()},clone:function(){var Tt=mt.clone.call(this);return Tt._hash=this._hash.clone(),Tt},blockSize:32});ft.SHA512=mt._createHelper(Rt),ft.HmacSHA512=mt._createHmacHelper(Rt)}(),pt.SHA512)},4253:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var ft=pt,mt=ft.lib,gt=mt.WordArray,xt=mt.BlockCipher,yt=ft.algo,vt=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],St=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],Et=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],wt=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],Rt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Tt=yt.DES=xt.extend({_doReset:function(){for(var jt=this._key.words,Ft=[],Lt=0;Lt<56;Lt++){var Pt=vt[Lt]-1;Ft[Lt]=jt[Pt>>>5]>>>31-Pt%32&1}for(var Ot=this._subKeys=[],Nt=0;Nt<16;Nt++){var $t=Ot[Nt]=[],Vt=Et[Nt];for(Lt=0;Lt<24;Lt++)$t[Lt/6|0]|=Ft[(St[Lt]-1+Vt)%28]<<31-Lt%6,$t[4+(Lt/6|0)]|=Ft[28+(St[Lt+24]-1+Vt)%28]<<31-Lt%6;for($t[0]=$t[0]<<1|$t[0]>>>31,Lt=1;Lt<7;Lt++)$t[Lt]=$t[Lt]>>>4*(Lt-1)+3;$t[7]=$t[7]<<5|$t[7]>>>27}var Ut=this._invSubKeys=[];for(Lt=0;Lt<16;Lt++)Ut[Lt]=Ot[15-Lt]},encryptBlock:function(jt,Ft){this._doCryptBlock(jt,Ft,this._subKeys)},decryptBlock:function(jt,Ft){this._doCryptBlock(jt,Ft,this._invSubKeys)},_doCryptBlock:function(jt,Ft,Lt){this._lBlock=jt[Ft],this._rBlock=jt[Ft+1],It.call(this,4,252645135),It.call(this,16,65535),At.call(this,2,858993459),At.call(this,8,16711935),It.call(this,1,1431655765);for(var Pt=0;Pt<16;Pt++){for(var Ot=Lt[Pt],Nt=this._lBlock,$t=this._rBlock,Vt=0,Ut=0;Ut<8;Ut++)Vt|=wt[Ut][(($t^Ot[Ut])&Rt[Ut])>>>0];this._lBlock=$t,this._rBlock=Nt^Vt}var zt=this._lBlock;this._lBlock=this._rBlock,this._rBlock=zt,It.call(this,1,1431655765),At.call(this,8,16711935),At.call(this,2,858993459),It.call(this,16,65535),It.call(this,4,252645135),jt[Ft]=this._lBlock,jt[Ft+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function It(jt,Ft){var Lt=(this._lBlock>>>jt^this._rBlock)&Ft;this._rBlock^=Lt,this._lBlock^=Lt<<jt}function At(jt,Ft){var Lt=(this._rBlock>>>jt^this._lBlock)&Ft;this._lBlock^=Lt,this._rBlock^=Lt<<jt}ft.DES=xt._createHelper(Tt);var Dt=yt.TripleDES=xt.extend({_doReset:function(){var jt=this._key.words;if(jt.length!==2&&jt.length!==4&&jt.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var Ft=jt.slice(0,2),Lt=jt.length<4?jt.slice(0,2):jt.slice(2,4),Pt=jt.length<6?jt.slice(0,2):jt.slice(4,6);this._des1=Tt.createEncryptor(gt.create(Ft)),this._des2=Tt.createEncryptor(gt.create(Lt)),this._des3=Tt.createEncryptor(gt.create(Pt))},encryptBlock:function(jt,Ft){this._des1.encryptBlock(jt,Ft),this._des2.decryptBlock(jt,Ft),this._des3.encryptBlock(jt,Ft)},decryptBlock:function(jt,Ft){this._des3.decryptBlock(jt,Ft),this._des2.encryptBlock(jt,Ft),this._des1.decryptBlock(jt,Ft)},keySize:6,ivSize:2,blockSize:2});ft.TripleDES=xt._createHelper(Dt)}(),pt.TripleDES)},4938:function(ut,dt,ht){var pt;ut.exports=(pt=ht(8249),function(ft){var mt=pt,gt=mt.lib,xt=gt.Base,yt=gt.WordArray,vt=mt.x64={};vt.Word=xt.extend({init:function(St,Et){this.high=St,this.low=Et}}),vt.WordArray=xt.extend({init:function(St,Et){St=this.words=St||[],this.sigBytes=Et!=ft?Et:8*St.length},toX32:function(){for(var St=this.words,Et=St.length,wt=[],Rt=0;Rt<Et;Rt++){var Tt=St[Rt];wt.push(Tt.high),wt.push(Tt.low)}return yt.create(wt,this.sigBytes)},clone:function(){for(var St=xt.clone.call(this),Et=St.words=this.words.slice(0),wt=Et.length,Rt=0;Rt<wt;Rt++)Et[Rt]=Et[Rt].clone();return St}})}(),pt)},1227:(ut,dt,ht)=>{dt.formatArgs=function(ft){if(ft[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+ft[0]+(this.useColors?"%c ":" ")+"+"+ut.exports.humanize(this.diff),!this.useColors)return;const mt="color: "+this.color;ft.splice(1,0,mt,"color: inherit");let gt=0,xt=0;ft[0].replace(/%[a-zA-Z%]/g,yt=>{yt!=="%%"&&(gt++,yt==="%c"&&(xt=gt))}),ft.splice(xt,0,mt)},dt.save=function(ft){try{ft?dt.storage.setItem("debug",ft):dt.storage.removeItem("debug")}catch{}},dt.load=function(){let ft;try{ft=dt.storage.getItem("debug")}catch{}return!ft&&typeof process<"u"&&"env"in process&&(ft=it.DEBUG),ft},dt.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},dt.storage=function(){try{return localStorage}catch{}}(),dt.destroy=(()=>{let ft=!1;return()=>{ft||(ft=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),dt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],dt.log=console.debug||console.log||(()=>{}),ut.exports=ht(2447)(dt);const{formatters:pt}=ut.exports;pt.j=function(ft){try{return JSON.stringify(ft)}catch(mt){return"[UnexpectedJSONParseError]: "+mt.message}}},2447:(ut,dt,ht)=>{ut.exports=function(pt){function ft(xt){let yt,vt,St,Et=null;function wt(...Rt){if(!wt.enabled)return;const Tt=wt,It=Number(new Date),At=It-(yt||It);Tt.diff=At,Tt.prev=yt,Tt.curr=It,yt=It,Rt[0]=ft.coerce(Rt[0]),typeof Rt[0]!="string"&&Rt.unshift("%O");let Dt=0;Rt[0]=Rt[0].replace(/%([a-zA-Z%])/g,(jt,Ft)=>{if(jt==="%%")return"%";Dt++;const Lt=ft.formatters[Ft];if(typeof Lt=="function"){const Pt=Rt[Dt];jt=Lt.call(Tt,Pt),Rt.splice(Dt,1),Dt--}return jt}),ft.formatArgs.call(Tt,Rt),(Tt.log||ft.log).apply(Tt,Rt)}return wt.namespace=xt,wt.useColors=ft.useColors(),wt.color=ft.selectColor(xt),wt.extend=mt,wt.destroy=ft.destroy,Object.defineProperty(wt,"enabled",{enumerable:!0,configurable:!1,get:()=>Et!==null?Et:(vt!==ft.namespaces&&(vt=ft.namespaces,St=ft.enabled(xt)),St),set:Rt=>{Et=Rt}}),typeof ft.init=="function"&&ft.init(wt),wt}function mt(xt,yt){const vt=ft(this.namespace+(yt===void 0?":":yt)+xt);return vt.log=this.log,vt}function gt(xt){return xt.toString().substring(2,xt.toString().length-2).replace(/\.\*\?$/,"*")}return ft.debug=ft,ft.default=ft,ft.coerce=function(xt){return xt instanceof Error?xt.stack||xt.message:xt},ft.disable=function(){const xt=[...ft.names.map(gt),...ft.skips.map(gt).map(yt=>"-"+yt)].join(",");return ft.enable(""),xt},ft.enable=function(xt){let yt;ft.save(xt),ft.namespaces=xt,ft.names=[],ft.skips=[];const vt=(typeof xt=="string"?xt:"").split(/[\s,]+/),St=vt.length;for(yt=0;yt<St;yt++)vt[yt]&&((xt=vt[yt].replace(/\*/g,".*?"))[0]==="-"?ft.skips.push(new RegExp("^"+xt.slice(1)+"$")):ft.names.push(new RegExp("^"+xt+"$")))},ft.enabled=function(xt){if(xt[xt.length-1]==="*")return!0;let yt,vt;for(yt=0,vt=ft.skips.length;yt<vt;yt++)if(ft.skips[yt].test(xt))return!1;for(yt=0,vt=ft.names.length;yt<vt;yt++)if(ft.names[yt].test(xt))return!0;return!1},ft.humanize=ht(7824),ft.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(pt).forEach(xt=>{ft[xt]=pt[xt]}),ft.names=[],ft.skips=[],ft.formatters={},ft.selectColor=function(xt){let yt=0;for(let vt=0;vt<xt.length;vt++)yt=(yt<<5)-yt+xt.charCodeAt(vt),yt|=0;return ft.colors[Math.abs(yt)%ft.colors.length]},ft.enable(ft.load()),ft}},284:ut=>{var dt=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ut.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return dt()}try{return __global__||dt()}finally{delete Object.prototype.__global__}}()},7187:ut=>{var dt,ht=typeof Reflect=="object"?Reflect:null,pt=ht&&typeof ht.apply=="function"?ht.apply:function(At,Dt,jt){return Function.prototype.apply.call(At,Dt,jt)};dt=ht&&typeof ht.ownKeys=="function"?ht.ownKeys:Object.getOwnPropertySymbols?function(At){return Object.getOwnPropertyNames(At).concat(Object.getOwnPropertySymbols(At))}:function(At){return Object.getOwnPropertyNames(At)};var ft=Number.isNaN||function(At){return At!=At};function mt(){mt.init.call(this)}ut.exports=mt,ut.exports.once=function(At,Dt){return new Promise(function(jt,Ft){function Lt(Ot){At.removeListener(Dt,Pt),Ft(Ot)}function Pt(){typeof At.removeListener=="function"&&At.removeListener("error",Lt),jt([].slice.call(arguments))}It(At,Dt,Pt,{once:!0}),Dt!=="error"&&function(Ot,Nt,$t){typeof Ot.on=="function"&&It(Ot,"error",Nt,$t)}(At,Lt,{once:!0})})},mt.EventEmitter=mt,mt.prototype._events=void 0,mt.prototype._eventsCount=0,mt.prototype._maxListeners=void 0;var gt=10;function xt(At){if(typeof At!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof At)}function yt(At){return At._maxListeners===void 0?mt.defaultMaxListeners:At._maxListeners}function vt(At,Dt,jt,Ft){var Lt,Pt,Ot,Nt;if(xt(jt),(Pt=At._events)===void 0?(Pt=At._events=Object.create(null),At._eventsCount=0):(Pt.newListener!==void 0&&(At.emit("newListener",Dt,jt.listener?jt.listener:jt),Pt=At._events),Ot=Pt[Dt]),Ot===void 0)Ot=Pt[Dt]=jt,++At._eventsCount;else if(typeof Ot=="function"?Ot=Pt[Dt]=Ft?[jt,Ot]:[Ot,jt]:Ft?Ot.unshift(jt):Ot.push(jt),(Lt=yt(At))>0&&Ot.length>Lt&&!Ot.warned){Ot.warned=!0;var $t=new Error("Possible EventEmitter memory leak detected. "+Ot.length+" "+String(Dt)+" listeners added. Use emitter.setMaxListeners() to increase limit");$t.name="MaxListenersExceededWarning",$t.emitter=At,$t.type=Dt,$t.count=Ot.length,Nt=$t,console&&console.warn&&console.warn(Nt)}return At}function St(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Et(At,Dt,jt){var Ft={fired:!1,wrapFn:void 0,target:At,type:Dt,listener:jt},Lt=St.bind(Ft);return Lt.listener=jt,Ft.wrapFn=Lt,Lt}function wt(At,Dt,jt){var Ft=At._events;if(Ft===void 0)return[];var Lt=Ft[Dt];return Lt===void 0?[]:typeof Lt=="function"?jt?[Lt.listener||Lt]:[Lt]:jt?function(Pt){for(var Ot=new Array(Pt.length),Nt=0;Nt<Ot.length;++Nt)Ot[Nt]=Pt[Nt].listener||Pt[Nt];return Ot}(Lt):Tt(Lt,Lt.length)}function Rt(At){var Dt=this._events;if(Dt!==void 0){var jt=Dt[At];if(typeof jt=="function")return 1;if(jt!==void 0)return jt.length}return 0}function Tt(At,Dt){for(var jt=new Array(Dt),Ft=0;Ft<Dt;++Ft)jt[Ft]=At[Ft];return jt}function It(At,Dt,jt,Ft){if(typeof At.on=="function")Ft.once?At.once(Dt,jt):At.on(Dt,jt);else{if(typeof At.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof At);At.addEventListener(Dt,function Lt(Pt){Ft.once&&At.removeEventListener(Dt,Lt),jt(Pt)})}}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return gt},set:function(At){if(typeof At!="number"||At<0||ft(At))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+At+".");gt=At}}),mt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mt.prototype.setMaxListeners=function(At){if(typeof At!="number"||At<0||ft(At))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+At+".");return this._maxListeners=At,this},mt.prototype.getMaxListeners=function(){return yt(this)},mt.prototype.emit=function(At){for(var Dt=[],jt=1;jt<arguments.length;jt++)Dt.push(arguments[jt]);var Ft=At==="error",Lt=this._events;if(Lt!==void 0)Ft=Ft&&Lt.error===void 0;else if(!Ft)return!1;if(Ft){var Pt;if(Dt.length>0&&(Pt=Dt[0]),Pt instanceof Error)throw Pt;var Ot=new Error("Unhandled error."+(Pt?" ("+Pt.message+")":""));throw Ot.context=Pt,Ot}var Nt=Lt[At];if(Nt===void 0)return!1;if(typeof Nt=="function")pt(Nt,this,Dt);else{var $t=Nt.length,Vt=Tt(Nt,$t);for(jt=0;jt<$t;++jt)pt(Vt[jt],this,Dt)}return!0},mt.prototype.addListener=function(At,Dt){return vt(this,At,Dt,!1)},mt.prototype.on=mt.prototype.addListener,mt.prototype.prependListener=function(At,Dt){return vt(this,At,Dt,!0)},mt.prototype.once=function(At,Dt){return xt(Dt),this.on(At,Et(this,At,Dt)),this},mt.prototype.prependOnceListener=function(At,Dt){return xt(Dt),this.prependListener(At,Et(this,At,Dt)),this},mt.prototype.removeListener=function(At,Dt){var jt,Ft,Lt,Pt,Ot;if(xt(Dt),(Ft=this._events)===void 0)return this;if((jt=Ft[At])===void 0)return this;if(jt===Dt||jt.listener===Dt)--this._eventsCount==0?this._events=Object.create(null):(delete Ft[At],Ft.removeListener&&this.emit("removeListener",At,jt.listener||Dt));else if(typeof jt!="function"){for(Lt=-1,Pt=jt.length-1;Pt>=0;Pt--)if(jt[Pt]===Dt||jt[Pt].listener===Dt){Ot=jt[Pt].listener,Lt=Pt;break}if(Lt<0)return this;Lt===0?jt.shift():function(Nt,$t){for(;$t+1<Nt.length;$t++)Nt[$t]=Nt[$t+1];Nt.pop()}(jt,Lt),jt.length===1&&(Ft[At]=jt[0]),Ft.removeListener!==void 0&&this.emit("removeListener",At,Ot||Dt)}return this},mt.prototype.off=mt.prototype.removeListener,mt.prototype.removeAllListeners=function(At){var Dt,jt,Ft;if((jt=this._events)===void 0)return this;if(jt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):jt[At]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete jt[At]),this;if(arguments.length===0){var Lt,Pt=Object.keys(jt);for(Ft=0;Ft<Pt.length;++Ft)(Lt=Pt[Ft])!=="removeListener"&&this.removeAllListeners(Lt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Dt=jt[At])=="function")this.removeListener(At,Dt);else if(Dt!==void 0)for(Ft=Dt.length-1;Ft>=0;Ft--)this.removeListener(At,Dt[Ft]);return this},mt.prototype.listeners=function(At){return wt(this,At,!0)},mt.prototype.rawListeners=function(At){return wt(this,At,!1)},mt.listenerCount=function(At,Dt){return typeof At.listenerCount=="function"?At.listenerCount(Dt):Rt.call(At,Dt)},mt.prototype.listenerCount=Rt,mt.prototype.eventNames=function(){return this._eventsCount>0?dt(this._events):[]}},7764:function(ut,dt,ht){var pt=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const ft=pt(ht(1227)),mt="h264-profile-level-id";dt.Logger=class{constructor(gt){gt?(this._debug=(0,ft.default)(`${mt}:${gt}`),this._warn=(0,ft.default)(`${mt}:WARN:${gt}`),this._error=(0,ft.default)(`${mt}:ERROR:${gt}`)):(this._debug=(0,ft.default)(mt),this._warn=(0,ft.default)(`${mt}:WARN`),this._error=(0,ft.default)(`${mt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},4115:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.generateProfileLevelIdStringForAnswer=dt.isSameProfile=dt.parseSdpProfileLevelId=dt.levelToString=dt.profileToString=dt.profileLevelIdToString=dt.parseProfileLevelId=dt.ProfileLevelId=dt.Level=dt.Profile=void 0;const pt=new(ht(7764)).Logger;var ft,mt;(function(At){At[At.ConstrainedBaseline=1]="ConstrainedBaseline",At[At.Baseline=2]="Baseline",At[At.Main=3]="Main",At[At.ConstrainedHigh=4]="ConstrainedHigh",At[At.High=5]="High",At[At.PredictiveHigh444=6]="PredictiveHigh444"})(ft||(dt.Profile=ft={})),function(At){At[At.L1_b=0]="L1_b",At[At.L1=10]="L1",At[At.L1_1=11]="L1_1",At[At.L1_2=12]="L1_2",At[At.L1_3=13]="L1_3",At[At.L2=20]="L2",At[At.L2_1=21]="L2_1",At[At.L2_2=22]="L2_2",At[At.L3=30]="L3",At[At.L3_1=31]="L3_1",At[At.L3_2=32]="L3_2",At[At.L4=40]="L4",At[At.L4_1=41]="L4_1",At[At.L4_2=42]="L4_2",At[At.L5=50]="L5",At[At.L5_1=51]="L5_1",At[At.L5_2=52]="L5_2"}(mt||(dt.Level=mt={}));class gt{constructor(Dt,jt){this.profile=Dt,this.level=jt}}dt.ProfileLevelId=gt;const xt=new gt(ft.ConstrainedBaseline,mt.L3_1);class yt{constructor(Dt){this.mask=~Tt("x",Dt),this.masked_value=Tt("1",Dt)}isMatch(Dt){return this.masked_value===(Dt&this.mask)}}class vt{constructor(Dt,jt,Ft){this.profile_idc=Dt,this.profile_iop=jt,this.profile=Ft}}const St=[new vt(66,new yt("x1xx0000"),ft.ConstrainedBaseline),new vt(77,new yt("1xxx0000"),ft.ConstrainedBaseline),new vt(88,new yt("11xx0000"),ft.ConstrainedBaseline),new vt(66,new yt("x0xx0000"),ft.Baseline),new vt(88,new yt("10xx0000"),ft.Baseline),new vt(77,new yt("0x0x0000"),ft.Main),new vt(100,new yt("00000000"),ft.High),new vt(100,new yt("00001100"),ft.ConstrainedHigh),new vt(244,new yt("00000000"),ft.PredictiveHigh444)];function Et(At){if(typeof At!="string"||At.length!==6)return;const Dt=parseInt(At,16);if(Dt===0)return;const jt=255&Dt,Ft=Dt>>8&255,Lt=Dt>>16&255;let Pt;switch(jt){case mt.L1_1:Pt=16&Ft?mt.L1_b:mt.L1_1;break;case mt.L1:case mt.L1_2:case mt.L1_3:case mt.L2:case mt.L2_1:case mt.L2_2:case mt.L3:case mt.L3_1:case mt.L3_2:case mt.L4:case mt.L4_1:case mt.L4_2:case mt.L5:case mt.L5_1:case mt.L5_2:Pt=jt;break;default:return void pt.warn(`parseProfileLevelId() | unrecognized level_idc [str:${At}, level_idc:${jt}]`)}for(const Ot of St)if(Lt===Ot.profile_idc&&Ot.profile_iop.isMatch(Ft))return new gt(Ot.profile,Pt);pt.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${At}, profile_idc:${Lt}, profile_iop:${Ft}]`)}function wt(At){if(At.level==mt.L1_b)switch(At.profile){case ft.ConstrainedBaseline:return"42f00b";case ft.Baseline:return"42100b";case ft.Main:return"4d100b";default:return void pt.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${At.profile}`)}let Dt;switch(At.profile){case ft.ConstrainedBaseline:Dt="42e0";break;case ft.Baseline:Dt="4200";break;case ft.Main:Dt="4d00";break;case ft.ConstrainedHigh:Dt="640c";break;case ft.High:Dt="6400";break;case ft.PredictiveHigh444:Dt="f400";break;default:return void pt.warn(`profileLevelIdToString() | unrecognized profile ${At.profile}`)}let jt=At.level.toString(16);return jt.length===1&&(jt=`0${jt}`),`${Dt}${jt}`}function Rt(At={}){const Dt=At["profile-level-id"];return Dt?Et(Dt):xt}function Tt(At,Dt){return+(Dt[0]===At)<<7|+(Dt[1]===At)<<6|+(Dt[2]===At)<<5|+(Dt[3]===At)<<4|+(Dt[4]===At)<<3|+(Dt[5]===At)<<2|+(Dt[6]===At)<<1|+(Dt[7]===At)<<0}function It(At={}){const Dt=At["level-asymmetry-allowed"];return Dt===!0||Dt===1||Dt==="1"}dt.parseProfileLevelId=Et,dt.profileLevelIdToString=wt,dt.profileToString=function(At){switch(At){case ft.ConstrainedBaseline:return"ConstrainedBaseline";case ft.Baseline:return"Baseline";case ft.Main:return"Main";case ft.ConstrainedHigh:return"ConstrainedHigh";case ft.High:return"High";case ft.PredictiveHigh444:return"PredictiveHigh444";default:return void pt.warn(`profileToString() | unrecognized profile ${At}`)}},dt.levelToString=function(At){switch(At){case mt.L1_b:return"1b";case mt.L1:return"1";case mt.L1_1:return"1.1";case mt.L1_2:return"1.2";case mt.L1_3:return"1.3";case mt.L2:return"2";case mt.L2_1:return"2.1";case mt.L2_2:return"2.2";case mt.L3:return"3";case mt.L3_1:return"3.1";case mt.L3_2:return"3.2";case mt.L4:return"4";case mt.L4_1:return"4.1";case mt.L4_2:return"4.2";case mt.L5:return"5";case mt.L5_1:return"5.1";case mt.L5_2:return"5.2";default:return void pt.warn(`levelToString() | unrecognized level ${At}`)}},dt.parseSdpProfileLevelId=Rt,dt.isSameProfile=function(At={},Dt={}){const jt=Rt(At),Ft=Rt(Dt);return!!(jt&&Ft&&jt.profile===Ft.profile)},dt.generateProfileLevelIdStringForAnswer=function(At={},Dt={}){if(!At["profile-level-id"]&&!Dt["profile-level-id"])return void pt.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const jt=Rt(At),Ft=Rt(Dt);if(!jt)throw new TypeError("invalid local_profile_level_id");if(!Ft)throw new TypeError("invalid remote_profile_level_id");if(jt.profile!==Ft.profile)throw new TypeError("H264 Profile mismatch");const Lt=It(At)&&It(Dt),Pt=jt.level,Ot=Ft.level,Nt=function(zt,Bt){return zt===mt.L1_b?Bt!==mt.L1&&Bt!==mt.L1_b:Bt===mt.L1_b?zt!==mt.L1:zt<Bt}($t=Pt,Vt=Ot)?$t:Vt;var $t,Vt;const Ut=Lt?Pt:Nt;return pt.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${jt.profile}, level:${Ut}]`),wt(new gt(jt.profile,Ut))}},4301:(ut,dt,ht)=>{ht(7147),ut.exports=self.fetch.bind(self)},6808:(ut,dt,ht)=>{var pt,ft;(function(mt){(ft=typeof(pt=mt)=="function"?pt.call(dt,ht,dt,ut):pt)===void 0||(ut.exports=ft),ut.exports=mt()})(function(){function mt(){for(var xt=0,yt={};xt<arguments.length;xt++){var vt=arguments[xt];for(var St in vt)yt[St]=vt[St]}return yt}function gt(xt){return xt.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function xt(yt){function vt(){}function St(wt,Rt,Tt){if(typeof document<"u"){typeof(Tt=mt({path:"/"},vt.defaults,Tt)).expires=="number"&&(Tt.expires=new Date(1*new Date+864e5*Tt.expires)),Tt.expires=Tt.expires?Tt.expires.toUTCString():"";try{var It=JSON.stringify(Rt);/^[\{\[]/.test(It)&&(Rt=It)}catch{}Rt=yt.write?yt.write(Rt,wt):encodeURIComponent(String(Rt)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),wt=encodeURIComponent(String(wt)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var At="";for(var Dt in Tt)Tt[Dt]&&(At+="; "+Dt,Tt[Dt]!==!0&&(At+="="+Tt[Dt].split(";")[0]));return document.cookie=wt+"="+Rt+At}}function Et(wt,Rt){if(typeof document<"u"){for(var Tt={},It=document.cookie?document.cookie.split("; "):[],At=0;At<It.length;At++){var Dt=It[At].split("="),jt=Dt.slice(1).join("=");Rt||jt.charAt(0)!=='"'||(jt=jt.slice(1,-1));try{var Ft=gt(Dt[0]);if(jt=(yt.read||yt)(jt,Ft)||gt(jt),Rt)try{jt=JSON.parse(jt)}catch{}if(Tt[Ft]=jt,wt===Ft)break}catch{}}return wt?Tt[wt]:Tt}}return vt.set=St,vt.get=function(wt){return Et(wt,!1)},vt.getJSON=function(wt){return Et(wt,!0)},vt.remove=function(wt,Rt){St(wt,"",mt(Rt,{expires:-1}))},vt.defaults={},vt.withConverter=xt,vt}(function(){})})},773:(ut,dt,ht)=>{var pt="__lodash_hash_undefined__",ft="[object Function]",mt="[object GeneratorFunction]",gt=/^\[object .+?Constructor\]$/,xt=typeof ht.g=="object"&&ht.g&&ht.g.Object===Object&&ht.g,yt=typeof self=="object"&&self&&self.Object===Object&&self,vt=xt||yt||Function("return this")(),St,Et=Array.prototype,wt=Function.prototype,Rt=Object.prototype,Tt=vt["__core-js_shared__"],It=(St=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+St:"",At=wt.toString,Dt=Rt.hasOwnProperty,jt=Rt.toString,Ft=RegExp("^"+At.call(Dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=Et.splice,Pt=Ht(vt,"Map"),Ot=Ht(Object,"create");function Nt(Xt){var or=-1,tr=Xt?Xt.length:0;for(this.clear();++or<tr;){var dr=Xt[or];this.set(dr[0],dr[1])}}function $t(Xt){var or=-1,tr=Xt?Xt.length:0;for(this.clear();++or<tr;){var dr=Xt[or];this.set(dr[0],dr[1])}}function Vt(Xt){var or=-1,tr=Xt?Xt.length:0;for(this.clear();++or<tr;){var dr=Xt[or];this.set(dr[0],dr[1])}}function Ut(Xt,or){for(var tr,dr,fr=Xt.length;fr--;)if((tr=Xt[fr][0])===(dr=or)||tr!=tr&&dr!=dr)return fr;return-1}function zt(Xt){if(!Kt(Xt)||(or=Xt,It&&It in or))return!1;var or,tr=function(dr){var fr=Kt(dr)?jt.call(dr):"";return fr==ft||fr==mt}(Xt)||function(dr){var fr=!1;if(dr!=null&&typeof dr.toString!="function")try{fr=!!(dr+"")}catch{}return fr}(Xt)?Ft:gt;return tr.test(function(dr){if(dr!=null){try{return At.call(dr)}catch{}try{return dr+""}catch{}}return""}(Xt))}function Bt(Xt,or){var tr,dr,fr=Xt.__data__;return((dr=typeof(tr=or))=="string"||dr=="number"||dr=="symbol"||dr=="boolean"?tr!=="__proto__":tr===null)?fr[typeof or=="string"?"string":"hash"]:fr.map}function Ht(Xt,or){var tr=function(dr,fr){return dr==null?void 0:dr[fr]}(Xt,or);return zt(tr)?tr:void 0}function Gt(Xt,or){if(typeof Xt!="function"||or&&typeof or!="function")throw new TypeError("Expected a function");var tr=function(){var dr=arguments,fr=or?or.apply(this,dr):dr[0],Sr=tr.cache;if(Sr.has(fr))return Sr.get(fr);var vr=Xt.apply(this,dr);return tr.cache=Sr.set(fr,vr),vr};return tr.cache=new(Gt.Cache||Vt),tr}function Kt(Xt){var or=typeof Xt;return!!Xt&&(or=="object"||or=="function")}Nt.prototype.clear=function(){this.__data__=Ot?Ot(null):{}},Nt.prototype.delete=function(Xt){return this.has(Xt)&&delete this.__data__[Xt]},Nt.prototype.get=function(Xt){var or=this.__data__;if(Ot){var tr=or[Xt];return tr===pt?void 0:tr}return Dt.call(or,Xt)?or[Xt]:void 0},Nt.prototype.has=function(Xt){var or=this.__data__;return Ot?or[Xt]!==void 0:Dt.call(or,Xt)},Nt.prototype.set=function(Xt,or){return this.__data__[Xt]=Ot&&or===void 0?pt:or,this},$t.prototype.clear=function(){this.__data__=[]},$t.prototype.delete=function(Xt){var or=this.__data__,tr=Ut(or,Xt);return!(tr<0)&&(tr==or.length-1?or.pop():Lt.call(or,tr,1),!0)},$t.prototype.get=function(Xt){var or=this.__data__,tr=Ut(or,Xt);return tr<0?void 0:or[tr][1]},$t.prototype.has=function(Xt){return Ut(this.__data__,Xt)>-1},$t.prototype.set=function(Xt,or){var tr=this.__data__,dr=Ut(tr,Xt);return dr<0?tr.push([Xt,or]):tr[dr][1]=or,this},Vt.prototype.clear=function(){this.__data__={hash:new Nt,map:new(Pt||$t),string:new Nt}},Vt.prototype.delete=function(Xt){return Bt(this,Xt).delete(Xt)},Vt.prototype.get=function(Xt){return Bt(this,Xt).get(Xt)},Vt.prototype.has=function(Xt){return Bt(this,Xt).has(Xt)},Vt.prototype.set=function(Xt,or){return Bt(this,Xt).set(Xt,or),this},Gt.Cache=Vt,ut.exports=Gt},9514:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Consumer=void 0;const pt=ht(8562),ft=ht(4493),mt=ht(9992),gt=new pt.Logger("Consumer");class xt extends ft.EnhancedEventEmitter{constructor({id:vt,localId:St,producerId:Et,rtpReceiver:wt,track:Rt,rtpParameters:Tt,appData:It}){super(),this._closed=!1,this._observer=new ft.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._localId=St,this._producerId=Et,this._rtpReceiver=wt,this._track=Rt,this._rtpParameters=Tt,this._paused=!Rt.enabled,this._appData=It||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new mt.InvalidStateError("closed");return new Promise((vt,St)=>{this.safeEmit("@getstats",vt,St)})}pause(){gt.debug("pause()"),this._closed?gt.error("pause() | Consumer closed"):this._paused?gt.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){gt.debug("resume()"),this._closed?gt.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):gt.debug("resume() | Consumer is already resumed")}onTrackEnded(){gt.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}dt.Consumer=xt},1623:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.DataConsumer=void 0;const pt=ht(8562),ft=ht(4493),mt=new pt.Logger("DataConsumer");class gt extends ft.EnhancedEventEmitter{constructor({id:yt,dataProducerId:vt,dataChannel:St,sctpStreamParameters:Et,appData:wt}){super(),this._closed=!1,this._observer=new ft.EnhancedEventEmitter,mt.debug("constructor()"),this._id=yt,this._dataProducerId=vt,this._dataChannel=St,this._sctpStreamParameters=Et,this._appData=wt||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(yt){this._dataChannel.binaryType=yt}get appData(){return this._appData}set appData(yt){this._appData=yt}get observer(){return this._observer}close(){this._closed||(mt.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(mt.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(mt.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",yt=>{if(this._closed)return;let{error:vt}=yt;vt||(vt=new Error("unknown DataChannel error")),vt.errorDetail==="sctp-failure"?mt.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",vt.sctpCauseCode,vt.message):mt.error('DataChannel "error" event: %o',vt),this.safeEmit("error",vt)}),this._dataChannel.addEventListener("close",()=>{this._closed||(mt.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",yt=>{this._closed||this.safeEmit("message",yt.data)})}}dt.DataConsumer=gt},5504:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.DataProducer=void 0;const pt=ht(8562),ft=ht(4493),mt=ht(9992),gt=new pt.Logger("DataProducer");class xt extends ft.EnhancedEventEmitter{constructor({id:vt,dataChannel:St,sctpStreamParameters:Et,appData:wt}){super(),this._closed=!1,this._observer=new ft.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._dataChannel=St,this._sctpStreamParameters=Et,this._appData=wt||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(vt){this._dataChannel.bufferedAmountLowThreshold=vt}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(vt){if(gt.debug("send()"),this._closed)throw new mt.InvalidStateError("closed");this._dataChannel.send(vt)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(gt.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",vt=>{if(this._closed)return;let{error:St}=vt;St||(St=new Error("unknown DataChannel error")),St.errorDetail==="sctp-failure"?gt.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",St.sctpCauseCode,St.message):gt.error('DataChannel "error" event: %o',St),this.safeEmit("error",St)}),this._dataChannel.addEventListener("close",()=>{this._closed||(gt.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||gt.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}dt.DataProducer=xt},3120:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Ut,zt,Bt,Ht){Ht===void 0&&(Ht=Bt);var Gt=Object.getOwnPropertyDescriptor(zt,Bt);Gt&&!("get"in Gt?!zt.__esModule:Gt.writable||Gt.configurable)||(Gt={enumerable:!0,get:function(){return zt[Bt]}}),Object.defineProperty(Ut,Ht,Gt)}:function(Ut,zt,Bt,Ht){Ht===void 0&&(Ht=Bt),Ut[Ht]=zt[Bt]}),ft=this&&this.__setModuleDefault||(Object.create?function(Ut,zt){Object.defineProperty(Ut,"default",{enumerable:!0,value:zt})}:function(Ut,zt){Ut.default=zt}),mt=this&&this.__importStar||function(Ut){if(Ut&&Ut.__esModule)return Ut;var zt={};if(Ut!=null)for(var Bt in Ut)Bt!=="default"&&Object.prototype.hasOwnProperty.call(Ut,Bt)&&pt(zt,Ut,Bt);return ft(zt,Ut),zt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Device=dt.detectDevice=void 0;const gt=ht(2238),xt=ht(8562),yt=ht(4493),vt=ht(9992),St=mt(ht(3347)),Et=mt(ht(5280)),wt=ht(5202),Rt=ht(2960),Tt=ht(6656),It=ht(5372),At=ht(5697),Dt=ht(564),jt=ht(1419),Ft=ht(9862),Lt=ht(2205),Pt=ht(7392),Ot=ht(3433),Nt=ht(4770),$t=new xt.Logger("Device");function Vt(){var Ut,zt,Bt,Ht;if(typeof navigator=="object"&&navigator.product==="ReactNative")return $t.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void $t.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?($t.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):($t.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(typeof navigator!="object"||typeof navigator.userAgent!="string")$t.warn("detectDevice() | unknown device");else{const Gt=navigator.userAgent,Kt=new gt.UAParser(Gt);$t.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",Gt,Kt.getResult());const Xt=Kt.getBrowser(),or=(Ut=Xt.name)==null?void 0:Ut.toLowerCase(),tr=parseInt(Xt.major??"0"),dr=Kt.getEngine(),fr=(zt=dr.name)==null?void 0:zt.toLowerCase(),Sr=Kt.getOS(),vr=(Bt=Sr.name)==null?void 0:Bt.toLowerCase(),mr=parseFloat(Sr.version??"0"),hr=Kt.getDevice(),gr=(Ht=hr.model)==null?void 0:Ht.toLowerCase(),lr=vr==="ios"||gr==="ipad",Ir=or&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(or),wr=or&&["firefox","mobile firefox","mobile focus"].includes(or),Fr=or&&["safari","mobile safari"].includes(or),$r=or&&["edge"].includes(or);if((Ir||$r)&&!lr&&tr>=111)return"Chrome111";if(Ir&&!lr&&tr>=74||$r&&!lr&&tr>=88)return"Chrome74";if(Ir&&!lr&&tr>=70)return"Chrome70";if(Ir&&!lr&&tr>=67)return"Chrome67";if(Ir&&!lr&&tr>=55)return"Chrome55";if(wr&&!lr&&tr>=60)return"Firefox60";if(wr&&lr&&mr>=14.3||Fr&&tr>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Fr&&tr>=11)return"Safari11";if($r&&!lr&&tr>=11&&tr<=18)return"Edge11";if(fr==="webkit"&&lr&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(fr==="blink"){const hn=Gt.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(hn){const Zr=Number(hn[1]);return Zr>=111?"Chrome111":Zr>=74?"Chrome74":Zr>=70?"Chrome70":Zr>=67?"Chrome67":"Chrome55"}return"Chrome111"}$t.warn("detectDevice() | browser not supported [name:%s, version:%s]",or,tr)}}dt.detectDevice=Vt,dt.Device=class{constructor({handlerName:Ut,handlerFactory:zt,Handler:Bt}={}){if(this._loaded=!1,this._observer=new yt.EnhancedEventEmitter,$t.debug("constructor()"),Bt){if($t.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof Bt!="string")throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");Ut=Bt}if(Ut&&zt)throw new TypeError("just one of handlerName or handlerInterface can be given");if(zt)this._handlerFactory=zt;else{if(Ut)$t.debug("constructor() | handler given: %s",Ut);else{if(!(Ut=Vt()))throw new vt.UnsupportedError("device not supported");$t.debug("constructor() | detected handler: %s",Ut)}switch(Ut){case"Chrome111":this._handlerFactory=Rt.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=Tt.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=It.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=At.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=Dt.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=jt.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=Ft.Safari12.createFactory();break;case"Safari11":this._handlerFactory=Lt.Safari11.createFactory();break;case"Edge11":this._handlerFactory=Pt.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=Ot.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=Nt.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${Ut}"`)}}const Ht=this._handlerFactory();this._handlerName=Ht.name,Ht.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new vt.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new vt.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:Ut}){let zt;$t.debug("load() [routerRtpCapabilities:%o]",Ut),Ut=St.clone(Ut);try{if(this._loaded)throw new vt.InvalidStateError("already loaded");Et.validateRtpCapabilities(Ut),zt=this._handlerFactory();const Bt=await zt.getNativeRtpCapabilities();$t.debug("load() | got native RTP capabilities:%o",Bt),Et.validateRtpCapabilities(Bt),this._extendedRtpCapabilities=Et.getExtendedRtpCapabilities(Bt,Ut),$t.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=Et.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=Et.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Et.getRecvRtpCapabilities(this._extendedRtpCapabilities),Et.validateRtpCapabilities(this._recvRtpCapabilities),$t.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await zt.getNativeSctpCapabilities(),$t.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Et.validateSctpCapabilities(this._sctpCapabilities),$t.debug("load() succeeded"),this._loaded=!0,zt.close()}catch(Bt){throw zt&&zt.close(),Bt}}canProduce(Ut){if(!this._loaded)throw new vt.InvalidStateError("not loaded");if(Ut!=="audio"&&Ut!=="video")throw new TypeError(`invalid kind "${Ut}"`);return this._canProduceByKind[Ut]}createSendTransport({id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Kt,iceTransportPolicy:Xt,additionalSettings:or,proprietaryConstraints:tr,appData:dr}){return $t.debug("createSendTransport()"),this.createTransport({direction:"send",id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Kt,iceTransportPolicy:Xt,additionalSettings:or,proprietaryConstraints:tr,appData:dr})}createRecvTransport({id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Kt,iceTransportPolicy:Xt,additionalSettings:or,proprietaryConstraints:tr,appData:dr}){return $t.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Kt,iceTransportPolicy:Xt,additionalSettings:or,proprietaryConstraints:tr,appData:dr})}createTransport({direction:Ut,id:zt,iceParameters:Bt,iceCandidates:Ht,dtlsParameters:Gt,sctpParameters:Kt,iceServers:Xt,iceTransportPolicy:or,additionalSettings:tr,proprietaryConstraints:dr,appData:fr}){if(!this._loaded)throw new vt.InvalidStateError("not loaded");if(typeof zt!="string")throw new TypeError("missing id");if(typeof Bt!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(Ht))throw new TypeError("missing iceCandidates");if(typeof Gt!="object")throw new TypeError("missing dtlsParameters");if(Kt&&typeof Kt!="object")throw new TypeError("wrong sctpParameters");if(fr&&typeof fr!="object")throw new TypeError("if given, appData must be an object");const Sr=new wt.Transport({direction:Ut,id:zt,iceParameters:Bt,iceCandidates:Ht,dtlsParameters:Gt,sctpParameters:Kt,iceServers:Xt,iceTransportPolicy:or,additionalSettings:tr,proprietaryConstraints:dr,appData:fr,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Sr),Sr}}},4493:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.EnhancedEventEmitter=void 0;const pt=ht(7187),ft=new(ht(8562)).Logger("EnhancedEventEmitter");class mt extends pt.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(xt,...yt){return super.emit(xt,...yt)}safeEmit(xt,...yt){const vt=super.listenerCount(xt);try{return super.emit(xt,...yt)}catch(St){return ft.error("safeEmit() | event listener threw an error [eventName:%s]:%o",xt,St),!!vt}}on(xt,yt){return super.on(xt,yt),this}off(xt,yt){return super.off(xt,yt),this}addListener(xt,yt){return super.on(xt,yt),this}prependListener(xt,yt){return super.prependListener(xt,yt),this}once(xt,yt){return super.once(xt,yt),this}prependOnceListener(xt,yt){return super.prependOnceListener(xt,yt),this}removeListener(xt,yt){return super.off(xt,yt),this}removeAllListeners(xt){return super.removeAllListeners(xt),this}listenerCount(xt){return super.listenerCount(xt)}listeners(xt){return super.listeners(xt)}rawListeners(xt){return super.rawListeners(xt)}}dt.EnhancedEventEmitter=mt},8562:function(ut,dt,ht){var pt=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const ft=pt(ht(1227)),mt="mediasoup-client";dt.Logger=class{constructor(gt){gt?(this._debug=(0,ft.default)(`${mt}:${gt}`),this._warn=(0,ft.default)(`${mt}:WARN:${gt}`),this._error=(0,ft.default)(`${mt}:ERROR:${gt}`)):(this._debug=(0,ft.default)(mt),this._warn=(0,ft.default)(`${mt}:WARN`),this._error=(0,ft.default)(`${mt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6569:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Producer=void 0;const pt=ht(8562),ft=ht(4493),mt=ht(9992),gt=new pt.Logger("Producer");class xt extends ft.EnhancedEventEmitter{constructor({id:vt,localId:St,rtpSender:Et,track:wt,rtpParameters:Rt,stopTracks:Tt,disableTrackOnPause:It,zeroRtpOnPause:At,appData:Dt}){super(),this._closed=!1,this._observer=new ft.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._localId=St,this._rtpSender=Et,this._track=wt,this._kind=wt.kind,this._rtpParameters=Rt,this._paused=!!It&&!wt.enabled,this._maxSpatialLayer=void 0,this._stopTracks=Tt,this._disableTrackOnPause=It,this._zeroRtpOnPause=At,this._appData=Dt||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new mt.InvalidStateError("closed");return new Promise((vt,St)=>{this.safeEmit("@getstats",vt,St)})}pause(){gt.debug("pause()"),this._closed?gt.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((vt,St)=>{this.safeEmit("@pause",vt,St)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){gt.debug("resume()"),this._closed?gt.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((vt,St)=>{this.safeEmit("@resume",vt,St)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:vt}){if(gt.debug("replaceTrack() [track:%o]",vt),this._closed){if(vt&&this._stopTracks)try{vt.stop()}catch{}throw new mt.InvalidStateError("closed")}if(vt&&vt.readyState==="ended")throw new mt.InvalidStateError("track ended");vt!==this._track?(await new Promise((St,Et)=>{this.safeEmit("@replacetrack",vt,St,Et)}),this.destroyTrack(),this._track=vt,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):gt.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(vt){if(this._closed)throw new mt.InvalidStateError("closed");if(this._kind!=="video")throw new mt.UnsupportedError("not a video Producer");if(typeof vt!="number")throw new TypeError("invalid spatialLayer");vt!==this._maxSpatialLayer&&(await new Promise((St,Et)=>{this.safeEmit("@setmaxspatiallayer",vt,St,Et)}).catch(()=>{}),this._maxSpatialLayer=vt)}async setRtpEncodingParameters(vt){if(this._closed)throw new mt.InvalidStateError("closed");if(typeof vt!="object")throw new TypeError("invalid params");await new Promise((St,Et)=>{this.safeEmit("@setrtpencodingparameters",vt,St,Et)})}onTrackEnded(){gt.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}dt.Producer=xt},4879:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0})},7669:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0})},5202:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Pt,Ot,Nt,$t){$t===void 0&&($t=Nt);var Vt=Object.getOwnPropertyDescriptor(Ot,Nt);Vt&&!("get"in Vt?!Ot.__esModule:Vt.writable||Vt.configurable)||(Vt={enumerable:!0,get:function(){return Ot[Nt]}}),Object.defineProperty(Pt,$t,Vt)}:function(Pt,Ot,Nt,$t){$t===void 0&&($t=Nt),Pt[$t]=Ot[Nt]}),ft=this&&this.__setModuleDefault||(Object.create?function(Pt,Ot){Object.defineProperty(Pt,"default",{enumerable:!0,value:Ot})}:function(Pt,Ot){Pt.default=Ot}),mt=this&&this.__importStar||function(Pt){if(Pt&&Pt.__esModule)return Pt;var Ot={};if(Pt!=null)for(var Nt in Pt)Nt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Nt)&&pt(Ot,Pt,Nt);return ft(Ot,Pt),Ot},gt=this&&this.__importDefault||function(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Transport=void 0;const xt=ht(2186),yt=gt(ht(4375)),vt=ht(8562),St=ht(4493),Et=ht(9992),wt=mt(ht(3347)),Rt=mt(ht(5280)),Tt=ht(6569),It=ht(9514),At=ht(5504),Dt=ht(1623),jt=new vt.Logger("Transport");class Ft{constructor(Ot){this.consumerOptions=Ot,this.promise=new Promise((Nt,$t)=>{this.resolve=Nt,this.reject=$t})}}class Lt extends St.EnhancedEventEmitter{constructor({direction:Ot,id:Nt,iceParameters:$t,iceCandidates:Vt,dtlsParameters:Ut,sctpParameters:zt,iceServers:Bt,iceTransportPolicy:Ht,additionalSettings:Gt,proprietaryConstraints:Kt,appData:Xt,handlerFactory:or,extendedRtpCapabilities:tr,canProduceByKind:dr}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new xt.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new St.EnhancedEventEmitter,jt.debug("constructor() [id:%s, direction:%s]",Nt,Ot),this._id=Nt,this._direction=Ot,this._extendedRtpCapabilities=tr,this._canProduceByKind=dr,this._maxSctpMessageSize=zt?zt.maxMessageSize:null,delete(Gt=wt.clone(Gt)||{}).iceServers,delete Gt.iceTransportPolicy,delete Gt.bundlePolicy,delete Gt.rtcpMuxPolicy,delete Gt.sdpSemantics,this._handler=or(),this._handler.run({direction:Ot,iceParameters:$t,iceCandidates:Vt,dtlsParameters:Ut,sctpParameters:zt,iceServers:Bt,iceTransportPolicy:Ht,additionalSettings:Gt,proprietaryConstraints:Kt,extendedRtpCapabilities:tr}),this._appData=Xt||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(Ot){this._appData=Ot}get observer(){return this._observer}close(){if(!this._closed){jt.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const Ot of this._producers.values())Ot.transportClosed();this._producers.clear();for(const Ot of this._consumers.values())Ot.transportClosed();this._consumers.clear();for(const Ot of this._dataProducers.values())Ot.transportClosed();this._dataProducers.clear();for(const Ot of this._dataConsumers.values())Ot.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Et.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:Ot}){if(jt.debug("restartIce()"),this._closed)throw new Et.InvalidStateError("closed");if(!Ot)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(Ot),"transport.restartIce()")}async updateIceServers({iceServers:Ot}={}){if(jt.debug("updateIceServers()"),this._closed)throw new Et.InvalidStateError("closed");if(!Array.isArray(Ot))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(Ot),"transport.updateIceServers()")}async produce({track:Ot,encodings:Nt,codecOptions:$t,codec:Vt,stopTracks:Ut=!0,disableTrackOnPause:zt=!0,zeroRtpOnPause:Bt=!1,appData:Ht={}}={}){if(jt.debug("produce() [track:%o]",Ot),this._closed)throw new Et.InvalidStateError("closed");if(!Ot)throw new TypeError("missing track");if(this._direction!=="send")throw new Et.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[Ot.kind])throw new Et.UnsupportedError(`cannot produce ${Ot.kind}`);if(Ot.readyState==="ended")throw new Et.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(Ht&&typeof Ht!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let Gt;if(Nt&&!Array.isArray(Nt))throw TypeError("encodings must be an array");Nt&&Nt.length===0?Gt=void 0:Nt&&(Gt=Nt.map(tr=>{const dr={active:!0};return tr.active===!1&&(dr.active=!1),typeof tr.dtx=="boolean"&&(dr.dtx=tr.dtx),typeof tr.scalabilityMode=="string"&&(dr.scalabilityMode=tr.scalabilityMode),typeof tr.scaleResolutionDownBy=="number"&&(dr.scaleResolutionDownBy=tr.scaleResolutionDownBy),typeof tr.maxBitrate=="number"&&(dr.maxBitrate=tr.maxBitrate),typeof tr.maxFramerate=="number"&&(dr.maxFramerate=tr.maxFramerate),typeof tr.adaptivePtime=="boolean"&&(dr.adaptivePtime=tr.adaptivePtime),typeof tr.priority=="string"&&(dr.priority=tr.priority),typeof tr.networkPriority=="string"&&(dr.networkPriority=tr.networkPriority),dr}));const{localId:Kt,rtpParameters:Xt,rtpSender:or}=await this._handler.send({track:Ot,encodings:Gt,codecOptions:$t,codec:Vt});try{Rt.validateRtpParameters(Xt);const{id:tr}=await new Promise((fr,Sr)=>{this.safeEmit("produce",{kind:Ot.kind,rtpParameters:Xt,appData:Ht},fr,Sr)}),dr=new Tt.Producer({id:tr,localId:Kt,rtpSender:or,track:Ot,rtpParameters:Xt,stopTracks:Ut,disableTrackOnPause:zt,zeroRtpOnPause:Bt,appData:Ht});return this._producers.set(dr.id,dr),this.handleProducer(dr),this._observer.safeEmit("newproducer",dr),dr}catch(tr){throw this._handler.stopSending(Kt).catch(()=>{}),tr}},"transport.produce()").catch(Gt=>{if(Ut)try{Ot.stop()}catch{}throw Gt})}async consume({id:Ot,producerId:Nt,kind:$t,rtpParameters:Vt,streamId:Ut,appData:zt={}}){if(jt.debug("consume()"),Vt=wt.clone(Vt),this._closed)throw new Et.InvalidStateError("closed");if(this._direction!=="recv")throw new Et.UnsupportedError("not a receiving Transport");if(typeof Ot!="string")throw new TypeError("missing id");if(typeof Nt!="string")throw new TypeError("missing producerId");if($t!=="audio"&&$t!=="video")throw new TypeError(`invalid kind '${$t}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");if(!Rt.canReceive(Vt,this._extendedRtpCapabilities))throw new Et.UnsupportedError("cannot consume this Producer");const Bt=new Ft({id:Ot,producerId:Nt,kind:$t,rtpParameters:Vt,streamId:Ut,appData:zt});return this._pendingConsumerTasks.push(Bt),(0,yt.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),Bt.promise}async produceData({ordered:Ot=!0,maxPacketLifeTime:Nt,maxRetransmits:$t,label:Vt="",protocol:Ut="",appData:zt={}}={}){if(jt.debug("produceData()"),this._closed)throw new Et.InvalidStateError("closed");if(this._direction!=="send")throw new Et.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new Et.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");return(Nt||$t)&&(Ot=!1),this._awaitQueue.push(async()=>{const{dataChannel:Bt,sctpStreamParameters:Ht}=await this._handler.sendDataChannel({ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t,label:Vt,protocol:Ut});Rt.validateSctpStreamParameters(Ht);const{id:Gt}=await new Promise((Xt,or)=>{this.safeEmit("producedata",{sctpStreamParameters:Ht,label:Vt,protocol:Ut,appData:zt},Xt,or)}),Kt=new At.DataProducer({id:Gt,dataChannel:Bt,sctpStreamParameters:Ht,appData:zt});return this._dataProducers.set(Kt.id,Kt),this.handleDataProducer(Kt),this._observer.safeEmit("newdataproducer",Kt),Kt},"transport.produceData()")}async consumeData({id:Ot,dataProducerId:Nt,sctpStreamParameters:$t,label:Vt="",protocol:Ut="",appData:zt={}}){if(jt.debug("consumeData()"),$t=wt.clone($t),this._closed)throw new Et.InvalidStateError("closed");if(this._direction!=="recv")throw new Et.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new Et.UnsupportedError("SCTP not enabled by remote Transport");if(typeof Ot!="string")throw new TypeError("missing id");if(typeof Nt!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");return Rt.validateSctpStreamParameters($t),this._awaitQueue.push(async()=>{const{dataChannel:Bt}=await this._handler.receiveDataChannel({sctpStreamParameters:$t,label:Vt,protocol:Ut}),Ht=new Dt.DataConsumer({id:Ot,dataProducerId:Nt,dataChannel:Bt,sctpStreamParameters:$t,appData:zt});return this._dataConsumers.set(Ht.id,Ht),this.handleDataConsumer(Ht),this._observer.safeEmit("newdataconsumer",Ht),Ht},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void jt.debug("createPendingConsumers() | there is no Consumer to be created");const Ot=[...this._pendingConsumerTasks];let Nt;this._pendingConsumerTasks=[];const $t=[];for(const Vt of Ot){const{id:Ut,kind:zt,rtpParameters:Bt,streamId:Ht}=Vt.consumerOptions;$t.push({trackId:Ut,kind:zt,rtpParameters:Bt,streamId:Ht})}try{const Vt=await this._handler.receive($t);for(let Ut=0;Ut<Vt.length;++Ut){const zt=Ot[Ut],Bt=Vt[Ut],{id:Ht,producerId:Gt,kind:Kt,rtpParameters:Xt,appData:or}=zt.consumerOptions,{localId:tr,rtpReceiver:dr,track:fr}=Bt,Sr=new It.Consumer({id:Ht,localId:tr,producerId:Gt,rtpReceiver:dr,track:fr,rtpParameters:Xt,appData:or});this._consumers.set(Sr.id,Sr),this.handleConsumer(Sr),this._probatorConsumerCreated||Nt||Kt!=="video"||(Nt=Sr),this._observer.safeEmit("newconsumer",Sr),zt.resolve(Sr)}}catch(Vt){for(const Ut of Ot)Ut.reject(Vt)}if(Nt)try{const Vt=Rt.generateProbatorRtpParameters(Nt.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:Vt}]),jt.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(Vt){jt.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",Vt)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void jt.debug("pausePendingConsumers() | there is no Consumer to be paused");const Ot=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const Nt=Ot.map($t=>$t.localId);await this._handler.pauseReceiving(Nt)}catch(Nt){jt.error("pausePendingConsumers() | failed to pause Consumers:",Nt)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void jt.debug("resumePendingConsumers() | there is no Consumer to be resumed");const Ot=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const Nt=Ot.map($t=>$t.localId);await this._handler.resumeReceiving(Nt)}catch(Nt){jt.error("resumePendingConsumers() | failed to resume Consumers:",Nt)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void jt.debug("closePendingConsumers() | there is no Consumer to be closed");const Ot=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(Ot.map(Nt=>Nt.localId))}catch(Nt){jt.error("closePendingConsumers() | failed to close Consumers:",Nt)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const Ot=this._handler;Ot.on("@connect",({dtlsParameters:Nt},$t,Vt)=>{this._closed?Vt(new Et.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:Nt},$t,Vt)}),Ot.on("@icegatheringstatechange",Nt=>{Nt!==this._iceGatheringState&&(jt.debug("ICE gathering state changed to %s",Nt),this._iceGatheringState=Nt,this._closed||this.safeEmit("icegatheringstatechange",Nt))}),Ot.on("@connectionstatechange",Nt=>{Nt!==this._connectionState&&(jt.debug("connection state changed to %s",Nt),this._connectionState=Nt,this._closed||this.safeEmit("connectionstatechange",Nt))})}handleProducer(Ot){Ot.on("@close",()=>{this._producers.delete(Ot.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(Ot.localId),"producer @close event").catch(Nt=>jt.warn("producer.close() failed:%o",Nt))}),Ot.on("@pause",(Nt,$t)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(Ot.localId),"producer @pause event").then(Nt).catch($t)}),Ot.on("@resume",(Nt,$t)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(Ot.localId),"producer @resume event").then(Nt).catch($t)}),Ot.on("@replacetrack",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(Ot.localId,Nt),"producer @replacetrack event").then($t).catch(Vt)}),Ot.on("@setmaxspatiallayer",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(Ot.localId,Nt),"producer @setmaxspatiallayer event").then($t).catch(Vt)}),Ot.on("@setrtpencodingparameters",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(Ot.localId,Nt),"producer @setrtpencodingparameters event").then($t).catch(Vt)}),Ot.on("@getstats",(Nt,$t)=>{if(this._closed)return $t(new Et.InvalidStateError("closed"));this._handler.getSenderStats(Ot.localId).then(Nt).catch($t)})}handleConsumer(Ot){Ot.on("@close",()=>{this._consumers.delete(Ot.id),this._pendingPauseConsumers.delete(Ot.id),this._pendingResumeConsumers.delete(Ot.id),this._closed||(this._pendingCloseConsumers.set(Ot.id,Ot),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),Ot.on("@pause",()=>{this._pendingResumeConsumers.has(Ot.id)&&this._pendingResumeConsumers.delete(Ot.id),this._pendingPauseConsumers.set(Ot.id,Ot),(0,yt.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),Ot.on("@resume",()=>{this._pendingPauseConsumers.has(Ot.id)&&this._pendingPauseConsumers.delete(Ot.id),this._pendingResumeConsumers.set(Ot.id,Ot),(0,yt.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),Ot.on("@getstats",(Nt,$t)=>{if(this._closed)return $t(new Et.InvalidStateError("closed"));this._handler.getReceiverStats(Ot.localId).then(Nt).catch($t)})}handleDataProducer(Ot){Ot.on("@close",()=>{this._dataProducers.delete(Ot.id)})}handleDataConsumer(Ot){Ot.on("@close",()=>{this._dataConsumers.delete(Ot.id)})}}dt.Transport=Lt},9992:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.InvalidStateError=dt.UnsupportedError=void 0;class ht extends Error{constructor(mt){super(mt),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,ht):this.stack=new Error(mt).stack}}dt.UnsupportedError=ht;class pt extends Error{constructor(mt){super(mt),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,pt):this.stack=new Error(mt).stack}}dt.InvalidStateError=pt},2960:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Pt,Ot);$t&&!("get"in $t?!Pt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Pt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Pt[Ot]}),ft=this&&this.__setModuleDefault||(Object.create?function(Lt,Pt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Pt})}:function(Lt,Pt){Lt.default=Pt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Pt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&pt(Pt,Lt,Ot);return ft(Pt,Lt),Pt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome111=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9072)),wt=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Chrome111"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Pt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Pt.addTransceiver("audio"),Pt.addTransceiver("video");const Ot=await Pt.createOffer();try{Pt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return wt.addNackSuppportForOpus($t),$t}catch(Ot){try{Pt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Pt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Pt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(Pt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Pt,this._pc.setConfiguration(Ot)}async restartIce(Pt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Pt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Pt,encodings:Ot,codecOptions:Nt,codec:$t}){if(this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Pt.kind,Pt.id),Ot&&Ot.length>1){Ot.forEach((fr,Sr)=>{fr.rid=`r${Sr}`});let tr=1,dr=1;for(const fr of Ot){const Sr=fr.scalabilityMode?(0,At.parse)(fr.scalabilityMode).temporalLayers:3;Sr>dr&&(dr=Sr)}for(const fr of Ot)fr.rid="r"+tr++,fr.scalabilityMode=`L1T${dr}`}const Vt=yt.clone(this._sendingRtpParametersByKind[Pt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Pt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Pt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot}),Ht=await this._pc.createOffer();let Gt=gt.parse(Ht.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Ht),await this._pc.setLocalDescription(Ht);const Kt=Bt.mid;Vt.mid=Kt,Gt=gt.parse(this._pc.localDescription.sdp);const Xt=Gt.media[zt.idx];if(Vt.rtcp.cname=St.getCname({offerMediaObject:Xt}),Ot)if(Ot.length===1){const tr=Et.getRtpEncodings({offerMediaObject:Xt});Object.assign(tr[0],Ot[0]),Vt.encodings=tr}else Vt.encodings=Ot;else Vt.encodings=Et.getRtpEncodings({offerMediaObject:Xt});this._remoteSdp.send({offerMediaObject:Xt,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const or={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",or),await this._pc.setRemoteDescription(or),this._mapMidTransceiver.set(Kt,Bt),{localId:Kt,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Pt){if(this.assertSendDirection(),Dt.debug("stopSending() [localId:%s]",Pt),this._closed)return;const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Pt)}async pauseSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Pt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(this._remoteSdp.resumeSendingMediaSection(Pt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Pt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Pt);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Pt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Xt=>Xt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Kt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setRemoteDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Pt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Kt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Xt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Xt),this._remoteSdp.receive({mid:Xt,kind:Ht,offerRtpParameters:Gt,streamId:Kt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Pt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Kt=Ut.media.find(Xt=>String(Xt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Kt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Pt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Kt=>Kt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Pt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Pt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Pt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Pt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Pt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Kt=await this._pc.createAnswer();if(!this._transportReady){const Xt=gt.parse(Kt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setLocalDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Pt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Pt,this._remoteSdp.updateDtlsRole(Pt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome111=Ft},564:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Pt,Ot)}:function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt),jt[Pt]=Ft[Lt]}),ft=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&pt(Ft,jt,Lt);return ft(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome55=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),Et=mt(ht(2267)),wt=mt(ht(9875)),Rt=ht(9316),Tt=ht(7910),It=new xt.Logger("Chrome55"),At={OS:1024,MIS:1024};class Dt extends Rt.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(It.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Lt=await Ft.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{Ft.close()}catch{}const Pt=gt.parse(Lt.sdp);return Et.extractRtpCapabilities({sdpObject:Pt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt,planB:!0}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Bt),video:St.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Bt),video:St.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Pt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Pt),await this._pc.setRemoteDescription(Pt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Pt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id),Ot&&It.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(Ft),this._pc.addStream(this._sendStream);let Nt,$t=await this._pc.createOffer(),Vt=gt.parse($t.sdp);const Ut=vt.clone(this._sendingRtpParametersByKind[Ft.kind]);Ut.codecs=St.reduceCodecs(Ut.codecs);const zt=vt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);if(zt.codecs=St.reduceCodecs(zt.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Vt}),Ft.kind==="video"&&Lt&&Lt.length>1&&(It.debug("send() | enabling simulcast"),Vt=gt.parse($t.sdp),Nt=Vt.media.find(Gt=>Gt.type==="video"),wt.addLegacySimulcast({offerMediaObject:Nt,track:Ft,numStreams:Lt.length}),$t={type:"offer",sdp:gt.write(Vt)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t),Vt=gt.parse(this._pc.localDescription.sdp),Nt=Vt.media.find(Gt=>Gt.type===Ft.kind),Ut.rtcp.cname=Et.getCname({offerMediaObject:Nt}),Ut.encodings=wt.getRtpEncodings({offerMediaObject:Nt,track:Ft}),Lt)for(let Gt=0;Gt<Ut.encodings.length;++Gt)Lt[Gt]&&Object.assign(Ut.encodings[Gt],Lt[Gt]);if(Ut.encodings.length>1&&Ut.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Ut.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Nt,offerRtpParameters:Ut,answerRtpParameters:zt,codecOptions:Pt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(Ht,Ft),{localId:Ht,rtpParameters:Ut}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapSendLocalIdTrack.get(Ft);if(!Lt)throw new Error("track not found");this._mapSendLocalIdTrack.delete(Ft),this._sendStream.removeTrack(Lt),this._pc.addStream(this._sendStream);const Pt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Pt);try{await this._pc.setLocalDescription(Pt)}catch(Nt){if(this._sendStream.getTracks().length===0)return void It.warn("stopSending() | ignoring expected error due no sending tracks: %s",Nt.toString());throw Nt}if(this._pc.signalingState==="stable")return;const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setMaxSpatialLayer(Ft,Lt){throw new yt.UnsupportedError(" not implemented")}async setRtpEncodingParameters(Ft,Lt){throw new yt.UnsupportedError("not supported")}async getSenderStats(Ft){throw new yt.UnsupportedError("not implemented")}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Pt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Pt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[];for(const $t of Ft){const{trackId:Vt,kind:Ut,rtpParameters:zt,streamId:Bt}=$t;It.debug("receive() [trackId:%s, kind:%s]",Vt,Ut);const Ht=Ut;this._remoteSdp.receive({mid:Ht,kind:Ut,offerRtpParameters:zt,streamId:Bt||zt.rtcp.cname,trackId:Vt})}const Pt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Pt),await this._pc.setRemoteDescription(Pt);let Ot=await this._pc.createAnswer();const Nt=gt.parse(Ot.sdp);for(const $t of Ft){const{kind:Vt,rtpParameters:Ut}=$t,zt=Vt,Bt=Nt.media.find(Ht=>String(Ht.mid)===zt);Et.applyCodecParameters({offerRtpParameters:Ut,answerMediaObject:Bt})}Ot={type:"answer",sdp:gt.write(Nt)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Nt}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot);for(const $t of Ft){const{kind:Vt,trackId:Ut,rtpParameters:zt}=$t,Bt=Vt,Ht=Ut,Gt=$t.streamId||zt.rtcp.cname,Kt=this._pc.getRemoteStreams().find(Xt=>Xt.id===Gt).getTrackById(Ht);if(!Kt)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(Ht,{mid:Bt,rtpParameters:zt}),Lt.push({localId:Ht,track:Kt})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const{mid:Nt,rtpParameters:$t}=this._mapRecvLocalIdInfo.get(Ot)||{};this._mapRecvLocalIdInfo.delete(Ot),this._remoteSdp.planBStopReceiving({mid:Nt,offerRtpParameters:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){throw new yt.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Pt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Pt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Pt=Et.extractDtlsParameters({sdpObject:Lt});Pt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Pt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome55=Dt},5697:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft);var Pt=Object.getOwnPropertyDescriptor(jt,Ft);Pt&&!("get"in Pt?!jt.__esModule:Pt.writable||Pt.configurable)||(Pt={enumerable:!0,get:function(){return jt[Ft]}}),Object.defineProperty(Dt,Lt,Pt)}:function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft),Dt[Lt]=jt[Ft]}),ft=this&&this.__setModuleDefault||(Object.create?function(Dt,jt){Object.defineProperty(Dt,"default",{enumerable:!0,value:jt})}:function(Dt,jt){Dt.default=jt}),mt=this&&this.__importStar||function(Dt){if(Dt&&Dt.__esModule)return Dt;var jt={};if(Dt!=null)for(var Ft in Dt)Ft!=="default"&&Object.prototype.hasOwnProperty.call(Dt,Ft)&&pt(jt,Dt,Ft);return ft(jt,Dt),jt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome67=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9875)),wt=ht(9316),Rt=ht(7910),Tt=new xt.Logger("Chrome67"),It={OS:1024,MIS:1024};class At extends wt.HandlerInterface{static createFactory(){return()=>new At}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(Tt.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Tt.debug("getNativeRtpCapabilities()");const jt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Ft=await jt.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{jt.close()}catch{}const Lt=gt.parse(Ft.sdp);return St.extractRtpCapabilities({sdpObject:Lt})}catch(Ft){try{jt.close()}catch{}throw Ft}}async getNativeSctpCapabilities(){return Tt.debug("getNativeSctpCapabilities()"),{numStreams:It}}run({direction:jt,iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Pt,sctpParameters:Ot,iceServers:Nt,iceTransportPolicy:$t,additionalSettings:Vt,proprietaryConstraints:Ut,extendedRtpCapabilities:zt}){Tt.debug("run()"),this._direction=jt,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Pt,sctpParameters:Ot,planB:!0}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",zt),video:vt.getSendingRtpParameters("video",zt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",zt),video:vt.getSendingRemoteRtpParameters("video",zt)},Pt.role&&Pt.role!=="auto"&&(this._forcedLocalDtlsRole=Pt.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Nt||[],iceTransportPolicy:$t||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Vt},Ut),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Tt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(jt){Tt.debug("updateIceServers()");const Ft=this._pc.getConfiguration();Ft.iceServers=jt,this._pc.setConfiguration(Ft)}async restartIce(jt){if(Tt.debug("restartIce()"),this._remoteSdp.updateIceParameters(jt),this._transportReady)if(this._direction==="send"){const Ft=await this._pc.createOffer({iceRestart:!0});Tt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ft),await this._pc.setLocalDescription(Ft);const Lt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Lt),await this._pc.setRemoteDescription(Lt)}else{const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}}async getTransportStats(){return this._pc.getStats()}async send({track:jt,encodings:Ft,codecOptions:Lt,codec:Pt}){this.assertSendDirection(),Tt.debug("send() [kind:%s, track.id:%s]",jt.kind,jt.id),Pt&&Tt.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(jt),this._pc.addTrack(jt,this._sendStream);let Ot,Nt=await this._pc.createOffer(),$t=gt.parse(Nt.sdp);const Vt=yt.clone(this._sendingRtpParametersByKind[jt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[jt.kind]);if(Ut.codecs=vt.reduceCodecs(Ut.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),jt.kind==="video"&&Ft&&Ft.length>1&&(Tt.debug("send() | enabling simulcast"),$t=gt.parse(Nt.sdp),Ot=$t.media.find(Gt=>Gt.type==="video"),Et.addLegacySimulcast({offerMediaObject:Ot,track:jt,numStreams:Ft.length}),Nt={type:"offer",sdp:gt.write($t)}),Tt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt),$t=gt.parse(this._pc.localDescription.sdp),Ot=$t.media.find(Gt=>Gt.type===jt.kind),Vt.rtcp.cname=St.getCname({offerMediaObject:Ot}),Vt.encodings=Et.getRtpEncodings({offerMediaObject:Ot,track:jt}),Ft)for(let Gt=0;Gt<Vt.encodings.length;++Gt)Ft[Gt]&&Object.assign(Vt.encodings[Gt],Ft[Gt]);if(Vt.encodings.length>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Vt.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ot,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Lt});const zt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=String(this._nextSendLocalId);this._nextSendLocalId++;const Ht=this._pc.getSenders().find(Gt=>Gt.track===jt);return this._mapSendLocalIdRtpSender.set(Bt,Ht),{localId:Bt,rtpParameters:Vt,rtpSender:Ht}}async stopSending(jt){this.assertSendDirection(),Tt.debug("stopSending() [localId:%s]",jt);const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(Ft),Ft.track&&this._sendStream.removeTrack(Ft.track),this._mapSendLocalIdRtpSender.delete(jt);const Lt=await this._pc.createOffer();Tt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Lt);try{await this._pc.setLocalDescription(Lt)}catch(Ot){if(this._sendStream.getTracks().length===0)return void Tt.warn("stopSending() | ignoring expected error due no sending tracks: %s",Ot.toString());throw Ot}if(this._pc.signalingState==="stable")return;const Pt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Pt),await this._pc.setRemoteDescription(Pt)}async pauseSending(jt){}async resumeSending(jt){}async replaceTrack(jt,Ft){this.assertSendDirection(),Ft?Tt.debug("replaceTrack() [localId:%s, track.id:%s]",jt,Ft.id):Tt.debug("replaceTrack() [localId:%s, no track]",jt);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.track;await Lt.replaceTrack(Ft),Pt&&this._sendStream.removeTrack(Pt),Ft&&this._sendStream.addTrack(Ft)}async setMaxSpatialLayer(jt,Ft){this.assertSendDirection(),Tt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.getParameters();Pt.encodings.forEach((Ot,Nt)=>{Ot.active=Nt<=Ft}),await Lt.setParameters(Pt)}async setRtpEncodingParameters(jt,Ft){this.assertSendDirection(),Tt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.getParameters();Pt.encodings.forEach((Ot,Nt)=>{Pt.encodings[Nt]={...Ot,...Ft}}),await Lt.setParameters(Pt)}async getSenderStats(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");return Ft.getStats()}async sendDataChannel({ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,label:Pt,protocol:Ot}){this.assertSendDirection();const Nt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:jt,maxPacketLifeTime:Ft,maxRetransmitTime:Ft,maxRetransmits:Lt,protocol:Ot};Tt.debug("sendDataChannel() [options:%o]",Nt);const $t=this._pc.createDataChannel(Pt,Nt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%It.MIS,!this._hasDataChannelMediaSection){const Vt=await this._pc.createOffer(),Ut=gt.parse(Vt.sdp),zt=Ut.media.find(Ht=>Ht.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Tt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt),this._remoteSdp.sendSctpAssociation({offerMediaObject:zt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:$t,sctpStreamParameters:{streamId:Nt.id,ordered:Nt.ordered,maxPacketLifeTime:Nt.maxPacketLifeTime,maxRetransmits:Nt.maxRetransmits}}}async receive(jt){this.assertRecvDirection();const Ft=[];for(const Nt of jt){const{trackId:$t,kind:Vt,rtpParameters:Ut,streamId:zt}=Nt;Tt.debug("receive() [trackId:%s, kind:%s]",$t,Vt);const Bt=Vt;this._remoteSdp.receive({mid:Bt,kind:Vt,offerRtpParameters:Ut,streamId:zt||Ut.rtcp.cname,trackId:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);let Pt=await this._pc.createAnswer();const Ot=gt.parse(Pt.sdp);for(const Nt of jt){const{kind:$t,rtpParameters:Vt}=Nt,Ut=$t,zt=Ot.media.find(Bt=>String(Bt.mid)===Ut);St.applyCodecParameters({offerRtpParameters:Vt,answerMediaObject:zt})}Pt={type:"answer",sdp:gt.write(Ot)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ot}),Tt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt);for(const Nt of jt){const{kind:$t,trackId:Vt,rtpParameters:Ut}=Nt,zt=Vt,Bt=$t,Ht=this._pc.getReceivers().find(Gt=>Gt.track&&Gt.track.id===zt);if(!Ht)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(zt,{mid:Bt,rtpParameters:Ut,rtpReceiver:Ht}),Ft.push({localId:zt,track:Ht.track,rtpReceiver:Ht})}return Ft}async stopReceiving(jt){this.assertRecvDirection();for(const Pt of jt){Tt.debug("stopReceiving() [localId:%s]",Pt);const{mid:Ot,rtpParameters:Nt}=this._mapRecvLocalIdInfo.get(Pt)||{};this._mapRecvLocalIdInfo.delete(Pt),this._remoteSdp.planBStopReceiving({mid:Ot,offerRtpParameters:Nt})}const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}async pauseReceiving(jt){}async resumeReceiving(jt){}async getReceiverStats(jt){this.assertRecvDirection();const{rtpReceiver:Ft}=this._mapRecvLocalIdInfo.get(jt)||{};if(!Ft)throw new Error("associated RTCRtpReceiver not found");return Ft.getStats()}async receiveDataChannel({sctpStreamParameters:jt,label:Ft,protocol:Lt}){this.assertRecvDirection();const{streamId:Pt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t}=jt,Vt={negotiated:!0,id:Pt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmitTime:Nt,maxRetransmits:$t,protocol:Lt};Tt.debug("receiveDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Ft,Vt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const zt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=await this._pc.createAnswer();if(!this._transportReady){const Ht=gt.parse(Bt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht})}Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut}}async setupTransport({localDtlsRole:jt,localSdpObject:Ft}){Ft||(Ft=gt.parse(this._pc.localDescription.sdp));const Lt=St.extractDtlsParameters({sdpObject:Ft});Lt.role=jt,this._remoteSdp.updateDtlsRole(jt==="client"?"server":"client"),await new Promise((Pt,Ot)=>{this.safeEmit("@connect",{dtlsParameters:Lt},Pt,Ot)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome67=At},5372:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Pt,Ot)}:function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt),jt[Pt]=Ft[Lt]}),ft=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&pt(Ft,jt,Lt);return ft(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome70=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9072)),wt=ht(9316),Rt=ht(7910),Tt=ht(2770),It=new xt.Logger("Chrome70"),At={OS:1024,MIS:1024};class Dt extends wt.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(It.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Ft.addTransceiver("audio"),Ft.addTransceiver("video");const Lt=await Ft.createOffer();try{Ft.close()}catch{}const Pt=gt.parse(Lt.sdp);return St.extractRtpCapabilities({sdpObject:Pt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Bt),video:vt.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Bt),video:vt.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Pt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Pt),await this._pc.setRemoteDescription(Pt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Pt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id);const Nt=yt.clone(this._sendingRtpParametersByKind[Ft.kind]);Nt.codecs=vt.reduceCodecs(Nt.codecs,Ot);const $t=yt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);$t.codecs=vt.reduceCodecs($t.codecs,Ot);const Vt=this._remoteSdp.getNextMediaSectionIdx(),Ut=this._pc.addTransceiver(Ft,{direction:"sendonly",streams:[this._sendStream]});let zt,Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Lt&&Lt.length>1&&(It.debug("send() | enabling legacy simulcast"),Ht=gt.parse(Bt.sdp),zt=Ht.media[Vt.idx],Et.addLegacySimulcast({offerMediaObject:zt,numStreams:Lt.length}),Bt={type:"offer",sdp:gt.write(Ht)});let Gt=!1;const Kt=(0,Tt.parse)((Lt||[{}])[0].scalabilityMode);if(Lt&&Lt.length===1&&Kt.spatialLayers>1&&Nt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(It.debug("send() | enabling legacy simulcast for VP9 SVC"),Gt=!0,Ht=gt.parse(Bt.sdp),zt=Ht.media[Vt.idx],Et.addLegacySimulcast({offerMediaObject:zt,numStreams:Kt.spatialLayers}),Bt={type:"offer",sdp:gt.write(Ht)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),Lt){It.debug("send() | applying given encodings");const tr=Ut.sender.getParameters();for(let dr=0;dr<(tr.encodings||[]).length;++dr){const fr=tr.encodings[dr],Sr=Lt[dr];if(!Sr)break;tr.encodings[dr]=Object.assign(fr,Sr)}await Ut.sender.setParameters(tr)}const Xt=Ut.mid;if(Nt.mid=Xt,Ht=gt.parse(this._pc.localDescription.sdp),zt=Ht.media[Vt.idx],Nt.rtcp.cname=St.getCname({offerMediaObject:zt}),Nt.encodings=Et.getRtpEncodings({offerMediaObject:zt}),Lt)for(let tr=0;tr<Nt.encodings.length;++tr)Lt[tr]&&Object.assign(Nt.encodings[tr],Lt[tr]);if(Gt&&(Nt.encodings=[Nt.encodings[0]]),Nt.encodings.length>1&&(Nt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Nt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const tr of Nt.encodings)tr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:zt,reuseMid:Vt.reuseMid,offerRtpParameters:Nt,answerRtpParameters:$t,codecOptions:Pt});const or={type:"answer",sdp:this._remoteSdp.getSdp()};return It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",or),await this._pc.setRemoteDescription(or),this._mapMidTransceiver.set(Xt,Ut),{localId:Xt,rtpParameters:Nt,rtpSender:Ut.sender}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");if(Lt.sender.replaceTrack(null),this._pc.removeTrack(Lt.sender),this._remoteSdp.closeMediaSection(Lt.mid))try{Lt.stop()}catch{}const Pt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Pt),await this._pc.setLocalDescription(Pt);const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot),this._mapMidTransceiver.delete(Ft)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){this.assertSendDirection(),Lt?It.debug("replaceTrack() [localId:%s, track.id:%s]",Ft,Lt.id):It.debug("replaceTrack() [localId:%s, no track]",Ft);const Pt=this._mapMidTransceiver.get(Ft);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");await Pt.sender.replaceTrack(Lt)}async setMaxSpatialLayer(Ft,Lt){this.assertSendDirection(),It.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Ft,Lt);const Pt=this._mapMidTransceiver.get(Ft);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");const Ot=Pt.sender.getParameters();Ot.encodings.forEach((Vt,Ut)=>{Vt.active=Ut<=Lt}),await Pt.sender.setParameters(Ot),this._remoteSdp.muxMediaSectionSimulcast(Ft,Ot.encodings);const Nt=await this._pc.createOffer();It.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async setRtpEncodingParameters(Ft,Lt){this.assertSendDirection(),It.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Ft,Lt);const Pt=this._mapMidTransceiver.get(Ft);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");const Ot=Pt.sender.getParameters();Ot.encodings.forEach((Vt,Ut)=>{Ot.encodings[Ut]={...Vt,...Lt}}),await Pt.sender.setParameters(Ot),this._remoteSdp.muxMediaSectionSimulcast(Ft,Ot.encodings);const Nt=await this._pc.createOffer();It.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async getSenderStats(Ft){this.assertSendDirection();const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");return Lt.sender.getStats()}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Pt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Pt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[],Pt=new Map;for(const Vt of Ft){const{trackId:Ut,kind:zt,rtpParameters:Bt,streamId:Ht}=Vt;It.debug("receive() [trackId:%s, kind:%s]",Ut,zt);const Gt=Bt.mid||String(this._mapMidTransceiver.size);Pt.set(Ut,Gt),this._remoteSdp.receive({mid:Gt,kind:zt,offerRtpParameters:Bt,streamId:Ht||Bt.rtcp.cname,trackId:Ut})}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);let Nt=await this._pc.createAnswer();const $t=gt.parse(Nt.sdp);for(const Vt of Ft){const{trackId:Ut,rtpParameters:zt}=Vt,Bt=Pt.get(Ut),Ht=$t.media.find(Gt=>String(Gt.mid)===Bt);St.applyCodecParameters({offerRtpParameters:zt,answerMediaObject:Ht})}Nt={type:"answer",sdp:gt.write($t)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const Vt of Ft){const{trackId:Ut}=Vt,zt=Pt.get(Ut),Bt=this._pc.getTransceivers().find(Ht=>Ht.mid===zt);if(!Bt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(zt,Bt),Lt.push({localId:zt,track:Bt.receiver.track,rtpReceiver:Bt.receiver})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const Nt=this._mapMidTransceiver.get(Ot);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Nt.mid)}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt);for(const Ot of Ft)this._mapMidTransceiver.delete(Ot)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){this.assertRecvDirection();const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");return Lt.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Pt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Pt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Pt=St.extractDtlsParameters({sdpObject:Lt});Pt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Pt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome70=Dt},6656:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Pt,Ot);$t&&!("get"in $t?!Pt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Pt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Pt[Ot]}),ft=this&&this.__setModuleDefault||(Object.create?function(Lt,Pt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Pt})}:function(Lt,Pt){Lt.default=Pt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Pt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&pt(Pt,Lt,Ot);return ft(Pt,Lt),Pt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome74=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9072)),wt=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Chrome74"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Pt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Pt.addTransceiver("audio"),Pt.addTransceiver("video");const Ot=await Pt.createOffer();try{Pt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return wt.addNackSuppportForOpus($t),$t}catch(Ot){try{Pt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Pt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){Dt.debug("run()"),this._direction=Pt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(Pt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Pt,this._pc.setConfiguration(Ot)}async restartIce(Pt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Pt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Pt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Pt.kind,Pt.id),Ot&&Ot.length>1&&Ot.forEach((fr,Sr)=>{fr.rid=`r${Sr}`});const Vt=yt.clone(this._sendingRtpParametersByKind[Pt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Pt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Pt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot});let Ht,Gt=await this._pc.createOffer(),Kt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Kt});let Xt=!1;const or=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length===1&&or.spatialLayers>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Dt.debug("send() | enabling legacy simulcast for VP9 SVC"),Xt=!0,Kt=gt.parse(Gt.sdp),Ht=Kt.media[zt.idx],Et.addLegacySimulcast({offerMediaObject:Ht,numStreams:or.spatialLayers}),Gt={type:"offer",sdp:gt.write(Kt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);const tr=Bt.mid;if(Vt.mid=tr,Kt=gt.parse(this._pc.localDescription.sdp),Ht=Kt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Ot)if(Ot.length===1){let fr=Et.getRtpEncodings({offerMediaObject:Ht});Object.assign(fr[0],Ot[0]),Xt&&(fr=[fr[0]]),Vt.encodings=fr}else Vt.encodings=Ot;else Vt.encodings=Et.getRtpEncodings({offerMediaObject:Ht});if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const fr of Vt.encodings)fr.scalabilityMode?fr.scalabilityMode=`L1T${or.temporalLayers}`:fr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const dr={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",dr),await this._pc.setRemoteDescription(dr),this._mapMidTransceiver.set(tr,Bt),{localId:tr,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Pt){if(this.assertSendDirection(),Dt.debug("stopSending() [localId:%s]",Pt),this._closed)return;const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Pt)}async pauseSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Pt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(this._remoteSdp.resumeSendingMediaSection(Pt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Pt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Pt);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Pt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Xt=>Xt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Kt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setRemoteDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Pt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Kt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Xt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Xt),this._remoteSdp.receive({mid:Xt,kind:Ht,offerRtpParameters:Gt,streamId:Kt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Pt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Kt=Ut.media.find(Xt=>String(Xt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Kt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Pt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Kt=>Kt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Pt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Pt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Pt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Pt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Pt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Kt=await this._pc.createAnswer();if(!this._transportReady){const Xt=gt.parse(Kt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setLocalDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Pt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Pt,this._remoteSdp.updateDtlsRole(Pt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome74=Ft},7392:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Tt,It,At,Dt){Dt===void 0&&(Dt=At);var jt=Object.getOwnPropertyDescriptor(It,At);jt&&!("get"in jt?!It.__esModule:jt.writable||jt.configurable)||(jt={enumerable:!0,get:function(){return It[At]}}),Object.defineProperty(Tt,Dt,jt)}:function(Tt,It,At,Dt){Dt===void 0&&(Dt=At),Tt[Dt]=It[At]}),ft=this&&this.__setModuleDefault||(Object.create?function(Tt,It){Object.defineProperty(Tt,"default",{enumerable:!0,value:It})}:function(Tt,It){Tt.default=It}),mt=this&&this.__importStar||function(Tt){if(Tt&&Tt.__esModule)return Tt;var It={};if(Tt!=null)for(var At in Tt)At!=="default"&&Object.prototype.hasOwnProperty.call(Tt,At)&&pt(It,Tt,At);return ft(It,Tt),It};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Edge11=void 0;const gt=ht(8562),xt=ht(9992),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(3635)),Et=ht(9316),wt=new gt.Logger("Edge11");class Rt extends Et.HandlerInterface{static createFactory(){return()=>new Rt}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){wt.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const It of this._rtpSenders.values())try{It.stop()}catch{}for(const It of this._rtpReceivers.values())try{It.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return wt.debug("getNativeRtpCapabilities()"),St.getCapabilities()}async getNativeSctpCapabilities(){return wt.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:It,iceParameters:At,iceCandidates:Dt,dtlsParameters:jt,sctpParameters:Ft,iceServers:Lt,iceTransportPolicy:Pt,additionalSettings:Ot,proprietaryConstraints:Nt,extendedRtpCapabilities:$t}){wt.debug("run()"),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",$t),video:vt.getSendingRtpParameters("video",$t)},this._remoteIceParameters=At,this._remoteIceCandidates=Dt,this._remoteDtlsParameters=jt,this._cname=`CNAME-${yt.generateRandomNumber()}`,this.setIceGatherer({iceServers:Lt,iceTransportPolicy:Pt}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(It){throw new xt.UnsupportedError("not supported")}async restartIce(It){if(wt.debug("restartIce()"),this._remoteIceParameters=It,this._transportReady){wt.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,It,"controlling");for(const At of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(At);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:It,encodings:At,codecOptions:Dt,codec:jt}){wt.debug("send() [kind:%s, track.id:%s]",It.kind,It.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),wt.debug("send() | calling new RTCRtpSender()");const Ft=new RTCRtpSender(It,this._dtlsTransport),Lt=yt.clone(this._sendingRtpParametersByKind[It.kind]);Lt.codecs=vt.reduceCodecs(Lt.codecs,jt);const Pt=Lt.codecs.some($t=>/.+\/rtx$/i.test($t.mimeType));At||(At=[{}]);for(const $t of At)$t.ssrc=yt.generateRandomNumber(),Pt&&($t.rtx={ssrc:yt.generateRandomNumber()});Lt.encodings=At,Lt.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const Ot=St.mangleRtpParameters(Lt);wt.debug("send() | calling rtpSender.send() [params:%o]",Ot),await Ft.send(Ot);const Nt=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(Nt,Ft),{localId:Nt,rtpParameters:Lt,rtpSender:Ft}}async stopSending(It){wt.debug("stopSending() [localId:%s]",It);const At=this._rtpSenders.get(It);if(!At)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(It);try{wt.debug("stopSending() | calling rtpSender.stop()"),At.stop()}catch(Dt){throw wt.warn("stopSending() | rtpSender.stop() failed:%o",Dt),Dt}}async pauseSending(It){}async resumeSending(It){}async replaceTrack(It,At){At?wt.debug("replaceTrack() [localId:%s, track.id:%s]",It,At.id):wt.debug("replaceTrack() [localId:%s, no track]",It);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");Dt.setTrack(At)}async setMaxSpatialLayer(It,At){wt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",It,At);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");const jt=Dt.getParameters();jt.encodings.forEach((Ft,Lt)=>{Ft.active=Lt<=At}),await Dt.setParameters(jt)}async setRtpEncodingParameters(It,At){wt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",It,At);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");const jt=Dt.getParameters();jt.encodings.forEach((Ft,Lt)=>{jt.encodings[Lt]={...Ft,...At}}),await Dt.setParameters(jt)}async getSenderStats(It){const At=this._rtpSenders.get(It);if(!At)throw new Error("RTCRtpSender not found");return At.getStats()}async sendDataChannel(It){throw new xt.UnsupportedError("not implemented")}async receive(It){const At=[];for(const Dt of It){const{trackId:jt,kind:Ft}=Dt;wt.debug("receive() [trackId:%s, kind:%s]",jt,Ft)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const Dt of It){const{trackId:jt,kind:Ft,rtpParameters:Lt}=Dt;wt.debug("receive() | calling new RTCRtpReceiver()");const Pt=new RTCRtpReceiver(this._dtlsTransport,Ft);Pt.addEventListener("error",$t=>{wt.error('rtpReceiver "error" event [event:%o]',$t)});const Ot=St.mangleRtpParameters(Lt);wt.debug("receive() | calling rtpReceiver.receive() [params:%o]",Ot),await Pt.receive(Ot);const Nt=jt;this._rtpReceivers.set(Nt,Pt),At.push({localId:Nt,track:Pt.track,rtpReceiver:Pt})}return At}async stopReceiving(It){for(const At of It){wt.debug("stopReceiving() [localId:%s]",At);const Dt=this._rtpReceivers.get(At);if(!Dt)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(At);try{wt.debug("stopReceiving() | calling rtpReceiver.stop()"),Dt.stop()}catch(jt){wt.warn("stopReceiving() | rtpReceiver.stop() failed:%o",jt)}}}async pauseReceiving(It){}async resumeReceiving(It){}async getReceiverStats(It){const At=this._rtpReceivers.get(It);if(!At)throw new Error("RTCRtpReceiver not found");return At.getStats()}async receiveDataChannel(It){throw new xt.UnsupportedError("not implemented")}setIceGatherer({iceServers:It,iceTransportPolicy:At}){const Dt=new RTCIceGatherer({iceServers:It||[],gatherPolicy:At||"all"});Dt.addEventListener("error",jt=>{wt.error('iceGatherer "error" event [event:%o]',jt)});try{Dt.gather()}catch(jt){wt.debug("setIceGatherer() | iceGatherer.gather() failed: %s",jt.toString())}this._iceGatherer=Dt}setIceTransport(){const It=new RTCIceTransport(this._iceGatherer);It.addEventListener("statechange",()=>{switch(It.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),It.addEventListener("icestatechange",()=>{switch(It.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),It.addEventListener("candidatepairchange",At=>{wt.debug('iceTransport "candidatepairchange" event [pair:%o]',At.pair)}),this._iceTransport=It}setDtlsTransport(){const It=new RTCDtlsTransport(this._iceTransport);It.addEventListener("statechange",()=>{wt.debug('dtlsTransport "statechange" event [state:%s]',It.state)}),It.addEventListener("dtlsstatechange",()=>{wt.debug('dtlsTransport "dtlsstatechange" event [state:%s]',It.state),It.state==="closed"&&this.emit("@connectionstatechange","closed")}),It.addEventListener("error",At=>{wt.error('dtlsTransport "error" event [event:%o]',At)}),this._dtlsTransport=It}async setupTransport({localDtlsRole:It}){wt.debug("setupTransport()");const At=this._dtlsTransport.getLocalParameters();At.role=It,await new Promise((Dt,jt)=>{this.safeEmit("@connect",{dtlsParameters:At},Dt,jt)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const Dt of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(Dt);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(Dt=>Dt.algorithm==="sha-256"||Dt.algorithm==="sha-384"||Dt.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}dt.Edge11=Rt},1419:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Ft,Lt,Pt,Ot){Ot===void 0&&(Ot=Pt);var Nt=Object.getOwnPropertyDescriptor(Lt,Pt);Nt&&!("get"in Nt?!Lt.__esModule:Nt.writable||Nt.configurable)||(Nt={enumerable:!0,get:function(){return Lt[Pt]}}),Object.defineProperty(Ft,Ot,Nt)}:function(Ft,Lt,Pt,Ot){Ot===void 0&&(Ot=Pt),Ft[Ot]=Lt[Pt]}),ft=this&&this.__setModuleDefault||(Object.create?function(Ft,Lt){Object.defineProperty(Ft,"default",{enumerable:!0,value:Lt})}:function(Ft,Lt){Ft.default=Lt}),mt=this&&this.__importStar||function(Ft){if(Ft&&Ft.__esModule)return Ft;var Lt={};if(Ft!=null)for(var Pt in Ft)Pt!=="default"&&Object.prototype.hasOwnProperty.call(Ft,Pt)&&pt(Lt,Ft,Pt);return ft(Lt,Ft),Lt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Firefox60=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),Et=mt(ht(2267)),wt=mt(ht(9072)),Rt=ht(9316),Tt=ht(7910),It=ht(2770),At=new xt.Logger("Firefox60"),Dt={OS:16,MIS:2048};class jt extends Rt.HandlerInterface{static createFactory(){return()=>new jt}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(At.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){At.debug("getNativeRtpCapabilities()");const Lt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),Pt=document.createElement("canvas");Pt.getContext("2d");const Ot=Pt.captureStream().getVideoTracks()[0];try{Lt.addTransceiver("audio",{direction:"sendrecv"});const Nt=Lt.addTransceiver(Ot,{direction:"sendrecv"}),$t=Nt.sender.getParameters(),Vt=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];$t.encodings=Vt,await Nt.sender.setParameters($t);const Ut=await Lt.createOffer();try{Pt.remove()}catch{}try{Ot.stop()}catch{}try{Lt.close()}catch{}const zt=gt.parse(Ut.sdp);return Et.extractRtpCapabilities({sdpObject:zt})}catch(Nt){try{Pt.remove()}catch{}try{Ot.stop()}catch{}try{Lt.close()}catch{}throw Nt}}async getNativeSctpCapabilities(){return At.debug("getNativeSctpCapabilities()"),{numStreams:Dt}}run({direction:Lt,iceParameters:Pt,iceCandidates:Ot,dtlsParameters:Nt,sctpParameters:$t,iceServers:Vt,iceTransportPolicy:Ut,additionalSettings:zt,proprietaryConstraints:Bt,extendedRtpCapabilities:Ht}){this.assertNotClosed(),At.debug("run()"),this._direction=Lt,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Pt,iceCandidates:Ot,dtlsParameters:Nt,sctpParameters:$t}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Ht),video:St.getSendingRtpParameters("video",Ht)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Ht),video:St.getSendingRemoteRtpParameters("video",Ht)},this._pc=new RTCPeerConnection({iceServers:Vt||[],iceTransportPolicy:Ut||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...zt},Bt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(At.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Lt){throw this.assertNotClosed(),new yt.UnsupportedError("not supported")}async restartIce(Lt){if(this.assertNotClosed(),At.debug("restartIce()"),this._remoteSdp.updateIceParameters(Lt),this._transportReady)if(this._direction==="send"){const Pt=await this._pc.createOffer({iceRestart:!0});At.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Pt),await this._pc.setLocalDescription(Pt);const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}else{const Pt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Pt),await this._pc.setRemoteDescription(Pt);const Ot=await this._pc.createAnswer();At.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Lt,encodings:Pt,codecOptions:Ot,codec:Nt}){this.assertNotClosed(),this.assertSendDirection(),At.debug("send() [kind:%s, track.id:%s]",Lt.kind,Lt.id),Pt&&(Pt=vt.clone(Pt)).length>1&&(Pt.forEach((or,tr)=>{or.rid=`r${tr}`}),Pt.reverse());const $t=vt.clone(this._sendingRtpParametersByKind[Lt.kind]);$t.codecs=St.reduceCodecs($t.codecs,Nt);const Vt=vt.clone(this._sendingRemoteRtpParametersByKind[Lt.kind]);Vt.codecs=St.reduceCodecs(Vt.codecs,Nt);const Ut=this._pc.addTransceiver(Lt,{direction:"sendonly",streams:[this._sendStream]});if(Pt){const or=Ut.sender.getParameters();or.encodings=Pt,await Ut.sender.setParameters(or)}const zt=await this._pc.createOffer();let Bt=gt.parse(zt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Bt});const Ht=(0,It.parse)((Pt||[{}])[0].scalabilityMode);At.debug("send() | calling pc.setLocalDescription() [offer:%o]",zt),await this._pc.setLocalDescription(zt);const Gt=Ut.mid;$t.mid=Gt,Bt=gt.parse(this._pc.localDescription.sdp);const Kt=Bt.media[Bt.media.length-1];if($t.rtcp.cname=Et.getCname({offerMediaObject:Kt}),Pt)if(Pt.length===1){const or=wt.getRtpEncodings({offerMediaObject:Kt});Object.assign(or[0],Pt[0]),$t.encodings=or}else $t.encodings=Pt.reverse();else $t.encodings=wt.getRtpEncodings({offerMediaObject:Kt});if($t.encodings.length>1&&($t.codecs[0].mimeType.toLowerCase()==="video/vp8"||$t.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const or of $t.encodings)or.scalabilityMode?or.scalabilityMode=`L1T${Ht.temporalLayers}`:or.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Kt,offerRtpParameters:$t,answerRtpParameters:Vt,codecOptions:Ot,extmapAllowMixed:!0});const Xt={type:"answer",sdp:this._remoteSdp.getSdp()};return At.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setRemoteDescription(Xt),this._mapMidTransceiver.set(Gt,Ut),{localId:Gt,rtpParameters:$t,rtpSender:Ut.sender}}async stopSending(Lt){if(this.assertSendDirection(),At.debug("stopSending() [localId:%s]",Lt),this._closed)return;const Pt=this._mapMidTransceiver.get(Lt);if(!Pt)throw new Error("associated transceiver not found");Pt.sender.replaceTrack(null),this._pc.removeTrack(Pt.sender),this._remoteSdp.disableMediaSection(Pt.mid);const Ot=await this._pc.createOffer();At.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt),this._mapMidTransceiver.delete(Lt)}async pauseSending(Lt){this.assertNotClosed(),this.assertSendDirection(),At.debug("pauseSending() [localId:%s]",Lt);const Pt=this._mapMidTransceiver.get(Lt);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");Pt.direction="inactive",this._remoteSdp.pauseMediaSection(Lt);const Ot=await this._pc.createOffer();At.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}async resumeSending(Lt){this.assertNotClosed(),this.assertSendDirection(),At.debug("resumeSending() [localId:%s]",Lt);const Pt=this._mapMidTransceiver.get(Lt);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");Pt.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(Lt);const Ot=await this._pc.createOffer();At.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}async replaceTrack(Lt,Pt){this.assertNotClosed(),this.assertSendDirection(),Pt?At.debug("replaceTrack() [localId:%s, track.id:%s]",Lt,Pt.id):At.debug("replaceTrack() [localId:%s, no track]",Lt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");await Ot.sender.replaceTrack(Pt)}async setMaxSpatialLayer(Lt,Pt){this.assertNotClosed(),this.assertSendDirection(),At.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Lt,Pt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated transceiver not found");const Nt=Ot.sender.getParameters();Pt=Nt.encodings.length-1-Pt,Nt.encodings.forEach((Ut,zt)=>{Ut.active=zt>=Pt}),await Ot.sender.setParameters(Nt),this._remoteSdp.muxMediaSectionSimulcast(Lt,Nt.encodings);const $t=await this._pc.createOffer();At.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t);const Vt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Vt),await this._pc.setRemoteDescription(Vt)}async setRtpEncodingParameters(Lt,Pt){this.assertNotClosed(),this.assertSendDirection(),At.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Lt,Pt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");const Nt=Ot.sender.getParameters();Nt.encodings.forEach((Ut,zt)=>{Nt.encodings[zt]={...Ut,...Pt}}),await Ot.sender.setParameters(Nt),this._remoteSdp.muxMediaSectionSimulcast(Lt,Nt.encodings);const $t=await this._pc.createOffer();At.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t);const Vt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Vt),await this._pc.setRemoteDescription(Vt)}async getSenderStats(Lt){this.assertNotClosed(),this.assertSendDirection();const Pt=this._mapMidTransceiver.get(Lt);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");return Pt.sender.getStats()}async sendDataChannel({ordered:Lt,maxPacketLifeTime:Pt,maxRetransmits:Ot,label:Nt,protocol:$t}){this.assertNotClosed(),this.assertSendDirection();const Vt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Lt,maxPacketLifeTime:Pt,maxRetransmits:Ot,protocol:$t};At.debug("sendDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Nt,Vt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Dt.MIS,!this._hasDataChannelMediaSection){const zt=await this._pc.createOffer(),Bt=gt.parse(zt.sdp),Ht=Bt.media.find(Kt=>Kt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Bt}),At.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",zt),await this._pc.setLocalDescription(zt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Ht});const Gt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Gt),await this._pc.setRemoteDescription(Gt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut,sctpStreamParameters:{streamId:Vt.id,ordered:Vt.ordered,maxPacketLifeTime:Vt.maxPacketLifeTime,maxRetransmits:Vt.maxRetransmits}}}async receive(Lt){this.assertNotClosed(),this.assertRecvDirection();const Pt=[],Ot=new Map;for(const Ut of Lt){const{trackId:zt,kind:Bt,rtpParameters:Ht,streamId:Gt}=Ut;At.debug("receive() [trackId:%s, kind:%s]",zt,Bt);const Kt=Ht.mid||String(this._mapMidTransceiver.size);Ot.set(zt,Kt),this._remoteSdp.receive({mid:Kt,kind:Bt,offerRtpParameters:Ht,streamId:Gt||Ht.rtcp.cname,trackId:zt})}const Nt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Nt),await this._pc.setRemoteDescription(Nt);let $t=await this._pc.createAnswer();const Vt=gt.parse($t.sdp);for(const Ut of Lt){const{trackId:zt,rtpParameters:Bt}=Ut,Ht=Ot.get(zt),Gt=Vt.media.find(Kt=>String(Kt.mid)===Ht);Et.applyCodecParameters({offerRtpParameters:Bt,answerMediaObject:Gt}),$t={type:"answer",sdp:gt.write(Vt)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Vt}),At.debug("receive() | calling pc.setLocalDescription() [answer:%o]",$t),await this._pc.setLocalDescription($t);for(const Ut of Lt){const{trackId:zt}=Ut,Bt=Ot.get(zt),Ht=this._pc.getTransceivers().find(Gt=>Gt.mid===Bt);if(!Ht)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Bt,Ht),Pt.push({localId:Bt,track:Ht.receiver.track,rtpReceiver:Ht.receiver})}return Pt}async stopReceiving(Lt){if(this.assertRecvDirection(),this._closed)return;for(const Nt of Lt){At.debug("stopReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection($t.mid)}const Pt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Pt),await this._pc.setRemoteDescription(Pt);const Ot=await this._pc.createAnswer();At.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot);for(const Nt of Lt)this._mapMidTransceiver.delete(Nt)}async pauseReceiving(Lt){this.assertNotClosed(),this.assertRecvDirection();for(const Nt of Lt){At.debug("pauseReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");$t.direction="inactive",this._remoteSdp.pauseMediaSection(Nt)}const Pt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Pt),await this._pc.setRemoteDescription(Pt);const Ot=await this._pc.createAnswer();At.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}async resumeReceiving(Lt){this.assertNotClosed(),this.assertRecvDirection();for(const Nt of Lt){At.debug("resumeReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");$t.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(Nt)}const Pt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Pt),await this._pc.setRemoteDescription(Pt);const Ot=await this._pc.createAnswer();At.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}async getReceiverStats(Lt){this.assertRecvDirection();const Pt=this._mapMidTransceiver.get(Lt);if(!Pt)throw new Error("associated RTCRtpTransceiver not found");return Pt.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Lt,label:Pt,protocol:Ot}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:Nt,ordered:$t,maxPacketLifeTime:Vt,maxRetransmits:Ut}=Lt,zt={negotiated:!0,id:Nt,ordered:$t,maxPacketLifeTime:Vt,maxRetransmits:Ut,protocol:Ot};At.debug("receiveDataChannel() [options:%o]",zt);const Bt=this._pc.createDataChannel(Pt,zt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Ht={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Ht),await this._pc.setRemoteDescription(Ht);const Gt=await this._pc.createAnswer();if(!this._transportReady){const Kt=gt.parse(Gt.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Kt})}At.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Gt),await this._pc.setLocalDescription(Gt),this._hasDataChannelMediaSection=!0}return{dataChannel:Bt}}async setupTransport({localDtlsRole:Lt,localSdpObject:Pt}){Pt||(Pt=gt.parse(this._pc.localDescription.sdp));const Ot=Et.extractDtlsParameters({sdpObject:Pt});Ot.role=Lt,this._remoteSdp.updateDtlsRole(Lt==="client"?"server":"client"),await new Promise((Nt,$t)=>{this.safeEmit("@connect",{dtlsParameters:Ot},Nt,$t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new yt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Firefox60=jt},9316:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.HandlerInterface=void 0;const pt=ht(4493);class ft extends pt.EnhancedEventEmitter{constructor(){super()}}dt.HandlerInterface=ft},4770:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Pt,Ot)}:function(jt,Ft,Lt,Pt){Pt===void 0&&(Pt=Lt),jt[Pt]=Ft[Lt]}),ft=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&pt(Ft,jt,Lt);return ft(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReactNative=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),Et=mt(ht(2267)),wt=mt(ht(9875)),Rt=ht(9316),Tt=ht(7910),It=new xt.Logger("ReactNative"),At={OS:1024,MIS:1024};class Dt extends Rt.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(It.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Lt=await Ft.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{Ft.close()}catch{}const Pt=gt.parse(Lt.sdp);return Et.extractRtpCapabilities({sdpObject:Pt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Lt,iceCandidates:Pt,dtlsParameters:Ot,sctpParameters:Nt,planB:!0}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Bt),video:St.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Bt),video:St.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Pt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Pt),await this._pc.setRemoteDescription(Pt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Pt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id),Ot&&It.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(Ft),this._pc.addStream(this._sendStream);let Nt,$t=await this._pc.createOffer(),Vt=gt.parse($t.sdp);const Ut=vt.clone(this._sendingRtpParametersByKind[Ft.kind]);Ut.codecs=St.reduceCodecs(Ut.codecs);const zt=vt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);if(zt.codecs=St.reduceCodecs(zt.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Vt}),Ft.kind==="video"&&Lt&&Lt.length>1&&(It.debug("send() | enabling simulcast"),Vt=gt.parse($t.sdp),Nt=Vt.media.find(Gt=>Gt.type==="video"),wt.addLegacySimulcast({offerMediaObject:Nt,track:Ft,numStreams:Lt.length}),$t={type:"offer",sdp:gt.write(Vt)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t),Vt=gt.parse(this._pc.localDescription.sdp),Nt=Vt.media.find(Gt=>Gt.type===Ft.kind),Ut.rtcp.cname=Et.getCname({offerMediaObject:Nt}),Ut.encodings=wt.getRtpEncodings({offerMediaObject:Nt,track:Ft}),Lt)for(let Gt=0;Gt<Ut.encodings.length;++Gt)Lt[Gt]&&Object.assign(Ut.encodings[Gt],Lt[Gt]);if(Ut.encodings.length>1&&(Ut.codecs[0].mimeType.toLowerCase()==="video/vp8"||Ut.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Gt of Ut.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Nt,offerRtpParameters:Ut,answerRtpParameters:zt,codecOptions:Pt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(Ht,Ft),{localId:Ht,rtpParameters:Ut}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapSendLocalIdTrack.get(Ft);if(!Lt)throw new Error("track not found");this._mapSendLocalIdTrack.delete(Ft),this._sendStream.removeTrack(Lt),this._pc.addStream(this._sendStream);const Pt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Pt);try{await this._pc.setLocalDescription(Pt)}catch(Nt){if(this._sendStream.getTracks().length===0)return void It.warn("stopSending() | ignoring expected error due no sending tracks: %s",Nt.toString());throw Nt}if(this._pc.signalingState==="stable")return;const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setMaxSpatialLayer(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setRtpEncodingParameters(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async getSenderStats(Ft){throw new yt.UnsupportedError("not implemented")}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Pt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Pt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[],Pt=new Map;for(const Vt of Ft){const{trackId:Ut,kind:zt,rtpParameters:Bt}=Vt;It.debug("receive() [trackId:%s, kind:%s]",Ut,zt);const Ht=zt;let Gt=Vt.streamId||Bt.rtcp.cname;It.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),Gt+=`-hack-${vt.generateRandomNumber()}`,Pt.set(Ut,Gt),this._remoteSdp.receive({mid:Ht,kind:zt,offerRtpParameters:Bt,streamId:Gt,trackId:Ut})}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);let Nt=await this._pc.createAnswer();const $t=gt.parse(Nt.sdp);for(const Vt of Ft){const{kind:Ut,rtpParameters:zt}=Vt,Bt=Ut,Ht=$t.media.find(Gt=>String(Gt.mid)===Bt);Et.applyCodecParameters({offerRtpParameters:zt,answerMediaObject:Ht})}Nt={type:"answer",sdp:gt.write($t)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const Vt of Ft){const{kind:Ut,trackId:zt,rtpParameters:Bt}=Vt,Ht=zt,Gt=Ut,Kt=Pt.get(zt),Xt=this._pc.getRemoteStreams().find(or=>or.id===Kt).getTrackById(Ht);if(!Xt)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(Ht,{mid:Gt,rtpParameters:Bt}),Lt.push({localId:Ht,track:Xt})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const{mid:Nt,rtpParameters:$t}=this._mapRecvLocalIdInfo.get(Ot)||{};this._mapRecvLocalIdInfo.delete(Ot),this._remoteSdp.planBStopReceiving({mid:Nt,offerRtpParameters:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Pt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){throw new yt.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Pt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Pt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Pt=Et.extractDtlsParameters({sdpObject:Lt});Pt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Pt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.ReactNative=Dt},3433:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Pt,Ot);$t&&!("get"in $t?!Pt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Pt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Pt[Ot]}),ft=this&&this.__setModuleDefault||(Object.create?function(Lt,Pt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Pt})}:function(Lt,Pt){Lt.default=Pt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Pt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&pt(Pt,Lt,Ot);return ft(Pt,Lt),Pt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReactNativeUnifiedPlan=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9072)),wt=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("ReactNativeUnifiedPlan"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Pt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Pt.addTransceiver("audio"),Pt.addTransceiver("video");const Ot=await Pt.createOffer();try{Pt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return wt.addNackSuppportForOpus($t),$t}catch(Ot){try{Pt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Pt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Pt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Pt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Pt,this._pc.setConfiguration(Ot)}async restartIce(Pt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Pt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Pt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Pt.kind,Pt.id),Ot&&Ot.length>1&&Ot.forEach((fr,Sr)=>{fr.rid=`r${Sr}`});const Vt=yt.clone(this._sendingRtpParametersByKind[Pt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Pt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Pt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot});let Ht,Gt=await this._pc.createOffer(),Kt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Kt});let Xt=!1;const or=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length===1&&or.spatialLayers>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Dt.debug("send() | enabling legacy simulcast for VP9 SVC"),Xt=!0,Kt=gt.parse(Gt.sdp),Ht=Kt.media[zt.idx],Et.addLegacySimulcast({offerMediaObject:Ht,numStreams:or.spatialLayers}),Gt={type:"offer",sdp:gt.write(Kt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);let tr=Bt.mid??void 0;if(tr||Dt.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),Vt.mid=tr,Kt=gt.parse(this._pc.localDescription.sdp),Ht=Kt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Ot)if(Ot.length===1){let fr=Et.getRtpEncodings({offerMediaObject:Ht});Object.assign(fr[0],Ot[0]),Xt&&(fr=[fr[0]]),Vt.encodings=fr}else Vt.encodings=Ot;else Vt.encodings=Et.getRtpEncodings({offerMediaObject:Ht});if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const fr of Vt.encodings)fr.scalabilityMode?fr.scalabilityMode=`L1T${or.temporalLayers}`:fr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const dr={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",dr),await this._pc.setRemoteDescription(dr),tr||(tr=Bt.mid,Vt.mid=tr),this._mapMidTransceiver.set(tr,Bt),{localId:tr,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Pt){if(this.assertSendDirection(),this._closed)return;Dt.debug("stopSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Pt)}async pauseSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Pt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(this._remoteSdp.resumeSendingMediaSection(Pt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Pt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Pt);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Pt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Xt=>Xt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Kt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setRemoteDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Pt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Kt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Xt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Xt),this._remoteSdp.receive({mid:Xt,kind:Ht,offerRtpParameters:Gt,streamId:Kt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Pt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Kt=Ut.media.find(Xt=>String(Xt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Kt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Pt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Kt=>Kt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Pt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Pt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Pt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Pt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Pt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Kt=await this._pc.createAnswer();if(!this._transportReady){const Xt=gt.parse(Kt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setLocalDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Pt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Pt,this._remoteSdp.updateDtlsRole(Pt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.ReactNativeUnifiedPlan=Ft},2205:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft);var Pt=Object.getOwnPropertyDescriptor(jt,Ft);Pt&&!("get"in Pt?!jt.__esModule:Pt.writable||Pt.configurable)||(Pt={enumerable:!0,get:function(){return jt[Ft]}}),Object.defineProperty(Dt,Lt,Pt)}:function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft),Dt[Lt]=jt[Ft]}),ft=this&&this.__setModuleDefault||(Object.create?function(Dt,jt){Object.defineProperty(Dt,"default",{enumerable:!0,value:jt})}:function(Dt,jt){Dt.default=jt}),mt=this&&this.__importStar||function(Dt){if(Dt&&Dt.__esModule)return Dt;var jt={};if(Dt!=null)for(var Ft in Dt)Ft!=="default"&&Object.prototype.hasOwnProperty.call(Dt,Ft)&&pt(jt,Dt,Ft);return ft(jt,Dt),jt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Safari11=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9875)),wt=ht(9316),Rt=ht(7910),Tt=new xt.Logger("Safari11"),It={OS:1024,MIS:1024};class At extends wt.HandlerInterface{static createFactory(){return()=>new At}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(Tt.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Tt.debug("getNativeRtpCapabilities()");const jt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Ft=await jt.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{jt.close()}catch{}const Lt=gt.parse(Ft.sdp);return St.extractRtpCapabilities({sdpObject:Lt})}catch(Ft){try{jt.close()}catch{}throw Ft}}async getNativeSctpCapabilities(){return Tt.debug("getNativeSctpCapabilities()"),{numStreams:It}}run({direction:jt,iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Pt,sctpParameters:Ot,iceServers:Nt,iceTransportPolicy:$t,additionalSettings:Vt,proprietaryConstraints:Ut,extendedRtpCapabilities:zt}){Tt.debug("run()"),this._direction=jt,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Pt,sctpParameters:Ot,planB:!0}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",zt),video:vt.getSendingRtpParameters("video",zt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",zt),video:vt.getSendingRemoteRtpParameters("video",zt)},Pt.role&&Pt.role!=="auto"&&(this._forcedLocalDtlsRole=Pt.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Nt||[],iceTransportPolicy:$t||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...Vt},Ut),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Tt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(jt){Tt.debug("updateIceServers()");const Ft=this._pc.getConfiguration();Ft.iceServers=jt,this._pc.setConfiguration(Ft)}async restartIce(jt){if(Tt.debug("restartIce()"),this._remoteSdp.updateIceParameters(jt),this._transportReady)if(this._direction==="send"){const Ft=await this._pc.createOffer({iceRestart:!0});Tt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ft),await this._pc.setLocalDescription(Ft);const Lt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Lt),await this._pc.setRemoteDescription(Lt)}else{const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}}async getTransportStats(){return this._pc.getStats()}async send({track:jt,encodings:Ft,codecOptions:Lt,codec:Pt}){this.assertSendDirection(),Tt.debug("send() [kind:%s, track.id:%s]",jt.kind,jt.id),Pt&&Tt.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(jt),this._pc.addTrack(jt,this._sendStream);let Ot,Nt=await this._pc.createOffer(),$t=gt.parse(Nt.sdp);const Vt=yt.clone(this._sendingRtpParametersByKind[jt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[jt.kind]);if(Ut.codecs=vt.reduceCodecs(Ut.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),jt.kind==="video"&&Ft&&Ft.length>1&&(Tt.debug("send() | enabling simulcast"),$t=gt.parse(Nt.sdp),Ot=$t.media.find(Gt=>Gt.type==="video"),Et.addLegacySimulcast({offerMediaObject:Ot,track:jt,numStreams:Ft.length}),Nt={type:"offer",sdp:gt.write($t)}),Tt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt),$t=gt.parse(this._pc.localDescription.sdp),Ot=$t.media.find(Gt=>Gt.type===jt.kind),Vt.rtcp.cname=St.getCname({offerMediaObject:Ot}),Vt.encodings=Et.getRtpEncodings({offerMediaObject:Ot,track:jt}),Ft)for(let Gt=0;Gt<Vt.encodings.length;++Gt)Ft[Gt]&&Object.assign(Vt.encodings[Gt],Ft[Gt]);if(Vt.encodings.length>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Vt.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ot,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Lt});const zt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=String(this._nextSendLocalId);this._nextSendLocalId++;const Ht=this._pc.getSenders().find(Gt=>Gt.track===jt);return this._mapSendLocalIdRtpSender.set(Bt,Ht),{localId:Bt,rtpParameters:Vt,rtpSender:Ht}}async stopSending(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");Ft.track&&this._sendStream.removeTrack(Ft.track),this._mapSendLocalIdRtpSender.delete(jt);const Lt=await this._pc.createOffer();Tt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Lt);try{await this._pc.setLocalDescription(Lt)}catch(Ot){if(this._sendStream.getTracks().length===0)return void Tt.warn("stopSending() | ignoring expected error due no sending tracks: %s",Ot.toString());throw Ot}if(this._pc.signalingState==="stable")return;const Pt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Pt),await this._pc.setRemoteDescription(Pt)}async pauseSending(jt){}async resumeSending(jt){}async replaceTrack(jt,Ft){this.assertSendDirection(),Ft?Tt.debug("replaceTrack() [localId:%s, track.id:%s]",jt,Ft.id):Tt.debug("replaceTrack() [localId:%s, no track]",jt);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.track;await Lt.replaceTrack(Ft),Pt&&this._sendStream.removeTrack(Pt),Ft&&this._sendStream.addTrack(Ft)}async setMaxSpatialLayer(jt,Ft){this.assertSendDirection(),Tt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.getParameters();Pt.encodings.forEach((Ot,Nt)=>{Ot.active=Nt<=Ft}),await Lt.setParameters(Pt)}async setRtpEncodingParameters(jt,Ft){this.assertSendDirection(),Tt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Pt=Lt.getParameters();Pt.encodings.forEach((Ot,Nt)=>{Pt.encodings[Nt]={...Ot,...Ft}}),await Lt.setParameters(Pt)}async getSenderStats(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");return Ft.getStats()}async sendDataChannel({ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,label:Pt,protocol:Ot}){this.assertSendDirection();const Nt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,protocol:Ot};Tt.debug("sendDataChannel() [options:%o]",Nt);const $t=this._pc.createDataChannel(Pt,Nt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%It.MIS,!this._hasDataChannelMediaSection){const Vt=await this._pc.createOffer(),Ut=gt.parse(Vt.sdp),zt=Ut.media.find(Ht=>Ht.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Tt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt),this._remoteSdp.sendSctpAssociation({offerMediaObject:zt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:$t,sctpStreamParameters:{streamId:Nt.id,ordered:Nt.ordered,maxPacketLifeTime:Nt.maxPacketLifeTime,maxRetransmits:Nt.maxRetransmits}}}async receive(jt){this.assertRecvDirection();const Ft=[];for(const Nt of jt){const{trackId:$t,kind:Vt,rtpParameters:Ut,streamId:zt}=Nt;Tt.debug("receive() [trackId:%s, kind:%s]",$t,Vt);const Bt=Vt;this._remoteSdp.receive({mid:Bt,kind:Vt,offerRtpParameters:Ut,streamId:zt||Ut.rtcp.cname,trackId:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);let Pt=await this._pc.createAnswer();const Ot=gt.parse(Pt.sdp);for(const Nt of jt){const{kind:$t,rtpParameters:Vt}=Nt,Ut=$t,zt=Ot.media.find(Bt=>String(Bt.mid)===Ut);St.applyCodecParameters({offerRtpParameters:Vt,answerMediaObject:zt})}Pt={type:"answer",sdp:gt.write(Ot)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ot}),Tt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Pt),await this._pc.setLocalDescription(Pt);for(const Nt of jt){const{kind:$t,trackId:Vt,rtpParameters:Ut}=Nt,zt=$t,Bt=Vt,Ht=this._pc.getReceivers().find(Gt=>Gt.track&&Gt.track.id===Bt);if(!Ht)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(Bt,{mid:zt,rtpParameters:Ut,rtpReceiver:Ht}),Ft.push({localId:Bt,track:Ht.track,rtpReceiver:Ht})}return Ft}async stopReceiving(jt){this.assertRecvDirection();for(const Pt of jt){Tt.debug("stopReceiving() [localId:%s]",Pt);const{mid:Ot,rtpParameters:Nt}=this._mapRecvLocalIdInfo.get(Pt)||{};this._mapRecvLocalIdInfo.delete(Pt),this._remoteSdp.planBStopReceiving({mid:Ot,offerRtpParameters:Nt})}const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}async getReceiverStats(jt){this.assertRecvDirection();const{rtpReceiver:Ft}=this._mapRecvLocalIdInfo.get(jt)||{};if(!Ft)throw new Error("associated RTCRtpReceiver not found");return Ft.getStats()}async pauseReceiving(jt){}async resumeReceiving(jt){}async receiveDataChannel({sctpStreamParameters:jt,label:Ft,protocol:Lt}){this.assertRecvDirection();const{streamId:Pt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t}=jt,Vt={negotiated:!0,id:Pt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t,protocol:Lt};Tt.debug("receiveDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Ft,Vt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const zt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=await this._pc.createAnswer();if(!this._transportReady){const Ht=gt.parse(Bt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht})}Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut}}async setupTransport({localDtlsRole:jt,localSdpObject:Ft}){Ft||(Ft=gt.parse(this._pc.localDescription.sdp));const Lt=St.extractDtlsParameters({sdpObject:Ft});Lt.role=jt,this._remoteSdp.updateDtlsRole(jt==="client"?"server":"client"),await new Promise((Pt,Ot)=>{this.safeEmit("@connect",{dtlsParameters:Lt},Pt,Ot)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Safari11=At},9862:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Pt,Ot);$t&&!("get"in $t?!Pt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Pt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Pt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Pt[Ot]}),ft=this&&this.__setModuleDefault||(Object.create?function(Lt,Pt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Pt})}:function(Lt,Pt){Lt.default=Pt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Pt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&pt(Pt,Lt,Ot);return ft(Pt,Lt),Pt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Safari12=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),Et=mt(ht(9072)),wt=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Safari12"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Pt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{Pt.addTransceiver("audio"),Pt.addTransceiver("video");const Ot=await Pt.createOffer();try{Pt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return wt.addNackSuppportForOpus($t),$t}catch(Ot){try{Pt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Pt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Pt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Pt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Pt,this._pc.setConfiguration(Ot)}async restartIce(Pt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Pt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Pt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Pt.kind,Pt.id);const Vt=yt.clone(this._sendingRtpParametersByKind[Pt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Pt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Pt,{direction:"sendonly",streams:[this._sendStream]});let Ht,Gt=await this._pc.createOffer(),Kt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Kt});const Xt=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length>1&&(Dt.debug("send() | enabling legacy simulcast"),Kt=gt.parse(Gt.sdp),Ht=Kt.media[zt.idx],Et.addLegacySimulcast({offerMediaObject:Ht,numStreams:Ot.length}),Gt={type:"offer",sdp:gt.write(Kt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);const or=Bt.mid;if(Vt.mid=or,Kt=gt.parse(this._pc.localDescription.sdp),Ht=Kt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Vt.encodings=Et.getRtpEncodings({offerMediaObject:Ht}),Ot)for(let dr=0;dr<Vt.encodings.length;++dr)Ot[dr]&&Object.assign(Vt.encodings[dr],Ot[dr]);if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const dr of Vt.encodings)dr.scalabilityMode?dr.scalabilityMode=`L1T${Xt.temporalLayers}`:dr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt});const tr={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",tr),await this._pc.setRemoteDescription(tr),this._mapMidTransceiver.set(or,Bt),{localId:or,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Pt){if(this.assertSendDirection(),this._closed)return;Dt.debug("stopSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Pt)}async pauseSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Pt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Pt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Pt);const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(Pt);const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Pt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Pt);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Pt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Pt,Ot);const Nt=this._mapMidTransceiver.get(Pt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Pt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Pt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Pt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Xt=>Xt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Kt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setRemoteDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Pt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Kt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Xt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Xt),this._remoteSdp.receive({mid:Xt,kind:Ht,offerRtpParameters:Gt,streamId:Kt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Pt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Kt=Ut.media.find(Xt=>String(Xt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Kt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Pt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Kt=>Kt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Pt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Pt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Pt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Pt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Pt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Pt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Pt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Pt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Pt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Kt=await this._pc.createAnswer();if(!this._transportReady){const Xt=gt.parse(Kt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Kt),await this._pc.setLocalDescription(Kt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Pt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Pt,this._remoteSdp.updateDtlsRole(Pt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Safari12=Ft},3635:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(xt,yt,vt,St){St===void 0&&(St=vt);var Et=Object.getOwnPropertyDescriptor(yt,vt);Et&&!("get"in Et?!yt.__esModule:Et.writable||Et.configurable)||(Et={enumerable:!0,get:function(){return yt[vt]}}),Object.defineProperty(xt,St,Et)}:function(xt,yt,vt,St){St===void 0&&(St=vt),xt[St]=yt[vt]}),ft=this&&this.__setModuleDefault||(Object.create?function(xt,yt){Object.defineProperty(xt,"default",{enumerable:!0,value:yt})}:function(xt,yt){xt.default=yt}),mt=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var yt={};if(xt!=null)for(var vt in xt)vt!=="default"&&Object.prototype.hasOwnProperty.call(xt,vt)&&pt(yt,xt,vt);return ft(yt,xt),yt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.mangleRtpParameters=dt.getCapabilities=void 0;const gt=mt(ht(3347));dt.getCapabilities=function(){const xt=RTCRtpReceiver.getCapabilities(),yt=gt.clone(xt);for(const vt of yt.codecs??[]){if(vt.channels=vt.numChannels,delete vt.numChannels,vt.mimeType=vt.mimeType||`${vt.kind}/${vt.name}`,vt.parameters){const St=vt.parameters;St.apt&&(St.apt=Number(St.apt)),St["packetization-mode"]&&(St["packetization-mode"]=Number(St["packetization-mode"]))}for(const St of vt.rtcpFeedback||[])St.parameter||(St.parameter="")}return yt},dt.mangleRtpParameters=function(xt){const yt=gt.clone(xt);yt.mid&&(yt.muxId=yt.mid,delete yt.mid);for(const vt of yt.codecs)vt.channels&&(vt.numChannels=vt.channels,delete vt.channels),vt.mimeType&&!vt.name&&(vt.name=vt.mimeType.split("/")[1]),delete vt.mimeType;return yt}},8954:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addNackSuppportForOpus=void 0,dt.addNackSuppportForOpus=function(ht){var pt;for(const ft of ht.codecs||[])ft.mimeType.toLowerCase()!=="audio/opus"&&ft.mimeType.toLowerCase()!=="audio/multiopus"||(pt=ft.rtcpFeedback)!=null&&pt.some(mt=>mt.type==="nack"&&!mt.parameter)||(ft.rtcpFeedback||(ft.rtcpFeedback=[]),ft.rtcpFeedback.push({type:"nack"}))}},6698:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(St,Et,wt,Rt){Rt===void 0&&(Rt=wt);var Tt=Object.getOwnPropertyDescriptor(Et,wt);Tt&&!("get"in Tt?!Et.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return Et[wt]}}),Object.defineProperty(St,Rt,Tt)}:function(St,Et,wt,Rt){Rt===void 0&&(Rt=wt),St[Rt]=Et[wt]}),ft=this&&this.__setModuleDefault||(Object.create?function(St,Et){Object.defineProperty(St,"default",{enumerable:!0,value:Et})}:function(St,Et){St.default=Et}),mt=this&&this.__importStar||function(St){if(St&&St.__esModule)return St;var Et={};if(St!=null)for(var wt in St)wt!=="default"&&Object.prototype.hasOwnProperty.call(St,wt)&&pt(Et,St,wt);return ft(Et,St),Et};Object.defineProperty(dt,"__esModule",{value:!0}),dt.OfferMediaSection=dt.AnswerMediaSection=dt.MediaSection=void 0;const gt=mt(ht(766)),xt=mt(ht(3347));class yt{constructor({iceParameters:Et,iceCandidates:wt,dtlsParameters:Rt,planB:Tt=!1}){if(this._mediaObject={},this._planB=Tt,Et&&this.setIceParameters(Et),wt){this._mediaObject.candidates=[];for(const It of wt){const At={component:1};At.foundation=It.foundation,At.ip=It.ip,At.port=It.port,At.priority=It.priority,At.transport=It.protocol,At.type=It.type,It.tcpType&&(At.tcptype=It.tcpType),this._mediaObject.candidates.push(At)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}Rt&&this.setDtlsRole(Rt.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(Et){this._mediaObject.iceUfrag=Et.usernameFragment,this._mediaObject.icePwd=Et.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}dt.MediaSection=yt,dt.AnswerMediaSection=class extends yt{constructor({iceParameters:St,iceCandidates:Et,dtlsParameters:wt,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1,offerMediaObject:At,offerRtpParameters:Dt,answerRtpParameters:jt,codecOptions:Ft,extmapAllowMixed:Lt=!1}){switch(super({iceParameters:St,iceCandidates:Et,dtlsParameters:wt,planB:It}),this._mediaObject.mid=String(At.mid),this._mediaObject.type=At.type,this._mediaObject.protocol=At.protocol,Tt?(this._mediaObject.connection={ip:Tt.ip,version:Tt.ipVersion},this._mediaObject.port=Tt.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),At.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const Pt of jt.codecs){const Ot={payload:Pt.payloadType,codec:vt(Pt),rate:Pt.clockRate};Pt.channels>1&&(Ot.encoding=Pt.channels),this._mediaObject.rtp.push(Ot);const Nt=xt.clone(Pt.parameters)??{};let $t=xt.clone(Pt.rtcpFeedback)??[];if(Ft){const{opusStereo:Ut,opusFec:zt,opusDtx:Bt,opusMaxPlaybackRate:Ht,opusMaxAverageBitrate:Gt,opusPtime:Kt,opusNack:Xt,videoGoogleStartBitrate:or,videoGoogleMaxBitrate:tr,videoGoogleMinBitrate:dr}=Ft,fr=Dt.codecs.find(Sr=>Sr.payloadType===Pt.payloadType);switch(Pt.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":Ut!==void 0&&(fr.parameters["sprop-stereo"]=Ut?1:0,Nt.stereo=Ut?1:0),zt!==void 0&&(fr.parameters.useinbandfec=zt?1:0,Nt.useinbandfec=zt?1:0),Bt!==void 0&&(fr.parameters.usedtx=Bt?1:0,Nt.usedtx=Bt?1:0),Ht!==void 0&&(Nt.maxplaybackrate=Ht),Gt!==void 0&&(Nt.maxaveragebitrate=Gt),Kt!==void 0&&(fr.parameters.ptime=Kt,Nt.ptime=Kt),Xt||(fr.rtcpFeedback=fr.rtcpFeedback.filter(Sr=>Sr.type!=="nack"||Sr.parameter),$t=$t.filter(Sr=>Sr.type!=="nack"||Sr.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":or!==void 0&&(Nt["x-google-start-bitrate"]=or),tr!==void 0&&(Nt["x-google-max-bitrate"]=tr),dr!==void 0&&(Nt["x-google-min-bitrate"]=dr)}}const Vt={payload:Pt.payloadType,config:""};for(const Ut of Object.keys(Nt))Vt.config&&(Vt.config+=";"),Vt.config+=`${Ut}=${Nt[Ut]}`;Vt.config&&this._mediaObject.fmtp.push(Vt);for(const Ut of $t)this._mediaObject.rtcpFb.push({payload:Pt.payloadType,type:Ut.type,subtype:Ut.parameter})}this._mediaObject.payloads=jt.codecs.map(Pt=>Pt.payloadType).join(" "),this._mediaObject.ext=[];for(const Pt of jt.headerExtensions)(At.ext||[]).some(Ot=>Ot.uri===Pt.uri)&&this._mediaObject.ext.push({uri:Pt.uri,value:Pt.id});if(Lt&&At.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),At.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:At.simulcast.list1},this._mediaObject.rids=[];for(const Pt of At.rids||[])Pt.direction==="send"&&this._mediaObject.rids.push({id:Pt.id,direction:"recv"})}else if(At.simulcast_03){this._mediaObject.simulcast_03={value:At.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const Pt of At.rids||[])Pt.direction==="send"&&this._mediaObject.rids.push({id:Pt.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof At.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=Rt.port,this._mediaObject.maxMessageSize=Rt.maxMessageSize):At.sctpmap&&(this._mediaObject.payloads=Rt.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:Rt.port,maxMessageSize:Rt.maxMessageSize})}}setDtlsRole(St){switch(St){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(St){var Tt;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const Et={};for(const It of St)It.rid&&(Et[It.rid]=It);const wt=this._mediaObject.simulcast.list1,Rt=gt.parseSimulcastStreamList(wt);for(const It of Rt)for(const At of It)At.paused=!((Tt=Et[At.scid])!=null&&Tt.active);this._mediaObject.simulcast.list1=Rt.map(It=>It.map(At=>`${At.paused?"~":""}${At.scid}`).join(",")).join(";")}};function vt(St){const Et=new RegExp("^(audio|video)/(.+)","i").exec(St.mimeType);if(!Et)throw new TypeError("invalid codec.mimeType");return Et[2]}dt.OfferMediaSection=class extends yt{constructor({iceParameters:St,iceCandidates:Et,dtlsParameters:wt,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1,mid:At,kind:Dt,offerRtpParameters:jt,streamId:Ft,trackId:Lt,oldDataChannelSpec:Pt=!1}){switch(super({iceParameters:St,iceCandidates:Et,dtlsParameters:wt,planB:It}),this._mediaObject.mid=String(At),this._mediaObject.type=Dt,Tt?(this._mediaObject.connection={ip:Tt.ip,version:Tt.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=Tt.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=Rt?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),Dt){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${Ft||"-"} ${Lt}`);for(const Vt of jt.codecs){const Ut={payload:Vt.payloadType,codec:vt(Vt),rate:Vt.clockRate};Vt.channels>1&&(Ut.encoding=Vt.channels),this._mediaObject.rtp.push(Ut);const zt={payload:Vt.payloadType,config:""};for(const Bt of Object.keys(Vt.parameters))zt.config&&(zt.config+=";"),zt.config+=`${Bt}=${Vt.parameters[Bt]}`;zt.config&&this._mediaObject.fmtp.push(zt);for(const Bt of Vt.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:Vt.payloadType,type:Bt.type,subtype:Bt.parameter})}this._mediaObject.payloads=jt.codecs.map(Vt=>Vt.payloadType).join(" "),this._mediaObject.ext=[];for(const Vt of jt.headerExtensions)this._mediaObject.ext.push({uri:Vt.uri,value:Vt.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const Ot=jt.encodings[0],Nt=Ot.ssrc,$t=Ot.rtx&&Ot.rtx.ssrc?Ot.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],jt.rtcp.cname&&this._mediaObject.ssrcs.push({id:Nt,attribute:"cname",value:jt.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:Nt,attribute:"msid",value:`${Ft||"-"} ${Lt}`}),$t&&(jt.rtcp.cname&&this._mediaObject.ssrcs.push({id:$t,attribute:"cname",value:jt.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:$t,attribute:"msid",value:`${Ft||"-"} ${Lt}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${Nt} ${$t}`}));break}case"application":Pt?(this._mediaObject.payloads=Rt.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:Rt.port,maxMessageSize:Rt.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=Rt.port,this._mediaObject.maxMessageSize=Rt.maxMessageSize)}}setDtlsRole(St){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:St,streamId:Et,trackId:wt}){const Rt=St.encodings[0],Tt=Rt.ssrc,It=Rt.rtx&&Rt.rtx.ssrc?Rt.rtx.ssrc:void 0,At=this._mediaObject.payloads.split(" ");for(const Dt of St.codecs){if(At.includes(String(Dt.payloadType)))continue;const jt={payload:Dt.payloadType,codec:vt(Dt),rate:Dt.clockRate};Dt.channels>1&&(jt.encoding=Dt.channels),this._mediaObject.rtp.push(jt);const Ft={payload:Dt.payloadType,config:""};for(const Lt of Object.keys(Dt.parameters))Ft.config&&(Ft.config+=";"),Ft.config+=`${Lt}=${Dt.parameters[Lt]}`;Ft.config&&this._mediaObject.fmtp.push(Ft);for(const Lt of Dt.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:Dt.payloadType,type:Lt.type,subtype:Lt.parameter})}this._mediaObject.payloads+=` ${St.codecs.filter(Dt=>!this._mediaObject.payloads.includes(Dt.payloadType)).map(Dt=>Dt.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),St.rtcp.cname&&this._mediaObject.ssrcs.push({id:Tt,attribute:"cname",value:St.rtcp.cname}),this._mediaObject.ssrcs.push({id:Tt,attribute:"msid",value:`${Et||"-"} ${wt}`}),It&&(St.rtcp.cname&&this._mediaObject.ssrcs.push({id:It,attribute:"cname",value:St.rtcp.cname}),this._mediaObject.ssrcs.push({id:It,attribute:"msid",value:`${Et||"-"} ${wt}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${Tt} ${It}`}))}planBStopReceiving({offerRtpParameters:St}){const Et=St.encodings[0],wt=Et.ssrc,Rt=Et.rtx&&Et.rtx.ssrc?Et.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(Tt=>Tt.id!==wt&&Tt.id!==Rt),Rt&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(Tt=>Tt.ssrcs!==`${wt} ${Rt}`))}}},7910:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(St,Et,wt,Rt){Rt===void 0&&(Rt=wt);var Tt=Object.getOwnPropertyDescriptor(Et,wt);Tt&&!("get"in Tt?!Et.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return Et[wt]}}),Object.defineProperty(St,Rt,Tt)}:function(St,Et,wt,Rt){Rt===void 0&&(Rt=wt),St[Rt]=Et[wt]}),ft=this&&this.__setModuleDefault||(Object.create?function(St,Et){Object.defineProperty(St,"default",{enumerable:!0,value:Et})}:function(St,Et){St.default=Et}),mt=this&&this.__importStar||function(St){if(St&&St.__esModule)return St;var Et={};if(St!=null)for(var wt in St)wt!=="default"&&Object.prototype.hasOwnProperty.call(St,wt)&&pt(Et,St,wt);return ft(Et,St),Et};Object.defineProperty(dt,"__esModule",{value:!0}),dt.RemoteSdp=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(6698),vt=new xt.Logger("RemoteSdp");dt.RemoteSdp=class{constructor({iceParameters:St,iceCandidates:Et,dtlsParameters:wt,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=St,this._iceCandidates=Et,this._dtlsParameters=wt,this._sctpParameters=Rt,this._plainRtpParameters=Tt,this._planB=It,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},St&&St.iceLite&&(this._sdpObject.icelite="ice-lite"),wt){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const At=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:wt.fingerprints[At-1].algorithm,hash:wt.fingerprints[At-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}Tt&&(this._sdpObject.origin.address=Tt.ip,this._sdpObject.origin.ipVer=Tt.ipVersion)}updateIceParameters(St){vt.debug("updateIceParameters() [iceParameters:%o]",St),this._iceParameters=St,this._sdpObject.icelite=St.iceLite?"ice-lite":void 0;for(const Et of this._mediaSections)Et.setIceParameters(St)}updateDtlsRole(St){vt.debug("updateDtlsRole() [role:%s]",St),this._dtlsParameters.role=St;for(const Et of this._mediaSections)Et.setDtlsRole(St)}getNextMediaSectionIdx(){for(let St=0;St<this._mediaSections.length;++St){const Et=this._mediaSections[St];if(Et.closed)return{idx:St,reuseMid:Et.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:St,reuseMid:Et,offerRtpParameters:wt,answerRtpParameters:Rt,codecOptions:Tt,extmapAllowMixed:It=!1}){const At=new yt.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:St,offerRtpParameters:wt,answerRtpParameters:Rt,codecOptions:Tt,extmapAllowMixed:It});Et?this._replaceMediaSection(At,Et):this._midToIndex.has(At.mid)?this._replaceMediaSection(At):this._addMediaSection(At)}receive({mid:St,kind:Et,offerRtpParameters:wt,streamId:Rt,trackId:Tt}){const It=this._midToIndex.get(St);let At;if(It!==void 0&&(At=this._mediaSections[It]),At)At.planBReceive({offerRtpParameters:wt,streamId:Rt,trackId:Tt}),this._replaceMediaSection(At);else{At=new yt.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:St,kind:Et,offerRtpParameters:wt,streamId:Rt,trackId:Tt});const Dt=this._mediaSections.find(jt=>jt.closed);Dt?this._replaceMediaSection(At,Dt.mid):this._addMediaSection(At)}}pauseMediaSection(St){this._findMediaSection(St).pause()}resumeSendingMediaSection(St){this._findMediaSection(St).resume()}resumeReceivingMediaSection(St){this._findMediaSection(St).resume()}disableMediaSection(St){this._findMediaSection(St).disable()}closeMediaSection(St){const Et=this._findMediaSection(St);return St===this._firstMid?(vt.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",St),this.disableMediaSection(St),!1):(Et.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(St,Et){const wt=this._findMediaSection(St);wt.muxSimulcastStreams(Et),this._replaceMediaSection(wt)}planBStopReceiving({mid:St,offerRtpParameters:Et}){const wt=this._findMediaSection(St);wt.planBStopReceiving({offerRtpParameters:Et}),this._replaceMediaSection(wt)}sendSctpAssociation({offerMediaObject:St}){const Et=new yt.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:St});this._addMediaSection(Et)}receiveSctpAssociation({oldDataChannelSpec:St=!1}={}){const Et=new yt.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:St});this._addMediaSection(Et)}getSdp(){return this._sdpObject.origin.sessionVersion++,gt.write(this._sdpObject)}_addMediaSection(St){this._firstMid||(this._firstMid=St.mid),this._mediaSections.push(St),this._midToIndex.set(St.mid,this._mediaSections.length-1),this._sdpObject.media.push(St.getObject()),this._regenerateBundleMids()}_replaceMediaSection(St,Et){if(typeof Et=="string"){const wt=this._midToIndex.get(Et);if(wt===void 0)throw new Error(`no media section found for reuseMid '${Et}'`);const Rt=this._mediaSections[wt];this._mediaSections[wt]=St,this._midToIndex.delete(Rt.mid),this._midToIndex.set(St.mid,wt),this._sdpObject.media[wt]=St.getObject(),this._regenerateBundleMids()}else{const wt=this._midToIndex.get(St.mid);if(wt===void 0)throw new Error(`no media section found with mid '${St.mid}'`);this._mediaSections[wt]=St,this._sdpObject.media[wt]=St.getObject()}}_findMediaSection(St){const Et=this._midToIndex.get(St);if(Et===void 0)throw new Error(`no media section found with mid '${St}'`);return this._mediaSections[Et]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(St=>!St.closed).map(St=>St.mid).join(" "))}}},2267:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(xt,yt,vt,St){St===void 0&&(St=vt);var Et=Object.getOwnPropertyDescriptor(yt,vt);Et&&!("get"in Et?!yt.__esModule:Et.writable||Et.configurable)||(Et={enumerable:!0,get:function(){return yt[vt]}}),Object.defineProperty(xt,St,Et)}:function(xt,yt,vt,St){St===void 0&&(St=vt),xt[St]=yt[vt]}),ft=this&&this.__setModuleDefault||(Object.create?function(xt,yt){Object.defineProperty(xt,"default",{enumerable:!0,value:yt})}:function(xt,yt){xt.default=yt}),mt=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var yt={};if(xt!=null)for(var vt in xt)vt!=="default"&&Object.prototype.hasOwnProperty.call(xt,vt)&&pt(yt,xt,vt);return ft(yt,xt),yt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.applyCodecParameters=dt.getCname=dt.extractDtlsParameters=dt.extractRtpCapabilities=void 0;const gt=mt(ht(766));dt.extractRtpCapabilities=function({sdpObject:xt}){const yt=new Map,vt=[];let St=!1,Et=!1;for(const wt of xt.media){const Rt=wt.type;switch(Rt){case"audio":if(St)continue;St=!0;break;case"video":if(Et)continue;Et=!0;break;default:continue}for(const Tt of wt.rtp){const It={kind:Rt,mimeType:`${Rt}/${Tt.codec}`,preferredPayloadType:Tt.payload,clockRate:Tt.rate,channels:Tt.encoding,parameters:{},rtcpFeedback:[]};yt.set(It.preferredPayloadType,It)}for(const Tt of wt.fmtp||[]){const It=gt.parseParams(Tt.config),At=yt.get(Tt.payload);At&&(It&&It.hasOwnProperty("profile-level-id")&&(It["profile-level-id"]=String(It["profile-level-id"])),At.parameters=It)}for(const Tt of wt.rtcpFb||[]){const It={type:Tt.type,parameter:Tt.subtype};if(It.parameter||delete It.parameter,Tt.payload!=="*"){const At=yt.get(Tt.payload);if(!At)continue;At.rtcpFeedback.push(It)}else for(const At of yt.values())At.kind!==Rt||/.+\/rtx$/i.test(At.mimeType)||At.rtcpFeedback.push(It)}for(const Tt of wt.ext||[]){if(Tt["encrypt-uri"])continue;const It={kind:Rt,uri:Tt.uri,preferredId:Tt.value};vt.push(It)}}return{codecs:Array.from(yt.values()),headerExtensions:vt}},dt.extractDtlsParameters=function({sdpObject:xt}){let yt,vt=xt.setup,St=xt.fingerprint;if(!vt||!St){const Et=(xt.media||[]).find(wt=>wt.port!==0);Et&&(vt??(vt=Et.setup),St??(St=Et.fingerprint))}if(!vt)throw new Error("no a=setup found at SDP session or media level");if(!St)throw new Error("no a=fingerprint found at SDP session or media level");switch(vt){case"active":yt="client";break;case"passive":yt="server";break;case"actpass":yt="auto"}return{role:yt,fingerprints:[{algorithm:St.type,value:St.hash}]}},dt.getCname=function({offerMediaObject:xt}){const yt=(xt.ssrcs||[]).find(vt=>vt.attribute==="cname");return yt?yt.value:""},dt.applyCodecParameters=function({offerRtpParameters:xt,answerMediaObject:yt}){for(const vt of xt.codecs){const St=vt.mimeType.toLowerCase();if(St!=="audio/opus"||!(yt.rtp||[]).find(Rt=>Rt.payload===vt.payloadType))continue;yt.fmtp=yt.fmtp||[];let Et=yt.fmtp.find(Rt=>Rt.payload===vt.payloadType);Et||(Et={payload:vt.payloadType,config:""},yt.fmtp.push(Et));const wt=gt.parseParams(Et.config);switch(St){case"audio/opus":{const Rt=vt.parameters["sprop-stereo"];Rt!==void 0&&(wt.stereo=Rt?1:0);break}}Et.config="";for(const Rt of Object.keys(wt))Et.config&&(Et.config+=";"),Et.config+=`${Rt}=${wt[Rt]}`}}},9875:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addLegacySimulcast=dt.getRtpEncodings=void 0,dt.getRtpEncodings=function({offerMediaObject:ht,track:pt}){const ft=new Set;for(const xt of ht.ssrcs||[])if(xt.attribute==="msid"&&xt.value.split(" ")[1]===pt.id){const yt=xt.id;ft.add(yt)}if(ft.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${pt.id}]`);const mt=new Map;for(const xt of ht.ssrcGroups||[]){if(xt.semantics!=="FID")continue;let[yt,vt]=xt.ssrcs.split(/\s+/);yt=Number(yt),vt=Number(vt),ft.has(yt)&&(ft.delete(yt),ft.delete(vt),mt.set(yt,vt))}for(const xt of ft)mt.set(xt,null);const gt=[];for(const[xt,yt]of mt){const vt={ssrc:xt};yt&&(vt.rtx={ssrc:yt}),gt.push(vt)}return gt},dt.addLegacySimulcast=function({offerMediaObject:ht,track:pt,numStreams:ft}){if(ft<=1)throw new TypeError("numStreams must be greater than 1");let mt,gt,xt;if(!(ht.ssrcs||[]).find(wt=>wt.attribute!=="msid"?!1:wt.value.split(" ")[1]===pt.id&&(mt=wt.id,xt=wt.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${pt.id}]`);(ht.ssrcGroups||[]).some(wt=>{if(wt.semantics!=="FID")return!1;const Rt=wt.ssrcs.split(/\s+/);return Number(Rt[0])===mt&&(gt=Number(Rt[1]),!0)});const yt=ht.ssrcs.find(wt=>wt.attribute==="cname"&&wt.id===mt);if(!yt)throw new Error(`a=ssrc line with cname information not found [track.id:${pt.id}]`);const vt=yt.value,St=[],Et=[];for(let wt=0;wt<ft;++wt)St.push(mt+wt),gt&&Et.push(gt+wt);ht.ssrcGroups=ht.ssrcGroups||[],ht.ssrcs=ht.ssrcs||[],ht.ssrcGroups.push({semantics:"SIM",ssrcs:St.join(" ")});for(let wt=0;wt<St.length;++wt){const Rt=St[wt];ht.ssrcs.push({id:Rt,attribute:"cname",value:vt}),ht.ssrcs.push({id:Rt,attribute:"msid",value:`${xt} ${pt.id}`})}for(let wt=0;wt<Et.length;++wt){const Rt=St[wt],Tt=Et[wt];ht.ssrcs.push({id:Tt,attribute:"cname",value:vt}),ht.ssrcs.push({id:Tt,attribute:"msid",value:`${xt} ${pt.id}`}),ht.ssrcGroups.push({semantics:"FID",ssrcs:`${Rt} ${Tt}`})}}},9072:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addLegacySimulcast=dt.getRtpEncodings=void 0,dt.getRtpEncodings=function({offerMediaObject:ht}){const pt=new Set;for(const gt of ht.ssrcs||[]){const xt=gt.id;pt.add(xt)}if(pt.size===0)throw new Error("no a=ssrc lines found");const ft=new Map;for(const gt of ht.ssrcGroups||[]){if(gt.semantics!=="FID")continue;let[xt,yt]=gt.ssrcs.split(/\s+/);xt=Number(xt),yt=Number(yt),pt.has(xt)&&(pt.delete(xt),pt.delete(yt),ft.set(xt,yt))}for(const gt of pt)ft.set(gt,null);const mt=[];for(const[gt,xt]of ft){const yt={ssrc:gt};xt&&(yt.rtx={ssrc:xt}),mt.push(yt)}return mt},dt.addLegacySimulcast=function({offerMediaObject:ht,numStreams:pt}){if(pt<=1)throw new TypeError("numStreams must be greater than 1");const ft=(ht.ssrcs||[]).find(Rt=>Rt.attribute==="msid");if(!ft)throw new Error("a=ssrc line with msid information not found");const[mt,gt]=ft.value.split(" "),xt=ft.id;let yt;(ht.ssrcGroups||[]).some(Rt=>{if(Rt.semantics!=="FID")return!1;const Tt=Rt.ssrcs.split(/\s+/);return Number(Tt[0])===xt&&(yt=Number(Tt[1]),!0)});const vt=ht.ssrcs.find(Rt=>Rt.attribute==="cname");if(!vt)throw new Error("a=ssrc line with cname information not found");const St=vt.value,Et=[],wt=[];for(let Rt=0;Rt<pt;++Rt)Et.push(xt+Rt),yt&&wt.push(yt+Rt);ht.ssrcGroups=[],ht.ssrcs=[],ht.ssrcGroups.push({semantics:"SIM",ssrcs:Et.join(" ")});for(let Rt=0;Rt<Et.length;++Rt){const Tt=Et[Rt];ht.ssrcs.push({id:Tt,attribute:"cname",value:St}),ht.ssrcs.push({id:Tt,attribute:"msid",value:`${mt} ${gt}`})}for(let Rt=0;Rt<wt.length;++Rt){const Tt=Et[Rt],It=wt[Rt];ht.ssrcs.push({id:It,attribute:"cname",value:St}),ht.ssrcs.push({id:It,attribute:"msid",value:`${mt} ${gt}`}),ht.ssrcGroups.push({semantics:"FID",ssrcs:`${Tt} ${It}`})}}},960:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Et,wt,Rt,Tt){Tt===void 0&&(Tt=Rt);var It=Object.getOwnPropertyDescriptor(wt,Rt);It&&!("get"in It?!wt.__esModule:It.writable||It.configurable)||(It={enumerable:!0,get:function(){return wt[Rt]}}),Object.defineProperty(Et,Tt,It)}:function(Et,wt,Rt,Tt){Tt===void 0&&(Tt=Rt),Et[Tt]=wt[Rt]}),ft=this&&this.__setModuleDefault||(Object.create?function(Et,wt){Object.defineProperty(Et,"default",{enumerable:!0,value:wt})}:function(Et,wt){Et.default=wt}),mt=this&&this.__importStar||function(Et){if(Et&&Et.__esModule)return Et;var wt={};if(Et!=null)for(var Rt in Et)Rt!=="default"&&Object.prototype.hasOwnProperty.call(Et,Rt)&&pt(wt,Et,Rt);return ft(wt,Et),wt},gt=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.debug=dt.parseScalabilityMode=dt.detectDevice=dt.Device=dt.version=dt.types=void 0;const xt=gt(ht(1227));dt.debug=xt.default;const yt=ht(3120);Object.defineProperty(dt,"Device",{enumerable:!0,get:function(){return yt.Device}}),Object.defineProperty(dt,"detectDevice",{enumerable:!0,get:function(){return yt.detectDevice}});const vt=mt(ht(53));dt.types=vt,dt.version="3.7.2";var St=ht(2770);Object.defineProperty(dt,"parseScalabilityMode",{enumerable:!0,get:function(){return St.parse}})},5280:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(Pt,Ot,Nt,$t){$t===void 0&&($t=Nt);var Vt=Object.getOwnPropertyDescriptor(Ot,Nt);Vt&&!("get"in Vt?!Ot.__esModule:Vt.writable||Vt.configurable)||(Vt={enumerable:!0,get:function(){return Ot[Nt]}}),Object.defineProperty(Pt,$t,Vt)}:function(Pt,Ot,Nt,$t){$t===void 0&&($t=Nt),Pt[$t]=Ot[Nt]}),ft=this&&this.__setModuleDefault||(Object.create?function(Pt,Ot){Object.defineProperty(Pt,"default",{enumerable:!0,value:Ot})}:function(Pt,Ot){Pt.default=Ot}),mt=this&&this.__importStar||function(Pt){if(Pt&&Pt.__esModule)return Pt;var Ot={};if(Pt!=null)for(var Nt in Pt)Nt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Nt)&&pt(Ot,Pt,Nt);return ft(Ot,Pt),Ot};Object.defineProperty(dt,"__esModule",{value:!0}),dt.canReceive=dt.canSend=dt.generateProbatorRtpParameters=dt.reduceCodecs=dt.getSendingRemoteRtpParameters=dt.getSendingRtpParameters=dt.getRecvRtpCapabilities=dt.getExtendedRtpCapabilities=dt.validateSctpStreamParameters=dt.validateSctpParameters=dt.validateNumSctpStreams=dt.validateSctpCapabilities=dt.validateRtcpParameters=dt.validateRtpEncodingParameters=dt.validateRtpHeaderExtensionParameters=dt.validateRtpCodecParameters=dt.validateRtpParameters=dt.validateRtpHeaderExtension=dt.validateRtcpFeedback=dt.validateRtpCodecCapability=dt.validateRtpCapabilities=void 0;const gt=mt(ht(4115)),xt=mt(ht(3347));function yt(Pt){const Ot=new RegExp("^(audio|video)/(.+)","i");if(typeof Pt!="object")throw new TypeError("codec is not an object");if(!Pt.mimeType||typeof Pt.mimeType!="string")throw new TypeError("missing codec.mimeType");const Nt=Ot.exec(Pt.mimeType);if(!Nt)throw new TypeError("invalid codec.mimeType");if(Pt.kind=Nt[1].toLowerCase(),Pt.preferredPayloadType&&typeof Pt.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof Pt.clockRate!="number")throw new TypeError("missing codec.clockRate");Pt.kind==="audio"?typeof Pt.channels!="number"&&(Pt.channels=1):delete Pt.channels,Pt.parameters&&typeof Pt.parameters=="object"||(Pt.parameters={});for(const $t of Object.keys(Pt.parameters)){let Vt=Pt.parameters[$t];if(Vt===void 0&&(Pt.parameters[$t]="",Vt=""),typeof Vt!="string"&&typeof Vt!="number")throw new TypeError(`invalid codec parameter [key:${$t}s, value:${Vt}]`);if($t==="apt"&&typeof Vt!="number")throw new TypeError("invalid codec apt parameter")}Pt.rtcpFeedback&&Array.isArray(Pt.rtcpFeedback)||(Pt.rtcpFeedback=[]);for(const $t of Pt.rtcpFeedback)vt($t)}function vt(Pt){if(typeof Pt!="object")throw new TypeError("fb is not an object");if(!Pt.type||typeof Pt.type!="string")throw new TypeError("missing fb.type");Pt.parameter&&typeof Pt.parameter=="string"||(Pt.parameter="")}function St(Pt){if(typeof Pt!="object")throw new TypeError("ext is not an object");if(Pt.kind!=="audio"&&Pt.kind!=="video")throw new TypeError("invalid ext.kind");if(!Pt.uri||typeof Pt.uri!="string")throw new TypeError("missing ext.uri");if(typeof Pt.preferredId!="number")throw new TypeError("missing ext.preferredId");if(Pt.preferredEncrypt&&typeof Pt.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(Pt.preferredEncrypt||(Pt.preferredEncrypt=!1),Pt.direction&&typeof Pt.direction!="string")throw new TypeError("invalid ext.direction");Pt.direction||(Pt.direction="sendrecv")}function Et(Pt){if(typeof Pt!="object")throw new TypeError("params is not an object");if(Pt.mid&&typeof Pt.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(Pt.codecs))throw new TypeError("missing params.codecs");for(const Ot of Pt.codecs)wt(Ot);if(Pt.headerExtensions&&!Array.isArray(Pt.headerExtensions))throw new TypeError("params.headerExtensions is not an array");Pt.headerExtensions||(Pt.headerExtensions=[]);for(const Ot of Pt.headerExtensions)Rt(Ot);if(Pt.encodings&&!Array.isArray(Pt.encodings))throw new TypeError("params.encodings is not an array");Pt.encodings||(Pt.encodings=[]);for(const Ot of Pt.encodings)Tt(Ot);if(Pt.rtcp&&typeof Pt.rtcp!="object")throw new TypeError("params.rtcp is not an object");Pt.rtcp||(Pt.rtcp={}),It(Pt.rtcp)}function wt(Pt){const Ot=new RegExp("^(audio|video)/(.+)","i");if(typeof Pt!="object")throw new TypeError("codec is not an object");if(!Pt.mimeType||typeof Pt.mimeType!="string")throw new TypeError("missing codec.mimeType");const Nt=Ot.exec(Pt.mimeType);if(!Nt)throw new TypeError("invalid codec.mimeType");if(typeof Pt.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof Pt.clockRate!="number")throw new TypeError("missing codec.clockRate");Nt[1].toLowerCase()==="audio"?typeof Pt.channels!="number"&&(Pt.channels=1):delete Pt.channels,Pt.parameters&&typeof Pt.parameters=="object"||(Pt.parameters={});for(const $t of Object.keys(Pt.parameters)){let Vt=Pt.parameters[$t];if(Vt===void 0&&(Pt.parameters[$t]="",Vt=""),typeof Vt!="string"&&typeof Vt!="number")throw new TypeError(`invalid codec parameter [key:${$t}s, value:${Vt}]`);if($t==="apt"&&typeof Vt!="number")throw new TypeError("invalid codec apt parameter")}Pt.rtcpFeedback&&Array.isArray(Pt.rtcpFeedback)||(Pt.rtcpFeedback=[]);for(const $t of Pt.rtcpFeedback)vt($t)}function Rt(Pt){if(typeof Pt!="object")throw new TypeError("ext is not an object");if(!Pt.uri||typeof Pt.uri!="string")throw new TypeError("missing ext.uri");if(typeof Pt.id!="number")throw new TypeError("missing ext.id");if(Pt.encrypt&&typeof Pt.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");Pt.encrypt||(Pt.encrypt=!1),Pt.parameters&&typeof Pt.parameters=="object"||(Pt.parameters={});for(const Ot of Object.keys(Pt.parameters)){let Nt=Pt.parameters[Ot];if(Nt===void 0&&(Pt.parameters[Ot]="",Nt=""),typeof Nt!="string"&&typeof Nt!="number")throw new TypeError("invalid header extension parameter")}}function Tt(Pt){if(typeof Pt!="object")throw new TypeError("encoding is not an object");if(Pt.ssrc&&typeof Pt.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(Pt.rid&&typeof Pt.rid!="string")throw new TypeError("invalid encoding.rid");if(Pt.rtx&&typeof Pt.rtx!="object")throw new TypeError("invalid encoding.rtx");if(Pt.rtx&&typeof Pt.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(Pt.dtx&&typeof Pt.dtx=="boolean"||(Pt.dtx=!1),Pt.scalabilityMode&&typeof Pt.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function It(Pt){if(typeof Pt!="object")throw new TypeError("rtcp is not an object");if(Pt.cname&&typeof Pt.cname!="string")throw new TypeError("invalid rtcp.cname");Pt.reducedSize&&typeof Pt.reducedSize=="boolean"||(Pt.reducedSize=!0)}function At(Pt){if(typeof Pt!="object")throw new TypeError("numStreams is not an object");if(typeof Pt.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof Pt.MIS!="number")throw new TypeError("missing numStreams.MIS")}function Dt(Pt){return!!Pt&&/.+\/rtx$/i.test(Pt.mimeType)}function jt(Pt,Ot,{strict:Nt=!1,modify:$t=!1}={}){const Vt=Pt.mimeType.toLowerCase();if(Vt!==Ot.mimeType.toLowerCase()||Pt.clockRate!==Ot.clockRate||Pt.channels!==Ot.channels)return!1;switch(Vt){case"video/h264":if(Nt){if((Pt.parameters["packetization-mode"]||0)!==(Ot.parameters["packetization-mode"]||0)||!gt.isSameProfile(Pt.parameters,Ot.parameters))return!1;let Ut;try{Ut=gt.generateProfileLevelIdStringForAnswer(Pt.parameters,Ot.parameters)}catch{return!1}$t&&(Ut?(Pt.parameters["profile-level-id"]=Ut,Ot.parameters["profile-level-id"]=Ut):(delete Pt.parameters["profile-level-id"],delete Ot.parameters["profile-level-id"]))}break;case"video/vp9":if(Nt&&(Pt.parameters["profile-id"]||0)!==(Ot.parameters["profile-id"]||0))return!1}return!0}function Ft(Pt,Ot){return(!Pt.kind||!Ot.kind||Pt.kind===Ot.kind)&&Pt.uri===Ot.uri}function Lt(Pt,Ot){const Nt=[];for(const $t of Pt.rtcpFeedback||[]){const Vt=(Ot.rtcpFeedback||[]).find(Ut=>Ut.type===$t.type&&(Ut.parameter===$t.parameter||!Ut.parameter&&!$t.parameter));Vt&&Nt.push(Vt)}return Nt}dt.validateRtpCapabilities=function(Pt){if(typeof Pt!="object")throw new TypeError("caps is not an object");if(Pt.codecs&&!Array.isArray(Pt.codecs))throw new TypeError("caps.codecs is not an array");Pt.codecs||(Pt.codecs=[]);for(const Ot of Pt.codecs)yt(Ot);if(Pt.headerExtensions&&!Array.isArray(Pt.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");Pt.headerExtensions||(Pt.headerExtensions=[]);for(const Ot of Pt.headerExtensions)St(Ot)},dt.validateRtpCodecCapability=yt,dt.validateRtcpFeedback=vt,dt.validateRtpHeaderExtension=St,dt.validateRtpParameters=Et,dt.validateRtpCodecParameters=wt,dt.validateRtpHeaderExtensionParameters=Rt,dt.validateRtpEncodingParameters=Tt,dt.validateRtcpParameters=It,dt.validateSctpCapabilities=function(Pt){if(typeof Pt!="object")throw new TypeError("caps is not an object");if(!Pt.numStreams||typeof Pt.numStreams!="object")throw new TypeError("missing caps.numStreams");At(Pt.numStreams)},dt.validateNumSctpStreams=At,dt.validateSctpParameters=function(Pt){if(typeof Pt!="object")throw new TypeError("params is not an object");if(typeof Pt.port!="number")throw new TypeError("missing params.port");if(typeof Pt.OS!="number")throw new TypeError("missing params.OS");if(typeof Pt.MIS!="number")throw new TypeError("missing params.MIS");if(typeof Pt.maxMessageSize!="number")throw new TypeError("missing params.maxMessageSize")},dt.validateSctpStreamParameters=function(Pt){if(typeof Pt!="object")throw new TypeError("params is not an object");if(typeof Pt.streamId!="number")throw new TypeError("missing params.streamId");let Ot=!1;if(typeof Pt.ordered=="boolean"?Ot=!0:Pt.ordered=!0,Pt.maxPacketLifeTime&&typeof Pt.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(Pt.maxRetransmits&&typeof Pt.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(Pt.maxPacketLifeTime&&Pt.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(Ot&&Pt.ordered&&(Pt.maxPacketLifeTime||Pt.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(Ot||!Pt.maxPacketLifeTime&&!Pt.maxRetransmits||(Pt.ordered=!1),Pt.label&&typeof Pt.label!="string")throw new TypeError("invalid params.label");if(Pt.protocol&&typeof Pt.protocol!="string")throw new TypeError("invalid params.protocol")},dt.getExtendedRtpCapabilities=function(Pt,Ot){const Nt={codecs:[],headerExtensions:[]};for(const $t of Ot.codecs||[]){if(Dt($t))continue;const Vt=(Pt.codecs||[]).find(zt=>jt(zt,$t,{strict:!0,modify:!0}));if(!Vt)continue;const Ut={mimeType:Vt.mimeType,kind:Vt.kind,clockRate:Vt.clockRate,channels:Vt.channels,localPayloadType:Vt.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:$t.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:Vt.parameters,remoteParameters:$t.parameters,rtcpFeedback:Lt(Vt,$t)};Nt.codecs.push(Ut)}for(const $t of Nt.codecs){const Vt=Pt.codecs.find(zt=>Dt(zt)&&zt.parameters.apt===$t.localPayloadType),Ut=Ot.codecs.find(zt=>Dt(zt)&&zt.parameters.apt===$t.remotePayloadType);Vt&&Ut&&($t.localRtxPayloadType=Vt.preferredPayloadType,$t.remoteRtxPayloadType=Ut.preferredPayloadType)}for(const $t of Ot.headerExtensions){const Vt=Pt.headerExtensions.find(zt=>Ft(zt,$t));if(!Vt)continue;const Ut={kind:$t.kind,uri:$t.uri,sendId:Vt.preferredId,recvId:$t.preferredId,encrypt:Vt.preferredEncrypt,direction:"sendrecv"};switch($t.direction){case"sendrecv":Ut.direction="sendrecv";break;case"recvonly":Ut.direction="sendonly";break;case"sendonly":Ut.direction="recvonly";break;case"inactive":Ut.direction="inactive"}Nt.headerExtensions.push(Ut)}return Nt},dt.getRecvRtpCapabilities=function(Pt){const Ot={codecs:[],headerExtensions:[]};for(const Nt of Pt.codecs){const $t={mimeType:Nt.mimeType,kind:Nt.kind,preferredPayloadType:Nt.remotePayloadType,clockRate:Nt.clockRate,channels:Nt.channels,parameters:Nt.localParameters,rtcpFeedback:Nt.rtcpFeedback};if(Ot.codecs.push($t),!Nt.remoteRtxPayloadType)continue;const Vt={mimeType:`${Nt.kind}/rtx`,kind:Nt.kind,preferredPayloadType:Nt.remoteRtxPayloadType,clockRate:Nt.clockRate,parameters:{apt:Nt.remotePayloadType},rtcpFeedback:[]};Ot.codecs.push(Vt)}for(const Nt of Pt.headerExtensions){if(Nt.direction!=="sendrecv"&&Nt.direction!=="recvonly")continue;const $t={kind:Nt.kind,uri:Nt.uri,preferredId:Nt.recvId,preferredEncrypt:Nt.encrypt,direction:Nt.direction};Ot.headerExtensions.push($t)}return Ot},dt.getSendingRtpParameters=function(Pt,Ot){const Nt={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const $t of Ot.codecs){if($t.kind!==Pt)continue;const Vt={mimeType:$t.mimeType,payloadType:$t.localPayloadType,clockRate:$t.clockRate,channels:$t.channels,parameters:$t.localParameters,rtcpFeedback:$t.rtcpFeedback};if(Nt.codecs.push(Vt),$t.localRtxPayloadType){const Ut={mimeType:`${$t.kind}/rtx`,payloadType:$t.localRtxPayloadType,clockRate:$t.clockRate,parameters:{apt:$t.localPayloadType},rtcpFeedback:[]};Nt.codecs.push(Ut)}}for(const $t of Ot.headerExtensions){if($t.kind&&$t.kind!==Pt||$t.direction!=="sendrecv"&&$t.direction!=="sendonly")continue;const Vt={uri:$t.uri,id:$t.sendId,encrypt:$t.encrypt,parameters:{}};Nt.headerExtensions.push(Vt)}return Nt},dt.getSendingRemoteRtpParameters=function(Pt,Ot){const Nt={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const $t of Ot.codecs){if($t.kind!==Pt)continue;const Vt={mimeType:$t.mimeType,payloadType:$t.localPayloadType,clockRate:$t.clockRate,channels:$t.channels,parameters:$t.remoteParameters,rtcpFeedback:$t.rtcpFeedback};if(Nt.codecs.push(Vt),$t.localRtxPayloadType){const Ut={mimeType:`${$t.kind}/rtx`,payloadType:$t.localRtxPayloadType,clockRate:$t.clockRate,parameters:{apt:$t.localPayloadType},rtcpFeedback:[]};Nt.codecs.push(Ut)}}for(const $t of Ot.headerExtensions){if($t.kind&&$t.kind!==Pt||$t.direction!=="sendrecv"&&$t.direction!=="sendonly")continue;const Vt={uri:$t.uri,id:$t.sendId,encrypt:$t.encrypt,parameters:{}};Nt.headerExtensions.push(Vt)}if(Nt.headerExtensions.some($t=>$t.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="goog-remb");else if(Nt.headerExtensions.some($t=>$t.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="transport-cc");else for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="transport-cc"&&Vt.type!=="goog-remb");return Nt},dt.reduceCodecs=function(Pt,Ot){const Nt=[];if(Ot){for(let $t=0;$t<Pt.length;++$t)if(jt(Pt[$t],Ot)){Nt.push(Pt[$t]),Dt(Pt[$t+1])&&Nt.push(Pt[$t+1]);break}if(Nt.length===0)throw new TypeError("no matching codec found")}else Nt.push(Pt[0]),Dt(Pt[1])&&Nt.push(Pt[1]);return Nt},dt.generateProbatorRtpParameters=function(Pt){Et(Pt=xt.clone(Pt));const Ot={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return Ot.codecs.push(Pt.codecs[0]),Ot.codecs[0].payloadType=127,Ot.headerExtensions=Pt.headerExtensions,Ot},dt.canSend=function(Pt,Ot){return Ot.codecs.some(Nt=>Nt.kind===Pt)},dt.canReceive=function(Pt,Ot){if(Et(Pt),Pt.codecs.length===0)return!1;const Nt=Pt.codecs[0];return Ot.codecs.some($t=>$t.remotePayloadType===Nt.payloadType)}},2770:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.parse=void 0;const ht=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");dt.parse=function(pt){const ft=ht.exec(pt||"");return ft?{spatialLayers:Number(ft[1]),temporalLayers:Number(ft[2])}:{spatialLayers:1,temporalLayers:1}}},53:function(ut,dt,ht){var pt=this&&this.__createBinding||(Object.create?function(mt,gt,xt,yt){yt===void 0&&(yt=xt);var vt=Object.getOwnPropertyDescriptor(gt,xt);vt&&!("get"in vt?!gt.__esModule:vt.writable||vt.configurable)||(vt={enumerable:!0,get:function(){return gt[xt]}}),Object.defineProperty(mt,yt,vt)}:function(mt,gt,xt,yt){yt===void 0&&(yt=xt),mt[yt]=gt[xt]}),ft=this&&this.__exportStar||function(mt,gt){for(var xt in mt)xt==="default"||Object.prototype.hasOwnProperty.call(gt,xt)||pt(gt,mt,xt)};Object.defineProperty(dt,"__esModule",{value:!0}),ft(ht(3120),dt),ft(ht(5202),dt),ft(ht(6569),dt),ft(ht(9514),dt),ft(ht(5504),dt),ft(ht(1623),dt),ft(ht(4879),dt),ft(ht(7669),dt),ft(ht(9316),dt),ft(ht(9992),dt)},3347:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.generateRandomNumber=dt.clone=void 0,dt.clone=function(ht){return ht===void 0?void 0:Number.isNaN(ht)?NaN:typeof structuredClone=="function"?structuredClone(ht):JSON.parse(JSON.stringify(ht))},dt.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},7824:ut=>{var dt=1e3,ht=60*dt,pt=60*ht,ft=24*pt,mt=7*ft,gt=365.25*ft;function xt(yt,vt,St,Et){var wt=vt>=1.5*St;return Math.round(yt/St)+" "+Et+(wt?"s":"")}ut.exports=function(yt,vt){vt=vt||{};var St=typeof yt;if(St==="string"&&yt.length>0)return function(Et){if(!((Et=String(Et)).length>100)){var wt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Et);if(wt){var Rt=parseFloat(wt[1]);switch((wt[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return Rt*gt;case"weeks":case"week":case"w":return Rt*mt;case"days":case"day":case"d":return Rt*ft;case"hours":case"hour":case"hrs":case"hr":case"h":return Rt*pt;case"minutes":case"minute":case"mins":case"min":case"m":return Rt*ht;case"seconds":case"second":case"secs":case"sec":case"s":return Rt*dt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Rt;default:return}}}}(yt);if(St==="number"&&isFinite(yt))return vt.long?function(Et){var wt=Math.abs(Et);return wt>=ft?xt(Et,wt,ft,"day"):wt>=pt?xt(Et,wt,pt,"hour"):wt>=ht?xt(Et,wt,ht,"minute"):wt>=dt?xt(Et,wt,dt,"second"):Et+" ms"}(yt):function(Et){var wt=Math.abs(Et);return wt>=ft?Math.round(Et/ft)+"d":wt>=pt?Math.round(Et/pt)+"h":wt>=ht?Math.round(Et/ht)+"m":wt>=dt?Math.round(Et/dt)+"s":Et+"ms"}(yt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(yt))}},7576:(ut,dt,ht)=>{const{EventEmitter:pt}=ht(7187),ft=ht(3417);ut.exports=class extends pt{constructor(mt){super(),this.setMaxListeners(1/0),this._logger=mt||new ft("EnhancedEventEmitter")}safeEmit(mt,...gt){try{this.emit(mt,...gt)}catch(xt){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",mt,xt)}}async safeEmitAsPromise(mt,...gt){return new Promise((xt,yt)=>{this.safeEmit(mt,...gt,xt,yt)})}}},3417:(ut,dt,ht)=>{const pt=ht(1227),ft="protoo-client";ut.exports=class{constructor(mt){mt?(this._debug=pt(`${ft}:${mt}`),this._warn=pt(`${ft}:WARN:${mt}`),this._error=pt(`${ft}:ERROR:${mt}`)):(this._debug=pt(ft),this._warn=pt(`${ft}:WARN`),this._error=pt(`${ft}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6508:(ut,dt,ht)=>{const pt=ht(3417),{generateRandomNumber:ft}=ht(5654),mt=new pt("Message");ut.exports=class{static parse(gt){let xt;const yt={};try{xt=JSON.parse(gt)}catch(vt){return void mt.error("parse() | invalid JSON: %s",vt)}if(typeof xt=="object"&&!Array.isArray(xt)){if(xt.request){if(yt.request=!0,typeof xt.method!="string")return void mt.error("parse() | missing/invalid method field");if(typeof xt.id!="number")return void mt.error("parse() | missing/invalid id field");yt.id=xt.id,yt.method=xt.method,yt.data=xt.data||{}}else if(xt.response){if(yt.response=!0,typeof xt.id!="number")return void mt.error("parse() | missing/invalid id field");yt.id=xt.id,xt.ok?(yt.ok=!0,yt.data=xt.data||{}):(yt.ok=!1,yt.errorCode=xt.errorCode,yt.errorReason=xt.errorReason)}else{if(!xt.notification)return void mt.error("parse() | missing request/response field");if(yt.notification=!0,typeof xt.method!="string")return void mt.error("parse() | missing/invalid method field");yt.method=xt.method,yt.data=xt.data||{}}return yt}mt.error("parse() | not an object")}static createRequest(gt,xt){return{request:!0,id:ft(),method:gt,data:xt||{}}}static createSuccessResponse(gt,xt){return{response:!0,id:gt.id,ok:!0,data:xt||{}}}static createErrorResponse(gt,xt,yt){return{response:!0,id:gt.id,ok:!1,errorCode:xt,errorReason:yt}}static createNotification(gt,xt){return{notification:!0,method:gt,data:xt||{}}}}},7502:(ut,dt,ht)=>{const pt=ht(3417),ft=ht(7576),mt=ht(6508),gt=new pt("Peer");ut.exports=class extends ft{constructor(xt){super(gt),gt.debug("constructor()"),this._closed=!1,this._transport=xt,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(xt){throw new Error("cannot override data object")}close(){if(!this._closed){gt.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const xt of this._sents.values())xt.close();this.safeEmit("close")}}async request(xt,yt=void 0){const vt=mt.createRequest(xt,yt);return this._logger.debug("request() [method:%s, id:%s]",xt,vt.id),await this._transport.send(vt),new Promise((St,Et)=>{const wt=1500*(15+.1*this._sents.size),Rt={id:vt.id,method:vt.method,resolve:Tt=>{this._sents.delete(vt.id)&&(clearTimeout(Rt.timer),St(Tt))},reject:Tt=>{this._sents.delete(vt.id)&&(clearTimeout(Rt.timer),Et(Tt))},timer:setTimeout(()=>{this._sents.delete(vt.id)&&Et(new Error("request timeout"))},wt),close:()=>{clearTimeout(Rt.timer),Et(new Error("peer closed"))}};this._sents.set(vt.id,Rt)})}async notify(xt,yt=void 0){const vt=mt.createNotification(xt,yt);this._logger.debug("notify() [method:%s]",xt),await this._transport.send(vt)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(gt.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(gt.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",xt=>{this._closed||(gt.debug('emit "failed" [currentAttempt:%s]',xt),this._connected=!1,this.safeEmit("failed",xt))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,gt.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",xt=>{xt.request?this._handleRequest(xt):xt.response?this._handleResponse(xt):xt.notification&&this._handleNotification(xt)})}_handleRequest(xt){try{this.emit("request",xt,yt=>{const vt=mt.createSuccessResponse(xt,yt);this._transport.send(vt).catch(()=>{})},(yt,vt)=>{yt instanceof Error?(vt=yt.message,yt=500):typeof yt=="number"&&vt instanceof Error&&(vt=vt.message);const St=mt.createErrorResponse(xt,yt,vt);this._transport.send(St).catch(()=>{})})}catch(yt){const vt=mt.createErrorResponse(xt,500,String(yt));this._transport.send(vt).catch(()=>{})}}_handleResponse(xt){const yt=this._sents.get(xt.id);if(yt)if(xt.ok)yt.resolve(xt.data);else{const vt=new Error(xt.errorReason);vt.code=xt.errorCode,yt.reject(vt)}else gt.error("received response does not match any sent request [id:%s]",xt.id)}_handleNotification(xt){this.safeEmit("notification",xt)}}},9293:(ut,dt,ht)=>{ht(7002);const pt=ht(7502),ft=ht(2165);dt._z=pt,dt.qo=ft},2165:(ut,dt,ht)=>{const pt=ht(5840).w3cwebsocket,ft=ht(9353),mt=ht(3417),gt=ht(7576),xt=ht(6508),yt={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},vt=new mt("WebSocketTransport");ut.exports=class extends gt{constructor(St,Et){super(vt),vt.debug("constructor() [url:%s, options:%o]",St,Et),this._closed=!1,this._url=St,this._options=Et||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){vt.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(St){vt.error("close() | error closing the WebSocket: %o",St)}}}async send(St){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(St))}catch(Et){throw vt.warn("send() failed:%o",Et),Et}}_runWebSocket(){const St=ft.operation(this._options.retry||yt);let Et=!1;St.attempt(wt=>{this._closed?St.stop():(vt.debug("_runWebSocket() [currentAttempt:%s]",wt),this._ws=new pt(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(Et=!0,this.safeEmit("open"))},this._ws.onclose=Rt=>{if(!this._closed){if(vt.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',Rt.wasClean,Rt.code,Rt.reason),Rt.code!==4e3){if(Et)return St.stop(),this.safeEmit("disconnected"),this._closed?void 0:void this._runWebSocket();if(this.safeEmit("failed",wt),this._closed||St.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||vt.error('WebSocket "error" event')},this._ws.onmessage=Rt=>{if(this._closed)return;const Tt=xt.parse(Rt.data);Tt&&(this.listenerCount("message")!==0?this.safeEmit("message",Tt):vt.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}},5654:(ut,dt)=>{dt.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},4375:(ut,dt,ht)=>{let pt;ut.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ht.g):ft=>(pt||(pt=Promise.resolve())).then(ft).catch(mt=>setTimeout(()=>{throw mt},0))},3196:ut=>{ut.exports=function(dt){var ht,pt,ft="",mt=(dt=function(xt){return xt||(xt={}),{length:xt.length||8,numeric:typeof xt.numeric!="boolean"||xt.numeric,letters:typeof xt.letters!="boolean"||xt.letters,special:typeof xt.special=="boolean"&&xt.special,exclude:Array.isArray(xt.exclude)?xt.exclude:[]}}(dt)).length,gt=(dt.exclude,function(xt){var yt="";xt.numeric&&(yt+="0123456789"),xt.letters&&(yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),xt.special&&(yt+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var vt=0;vt<=xt.exclude.length;vt++)yt=yt.replace(xt.exclude[vt],"");return yt}(dt));for(ht=1;ht<=mt;ht++)ft+=gt.substring(pt=Math.floor(Math.random()*gt.length),pt+1);return ft}},9353:(ut,dt,ht)=>{ut.exports=ht(1846)},1846:(ut,dt,ht)=>{var pt=ht(1960);dt.operation=function(ft){var mt=dt.timeouts(ft);return new pt(mt,{forever:ft&&ft.forever,unref:ft&&ft.unref,maxRetryTime:ft&&ft.maxRetryTime})},dt.timeouts=function(ft){if(ft instanceof Array)return[].concat(ft);var mt={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var gt in ft)mt[gt]=ft[gt];if(mt.minTimeout>mt.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var xt=[],yt=0;yt<mt.retries;yt++)xt.push(this.createTimeout(yt,mt));return ft&&ft.forever&&!xt.length&&xt.push(this.createTimeout(yt,mt)),xt.sort(function(vt,St){return vt-St}),xt},dt.createTimeout=function(ft,mt){var gt=mt.randomize?Math.random()+1:1,xt=Math.round(gt*mt.minTimeout*Math.pow(mt.factor,ft));return xt=Math.min(xt,mt.maxTimeout)},dt.wrap=function(ft,mt,gt){if(mt instanceof Array&&(gt=mt,mt=null),!gt)for(var xt in gt=[],ft)typeof ft[xt]=="function"&&gt.push(xt);for(var yt=0;yt<gt.length;yt++){var vt=gt[yt],St=ft[vt];ft[vt]=(function(Et){var wt=dt.operation(mt),Rt=Array.prototype.slice.call(arguments,1),Tt=Rt.pop();Rt.push(function(It){wt.retry(It)||(It&&(arguments[0]=wt.mainError()),Tt.apply(this,arguments))}),wt.attempt(function(){Et.apply(ft,Rt)})}).bind(ft,St),ft[vt].options=mt}}},1960:ut=>{function dt(ht,pt){typeof pt=="boolean"&&(pt={forever:pt}),this._originalTimeouts=JSON.parse(JSON.stringify(ht)),this._timeouts=ht,this._options=pt||{},this._maxRetryTime=pt&&pt.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}ut.exports=dt,dt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},dt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},dt.prototype.retry=function(ht){if(this._timeout&&clearTimeout(this._timeout),!ht)return!1;var pt=new Date().getTime();if(ht&&pt-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(ht);var ft=this._timeouts.shift();if(ft===void 0){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),ft=this._timeouts.shift()}var mt=this,gt=setTimeout(function(){mt._attempts++,mt._operationTimeoutCb&&(mt._timeout=setTimeout(function(){mt._operationTimeoutCb(mt._attempts)},mt._operationTimeout),mt._options.unref&&mt._timeout.unref()),mt._fn(mt._attempts)},ft);return this._options.unref&&gt.unref(),!0},dt.prototype.attempt=function(ht,pt){this._fn=ht,pt&&(pt.timeout&&(this._operationTimeout=pt.timeout),pt.cb&&(this._operationTimeoutCb=pt.cb));var ft=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){ft._operationTimeoutCb()},ft._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},dt.prototype.try=function(ht){console.log("Using RetryOperation.try() is deprecated"),this.attempt(ht)},dt.prototype.start=function(ht){console.log("Using RetryOperation.start() is deprecated"),this.attempt(ht)},dt.prototype.start=dt.prototype.try,dt.prototype.errors=function(){return this._errors},dt.prototype.attempts=function(){return this._attempts},dt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var ht={},pt=null,ft=0,mt=0;mt<this._errors.length;mt++){var gt=this._errors[mt],xt=gt.message,yt=(ht[xt]||0)+1;ht[xt]=yt,yt>=ft&&(pt=gt,ft=yt)}return pt}},6692:ut=>{var dt=ut.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(ht){return ht.encoding?"rtpmap:%d %s/%s/%s":ht.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(ht){return ht.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(ht){return ht.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(ht){return"extmap:%d"+(ht.direction?"/%s":"%v")+(ht["encrypt-uri"]?" %s":"%v")+" %s"+(ht.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(ht){return ht.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(ht){var pt="candidate:%s %d %s %d %s %d typ %s";return pt+=ht.raddr!=null?" raddr %s rport %d":"%v%v",pt+=ht.tcptype!=null?" tcptype %s":"%v",ht.generation!=null&&(pt+=" generation %d"),pt+=ht["network-id"]!=null?" network-id %d":"%v",pt+=ht["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(ht){var pt="ssrc:%d";return ht.attribute!=null&&(pt+=" %s",ht.value!=null&&(pt+=":%s")),pt}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(ht){return ht.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(ht){return ht.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(ht){return"imageattr:%s %s %s"+(ht.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(ht){return"simulcast:%s %s"+(ht.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(ht){return"ts-refclk:%s"+(ht.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(ht){var pt="mediaclk:";return pt+=ht.id!=null?"id=%s %s":"%v%s",pt+=ht.mediaClockValue!=null?"=%s":"",pt+=ht.rateNumerator!=null?" rate=%s":"",pt+=ht.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(dt).forEach(function(ht){dt[ht].forEach(function(pt){pt.reg||(pt.reg=/(.*)/),pt.format||(pt.format="%s")})})},766:(ut,dt,ht)=>{var pt=ht(962),ft=ht(5776);dt.write=ft,dt.parse=pt.parse,dt.parseParams=pt.parseParams,dt.parseFmtpConfig=pt.parseFmtpConfig,dt.parsePayloads=pt.parsePayloads,dt.parseRemoteCandidates=pt.parseRemoteCandidates,dt.parseImageAttributes=pt.parseImageAttributes,dt.parseSimulcastStreamList=pt.parseSimulcastStreamList},962:(ut,dt,ht)=>{var pt=function(yt){return String(Number(yt))===yt?Number(yt):yt},ft=function(yt,vt,St){var Et=yt.name&&yt.names;yt.push&&!vt[yt.push]?vt[yt.push]=[]:Et&&!vt[yt.name]&&(vt[yt.name]={});var wt=yt.push?{}:Et?vt[yt.name]:vt;(function(Rt,Tt,It,At){if(At&&!It)Tt[At]=pt(Rt[1]);else for(var Dt=0;Dt<It.length;Dt+=1)Rt[Dt+1]!=null&&(Tt[It[Dt]]=pt(Rt[Dt+1]))})(St.match(yt.reg),wt,yt.names,yt.name),yt.push&&vt[yt.push].push(wt)},mt=ht(6692),gt=RegExp.prototype.test.bind(/^([a-z])=(.*)/);dt.parse=function(yt){var vt={},St=[],Et=vt;return yt.split(/(\r\n|\r|\n)/).filter(gt).forEach(function(wt){var Rt=wt[0],Tt=wt.slice(2);Rt==="m"&&(St.push({rtp:[],fmtp:[]}),Et=St[St.length-1]);for(var It=0;It<(mt[Rt]||[]).length;It+=1){var At=mt[Rt][It];if(At.reg.test(Tt))return ft(At,Et,Tt)}}),vt.media=St,vt};var xt=function(yt,vt){var St=vt.split(/=(.+)/,2);return St.length===2?yt[St[0]]=pt(St[1]):St.length===1&&vt.length>1&&(yt[St[0]]=void 0),yt};dt.parseParams=function(yt){return yt.split(/;\s?/).reduce(xt,{})},dt.parseFmtpConfig=dt.parseParams,dt.parsePayloads=function(yt){return yt.toString().split(" ").map(Number)},dt.parseRemoteCandidates=function(yt){for(var vt=[],St=yt.split(" ").map(pt),Et=0;Et<St.length;Et+=3)vt.push({component:St[Et],ip:St[Et+1],port:St[Et+2]});return vt},dt.parseImageAttributes=function(yt){return yt.split(" ").map(function(vt){return vt.substring(1,vt.length-1).split(",").reduce(xt,{})})},dt.parseSimulcastStreamList=function(yt){return yt.split(";").map(function(vt){return vt.split(",").map(function(St){var Et,wt=!1;return St[0]!=="~"?Et=pt(St):(Et=pt(St.substring(1,St.length)),wt=!0),{scid:Et,paused:wt}})})}},5776:(ut,dt,ht)=>{var pt=ht(6692),ft=/%[sdv%]/g,mt=function(vt){var St=1,Et=arguments,wt=Et.length;return vt.replace(ft,function(Rt){if(St>=wt)return Rt;var Tt=Et[St];switch(St+=1,Rt){case"%%":return"%";case"%s":return String(Tt);case"%d":return Number(Tt);case"%v":return""}})},gt=function(vt,St,Et){var wt=[vt+"="+(St.format instanceof Function?St.format(St.push?Et:Et[St.name]):St.format)];if(St.names)for(var Rt=0;Rt<St.names.length;Rt+=1){var Tt=St.names[Rt];St.name?wt.push(Et[St.name][Tt]):wt.push(Et[St.names[Rt]])}else wt.push(Et[St.name]);return mt.apply(null,wt)},xt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],yt=["i","c","b","a"];ut.exports=function(vt,St){St=St||{},vt.version==null&&(vt.version=0),vt.name==null&&(vt.name=" "),vt.media.forEach(function(Tt){Tt.payloads==null&&(Tt.payloads="")});var Et=St.outerOrder||xt,wt=St.innerOrder||yt,Rt=[];return Et.forEach(function(Tt){pt[Tt].forEach(function(It){It.name in vt&&vt[It.name]!=null?Rt.push(gt(Tt,It,vt)):It.push in vt&&vt[It.push]!=null&&vt[It.push].forEach(function(At){Rt.push(gt(Tt,It,At))})})}),vt.media.forEach(function(Tt){Rt.push(gt("m",pt.m[0],Tt)),wt.forEach(function(It){pt[It].forEach(function(At){At.name in Tt&&Tt[At.name]!=null?Rt.push(gt(It,At,Tt)):At.push in Tt&&Tt[At.push]!=null&&Tt[At.push].forEach(function(Dt){Rt.push(gt(It,At,Dt))})})})}),Rt.join(`\r
`)+`\r
`}},2238:function(ut,dt,ht){var pt;(function(ft,mt){var gt="function",xt="undefined",yt="object",vt="string",St="major",Et="model",wt="name",Rt="type",Tt="vendor",It="version",At="architecture",Dt="console",jt="mobile",Ft="tablet",Lt="smarttv",Pt="wearable",Ot="embedded",Nt="Amazon",$t="Apple",Vt="ASUS",Ut="BlackBerry",zt="Browser",Bt="Chrome",Ht="Firefox",Gt="Google",Kt="Huawei",Xt="LG",or="Microsoft",tr="Motorola",dr="Opera",fr="Samsung",Sr="Sharp",vr="Sony",mr="Xiaomi",hr="Zebra",gr="Facebook",lr="Chromium OS",Ir="Mac OS",wr=function(ln){for(var xn={},yn=0;yn<ln.length;yn++)xn[ln[yn].toUpperCase()]=ln[yn];return xn},Fr=function(ln,xn){return typeof ln===vt&&$r(xn).indexOf($r(ln))!==-1},$r=function(ln){return ln.toLowerCase()},hn=function(ln,xn){if(typeof ln===vt)return ln=ln.replace(/^\s\s*/,""),typeof xn===xt?ln:ln.substring(0,500)},Zr=function(ln,xn){for(var yn,Wn,Mn,sn,qn,Gr,qr=0;qr<xn.length&&!qn;){var wn=xn[qr],Cr=xn[qr+1];for(yn=Wn=0;yn<wn.length&&!qn&&wn[yn];)if(qn=wn[yn++].exec(ln))for(Mn=0;Mn<Cr.length;Mn++)Gr=qn[++Wn],typeof(sn=Cr[Mn])===yt&&sn.length>0?sn.length===2?typeof sn[1]==gt?this[sn[0]]=sn[1].call(this,Gr):this[sn[0]]=sn[1]:sn.length===3?typeof sn[1]!==gt||sn[1].exec&&sn[1].test?this[sn[0]]=Gr?Gr.replace(sn[1],sn[2]):mt:this[sn[0]]=Gr?sn[1].call(this,Gr,sn[2]):mt:sn.length===4&&(this[sn[0]]=Gr?sn[3].call(this,Gr.replace(sn[1],sn[2])):mt):this[sn]=Gr||mt;qr+=2}},Qt=function(ln,xn){for(var yn in xn)if(typeof xn[yn]===yt&&xn[yn].length>0){for(var Wn=0;Wn<xn[yn].length;Wn++)if(Fr(xn[yn][Wn],ln))return yn==="?"?mt:yn}else if(Fr(xn[yn],ln))return yn==="?"?mt:yn;return ln},Jt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},pr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[It,[wt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[It,[wt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[wt,It],[/opios[\/ ]+([\w\.]+)/i],[It,[wt,dr+" Mini"]],[/\bopr\/([\w\.]+)/i],[It,[wt,dr]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[It,[wt,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[wt,It],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[It,[wt,"UC"+zt]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[It,[wt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[It,[wt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[It,[wt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[It,[wt,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[It,[wt,"Smart Lenovo "+zt]],[/(avast|avg)\/([\w\.]+)/i],[[wt,/(.+)/,"$1 Secure "+zt],It],[/\bfocus\/([\w\.]+)/i],[It,[wt,Ht+" Focus"]],[/\bopt\/([\w\.]+)/i],[It,[wt,dr+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[It,[wt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[It,[wt,"Dolphin"]],[/coast\/([\w\.]+)/i],[It,[wt,dr+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[It,[wt,"MIUI "+zt]],[/fxios\/([-\w\.]+)/i],[It,[wt,Ht]],[/\bqihu|(qi?ho?o?|360)browser/i],[[wt,"360 "+zt]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[wt,/(.+)/,"$1 "+zt],It],[/samsungbrowser\/([\w\.]+)/i],[It,[wt,fr+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[wt,/_/g," "],It],[/metasr[\/ ]?([\d\.]+)/i],[It,[wt,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[wt,"Sogou Mobile"],It],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[wt,It],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[wt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[wt,gr],It],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[wt,It],[/\bgsa\/([\w\.]+) .*safari\//i],[It,[wt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[It,[wt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[It,[wt,Bt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[wt,Bt+" WebView"],It],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[It,[wt,"Android "+zt]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[wt,It],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[It,[wt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[It,wt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[wt,[It,Qt,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[wt,It],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[wt,"Netscape"],It],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[It,[wt,Ht+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[wt,It],[/(cobalt)\/([\w\.]+)/i],[wt,[It,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[At,"amd64"]],[/(ia32(?=;))/i],[[At,$r]],[/((?:i[346]|x)86)[;\)]/i],[[At,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[At,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[At,"armhf"]],[/windows (ce|mobile); ppc;/i],[[At,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[At,/ower/,"",$r]],[/(sun4\w)[;\)]/i],[[At,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[At,$r]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[Et,[Tt,fr],[Rt,Ft]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[Et,[Tt,fr],[Rt,jt]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[Et,[Tt,$t],[Rt,jt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[Et,[Tt,$t],[Rt,Ft]],[/(macintosh);/i],[Et,[Tt,$t]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[Et,[Tt,Sr],[Rt,jt]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[Et,[Tt,Kt],[Rt,Ft]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[Et,[Tt,Kt],[Rt,jt]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[Et,/_/g," "],[Tt,mr],[Rt,jt]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[Et,/_/g," "],[Tt,mr],[Rt,Ft]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[Et,[Tt,"OPPO"],[Rt,jt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[Et,[Tt,"Vivo"],[Rt,jt]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[Et,[Tt,"Realme"],[Rt,jt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[Et,[Tt,tr],[Rt,jt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[Et,[Tt,tr],[Rt,Ft]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[Et,[Tt,Xt],[Rt,Ft]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[Et,[Tt,Xt],[Rt,jt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[Et,[Tt,"Lenovo"],[Rt,Ft]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[Et,/_/g," "],[Tt,"Nokia"],[Rt,jt]],[/(pixel c)\b/i],[Et,[Tt,Gt],[Rt,Ft]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[Et,[Tt,Gt],[Rt,jt]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Et,[Tt,vr],[Rt,jt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[Et,"Xperia Tablet"],[Tt,vr],[Rt,Ft]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[Et,[Tt,"OnePlus"],[Rt,jt]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[Et,[Tt,Nt],[Rt,Ft]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[Et,/(.+)/g,"Fire Phone $1"],[Tt,Nt],[Rt,jt]],[/(playbook);[-\w\),; ]+(rim)/i],[Et,Tt,[Rt,Ft]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[Et,[Tt,Ut],[Rt,jt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[Et,[Tt,Vt],[Rt,Ft]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[Et,[Tt,Vt],[Rt,jt]],[/(nexus 9)/i],[Et,[Tt,"HTC"],[Rt,Ft]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[Tt,[Et,/_/g," "],[Rt,jt]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[Et,[Tt,"Acer"],[Rt,Ft]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[Et,[Tt,"Meizu"],[Rt,jt]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[Et,[Tt,"Ulefone"],[Rt,jt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[Tt,Et,[Rt,jt]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[Tt,Et,[Rt,Ft]],[/(surface duo)/i],[Et,[Tt,or],[Rt,Ft]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[Et,[Tt,"Fairphone"],[Rt,jt]],[/(u304aa)/i],[Et,[Tt,"AT&T"],[Rt,jt]],[/\bsie-(\w*)/i],[Et,[Tt,"Siemens"],[Rt,jt]],[/\b(rct\w+) b/i],[Et,[Tt,"RCA"],[Rt,Ft]],[/\b(venue[\d ]{2,7}) b/i],[Et,[Tt,"Dell"],[Rt,Ft]],[/\b(q(?:mv|ta)\w+) b/i],[Et,[Tt,"Verizon"],[Rt,Ft]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[Et,[Tt,"Barnes & Noble"],[Rt,Ft]],[/\b(tm\d{3}\w+) b/i],[Et,[Tt,"NuVision"],[Rt,Ft]],[/\b(k88) b/i],[Et,[Tt,"ZTE"],[Rt,Ft]],[/\b(nx\d{3}j) b/i],[Et,[Tt,"ZTE"],[Rt,jt]],[/\b(gen\d{3}) b.+49h/i],[Et,[Tt,"Swiss"],[Rt,jt]],[/\b(zur\d{3}) b/i],[Et,[Tt,"Swiss"],[Rt,Ft]],[/\b((zeki)?tb.*\b) b/i],[Et,[Tt,"Zeki"],[Rt,Ft]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[Tt,"Dragon Touch"],Et,[Rt,Ft]],[/\b(ns-?\w{0,9}) b/i],[Et,[Tt,"Insignia"],[Rt,Ft]],[/\b((nxa|next)-?\w{0,9}) b/i],[Et,[Tt,"NextBook"],[Rt,Ft]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[Tt,"Voice"],Et,[Rt,jt]],[/\b(lvtel\-)?(v1[12]) b/i],[[Tt,"LvTel"],Et,[Rt,jt]],[/\b(ph-1) /i],[Et,[Tt,"Essential"],[Rt,jt]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[Et,[Tt,"Envizen"],[Rt,Ft]],[/\b(trio[-\w\. ]+) b/i],[Et,[Tt,"MachSpeed"],[Rt,Ft]],[/\btu_(1491) b/i],[Et,[Tt,"Rotor"],[Rt,Ft]],[/(shield[\w ]+) b/i],[Et,[Tt,"Nvidia"],[Rt,Ft]],[/(sprint) (\w+)/i],[Tt,Et,[Rt,jt]],[/(kin\.[onetw]{3})/i],[[Et,/\./g," "],[Tt,or],[Rt,jt]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[Et,[Tt,hr],[Rt,Ft]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[Et,[Tt,hr],[Rt,jt]],[/smart-tv.+(samsung)/i],[Tt,[Rt,Lt]],[/hbbtv.+maple;(\d+)/i],[[Et,/^/,"SmartTV"],[Tt,fr],[Rt,Lt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[Tt,Xt],[Rt,Lt]],[/(apple) ?tv/i],[Tt,[Et,$t+" TV"],[Rt,Lt]],[/crkey/i],[[Et,Bt+"cast"],[Tt,Gt],[Rt,Lt]],[/droid.+aft(\w+)( bui|\))/i],[Et,[Tt,Nt],[Rt,Lt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[Et,[Tt,Sr],[Rt,Lt]],[/(bravia[\w ]+)( bui|\))/i],[Et,[Tt,vr],[Rt,Lt]],[/(mitv-\w{5}) bui/i],[Et,[Tt,mr],[Rt,Lt]],[/Hbbtv.*(technisat) (.*);/i],[Tt,Et,[Rt,Lt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[Tt,hn],[Et,hn],[Rt,Lt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[Rt,Lt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[Tt,Et,[Rt,Dt]],[/droid.+; (shield) bui/i],[Et,[Tt,"Nvidia"],[Rt,Dt]],[/(playstation [345portablevi]+)/i],[Et,[Tt,vr],[Rt,Dt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[Et,[Tt,or],[Rt,Dt]],[/((pebble))app/i],[Tt,Et,[Rt,Pt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[Et,[Tt,$t],[Rt,Pt]],[/droid.+; (glass) \d/i],[Et,[Tt,Gt],[Rt,Pt]],[/droid.+; (wt63?0{2,3})\)/i],[Et,[Tt,hr],[Rt,Pt]],[/(quest( 2| pro)?)/i],[Et,[Tt,gr],[Rt,Pt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[Tt,[Rt,Ot]],[/(aeobc)\b/i],[Et,[Tt,Nt],[Rt,Ot]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[Et,[Rt,jt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[Et,[Rt,Ft]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[Rt,Ft]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[Rt,jt]],[/(android[-\w\. ]{0,9});.+buil/i],[Et,[Tt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[It,[wt,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[It,[wt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[wt,It],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[It,wt]],os:[[/microsoft (windows) (vista|xp)/i],[wt,It],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[wt,[It,Qt,Jt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[It,Qt,Jt],[wt,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[It,/_/g,"."],[wt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[wt,Ir],[It,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[It,wt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[wt,It],[/\(bb(10);/i],[It,[wt,Ut]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[It,[wt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[It,[wt,Ht+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[It,[wt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[It,[wt,"watchOS"]],[/crkey\/([\d\.]+)/i],[It,[wt,Bt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[wt,lr],It],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[wt,It],[/(sunos) ?([\w\.\d]*)/i],[[wt,"Solaris"],It],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[wt,It]]},Vr=function(ln,xn){if(typeof ln===yt&&(xn=ln,ln=mt),!(this instanceof Vr))return new Vr(ln,xn).getResult();var yn=typeof ft!==xt&&ft.navigator?ft.navigator:mt,Wn=ln||(yn&&yn.userAgent?yn.userAgent:""),Mn=yn&&yn.userAgentData?yn.userAgentData:mt,sn=xn?function(Gr,qr){var wn={};for(var Cr in Gr)qr[Cr]&&qr[Cr].length%2==0?wn[Cr]=qr[Cr].concat(Gr[Cr]):wn[Cr]=Gr[Cr];return wn}(pr,xn):pr,qn=yn&&yn.userAgent==Wn;return this.getBrowser=function(){var Gr,qr={};return qr[wt]=mt,qr[It]=mt,Zr.call(qr,Wn,sn.browser),qr[St]=typeof(Gr=qr[It])===vt?Gr.replace(/[^\d\.]/g,"").split(".")[0]:mt,qn&&yn&&yn.brave&&typeof yn.brave.isBrave==gt&&(qr[wt]="Brave"),qr},this.getCPU=function(){var Gr={};return Gr[At]=mt,Zr.call(Gr,Wn,sn.cpu),Gr},this.getDevice=function(){var Gr={};return Gr[Tt]=mt,Gr[Et]=mt,Gr[Rt]=mt,Zr.call(Gr,Wn,sn.device),qn&&!Gr[Rt]&&Mn&&Mn.mobile&&(Gr[Rt]=jt),qn&&Gr[Et]=="Macintosh"&&yn&&typeof yn.standalone!==xt&&yn.maxTouchPoints&&yn.maxTouchPoints>2&&(Gr[Et]="iPad",Gr[Rt]=Ft),Gr},this.getEngine=function(){var Gr={};return Gr[wt]=mt,Gr[It]=mt,Zr.call(Gr,Wn,sn.engine),Gr},this.getOS=function(){var Gr={};return Gr[wt]=mt,Gr[It]=mt,Zr.call(Gr,Wn,sn.os),qn&&!Gr[wt]&&Mn&&Mn.platform!="Unknown"&&(Gr[wt]=Mn.platform.replace(/chrome os/i,lr).replace(/macos/i,Ir)),Gr},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Wn},this.setUA=function(Gr){return Wn=typeof Gr===vt&&Gr.length>500?hn(Gr,500):Gr,this},this.setUA(Wn),this};Vr.VERSION="1.0.37",Vr.BROWSER=wr([wt,It,St]),Vr.CPU=wr([At]),Vr.DEVICE=wr([Et,Tt,Rt,Dt,jt,Lt,Ft,Pt,Ot]),Vr.ENGINE=Vr.OS=wr([wt,It]),typeof dt!==xt?(ut.exports&&(dt=ut.exports=Vr),dt.UAParser=Vr):ht.amdO?(pt=(function(){return Vr}).call(dt,ht,dt,ut))===mt||(ut.exports=pt):typeof ft!==xt&&(ft.UAParser=Vr);var Wr=typeof ft!==xt&&(ft.jQuery||ft.Zepto);if(Wr&&!Wr.ua){var zr=new Vr;Wr.ua=zr.getResult(),Wr.ua.get=function(){return zr.getUA()},Wr.ua.set=function(ln){zr.setUA(ln);var xn=zr.getResult();for(var yn in xn)Wr.ua[yn]=xn[yn]}}})(typeof window=="object"?window:this)},5840:(ut,dt,ht)=>{var pt;if(typeof globalThis=="object")pt=globalThis;else try{pt=ht(284)}catch{}finally{if(pt||typeof window>"u"||(pt=window),!pt)throw new Error("Could not determine global this")}var ft=pt.WebSocket||pt.MozWebSocket,mt=ht(9387);function gt(xt,yt){return yt?new ft(xt,yt):new ft(xt)}ft&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(xt){Object.defineProperty(gt,xt,{get:function(){return ft[xt]}})}),ut.exports={w3cwebsocket:ft?gt:null,version:mt}},9387:(ut,dt,ht)=>{ut.exports=ht(9794).version},7147:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{DOMException:()=>Pt,Headers:()=>St,Request:()=>Dt,Response:()=>Ft,fetch:()=>Ot});var pt=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||ht.g!==void 0&&ht.g||{},ft={searchParams:"URLSearchParams"in pt,iterable:"Symbol"in pt&&"iterator"in Symbol,blob:"FileReader"in pt&&"Blob"in pt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in pt,arrayBuffer:"ArrayBuffer"in pt};if(ft.arrayBuffer)var mt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],gt=ArrayBuffer.isView||function(Nt){return Nt&&mt.indexOf(Object.prototype.toString.call(Nt))>-1};function xt(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(Nt)||Nt==="")throw new TypeError('Invalid character in header field name: "'+Nt+'"');return Nt.toLowerCase()}function yt(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function vt(Nt){var $t={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return ft.iterable&&($t[Symbol.iterator]=function(){return $t}),$t}function St(Nt){this.map={},Nt instanceof St?Nt.forEach(function($t,Vt){this.append(Vt,$t)},this):Array.isArray(Nt)?Nt.forEach(function($t){if($t.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+$t.length);this.append($t[0],$t[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function($t){this.append($t,Nt[$t])},this)}function Et(Nt){if(!Nt._noBody)return Nt.bodyUsed?Promise.reject(new TypeError("Already read")):void(Nt.bodyUsed=!0)}function wt(Nt){return new Promise(function($t,Vt){Nt.onload=function(){$t(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Rt(Nt){var $t=new FileReader,Vt=wt($t);return $t.readAsArrayBuffer(Nt),Vt}function Tt(Nt){if(Nt.slice)return Nt.slice(0);var $t=new Uint8Array(Nt.byteLength);return $t.set(new Uint8Array(Nt)),$t.buffer}function It(){return this.bodyUsed=!1,this._initBody=function(Nt){var $t;this.bodyUsed=this.bodyUsed,this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:ft.blob&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:ft.formData&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:ft.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():ft.arrayBuffer&&ft.blob&&($t=Nt)&&DataView.prototype.isPrototypeOf($t)?(this._bodyArrayBuffer=Tt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ft.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||gt(Nt))?this._bodyArrayBuffer=Tt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ft.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ft.blob&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var Nt=Et(this);return Nt||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(ft.blob)return this.blob().then(Rt);throw new Error("could not read as ArrayBuffer")},this.text=function(){var Nt,$t,Vt,Ut,zt,Bt=Et(this);if(Bt)return Bt;if(this._bodyBlob)return Nt=this._bodyBlob,$t=new FileReader,Vt=wt($t),Ut=/charset=([A-Za-z0-9_-]+)/.exec(Nt.type),zt=Ut?Ut[1]:"utf-8",$t.readAsText(Nt,zt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Ht){for(var Gt=new Uint8Array(Ht),Kt=new Array(Gt.length),Xt=0;Xt<Gt.length;Xt++)Kt[Xt]=String.fromCharCode(Gt[Xt]);return Kt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ft.formData&&(this.formData=function(){return this.text().then(jt)}),this.json=function(){return this.text().then(JSON.parse)},this}St.prototype.append=function(Nt,$t){Nt=xt(Nt),$t=yt($t);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+$t:$t},St.prototype.delete=function(Nt){delete this.map[xt(Nt)]},St.prototype.get=function(Nt){return Nt=xt(Nt),this.has(Nt)?this.map[Nt]:null},St.prototype.has=function(Nt){return this.map.hasOwnProperty(xt(Nt))},St.prototype.set=function(Nt,$t){this.map[xt(Nt)]=yt($t)},St.prototype.forEach=function(Nt,$t){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call($t,this.map[Vt],Vt,this)},St.prototype.keys=function(){var Nt=[];return this.forEach(function($t,Vt){Nt.push(Vt)}),vt(Nt)},St.prototype.values=function(){var Nt=[];return this.forEach(function($t){Nt.push($t)}),vt(Nt)},St.prototype.entries=function(){var Nt=[];return this.forEach(function($t,Vt){Nt.push([Vt,$t])}),vt(Nt)},ft.iterable&&(St.prototype[Symbol.iterator]=St.prototype.entries);var At=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Dt(Nt,$t){if(!(this instanceof Dt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Vt,Ut,zt=($t=$t||{}).body;if(Nt instanceof Dt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,$t.headers||(this.headers=new St(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,zt||Nt._bodyInit==null||(zt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=$t.credentials||this.credentials||"same-origin",!$t.headers&&this.headers||(this.headers=new St($t.headers)),this.method=(Vt=$t.method||this.method||"GET",Ut=Vt.toUpperCase(),At.indexOf(Ut)>-1?Ut:Vt),this.mode=$t.mode||this.mode||null,this.signal=$t.signal||this.signal||function(){if("AbortController"in pt)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&zt)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(zt),!(this.method!=="GET"&&this.method!=="HEAD"||$t.cache!=="no-store"&&$t.cache!=="no-cache")){var Bt=/([?&])_=[^&]*/;Bt.test(this.url)?this.url=this.url.replace(Bt,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function jt(Nt){var $t=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Ut=Vt.split("="),zt=Ut.shift().replace(/\+/g," "),Bt=Ut.join("=").replace(/\+/g," ");$t.append(decodeURIComponent(zt),decodeURIComponent(Bt))}}),$t}function Ft(Nt,$t){if(!(this instanceof Ft))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if($t||($t={}),this.type="default",this.status=$t.status===void 0?200:$t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=$t.statusText===void 0?"":""+$t.statusText,this.headers=new St($t.headers),this.url=$t.url||"",this._initBody(Nt)}Dt.prototype.clone=function(){return new Dt(this,{body:this._bodyInit})},It.call(Dt.prototype),It.call(Ft.prototype),Ft.prototype.clone=function(){return new Ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new St(this.headers),url:this.url})},Ft.error=function(){var Nt=new Ft(null,{status:200,statusText:""});return Nt.ok=!1,Nt.status=0,Nt.type="error",Nt};var Lt=[301,302,303,307,308];Ft.redirect=function(Nt,$t){if(Lt.indexOf($t)===-1)throw new RangeError("Invalid status code");return new Ft(null,{status:$t,headers:{location:Nt}})};var Pt=pt.DOMException;try{new Pt}catch{(Pt=function($t,Vt){this.message=$t,this.name=Vt;var Ut=Error($t);this.stack=Ut.stack}).prototype=Object.create(Error.prototype),Pt.prototype.constructor=Pt}function Ot(Nt,$t){return new Promise(function(Vt,Ut){var zt=new Dt(Nt,$t);if(zt.signal&&zt.signal.aborted)return Ut(new Pt("Aborted","AbortError"));var Bt=new XMLHttpRequest;function Ht(){Bt.abort()}if(Bt.onload=function(){var Kt,Xt,or={statusText:Bt.statusText,headers:(Kt=Bt.getAllResponseHeaders()||"",Xt=new St,Kt.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(dr){return dr.indexOf(`
`)===0?dr.substr(1,dr.length):dr}).forEach(function(dr){var fr=dr.split(":"),Sr=fr.shift().trim();if(Sr){var vr=fr.join(":").trim();try{Xt.append(Sr,vr)}catch(mr){console.warn("Response "+mr.message)}}}),Xt)};zt.url.indexOf("file://")===0&&(Bt.status<200||Bt.status>599)?or.status=200:or.status=Bt.status,or.url="responseURL"in Bt?Bt.responseURL:or.headers.get("X-Request-URL");var tr="response"in Bt?Bt.response:Bt.responseText;setTimeout(function(){Vt(new Ft(tr,or))},0)},Bt.onerror=function(){setTimeout(function(){Ut(new TypeError("Network request failed"))},0)},Bt.ontimeout=function(){setTimeout(function(){Ut(new TypeError("Network request timed out"))},0)},Bt.onabort=function(){setTimeout(function(){Ut(new Pt("Aborted","AbortError"))},0)},Bt.open(zt.method,function(Kt){try{return Kt===""&&pt.location.href?pt.location.href:Kt}catch{return Kt}}(zt.url),!0),zt.credentials==="include"?Bt.withCredentials=!0:zt.credentials==="omit"&&(Bt.withCredentials=!1),"responseType"in Bt&&(ft.blob?Bt.responseType="blob":ft.arrayBuffer&&(Bt.responseType="arraybuffer")),$t&&typeof $t.headers=="object"&&!($t.headers instanceof St||pt.Headers&&$t.headers instanceof pt.Headers)){var Gt=[];Object.getOwnPropertyNames($t.headers).forEach(function(Kt){Gt.push(xt(Kt)),Bt.setRequestHeader(Kt,yt($t.headers[Kt]))}),zt.headers.forEach(function(Kt,Xt){Gt.indexOf(Xt)===-1&&Bt.setRequestHeader(Xt,Kt)})}else zt.headers.forEach(function(Kt,Xt){Bt.setRequestHeader(Xt,Kt)});zt.signal&&(zt.signal.addEventListener("abort",Ht),Bt.onreadystatechange=function(){Bt.readyState===4&&zt.signal.removeEventListener("abort",Ht)}),Bt.send(zt._bodyInit===void 0?null:zt._bodyInit)})}Ot.polyfill=!0,pt.fetch||(pt.fetch=Ot,pt.Headers=St,pt.Request=Dt,pt.Response=Ft)},2480:()=>{},7061:(ut,dt,ht)=>{var pt=ht(8698).default;function ft(){ut.exports=ft=function(){return gt},ut.exports.__esModule=!0,ut.exports.default=ut.exports;var mt,gt={},xt=Object.prototype,yt=xt.hasOwnProperty,vt=Object.defineProperty||function(Sr,vr,mr){Sr[vr]=mr.value},St=typeof Symbol=="function"?Symbol:{},Et=St.iterator||"@@iterator",wt=St.asyncIterator||"@@asyncIterator",Rt=St.toStringTag||"@@toStringTag";function Tt(Sr,vr,mr){return Object.defineProperty(Sr,vr,{value:mr,enumerable:!0,configurable:!0,writable:!0}),Sr[vr]}try{Tt({},"")}catch{Tt=function(vr,mr,hr){return vr[mr]=hr}}function It(Sr,vr,mr,hr){var gr=vr&&vr.prototype instanceof Ot?vr:Ot,lr=Object.create(gr.prototype),Ir=new dr(hr||[]);return vt(lr,"_invoke",{value:Kt(Sr,mr,Ir)}),lr}function At(Sr,vr,mr){try{return{type:"normal",arg:Sr.call(vr,mr)}}catch(hr){return{type:"throw",arg:hr}}}gt.wrap=It;var Dt="suspendedStart",jt="suspendedYield",Ft="executing",Lt="completed",Pt={};function Ot(){}function Nt(){}function $t(){}var Vt={};Tt(Vt,Et,function(){return this});var Ut=Object.getPrototypeOf,zt=Ut&&Ut(Ut(fr([])));zt&&zt!==xt&&yt.call(zt,Et)&&(Vt=zt);var Bt=$t.prototype=Ot.prototype=Object.create(Vt);function Ht(Sr){["next","throw","return"].forEach(function(vr){Tt(Sr,vr,function(mr){return this._invoke(vr,mr)})})}function Gt(Sr,vr){function mr(gr,lr,Ir,wr){var Fr=At(Sr[gr],Sr,lr);if(Fr.type!=="throw"){var $r=Fr.arg,hn=$r.value;return hn&&pt(hn)=="object"&&yt.call(hn,"__await")?vr.resolve(hn.__await).then(function(Zr){mr("next",Zr,Ir,wr)},function(Zr){mr("throw",Zr,Ir,wr)}):vr.resolve(hn).then(function(Zr){$r.value=Zr,Ir($r)},function(Zr){return mr("throw",Zr,Ir,wr)})}wr(Fr.arg)}var hr;vt(this,"_invoke",{value:function(gr,lr){function Ir(){return new vr(function(wr,Fr){mr(gr,lr,wr,Fr)})}return hr=hr?hr.then(Ir,Ir):Ir()}})}function Kt(Sr,vr,mr){var hr=Dt;return function(gr,lr){if(hr===Ft)throw new Error("Generator is already running");if(hr===Lt){if(gr==="throw")throw lr;return{value:mt,done:!0}}for(mr.method=gr,mr.arg=lr;;){var Ir=mr.delegate;if(Ir){var wr=Xt(Ir,mr);if(wr){if(wr===Pt)continue;return wr}}if(mr.method==="next")mr.sent=mr._sent=mr.arg;else if(mr.method==="throw"){if(hr===Dt)throw hr=Lt,mr.arg;mr.dispatchException(mr.arg)}else mr.method==="return"&&mr.abrupt("return",mr.arg);hr=Ft;var Fr=At(Sr,vr,mr);if(Fr.type==="normal"){if(hr=mr.done?Lt:jt,Fr.arg===Pt)continue;return{value:Fr.arg,done:mr.done}}Fr.type==="throw"&&(hr=Lt,mr.method="throw",mr.arg=Fr.arg)}}}function Xt(Sr,vr){var mr=vr.method,hr=Sr.iterator[mr];if(hr===mt)return vr.delegate=null,mr==="throw"&&Sr.iterator.return&&(vr.method="return",vr.arg=mt,Xt(Sr,vr),vr.method==="throw")||mr!=="return"&&(vr.method="throw",vr.arg=new TypeError("The iterator does not provide a '"+mr+"' method")),Pt;var gr=At(hr,Sr.iterator,vr.arg);if(gr.type==="throw")return vr.method="throw",vr.arg=gr.arg,vr.delegate=null,Pt;var lr=gr.arg;return lr?lr.done?(vr[Sr.resultName]=lr.value,vr.next=Sr.nextLoc,vr.method!=="return"&&(vr.method="next",vr.arg=mt),vr.delegate=null,Pt):lr:(vr.method="throw",vr.arg=new TypeError("iterator result is not an object"),vr.delegate=null,Pt)}function or(Sr){var vr={tryLoc:Sr[0]};1 in Sr&&(vr.catchLoc=Sr[1]),2 in Sr&&(vr.finallyLoc=Sr[2],vr.afterLoc=Sr[3]),this.tryEntries.push(vr)}function tr(Sr){var vr=Sr.completion||{};vr.type="normal",delete vr.arg,Sr.completion=vr}function dr(Sr){this.tryEntries=[{tryLoc:"root"}],Sr.forEach(or,this),this.reset(!0)}function fr(Sr){if(Sr||Sr===""){var vr=Sr[Et];if(vr)return vr.call(Sr);if(typeof Sr.next=="function")return Sr;if(!isNaN(Sr.length)){var mr=-1,hr=function gr(){for(;++mr<Sr.length;)if(yt.call(Sr,mr))return gr.value=Sr[mr],gr.done=!1,gr;return gr.value=mt,gr.done=!0,gr};return hr.next=hr}}throw new TypeError(pt(Sr)+" is not iterable")}return Nt.prototype=$t,vt(Bt,"constructor",{value:$t,configurable:!0}),vt($t,"constructor",{value:Nt,configurable:!0}),Nt.displayName=Tt($t,Rt,"GeneratorFunction"),gt.isGeneratorFunction=function(Sr){var vr=typeof Sr=="function"&&Sr.constructor;return!!vr&&(vr===Nt||(vr.displayName||vr.name)==="GeneratorFunction")},gt.mark=function(Sr){return Object.setPrototypeOf?Object.setPrototypeOf(Sr,$t):(Sr.__proto__=$t,Tt(Sr,Rt,"GeneratorFunction")),Sr.prototype=Object.create(Bt),Sr},gt.awrap=function(Sr){return{__await:Sr}},Ht(Gt.prototype),Tt(Gt.prototype,wt,function(){return this}),gt.AsyncIterator=Gt,gt.async=function(Sr,vr,mr,hr,gr){gr===void 0&&(gr=Promise);var lr=new Gt(It(Sr,vr,mr,hr),gr);return gt.isGeneratorFunction(vr)?lr:lr.next().then(function(Ir){return Ir.done?Ir.value:lr.next()})},Ht(Bt),Tt(Bt,Rt,"Generator"),Tt(Bt,Et,function(){return this}),Tt(Bt,"toString",function(){return"[object Generator]"}),gt.keys=function(Sr){var vr=Object(Sr),mr=[];for(var hr in vr)mr.push(hr);return mr.reverse(),function gr(){for(;mr.length;){var lr=mr.pop();if(lr in vr)return gr.value=lr,gr.done=!1,gr}return gr.done=!0,gr}},gt.values=fr,dr.prototype={constructor:dr,reset:function(Sr){if(this.prev=0,this.next=0,this.sent=this._sent=mt,this.done=!1,this.delegate=null,this.method="next",this.arg=mt,this.tryEntries.forEach(tr),!Sr)for(var vr in this)vr.charAt(0)==="t"&&yt.call(this,vr)&&!isNaN(+vr.slice(1))&&(this[vr]=mt)},stop:function(){this.done=!0;var Sr=this.tryEntries[0].completion;if(Sr.type==="throw")throw Sr.arg;return this.rval},dispatchException:function(Sr){if(this.done)throw Sr;var vr=this;function mr(Fr,$r){return lr.type="throw",lr.arg=Sr,vr.next=Fr,$r&&(vr.method="next",vr.arg=mt),!!$r}for(var hr=this.tryEntries.length-1;hr>=0;--hr){var gr=this.tryEntries[hr],lr=gr.completion;if(gr.tryLoc==="root")return mr("end");if(gr.tryLoc<=this.prev){var Ir=yt.call(gr,"catchLoc"),wr=yt.call(gr,"finallyLoc");if(Ir&&wr){if(this.prev<gr.catchLoc)return mr(gr.catchLoc,!0);if(this.prev<gr.finallyLoc)return mr(gr.finallyLoc)}else if(Ir){if(this.prev<gr.catchLoc)return mr(gr.catchLoc,!0)}else{if(!wr)throw new Error("try statement without catch or finally");if(this.prev<gr.finallyLoc)return mr(gr.finallyLoc)}}}},abrupt:function(Sr,vr){for(var mr=this.tryEntries.length-1;mr>=0;--mr){var hr=this.tryEntries[mr];if(hr.tryLoc<=this.prev&&yt.call(hr,"finallyLoc")&&this.prev<hr.finallyLoc){var gr=hr;break}}gr&&(Sr==="break"||Sr==="continue")&&gr.tryLoc<=vr&&vr<=gr.finallyLoc&&(gr=null);var lr=gr?gr.completion:{};return lr.type=Sr,lr.arg=vr,gr?(this.method="next",this.next=gr.finallyLoc,Pt):this.complete(lr)},complete:function(Sr,vr){if(Sr.type==="throw")throw Sr.arg;return Sr.type==="break"||Sr.type==="continue"?this.next=Sr.arg:Sr.type==="return"?(this.rval=this.arg=Sr.arg,this.method="return",this.next="end"):Sr.type==="normal"&&vr&&(this.next=vr),Pt},finish:function(Sr){for(var vr=this.tryEntries.length-1;vr>=0;--vr){var mr=this.tryEntries[vr];if(mr.finallyLoc===Sr)return this.complete(mr.completion,mr.afterLoc),tr(mr),Pt}},catch:function(Sr){for(var vr=this.tryEntries.length-1;vr>=0;--vr){var mr=this.tryEntries[vr];if(mr.tryLoc===Sr){var hr=mr.completion;if(hr.type==="throw"){var gr=hr.arg;tr(mr)}return gr}}throw new Error("illegal catch attempt")},delegateYield:function(Sr,vr,mr){return this.delegate={iterator:fr(Sr),resultName:vr,nextLoc:mr},this.method==="next"&&(this.arg=mt),Pt}},gt}ut.exports=ft,ut.exports.__esModule=!0,ut.exports.default=ut.exports},8698:ut=>{function dt(ht){return ut.exports=dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},ut.exports.__esModule=!0,ut.exports.default=ut.exports,dt(ht)}ut.exports=dt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},4687:(ut,dt,ht)=>{var pt=ht(7061)();ut.exports=pt;try{regeneratorRuntime=pt}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=pt:Function("r","regeneratorRuntime = r")(pt)}},907:(ut,dt,ht)=>{function pt(ft,mt){(mt==null||mt>ft.length)&&(mt=ft.length);for(var gt=0,xt=new Array(mt);gt<mt;gt++)xt[gt]=ft[gt];return xt}ht.d(dt,{Z:()=>pt})},5861:(ut,dt,ht)=>{function pt(mt,gt,xt,yt,vt,St,Et){try{var wt=mt[St](Et),Rt=wt.value}catch(Tt){return void xt(Tt)}wt.done?gt(Rt):Promise.resolve(Rt).then(yt,vt)}function ft(mt){return function(){var gt=this,xt=arguments;return new Promise(function(yt,vt){var St=mt.apply(gt,xt);function Et(Rt){pt(St,yt,vt,Et,wt,"next",Rt)}function wt(Rt){pt(St,yt,vt,Et,wt,"throw",Rt)}Et(void 0)})}}ht.d(dt,{Z:()=>ft})},5671:(ut,dt,ht)=>{function pt(ft,mt){if(!(ft instanceof mt))throw new TypeError("Cannot call a class as a function")}ht.d(dt,{Z:()=>pt})},3144:(ut,dt,ht)=>{ht.d(dt,{Z:()=>mt});var pt=ht(9142);function ft(gt,xt){for(var yt=0;yt<xt.length;yt++){var vt=xt[yt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(gt,(0,pt.Z)(vt.key),vt)}}function mt(gt,xt,yt){return xt&&ft(gt.prototype,xt),yt&&ft(gt,yt),Object.defineProperty(gt,"prototype",{writable:!1}),gt}},4942:(ut,dt,ht)=>{ht.d(dt,{Z:()=>ft});var pt=ht(9142);function ft(mt,gt,xt){return(gt=(0,pt.Z)(gt))in mt?Object.defineProperty(mt,gt,{value:xt,enumerable:!0,configurable:!0,writable:!0}):mt[gt]=xt,mt}},885:(ut,dt,ht)=>{ht.d(dt,{Z:()=>ft});var pt=ht(181);function ft(mt,gt){return function(xt){if(Array.isArray(xt))return xt}(mt)||function(xt,yt){var vt=xt==null?null:typeof Symbol<"u"&&xt[Symbol.iterator]||xt["@@iterator"];if(vt!=null){var St,Et,wt,Rt,Tt=[],It=!0,At=!1;try{if(wt=(vt=vt.call(xt)).next,yt===0){if(Object(vt)!==vt)return;It=!1}else for(;!(It=(St=wt.call(vt)).done)&&(Tt.push(St.value),Tt.length!==yt);It=!0);}catch(Dt){At=!0,Et=Dt}finally{try{if(!It&&vt.return!=null&&(Rt=vt.return(),Object(Rt)!==Rt))return}finally{if(At)throw Et}}return Tt}}(mt,gt)||(0,pt.Z)(mt,gt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},2982:(ut,dt,ht)=>{ht.d(dt,{Z:()=>mt});var pt=ht(907),ft=ht(181);function mt(gt){return function(xt){if(Array.isArray(xt))return(0,pt.Z)(xt)}(gt)||function(xt){if(typeof Symbol<"u"&&xt[Symbol.iterator]!=null||xt["@@iterator"]!=null)return Array.from(xt)}(gt)||(0,ft.Z)(gt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},9142:(ut,dt,ht)=>{ht.d(dt,{Z:()=>ft});var pt=ht(1002);function ft(mt){var gt=function(xt,yt){if((0,pt.Z)(xt)!="object"||!xt)return xt;var vt=xt[Symbol.toPrimitive];if(vt!==void 0){var St=vt.call(xt,yt||"default");if((0,pt.Z)(St)!="object")return St;throw new TypeError("@@toPrimitive must return a primitive value.")}return(yt==="string"?String:Number)(xt)}(mt,"string");return(0,pt.Z)(gt)=="symbol"?gt:String(gt)}},1002:(ut,dt,ht)=>{function pt(ft){return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},pt(ft)}ht.d(dt,{Z:()=>pt})},181:(ut,dt,ht)=>{ht.d(dt,{Z:()=>ft});var pt=ht(907);function ft(mt,gt){if(mt){if(typeof mt=="string")return(0,pt.Z)(mt,gt);var xt=Object.prototype.toString.call(mt).slice(8,-1);return xt==="Object"&&mt.constructor&&(xt=mt.constructor.name),xt==="Map"||xt==="Set"?Array.from(mt):xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt)?(0,pt.Z)(mt,gt):void 0}}},7002:ut=>{ut.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9794:ut=>{ut.exports={version:"1.0.34"}}},lt={};function ct(ut){var dt=lt[ut];if(dt!==void 0)return dt.exports;var ht=lt[ut]={exports:{}};return st[ut].call(ht.exports,ht,ht.exports,ct),ht.exports}return ct.amdO={},ct.n=ut=>{var dt=ut&&ut.__esModule?()=>ut.default:()=>ut;return ct.d(dt,{a:dt}),dt},ct.d=(ut,dt)=>{for(var ht in dt)ct.o(dt,ht)&&!ct.o(ut,ht)&&Object.defineProperty(ut,ht,{enumerable:!0,get:dt[ht]})},ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ct.o=(ut,dt)=>Object.prototype.hasOwnProperty.call(ut,dt),ct.r=ut=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ut,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ut,"__esModule",{value:!0})},ct(8225)})())})(videosdk);var videosdkExports=videosdk.exports,eventPrifix="videosdk-live-react-sdk",events={"participant-joined":eventPrifix+"-participant-joined","participant-left":eventPrifix+"-participant-left","speaker-changed":eventPrifix+"-speaker-changed","presenter-changed":eventPrifix+"-presenter-changed","main-participant-changed":eventPrifix+"-main-participant-changed","entry-requested":eventPrifix+"-entry-requested","entry-responded":eventPrifix+"-entry-responded","recording-started":eventPrifix+"-recording-started","recording-stopped":eventPrifix+"-recording-stopped","chat-message":eventPrifix+"-chat-message","meeting-joined":eventPrifix+"-meeting-joined","meeting-left":eventPrifix+"-meeting-left","live-stream-started":eventPrifix+"-live-stream-started","live-stream-stopped":eventPrifix+"-live-stream-stopped","video-state-changed":eventPrifix+"-video-state-changed","video-seeked":eventPrifix+"-video-seeked","webcam-requested":eventPrifix+"-webcam-requested","mic-requested":eventPrifix+"-mic-requested","pin-state-changed":eventPrifix+"-pin-state-changed","connection-open":eventPrifix+"-connection-open","connection-close":eventPrifix+"-connection-close","switch-meeting":eventPrifix+"-switch-meeting",error:eventPrifix+"-error","hls-started":eventPrifix+"-hls-started","hls-stopped":eventPrifix+"-hls-stopped","hls-state-changed":eventPrifix+"-hls-state-changed","hls-playable-state-changed":eventPrifix+"-hls-playable-state-changed","recording-state-changed":eventPrifix+"-recording-state-changed","livestream-state-changed":eventPrifix+"-livestream-state-changed","meeting-state-changed":eventPrifix+"-meeting-state-changed","participant-mode-changed":eventPrifix+"-participant-mode-changed"},eventEmitter=new EventEmitter$1;eventEmitter.setMaxListeners(9999);var MeetingProviderContex=reactExports.createContext(),useMeeting=function(rt){var it=rt===void 0?{}:rt,st=it.onParticipantJoined,lt=st===void 0?function(){}:st,ct=it.onParticipantLeft,ut=ct===void 0?function(){}:ct,dt=it.onSpeakerChanged,ht=dt===void 0?function(){}:dt,pt=it.onPresenterChanged,ft=pt===void 0?function(){}:pt,mt=it.onMainParticipantChanged,gt=mt===void 0?function(){}:mt,xt=it.onEntryRequested,yt=xt===void 0?function(){}:xt,vt=it.onEntryResponded,St=vt===void 0?function(){}:vt,Et=it.onRecordingStarted,wt=Et===void 0?function(){}:Et,Rt=it.onRecordingStopped,Tt=Rt===void 0?function(){}:Rt,It=it.onChatMessage,At=It===void 0?function(){}:It,Dt=it.onMeetingJoined,jt=Dt===void 0?function(){}:Dt,Ft=it.onMeetingLeft,Lt=Ft===void 0?function(){}:Ft,Pt=it.onLiveStreamStarted,Ot=Pt===void 0?function(){}:Pt,Nt=it.onLiveStreamStopped,$t=Nt===void 0?function(){}:Nt,Vt=it.onVideoStateChanged,Ut=Vt===void 0?function(){}:Vt,zt=it.onVideoSeeked,Bt=zt===void 0?function(){}:zt,Ht=it.onWebcamRequested,Gt=Ht===void 0?function(){}:Ht,Kt=it.onMicRequested,Xt=Kt===void 0?function(){}:Kt,or=it.onPinStateChanged,tr=or===void 0?function(){}:or,dr=it.onConnectionOpen,fr=dr===void 0?function(){}:dr,Sr=it.onConnetionClose,vr=Sr===void 0?function(){}:Sr,mr=it.onSwitchMeeting,hr=mr===void 0?function(){}:mr,gr=it.onError,lr=gr===void 0?function(){}:gr,Ir=it.onHlsStarted,wr=Ir===void 0?function(){}:Ir,Fr=it.onHlsStopped,$r=Fr===void 0?function(){}:Fr,hn=it.onHlsStateChanged,Zr=hn===void 0?function(){}:hn,Qt=it.onRecordingStateChanged,Jt=Qt===void 0?function(){}:Qt,pr=it.onLivestreamStateChanged,Vr=pr===void 0?function(){}:pr,Wr=it.onMeetingStateChanged,zr=Wr===void 0?function(){}:Wr,ln=it.onParticipantModeChanged,xn=ln===void 0?function(){}:ln;return reactExports.useEffect(function(){return eventEmitter.on(events["participant-joined"],lt),eventEmitter.on(events["participant-left"],ut),eventEmitter.on(events["speaker-changed"],ht),eventEmitter.on(events["presenter-changed"],ft),eventEmitter.on(events["main-participant-changed"],gt),eventEmitter.on(events["entry-requested"],yt),eventEmitter.on(events["entry-responded"],St),eventEmitter.on(events["recording-started"],wt),eventEmitter.on(events["recording-stopped"],Tt),eventEmitter.on(events["chat-message"],At),eventEmitter.on(events["meeting-joined"],jt),eventEmitter.on(events["meeting-left"],Lt),eventEmitter.on(events["live-stream-started"],Ot),eventEmitter.on(events["live-stream-stopped"],$t),eventEmitter.on(events["video-state-changed"],Ut),eventEmitter.on(events["video-seeked"],Bt),eventEmitter.on(events["webcam-requested"],Gt),eventEmitter.on(events["mic-requested"],Xt),eventEmitter.on(events["pin-state-changed"],tr),eventEmitter.on(events["connection-open"],fr),eventEmitter.on(events["connection-close"],vr),eventEmitter.on(events["switch-meeting"],hr),eventEmitter.on(events.error,lr),eventEmitter.on(events["hls-started"],wr),eventEmitter.on(events["hls-stopped"],$r),eventEmitter.on(events["hls-state-changed"],Zr),eventEmitter.on(events["recording-state-changed"],Jt),eventEmitter.on(events["livestream-state-changed"],Vr),eventEmitter.on(events["meeting-state-changed"],zr),eventEmitter.on(events["participant-mode-changed"],xn),function(){eventEmitter.off(events["meeting-state-changed"],zr),eventEmitter.off(events["participant-joined"],lt),eventEmitter.off(events["participant-left"],ut),eventEmitter.off(events["speaker-changed"],ht),eventEmitter.off(events["presenter-changed"],ft),eventEmitter.off(events["main-participant-changed"],gt),eventEmitter.off(events["entry-requested"],yt),eventEmitter.off(events["entry-responded"],St),eventEmitter.off(events["recording-started"],wt),eventEmitter.off(events["recording-stopped"],Tt),eventEmitter.off(events["chat-message"],At),eventEmitter.off(events["meeting-joined"],jt),eventEmitter.off(events["meeting-left"],Lt),eventEmitter.off(events["live-stream-started"],Ot),eventEmitter.off(events["live-stream-stopped"],$t),eventEmitter.off(events["video-state-changed"],Ut),eventEmitter.off(events["video-seeked"],Bt),eventEmitter.off(events["webcam-requested"],Gt),eventEmitter.off(events["mic-requested"],Xt),eventEmitter.off(events["pin-state-changed"],tr),eventEmitter.off(events["connection-open"],fr),eventEmitter.off(events["connection-close"],vr),eventEmitter.off(events["switch-meeting"],hr),eventEmitter.off(events.error,lr),eventEmitter.off(events["hls-started"],wr),eventEmitter.off(events["hls-stopped"],$r),eventEmitter.off(events["hls-state-changed"],Zr),eventEmitter.off(events["recording-state-changed"],Jt),eventEmitter.off(events["livestream-state-changed"],Vr),eventEmitter.off(events["participant-mode-changed"],xn)}},[]),reactExports.useContext(MeetingProviderContex)},version="0.1.83",MeetingProvider=function(rt){var it=rt.children,st=rt.config,lt=rt.token,ct=rt.joinWithoutUserInteraction,ut=rt.reinitialiseMeetingOnConfigChange,dt=rt.deviceInfo,ht=reactExports.useState(null),pt=ht[0],ft=ht[1],mt=reactExports.useState(null),gt=mt[0],xt=mt[1],yt=reactExports.useState(null),vt=yt[0],St=yt[1],Et=reactExports.useState(null),wt=Et[0],Rt=Et[1],Tt=reactExports.useState(null),It=Tt[0],At=Tt[1],Dt=reactExports.useState(!1),jt=Dt[0],Ft=Dt[1],Lt=reactExports.useState(!1),Pt=Lt[0],Ot=Lt[1],Nt=reactExports.useState(!1),$t=Nt[0],Vt=Nt[1],Ut=reactExports.useState(!1),zt=Ut[0],Bt=Ut[1],Ht=reactExports.useState([]),Gt=Ht[0],Kt=Ht[1],Xt=reactExports.useState(new Map),or=Xt[0],tr=Xt[1],dr=reactExports.useState(new Map),fr=dr[0],Sr=dr[1],vr=reactExports.useState(!1),mr=vr[0],hr=vr[1],gr=reactExports.useState(new Map),lr=gr[0],Ir=gr[1],wr=reactExports.useState(!1),Fr=wr[0],$r=wr[1],hn=reactExports.useState(!1),Zr=hn[0],Qt=hn[1],Jt=reactExports.useState("RECORDING_STOPPED"),pr=Jt[0],Vr=Jt[1],Wr=reactExports.useState("LIVESTREAM_STOPPED"),zr=Wr[0],ln=Wr[1],xn=reactExports.useState("HLS_STOPPED"),yn=xn[0],Wn=xn[1],Mn=reactExports.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),sn=Mn[0],qn=Mn[1],Gr=reactExports.useRef(),qr=reactExports.useRef(),wn=reactExports.useRef(),Cr=reactExports.useRef(),nr=reactExports.useRef(),Ur=reactExports.useRef(st),Mr=reactExports.useRef(lt),rn=reactExports.useRef(!1),Cn=reactExports.useRef(),Rr=reactExports.useMemo(function(){return ut},[]);reactExports.useEffect(function(){Gr.current=pt},[pt]),reactExports.useEffect(function(){qr.current=jt},[jt]),reactExports.useEffect(function(){wn.current=Pt},[Pt]),reactExports.useEffect(function(){Cr.current=$t},[$t]),reactExports.useEffect(function(){nr.current=zt},[zt]),reactExports.useEffect(function(){Ur.current=st},[st]),reactExports.useEffect(function(){Mr.current=lt},[lt]),reactExports.useEffect(function(){Cn.current=Zr},[Zr]);var pn=function(){ft(null),xt(null),St(null),Rt(null),At(null),Ft(!1),Ot(!1),Vt(!1),Bt(!1),Kt([]),hr(!1),tr(new Map),Sr(new Map),Ir(new Map),$r(!1),Qt(!1),Vr("RECORDING_STOPPED"),ln("LIVESTREAM_STOPPED"),Wn("HLS_STOPPED"),qn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Tr=function(Dr){tr(function(Jn){Jn.set(Dr.id,Dr);var Qs=new Map(Jn);return Qs}),eventEmitter.emit(events["participant-joined"],Dr)},xr=function(Dr){tr(function(Jn){Jn.delete(Dr.id);var Qs=new Map(Jn);return Qs}),eventEmitter.emit(events["participant-left"],Dr)},jr=function(Dr){var Jn,Qs;At(Dr),Vt(Dr===(Gr==null||(Jn=Gr.current)===null||Jn===void 0||(Qs=Jn.localParticipant)===null||Qs===void 0?void 0:Qs.id)),eventEmitter.emit(events["presenter-changed"],Dr)},en=function(Dr){St(Dr),eventEmitter.emit(events["main-participant-changed"],Dr)},fn=function(Dr){Rt(Dr),eventEmitter.emit(events["speaker-changed"],Dr)},Vn=function(Dr){Kt(function(Jn){return[].concat(Jn,[Dr])}),eventEmitter.emit(events["chat-message"],Dr)},Yn=function(Dr){eventEmitter.emit(events["entry-requested"],Dr)},Hn=function(Dr,Jn){eventEmitter.emit(events["entry-responded"],Dr,Jn)},Bn=function(){Bt(!0),eventEmitter.emit(events["recording-started"])},es=function(){Bt(!1),eventEmitter.emit(events["recording-stopped"])},$s=function(Dr){Dr.track.readyState==="live"&&(Dr.kind==="video"?Ot(!0):Dr.kind==="audio"&&Ft(!0))},Ss=function(Dr){Dr.kind==="video"?Ot(!1):Dr.kind==="audio"&&Ft(!1)},zs=function(Dr){hr(!0),eventEmitter.emit(events["live-stream-started"],Dr)},ro=function(){hr(!1),eventEmitter.emit(events["live-stream-stopped"])},Po=function(Dr){Qt(!0),eventEmitter.emit(events["hls-started"],Dr)},To=function(){Qt(!1),eventEmitter.emit(events["hls-stopped"])},qo=function(Dr){eventEmitter.emit(events["video-state-changed"],Dr)},$a=function(Dr){eventEmitter.emit(events["video-seeked"],Dr)},Ll=function(Dr){eventEmitter.emit(events["webcam-requested"],Dr)},Rl=function(Dr){eventEmitter.emit(events["mic-requested"],Dr)},Ar=function(Dr){rn.current=!0,Kt(function(Jn){return[].concat(Jn,Dr.messages)}),eventEmitter.emit(events["meeting-joined"],Dr),$r(!0)},_n=function ws(){eventEmitter.emit(events["meeting-left"]);var Dr=Gr.current;if(Dr){var Jn;typeof(Dr==null?void 0:Dr.off)=="function"&&(Dr.off("meeting-state-changed",Hs),Dr.off("participant-joined",Tr),Dr.off("participant-left",xr),Dr.off("presenter-changed",jr),Dr.off("main-participant-changed",en),Dr.off("speaker-changed",fn),Dr.off("entry-requested",Yn),Dr.off("entry-responded",Hn),Dr.off("chat-message",Vn),Dr.off("recording-started",Bn),Dr.off("recording-stopped",es),Dr.off("meeting-joined",Ar),Dr.off("meeting-left",ws),Dr.off("livestream-started",zs),Dr.off("livestream-stopped",ro),Dr.off("video-state-changed",qo),Dr.off("video-seeked",$a),Dr.off("webcam-requested",Ll),Dr.off("mic-requested",Rl),Dr.off("pin-state-changed",Pn),Dr.off("connection-open",Tn),Dr.off("connection-close",Or),Dr.off("switch-meeting",ds),Dr.off("error",_i),Dr.off("hls-started",Po),Dr.off("hls-stopped",To),Dr.off("recording-state-changed",hs),Dr.off("livestream-state-changed",Ms),Dr.off("hls-state-changed",Us),Dr.off("participant-mode-changed",tn)),typeof(Dr==null||(Jn=Dr.localParticipant)===null||Jn===void 0?void 0:Jn.off)=="function"&&(Dr.localParticipant.off("stream-enabled",$s),Dr.localParticipant.off("stream-disabled",Ss)),pn()}},Pn=function(Dr){var Jn=Dr.participantId,Qs=Dr.state,Ml=Dr.pinnedBy;Sr(function(Mo){!Qs.cam&&!Qs.share?Mo.delete(Jn):Mo.set(Jn,Qs);var Lu=new Map(Mo);return Lu}),eventEmitter.emit(events["pin-state-changed"],{participantId:Jn,state:Qs,pinnedBy:Ml})},Tn=function(Dr){Ir(function(Jn){Jn.set(Dr.id,Dr);var Qs=new Map(Jn);return Qs}),eventEmitter.emit(events["connection-open"],Dr)},Or=function(Dr){Ir(function(Jn){Jn.delete(Dr);var Qs=new Map(Jn);return Qs}),eventEmitter.emit(events["connection-close"],Dr)},ds=function(Dr){eventEmitter.emit(events["switch-meeting"],Dr)},_i=function(Dr){eventEmitter.emit(events.error,Dr)},hs=function(Dr){Vr(Dr==null?void 0:Dr.status),eventEmitter.emit(events["recording-state-changed"],Dr)},Ms=function(Dr){ln(Dr==null?void 0:Dr.status),eventEmitter.emit(events["livestream-state-changed"],Dr)},Us=function(Dr){Wn(Dr==null?void 0:Dr.status),(Dr==null?void 0:Dr.status)=="HLS_PLAYABLE"?qn({downstreamUrl:Dr==null?void 0:Dr.downstreamUrl,playbackHlsUrl:Dr==null?void 0:Dr.playbackHlsUrl,livestreamUrl:Dr==null?void 0:Dr.livestreamUrl}):(Dr==null?void 0:Dr.status)=="HLS_STOPPED"&&qn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),eventEmitter.emit(events["hls-state-changed"],Dr)},Hs=function(Dr){eventEmitter.emit(events["meeting-state-changed"],Dr)},tn=function(Dr){var Jn,Qs;tr(function(Ml){var Mo=Ml.get(Dr.participantId);Mo.mode=Dr.mode,Ml.set(Mo.id,Mo);var Lu=new Map(Ml);return Lu}),Dr.participantId===(Gr==null||(Jn=Gr.current)===null||Jn===void 0||(Qs=Jn.localParticipant)===null||Qs===void 0?void 0:Qs.id)&&xt(function(Ml){return Ml.mode=Dr.mode,Ml}),eventEmitter.emit(events["participant-mode-changed"],Dr)},Ao=function(){var Dr=videosdkExports.VideoSDK&&videosdkExports.VideoSDK.initMeeting(Ur.current);ft(Dr);var Jn=Dr.localParticipant,Qs=Dr.participants;Qs.set(Jn.id,Jn),tr(Qs),xt(Jn),Dr.on("meeting-state-changed",Hs),Dr.on("participant-joined",Tr),Dr.on("participant-left",xr),Dr.on("presenter-changed",jr),Dr.on("main-participant-changed",en),Dr.on("speaker-changed",fn),Dr.on("entry-requested",Yn),Dr.on("entry-responded",Hn),Dr.on("chat-message",Vn),Dr.on("recording-started",Bn),Dr.on("recording-stopped",es),Dr.on("meeting-joined",Ar),Dr.on("meeting-left",_n),Dr.on("livestream-started",zs),Dr.on("livestream-stopped",ro),Dr.on("video-state-changed",qo),Dr.on("video-seeked",$a),Dr.on("webcam-requested",Ll),Dr.on("mic-requested",Rl),Dr.on("pin-state-changed",Pn),Dr.on("connection-open",Tn),Dr.on("connection-close",Or),Dr.on("switch-meeting",ds),Dr.on("error",_i),Dr.on("hls-started",Po),Dr.on("hls-stopped",To),Dr.on("recording-state-changed",hs),Dr.on("livestream-state-changed",Ms),Dr.on("hls-state-changed",Us),Dr.on("participant-mode-changed",tn),Dr.localParticipant.on("stream-enabled",$s),Dr.localParticipant.on("stream-disabled",Ss),Dr.join()},mn=function(){var Dr=Gr.current;Dr&&Dr.leave()},Rn=function(){var Dr=Gr.current;Dr&&Dr.end()},Un=function(Dr,Jn,Qs){var Ml=Gr.current;Ml&&Ml.startRecording(Dr,Jn,Qs)},Dn=function(){var Dr=Gr.current;if(Dr){var Jn=nr.current;Jn&&Dr.stopRecording()}},$n=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=Gr.current;Jn&&Jn.unmuteMic(Dr)},Os=function(){var Dr=Gr.current;Dr&&Dr.muteMic()},cs=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=qr.current;Jn?Os():$n(Dr)},ks=function(){var Dr=Gr.current;Dr&&Dr.disableWebcam()},Ps=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=Gr.current;Jn&&Jn.enableWebcam(Dr)},oo=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=wn.current;Jn?ks():Ps(Dr)},As=function(){var Dr=Gr.current;Dr&&Dr.disableScreenShare()},Ns=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=Gr.current;Jn&&Jn.enableScreenShare(Dr)},Uo=function(Dr){Dr===void 0&&(Dr=void 0);var Jn=Cr.current;Jn?As():Ns(Dr)},Vo=function(Dr){var Jn=Gr.current;Jn&&Jn.changeMode(Dr)},yo=function(Dr){var Jn=Gr.current;Jn&&Jn.sendChatMessage(Dr)},Ko=function(Dr,Jn){var Qs=Gr.current;Qs&&Qs.respondEntry(Dr,Jn)},ko=function(){try{var Dr=Gr.current;return Promise.resolve(function(){if(Dr)return Promise.resolve(Dr.getMics())}())}catch(Jn){return Promise.reject(Jn)}},Tl=function(){try{var Dr=Gr.current;return Promise.resolve(function(){if(Dr)return Promise.resolve(Dr.getWebcams())}())}catch(Jn){return Promise.reject(Jn)}},Bl=function(Dr){var Jn=Gr.current;Jn&&Jn.changeWebcam(Dr)},Dl=function(Dr){var Jn=Gr.current;Jn&&Jn.replaceWebcamStream(Dr)},Cl=function(Dr){var Jn=Gr.current;Jn&&Jn.changeMic(Dr)},Ol=function(Dr){var Jn=Dr.link,Qs=Gr.current;Qs&&Qs.startVideo({link:Jn})},Ul=function(){var Dr=Gr.current;Dr&&Dr.stopVideo()},Iu=function(){var Dr=Gr.current;Dr&&Dr.resumeVideo()},hp=function(Dr){var Jn=Dr.currentTime,Qs=Gr.current;Qs&&Qs.pauseVideo({currentTime:Jn})},wp=function(Dr){var Jn=Dr.currentTime,Qs=Gr.current;Qs&&Qs.seekVideo({currentTime:Jn})},qu=function(Dr,Jn){var Qs=Gr.current;Qs&&Qs.startLivestream(Dr,Jn)},Ku=function(){var Dr=Gr.current;Dr&&Dr.stopLivestream()},Xu=function(Dr){var Jn=Dr.meetingId,Qs=Dr.payload;try{var Ml=Gr.current,Mo=function(){if(Ml)return Promise.resolve(Ml.connectTo({meetingId:Jn,payload:Qs})).then(function(){})}();return Promise.resolve(Mo&&Mo.then?Mo.then(function(){}):void 0)}catch(Lu){return Promise.reject(Lu)}},pp=function(Dr){var Jn=Gr.current;Jn&&Jn.startHls(Dr)},Rp=function(){var Dr=Gr.current;Dr&&Dr.stopHls()},xo=function(){videosdkExports.VideoSDK.config(Mr.current),dt?videosdkExports.VideoSDK.analytics(dt):videosdkExports.VideoSDK.analytics({sdkType:"react-web",sdkVersion:version}),ct&&Ao()};return reactExports.useEffect(function(){xo()},[]),reactExports.useEffect(function(){Rr&&rn.current&&(mn(),xo(),!ct&&Ao())},[st.meetingId,lt,Rr]),e$2.createElement(MeetingProviderContex.Provider,{value:{meetingId:pt==null?void 0:pt.id,meeting:pt,baseUrl:pt==null?void 0:pt.baseUrl,localParticipant:gt,mainParticipant:vt,activeSpeakerId:wt,participants:or,presenterId:It,localMicOn:jt,localWebcamOn:Pt,localScreenShareOn:$t,messages:Gt,isRecording:zt,isLiveStreaming:mr,pinnedParticipants:fr,connections:lr,isHls:Zr,recordingState:pr,livestreamState:zr,hlsState:yn,hlsUrls:sn,isMeetingJoined:Fr,join:Ao,leave:mn,end:Rn,startRecording:Un,stopRecording:Dn,sendChatMessage:yo,respondEntry:Ko,muteMic:Os,unmuteMic:$n,toggleMic:cs,disableWebcam:ks,enableWebcam:Ps,toggleWebcam:oo,disableScreenShare:As,enableScreenShare:Ns,toggleScreenShare:Uo,getMics:ko,getWebcams:Tl,changeWebcam:Bl,replaceWebcamStream:Dl,changeMic:Cl,changeMode:Vo,startVideo:Ol,stopVideo:Ul,resumeVideo:Iu,pauseVideo:hp,seekVideo:wp,startLivestream:qu,stopLivestream:Ku,connectTo:Xu,startHls:pp,stopHls:Rp}},it)},useParticipant=function(rt,it){var st=it===void 0?{}:it,lt=st.onStreamEnabled,ct=lt===void 0?function(){}:lt,ut=st.onStreamDisabled,dt=ut===void 0?function(){}:ut,ht=st.onMediaStatusChanged,pt=ht===void 0?function(){}:ht,ft=st.onVideoQualityChanged,mt=ft===void 0?function(){}:ft,gt=reactExports.useState(null),xt=gt[0],yt=gt[1],vt=reactExports.useState(null),St=vt[0],Et=vt[1],wt=reactExports.useState(null),Rt=wt[0],Tt=wt[1],It=reactExports.useState(null),At=It[0],Dt=It[1],jt=useMeeting(),Ft=reactExports.useMemo(function(){var sn,qn=jt==null?void 0:jt.participants,Gr=jt==null?void 0:jt.localParticipant,qr=jt==null?void 0:jt.activeSpeakerId,wn=jt==null?void 0:jt.mainParticipant,Cr=(jt==null||(sn=jt.pinnedParticipants)===null||sn===void 0?void 0:sn.get(rt))||{cam:!1,share:!1};return{participants:qn,localParticipant:Gr,activeSpeakerId:qr,mainParticipant:wn,pinState:Cr}},[jt]),Lt=Ft.participants,Pt=Ft.localParticipant,Ot=Ft.activeSpeakerId,Nt=Ft.mainParticipant,$t=Ft.pinState,Vt=Lt==null?void 0:Lt.get(rt),Ut=reactExports.useState(Vt==null?void 0:Vt.webcamOn),zt=Ut[0],Bt=Ut[1],Ht=reactExports.useState(Vt==null?void 0:Vt.micOn),Gt=Ht[0],Kt=Ht[1],Xt=reactExports.useState(Vt==null?void 0:Vt.mode),or=Xt[0],tr=Xt[1],dr=function(qn){if(qn.track.readyState==="live")switch(qn.kind){case"video":xt!=null&&yt(null),yt(qn);break;case"audio":St!=null&&Et(null),Et(qn);break;case"share":Rt!=null&&Tt(null),Tt(qn);break;case"shareAudio":At!=null&&Dt(null),Dt(qn);break}},fr=function(qn){switch(qn.kind){case"video":yt(null);break;case"audio":Et(null);break;case"share":Tt(null);break;case"shareAudio":Dt(null);break}},Sr=function(qn){dr(qn),ct(qn)},vr=function(qn){rt===qn.participantId&&tr(qn.mode)},mr=function(qn){fr(qn),dt(qn)},hr=function(qn){var Gr=qn.peerId,qr=qn.prevQuality,wn=qn.currentQuality;mt({peerId:Gr,prevQuality:qr,currentQuality:wn})},gr=function(qn){var Gr=qn.kind,qr=qn.peerId,wn=qn.newStatus;Gr=="audio"?Kt(wn):Gr=="video"&&Bt(wn),pt({kind:Gr,peerId:qr,newStatus:wn})},lr=function(qn){Vt==null||Vt.setQuality(qn)},Ir=function(qn,Gr){Vt==null||Vt.setViewPort(qn,Gr)},wr=function(){Vt==null||Vt.enableMic()},Fr=function(){Vt==null||Vt.disableMic()},$r=function(){Vt==null||Vt.enableWebcam()},hn=function(){Vt==null||Vt.disableWebcam()},Zr=function(qn){Vt==null||Vt.pin(qn)},Qt=function(qn){Vt==null||Vt.unpin(qn)},Jt=function(){Vt==null||Vt.remove()},pr=function(qn){var Gr=qn===void 0?{}:qn,qr=Gr.height,wn=Gr.width;return Promise.resolve(Vt==null?void 0:Vt.captureImage({height:qr,width:wn}))},Vr=function(){return Promise.resolve(Vt==null?void 0:Vt.getAudioStats())},Wr=function(){return Promise.resolve(Vt==null?void 0:Vt.getVideoStats())},zr=function(){return Promise.resolve(Vt==null?void 0:Vt.getShareStats())},ln=function(){Vt==null||Vt.consumeWebcamStreams()},xn=function(){Vt==null||Vt.consumeMicStreams()},yn=function(){Vt==null||Vt.stopConsumingWebcamStreams()},Wn=function(){Vt==null||Vt.stopConsumingMicStreams()},Mn=function(qn){return Promise.resolve(Vt==null?void 0:Vt.switchTo(qn)).then(function(){})};return reactExports.useEffect(function(){var sn=Vt==null?void 0:Vt.streams;return sn&&sn.forEach(function(qn){dr(qn)}),Vt!=null&&Vt.micOn&&Kt(Gt),Vt!=null&&Vt.webcamOn&&Bt(zt),Vt==null||Vt.on("stream-enabled",Sr),Vt==null||Vt.on("stream-disabled",mr),Vt==null||Vt.on("media-status-changed",gr),Vt==null||Vt.on("video-quality-changed",hr),eventEmitter.on(events["participant-mode-changed"],vr),function(){Vt==null||Vt.off("stream-enabled",Sr),Vt==null||Vt.off("stream-disabled",mr),Vt==null||Vt.off("media-status-changed",gr),Vt==null||Vt.off("video-quality-changed",hr),eventEmitter.off(events["participant-mode-changed"],vr)}},[Vt]),{displayName:Vt==null?void 0:Vt.displayName,participant:Vt,webcamStream:xt,micStream:St,screenShareStream:Rt,screenShareAudioStream:At,webcamOn:zt||!!xt,micOn:Gt||!!St,mode:or,metaData:Vt==null?void 0:Vt.metaData,screenShareOn:!!Rt,isLocal:(Pt==null?void 0:Pt.id)===rt,isActiveSpeaker:Ot===rt,isMainParticipant:(Nt==null?void 0:Nt.id)===rt,pinState:$t,consumeMicStreams:xn,consumeWebcamStreams:ln,stopConsumingMicStreams:Wn,stopConsumingWebcamStreams:yn,setQuality:lr,setViewPort:Ir,enableMic:wr,disableMic:Fr,enableWebcam:$r,disableWebcam:hn,captureImage:pr,pin:Zr,unpin:Qt,remove:Jt,switchTo:Mn,getAudioStats:Vr,getVideoStats:Wr,getShareStats:zr}},usePubSub=function(rt,it){var st=it===void 0?{}:it,lt=st.onMessageReceived,ct=lt===void 0?function(){}:lt,ut=st.onOldMessagesReceived,dt=ut===void 0?function(){}:ut,ht=useMeeting(),pt=ht.meeting,ft=ht.isMeetingJoined,mt=reactExports.useState([]),gt=mt[0],xt=mt[1],yt=reactExports.useRef(!1),vt=function(Rt,Tt,It){pt&&pt.pubSub.publish(rt,Rt,Tt,It)},St=function(Rt){xt(function(Tt){return[].concat(Tt,[Rt])}),ct(Rt)},Et=function(Rt){try{var Tt;return Promise.resolve(Rt==null||(Tt=Rt.pubSub)===null||Tt===void 0?void 0:Tt.subscribe(rt,St)).then(function(It){It&&(dt(It.messages),xt(It.messages))})}catch(It){return Promise.reject(It)}};return reactExports.useEffect(function(){if(pt&&!yt.current&&ft)return yt.current=!0,Et(pt),function(){var wt;pt==null||(wt=pt.pubSub)===null||wt===void 0||wt.unsubscribe(rt,St)}},[pt,ft]),{publish:vt,messages:gt}},Constants=videosdkExports.VideoSDK.Constants,createCameraVideoTrack=function(rt){var it=rt.cameraId,st=it===void 0?void 0:it,lt=rt.encoderConfig,ct=lt===void 0?void 0:lt,ut=rt.facingMode,dt=ut===void 0?void 0:ut,ht=rt.optimizationMode,pt=ht===void 0?void 0:ht,ft=rt.multiStream,mt=ft===void 0?!0:ft;try{return Promise.resolve(videosdkExports.VideoSDK.createCameraVideoTrack({cameraId:st,encoderConfig:ct,facingMode:dt,optimizationMode:pt,multiStream:mt}))}catch(gt){return Promise.reject(gt)}};function LeaveScreen({setIsMeetingLeft:nt}){const rt=useNavigate();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 h-screen bg-gray-200",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl text-gray-700",children:"감사합니다"}),jsxRuntimeExports.jsx("div",{className:"mt-12 mb-8",children:jsxRuntimeExports.jsx("button",{className:"`w-full bg-teal-700 text-white px-16 py-3 rounded-lg text-sm",onClick:()=>{nt(!1)},children:"다시 참여 하시겠습니까?"})}),jsxRuntimeExports.jsx("button",{className:"`w-full bg-teal-600 text-white px-16 py-3 rounded-lg text-sm",onClick:()=>{rt("/")},children:"홈으로"})]})}function MeetingDetailsScreen({onClickJoin:nt,_handleOnCreateMeeting:rt,participantName:it,setParticipantName:st,videoTrack:lt,setVideoTrack:ct,onClickStartMeeting:ut,setMeetingMode:dt}){const[ht,pt]=reactExports.useState(""),[ft,mt]=reactExports.useState(!1),[gt,xt]=reactExports.useState(!1),[yt,vt]=reactExports.useState(!1),[St,Et]=reactExports.useState(!1),wt=Recoil_index_20(userState);return jsxRuntimeExports.jsxs("div",{className:"flex flex-1 flex-col justify-center w-full md:p-[6px] sm:p-1 p-1.5",children:[yt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 border border-gray-400 border-solid rounded-md",children:[jsxRuntimeExports.jsx("p",{className:"text-black",children:"입장코드"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("p",{className:"text-base text-black",children:`${ht}`}),jsxRuntimeExports.jsx("button",{className:"ml-2",onClick:()=>{navigator.clipboard.writeText(ht),xt(!0),setTimeout(()=>{xt(!1)},3e3)},children:gt?jsxRuntimeExports.jsx(CheckIcon$1,{className:"w-5 h-5 text-green-700"}):jsxRuntimeExports.jsx(ClipboardIcon$1,{className:"w-5 h-5 text-black"})})]})]}):St?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{defaultValue:ht,onChange:Rt=>{pt(Rt.target.value)},placeholder:"입장 코드번호를 입력해주세요",className:"w-full px-4 py-3 text-center text-black rounded-md"}),ft&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600",children:"올바른 코드 번호를 입력해 주세요"})]}):null,(yt||St)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{value:it,onChange:Rt=>st(Rt.target.value),placeholder:"이름을 입력해주세요",className:"w-full px-4 py-3 mt-5 text-center text-black rounded-md"}),jsxRuntimeExports.jsx("button",{disabled:it.length<1,className:`w-full ${it.length<1?"bg-gray-600":"bg-teal-700"}  text-white px-2 py-3 rounded-md mt-5`,onClick:Rt=>{yt?(lt&&(lt.stop(),ct(null)),ut()):ht.match("\\w{4}\\-\\w{4}\\-\\w{4}")?nt(ht):mt(!0)},children:"시작하기"})]}),!yt&&!St&&wt.info.role==="ROLE_ADMIN"?jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full mt-4 md:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 text-white bg-teal-700 rounded-md",onClick:async Rt=>{const Tt=await rt();pt(Tt),vt(!0),dt(Constants.modes.CONFERENCE)},children:"방 만들기"}),jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 mt-5 text-white bg-teal-700 rounded-md",onClick:async Rt=>{Et(!0),dt(Constants.modes.CONFERENCE)},children:"참여하기"})]})}):jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full mt-4 md:mt-0",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 mt-5 text-white bg-teal-700 rounded-md",onClick:async Rt=>{Et(!0),dt(Constants.modes.CONFERENCE)},children:"참여하기"})})})]})}var define_import_meta_env_default={VITE_AWS_ACCESS_KEY_ID:"AKIAQ3EGP36XU5CEUPOS",VITE_AWS_SECRET_ACCESS_KEY:"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",VITE_VIDEOSDK_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJhY2ZiODk4Yy1kZTExLTRmMGUtOTZmZi1mYWQzYWQwZDA4MDEiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTcwNzE5NjIyOCwiZXhwIjoxNzA5Nzg4MjI4fQ.-z1CumhwuJJESfeP_ZwZMAnt_zLiStnASC_NGqxgPQY",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const API_BASE_URL="https://api.videosdk.live",VIDEOSDK_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJhY2ZiODk4Yy1kZTExLTRmMGUtOTZmZi1mYWQzYWQwZDA4MDEiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTcwNzE5NjIyOCwiZXhwIjoxNzA5Nzg4MjI4fQ.-z1CumhwuJJESfeP_ZwZMAnt_zLiStnASC_NGqxgPQY",API_AUTH_URL=define_import_meta_env_default.REACT_APP_AUTH_URL,getToken=async()=>{if(API_AUTH_URL)console.error("Error: Provide only ONE PARAMETER - either Token or Auth API");else return VIDEOSDK_TOKEN},createMeeting=async({token:nt})=>{const rt=`${API_BASE_URL}/v2/rooms`,it={method:"POST",headers:{Authorization:nt,"Content-Type":"application/json"}},{roomId:st}=await fetch(rt,it).then(lt=>lt.json()).catch(lt=>console.error("error",lt));return st},validateMeeting=async({roomId:nt,token:rt})=>{const it=`${API_BASE_URL}/v2/rooms/validate/${nt}`,lt=await fetch(it,{method:"GET",headers:{Authorization:rt,"Content-Type":"application/json"}}).then(ct=>ct.json()).catch(ct=>console.error("error",ct));return lt?lt.roomId===nt:!1};var i$4=Object.defineProperty,d$6=(nt,rt,it)=>rt in nt?i$4(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,r$3=(nt,rt,it)=>(d$6(nt,typeof rt!="symbol"?rt+"":rt,it),it);let o$5=class{constructor(){r$3(this,"current",this.detect()),r$3(this,"handoffState","pending"),r$3(this,"currentId",0)}set(rt){this.current!==rt&&(this.handoffState="pending",this.currentId=0,this.current=rt)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$8=new o$5,l$5=(nt,rt)=>{s$8.isServer?reactExports.useEffect(nt,rt):reactExports.useLayoutEffect(nt,rt)};function s$7(nt){let rt=reactExports.useRef(nt);return l$5(()=>{rt.current=nt},[nt]),rt}let o$4=function(nt){let rt=s$7(nt);return e$2.useCallback((...it)=>rt.current(...it),[rt])};function t$6(nt){typeof queueMicrotask=="function"?queueMicrotask(nt):Promise.resolve().then(nt).catch(rt=>setTimeout(()=>{throw rt}))}function o$3(){let nt=[],rt={addEventListener(it,st,lt,ct){return it.addEventListener(st,lt,ct),rt.add(()=>it.removeEventListener(st,lt,ct))},requestAnimationFrame(...it){let st=requestAnimationFrame(...it);return rt.add(()=>cancelAnimationFrame(st))},nextFrame(...it){return rt.requestAnimationFrame(()=>rt.requestAnimationFrame(...it))},setTimeout(...it){let st=setTimeout(...it);return rt.add(()=>clearTimeout(st))},microTask(...it){let st={current:!0};return t$6(()=>{st.current&&it[0]()}),rt.add(()=>{st.current=!1})},style(it,st,lt){let ct=it.style.getPropertyValue(st);return Object.assign(it.style,{[st]:lt}),this.add(()=>{Object.assign(it.style,{[st]:ct})})},group(it){let st=o$3();return it(st),this.add(()=>st.dispose())},add(it){return nt.push(it),()=>{let st=nt.indexOf(it);if(st>=0)for(let lt of nt.splice(st,1))lt()}},dispose(){for(let it of nt.splice(0))it()}};return rt}function p$3(){let[nt]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>nt.dispose(),[nt]),nt}function s$6(){let nt=typeof document>"u";return"useSyncExternalStore"in e$3?(rt=>rt.useSyncExternalStore)(e$3)(()=>()=>{},()=>!1,()=>!nt):!1}function l$4(){let nt=s$6(),[rt,it]=reactExports.useState(s$8.isHandoffComplete);return rt&&s$8.isHandoffComplete===!1&&it(!1),reactExports.useEffect(()=>{rt!==!0&&it(!0)},[rt]),reactExports.useEffect(()=>s$8.handoff(),[]),nt?!1:rt}var o$2;let I$7=(o$2=e$2.useId)!=null?o$2:function(){let nt=l$4(),[rt,it]=e$2.useState(nt?()=>s$8.nextId():null);return l$5(()=>{rt===null&&it(s$8.nextId())},[rt]),rt!=null?""+rt:void 0};function u$5(nt,rt,...it){if(nt in rt){let lt=rt[nt];return typeof lt=="function"?lt(...it):lt}let st=new Error(`Tried to handle "${nt}" but there is no handler defined. Only defined handlers are: ${Object.keys(rt).map(lt=>`"${lt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(st,u$5),st}function o$1(nt){return s$8.isServer?null:nt instanceof Node?nt.ownerDocument:nt!=null&&nt.hasOwnProperty("current")&&nt.current instanceof Node?nt.current.ownerDocument:document}let c$5=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(nt=>`${nt}:not([tabindex='-1'])`).join(",");var M$3=(nt=>(nt[nt.First=1]="First",nt[nt.Previous=2]="Previous",nt[nt.Next=4]="Next",nt[nt.Last=8]="Last",nt[nt.WrapAround=16]="WrapAround",nt[nt.NoScroll=32]="NoScroll",nt))(M$3||{}),N$2=(nt=>(nt[nt.Error=0]="Error",nt[nt.Overflow=1]="Overflow",nt[nt.Success=2]="Success",nt[nt.Underflow=3]="Underflow",nt))(N$2||{}),F$2=(nt=>(nt[nt.Previous=-1]="Previous",nt[nt.Next=1]="Next",nt))(F$2||{});function f$5(nt=document.body){return nt==null?[]:Array.from(nt.querySelectorAll(c$5)).sort((rt,it)=>Math.sign((rt.tabIndex||Number.MAX_SAFE_INTEGER)-(it.tabIndex||Number.MAX_SAFE_INTEGER)))}var T$3=(nt=>(nt[nt.Strict=0]="Strict",nt[nt.Loose=1]="Loose",nt))(T$3||{});function h$3(nt,rt=0){var it;return nt===((it=o$1(nt))==null?void 0:it.body)?!1:u$5(rt,{0(){return nt.matches(c$5)},1(){let st=nt;for(;st!==null;){if(st.matches(c$5))return!0;st=st.parentElement}return!1}})}var w$2=(nt=>(nt[nt.Keyboard=0]="Keyboard",nt[nt.Mouse=1]="Mouse",nt))(w$2||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",nt=>{nt.metaKey||nt.altKey||nt.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",nt=>{nt.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:nt.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function y$4(nt){nt==null||nt.focus({preventScroll:!0})}let S$5=["textarea","input"].join(",");function H(nt){var rt,it;return(it=(rt=nt==null?void 0:nt.matches)==null?void 0:rt.call(nt,S$5))!=null?it:!1}function I$6(nt,rt=it=>it){return nt.slice().sort((it,st)=>{let lt=rt(it),ct=rt(st);if(lt===null||ct===null)return 0;let ut=lt.compareDocumentPosition(ct);return ut&Node.DOCUMENT_POSITION_FOLLOWING?-1:ut&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function O$1(nt,rt,{sorted:it=!0,relativeTo:st=null,skipElements:lt=[]}={}){let ct=Array.isArray(nt)?nt.length>0?nt[0].ownerDocument:document:nt.ownerDocument,ut=Array.isArray(nt)?it?I$6(nt):nt:f$5(nt);lt.length>0&&ut.length>1&&(ut=ut.filter(xt=>!lt.includes(xt))),st=st??ct.activeElement;let dt=(()=>{if(rt&5)return 1;if(rt&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),ht=(()=>{if(rt&1)return 0;if(rt&2)return Math.max(0,ut.indexOf(st))-1;if(rt&4)return Math.max(0,ut.indexOf(st))+1;if(rt&8)return ut.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),pt=rt&32?{preventScroll:!0}:{},ft=0,mt=ut.length,gt;do{if(ft>=mt||ft+mt<=0)return 0;let xt=ht+ft;if(rt&16)xt=(xt+mt)%mt;else{if(xt<0)return 3;if(xt>=mt)return 1}gt=ut[xt],gt==null||gt.focus(pt),ft+=dt}while(gt!==ct.activeElement);return rt&6&&H(gt)&&gt.select(),2}function t$5(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$3(){return t$5()||i$3()}function d$5(nt,rt,it){let st=s$7(rt);reactExports.useEffect(()=>{function lt(ct){st.current(ct)}return document.addEventListener(nt,lt,it),()=>document.removeEventListener(nt,lt,it)},[nt,it])}function s$5(nt,rt,it){let st=s$7(rt);reactExports.useEffect(()=>{function lt(ct){st.current(ct)}return window.addEventListener(nt,lt,it),()=>window.removeEventListener(nt,lt,it)},[nt,it])}function y$3(nt,rt,it=!0){let st=reactExports.useRef(!1);reactExports.useEffect(()=>{requestAnimationFrame(()=>{st.current=it})},[it]);function lt(ut,dt){if(!st.current||ut.defaultPrevented)return;let ht=dt(ut);if(ht===null||!ht.getRootNode().contains(ht)||!ht.isConnected)return;let pt=function ft(mt){return typeof mt=="function"?ft(mt()):Array.isArray(mt)||mt instanceof Set?mt:[mt]}(nt);for(let ft of pt){if(ft===null)continue;let mt=ft instanceof HTMLElement?ft:ft.current;if(mt!=null&&mt.contains(ht)||ut.composed&&ut.composedPath().includes(mt))return}return!h$3(ht,T$3.Loose)&&ht.tabIndex!==-1&&ut.preventDefault(),rt(ut,ht)}let ct=reactExports.useRef(null);d$5("pointerdown",ut=>{var dt,ht;st.current&&(ct.current=((ht=(dt=ut.composedPath)==null?void 0:dt.call(ut))==null?void 0:ht[0])||ut.target)},!0),d$5("mousedown",ut=>{var dt,ht;st.current&&(ct.current=((ht=(dt=ut.composedPath)==null?void 0:dt.call(ut))==null?void 0:ht[0])||ut.target)},!0),d$5("click",ut=>{n$3()||ct.current&&(lt(ut,()=>ct.current),ct.current=null)},!0),d$5("touchend",ut=>lt(ut,()=>ut.target instanceof HTMLElement?ut.target:null),!0),s$5("blur",ut=>lt(ut,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$2(...nt){return reactExports.useMemo(()=>o$1(...nt),[...nt])}function i$2(nt){var rt;if(nt.type)return nt.type;let it=(rt=nt.as)!=null?rt:"button";if(typeof it=="string"&&it.toLowerCase()==="button")return"button"}function T$2(nt,rt){let[it,st]=reactExports.useState(()=>i$2(nt));return l$5(()=>{st(i$2(nt))},[nt.type,nt.as]),l$5(()=>{it||rt.current&&rt.current instanceof HTMLButtonElement&&!rt.current.hasAttribute("type")&&st("button")},[it,rt]),it}let u$4=Symbol();function T$1(nt,rt=!0){return Object.assign(nt,{[u$4]:rt})}function y$2(...nt){let rt=reactExports.useRef(nt);reactExports.useEffect(()=>{rt.current=nt},[nt]);let it=o$4(st=>{for(let lt of rt.current)lt!=null&&(typeof lt=="function"?lt(st):lt.current=st)});return nt.every(st=>st==null||(st==null?void 0:st[u$4]))?void 0:it}function m$3(nt,rt){let it=reactExports.useRef([]),st=o$4(nt);reactExports.useEffect(()=>{let lt=[...it.current];for(let[ct,ut]of rt.entries())if(it.current[ct]!==ut){let dt=st(rt,lt);return it.current=rt,dt}},[st,...rt])}function t$4(...nt){return Array.from(new Set(nt.flatMap(rt=>typeof rt=="string"?rt.split(" "):[]))).filter(Boolean).join(" ")}var O=(nt=>(nt[nt.None=0]="None",nt[nt.RenderStrategy=1]="RenderStrategy",nt[nt.Static=2]="Static",nt))(O||{}),v$2=(nt=>(nt[nt.Unmount=0]="Unmount",nt[nt.Hidden=1]="Hidden",nt))(v$2||{});function C$1({ourProps:nt,theirProps:rt,slot:it,defaultTag:st,features:lt,visible:ct=!0,name:ut,mergeRefs:dt}){dt=dt??k$1;let ht=R(rt,nt);if(ct)return m$2(ht,it,st,ut,dt);let pt=lt??0;if(pt&2){let{static:ft=!1,...mt}=ht;if(ft)return m$2(mt,it,st,ut,dt)}if(pt&1){let{unmount:ft=!0,...mt}=ht;return u$5(ft?0:1,{0(){return null},1(){return m$2({...mt,hidden:!0,style:{display:"none"}},it,st,ut,dt)}})}return m$2(ht,it,st,ut,dt)}function m$2(nt,rt={},it,st,lt){let{as:ct=it,children:ut,refName:dt="ref",...ht}=F$1(nt,["unmount","static"]),pt=nt.ref!==void 0?{[dt]:nt.ref}:{},ft=typeof ut=="function"?ut(rt):ut;"className"in ht&&ht.className&&typeof ht.className=="function"&&(ht.className=ht.className(rt));let mt={};if(rt){let gt=!1,xt=[];for(let[yt,vt]of Object.entries(rt))typeof vt=="boolean"&&(gt=!0),vt===!0&&xt.push(yt);gt&&(mt["data-headlessui-state"]=xt.join(" "))}if(ct===reactExports.Fragment&&Object.keys(x$2(ht)).length>0){if(!reactExports.isValidElement(ft)||Array.isArray(ft)&&ft.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${st} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ht).map(vt=>`  - ${vt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(vt=>`  - ${vt}`).join(`
`)].join(`
`));let gt=ft.props,xt=typeof(gt==null?void 0:gt.className)=="function"?(...vt)=>t$4(gt==null?void 0:gt.className(...vt),ht.className):t$4(gt==null?void 0:gt.className,ht.className),yt=xt?{className:xt}:{};return reactExports.cloneElement(ft,Object.assign({},R(ft.props,x$2(F$1(ht,["ref"]))),mt,pt,{ref:lt(ft.ref,pt.ref)},yt))}return reactExports.createElement(ct,Object.assign({},F$1(ht,["ref"]),ct!==reactExports.Fragment&&pt,ct!==reactExports.Fragment&&mt),ft)}function I$5(){let nt=reactExports.useRef([]),rt=reactExports.useCallback(it=>{for(let st of nt.current)st!=null&&(typeof st=="function"?st(it):st.current=it)},[]);return(...it)=>{if(!it.every(st=>st==null))return nt.current=it,rt}}function k$1(...nt){return nt.every(rt=>rt==null)?void 0:rt=>{for(let it of nt)it!=null&&(typeof it=="function"?it(rt):it.current=rt)}}function R(...nt){if(nt.length===0)return{};if(nt.length===1)return nt[0];let rt={},it={};for(let st of nt)for(let lt in st)lt.startsWith("on")&&typeof st[lt]=="function"?(it[lt]!=null||(it[lt]=[]),it[lt].push(st[lt])):rt[lt]=st[lt];if(rt.disabled||rt["aria-disabled"])return Object.assign(rt,Object.fromEntries(Object.keys(it).map(st=>[st,void 0])));for(let st in it)Object.assign(rt,{[st](lt,...ct){let ut=it[st];for(let dt of ut){if((lt instanceof Event||(lt==null?void 0:lt.nativeEvent)instanceof Event)&&lt.defaultPrevented)return;dt(lt,...ct)}}});return rt}function U$2(nt){var rt;return Object.assign(reactExports.forwardRef(nt),{displayName:(rt=nt.displayName)!=null?rt:nt.name})}function x$2(nt){let rt=Object.assign({},nt);for(let it in rt)rt[it]===void 0&&delete rt[it];return rt}function F$1(nt,rt=[]){let it=Object.assign({},nt);for(let st of rt)st in it&&delete it[st];return it}let p$2="div";var s$4=(nt=>(nt[nt.None=1]="None",nt[nt.Focusable=2]="Focusable",nt[nt.Hidden=4]="Hidden",nt))(s$4||{});function l$3(nt,rt){var it;let{features:st=1,...lt}=nt,ct={ref:rt,"aria-hidden":(st&2)===2?!0:(it=lt["aria-hidden"])!=null?it:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(st&4)===4&&(st&2)!==2&&{display:"none"}}};return C$1({ourProps:ct,theirProps:lt,slot:{},defaultTag:p$2,name:"Hidden"})}let f$4=U$2(l$3),n$1=reactExports.createContext(null);n$1.displayName="OpenClosedContext";var d$4=(nt=>(nt[nt.Open=1]="Open",nt[nt.Closed=2]="Closed",nt[nt.Closing=4]="Closing",nt[nt.Opening=8]="Opening",nt))(d$4||{});function u$3(){return reactExports.useContext(n$1)}function s$3({value:nt,children:rt}){return e$2.createElement(n$1.Provider,{value:nt},rt)}function t$3(nt){function rt(){document.readyState!=="loading"&&(nt(),document.removeEventListener("DOMContentLoaded",rt))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",rt),rt())}let t$2=[];t$3(()=>{function nt(rt){rt.target instanceof HTMLElement&&rt.target!==document.body&&t$2[0]!==rt.target&&(t$2.unshift(rt.target),t$2=t$2.filter(it=>it!=null&&it.isConnected),t$2.splice(10))}window.addEventListener("click",nt,{capture:!0}),window.addEventListener("mousedown",nt,{capture:!0}),window.addEventListener("focus",nt,{capture:!0}),document.body.addEventListener("click",nt,{capture:!0}),document.body.addEventListener("mousedown",nt,{capture:!0}),document.body.addEventListener("focus",nt,{capture:!0})});function r$2(nt){let rt=nt.parentElement,it=null;for(;rt&&!(rt instanceof HTMLFieldSetElement);)rt instanceof HTMLLegendElement&&(it=rt),rt=rt.parentElement;let st=(rt==null?void 0:rt.getAttribute("disabled"))==="";return st&&i$1(it)?!1:st}function i$1(nt){if(!nt)return!1;let rt=nt.previousElementSibling;for(;rt!==null;){if(rt instanceof HTMLLegendElement)return!1;rt=rt.previousElementSibling}return!0}var o=(nt=>(nt.Space=" ",nt.Enter="Enter",nt.Escape="Escape",nt.Backspace="Backspace",nt.Delete="Delete",nt.ArrowLeft="ArrowLeft",nt.ArrowUp="ArrowUp",nt.ArrowRight="ArrowRight",nt.ArrowDown="ArrowDown",nt.Home="Home",nt.End="End",nt.PageUp="PageUp",nt.PageDown="PageDown",nt.Tab="Tab",nt))(o||{});function E(nt,rt,it,st){let lt=s$7(it);reactExports.useEffect(()=>{nt=nt??window;function ct(ut){lt.current(ut)}return nt.addEventListener(rt,ct,st),()=>nt.removeEventListener(rt,ct,st)},[nt,rt,st])}function f$3(){let nt=reactExports.useRef(!1);return l$5(()=>(nt.current=!0,()=>{nt.current=!1}),[]),nt}function c$4(nt){let rt=o$4(nt),it=reactExports.useRef(!1);reactExports.useEffect(()=>(it.current=!1,()=>{it.current=!0,t$6(()=>{it.current&&rt()})}),[rt])}var s$2=(nt=>(nt[nt.Forwards=0]="Forwards",nt[nt.Backwards=1]="Backwards",nt))(s$2||{});function n(){let nt=reactExports.useRef(0);return s$5("keydown",rt=>{rt.key==="Tab"&&(nt.current=rt.shiftKey?1:0)},!0),nt}function P$1(nt){if(!nt)return new Set;if(typeof nt=="function")return new Set(nt());let rt=new Set;for(let it of nt.current)it.current instanceof HTMLElement&&rt.add(it.current);return rt}let X="div";var _$2=(nt=>(nt[nt.None=1]="None",nt[nt.InitialFocus=2]="InitialFocus",nt[nt.TabLock=4]="TabLock",nt[nt.FocusLock=8]="FocusLock",nt[nt.RestoreFocus=16]="RestoreFocus",nt[nt.All=30]="All",nt))(_$2||{});function z(nt,rt){let it=reactExports.useRef(null),st=y$2(it,rt),{initialFocus:lt,containers:ct,features:ut=30,...dt}=nt;l$4()||(ut=1);let ht=n$2(it);Y({ownerDocument:ht},!!(ut&16));let pt=Z({ownerDocument:ht,container:it,initialFocus:lt},!!(ut&2));$({ownerDocument:ht,container:it,containers:ct,previousActiveElement:pt},!!(ut&8));let ft=n(),mt=o$4(vt=>{let St=it.current;St&&(Et=>Et())(()=>{u$5(ft.current,{[s$2.Forwards]:()=>{O$1(St,M$3.First,{skipElements:[vt.relatedTarget]})},[s$2.Backwards]:()=>{O$1(St,M$3.Last,{skipElements:[vt.relatedTarget]})}})})}),gt=p$3(),xt=reactExports.useRef(!1),yt={ref:st,onKeyDown(vt){vt.key=="Tab"&&(xt.current=!0,gt.requestAnimationFrame(()=>{xt.current=!1}))},onBlur(vt){let St=P$1(ct);it.current instanceof HTMLElement&&St.add(it.current);let Et=vt.relatedTarget;Et instanceof HTMLElement&&Et.dataset.headlessuiFocusGuard!=="true"&&(S$4(St,Et)||(xt.current?O$1(it.current,u$5(ft.current,{[s$2.Forwards]:()=>M$3.Next,[s$2.Backwards]:()=>M$3.Previous})|M$3.WrapAround,{relativeTo:vt.target}):vt.target instanceof HTMLElement&&y$4(vt.target)))}};return e$2.createElement(e$2.Fragment,null,!!(ut&4)&&e$2.createElement(f$4,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:mt,features:s$4.Focusable}),C$1({ourProps:yt,theirProps:dt,defaultTag:X,name:"FocusTrap"}),!!(ut&4)&&e$2.createElement(f$4,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:mt,features:s$4.Focusable}))}let D$2=U$2(z),de=Object.assign(D$2,{features:_$2});function Q(nt=!0){let rt=reactExports.useRef(t$2.slice());return m$3(([it],[st])=>{st===!0&&it===!1&&t$6(()=>{rt.current.splice(0)}),st===!1&&it===!0&&(rt.current=t$2.slice())},[nt,t$2,rt]),o$4(()=>{var it;return(it=rt.current.find(st=>st!=null&&st.isConnected))!=null?it:null})}function Y({ownerDocument:nt},rt){let it=Q(rt);m$3(()=>{rt||(nt==null?void 0:nt.activeElement)===(nt==null?void 0:nt.body)&&y$4(it())},[rt]),c$4(()=>{rt&&y$4(it())})}function Z({ownerDocument:nt,container:rt,initialFocus:it},st){let lt=reactExports.useRef(null),ct=f$3();return m$3(()=>{if(!st)return;let ut=rt.current;ut&&t$6(()=>{if(!ct.current)return;let dt=nt==null?void 0:nt.activeElement;if(it!=null&&it.current){if((it==null?void 0:it.current)===dt){lt.current=dt;return}}else if(ut.contains(dt)){lt.current=dt;return}it!=null&&it.current?y$4(it.current):O$1(ut,M$3.First)===N$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),lt.current=nt==null?void 0:nt.activeElement})},[st]),lt}function $({ownerDocument:nt,container:rt,containers:it,previousActiveElement:st},lt){let ct=f$3();E(nt==null?void 0:nt.defaultView,"focus",ut=>{if(!lt||!ct.current)return;let dt=P$1(it);rt.current instanceof HTMLElement&&dt.add(rt.current);let ht=st.current;if(!ht)return;let pt=ut.target;pt&&pt instanceof HTMLElement?S$4(dt,pt)?(st.current=pt,y$4(pt)):(ut.preventDefault(),ut.stopPropagation(),y$4(ht)):y$4(st.current)},!0)}function S$4(nt,rt){for(let it of nt)if(it.contains(rt))return!0;return!1}let e=reactExports.createContext(!1);function a$4(){return reactExports.useContext(e)}function l$2(nt){return e$2.createElement(e.Provider,{value:nt.force},nt.children)}function F(nt){let rt=a$4(),it=reactExports.useContext(_$1),st=n$2(nt),[lt,ct]=reactExports.useState(()=>{if(!rt&&it!==null||s$8.isServer)return null;let ut=st==null?void 0:st.getElementById("headlessui-portal-root");if(ut)return ut;if(st===null)return null;let dt=st.createElement("div");return dt.setAttribute("id","headlessui-portal-root"),st.body.appendChild(dt)});return reactExports.useEffect(()=>{lt!==null&&(st!=null&&st.body.contains(lt)||st==null||st.body.appendChild(lt))},[lt,st]),reactExports.useEffect(()=>{rt||it!==null&&ct(it.current)},[it,ct,rt]),lt}let U$1=reactExports.Fragment;function N$1(nt,rt){let it=nt,st=reactExports.useRef(null),lt=y$2(T$1(ft=>{st.current=ft}),rt),ct=n$2(st),ut=F(st),[dt]=reactExports.useState(()=>{var ft;return s$8.isServer?null:(ft=ct==null?void 0:ct.createElement("div"))!=null?ft:null}),ht=reactExports.useContext(f$2),pt=l$4();return l$5(()=>{!ut||!dt||ut.contains(dt)||(dt.setAttribute("data-headlessui-portal",""),ut.appendChild(dt))},[ut,dt]),l$5(()=>{if(dt&&ht)return ht.register(dt)},[ht,dt]),c$4(()=>{var ft;!ut||!dt||(dt instanceof Node&&ut.contains(dt)&&ut.removeChild(dt),ut.childNodes.length<=0&&((ft=ut.parentElement)==null||ft.removeChild(ut)))}),pt?!ut||!dt?null:reactDomExports.createPortal(C$1({ourProps:{ref:lt},theirProps:it,defaultTag:U$1,name:"Portal"}),dt):null}let S$3=reactExports.Fragment,_$1=reactExports.createContext(null);function j(nt,rt){let{target:it,...st}=nt,lt={ref:y$2(rt)};return e$2.createElement(_$1.Provider,{value:it},C$1({ourProps:lt,theirProps:st,defaultTag:S$3,name:"Popover.Group"}))}let f$2=reactExports.createContext(null);function ee(){let nt=reactExports.useContext(f$2),rt=reactExports.useRef([]),it=o$4(ct=>(rt.current.push(ct),nt&&nt.register(ct),()=>st(ct))),st=o$4(ct=>{let ut=rt.current.indexOf(ct);ut!==-1&&rt.current.splice(ut,1),nt&&nt.unregister(ct)}),lt=reactExports.useMemo(()=>({register:it,unregister:st,portals:rt}),[it,st,rt]);return[rt,reactExports.useMemo(()=>function({children:ct}){return e$2.createElement(f$2.Provider,{value:lt},ct)},[lt])]}let D$1=U$2(N$1),I$4=U$2(j),te=Object.assign(D$1,{Group:I$4});function i(nt,rt){return nt===rt&&(nt!==0||1/nt===1/rt)||nt!==nt&&rt!==rt}const d$3=typeof Object.is=="function"?Object.is:i,{useState:u$2,useEffect:h$2,useLayoutEffect:f$1,useDebugValue:p$1}=e$3;function y$1(nt,rt,it){const st=rt(),[{inst:lt},ct]=u$2({inst:{value:st,getSnapshot:rt}});return f$1(()=>{lt.value=st,lt.getSnapshot=rt,r$1(lt)&&ct({inst:lt})},[nt,st,rt]),h$2(()=>(r$1(lt)&&ct({inst:lt}),nt(()=>{r$1(lt)&&ct({inst:lt})})),[nt]),p$1(st),st}function r$1(nt){const rt=nt.getSnapshot,it=nt.value;try{const st=rt();return!d$3(it,st)}catch{return!0}}function t$1(nt,rt,it){return rt()}const r=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s$1=!r,c$3=s$1?t$1:y$1,a$3="useSyncExternalStore"in e$3?(nt=>nt.useSyncExternalStore)(e$3):c$3;function S$2(nt){return a$3(nt.subscribe,nt.getSnapshot,nt.getSnapshot)}function a$2(nt,rt){let it=nt(),st=new Set;return{getSnapshot(){return it},subscribe(lt){return st.add(lt),()=>st.delete(lt)},dispatch(lt,...ct){let ut=rt[lt].call(it,...ct);ut&&(it=ut,st.forEach(dt=>dt()))}}}function c$2(){let nt;return{before({doc:rt}){var it;let st=rt.documentElement;nt=((it=rt.defaultView)!=null?it:window).innerWidth-st.clientWidth},after({doc:rt,d:it}){let st=rt.documentElement,lt=st.clientWidth-st.offsetWidth,ct=nt-lt;it.style(st,"paddingRight",`${ct}px`)}}}function d$2(){return t$5()?{before({doc:nt,d:rt,meta:it}){function st(lt){return it.containers.flatMap(ct=>ct()).some(ct=>ct.contains(lt))}rt.microTask(()=>{var lt;if(window.getComputedStyle(nt.documentElement).scrollBehavior!=="auto"){let dt=o$3();dt.style(nt.documentElement,"scrollBehavior","auto"),rt.add(()=>rt.microTask(()=>dt.dispose()))}let ct=(lt=window.scrollY)!=null?lt:window.pageYOffset,ut=null;rt.addEventListener(nt,"click",dt=>{if(dt.target instanceof HTMLElement)try{let ht=dt.target.closest("a");if(!ht)return;let{hash:pt}=new URL(ht.href),ft=nt.querySelector(pt);ft&&!st(ft)&&(ut=ft)}catch{}},!0),rt.addEventListener(nt,"touchstart",dt=>{if(dt.target instanceof HTMLElement)if(st(dt.target)){let ht=dt.target;for(;ht.parentElement&&st(ht.parentElement);)ht=ht.parentElement;rt.style(ht,"overscrollBehavior","contain")}else rt.style(dt.target,"touchAction","none")}),rt.addEventListener(nt,"touchmove",dt=>{if(dt.target instanceof HTMLElement)if(st(dt.target)){let ht=dt.target;for(;ht.parentElement&&ht.dataset.headlessuiPortal!==""&&!(ht.scrollHeight>ht.clientHeight||ht.scrollWidth>ht.clientWidth);)ht=ht.parentElement;ht.dataset.headlessuiPortal===""&&dt.preventDefault()}else dt.preventDefault()},{passive:!1}),rt.add(()=>{var dt;let ht=(dt=window.scrollY)!=null?dt:window.pageYOffset;ct!==ht&&window.scrollTo(0,ct),ut&&ut.isConnected&&(ut.scrollIntoView({block:"nearest"}),ut=null)})})}}:{}}function l$1(){return{before({doc:nt,d:rt}){rt.style(nt.documentElement,"overflow","hidden")}}}function m$1(nt){let rt={};for(let it of nt)Object.assign(rt,it(rt));return rt}let a$1=a$2(()=>new Map,{PUSH(nt,rt){var it;let st=(it=this.get(nt))!=null?it:{doc:nt,count:0,d:o$3(),meta:new Set};return st.count++,st.meta.add(rt),this.set(nt,st),this},POP(nt,rt){let it=this.get(nt);return it&&(it.count--,it.meta.delete(rt)),this},SCROLL_PREVENT({doc:nt,d:rt,meta:it}){let st={doc:nt,d:rt,meta:m$1(it)},lt=[d$2(),c$2(),l$1()];lt.forEach(({before:ct})=>ct==null?void 0:ct(st)),lt.forEach(({after:ct})=>ct==null?void 0:ct(st))},SCROLL_ALLOW({d:nt}){nt.dispose()},TEARDOWN({doc:nt}){this.delete(nt)}});a$1.subscribe(()=>{let nt=a$1.getSnapshot(),rt=new Map;for(let[it]of nt)rt.set(it,it.documentElement.style.overflow);for(let it of nt.values()){let st=rt.get(it.doc)==="hidden",lt=it.count!==0;(lt&&!st||!lt&&st)&&a$1.dispatch(it.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",it),it.count===0&&a$1.dispatch("TEARDOWN",it)}});function p(nt,rt,it){let st=S$2(a$1),lt=nt?st.get(nt):void 0,ct=lt?lt.count>0:!1;return l$5(()=>{if(!(!nt||!rt))return a$1.dispatch("PUSH",nt,it),()=>a$1.dispatch("POP",nt,it)},[rt,nt]),ct}let u$1=new Map,t=new Map;function b$4(nt,rt=!0){l$5(()=>{var it;if(!rt)return;let st=typeof nt=="function"?nt():nt.current;if(!st)return;function lt(){var ut;if(!st)return;let dt=(ut=t.get(st))!=null?ut:1;if(dt===1?t.delete(st):t.set(st,dt-1),dt!==1)return;let ht=u$1.get(st);ht&&(ht["aria-hidden"]===null?st.removeAttribute("aria-hidden"):st.setAttribute("aria-hidden",ht["aria-hidden"]),st.inert=ht.inert,u$1.delete(st))}let ct=(it=t.get(st))!=null?it:0;return t.set(st,ct+1),ct!==0||(u$1.set(st,{"aria-hidden":st.getAttribute("aria-hidden"),inert:st.inert}),st.setAttribute("aria-hidden","true"),st.inert=!0),lt},[nt,rt])}function N({defaultContainers:nt=[],portals:rt,mainTreeNodeRef:it}={}){var st;let lt=reactExports.useRef((st=it==null?void 0:it.current)!=null?st:null),ct=n$2(lt),ut=o$4(()=>{var dt,ht,pt;let ft=[];for(let mt of nt)mt!==null&&(mt instanceof HTMLElement?ft.push(mt):"current"in mt&&mt.current instanceof HTMLElement&&ft.push(mt.current));if(rt!=null&&rt.current)for(let mt of rt.current)ft.push(mt);for(let mt of(dt=ct==null?void 0:ct.querySelectorAll("html > *, body > *"))!=null?dt:[])mt!==document.body&&mt!==document.head&&mt instanceof HTMLElement&&mt.id!=="headlessui-portal-root"&&(mt.contains(lt.current)||mt.contains((pt=(ht=lt.current)==null?void 0:ht.getRootNode())==null?void 0:pt.host)||ft.some(gt=>mt.contains(gt))||ft.push(mt));return ft});return{resolveContainers:ut,contains:o$4(dt=>ut().some(ht=>ht.contains(dt))),mainTreeNodeRef:lt,MainTreeNode:reactExports.useMemo(()=>function(){return it!=null?null:e$2.createElement(f$4,{features:s$4.Hidden,ref:lt})},[lt,it])}}function y(){let nt=reactExports.useRef(null);return{mainTreeNodeRef:nt,MainTreeNode:reactExports.useMemo(()=>function(){return e$2.createElement(f$4,{features:s$4.Hidden,ref:nt})},[nt])}}let a=reactExports.createContext(()=>{});a.displayName="StackContext";var s=(nt=>(nt[nt.Add=0]="Add",nt[nt.Remove=1]="Remove",nt))(s||{});function x$1(){return reactExports.useContext(a)}function b$3({children:nt,onUpdate:rt,type:it,element:st,enabled:lt}){let ct=x$1(),ut=o$4((...dt)=>{rt==null||rt(...dt),ct(...dt)});return l$5(()=>{let dt=lt===void 0||lt===!0;return dt&&ut(0,it,st),()=>{dt&&ut(1,it,st)}},[ut,it,st,lt]),e$2.createElement(a.Provider,{value:ut},nt)}let d$1=reactExports.createContext(null);function f(){let nt=reactExports.useContext(d$1);if(nt===null){let rt=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(rt,f),rt}return nt}function w$1(){let[nt,rt]=reactExports.useState([]);return[nt.length>0?nt.join(" "):void 0,reactExports.useMemo(()=>function(it){let st=o$4(ct=>(rt(ut=>[...ut,ct]),()=>rt(ut=>{let dt=ut.slice(),ht=dt.indexOf(ct);return ht!==-1&&dt.splice(ht,1),dt}))),lt=reactExports.useMemo(()=>({register:st,slot:it.slot,name:it.name,props:it.props}),[st,it.slot,it.name,it.props]);return e$2.createElement(d$1.Provider,{value:lt},it.children)},[rt])]}let I$3="p";function S$1(nt,rt){let it=I$7(),{id:st=`headlessui-description-${it}`,...lt}=nt,ct=f(),ut=y$2(rt);l$5(()=>ct.register(st),[st,ct.register]);let dt={ref:ut,...ct.props,id:st};return C$1({ourProps:dt,theirProps:lt,slot:ct.slot||{},defaultTag:I$3,name:ct.name||"Description"})}let h$1=U$2(S$1),G=Object.assign(h$1,{});var Me=(nt=>(nt[nt.Open=0]="Open",nt[nt.Closed=1]="Closed",nt))(Me||{}),we$1=(nt=>(nt[nt.SetTitleId=0]="SetTitleId",nt))(we$1||{});let He$2={0(nt,rt){return nt.titleId===rt.id?nt:{...nt,titleId:rt.id}}},I$2=reactExports.createContext(null);I$2.displayName="DialogContext";function b$2(nt){let rt=reactExports.useContext(I$2);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,b$2),it}return rt}function Be(nt,rt,it=()=>[document.body]){p(nt,rt,st=>{var lt;return{containers:[...(lt=st.containers)!=null?lt:[],it]}})}function Ge$1(nt,rt){return u$5(rt.type,He$2,nt,rt)}let Ne$2="div",Ue$1=O.RenderStrategy|O.Static;function We$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-${it}`,open:lt,onClose:ct,initialFocus:ut,role:dt="dialog",__demoMode:ht=!1,...pt}=nt,[ft,mt]=reactExports.useState(0),gt=reactExports.useRef(!1);dt=function(){return dt==="dialog"||dt==="alertdialog"?dt:(gt.current||(gt.current=!0,console.warn(`Invalid role [${dt}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let xt=u$3();lt===void 0&&xt!==null&&(lt=(xt&d$4.Open)===d$4.Open);let yt=reactExports.useRef(null),vt=y$2(yt,rt),St=n$2(yt),Et=nt.hasOwnProperty("open")||xt!==null,wt=nt.hasOwnProperty("onClose");if(!Et&&!wt)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!Et)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!wt)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof lt!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${lt}`);if(typeof ct!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${ct}`);let Rt=lt?0:1,[Tt,It]=reactExports.useReducer(Ge$1,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),At=o$4(()=>ct(!1)),Dt=o$4(gr=>It({type:0,id:gr})),jt=l$4()?ht?!1:Rt===0:!1,Ft=ft>1,Lt=reactExports.useContext(I$2)!==null,[Pt,Ot]=ee(),Nt={get current(){var gr;return(gr=Tt.panelRef.current)!=null?gr:yt.current}},{resolveContainers:$t,mainTreeNodeRef:Vt,MainTreeNode:Ut}=N({portals:Pt,defaultContainers:[Nt]}),zt=Ft?"parent":"leaf",Bt=xt!==null?(xt&d$4.Closing)===d$4.Closing:!1,Ht=Lt||Bt?!1:jt,Gt=reactExports.useCallback(()=>{var gr,lr;return(lr=Array.from((gr=St==null?void 0:St.querySelectorAll("body > *"))!=null?gr:[]).find(Ir=>Ir.id==="headlessui-portal-root"?!1:Ir.contains(Vt.current)&&Ir instanceof HTMLElement))!=null?lr:null},[Vt]);b$4(Gt,Ht);let Kt=Ft?!0:jt,Xt=reactExports.useCallback(()=>{var gr,lr;return(lr=Array.from((gr=St==null?void 0:St.querySelectorAll("[data-headlessui-portal]"))!=null?gr:[]).find(Ir=>Ir.contains(Vt.current)&&Ir instanceof HTMLElement))!=null?lr:null},[Vt]);b$4(Xt,Kt),y$3($t,At,!(!jt||Ft));let tr=!(Ft||Rt!==0);E(St==null?void 0:St.defaultView,"keydown",gr=>{tr&&(gr.defaultPrevented||gr.key===o.Escape&&(gr.preventDefault(),gr.stopPropagation(),At()))}),Be(St,!(Bt||Rt!==0||Lt),$t),reactExports.useEffect(()=>{if(Rt!==0||!yt.current)return;let gr=new ResizeObserver(lr=>{for(let Ir of lr){let wr=Ir.target.getBoundingClientRect();wr.x===0&&wr.y===0&&wr.width===0&&wr.height===0&&At()}});return gr.observe(yt.current),()=>gr.disconnect()},[Rt,yt,At]);let[fr,Sr]=w$1(),vr=reactExports.useMemo(()=>[{dialogState:Rt,close:At,setTitleId:Dt},Tt],[Rt,Tt,At,Dt]),mr=reactExports.useMemo(()=>({open:Rt===0}),[Rt]),hr={ref:vt,id:st,role:dt,"aria-modal":Rt===0?!0:void 0,"aria-labelledby":Tt.titleId,"aria-describedby":fr};return e$2.createElement(b$3,{type:"Dialog",enabled:Rt===0,element:yt,onUpdate:o$4((gr,lr)=>{lr==="Dialog"&&u$5(gr,{[s.Add]:()=>mt(Ir=>Ir+1),[s.Remove]:()=>mt(Ir=>Ir-1)})})},e$2.createElement(l$2,{force:!0},e$2.createElement(te,null,e$2.createElement(I$2.Provider,{value:vr},e$2.createElement(te.Group,{target:yt},e$2.createElement(l$2,{force:!1},e$2.createElement(Sr,{slot:mr,name:"Dialog.Description"},e$2.createElement(de,{initialFocus:ut,containers:$t,features:jt?u$5(zt,{parent:de.features.RestoreFocus,leaf:de.features.All&~de.features.FocusLock}):de.features.None},e$2.createElement(Ot,null,C$1({ourProps:hr,theirProps:pt,slot:mr,defaultTag:Ne$2,features:Ue$1,visible:Rt===0,name:"Dialog"}))))))))),e$2.createElement(Ut,null))}let $e$1="div";function Ye$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-overlay-${it}`,...lt}=nt,[{dialogState:ct,close:ut}]=b$2("Dialog.Overlay"),dt=y$2(rt),ht=o$4(ft=>{if(ft.target===ft.currentTarget){if(r$2(ft.currentTarget))return ft.preventDefault();ft.preventDefault(),ft.stopPropagation(),ut()}}),pt=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0,onClick:ht},theirProps:lt,slot:pt,defaultTag:$e$1,name:"Dialog.Overlay"})}let je$1="div";function Je$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-backdrop-${it}`,...lt}=nt,[{dialogState:ct},ut]=b$2("Dialog.Backdrop"),dt=y$2(rt);reactExports.useEffect(()=>{if(ut.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[ut.panelRef]);let ht=reactExports.useMemo(()=>({open:ct===0}),[ct]);return e$2.createElement(l$2,{force:!0},e$2.createElement(te,null,C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0},theirProps:lt,slot:ht,defaultTag:je$1,name:"Dialog.Backdrop"})))}let Xe$1="div";function Ke$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-panel-${it}`,...lt}=nt,[{dialogState:ct},ut]=b$2("Dialog.Panel"),dt=y$2(rt,ut.panelRef),ht=reactExports.useMemo(()=>({open:ct===0}),[ct]),pt=o$4(ft=>{ft.stopPropagation()});return C$1({ourProps:{ref:dt,id:st,onClick:pt},theirProps:lt,slot:ht,defaultTag:Xe$1,name:"Dialog.Panel"})}let Ve$1="h2";function qe$2(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-title-${it}`,...lt}=nt,[{dialogState:ct,setTitleId:ut}]=b$2("Dialog.Title"),dt=y$2(rt);reactExports.useEffect(()=>(ut(st),()=>ut(null)),[st,ut]);let ht=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st},theirProps:lt,slot:ht,defaultTag:Ve$1,name:"Dialog.Title"})}let ze$1=U$2(We$1),Qe$1=U$2(Je$1),Ze$1=U$2(Ke$1),et$1=U$2(Ye$1),tt$1=U$2(qe$2),_t=Object.assign(ze$1,{Backdrop:Qe$1,Panel:Ze$1,Overlay:et$1,Title:tt$1,Description:G});var he=(nt=>(nt[nt.Open=0]="Open",nt[nt.Closed=1]="Closed",nt))(he||{}),He$1=(nt=>(nt[nt.TogglePopover=0]="TogglePopover",nt[nt.ClosePopover=1]="ClosePopover",nt[nt.SetButton=2]="SetButton",nt[nt.SetButtonId=3]="SetButtonId",nt[nt.SetPanel=4]="SetPanel",nt[nt.SetPanelId=5]="SetPanelId",nt))(He$1||{});let Ge={0:nt=>{let rt={...nt,popoverState:u$5(nt.popoverState,{0:1,1:0})};return rt.popoverState===0&&(rt.__demoMode=!1),rt},1(nt){return nt.popoverState===1?nt:{...nt,popoverState:1}},2(nt,rt){return nt.button===rt.button?nt:{...nt,button:rt.button}},3(nt,rt){return nt.buttonId===rt.buttonId?nt:{...nt,buttonId:rt.buttonId}},4(nt,rt){return nt.panel===rt.panel?nt:{...nt,panel:rt.panel}},5(nt,rt){return nt.panelId===rt.panelId?nt:{...nt,panelId:rt.panelId}}},ue$1=reactExports.createContext(null);ue$1.displayName="PopoverContext";function oe(nt){let rt=reactExports.useContext(ue$1);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,oe),it}return rt}let ie=reactExports.createContext(null);ie.displayName="PopoverAPIContext";function fe(nt){let rt=reactExports.useContext(ie);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,fe),it}return rt}let Pe$1=reactExports.createContext(null);Pe$1.displayName="PopoverGroupContext";function Ee(){return reactExports.useContext(Pe$1)}let re=reactExports.createContext(null);re.displayName="PopoverPanelContext";function Ne$1(){return reactExports.useContext(re)}function ke(nt,rt){return u$5(rt.type,Ge,nt,rt)}let we="div";function Ue(nt,rt){var it;let{__demoMode:st=!1,...lt}=nt,ct=reactExports.useRef(null),ut=y$2(rt,T$1(Ut=>{ct.current=Ut})),dt=reactExports.useRef([]),ht=reactExports.useReducer(ke,{__demoMode:st,popoverState:st?0:1,buttons:dt,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:reactExports.createRef(),afterPanelSentinel:reactExports.createRef()}),[{popoverState:pt,button:ft,buttonId:mt,panel:gt,panelId:xt,beforePanelSentinel:yt,afterPanelSentinel:vt},St]=ht,Et=n$2((it=ct.current)!=null?it:ft),wt=reactExports.useMemo(()=>{if(!ft||!gt)return!1;for(let Xt of document.querySelectorAll("body > *"))if(Number(Xt==null?void 0:Xt.contains(ft))^Number(Xt==null?void 0:Xt.contains(gt)))return!0;let Ut=f$5(),zt=Ut.indexOf(ft),Bt=(zt+Ut.length-1)%Ut.length,Ht=(zt+1)%Ut.length,Gt=Ut[Bt],Kt=Ut[Ht];return!gt.contains(Gt)&&!gt.contains(Kt)},[ft,gt]),Rt=s$7(mt),Tt=s$7(xt),It=reactExports.useMemo(()=>({buttonId:Rt,panelId:Tt,close:()=>St({type:1})}),[Rt,Tt,St]),At=Ee(),Dt=At==null?void 0:At.registerPopover,jt=o$4(()=>{var Ut;return(Ut=At==null?void 0:At.isFocusWithinPopoverGroup())!=null?Ut:(Et==null?void 0:Et.activeElement)&&((ft==null?void 0:ft.contains(Et.activeElement))||(gt==null?void 0:gt.contains(Et.activeElement)))});reactExports.useEffect(()=>Dt==null?void 0:Dt(It),[Dt,It]);let[Ft,Lt]=ee(),Pt=N({mainTreeNodeRef:At==null?void 0:At.mainTreeNodeRef,portals:Ft,defaultContainers:[ft,gt]});E(Et==null?void 0:Et.defaultView,"focus",Ut=>{var zt,Bt,Ht,Gt;Ut.target!==window&&Ut.target instanceof HTMLElement&&pt===0&&(jt()||ft&&gt&&(Pt.contains(Ut.target)||(Bt=(zt=yt.current)==null?void 0:zt.contains)!=null&&Bt.call(zt,Ut.target)||(Gt=(Ht=vt.current)==null?void 0:Ht.contains)!=null&&Gt.call(Ht,Ut.target)||St({type:1})))},!0),y$3(Pt.resolveContainers,(Ut,zt)=>{St({type:1}),h$3(zt,T$3.Loose)||(Ut.preventDefault(),ft==null||ft.focus())},pt===0);let Ot=o$4(Ut=>{St({type:1});let zt=Ut?Ut instanceof HTMLElement?Ut:"current"in Ut&&Ut.current instanceof HTMLElement?Ut.current:ft:ft;zt==null||zt.focus()}),Nt=reactExports.useMemo(()=>({close:Ot,isPortalled:wt}),[Ot,wt]),$t=reactExports.useMemo(()=>({open:pt===0,close:Ot}),[pt,Ot]),Vt={ref:ut};return e$2.createElement(re.Provider,{value:null},e$2.createElement(ue$1.Provider,{value:ht},e$2.createElement(ie.Provider,{value:Nt},e$2.createElement(s$3,{value:u$5(pt,{0:d$4.Open,1:d$4.Closed})},e$2.createElement(Lt,null,C$1({ourProps:Vt,theirProps:lt,slot:$t,defaultTag:we,name:"Popover"}),e$2.createElement(Pt.MainTreeNode,null))))))}let We="button";function Ke(nt,rt){let it=I$7(),{id:st=`headlessui-popover-button-${it}`,...lt}=nt,[ct,ut]=oe("Popover.Button"),{isPortalled:dt}=fe("Popover.Button"),ht=reactExports.useRef(null),pt=`headlessui-focus-sentinel-${I$7()}`,ft=Ee(),mt=ft==null?void 0:ft.closeOthers,gt=Ne$1()!==null;reactExports.useEffect(()=>{if(!gt)return ut({type:3,buttonId:st}),()=>{ut({type:3,buttonId:null})}},[gt,st,ut]);let[xt]=reactExports.useState(()=>Symbol()),yt=y$2(ht,rt,gt?null:Pt=>{if(Pt)ct.buttons.current.push(xt);else{let Ot=ct.buttons.current.indexOf(xt);Ot!==-1&&ct.buttons.current.splice(Ot,1)}ct.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),Pt&&ut({type:2,button:Pt})}),vt=y$2(ht,rt),St=n$2(ht),Et=o$4(Pt=>{var Ot,Nt,$t;if(gt){if(ct.popoverState===1)return;switch(Pt.key){case o.Space:case o.Enter:Pt.preventDefault(),(Nt=(Ot=Pt.target).click)==null||Nt.call(Ot),ut({type:1}),($t=ct.button)==null||$t.focus();break}}else switch(Pt.key){case o.Space:case o.Enter:Pt.preventDefault(),Pt.stopPropagation(),ct.popoverState===1&&(mt==null||mt(ct.buttonId)),ut({type:0});break;case o.Escape:if(ct.popoverState!==0)return mt==null?void 0:mt(ct.buttonId);if(!ht.current||St!=null&&St.activeElement&&!ht.current.contains(St.activeElement))return;Pt.preventDefault(),Pt.stopPropagation(),ut({type:1});break}}),wt=o$4(Pt=>{gt||Pt.key===o.Space&&Pt.preventDefault()}),Rt=o$4(Pt=>{var Ot,Nt;r$2(Pt.currentTarget)||nt.disabled||(gt?(ut({type:1}),(Ot=ct.button)==null||Ot.focus()):(Pt.preventDefault(),Pt.stopPropagation(),ct.popoverState===1&&(mt==null||mt(ct.buttonId)),ut({type:0}),(Nt=ct.button)==null||Nt.focus()))}),Tt=o$4(Pt=>{Pt.preventDefault(),Pt.stopPropagation()}),It=ct.popoverState===0,At=reactExports.useMemo(()=>({open:It}),[It]),Dt=T$2(nt,ht),jt=gt?{ref:vt,type:Dt,onKeyDown:Et,onClick:Rt}:{ref:yt,id:ct.buttonId,type:Dt,"aria-expanded":ct.popoverState===0,"aria-controls":ct.panel?ct.panelId:void 0,onKeyDown:Et,onKeyUp:wt,onClick:Rt,onMouseDown:Tt},Ft=n(),Lt=o$4(()=>{let Pt=ct.panel;if(!Pt)return;function Ot(){u$5(Ft.current,{[s$2.Forwards]:()=>O$1(Pt,M$3.First),[s$2.Backwards]:()=>O$1(Pt,M$3.Last)})===N$2.Error&&O$1(f$5().filter(Nt=>Nt.dataset.headlessuiFocusGuard!=="true"),u$5(Ft.current,{[s$2.Forwards]:M$3.Next,[s$2.Backwards]:M$3.Previous}),{relativeTo:ct.button})}Ot()});return e$2.createElement(e$2.Fragment,null,C$1({ourProps:jt,theirProps:lt,slot:At,defaultTag:We,name:"Popover.Button"}),It&&!gt&&dt&&e$2.createElement(f$4,{id:pt,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Lt}))}let je="div",Ve=O.RenderStrategy|O.Static;function $e(nt,rt){let it=I$7(),{id:st=`headlessui-popover-overlay-${it}`,...lt}=nt,[{popoverState:ct},ut]=oe("Popover.Overlay"),dt=y$2(rt),ht=u$3(),pt=ht!==null?(ht&d$4.Open)===d$4.Open:ct===0,ft=o$4(gt=>{if(r$2(gt.currentTarget))return gt.preventDefault();ut({type:1})}),mt=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0,onClick:ft},theirProps:lt,slot:mt,defaultTag:je,features:Ve,visible:pt,name:"Popover.Overlay"})}let Je="div",Xe=O.RenderStrategy|O.Static;function Ye(nt,rt){let it=I$7(),{id:st=`headlessui-popover-panel-${it}`,focus:lt=!1,...ct}=nt,[ut,dt]=oe("Popover.Panel"),{close:ht,isPortalled:pt}=fe("Popover.Panel"),ft=`headlessui-focus-sentinel-before-${I$7()}`,mt=`headlessui-focus-sentinel-after-${I$7()}`,gt=reactExports.useRef(null),xt=y$2(gt,rt,jt=>{dt({type:4,panel:jt})}),yt=n$2(gt),vt=I$5();l$5(()=>(dt({type:5,panelId:st}),()=>{dt({type:5,panelId:null})}),[st,dt]);let St=u$3(),Et=St!==null?(St&d$4.Open)===d$4.Open:ut.popoverState===0,wt=o$4(jt=>{var Ft;switch(jt.key){case o.Escape:if(ut.popoverState!==0||!gt.current||yt!=null&&yt.activeElement&&!gt.current.contains(yt.activeElement))return;jt.preventDefault(),jt.stopPropagation(),dt({type:1}),(Ft=ut.button)==null||Ft.focus();break}});reactExports.useEffect(()=>{var jt;nt.static||ut.popoverState===1&&((jt=nt.unmount)==null||jt)&&dt({type:4,panel:null})},[ut.popoverState,nt.unmount,nt.static,dt]),reactExports.useEffect(()=>{if(ut.__demoMode||!lt||ut.popoverState!==0||!gt.current)return;let jt=yt==null?void 0:yt.activeElement;gt.current.contains(jt)||O$1(gt.current,M$3.First)},[ut.__demoMode,lt,gt,ut.popoverState]);let Rt=reactExports.useMemo(()=>({open:ut.popoverState===0,close:ht}),[ut,ht]),Tt={ref:xt,id:st,onKeyDown:wt,onBlur:lt&&ut.popoverState===0?jt=>{var Ft,Lt,Pt,Ot,Nt;let $t=jt.relatedTarget;$t&&gt.current&&((Ft=gt.current)!=null&&Ft.contains($t)||(dt({type:1}),((Pt=(Lt=ut.beforePanelSentinel.current)==null?void 0:Lt.contains)!=null&&Pt.call(Lt,$t)||(Nt=(Ot=ut.afterPanelSentinel.current)==null?void 0:Ot.contains)!=null&&Nt.call(Ot,$t))&&$t.focus({preventScroll:!0})))}:void 0,tabIndex:-1},It=n(),At=o$4(()=>{let jt=gt.current;if(!jt)return;function Ft(){u$5(It.current,{[s$2.Forwards]:()=>{var Lt;O$1(jt,M$3.First)===N$2.Error&&((Lt=ut.afterPanelSentinel.current)==null||Lt.focus())},[s$2.Backwards]:()=>{var Lt;(Lt=ut.button)==null||Lt.focus({preventScroll:!0})}})}Ft()}),Dt=o$4(()=>{let jt=gt.current;if(!jt)return;function Ft(){u$5(It.current,{[s$2.Forwards]:()=>{var Lt;if(!ut.button)return;let Pt=f$5(),Ot=Pt.indexOf(ut.button),Nt=Pt.slice(0,Ot+1),$t=[...Pt.slice(Ot+1),...Nt];for(let Vt of $t.slice())if(Vt.dataset.headlessuiFocusGuard==="true"||(Lt=ut.panel)!=null&&Lt.contains(Vt)){let Ut=$t.indexOf(Vt);Ut!==-1&&$t.splice(Ut,1)}O$1($t,M$3.First,{sorted:!1})},[s$2.Backwards]:()=>{var Lt;O$1(jt,M$3.Previous)===N$2.Error&&((Lt=ut.button)==null||Lt.focus())}})}Ft()});return e$2.createElement(re.Provider,{value:st},Et&&pt&&e$2.createElement(f$4,{id:ft,ref:ut.beforePanelSentinel,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:At}),C$1({mergeRefs:vt,ourProps:Tt,theirProps:ct,slot:Rt,defaultTag:Je,features:Xe,visible:Et,name:"Popover.Panel"}),Et&&pt&&e$2.createElement(f$4,{id:mt,ref:ut.afterPanelSentinel,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Dt}))}let qe$1="div";function ze(nt,rt){let it=reactExports.useRef(null),st=y$2(it,rt),[lt,ct]=reactExports.useState([]),ut=y(),dt=o$4(vt=>{ct(St=>{let Et=St.indexOf(vt);if(Et!==-1){let wt=St.slice();return wt.splice(Et,1),wt}return St})}),ht=o$4(vt=>(ct(St=>[...St,vt]),()=>dt(vt))),pt=o$4(()=>{var vt;let St=o$1(it);if(!St)return!1;let Et=St.activeElement;return(vt=it.current)!=null&&vt.contains(Et)?!0:lt.some(wt=>{var Rt,Tt;return((Rt=St.getElementById(wt.buttonId.current))==null?void 0:Rt.contains(Et))||((Tt=St.getElementById(wt.panelId.current))==null?void 0:Tt.contains(Et))})}),ft=o$4(vt=>{for(let St of lt)St.buttonId.current!==vt&&St.close()}),mt=reactExports.useMemo(()=>({registerPopover:ht,unregisterPopover:dt,isFocusWithinPopoverGroup:pt,closeOthers:ft,mainTreeNodeRef:ut.mainTreeNodeRef}),[ht,dt,pt,ft,ut.mainTreeNodeRef]),gt=reactExports.useMemo(()=>({}),[]),xt=nt,yt={ref:st};return e$2.createElement(Pe$1.Provider,{value:mt},C$1({ourProps:yt,theirProps:xt,slot:gt,defaultTag:qe$1,name:"Popover.Group"}),e$2.createElement(ut.MainTreeNode,null))}let Qe=U$2(Ue),Ze=U$2(Ke),et=U$2($e),tt=U$2(Ye),ot=U$2(ze),Ct=Object.assign(Qe,{Button:Ze,Overlay:et,Panel:tt,Group:ot});function c$1(nt=0){let[rt,it]=reactExports.useState(nt),st=f$3(),lt=reactExports.useCallback(ht=>{st.current&&it(pt=>pt|ht)},[rt,st]),ct=reactExports.useCallback(ht=>!!(rt&ht),[rt]),ut=reactExports.useCallback(ht=>{st.current&&it(pt=>pt&~ht)},[it,st]),dt=reactExports.useCallback(ht=>{st.current&&it(pt=>pt^ht)},[it]);return{flags:rt,addFlag:lt,hasFlag:ct,removeFlag:ut,toggleFlag:dt}}function l(nt){let rt={called:!1};return(...it)=>{if(!rt.called)return rt.called=!0,nt(...it)}}function g(nt,...rt){nt&&rt.length>0&&nt.classList.add(...rt)}function v$1(nt,...rt){nt&&rt.length>0&&nt.classList.remove(...rt)}function b$1(nt,rt){let it=o$3();if(!nt)return it.dispose;let{transitionDuration:st,transitionDelay:lt}=getComputedStyle(nt),[ct,ut]=[st,lt].map(ht=>{let[pt=0]=ht.split(",").filter(Boolean).map(ft=>ft.includes("ms")?parseFloat(ft):parseFloat(ft)*1e3).sort((ft,mt)=>mt-ft);return pt}),dt=ct+ut;if(dt!==0){it.group(pt=>{pt.setTimeout(()=>{rt(),pt.dispose()},dt),pt.addEventListener(nt,"transitionrun",ft=>{ft.target===ft.currentTarget&&pt.dispose()})});let ht=it.addEventListener(nt,"transitionend",pt=>{pt.target===pt.currentTarget&&(rt(),ht())})}else rt();return it.add(()=>rt()),it.dispose}function M$2(nt,rt,it,st){let lt=it?"enter":"leave",ct=o$3(),ut=st!==void 0?l(st):()=>{};lt==="enter"&&(nt.removeAttribute("hidden"),nt.style.display="");let dt=u$5(lt,{enter:()=>rt.enter,leave:()=>rt.leave}),ht=u$5(lt,{enter:()=>rt.enterTo,leave:()=>rt.leaveTo}),pt=u$5(lt,{enter:()=>rt.enterFrom,leave:()=>rt.leaveFrom});return v$1(nt,...rt.base,...rt.enter,...rt.enterTo,...rt.enterFrom,...rt.leave,...rt.leaveFrom,...rt.leaveTo,...rt.entered),g(nt,...rt.base,...dt,...pt),ct.nextFrame(()=>{v$1(nt,...rt.base,...dt,...pt),g(nt,...rt.base,...dt,...ht),b$1(nt,()=>(v$1(nt,...rt.base,...dt),g(nt,...rt.base,...rt.entered),ut()))}),ct.dispose}function D({immediate:nt,container:rt,direction:it,classes:st,onStart:lt,onStop:ct}){let ut=f$3(),dt=p$3(),ht=s$7(it);l$5(()=>{nt&&(ht.current="enter")},[nt]),l$5(()=>{let pt=o$3();dt.add(pt.dispose);let ft=rt.current;if(ft&&ht.current!=="idle"&&ut.current)return pt.dispose(),lt.current(ht.current),pt.add(M$2(ft,st.current,ht.current==="enter",()=>{pt.dispose(),ct.current(ht.current)})),pt.dispose},[it])}function S(nt=""){return nt.split(/\s+/).filter(rt=>rt.length>1)}let I$1=reactExports.createContext(null);I$1.displayName="TransitionContext";var Se=(nt=>(nt.Visible="visible",nt.Hidden="hidden",nt))(Se||{});function ye(){let nt=reactExports.useContext(I$1);if(nt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return nt}function xe(){let nt=reactExports.useContext(M$1);if(nt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return nt}let M$1=reactExports.createContext(null);M$1.displayName="NestingContext";function U(nt){return"children"in nt?U(nt.children):nt.current.filter(({el:rt})=>rt.current!==null).filter(({state:rt})=>rt==="visible").length>0}function se(nt,rt){let it=s$7(nt),st=reactExports.useRef([]),lt=f$3(),ct=p$3(),ut=o$4((xt,yt=v$2.Hidden)=>{let vt=st.current.findIndex(({el:St})=>St===xt);vt!==-1&&(u$5(yt,{[v$2.Unmount](){st.current.splice(vt,1)},[v$2.Hidden](){st.current[vt].state="hidden"}}),ct.microTask(()=>{var St;!U(st)&&lt.current&&((St=it.current)==null||St.call(it))}))}),dt=o$4(xt=>{let yt=st.current.find(({el:vt})=>vt===xt);return yt?yt.state!=="visible"&&(yt.state="visible"):st.current.push({el:xt,state:"visible"}),()=>ut(xt,v$2.Unmount)}),ht=reactExports.useRef([]),pt=reactExports.useRef(Promise.resolve()),ft=reactExports.useRef({enter:[],leave:[],idle:[]}),mt=o$4((xt,yt,vt)=>{ht.current.splice(0),rt&&(rt.chains.current[yt]=rt.chains.current[yt].filter(([St])=>St!==xt)),rt==null||rt.chains.current[yt].push([xt,new Promise(St=>{ht.current.push(St)})]),rt==null||rt.chains.current[yt].push([xt,new Promise(St=>{Promise.all(ft.current[yt].map(([Et,wt])=>wt)).then(()=>St())})]),yt==="enter"?pt.current=pt.current.then(()=>rt==null?void 0:rt.wait.current).then(()=>vt(yt)):vt(yt)}),gt=o$4((xt,yt,vt)=>{Promise.all(ft.current[yt].splice(0).map(([St,Et])=>Et)).then(()=>{var St;(St=ht.current.shift())==null||St()}).then(()=>vt(yt))});return reactExports.useMemo(()=>({children:st,register:dt,unregister:ut,onStart:mt,onStop:gt,wait:pt,chains:ft}),[dt,ut,st,mt,gt,ft,pt])}function Ne(){}let Pe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ae(nt){var rt;let it={};for(let st of Pe)it[st]=(rt=nt[st])!=null?rt:Ne;return it}function Re(nt){let rt=reactExports.useRef(ae(nt));return reactExports.useEffect(()=>{rt.current=ae(nt)},[nt]),rt}let De="div",le=O.RenderStrategy;function He(nt,rt){var it,st;let{beforeEnter:lt,afterEnter:ct,beforeLeave:ut,afterLeave:dt,enter:ht,enterFrom:pt,enterTo:ft,entered:mt,leave:gt,leaveFrom:xt,leaveTo:yt,...vt}=nt,St=reactExports.useRef(null),Et=y$2(St,rt),wt=(it=vt.unmount)==null||it?v$2.Unmount:v$2.Hidden,{show:Rt,appear:Tt,initial:It}=ye(),[At,Dt]=reactExports.useState(Rt?"visible":"hidden"),jt=xe(),{register:Ft,unregister:Lt}=jt;reactExports.useEffect(()=>Ft(St),[Ft,St]),reactExports.useEffect(()=>{if(wt===v$2.Hidden&&St.current){if(Rt&&At!=="visible"){Dt("visible");return}return u$5(At,{hidden:()=>Lt(St),visible:()=>Ft(St)})}},[At,St,Ft,Lt,Rt,wt]);let Pt=s$7({base:S(vt.className),enter:S(ht),enterFrom:S(pt),enterTo:S(ft),entered:S(mt),leave:S(gt),leaveFrom:S(xt),leaveTo:S(yt)}),Ot=Re({beforeEnter:lt,afterEnter:ct,beforeLeave:ut,afterLeave:dt}),Nt=l$4();reactExports.useEffect(()=>{if(Nt&&At==="visible"&&St.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[St,At,Nt]);let $t=It&&!Tt,Vt=Tt&&Rt&&It,Ut=!Nt||$t?"idle":Rt?"enter":"leave",zt=c$1(0),Bt=o$4(tr=>u$5(tr,{enter:()=>{zt.addFlag(d$4.Opening),Ot.current.beforeEnter()},leave:()=>{zt.addFlag(d$4.Closing),Ot.current.beforeLeave()},idle:()=>{}})),Ht=o$4(tr=>u$5(tr,{enter:()=>{zt.removeFlag(d$4.Opening),Ot.current.afterEnter()},leave:()=>{zt.removeFlag(d$4.Closing),Ot.current.afterLeave()},idle:()=>{}})),Gt=se(()=>{Dt("hidden"),Lt(St)},jt),Kt=reactExports.useRef(!1);D({immediate:Vt,container:St,classes:Pt,direction:Ut,onStart:s$7(tr=>{Kt.current=!0,Gt.onStart(St,tr,Bt)}),onStop:s$7(tr=>{Kt.current=!1,Gt.onStop(St,tr,Ht),tr==="leave"&&!U(Gt)&&(Dt("hidden"),Lt(St))})});let Xt=vt,or={ref:Et};return Vt?Xt={...Xt,className:t$4(vt.className,...Pt.current.enter,...Pt.current.enterFrom)}:Kt.current&&(Xt.className=t$4(vt.className,(st=St.current)==null?void 0:st.className),Xt.className===""&&delete Xt.className),e$2.createElement(M$1.Provider,{value:Gt},e$2.createElement(s$3,{value:u$5(At,{visible:d$4.Open,hidden:d$4.Closed})|zt.flags},C$1({ourProps:or,theirProps:Xt,defaultTag:De,features:le,visible:At==="visible",name:"Transition.Child"})))}function Fe(nt,rt){let{show:it,appear:st=!1,unmount:lt=!0,...ct}=nt,ut=reactExports.useRef(null),dt=y$2(ut,rt);l$4();let ht=u$3();if(it===void 0&&ht!==null&&(it=(ht&d$4.Open)===d$4.Open),![!0,!1].includes(it))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[pt,ft]=reactExports.useState(it?"visible":"hidden"),mt=se(()=>{ft("hidden")}),[gt,xt]=reactExports.useState(!0),yt=reactExports.useRef([it]);l$5(()=>{gt!==!1&&yt.current[yt.current.length-1]!==it&&(yt.current.push(it),xt(!1))},[yt,it]);let vt=reactExports.useMemo(()=>({show:it,appear:st,initial:gt}),[it,st,gt]);reactExports.useEffect(()=>{if(it)ft("visible");else if(!U(mt))ft("hidden");else{let Rt=ut.current;if(!Rt)return;let Tt=Rt.getBoundingClientRect();Tt.x===0&&Tt.y===0&&Tt.width===0&&Tt.height===0&&ft("hidden")}},[it,mt]);let St={unmount:lt},Et=o$4(()=>{var Rt;gt&&xt(!1),(Rt=nt.beforeEnter)==null||Rt.call(nt)}),wt=o$4(()=>{var Rt;gt&&xt(!1),(Rt=nt.beforeLeave)==null||Rt.call(nt)});return e$2.createElement(M$1.Provider,{value:mt},e$2.createElement(I$1.Provider,{value:vt},C$1({ourProps:{...St,as:reactExports.Fragment,children:e$2.createElement(ue,{ref:dt,...St,...ct,beforeEnter:Et,beforeLeave:wt})},theirProps:{},defaultTag:reactExports.Fragment,features:le,visible:pt==="visible",name:"Transition"})))}function _e(nt,rt){let it=reactExports.useContext(I$1)!==null,st=u$3()!==null;return e$2.createElement(e$2.Fragment,null,!it&&st?e$2.createElement(q,{ref:rt,...nt}):e$2.createElement(ue,{ref:rt,...nt}))}let q=U$2(Fe),ue=U$2(He),Le=U$2(_e),qe=Object.assign(q,{Child:Le,Root:q});function useWindowSize(){const[nt,rt]=reactExports.useState({width:void 0,height:void 0});return reactExports.useEffect(()=>{function it(){rt({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",it),it(),()=>window.removeEventListener("resize",it)},[]),nt}const ConfirmBox=({successText:nt,rejectText:rt,onSuccess:it,open:st,onReject:lt,title:ct,subTitle:ut,subTitleColor:dt})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(qe,{appear:!0,show:st,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative z-10",onClose:()=>{},children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-full text-center",children:jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:jsxRuntimeExports.jsxs(_t.Panel,{className:"w-11/12 max-w-md p-4 overflow-hidden text-left align-middle transition-all transform rounded shadow-xl bg-gray-750",children:[jsxRuntimeExports.jsx(_t.Title,{className:"text-base font-medium text-white ",children:ct}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("p",{className:"text-base",style:{color:dt||"#9FA0A7"},children:ut})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end mt-6",children:[rt&&jsxRuntimeExports.jsx("button",{type:"button",className:"px-4 py-2 mr-2 text-sm font-medium text-white rounded hover:bg-gray-700 ",onClick:lt,children:rt}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-transparent border border-white rounded hover:bg-gray-700",onClick:it,children:nt})]})]})})})})]})})}),AudioAnalyser=({audioTrack:nt})=>{const rt=reactExports.useRef(),it=reactExports.useRef(),[st,lt]=reactExports.useState(null),ct=dt=>{const ht=new MediaStream([dt]),pt=new AudioContext,ft=pt.createMediaStreamSource(ht),mt=pt.createAnalyser();mt.fftSize=512,mt.minDecibels=-127,mt.maxDecibels=0,mt.smoothingTimeConstant=.4,ft.connect(mt);const gt=new Uint8Array(mt.frequencyBinCount),xt=()=>{mt.getByteFrequencyData(gt);const vt=gt.reduce((St,Et)=>St+Et)/gt.length;lt(vt)};it.current=setInterval(xt,100)},ut=()=>{clearInterval(it.current)};return reactExports.useEffect(()=>{rt.current=nt,nt?ct(nt):ut()},[nt]),jsxRuntimeExports.jsx("div",{className:"relative w-20 h-[100px]",children:[{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:100,borderTopRightRadius:100,top:0,alignItems:"flex-end"},{borderBottomLeftRadius:100,borderBottomRightRadius:100,borderTopLeftRadius:0,borderTopRightRadius:0,top:"50%",alignItems:"flex-start"}].map(({alignItems:dt,top:ht,borderBottomLeftRadius:pt,borderBottomRightRadius:ft,borderTopLeftRadius:mt,borderTopRightRadius:gt},xt)=>jsxRuntimeExports.jsx("div",{className:"h-1/2 flex justify-evenly left-0 right-0 absolute",style:{alignItems:dt,top:ht},children:[40,70,100,100,70,40].map((yt,vt)=>jsxRuntimeExports.jsx("div",{style:{borderBottomLeftRadius:pt,borderBottomRightRadius:ft,borderTopLeftRadius:mt,borderTopRightRadius:gt,backgroundColor:"#1178F8",width:80/12,height:`${st/256*yt}%`,transition:"all 50ms",transitionTimingFunction:"ease-in"}},`audio_analyzer_j_${vt}`))},`audio_analyzer_i_${xt}`))})};function SettingDialogueBox({open:nt,onClose:rt,popupVideoPlayerRef:it,webcams:st,mics:lt,setting:ct,setSetting:ut,setSelectedMic:dt,setSelectedWebcam:ht,changeWebcam:pt,changeMic:ft,videoTrack:mt,audioTrack:gt}){const[xt,yt]=reactExports.useState(null),[vt,St]=reactExports.useState(null),[Et,wt]=reactExports.useState(!1),[Rt,Tt]=reactExports.useState(0),It=reactExports.useRef(),{width:At}=useWindowSize();reactExports.useEffect(()=>{It.current&&It.current.offsetHeight!==Rt&&Tt(It.current.offsetHeight)},[At]);const Dt=(Ft,Lt)=>{ut(Lt)},jt=()=>{rt()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(qe,{appear:!0,show:nt,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative z-10",onClose:jt,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-full p-4 text-center",children:jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:jsxRuntimeExports.jsxs(_t.Panel,{className:"w-full max-w-2xl p-6 overflow-hidden text-center align-middle transition-all transform bg-gray-800 rounded shadow-xl",children:[jsxRuntimeExports.jsx(_t.Title,{as:"h5",className:"text-lg font-medium leading-6 text-white",children:"세팅"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1  flex-col overflow-hidden xl:p-[2px] lg:p-[5px] p-[2px]",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 focus-visible:border-none",children:jsxRuntimeExports.jsx("button",{onClick:()=>{jt()},className:"focus-visible:border-none",children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"w-6 h-6 text-white"})})})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center flex-1",children:jsxRuntimeExports.jsx("div",{className:"mt-10",children:jsxRuntimeExports.jsx("div",{children:[{value:"audio",label:"오디오"},{value:"video",label:"비디오"}].map(({value:Ft,label:Lt},Pt)=>Lt==="오디오"||Lt==="비디오"?jsxRuntimeExports.jsx("button",{className:`inline-flex items-center justify-center px-4 py-2 border ${ct===Ft?"bg-teal-700 border-transparent border-teal-700":"border-gray-100"}  text-sm font-medium rounded-sm text-white bg-gray-750`,onClick:()=>{Dt(null,Ft)},children:Lt},Pt):null)})})}),ct==="audio"?jsxRuntimeExports.jsx("div",{ref:It,children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-col",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-7",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold text-left text-white",children:"마이크"}),jsxRuntimeExports.jsx("div",{className:"w-full mt-4 text-left",children:jsxRuntimeExports.jsx(Ct,{className:"relative",children:({close:Ft})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"flex w-full ",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center justify-between w-full px-2 py-3 text-white border border-gray-300 rounded",children:[xt||"선택",jsxRuntimeExports.jsx(ChevronDownIcon$3,{className:"w-4 h-4",style:{color:"white"}})]})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-800 py-1",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:lt.map((Lt,Pt)=>(Lt==null?void 0:Lt.kind)==="audioinput"&&jsxRuntimeExports.jsx("div",{className:`px-3 py-1 my-1 pl-6 text-white text-left 
                                                            `,children:jsxRuntimeExports.jsx("button",{className:`flex flex-1 w-full 
                                                              `,value:Lt==null?void 0:Lt.deviceId,onClick:()=>{yt(Lt==null?void 0:Lt.label),dt(Ot=>({...Ot,id:Lt==null?void 0:Lt.deviceId})),ft(Lt==null?void 0:Lt.deviceId),Ft()},children:Lt!=null&&Lt.label?Lt==null?void 0:Lt.label:`Mic ${Pt+1}`},`mics_${Pt}`)}))})})})})})})]})})})]})}),jsxRuntimeExports.jsx("div",{class:"col-span-5",children:jsxRuntimeExports.jsx("div",{className:"relative p-4 mt-0 md:mt-10 ",children:jsxRuntimeExports.jsx("div",{className:"relative flex flex-1 w-1/2 overflow-hidden rounded md:w-full h-1/2 md:h-auto",style:{paddingTop:"56.25%"},children:jsxRuntimeExports.jsx("div",{className:"top-0 bottom-0 left-0 right-0 flex flex-col items-start overflow-hidden rounded-sm md:absolute",children:jsxRuntimeExports.jsx(AudioAnalyser,{audioTrack:gt})})})})})]})})})}):ct==="video"?jsxRuntimeExports.jsx("div",{ref:It,children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-col",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-7",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold text-left text-white",children:"카메라"}),jsxRuntimeExports.jsx("div",{className:"w-full mt-4 text-left",children:jsxRuntimeExports.jsx(Ct,{className:"relative",children:({close:Ft})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"flex w-full ",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center justify-between w-full px-2 py-3 text-white border border-gray-300 rounded",children:[vt||"선택",jsxRuntimeExports.jsx(ChevronDownIcon$3,{className:"w-4 h-4",style:{color:"white"}})]})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-800 py-1",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:st.map((Lt,Pt)=>(Lt==null?void 0:Lt.kind)==="videoinput"&&jsxRuntimeExports.jsxs("div",{className:`px-3 py-1 my-1 pl-6 text-white text-left 
                                                            `,children:[jsxRuntimeExports.jsx("button",{className:`flex flex-1 w-full 
                                                              `,value:Lt==null?void 0:Lt.deviceId,onClick:()=>{St(Lt==null?void 0:Lt.label),ht(Ot=>({...Ot,id:Lt==null?void 0:Lt.deviceId})),pt(Lt==null?void 0:Lt.deviceId),Ft()},children:(Lt==null?void 0:Lt.label)===""?`Webcam ${Pt+1}`:Lt==null?void 0:Lt.label},`webcam_${Pt}`),jsxRuntimeExports.jsx("hr",{})]}))})})})})})})]})})})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-5",children:jsxRuntimeExports.jsx("div",{className:"relative p-4 mt-0 md:mt-10 ",children:jsxRuntimeExports.jsx("div",{className:"relative flex flex-1 w-1/2 overflow-hidden rounded md:w-full h-1/2 md:h-auto",style:{paddingTop:"56.25%"},children:jsxRuntimeExports.jsx("div",{className:"top-0 bottom-0 left-0 right-0 flex flex-col items-start overflow-hidden rounded-sm md:absolute",children:jsxRuntimeExports.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:it,controls:!1,style:{backgroundColor:"#1c1c1c"},className:"rounded-md h-full w-full object-cover flip"})})})})})]})})})}):null]})]})})})})]})}),jsxRuntimeExports.jsx(ConfirmBox,{open:Et,title:"Mic or webcam not available",subTitle:"Please connect a mic and webcam to speak and share your video in the meeting. You can also join without them.",successText:"DISMISS",onSuccess:()=>{wt(!1)}})]})}var reactResponsive={exports:{}};(function(nt,rt){(function(st,lt){nt.exports=lt(reactExports)})(commonjsGlobal,it=>(()=>{var st={"./node_modules/css-mediaquery/index.js":(dt,ht)=>{ht.match=yt,ht.parse=vt;var pt=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,ft=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,mt=/^(?:(min|max)-)?(.+)/,gt=/(em|rem|px|cm|mm|in|pt|pc)?$/,xt=/(dpi|dpcm|dppx)?$/;function yt(Rt,Tt){return vt(Rt).some(function(It){var At=It.inverse,Dt=It.type==="all"||Tt.type===It.type;if(Dt&&At||!(Dt||At))return!1;var jt=It.expressions.every(function(Ft){var Lt=Ft.feature,Pt=Ft.modifier,Ot=Ft.value,Nt=Tt[Lt];if(!Nt)return!1;switch(Lt){case"orientation":case"scan":return Nt.toLowerCase()===Ot.toLowerCase();case"width":case"height":case"device-width":case"device-height":Ot=wt(Ot),Nt=wt(Nt);break;case"resolution":Ot=Et(Ot),Nt=Et(Nt);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":Ot=St(Ot),Nt=St(Nt);break;case"grid":case"color":case"color-index":case"monochrome":Ot=parseInt(Ot,10)||1,Nt=parseInt(Nt,10)||0;break}switch(Pt){case"min":return Nt>=Ot;case"max":return Nt<=Ot;default:return Nt===Ot}});return jt&&!At||!jt&&At})}function vt(Rt){return Rt.split(",").map(function(Tt){Tt=Tt.trim();var It=Tt.match(pt),At=It[1],Dt=It[2],jt=It[3]||"",Ft={};return Ft.inverse=!!At&&At.toLowerCase()==="not",Ft.type=Dt?Dt.toLowerCase():"all",jt=jt.match(/\([^\)]+\)/g)||[],Ft.expressions=jt.map(function(Lt){var Pt=Lt.match(ft),Ot=Pt[1].toLowerCase().match(mt);return{modifier:Ot[1],feature:Ot[2],value:Pt[2]}}),Ft})}function St(Rt){var Tt=Number(Rt),It;return Tt||(It=Rt.match(/^(\d+)\s*\/\s*(\d+)$/),Tt=It[1]/It[2]),Tt}function Et(Rt){var Tt=parseFloat(Rt),It=String(Rt).match(xt)[1];switch(It){case"dpcm":return Tt/2.54;case"dppx":return Tt*96;default:return Tt}}function wt(Rt){var Tt=parseFloat(Rt),It=String(Rt).match(gt)[1];switch(It){case"em":return Tt*16;case"rem":return Tt*16;case"cm":return Tt*96/2.54;case"mm":return Tt*96/2.54/10;case"in":return Tt*96;case"pt":return Tt*72;case"pc":return Tt*72/12;default:return Tt}}},"./node_modules/hyphenate-style-name/index.js":(dt,ht,pt)=>{pt.r(ht),pt.d(ht,{default:()=>vt});var ft=/[A-Z]/g,mt=/^ms-/,gt={};function xt(St){return"-"+St.toLowerCase()}function yt(St){if(gt.hasOwnProperty(St))return gt[St];var Et=St.replace(ft,xt);return gt[St]=mt.test(Et)?"-"+Et:Et}const vt=yt},"./node_modules/matchmediaquery/index.js":(dt,ht,pt)=>{var ft=pt("./node_modules/css-mediaquery/index.js").match,mt=typeof window<"u"?window.matchMedia:null;function gt(yt,vt,St){var Et=this;if(mt&&!St){var wt=mt.call(window,yt);this.matches=wt.matches,this.media=wt.media,wt.addListener(It)}else this.matches=ft(yt,vt),this.media=yt;this.addListener=Rt,this.removeListener=Tt,this.dispose=At;function Rt(Dt){wt&&wt.addListener(Dt)}function Tt(Dt){wt&&wt.removeListener(Dt)}function It(Dt){Et.matches=Dt.matches,Et.media=Dt.media}function At(){wt&&wt.removeListener(It)}}function xt(yt,vt,St){return new gt(yt,vt,St)}dt.exports=xt},"./node_modules/object-assign/index.js":dt=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ht=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;function mt(xt){if(xt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(xt)}function gt(){try{if(!Object.assign)return!1;var xt=new String("abc");if(xt[5]="de",Object.getOwnPropertyNames(xt)[0]==="5")return!1;for(var yt={},vt=0;vt<10;vt++)yt["_"+String.fromCharCode(vt)]=vt;var St=Object.getOwnPropertyNames(yt).map(function(wt){return yt[wt]});if(St.join("")!=="0123456789")return!1;var Et={};return"abcdefghijklmnopqrst".split("").forEach(function(wt){Et[wt]=wt}),Object.keys(Object.assign({},Et)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}dt.exports=gt()?Object.assign:function(xt,yt){for(var vt,St=mt(xt),Et,wt=1;wt<arguments.length;wt++){vt=Object(arguments[wt]);for(var Rt in vt)pt.call(vt,Rt)&&(St[Rt]=vt[Rt]);if(ht){Et=ht(vt);for(var Tt=0;Tt<Et.length;Tt++)ft.call(vt,Et[Tt])&&(St[Et[Tt]]=vt[Et[Tt]])}}return St}},"./node_modules/prop-types/checkPropTypes.js":(dt,ht,pt)=>{var ft=function(){};{var mt=pt("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),gt={},xt=pt("./node_modules/prop-types/lib/has.js");ft=function(vt){var St="Warning: "+vt;typeof console<"u"&&console.error(St);try{throw new Error(St)}catch{}}}function yt(vt,St,Et,wt,Rt){for(var Tt in vt)if(xt(vt,Tt)){var It;try{if(typeof vt[Tt]!="function"){var At=Error((wt||"React class")+": "+Et+" type `"+Tt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof vt[Tt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw At.name="Invariant Violation",At}It=vt[Tt](St,Tt,wt,Et,null,mt)}catch(jt){It=jt}if(It&&!(It instanceof Error)&&ft((wt||"React class")+": type specification of "+Et+" `"+Tt+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof It+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),It instanceof Error&&!(It.message in gt)){gt[It.message]=!0;var Dt=Rt?Rt():"";ft("Failed "+Et+" type: "+It.message+(Dt??""))}}}yt.resetWarningCache=function(){gt={}},dt.exports=yt},"./node_modules/prop-types/factoryWithTypeCheckers.js":(dt,ht,pt)=>{var ft=pt("./node_modules/react-is/index.js"),mt=pt("./node_modules/object-assign/index.js"),gt=pt("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),xt=pt("./node_modules/prop-types/lib/has.js"),yt=pt("./node_modules/prop-types/checkPropTypes.js"),vt=function(){};vt=function(Et){var wt="Warning: "+Et;typeof console<"u"&&console.error(wt);try{throw new Error(wt)}catch{}};function St(){return null}dt.exports=function(Et,wt){var Rt=typeof Symbol=="function"&&Symbol.iterator,Tt="@@iterator";function It(hr){var gr=hr&&(Rt&&hr[Rt]||hr[Tt]);if(typeof gr=="function")return gr}var At="<<anonymous>>",Dt={array:Pt("array"),bigint:Pt("bigint"),bool:Pt("boolean"),func:Pt("function"),number:Pt("number"),object:Pt("object"),string:Pt("string"),symbol:Pt("symbol"),any:Ot(),arrayOf:Nt,element:$t(),elementType:Vt(),instanceOf:Ut,node:Gt(),objectOf:Bt,oneOf:zt,oneOfType:Ht,shape:Xt,exact:or};function jt(hr,gr){return hr===gr?hr!==0||1/hr===1/gr:hr!==hr&&gr!==gr}function Ft(hr,gr){this.message=hr,this.data=gr&&typeof gr=="object"?gr:{},this.stack=""}Ft.prototype=Error.prototype;function Lt(hr){var gr={},lr=0;function Ir(Fr,$r,hn,Zr,Qt,Jt,pr){if(Zr=Zr||At,Jt=Jt||hn,pr!==gt){if(wt){var Vr=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Vr.name="Invariant Violation",Vr}else if(typeof console<"u"){var Wr=Zr+":"+hn;!gr[Wr]&&lr<3&&(vt("You are manually calling a React.PropTypes validation function for the `"+Jt+"` prop on `"+Zr+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),gr[Wr]=!0,lr++)}}return $r[hn]==null?Fr?$r[hn]===null?new Ft("The "+Qt+" `"+Jt+"` is marked as required "+("in `"+Zr+"`, but its value is `null`.")):new Ft("The "+Qt+" `"+Jt+"` is marked as required in "+("`"+Zr+"`, but its value is `undefined`.")):null:hr($r,hn,Zr,Qt,Jt)}var wr=Ir.bind(null,!1);return wr.isRequired=Ir.bind(null,!0),wr}function Pt(hr){function gr(lr,Ir,wr,Fr,$r,hn){var Zr=lr[Ir],Qt=fr(Zr);if(Qt!==hr){var Jt=Sr(Zr);return new Ft("Invalid "+Fr+" `"+$r+"` of type "+("`"+Jt+"` supplied to `"+wr+"`, expected ")+("`"+hr+"`."),{expectedType:hr})}return null}return Lt(gr)}function Ot(){return Lt(St)}function Nt(hr){function gr(lr,Ir,wr,Fr,$r){if(typeof hr!="function")return new Ft("Property `"+$r+"` of component `"+wr+"` has invalid PropType notation inside arrayOf.");var hn=lr[Ir];if(!Array.isArray(hn)){var Zr=fr(hn);return new Ft("Invalid "+Fr+" `"+$r+"` of type "+("`"+Zr+"` supplied to `"+wr+"`, expected an array."))}for(var Qt=0;Qt<hn.length;Qt++){var Jt=hr(hn,Qt,wr,Fr,$r+"["+Qt+"]",gt);if(Jt instanceof Error)return Jt}return null}return Lt(gr)}function $t(){function hr(gr,lr,Ir,wr,Fr){var $r=gr[lr];if(!Et($r)){var hn=fr($r);return new Ft("Invalid "+wr+" `"+Fr+"` of type "+("`"+hn+"` supplied to `"+Ir+"`, expected a single ReactElement."))}return null}return Lt(hr)}function Vt(){function hr(gr,lr,Ir,wr,Fr){var $r=gr[lr];if(!ft.isValidElementType($r)){var hn=fr($r);return new Ft("Invalid "+wr+" `"+Fr+"` of type "+("`"+hn+"` supplied to `"+Ir+"`, expected a single ReactElement type."))}return null}return Lt(hr)}function Ut(hr){function gr(lr,Ir,wr,Fr,$r){if(!(lr[Ir]instanceof hr)){var hn=hr.name||At,Zr=mr(lr[Ir]);return new Ft("Invalid "+Fr+" `"+$r+"` of type "+("`"+Zr+"` supplied to `"+wr+"`, expected ")+("instance of `"+hn+"`."))}return null}return Lt(gr)}function zt(hr){if(!Array.isArray(hr))return arguments.length>1?vt("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):vt("Invalid argument supplied to oneOf, expected an array."),St;function gr(lr,Ir,wr,Fr,$r){for(var hn=lr[Ir],Zr=0;Zr<hr.length;Zr++)if(jt(hn,hr[Zr]))return null;var Qt=JSON.stringify(hr,function(pr,Vr){var Wr=Sr(Vr);return Wr==="symbol"?String(Vr):Vr});return new Ft("Invalid "+Fr+" `"+$r+"` of value `"+String(hn)+"` "+("supplied to `"+wr+"`, expected one of "+Qt+"."))}return Lt(gr)}function Bt(hr){function gr(lr,Ir,wr,Fr,$r){if(typeof hr!="function")return new Ft("Property `"+$r+"` of component `"+wr+"` has invalid PropType notation inside objectOf.");var hn=lr[Ir],Zr=fr(hn);if(Zr!=="object")return new Ft("Invalid "+Fr+" `"+$r+"` of type "+("`"+Zr+"` supplied to `"+wr+"`, expected an object."));for(var Qt in hn)if(xt(hn,Qt)){var Jt=hr(hn,Qt,wr,Fr,$r+"."+Qt,gt);if(Jt instanceof Error)return Jt}return null}return Lt(gr)}function Ht(hr){if(!Array.isArray(hr))return vt("Invalid argument supplied to oneOfType, expected an instance of array."),St;for(var gr=0;gr<hr.length;gr++){var lr=hr[gr];if(typeof lr!="function")return vt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+vr(lr)+" at index "+gr+"."),St}function Ir(wr,Fr,$r,hn,Zr){for(var Qt=[],Jt=0;Jt<hr.length;Jt++){var pr=hr[Jt],Vr=pr(wr,Fr,$r,hn,Zr,gt);if(Vr==null)return null;Vr.data&&xt(Vr.data,"expectedType")&&Qt.push(Vr.data.expectedType)}var Wr=Qt.length>0?", expected one of type ["+Qt.join(", ")+"]":"";return new Ft("Invalid "+hn+" `"+Zr+"` supplied to "+("`"+$r+"`"+Wr+"."))}return Lt(Ir)}function Gt(){function hr(gr,lr,Ir,wr,Fr){return tr(gr[lr])?null:new Ft("Invalid "+wr+" `"+Fr+"` supplied to "+("`"+Ir+"`, expected a ReactNode."))}return Lt(hr)}function Kt(hr,gr,lr,Ir,wr){return new Ft((hr||"React class")+": "+gr+" type `"+lr+"."+Ir+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+wr+"`.")}function Xt(hr){function gr(lr,Ir,wr,Fr,$r){var hn=lr[Ir],Zr=fr(hn);if(Zr!=="object")return new Ft("Invalid "+Fr+" `"+$r+"` of type `"+Zr+"` "+("supplied to `"+wr+"`, expected `object`."));for(var Qt in hr){var Jt=hr[Qt];if(typeof Jt!="function")return Kt(wr,Fr,$r,Qt,Sr(Jt));var pr=Jt(hn,Qt,wr,Fr,$r+"."+Qt,gt);if(pr)return pr}return null}return Lt(gr)}function or(hr){function gr(lr,Ir,wr,Fr,$r){var hn=lr[Ir],Zr=fr(hn);if(Zr!=="object")return new Ft("Invalid "+Fr+" `"+$r+"` of type `"+Zr+"` "+("supplied to `"+wr+"`, expected `object`."));var Qt=mt({},lr[Ir],hr);for(var Jt in Qt){var pr=hr[Jt];if(xt(hr,Jt)&&typeof pr!="function")return Kt(wr,Fr,$r,Jt,Sr(pr));if(!pr)return new Ft("Invalid "+Fr+" `"+$r+"` key `"+Jt+"` supplied to `"+wr+"`.\nBad object: "+JSON.stringify(lr[Ir],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(hr),null,"  "));var Vr=pr(hn,Jt,wr,Fr,$r+"."+Jt,gt);if(Vr)return Vr}return null}return Lt(gr)}function tr(hr){switch(typeof hr){case"number":case"string":case"undefined":return!0;case"boolean":return!hr;case"object":if(Array.isArray(hr))return hr.every(tr);if(hr===null||Et(hr))return!0;var gr=It(hr);if(gr){var lr=gr.call(hr),Ir;if(gr!==hr.entries){for(;!(Ir=lr.next()).done;)if(!tr(Ir.value))return!1}else for(;!(Ir=lr.next()).done;){var wr=Ir.value;if(wr&&!tr(wr[1]))return!1}}else return!1;return!0;default:return!1}}function dr(hr,gr){return hr==="symbol"?!0:gr?gr["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&gr instanceof Symbol:!1}function fr(hr){var gr=typeof hr;return Array.isArray(hr)?"array":hr instanceof RegExp?"object":dr(gr,hr)?"symbol":gr}function Sr(hr){if(typeof hr>"u"||hr===null)return""+hr;var gr=fr(hr);if(gr==="object"){if(hr instanceof Date)return"date";if(hr instanceof RegExp)return"regexp"}return gr}function vr(hr){var gr=Sr(hr);switch(gr){case"array":case"object":return"an "+gr;case"boolean":case"date":case"regexp":return"a "+gr;default:return gr}}function mr(hr){return!hr.constructor||!hr.constructor.name?At:hr.constructor.name}return Dt.checkPropTypes=yt,Dt.resetWarningCache=yt.resetWarningCache,Dt.PropTypes=Dt,Dt}},"./node_modules/prop-types/index.js":(dt,ht,pt)=>{{var ft=pt("./node_modules/react-is/index.js"),mt=!0;dt.exports=pt("./node_modules/prop-types/factoryWithTypeCheckers.js")(ft.isElement,mt)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":dt=>{var ht="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";dt.exports=ht},"./node_modules/prop-types/lib/has.js":dt=>{dt.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(dt,ht)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var pt=typeof Symbol=="function"&&Symbol.for,ft=pt?Symbol.for("react.element"):60103,mt=pt?Symbol.for("react.portal"):60106,gt=pt?Symbol.for("react.fragment"):60107,xt=pt?Symbol.for("react.strict_mode"):60108,yt=pt?Symbol.for("react.profiler"):60114,vt=pt?Symbol.for("react.provider"):60109,St=pt?Symbol.for("react.context"):60110,Et=pt?Symbol.for("react.async_mode"):60111,wt=pt?Symbol.for("react.concurrent_mode"):60111,Rt=pt?Symbol.for("react.forward_ref"):60112,Tt=pt?Symbol.for("react.suspense"):60113,It=pt?Symbol.for("react.suspense_list"):60120,At=pt?Symbol.for("react.memo"):60115,Dt=pt?Symbol.for("react.lazy"):60116,jt=pt?Symbol.for("react.block"):60121,Ft=pt?Symbol.for("react.fundamental"):60117,Lt=pt?Symbol.for("react.responder"):60118,Pt=pt?Symbol.for("react.scope"):60119;function Ot(pr){return typeof pr=="string"||typeof pr=="function"||pr===gt||pr===wt||pr===yt||pr===xt||pr===Tt||pr===It||typeof pr=="object"&&pr!==null&&(pr.$$typeof===Dt||pr.$$typeof===At||pr.$$typeof===vt||pr.$$typeof===St||pr.$$typeof===Rt||pr.$$typeof===Ft||pr.$$typeof===Lt||pr.$$typeof===Pt||pr.$$typeof===jt)}function Nt(pr){if(typeof pr=="object"&&pr!==null){var Vr=pr.$$typeof;switch(Vr){case ft:var Wr=pr.type;switch(Wr){case Et:case wt:case gt:case yt:case xt:case Tt:return Wr;default:var zr=Wr&&Wr.$$typeof;switch(zr){case St:case Rt:case Dt:case At:case vt:return zr;default:return Vr}}case mt:return Vr}}}var $t=Et,Vt=wt,Ut=St,zt=vt,Bt=ft,Ht=Rt,Gt=gt,Kt=Dt,Xt=At,or=mt,tr=yt,dr=xt,fr=Tt,Sr=!1;function vr(pr){return Sr||(Sr=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),mr(pr)||Nt(pr)===Et}function mr(pr){return Nt(pr)===wt}function hr(pr){return Nt(pr)===St}function gr(pr){return Nt(pr)===vt}function lr(pr){return typeof pr=="object"&&pr!==null&&pr.$$typeof===ft}function Ir(pr){return Nt(pr)===Rt}function wr(pr){return Nt(pr)===gt}function Fr(pr){return Nt(pr)===Dt}function $r(pr){return Nt(pr)===At}function hn(pr){return Nt(pr)===mt}function Zr(pr){return Nt(pr)===yt}function Qt(pr){return Nt(pr)===xt}function Jt(pr){return Nt(pr)===Tt}ht.AsyncMode=$t,ht.ConcurrentMode=Vt,ht.ContextConsumer=Ut,ht.ContextProvider=zt,ht.Element=Bt,ht.ForwardRef=Ht,ht.Fragment=Gt,ht.Lazy=Kt,ht.Memo=Xt,ht.Portal=or,ht.Profiler=tr,ht.StrictMode=dr,ht.Suspense=fr,ht.isAsyncMode=vr,ht.isConcurrentMode=mr,ht.isContextConsumer=hr,ht.isContextProvider=gr,ht.isElement=lr,ht.isForwardRef=Ir,ht.isFragment=wr,ht.isLazy=Fr,ht.isMemo=$r,ht.isPortal=hn,ht.isProfiler=Zr,ht.isStrictMode=Qt,ht.isSuspense=Jt,ht.isValidElementType=Ot,ht.typeOf=Nt})()},"./node_modules/react-is/index.js":(dt,ht,pt)=>{dt.exports=pt("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(dt,ht,pt)=>{pt.r(ht),pt.d(ht,{shallowEqualArrays:()=>mt,shallowEqualObjects:()=>ft});function ft(gt,xt){if(gt===xt)return!0;if(!gt||!xt)return!1;var yt=Object.keys(gt),vt=Object.keys(xt),St=yt.length;if(vt.length!==St)return!1;for(var Et=0;Et<St;Et++){var wt=yt[Et];if(gt[wt]!==xt[wt]||!Object.prototype.hasOwnProperty.call(xt,wt))return!1}return!0}function mt(gt,xt){if(gt===xt)return!0;if(!gt||!xt)return!1;var yt=gt.length;if(xt.length!==yt)return!1;for(var vt=0;vt<yt;vt++)if(gt[vt]!==xt[vt])return!1;return!0}},"./src/Component.ts":function(dt,ht,pt){var ft=this&&this.__rest||function(yt,vt){var St={};for(var Et in yt)Object.prototype.hasOwnProperty.call(yt,Et)&&vt.indexOf(Et)<0&&(St[Et]=yt[Et]);if(yt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Et=Object.getOwnPropertySymbols(yt);wt<Et.length;wt++)vt.indexOf(Et[wt])<0&&Object.prototype.propertyIsEnumerable.call(yt,Et[wt])&&(St[Et[wt]]=yt[Et[wt]]);return St},mt=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(ht,"__esModule",{value:!0});var gt=mt(pt("./src/useMediaQuery.ts")),xt=function(yt){var vt=yt.children,St=yt.device,Et=yt.onChange,wt=ft(yt,["children","device","onChange"]),Rt=(0,gt.default)(wt,St,Et);return typeof vt=="function"?vt(Rt):Rt?vt:null};ht.default=xt},"./src/Context.ts":(dt,ht,pt)=>{Object.defineProperty(ht,"__esModule",{value:!0});var ft=pt("react"),mt=(0,ft.createContext)(void 0);ht.default=mt},"./src/index.ts":function(dt,ht,pt){var ft=this&&this.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.Context=ht.toQuery=ht.useMediaQuery=ht.default=void 0;var mt=ft(pt("./src/useMediaQuery.ts"));ht.useMediaQuery=mt.default;var gt=ft(pt("./src/Component.ts"));ht.default=gt.default;var xt=ft(pt("./src/toQuery.ts"));ht.toQuery=xt.default;var yt=ft(pt("./src/Context.ts"));ht.Context=yt.default},"./src/mediaQuery.ts":function(dt,ht,pt){var ft=this&&this.__assign||function(){return ft=Object.assign||function(Tt){for(var It,At=1,Dt=arguments.length;At<Dt;At++){It=arguments[At];for(var jt in It)Object.prototype.hasOwnProperty.call(It,jt)&&(Tt[jt]=It[jt])}return Tt},ft.apply(this,arguments)},mt=this&&this.__rest||function(Tt,It){var At={};for(var Dt in Tt)Object.prototype.hasOwnProperty.call(Tt,Dt)&&It.indexOf(Dt)<0&&(At[Dt]=Tt[Dt]);if(Tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,Dt=Object.getOwnPropertySymbols(Tt);jt<Dt.length;jt++)It.indexOf(Dt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Tt,Dt[jt])&&(At[Dt[jt]]=Tt[Dt[jt]]);return At},gt=this&&this.__importDefault||function(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}};Object.defineProperty(ht,"__esModule",{value:!0});var xt=gt(pt("./node_modules/prop-types/index.js")),yt=xt.default.oneOfType([xt.default.string,xt.default.number]),vt={all:xt.default.bool,grid:xt.default.bool,aural:xt.default.bool,braille:xt.default.bool,handheld:xt.default.bool,print:xt.default.bool,projection:xt.default.bool,screen:xt.default.bool,tty:xt.default.bool,tv:xt.default.bool,embossed:xt.default.bool},St={orientation:xt.default.oneOf(["portrait","landscape"]),scan:xt.default.oneOf(["progressive","interlace"]),aspectRatio:xt.default.string,deviceAspectRatio:xt.default.string,height:yt,deviceHeight:yt,width:yt,deviceWidth:yt,color:xt.default.bool,colorIndex:xt.default.bool,monochrome:xt.default.bool,resolution:yt,type:Object.keys(vt)};St.type;var Et=mt(St,["type"]),wt=ft({minAspectRatio:xt.default.string,maxAspectRatio:xt.default.string,minDeviceAspectRatio:xt.default.string,maxDeviceAspectRatio:xt.default.string,minHeight:yt,maxHeight:yt,minDeviceHeight:yt,maxDeviceHeight:yt,minWidth:yt,maxWidth:yt,minDeviceWidth:yt,maxDeviceWidth:yt,minColor:xt.default.number,maxColor:xt.default.number,minColorIndex:xt.default.number,maxColorIndex:xt.default.number,minMonochrome:xt.default.number,maxMonochrome:xt.default.number,minResolution:yt,maxResolution:yt},Et),Rt=ft(ft({},vt),wt);ht.default={all:Rt,types:vt,matchers:St,features:wt}},"./src/toQuery.ts":function(dt,ht,pt){var ft=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(ht,"__esModule",{value:!0});var mt=ft(pt("./node_modules/hyphenate-style-name/index.js")),gt=ft(pt("./src/mediaQuery.ts")),xt=function(Et){return"not ".concat(Et)},yt=function(Et,wt){var Rt=(0,mt.default)(Et);return typeof wt=="number"&&(wt="".concat(wt,"px")),wt===!0?Rt:wt===!1?xt(Rt):"(".concat(Rt,": ").concat(wt,")")},vt=function(Et){return Et.join(" and ")},St=function(Et){var wt=[];return Object.keys(gt.default.all).forEach(function(Rt){var Tt=Et[Rt];Tt!=null&&wt.push(yt(Rt,Tt))}),vt(wt)};ht.default=St},"./src/useMediaQuery.ts":function(dt,ht,pt){var ft=this&&this.__importDefault||function(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}};Object.defineProperty(ht,"__esModule",{value:!0});var mt=pt("react"),gt=ft(pt("./node_modules/matchmediaquery/index.js")),xt=ft(pt("./node_modules/hyphenate-style-name/index.js")),yt=pt("./node_modules/shallow-equal/dist/index.esm.js"),vt=ft(pt("./src/toQuery.ts")),St=ft(pt("./src/Context.ts")),Et=function(Ft){return Ft.query||(0,vt.default)(Ft)},wt=function(Ft){if(Ft){var Lt=Object.keys(Ft);return Lt.reduce(function(Pt,Ot){return Pt[(0,xt.default)(Ot)]=Ft[Ot],Pt},{})}},Rt=function(){var Ft=(0,mt.useRef)(!1);return(0,mt.useEffect)(function(){Ft.current=!0},[]),Ft.current},Tt=function(Ft){var Lt=(0,mt.useContext)(St.default),Pt=function(){return wt(Ft)||wt(Lt)},Ot=(0,mt.useState)(Pt),Nt=Ot[0],$t=Ot[1];return(0,mt.useEffect)(function(){var Vt=Pt();(0,yt.shallowEqualObjects)(Nt,Vt)||$t(Vt)},[Ft,Lt]),Nt},It=function(Ft){var Lt=function(){return Et(Ft)},Pt=(0,mt.useState)(Lt),Ot=Pt[0],Nt=Pt[1];return(0,mt.useEffect)(function(){var $t=Lt();Ot!==$t&&Nt($t)},[Ft]),Ot},At=function(Ft,Lt){var Pt=function(){return(0,gt.default)(Ft,Lt||{},!!Lt)},Ot=(0,mt.useState)(Pt),Nt=Ot[0],$t=Ot[1],Vt=Rt();return(0,mt.useEffect)(function(){if(Vt){var Ut=Pt();return $t(Ut),function(){Ut&&Ut.dispose()}}},[Ft,Lt]),Nt},Dt=function(Ft){var Lt=(0,mt.useState)(Ft.matches),Pt=Lt[0],Ot=Lt[1];return(0,mt.useEffect)(function(){var Nt=function($t){Ot($t.matches)};return Ft.addListener(Nt),Ot(Ft.matches),function(){Ft.removeListener(Nt)}},[Ft]),Pt},jt=function(Ft,Lt,Pt){var Ot=Tt(Lt),Nt=It(Ft);if(!Nt)throw new Error("Invalid or missing MediaQuery!");var $t=At(Nt,Ot),Vt=Dt($t),Ut=Rt();return(0,mt.useEffect)(function(){Ut&&Pt&&Pt(Vt)},[Vt]),(0,mt.useEffect)(function(){return function(){$t&&$t.dispose()}},[]),Vt};ht.default=jt},react:dt=>{dt.exports=it}},lt={};function ct(dt){var ht=lt[dt];if(ht!==void 0)return ht.exports;var pt=lt[dt]={exports:{}};return st[dt].call(pt.exports,pt,pt.exports,ct),pt.exports}ct.d=(dt,ht)=>{for(var pt in ht)ct.o(ht,pt)&&!ct.o(dt,pt)&&Object.defineProperty(dt,pt,{enumerable:!0,get:ht[pt]})},ct.o=(dt,ht)=>Object.prototype.hasOwnProperty.call(dt,ht),ct.r=dt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(dt,"__esModule",{value:!0})};var ut=ct("./src/index.ts");return ut})())})(reactResponsive);var reactResponsiveExports=reactResponsive.exports;const useIsMobile=nt=>reactResponsiveExports.useMediaQuery({maxWidth:nt||767});var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start,rt+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start,rt+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var st=rt.styles[it]||{},lt=rt.attributes[it]||{},ct=rt.elements[it];!isHTMLElement(ct)||!getNodeName(ct)||(Object.assign(ct.style,st),Object.keys(lt).forEach(function(ut){var dt=lt[ut];dt===!1?ct.removeAttribute(ut):ct.setAttribute(ut,dt===!0?"":dt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(st){var lt=rt.elements[st],ct=rt.attributes[st]||{},ut=Object.keys(rt.styles.hasOwnProperty(st)?rt.styles[st]:it[st]),dt=ut.reduce(function(ht,pt){return ht[pt]="",ht},{});!isHTMLElement(lt)||!getNodeName(lt)||(Object.assign(lt.style,dt),Object.keys(ct).forEach(function(ht){lt.removeAttribute(ht)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(nt){return nt.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands&&Array.isArray(nt.brands)?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var st=nt.getBoundingClientRect(),lt=1,ct=1;rt&&isHTMLElement(nt)&&(lt=nt.offsetWidth>0&&round(st.width)/nt.offsetWidth||1,ct=nt.offsetHeight>0&&round(st.height)/nt.offsetHeight||1);var ut=isElement(nt)?getWindow(nt):window,dt=ut.visualViewport,ht=!isLayoutViewport()&&it,pt=(st.left+(ht&&dt?dt.offsetLeft:0))/lt,ft=(st.top+(ht&&dt?dt.offsetTop:0))/ct,mt=st.width/lt,gt=st.height/ct;return{width:mt,height:gt,top:ft,right:pt+mt,bottom:ft+gt,left:pt,x:pt,y:ft}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-st)<=1&&(st=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:st}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var st=rt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var lt=getParentNode(nt);for(isShadowRoot(lt)&&(lt=lt.host);isHTMLElement(lt)&&["html","body"].indexOf(getNodeName(lt))<0;){var ct=getComputedStyle$1(lt);if(ct.transform!=="none"||ct.perspective!=="none"||ct.contain==="paint"||["transform","perspective"].indexOf(ct.willChange)!==-1||rt&&ct.willChange==="filter"||rt&&ct.filter&&ct.filter!=="none")return lt;lt=lt.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max(nt,min(rt,it))}function withinMaxClamp(nt,rt,it){var st=within(nt,rt,it);return st>it?it:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,st){return it[st]=nt,it},{})}var toPaddingObject=function(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,st=nt.name,lt=nt.options,ct=it.elements.arrow,ut=it.modifiersData.popperOffsets,dt=getBasePlacement(it.placement),ht=getMainAxisFromPlacement(dt),pt=[left,right].indexOf(dt)>=0,ft=pt?"height":"width";if(!(!ct||!ut)){var mt=toPaddingObject(lt.padding,it),gt=getLayoutRect(ct),xt=ht==="y"?top:left,yt=ht==="y"?bottom:right,vt=it.rects.reference[ft]+it.rects.reference[ht]-ut[ht]-it.rects.popper[ft],St=ut[ht]-it.rects.reference[ht],Et=getOffsetParent(ct),wt=Et?ht==="y"?Et.clientHeight||0:Et.clientWidth||0:0,Rt=vt/2-St/2,Tt=mt[xt],It=wt-gt[ft]-mt[yt],At=wt/2-gt[ft]/2+Rt,Dt=within(Tt,At,It),jt=ht;it.modifiersData[st]=(rt={},rt[jt]=Dt,rt.centerOffset=Dt-At,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,st=it.element,lt=st===void 0?"[data-popper-arrow]":st;lt!=null&&(typeof lt=="string"&&(lt=rt.elements.popper.querySelector(lt),!lt)||contains(rt.elements.popper,lt)&&(rt.elements.arrow=lt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt,rt){var it=nt.x,st=nt.y,lt=rt.devicePixelRatio||1;return{x:round(it*lt)/lt||0,y:round(st*lt)/lt||0}}function mapToStyles(nt){var rt,it=nt.popper,st=nt.popperRect,lt=nt.placement,ct=nt.variation,ut=nt.offsets,dt=nt.position,ht=nt.gpuAcceleration,pt=nt.adaptive,ft=nt.roundOffsets,mt=nt.isFixed,gt=ut.x,xt=gt===void 0?0:gt,yt=ut.y,vt=yt===void 0?0:yt,St=typeof ft=="function"?ft({x:xt,y:vt}):{x:xt,y:vt};xt=St.x,vt=St.y;var Et=ut.hasOwnProperty("x"),wt=ut.hasOwnProperty("y"),Rt=left,Tt=top,It=window;if(pt){var At=getOffsetParent(it),Dt="clientHeight",jt="clientWidth";if(At===getWindow(it)&&(At=getDocumentElement(it),getComputedStyle$1(At).position!=="static"&&dt==="absolute"&&(Dt="scrollHeight",jt="scrollWidth")),At=At,lt===top||(lt===left||lt===right)&&ct===end){Tt=bottom;var Ft=mt&&At===It&&It.visualViewport?It.visualViewport.height:At[Dt];vt-=Ft-st.height,vt*=ht?1:-1}if(lt===left||(lt===top||lt===bottom)&&ct===end){Rt=right;var Lt=mt&&At===It&&It.visualViewport?It.visualViewport.width:At[jt];xt-=Lt-st.width,xt*=ht?1:-1}}var Pt=Object.assign({position:dt},pt&&unsetSides),Ot=ft===!0?roundOffsetsByDPR({x:xt,y:vt},getWindow(it)):{x:xt,y:vt};if(xt=Ot.x,vt=Ot.y,ht){var Nt;return Object.assign({},Pt,(Nt={},Nt[Tt]=wt?"0":"",Nt[Rt]=Et?"0":"",Nt.transform=(It.devicePixelRatio||1)<=1?"translate("+xt+"px, "+vt+"px)":"translate3d("+xt+"px, "+vt+"px, 0)",Nt))}return Object.assign({},Pt,(rt={},rt[Tt]=wt?vt+"px":"",rt[Rt]=Et?xt+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,st=it.gpuAcceleration,lt=st===void 0?!0:st,ct=it.adaptive,ut=ct===void 0?!0:ct,dt=it.roundOffsets,ht=dt===void 0?!0:dt,pt={placement:getBasePlacement(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:lt,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},pt,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:ut,roundOffsets:ht})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},pt,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ht})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,st=nt.options,lt=st.scroll,ct=lt===void 0?!0:lt,ut=st.resize,dt=ut===void 0?!0:ut,ht=getWindow(rt.elements.popper),pt=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return ct&&pt.forEach(function(ft){ft.addEventListener("scroll",it.update,passive)}),dt&&ht.addEventListener("resize",it.update,passive),function(){ct&&pt.forEach(function(ft){ft.removeEventListener("scroll",it.update,passive)}),dt&&ht.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,st=rt.pageYOffset;return{scrollLeft:it,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),st=getDocumentElement(nt),lt=it.visualViewport,ct=st.clientWidth,ut=st.clientHeight,dt=0,ht=0;if(lt){ct=lt.width,ut=lt.height;var pt=isLayoutViewport();(pt||!pt&&rt==="fixed")&&(dt=lt.offsetLeft,ht=lt.offsetTop)}return{width:ct,height:ut,x:dt+getWindowScrollBarX(nt),y:ht}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),st=getWindowScroll(nt),lt=(rt=nt.ownerDocument)==null?void 0:rt.body,ct=max(it.scrollWidth,it.clientWidth,lt?lt.scrollWidth:0,lt?lt.clientWidth:0),ut=max(it.scrollHeight,it.clientHeight,lt?lt.scrollHeight:0,lt?lt.clientHeight:0),dt=-st.scrollLeft+getWindowScrollBarX(nt),ht=-st.scrollTop;return getComputedStyle$1(lt||it).direction==="rtl"&&(dt+=max(it.clientWidth,lt?lt.clientWidth:0)-ct),{width:ct,height:ut,x:dt,y:ht}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,st=rt.overflowX,lt=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+lt+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var st=getScrollParent(nt),lt=st===((it=nt.ownerDocument)==null?void 0:it.body),ct=getWindow(st),ut=lt?[ct].concat(ct.visualViewport||[],isScrollParent(st)?st:[]):st,dt=rt.concat(ut);return lt?dt:dt.concat(listScrollParents(getParentNode(ut)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement(st)?rt.filter(function(lt){return isElement(lt)&&contains(lt,st)&&getNodeName(lt)!=="body"}):[]}function getClippingRect(nt,rt,it,st){var lt=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),ct=[].concat(lt,[it]),ut=ct[0],dt=ct.reduce(function(ht,pt){var ft=getClientRectFromMixedType(nt,pt,st);return ht.top=max(ft.top,ht.top),ht.right=min(ft.right,ht.right),ht.bottom=min(ft.bottom,ht.bottom),ht.left=max(ft.left,ht.left),ht},getClientRectFromMixedType(nt,ut,st));return dt.width=dt.right-dt.left,dt.height=dt.bottom-dt.top,dt.x=dt.left,dt.y=dt.top,dt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,st=nt.placement,lt=st?getBasePlacement(st):null,ct=st?getVariation(st):null,ut=rt.x+rt.width/2-it.width/2,dt=rt.y+rt.height/2-it.height/2,ht;switch(lt){case top:ht={x:ut,y:rt.y-it.height};break;case bottom:ht={x:ut,y:rt.y+rt.height};break;case right:ht={x:rt.x+rt.width,y:dt};break;case left:ht={x:rt.x-it.width,y:dt};break;default:ht={x:rt.x,y:rt.y}}var pt=lt?getMainAxisFromPlacement(lt):null;if(pt!=null){var ft=pt==="y"?"height":"width";switch(ct){case start:ht[pt]=ht[pt]-(rt[ft]/2-it[ft]/2);break;case end:ht[pt]=ht[pt]+(rt[ft]/2-it[ft]/2);break}}return ht}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,lt=st===void 0?nt.placement:st,ct=it.strategy,ut=ct===void 0?nt.strategy:ct,dt=it.boundary,ht=dt===void 0?clippingParents:dt,pt=it.rootBoundary,ft=pt===void 0?viewport:pt,mt=it.elementContext,gt=mt===void 0?popper:mt,xt=it.altBoundary,yt=xt===void 0?!1:xt,vt=it.padding,St=vt===void 0?0:vt,Et=mergePaddingObject(typeof St!="number"?St:expandToHashMap(St,basePlacements)),wt=gt===popper?reference:popper,Rt=nt.rects.popper,Tt=nt.elements[yt?wt:gt],It=getClippingRect(isElement(Tt)?Tt:Tt.contextElement||getDocumentElement(nt.elements.popper),ht,ft,ut),At=getBoundingClientRect(nt.elements.reference),Dt=computeOffsets({reference:At,element:Rt,strategy:"absolute",placement:lt}),jt=rectToClientRect(Object.assign({},Rt,Dt)),Ft=gt===popper?jt:At,Lt={top:It.top-Ft.top+Et.top,bottom:Ft.bottom-It.bottom+Et.bottom,left:It.left-Ft.left+Et.left,right:Ft.right-It.right+Et.right},Pt=nt.modifiersData.offset;if(gt===popper&&Pt){var Ot=Pt[lt];Object.keys(Lt).forEach(function(Nt){var $t=[right,bottom].indexOf(Nt)>=0?1:-1,Vt=[top,bottom].indexOf(Nt)>=0?"y":"x";Lt[Nt]+=Ot[Vt]*$t})}return Lt}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,lt=it.boundary,ct=it.rootBoundary,ut=it.padding,dt=it.flipVariations,ht=it.allowedAutoPlacements,pt=ht===void 0?placements:ht,ft=getVariation(st),mt=ft?dt?variationPlacements:variationPlacements.filter(function(yt){return getVariation(yt)===ft}):basePlacements,gt=mt.filter(function(yt){return pt.indexOf(yt)>=0});gt.length===0&&(gt=mt);var xt=gt.reduce(function(yt,vt){return yt[vt]=detectOverflow(nt,{placement:vt,boundary:lt,rootBoundary:ct,padding:ut})[getBasePlacement(vt)],yt},{});return Object.keys(xt).sort(function(yt,vt){return xt[yt]-xt[vt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,st=nt.name;if(!rt.modifiersData[st]._skip){for(var lt=it.mainAxis,ct=lt===void 0?!0:lt,ut=it.altAxis,dt=ut===void 0?!0:ut,ht=it.fallbackPlacements,pt=it.padding,ft=it.boundary,mt=it.rootBoundary,gt=it.altBoundary,xt=it.flipVariations,yt=xt===void 0?!0:xt,vt=it.allowedAutoPlacements,St=rt.options.placement,Et=getBasePlacement(St),wt=Et===St,Rt=ht||(wt||!yt?[getOppositePlacement(St)]:getExpandedFallbackPlacements(St)),Tt=[St].concat(Rt).reduce(function(tr,dr){return tr.concat(getBasePlacement(dr)===auto?computeAutoPlacement(rt,{placement:dr,boundary:ft,rootBoundary:mt,padding:pt,flipVariations:yt,allowedAutoPlacements:vt}):dr)},[]),It=rt.rects.reference,At=rt.rects.popper,Dt=new Map,jt=!0,Ft=Tt[0],Lt=0;Lt<Tt.length;Lt++){var Pt=Tt[Lt],Ot=getBasePlacement(Pt),Nt=getVariation(Pt)===start,$t=[top,bottom].indexOf(Ot)>=0,Vt=$t?"width":"height",Ut=detectOverflow(rt,{placement:Pt,boundary:ft,rootBoundary:mt,altBoundary:gt,padding:pt}),zt=$t?Nt?right:left:Nt?bottom:top;It[Vt]>At[Vt]&&(zt=getOppositePlacement(zt));var Bt=getOppositePlacement(zt),Ht=[];if(ct&&Ht.push(Ut[Ot]<=0),dt&&Ht.push(Ut[zt]<=0,Ut[Bt]<=0),Ht.every(function(tr){return tr})){Ft=Pt,jt=!1;break}Dt.set(Pt,Ht)}if(jt)for(var Gt=yt?3:1,Kt=function(dr){var fr=Tt.find(function(Sr){var vr=Dt.get(Sr);if(vr)return vr.slice(0,dr).every(function(mr){return mr})});if(fr)return Ft=fr,"break"},Xt=Gt;Xt>0;Xt--){var or=Kt(Xt);if(or==="break")break}rt.placement!==Ft&&(rt.modifiersData[st]._skip=!0,rt.placement=Ft,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top,right,bottom,left].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,st=rt.rects.reference,lt=rt.rects.popper,ct=rt.modifiersData.preventOverflow,ut=detectOverflow(rt,{elementContext:"reference"}),dt=detectOverflow(rt,{altBoundary:!0}),ht=getSideOffsets(ut,st),pt=getSideOffsets(dt,lt,ct),ft=isAnySideFullyClipped(ht),mt=isAnySideFullyClipped(pt);rt.modifiersData[it]={referenceClippingOffsets:ht,popperEscapeOffsets:pt,isReferenceHidden:ft,hasPopperEscaped:mt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":ft,"data-popper-escaped":mt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var st=getBasePlacement(nt),lt=[left,top].indexOf(st)>=0?-1:1,ct=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,ut=ct[0],dt=ct[1];return ut=ut||0,dt=(dt||0)*lt,[left,right].indexOf(st)>=0?{x:dt,y:ut}:{x:ut,y:dt}}function offset(nt){var rt=nt.state,it=nt.options,st=nt.name,lt=it.offset,ct=lt===void 0?[0,0]:lt,ut=placements.reduce(function(ft,mt){return ft[mt]=distanceAndSkiddingToXY(mt,rt.rects,ct),ft},{}),dt=ut[rt.placement],ht=dt.x,pt=dt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=ht,rt.modifiersData.popperOffsets.y+=pt),rt.modifiersData[st]=ut}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,st=nt.name,lt=it.mainAxis,ct=lt===void 0?!0:lt,ut=it.altAxis,dt=ut===void 0?!1:ut,ht=it.boundary,pt=it.rootBoundary,ft=it.altBoundary,mt=it.padding,gt=it.tether,xt=gt===void 0?!0:gt,yt=it.tetherOffset,vt=yt===void 0?0:yt,St=detectOverflow(rt,{boundary:ht,rootBoundary:pt,padding:mt,altBoundary:ft}),Et=getBasePlacement(rt.placement),wt=getVariation(rt.placement),Rt=!wt,Tt=getMainAxisFromPlacement(Et),It=getAltAxis(Tt),At=rt.modifiersData.popperOffsets,Dt=rt.rects.reference,jt=rt.rects.popper,Ft=typeof vt=="function"?vt(Object.assign({},rt.rects,{placement:rt.placement})):vt,Lt=typeof Ft=="number"?{mainAxis:Ft,altAxis:Ft}:Object.assign({mainAxis:0,altAxis:0},Ft),Pt=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,Ot={x:0,y:0};if(At){if(ct){var Nt,$t=Tt==="y"?top:left,Vt=Tt==="y"?bottom:right,Ut=Tt==="y"?"height":"width",zt=At[Tt],Bt=zt+St[$t],Ht=zt-St[Vt],Gt=xt?-jt[Ut]/2:0,Kt=wt===start?Dt[Ut]:jt[Ut],Xt=wt===start?-jt[Ut]:-Dt[Ut],or=rt.elements.arrow,tr=xt&&or?getLayoutRect(or):{width:0,height:0},dr=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),fr=dr[$t],Sr=dr[Vt],vr=within(0,Dt[Ut],tr[Ut]),mr=Rt?Dt[Ut]/2-Gt-vr-fr-Lt.mainAxis:Kt-vr-fr-Lt.mainAxis,hr=Rt?-Dt[Ut]/2+Gt+vr+Sr+Lt.mainAxis:Xt+vr+Sr+Lt.mainAxis,gr=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),lr=gr?Tt==="y"?gr.clientTop||0:gr.clientLeft||0:0,Ir=(Nt=Pt==null?void 0:Pt[Tt])!=null?Nt:0,wr=zt+mr-Ir-lr,Fr=zt+hr-Ir,$r=within(xt?min(Bt,wr):Bt,zt,xt?max(Ht,Fr):Ht);At[Tt]=$r,Ot[Tt]=$r-zt}if(dt){var hn,Zr=Tt==="x"?top:left,Qt=Tt==="x"?bottom:right,Jt=At[It],pr=It==="y"?"height":"width",Vr=Jt+St[Zr],Wr=Jt-St[Qt],zr=[top,left].indexOf(Et)!==-1,ln=(hn=Pt==null?void 0:Pt[It])!=null?hn:0,xn=zr?Vr:Jt-Dt[pr]-jt[pr]-ln+Lt.altAxis,yn=zr?Jt+Dt[pr]+jt[pr]-ln-Lt.altAxis:Wr,Wn=xt&&zr?withinMaxClamp(xn,Jt,yn):within(xt?xn:Vr,Jt,xt?yn:Wr);At[It]=Wn,Ot[It]=Wn-Jt}rt.modifiersData[st]=Ot}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,st=round(rt.height)/nt.offsetHeight||1;return it!==1||st!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var st=isHTMLElement(rt),lt=isHTMLElement(rt)&&isElementScaled(rt),ct=getDocumentElement(rt),ut=getBoundingClientRect(nt,lt,it),dt={scrollLeft:0,scrollTop:0},ht={x:0,y:0};return(st||!st&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(ct))&&(dt=getNodeScroll(rt)),isHTMLElement(rt)?(ht=getBoundingClientRect(rt,!0),ht.x+=rt.clientLeft,ht.y+=rt.clientTop):ct&&(ht.x=getWindowScrollBarX(ct))),{x:ut.left+dt.scrollLeft-ht.x,y:ut.top+dt.scrollTop-ht.y,width:ut.width,height:ut.height}}function order(nt){var rt=new Map,it=new Set,st=[];nt.forEach(function(ct){rt.set(ct.name,ct)});function lt(ct){it.add(ct.name);var ut=[].concat(ct.requires||[],ct.requiresIfExists||[]);ut.forEach(function(dt){if(!it.has(dt)){var ht=rt.get(dt);ht&&lt(ht)}}),st.push(ct)}return nt.forEach(function(ct){it.has(ct.name)||lt(ct)}),st}function orderModifiers(nt){var rt=order(nt);return modifierPhases.reduce(function(it,st){return it.concat(rt.filter(function(lt){return lt.phase===st}))},[])}function debounce(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,st){var lt=it[st.name];return it[st.name]=lt?Object.assign({},lt,st,{options:Object.assign({},lt.options,st.options),data:Object.assign({},lt.data,st.data)}):st,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,st=it===void 0?[]:it,lt=rt.defaultOptions,ct=lt===void 0?DEFAULT_OPTIONS:lt;return function(dt,ht,pt){pt===void 0&&(pt=ct);var ft={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,ct),modifiersData:{},elements:{reference:dt,popper:ht},attributes:{},styles:{}},mt=[],gt=!1,xt={state:ft,setOptions:function(Et){var wt=typeof Et=="function"?Et(ft.options):Et;vt(),ft.options=Object.assign({},ct,ft.options,wt),ft.scrollParents={reference:isElement(dt)?listScrollParents(dt):dt.contextElement?listScrollParents(dt.contextElement):[],popper:listScrollParents(ht)};var Rt=orderModifiers(mergeByName([].concat(st,ft.options.modifiers)));return ft.orderedModifiers=Rt.filter(function(Tt){return Tt.enabled}),yt(),xt.update()},forceUpdate:function(){if(!gt){var Et=ft.elements,wt=Et.reference,Rt=Et.popper;if(areValidElements(wt,Rt)){ft.rects={reference:getCompositeRect(wt,getOffsetParent(Rt),ft.options.strategy==="fixed"),popper:getLayoutRect(Rt)},ft.reset=!1,ft.placement=ft.options.placement,ft.orderedModifiers.forEach(function(Lt){return ft.modifiersData[Lt.name]=Object.assign({},Lt.data)});for(var Tt=0;Tt<ft.orderedModifiers.length;Tt++){if(ft.reset===!0){ft.reset=!1,Tt=-1;continue}var It=ft.orderedModifiers[Tt],At=It.fn,Dt=It.options,jt=Dt===void 0?{}:Dt,Ft=It.name;typeof At=="function"&&(ft=At({state:ft,options:jt,name:Ft,instance:xt})||ft)}}}},update:debounce(function(){return new Promise(function(St){xt.forceUpdate(),St(ft)})}),destroy:function(){vt(),gt=!0}};if(!areValidElements(dt,ht))return xt;xt.setOptions(pt).then(function(St){!gt&&pt.onFirstUpdate&&pt.onFirstUpdate(St)});function yt(){ft.orderedModifiers.forEach(function(St){var Et=St.name,wt=St.options,Rt=wt===void 0?{}:wt,Tt=St.effect;if(typeof Tt=="function"){var It=Tt({state:ft,name:Et,instance:xt,options:Rt}),At=function(){};mt.push(It||At)}})}function vt(){mt.forEach(function(St){return St()}),mt=[]}return xt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const WebcamOffIcon$1=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M22.359 17.84a1.196 1.196 0 0 0 .548-1.017V7.786a1.36 1.36 0 0 0-.548-1.017.97.97 0 0 0-1.095 0L17.43 8.804a3.4 3.4 0 0 0-3.286-3.286h-4.052L22.14 17.949c-.001-.11.108-.11.219-.11Zm.219 3.841-5.257-5.424L6.916 5.517 2.863 1.34a1.036 1.036 0 0 0-1.533 0 1.117 1.117 0 0 0 0 1.583l2.519 2.596A3.379 3.379 0 0 0 1 8.91v6.78a3.386 3.386 0 0 0 .945 2.415 3.175 3.175 0 0 0 2.341.975h9.857a2.84 2.84 0 0 0 2.082-.791l4.819 4.972a1.06 1.06 0 0 0 1.533 0 1.144 1.144 0 0 0 0-1.582v.002Z",fill:nt.fillcolor?nt.fillcolor:"#050A0E"})}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,transform:"translate(1 1)",d:"M0 0h21.905v22.59H0z"})})})]});function WebcamOnIcon(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_287",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_287)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M22.03 7.187a.98.98 0 00-1.079 0l-3.774 1.94a3.3 3.3 0 00-3.236-3.126H4.236A3.178 3.178 0 001 9.236v6.47a3.178 3.178 0 003.235 3.236h9.706a3.3 3.3 0 003.235-3.127l3.881 1.94a1.136 1.136 0 001.4-.43.972.972 0 00.109-.54V8.158a1.286 1.286 0 00-.538-.971z"})})]})}function MicOffIcon$2(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("mask",{id:"mask0_25_170",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsxs("g",{fill:nt.fillcolor?nt.fillcolor:"#050A0E",mask:"url(#mask0_25_170)",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M8.6 10.692V12.2c0 .902.38 1.767 1.054 2.404a3.71 3.71 0 002.546.996c.346 0 .687-.047 1.014-.138L8.6 10.692zm5.915 6.116a5.665 5.665 0 01-2.315.492 5.565 5.565 0 01-3.819-1.494C7.37 14.85 6.8 13.553 6.8 12.2v-.405a.827.827 0 00-.264-.6.928.928 0 00-.636-.25.928.928 0 00-.637.25.827.827 0 00-.263.6v.405c0 3.468 2.748 6.33 6.3 6.748V20.7H9.5a.928.928 0 00-.637.249.827.827 0 00-.263.601c0 .225.095.442.263.601.17.16.398.249.637.249h5.4c.238 0 .467-.09.636-.249a.827.827 0 00.264-.601.827.827 0 00-.264-.601.927.927 0 00-.636-.249h-1.8v-1.752a7.495 7.495 0 002.67-.842l-1.255-1.298zm4.16-1.633l-1.343-1.388A4.84 4.84 0 0017.6 12.2v-.405c0-.225.095-.441.263-.6a.927.927 0 01.637-.25c.238 0 .467.09.636.25.169.159.264.375.264.6v.405a6.491 6.491 0 01-.726 2.975zM15.8 12.203L8.654 4.814a3.34 3.34 0 011-1.818A3.71 3.71 0 0112.2 2c.955 0 1.87.358 2.545.996A3.307 3.307 0 0115.8 5.4v6.803z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("rect",{width:"24.979",height:"1.817",x:"3.306",y:"3",rx:"0.909",transform:"rotate(45.956 3.306 3)"})]})]})}function MicOnIcon$1(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_238",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_238)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor?nt.fillcolor:"#fff",fillRule:"evenodd",d:"M9.655 2.996A3.307 3.307 0 008.6 5.4v6.8c0 .902.38 1.767 1.055 2.404a3.71 3.71 0 002.545.996 3.71 3.71 0 002.546-.996A3.307 3.307 0 0015.8 12.2V5.4c0-.902-.38-1.767-1.054-2.404A3.71 3.71 0 0012.2 2a3.71 3.71 0 00-2.545.996zm-3.119 8.198c.17.16.264.376.264.601v.405c0 1.353.569 2.65 1.582 3.606A5.565 5.565 0 0012.2 17.3a5.565 5.565 0 003.818-1.494c1.013-.956 1.582-2.253 1.582-3.606v-.405c0-.225.095-.441.264-.6a.928.928 0 01.636-.25c.239 0 .468.09.636.25.17.159.264.375.264.6v.405c0 1.656-.64 3.256-1.8 4.498-1.16 1.243-2.76 2.043-4.5 2.25V20.7h1.8c.239 0 .468.09.636.249.17.16.264.376.264.601a.827.827 0 01-.264.601.928.928 0 01-.636.249H9.5a.928.928 0 01-.636-.249.827.827 0 01-.264-.601c0-.225.095-.442.264-.601A.928.928 0 019.5 20.7h1.8v-1.752C7.748 18.53 5 15.668 5 12.2v-.405c0-.225.095-.441.264-.6a.928.928 0 01.636-.25c.239 0 .468.09.636.25z",clipRule:"evenodd"})})]})}function JoiningScreen({participantName:nt,setParticipantName:rt,setMeetingId:it,setToken:st,setSelectedMic:lt,setSelectedWebcam:ct,onClickStartMeeting:ut,micEnabled:dt,webcamEnabled:ht,setWebcamOn:pt,setMicOn:ft,setMeetingMode:mt,meetingMode:gt}){const[xt,yt]=reactExports.useState("video"),[{webcams:vt,mics:St},Et]=reactExports.useState({devices:[],webcams:[],mics:[]}),[wt,Rt]=reactExports.useState(null),[Tt,It]=reactExports.useState(!1),[At,Dt]=reactExports.useState(!1),jt=reactExports.useRef(),Ft=reactExports.useRef(),Lt=reactExports.useRef(),Pt=reactExports.useRef(),Ot=reactExports.useRef(),Nt=reactExports.useRef(),[$t,Vt]=reactExports.useState(!1),[Ut,zt]=reactExports.useState(null),Bt=()=>{Vt(!0)},Ht=wr=>{Vt(!1)};useIsMobile();const Gt=reactExports.useMemo(()=>!!wt,[wt]),Kt=reactExports.useMemo(()=>!!Ut,[Ut]),Xt=()=>{const wr=Pt.current;wr&&(wr.stop(),Rt(null),pt(!1))},or=()=>{Pt.current||(hr({mic:!1,webcam:!0}),pt(!0))},tr=()=>{Pt.current?Xt():or()},dr=()=>{const wr=Ot.current;wr&&(wr.stop(),zt(null),ft(!1))},fr=()=>{Ot.current||(hr({mic:!0,webcam:!1}),ft(!0))},Sr=()=>{Ot.current?dr():fr()},vr=async wr=>{const Fr=Pt.current;Fr&&Fr.stop();const hn=(await navigator.mediaDevices.getUserMedia({video:{deviceId:wr}})).getVideoTracks(),Zr=hn.length?hn[0]:null;Rt(Zr)},mr=async wr=>{const Fr=Ot.current;Fr&&Fr.stop();const hn=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:wr}})).getAudioTracks(),Zr=hn.length?hn[0]:null;clearInterval(Nt.current),zt(Zr)},hr=async({mic:wr,webcam:Fr,firstTime:$r})=>{var hn,Zr;if(wr){const Qt={audio:!0},pr=(await navigator.mediaDevices.getUserMedia(Qt)).getAudioTracks(),Vr=pr.length?pr[0]:null;zt(Vr),$r&&lt({id:(hn=Vr==null?void 0:Vr.getSettings())==null?void 0:hn.deviceId})}if(Fr){const Qt={video:{width:1280,height:720}},pr=(await navigator.mediaDevices.getUserMedia(Qt)).getVideoTracks(),Vr=pr.length?pr[0]:null;Rt(Vr),$r&&ct({id:(Zr=Vr==null?void 0:Vr.getSettings())==null?void 0:Zr.deviceId})}};async function gr(){const wr=Ot.current;wr&&(wr.muted&&It(!0),wr.addEventListener("mute",Fr=>{It(!0)}))}const lr=async({micEnabled:wr,webcamEnabled:Fr})=>{try{const $r=await navigator.mediaDevices.enumerateDevices(),hn=$r.filter(pr=>pr.kind==="videoinput"),Zr=$r.filter(pr=>pr.kind==="audioinput"),Qt=Zr.length>0,Jt=hn.length>0;Et({webcams:hn,mics:Zr,devices:$r}),Qt&&gr(),hr({mic:Qt&&wr,webcam:Jt&&Fr,firstTime:!0})}catch($r){console.log($r)}};reactExports.useEffect(()=>(Ot.current=Ut,gr(),()=>{const wr=Ot.current;wr&&wr.stop(),Ot.current=null}),[Ut]),reactExports.useEffect(()=>{gt===Constants.modes.VIEWER&&(dr(),Xt())},[gt]),reactExports.useEffect(()=>{Pt.current=wt;var wr=jt.current.currentTime>0&&!jt.current.paused&&!jt.current.ended&&jt.current.readyState>jt.current.HAVE_CURRENT_DATA;if(wt){const Fr=new MediaStream([wt]);if(jt.current&&(jt.current.srcObject=Fr,jt.current.pause&&!wr))try{jt.current.play()}catch($r){console.log("error in playing video",$r)}setTimeout(()=>{if(Ft.current){Ft.current.srcObject=Fr;try{Ft.current.play()}catch($r){console.log("error in playing video",$r)}}},1e3)}else jt.current&&(jt.current.srcObject=null),Ft.current&&(Ft.current.srcObject=null)},[wt,xt,$t]),reactExports.useEffect(()=>{lr({micEnabled:dt,webcamEnabled:ht})},[]);const Ir=({onClick:wr,onState:Fr,OnIcon:$r,OffIcon:hn,mic:Zr})=>{const[Qt,Jt]=reactExports.useState(!1),pr=reactExports.useRef(),Vr=reactExports.useRef(),Wr=()=>{createPopper(pr.current,Vr.current,{placement:"top"}),Jt(!0)},zr=()=>{Jt(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{ref:pr,onMouseEnter:Wr,onMouseLeave:zr,onClick:wr,className:`rounded-full min-w-auto w-11 h-11 flex items-center justify-center ${Fr?"bg-white":"bg-red-600 text-white"}`,disabled:gt===Constants.modes.VIEWER,children:Fr?jsxRuntimeExports.jsx($r,{fillcolor:Fr?"#050A0E":"#fff"}):jsxRuntimeExports.jsx(hn,{fillcolor:Fr?"#050A0E":"#fff"})})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${Qt?"":"hidden"} overflow-hidden flex flex-col items-center justify-center pb-1.5`,ref:Vr})]})};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col flex-1 h-screen overflow-y-auto bg-gray-200",children:jsxRuntimeExports.jsx("div",{className:"flex flex-1 flex-col md:flex-row items-center justify-center md:m-[72px] m-16",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-row md:grid-flow-col ",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-7 2xl:col-span-6",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1.5 sm:p-4 lg:p-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full pl-5 pr-5 md:pl-4 sm:pl-10 md:pr-4 sm:pr-10",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",style:{height:"45vh"},children:[jsxRuntimeExports.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:jt,controls:!1,style:{backgroundColor:"#1c1c1c"},className:"rounded-[10px] h-full w-full object-cover flex items-center justify-center flip"}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 flex items-center justify-center",children:Gt?null:jsxRuntimeExports.jsx("p",{className:"text-xl text-white xl:text-lg 2xl:text-xl",children:gt===Constants.modes.VIEWER?"카메라와 마이크가 허용되지 않았습니다.":"카메라가 꺼져있습니다."})})}),$t?jsxRuntimeExports.jsx(SettingDialogueBox,{open:$t,onClose:Ht,popupVideoPlayerRef:Ft,popupAudioPlayerRef:Lt,changeWebcam:vr,changeMic:mr,setting:xt,setSetting:yt,webcams:vt,mics:St,setSelectedMic:lt,setSelectedWebcam:ct,videoTrack:wt,audioTrack:Ut}):null,gt===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 right-0 xl:bottom-6 bottom-4",children:jsxRuntimeExports.jsxs("div",{className:"container grid items-center justify-center grid-flow-col space-x-4 md:-m-2",children:[jsxRuntimeExports.jsx(Ir,{onClick:Sr,onState:Kt,mic:!0,OnIcon:MicOnIcon$1,OffIcon:MicOffIcon$2}),jsxRuntimeExports.jsx(Ir,{onClick:tr,onState:Gt,mic:!1,OnIcon:WebcamOnIcon,OffIcon:WebcamOffIcon$1})]})})]})})})}),jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-13",children:gt===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsx("div",{className:"bg-gray-700 rounded cursor-pointer md:left-12 lg:left-24 xl:left-44 md:right-12 lg:right-24 xl:right-44",onClick:wr=>{Bt()},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-center p-1 m-1",children:[jsxRuntimeExports.jsx("button",{className:"text-white",children:jsxRuntimeExports.jsx(CheckCircleIcon$1,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("p",{className:"ml-1 text-sm text-white",children:"카메라와 마이크를 확인하세요"})]})})}),jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-5 2xl:col-span-6 md:relative",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center flex-1 mt-3 xl:m-16 lg:m-6 md:mt-9 lg:mt-14 xl:mt-20 md:absolute md:left-0 md:right-0 md:top-0 md:bottom-0",children:jsxRuntimeExports.jsx(MeetingDetailsScreen,{participantName:nt,setParticipantName:rt,videoTrack:wt,setVideoTrack:Rt,setMeetingMode:mt,meetingMode:gt,onClickStartMeeting:ut,onClickJoin:async wr=>{const Fr=await getToken();await validateMeeting({roomId:wr,token:Fr})?(st(Fr),it(wr),wt&&(wt.stop(),Rt(null)),ut()):alert("Invalid Meeting Id")},_handleOnCreateMeeting:async()=>{const wr=await getToken(),Fr=await createMeeting({token:wr});return st(wr),it(Fr),Fr}})})})]})})})}),jsxRuntimeExports.jsx(ConfirmBox,{open:Tt,successText:"OKAY",onSuccess:()=>{It(!1)},title:"System mic is muted",subTitle:`You're default microphone is muted, please unmute it or increase audio\r
            input volume from system settings.`}),jsxRuntimeExports.jsx(ConfirmBox,{open:At,successText:"DISMISS",onSuccess:()=>{Dt(!1)},title:"Mic or webcam not available",subTitle:"Please connect a mic and webcam to speak and share your video in the meeting. You can also join without them."})]})}const useIsTab=()=>reactResponsiveExports.useMediaQuery({minWidth:768,maxWidth:1223});function getQualityScore(nt){const rt=nt.packetsLost/nt.totalPackets||0,it=nt.jitter,st=nt.rtt;let lt=100;return lt-=rt*50>50?50:rt*50,lt-=(it/30*25>25?25:it/30*25)||0,lt-=(st/300*25>25?25:st/300*25)||0,lt/10}const nameTructed$1=(nt,rt)=>(nt==null?void 0:nt.length)>rt?rt===15?`${nt.substr(0,12)}...`:`${nt.substr(0,rt)}...`:nt,sideBarModes={PARTICIPANTS:"PARTICIPANTS",CHAT:"CHAT",LAYOUT:"LAYOUT",POLLS:"POLLS",CREATE_POLL:"CREATE_POLL",ECOMMERCE:"ECOMMERCE"},trimSnackBarText=(nt="")=>nt.length>52?`${nt.substr(0,47)}...`:nt,nameTructed=(nt,rt)=>(nt==null?void 0:nt.length)>rt?rt===15?`${nt.substr(0,12)}...`:`${nt.substr(0,rt)}...`:nt,json_verify=nt=>{try{return JSON.parse(nt),!0}catch{return!1}};function formatAMPM(nt){var rt=nt.getHours(),it=nt.getMinutes(),st=rt>=12?"pm":"am";rt=rt%12,rt=rt||12,it=it<10?"0"+it:it;var lt=rt+":"+it+" "+st;return lt}const ChatMessage=({senderId:nt,senderName:rt,text:it,timestamp:st})=>{var dt;const lt=useMeeting(),ut=((dt=lt==null?void 0:lt.localParticipant)==null?void 0:dt.id)===nt;return jsxRuntimeExports.jsx("div",{className:`flex ${ut?"justify-end":"justify-start"} mt-4`,style:{maxWidth:"100%"},children:jsxRuntimeExports.jsxs("div",{className:`flex ${ut?"items-end bg-teal-700":"items-start bg-gray-500"} flex-col py-1 px-2 rounded-md`,children:[jsxRuntimeExports.jsx("p",{style:{color:"#ffffff80"},children:ut?"You":nameTructed(rt,15)}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"inline-block text-right text-white break-words whitespace-pre-wrap",children:it})}),jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx("p",{className:"text-xs",style:{color:"#ffffff80"},children:formatAMPM(new Date(st))})})]})})},ChatInput=({inputHeight:nt})=>{const[rt,it]=reactExports.useState(""),{publish:st}=usePubSub("CHAT"),lt=reactExports.useRef();return jsxRuntimeExports.jsx("div",{className:"flex items-center w-full px-2",style:{height:nt},children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("span",{className:"absolute inset-y-0 right-0 flex mr-2 rotate-90 ",children:jsxRuntimeExports.jsx("button",{disabled:rt.length<1,type:"submit",className:"p-1 focus:outline-none focus:shadow-outline",onClick:()=>{var ut;const ct=rt.trim();ct.length>0&&(st(ct,{persist:!0}),setTimeout(()=>{it("")},100),(ut=lt.current)==null||ut.focus())},children:jsxRuntimeExports.jsx(PaperAirplaneIcon$1,{className:`w-6 h-6 ${rt.length<1?"text-gray-500":"text-teal-700"}`})})}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full py-4 pl-2 pr-10 text-base text-black border border-gray-400 rounded bg-gray-750 focus:outline-none",placeholder:"메세지를 입력하세요",ref:lt,value:rt,onChange:ct=>{it(ct.target.value)},onKeyPress:ct=>{var ut;if(ct.key==="Enter"&&!ct.shiftKey){ct.preventDefault();const dt=rt.trim();dt.length>0&&(st(dt,{persist:!0}),setTimeout(()=>{it("")},100),(ut=lt.current)==null||ut.focus())}}})]})})},ChatMessages=({listHeight:nt})=>{const rt=reactExports.useRef(),{messages:it}=usePubSub("CHAT"),st=lt=>{if(!lt)rt.current&&(rt.current.scrollTop=rt.current.scrollHeight);else{const{text:ct}=lt;if(json_verify(ct)){const{type:ut}=JSON.parse(ct);ut==="CHAT"&&rt.current&&(rt.current.scrollTop=rt.current.scrollHeight)}}};return reactExports.useEffect(()=>{st()},[it]),it?jsxRuntimeExports.jsx("div",{ref:rt,style:{overflowY:"scroll",height:nt},children:jsxRuntimeExports.jsx("div",{className:"p-4",children:it.map((lt,ct)=>{const{senderId:ut,senderName:dt,message:ht,timestamp:pt}=lt;return jsxRuntimeExports.jsx(ChatMessage,{senderId:ut,senderName:dt,text:ht,timestamp:pt},`chat_item_${ct}`)})})}):jsxRuntimeExports.jsx("p",{children:"No messages"})};function ChatPanel({panelHeight:nt}){const it=nt-72;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChatMessages,{listHeight:it}),jsxRuntimeExports.jsx(ChatInput,{inputHeight:72})]})}const MicOffIcon$1=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M14.835 7.607h-1.417c.003.594-.12 1.18-.363 1.721l1.027 1.033c.49-.834.75-1.785.753-2.754Zm-3.346.138c0-.045.012-.092.012-.138V2.573a2.537 2.537 0 0 0-.713-1.816A2.5 2.5 0 0 0 9 0a2.484 2.484 0 0 0-1.787.757 2.522 2.522 0 0 0-.713 1.816v.153l4.988 5.02ZM2.562.895 1.5 1.963l5.009 5.043v.61c0 .665.262 1.304.73 1.776A2.484 2.484 0 0 0 9 10.129c.182-.003.364-.025.542-.067l1.383 1.392c-.603.283-1.26.43-1.925.432a4.294 4.294 0 0 1-3.088-1.216 4.357 4.357 0 0 1-1.325-3.063H3.167a5.88 5.88 0 0 0 1.475 3.742 5.797 5.797 0 0 0 3.525 1.897v2.747h1.666v-2.746a5.88 5.88 0 0 0 2.117-.76L15.438 16l1.062-1.066L2.562.894Z",fill:"#9E9EA7"})}),MicOnIcon=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M8.92 10.11a2.525 2.525 0 0 0 2.531-2.525l.008-5.048a2.537 2.537 0 1 0-5.074 0v5.048a2.531 2.531 0 0 0 2.535 2.524Zm4.482-2.525a4.373 4.373 0 0 1-4.482 4.29 4.373 4.373 0 0 1-4.483-4.29H3a5.88 5.88 0 0 0 5.075 5.654V16h1.692v-2.761a5.88 5.88 0 0 0 5.074-5.654h-1.439Z",fill:"#fff"})}),SvgComponent=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#a)",children:[jsxRuntimeExports.jsx("mask",{id:"b",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:1,width:24,height:24,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 1h24v24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#b)",children:jsxRuntimeExports.jsx("path",{d:"M10.903 2.55c0-.278.101-.546.281-.742a.921.921 0 0 1 .68-.308c.254 0 .499.11.679.308.18.196.281.464.281.742v7.671c.442.151.871.357 1.28.615V3.95c0-.278.102-.546.282-.742a.921.921 0 0 1 .68-.308c.254 0 .498.11.678.308.18.196.282.464.282.742v10.208a3.681 3.681 0 0 0-1.626.75 4.126 4.126 0 0 0-1.149 1.465 7.123 7.123 0 0 1 3.415-.873c.17 0 .333-.074.453-.205a.734.734 0 0 0 .187-.495v-2.115c.003-.83.307-1.625.844-2.212a.918.918 0 0 1 .674-.29c.25.004.49.114.667.308a1.1 1.1 0 0 1 .282.73c.003.273-.092.537-.265.736-.089.097-.16.212-.207.338a1.127 1.127 0 0 0-.074.4V15.5h-.004c-.05 1.408-.584 2.743-1.496 3.74l-1.482 1.62c-.96 1.05-2.263 1.64-3.622 1.64h-1.72c-1.698 0-3.327-.738-4.528-2.05-1.2-1.313-1.875-3.093-1.875-4.95V6.75c0-.278.101-.546.281-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .679.308c.18.196.281.464.281.742v5.151a6.466 6.466 0 0 1 1.28-1.065V3.95c0-.278.102-.546.282-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .678.308c.18.196.282.464.282.742v6.09c.422-.092.85-.14 1.28-.14V2.55Z",fill:nt.fillcolor})})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M0 0h24v24H0z"})})})]}),VideoCamOffIcon=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M16.858 11.741a.844.844 0 0 0 .29-.305.813.813 0 0 0 .104-.404v-6.3a.926.926 0 0 0-.116-.398.956.956 0 0 0-.278-.312.712.712 0 0 0-.788 0l-2.756 1.419a2.337 2.337 0 0 0-.715-1.598 2.482 2.482 0 0 0-1.648-.693H8.037l8.663 8.668c0-.077.078-.077.158-.077Zm.157 2.679-3.78-3.782L5.753 3.15 2.84.236A.745.745 0 0 0 2.29 0a.765.765 0 0 0-.552.236.778.778 0 0 0-.237.552.758.758 0 0 0 .237.552l1.811 1.81a2.449 2.449 0 0 0-1.48.812A2.312 2.312 0 0 0 1.5 5.515v4.728c-.006.31.05.618.167.907.117.29.291.553.513.777.217.219.479.393.768.51.29.116.601.174.915.17h7.088c.275.01.55-.034.806-.128.258-.095.492-.24.69-.424l3.466 3.467a.762.762 0 0 0 .551.228.783.783 0 0 0 .551-.228.785.785 0 0 0 .229-.552.785.785 0 0 0-.229-.552v.002Z",fill:"#9E9EA7"})}),VideoCamOnIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:18,height:18,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0h18v18H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M17.549 3.99a.818.818 0 0 0-.9 0L13.5 5.61a2.754 2.754 0 0 0-2.7-2.61H2.7A2.652 2.652 0 0 0 0 5.7v5.4a2.652 2.652 0 0 0 2.7 2.7h8.1a2.754 2.754 0 0 0 2.699-2.61l3.24 1.62a.947.947 0 0 0 1.168-.36.81.81 0 0 0 .09-.45V4.8a1.073 1.073 0 0 0-.448-.81Z",fill:"#fff"})})]}),MeetingAppContext=reactExports.createContext(),useMeetingAppContext=()=>reactExports.useContext(MeetingAppContext),MeetingAppProvider=({children:nt})=>{const[rt,it]=reactExports.useState([]),[st,lt]=reactExports.useState(null),[ct,ut]=reactExports.useState([]),[dt,ht]=reactExports.useState([]),[pt,ft]=reactExports.useState([]),[mt,gt]=reactExports.useState(null),xt=reactExports.useMemo(()=>dt.map(vt=>({...vt,isActive:pt.findIndex(({pollId:St})=>St===vt.id)===-1})),[dt,pt]),yt=()=>{const vt=reactExports.useRef(),St=wt=>{const Rt=[...vt.current],Tt={participantId:wt,raisedHandOn:new Date().getTime()},It=Rt.findIndex(({participantId:At})=>At===wt);It===-1?Rt.push(Tt):Rt[It]=Tt,it(Rt)};reactExports.useEffect(()=>{vt.current=rt},[rt]);const Et=()=>{const wt=[...vt.current],Rt=new Date().getTime(),Tt=wt.filter(({raisedHandOn:It})=>parseInt(It)+15e3>parseInt(Rt));wt.length!==Tt.length&&it(Tt)};return reactExports.useEffect(()=>{const wt=setInterval(Et,1e3);return()=>{clearInterval(wt)}},[]),{participantRaisedHand:St}};return jsxRuntimeExports.jsx(MeetingAppContext.Provider,{value:{raisedHandsParticipants:rt,draftPolls:ct,createdPolls:dt,endedPolls:pt,afterMeetingJoinedHLSState:mt,sideBarMode:st,setRaisedHandsParticipants:it,setDraftPolls:ut,setCreatedPolls:ht,setEndedPolls:ft,setAfterMeetingJoinedHLSState:gt,setSideBarMode:lt,polls:xt,useRaisedHandParticipants:yt},children:nt})};function ParticipantListItem({participantId:nt,raisedHand:rt}){const{micOn:it,webcamOn:st,displayName:lt,isLocal:ct,mode:ut}=useParticipant(nt);return jsxRuntimeExports.jsx("div",{className:"p-2 m-2 mt-2 mb-0 bg-gray-700 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center flex-1",children:[jsxRuntimeExports.jsx("div",{style:{color:"#212032",backgroundColor:"#757575"},className:"relative flex items-center justify-center w-10 h-10 mt-0 overflow-hidden text-lg rounded",children:lt==null?void 0:lt.charAt(0).toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"flex flex-1 ml-2 mr-1",children:jsxRuntimeExports.jsx("p",{className:"overflow-hidden text-base text-white whitespace-pre-wrap overflow-ellipsis",children:ct?"You":nameTructed(lt,15)})}),rt&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1 m-1",children:jsxRuntimeExports.jsx(SvgComponent,{fillcolor:"#fff"})}),jsxRuntimeExports.jsx("div",{className:"p-1 m-1",children:it?jsxRuntimeExports.jsx(MicOnIcon,{}):jsxRuntimeExports.jsx(MicOffIcon$1,{})}),jsxRuntimeExports.jsx("div",{className:"p-1 m-1",children:st?jsxRuntimeExports.jsx(VideoCamOnIcon,{}):jsxRuntimeExports.jsx(VideoCamOffIcon,{})})]})})}function ParticipantPanel({panelHeight:nt}){const{raisedHandsParticipants:rt}=useMeetingAppContext(),st=useMeeting().participants,lt=reactExports.useMemo(()=>{const ht=[...st.keys()].filter(mt=>rt.findIndex(({participantId:gt})=>gt===mt)===-1);return[...rt.sort((mt,gt)=>mt.raisedHandOn>gt.raisedHandOn?-1:mt.raisedHandOn<gt.raisedHandOn?1:0).map(({participantId:mt})=>({raisedHand:!0,participantId:mt})),...ht.map(mt=>({raisedHand:!1,participantId:mt}))]},[rt,st]),ct=dt=>dt,ut=reactExports.useMemo(()=>ct(lt),[lt,st]);return jsxRuntimeExports.jsx("div",{className:"flex w-full flex-col bg-gray-200 overflow-y-auto ",style:{height:nt},children:jsxRuntimeExports.jsx("div",{className:"flex flex-col flex-1",style:{height:nt-100},children:[...st.keys()].map((dt,ht)=>{const{raisedHand:pt,participantId:ft}=ut[ht];return jsxRuntimeExports.jsx(ParticipantListItem,{participantId:ft,raisedHand:pt},ht)})})})}const SideBarTabView=({height:nt,sideBarContainerWidth:rt,panelHeight:it,panelHeaderHeight:st,panelHeaderPadding:lt,panelPadding:ct,handleClose:ut,meetingMode:dt})=>{useMeeting();const{sideBarMode:ht,draftPolls:pt,polls:ft}=useMeetingAppContext();return jsxRuntimeExports.jsx("div",{className:"bg-gray-200",style:{height:nt,width:rt,paddingTop:ct,paddingLeft:ct,paddingRight:ct,paddingBottom:ct},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"bg-gray-750",style:{height:nt,borderRadius:10,overflow:"hidden"},children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ht&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",style:{padding:lt,height:st-1,borderBottom:"1px solid #70707033"},children:[jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-gray-800",children:ht==="CHAT"?"채팅":"참가자"}),jsxRuntimeExports.jsx("button",{className:"text-gray-800",onClick:ut,style:{margin:0,padding:0},children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"w-5 h-5"})})]}),ht==="PARTICIPANTS"?jsxRuntimeExports.jsx(ParticipantPanel,{panelHeight:it}):ht==="CHAT"?jsxRuntimeExports.jsx(ChatPanel,{panelHeight:it}):null]})})})})};function SidebarConatiner({height:nt,sideBarContainerWidth:rt,meetingMode:it}){const{raisedHandsParticipants:st,sideBarMode:lt,setSideBarMode:ct}=useMeetingAppContext(),ut=useIsMobile(),dt=useIsTab(),ht=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),pt=reactResponsiveExports.useMediaQuery({minWidth:1440}),ft=8,mt=nt-ft*3.5,gt=ut?40:dt?44:ht?48:pt?52:0,xt=ut?6:dt?8:ht?10:pt?12:0,yt=()=>{ct(null)};return lt?dt||ut?jsxRuntimeExports.jsx(qe,{appear:!0,show:!!lt,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative",style:{zIndex:9999},onClose:yt,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"translate-y-full opacity-0 scale-95",enterTo:"translate-y-0 opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-full opacity-0 scale-95",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-center",children:jsxRuntimeExports.jsx(_t.Panel,{className:"w-screen overflow-hidden transition-all transform bg-gray-800 shadow-xl",children:jsxRuntimeExports.jsx(SideBarTabView,{height:"100%",sideBarContainerWidth:"100%",panelHeight:nt,raisedHandsParticipants:st,panelHeaderHeight:gt,panelHeaderPadding:xt,panelPadding:ft,handleClose:yt})})})})})]})}):jsxRuntimeExports.jsx(SideBarTabView,{height:mt,sideBarContainerWidth:rt,panelHeight:mt-gt-xt,raisedHandsParticipants:st,panelHeaderHeight:gt,panelHeaderPadding:xt,panelPadding:ft,handleClose:yt,meetingMode:it}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}var loadScript=function(rt,it,st){var lt=document.head||document.getElementsByTagName("head")[0],ct=document.createElement("script");typeof it=="function"&&(st=it,it={}),it=it||{},st=st||function(){},ct.type=it.type||"text/javascript",ct.charset=it.charset||"utf8",ct.async="async"in it?!!it.async:!0,ct.src=rt,it.attrs&&setAttributes(ct,it.attrs),it.text&&(ct.text=""+it.text);var ut="onload"in ct?stdOnEnd:ieOnEnd;ut(ct,st),ct.onload||stdOnEnd(ct,st),lt.appendChild(ct)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}var isMergeableObject=function(rt){return isNonNullObject(rt)&&!isSpecial(rt)};function isNonNullObject(nt){return!!nt&&typeof nt=="object"}function isSpecial(nt){var rt=Object.prototype.toString.call(nt);return rt==="[object RegExp]"||rt==="[object Date]"||isReactElement(nt)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(nt){return nt.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(nt){return Array.isArray(nt)?[]:{}}function cloneUnlessOtherwiseSpecified(nt,rt){return rt.clone!==!1&&rt.isMergeableObject(nt)?deepmerge(emptyTarget(nt),nt,rt):nt}function defaultArrayMerge(nt,rt,it){return nt.concat(rt).map(function(st){return cloneUnlessOtherwiseSpecified(st,it)})}function getMergeFunction(nt,rt){if(!rt.customMerge)return deepmerge;var it=rt.customMerge(nt);return typeof it=="function"?it:deepmerge}function getEnumerableOwnPropertySymbols(nt){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(nt).filter(function(rt){return Object.propertyIsEnumerable.call(nt,rt)}):[]}function getKeys(nt){return Object.keys(nt).concat(getEnumerableOwnPropertySymbols(nt))}function propertyIsOnObject(nt,rt){try{return rt in nt}catch{return!1}}function propertyIsUnsafe(nt,rt){return propertyIsOnObject(nt,rt)&&!(Object.hasOwnProperty.call(nt,rt)&&Object.propertyIsEnumerable.call(nt,rt))}function mergeObject(nt,rt,it){var st={};return it.isMergeableObject(nt)&&getKeys(nt).forEach(function(lt){st[lt]=cloneUnlessOtherwiseSpecified(nt[lt],it)}),getKeys(rt).forEach(function(lt){propertyIsUnsafe(nt,lt)||(propertyIsOnObject(nt,lt)&&it.isMergeableObject(rt[lt])?st[lt]=getMergeFunction(lt,it)(nt[lt],rt[lt],it):st[lt]=cloneUnlessOtherwiseSpecified(rt[lt],it))}),st}function deepmerge(nt,rt,it){it=it||{},it.arrayMerge=it.arrayMerge||defaultArrayMerge,it.isMergeableObject=it.isMergeableObject||isMergeableObject,it.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var st=Array.isArray(rt),lt=Array.isArray(nt),ct=st===lt;return ct?st?it.arrayMerge(nt,rt,it):mergeObject(nt,rt,it):cloneUnlessOtherwiseSpecified(rt,it)}deepmerge.all=function(rt,it){if(!Array.isArray(rt))throw new Error("first argument should be an array");return rt.reduce(function(st,lt){return deepmerge(st,lt,it)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1,__create$4=Object.create,__defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__getOwnPropNames$6=Object.getOwnPropertyNames,__getProtoOf$4=Object.getPrototypeOf,__hasOwnProp$6=Object.prototype.hasOwnProperty,__export$6=(nt,rt)=>{for(var it in rt)__defProp$6(nt,it,{get:rt[it],enumerable:!0})},__copyProps$6=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$6(rt))!__hasOwnProp$6.call(nt,lt)&&lt!==it&&__defProp$6(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$6(rt,lt))||st.enumerable});return nt},__toESM$4=(nt,rt,it)=>(it=nt!=null?__create$4(__getProtoOf$4(nt)):{},__copyProps$6(rt||!nt||!nt.__esModule?__defProp$6(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$6=nt=>__copyProps$6(__defProp$6({},"__esModule",{value:!0}),nt),utils_exports={};__export$6(utils_exports,{callPlayer:()=>callPlayer,getConfig:()=>getConfig,getSDK:()=>getSDK,isBlobUrl:()=>isBlobUrl,isMediaStream:()=>isMediaStream,lazy:()=>lazy,omit:()=>omit,parseEndTime:()=>parseEndTime,parseStartTime:()=>parseStartTime,queryString:()=>queryString,randomString:()=>randomString,supportsWebKitPresentationMode:()=>supportsWebKitPresentationMode});var utils=__toCommonJS$6(utils_exports),import_react$2=__toESM$4(reactExports),import_load_script=__toESM$4(loadScript),import_deepmerge$1=__toESM$4(cjs);const lazy=nt=>import_react$2.default.lazy(async()=>{const rt=await nt();return typeof rt.default=="function"?rt:rt.default}),MATCH_START_QUERY=/[?&#](?:start|t)=([0-9hms]+)/,MATCH_END_QUERY=/[?&#]end=([0-9hms]+)/,MATCH_START_STAMP=/(\d+)(h|m|s)/g,MATCH_NUMERIC=/^\d+$/;function parseTimeParam(nt,rt){if(nt instanceof Array)return;const it=nt.match(rt);if(it){const st=it[1];if(st.match(MATCH_START_STAMP))return parseTimeString(st);if(MATCH_NUMERIC.test(st))return parseInt(st)}}function parseTimeString(nt){let rt=0,it=MATCH_START_STAMP.exec(nt);for(;it!==null;){const[,st,lt]=it;lt==="h"&&(rt+=parseInt(st,10)*60*60),lt==="m"&&(rt+=parseInt(st,10)*60),lt==="s"&&(rt+=parseInt(st,10)),it=MATCH_START_STAMP.exec(nt)}return rt}function parseStartTime(nt){return parseTimeParam(nt,MATCH_START_QUERY)}function parseEndTime(nt){return parseTimeParam(nt,MATCH_END_QUERY)}function randomString(){return Math.random().toString(36).substr(2,5)}function queryString(nt){return Object.keys(nt).map(rt=>`${rt}=${nt[rt]}`).join("&")}function getGlobal(nt){return window[nt]?window[nt]:window.exports&&window.exports[nt]?window.exports[nt]:window.module&&window.module.exports&&window.module.exports[nt]?window.module.exports[nt]:null}const requests={},getSDK=function(rt,it,st=null,lt=()=>!0,ct=import_load_script.default){const ut=getGlobal(it);return ut&&lt(ut)?Promise.resolve(ut):new Promise((dt,ht)=>{if(requests[rt]){requests[rt].push({resolve:dt,reject:ht});return}requests[rt]=[{resolve:dt,reject:ht}];const pt=ft=>{requests[rt].forEach(mt=>mt.resolve(ft))};if(st){const ft=window[st];window[st]=function(){ft&&ft(),pt(getGlobal(it))}}ct(rt,ft=>{ft?(requests[rt].forEach(mt=>mt.reject(ft)),requests[rt]=null):st||pt(getGlobal(it))})})};function getConfig(nt,rt){return(0,import_deepmerge$1.default)(rt.config,nt.config)}function omit(nt,...rt){const it=[].concat(...rt),st={},lt=Object.keys(nt);for(const ct of lt)it.indexOf(ct)===-1&&(st[ct]=nt[ct]);return st}function callPlayer(nt,...rt){if(!this.player||!this.player[nt]){let it=`ReactPlayer: ${this.constructor.displayName} player could not call %c${nt}%c – `;return this.player?this.player[nt]||(it+="The method was not available"):it+="The player was not available",console.warn(it,"font-weight: bold",""),null}return this.player[nt](...rt)}function isMediaStream(nt){return typeof window<"u"&&typeof window.MediaStream<"u"&&nt instanceof window.MediaStream}function isBlobUrl(nt){return/^blob:/.test(nt)}function supportsWebKitPresentationMode(nt=document.createElement("video")){const rt=/iPhone|iPod/.test(navigator.userAgent)===!1;return nt.webkitSupportsPresentationMode&&typeof nt.webkitSetPresentationMode=="function"&&rt}function enableStubOn(nt){return nt}var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__getOwnPropNames$5=Object.getOwnPropertyNames,__hasOwnProp$5=Object.prototype.hasOwnProperty,__export$5=(nt,rt)=>{for(var it in rt)__defProp$5(nt,it,{get:rt[it],enumerable:!0})},__copyProps$5=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$5(rt))!__hasOwnProp$5.call(nt,lt)&&lt!==it&&__defProp$5(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$5(rt,lt))||st.enumerable});return nt},__toCommonJS$5=nt=>__copyProps$5(__defProp$5({},"__esModule",{value:!0}),nt),patterns_exports={};__export$5(patterns_exports,{AUDIO_EXTENSIONS:()=>AUDIO_EXTENSIONS,DASH_EXTENSIONS:()=>DASH_EXTENSIONS,FLV_EXTENSIONS:()=>FLV_EXTENSIONS,HLS_EXTENSIONS:()=>HLS_EXTENSIONS,MATCH_URL_DAILYMOTION:()=>MATCH_URL_DAILYMOTION,MATCH_URL_FACEBOOK:()=>MATCH_URL_FACEBOOK,MATCH_URL_FACEBOOK_WATCH:()=>MATCH_URL_FACEBOOK_WATCH,MATCH_URL_KALTURA:()=>MATCH_URL_KALTURA,MATCH_URL_MIXCLOUD:()=>MATCH_URL_MIXCLOUD,MATCH_URL_SOUNDCLOUD:()=>MATCH_URL_SOUNDCLOUD,MATCH_URL_STREAMABLE:()=>MATCH_URL_STREAMABLE,MATCH_URL_TWITCH_CHANNEL:()=>MATCH_URL_TWITCH_CHANNEL,MATCH_URL_TWITCH_VIDEO:()=>MATCH_URL_TWITCH_VIDEO,MATCH_URL_VIDYARD:()=>MATCH_URL_VIDYARD,MATCH_URL_VIMEO:()=>MATCH_URL_VIMEO,MATCH_URL_WISTIA:()=>MATCH_URL_WISTIA,MATCH_URL_YOUTUBE:()=>MATCH_URL_YOUTUBE,VIDEO_EXTENSIONS:()=>VIDEO_EXTENSIONS,canPlay:()=>canPlay});var patterns=__toCommonJS$5(patterns_exports),import_utils$3=utils;const MATCH_URL_YOUTUBE=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,MATCH_URL_SOUNDCLOUD=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,MATCH_URL_VIMEO=/vimeo\.com\/(?!progressive_redirect).+/,MATCH_URL_FACEBOOK=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,MATCH_URL_FACEBOOK_WATCH=/^https?:\/\/fb\.watch\/.+$/,MATCH_URL_STREAMABLE=/streamable\.com\/([a-z0-9]+)$/,MATCH_URL_WISTIA=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,MATCH_URL_TWITCH_VIDEO=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,MATCH_URL_TWITCH_CHANNEL=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,MATCH_URL_DAILYMOTION=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,MATCH_URL_MIXCLOUD=/mixcloud\.com\/([^/]+\/[^/]+)/,MATCH_URL_VIDYARD=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,MATCH_URL_KALTURA=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,HLS_EXTENSIONS=/\.(m3u8)($|\?)/i,DASH_EXTENSIONS=/\.(mpd)($|\?)/i,FLV_EXTENSIONS=/\.(flv)($|\?)/i,canPlayFile=nt=>{if(nt instanceof Array){for(const rt of nt)if(typeof rt=="string"&&canPlayFile(rt)||canPlayFile(rt.src))return!0;return!1}return(0,import_utils$3.isMediaStream)(nt)||(0,import_utils$3.isBlobUrl)(nt)?!0:AUDIO_EXTENSIONS.test(nt)||VIDEO_EXTENSIONS.test(nt)||HLS_EXTENSIONS.test(nt)||DASH_EXTENSIONS.test(nt)||FLV_EXTENSIONS.test(nt)},canPlay={youtube:nt=>nt instanceof Array?nt.every(rt=>MATCH_URL_YOUTUBE.test(rt)):MATCH_URL_YOUTUBE.test(nt),soundcloud:nt=>MATCH_URL_SOUNDCLOUD.test(nt)&&!AUDIO_EXTENSIONS.test(nt),vimeo:nt=>MATCH_URL_VIMEO.test(nt)&&!VIDEO_EXTENSIONS.test(nt)&&!HLS_EXTENSIONS.test(nt),facebook:nt=>MATCH_URL_FACEBOOK.test(nt)||MATCH_URL_FACEBOOK_WATCH.test(nt),streamable:nt=>MATCH_URL_STREAMABLE.test(nt),wistia:nt=>MATCH_URL_WISTIA.test(nt),twitch:nt=>MATCH_URL_TWITCH_VIDEO.test(nt)||MATCH_URL_TWITCH_CHANNEL.test(nt),dailymotion:nt=>MATCH_URL_DAILYMOTION.test(nt),mixcloud:nt=>MATCH_URL_MIXCLOUD.test(nt),vidyard:nt=>MATCH_URL_VIDYARD.test(nt),kaltura:nt=>MATCH_URL_KALTURA.test(nt),file:canPlayFile};var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__getOwnPropNames$4=Object.getOwnPropertyNames,__hasOwnProp$4=Object.prototype.hasOwnProperty,__export$4=(nt,rt)=>{for(var it in rt)__defProp$4(nt,it,{get:rt[it],enumerable:!0})},__copyProps$4=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$4(rt))!__hasOwnProp$4.call(nt,lt)&&lt!==it&&__defProp$4(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$4(rt,lt))||st.enumerable});return nt},__toCommonJS$4=nt=>__copyProps$4(__defProp$4({},"__esModule",{value:!0}),nt),players_exports={};__export$4(players_exports,{default:()=>players_default});var players=__toCommonJS$4(players_exports),import_utils$2=utils,import_patterns=patterns,players_default=[{key:"youtube",name:"YouTube",canPlay:import_patterns.canPlay.youtube,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./YouTube-6A-7oSB8.js").then(nt=>nt.Y),__vite__mapDeps([])))},{key:"soundcloud",name:"SoundCloud",canPlay:import_patterns.canPlay.soundcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./SoundCloud-AvUI0yeN.js").then(nt=>nt.S),__vite__mapDeps([])))},{key:"vimeo",name:"Vimeo",canPlay:import_patterns.canPlay.vimeo,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vimeo-qy0dEyCD.js").then(nt=>nt.V),__vite__mapDeps([])))},{key:"facebook",name:"Facebook",canPlay:import_patterns.canPlay.facebook,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Facebook-9mcnGxdK.js").then(nt=>nt.F),__vite__mapDeps([])))},{key:"streamable",name:"Streamable",canPlay:import_patterns.canPlay.streamable,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Streamable-2yAVqNTj.js").then(nt=>nt.S),__vite__mapDeps([])))},{key:"wistia",name:"Wistia",canPlay:import_patterns.canPlay.wistia,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Wistia-p1AVbSQ0.js").then(nt=>nt.W),__vite__mapDeps([])))},{key:"twitch",name:"Twitch",canPlay:import_patterns.canPlay.twitch,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Twitch-hJPI8n_H.js").then(nt=>nt.T),__vite__mapDeps([])))},{key:"dailymotion",name:"DailyMotion",canPlay:import_patterns.canPlay.dailymotion,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./DailyMotion-vlthM7HB.js").then(nt=>nt.D),__vite__mapDeps([])))},{key:"mixcloud",name:"Mixcloud",canPlay:import_patterns.canPlay.mixcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Mixcloud-I2STwxR6.js").then(nt=>nt.M),__vite__mapDeps([])))},{key:"vidyard",name:"Vidyard",canPlay:import_patterns.canPlay.vidyard,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vidyard-kaV1dwrQ.js").then(nt=>nt.V),__vite__mapDeps([])))},{key:"kaltura",name:"Kaltura",canPlay:import_patterns.canPlay.kaltura,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Kaltura-lafq8CPv.js").then(nt=>nt.K),__vite__mapDeps([])))},{key:"file",name:"FilePlayer",canPlay:import_patterns.canPlay.file,canEnablePIP:nt=>import_patterns.canPlay.file(nt)&&(document.pictureInPictureEnabled||(0,import_utils$2.supportsWebKitPresentationMode)())&&!import_patterns.AUDIO_EXTENSIONS.test(nt),lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./FilePlayer-7bUVC2sb.js").then(nt=>nt.F),__vite__mapDeps([])))}],safeIsNaN=Number.isNaN||function(rt){return typeof rt=="number"&&rt!==rt};function isEqual(nt,rt){return!!(nt===rt||safeIsNaN(nt)&&safeIsNaN(rt))}function areInputsEqual(nt,rt){if(nt.length!==rt.length)return!1;for(var it=0;it<nt.length;it++)if(!isEqual(nt[it],rt[it]))return!1;return!0}function memoizeOne(nt,rt){rt===void 0&&(rt=areInputsEqual);var it,st=[],lt,ct=!1;function ut(){for(var dt=[],ht=0;ht<arguments.length;ht++)dt[ht]=arguments[ht];return ct&&it===this&&rt(dt,st)||(lt=nt.apply(this,dt),ct=!0,it=this,st=dt),lt}return ut}const memoizeOne_esm=Object.freeze(Object.defineProperty({__proto__:null,default:memoizeOne},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(memoizeOne_esm);var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(nt,rt){if(nt===rt)return!0;if(nt&&rt&&typeof nt=="object"&&typeof rt=="object"){if(nt.constructor!==rt.constructor)return!1;var it,st,lt;if(Array.isArray(nt)){if(it=nt.length,it!=rt.length)return!1;for(st=it;st--!==0;)if(!equal(nt[st],rt[st]))return!1;return!0}var ct;if(hasMap&&nt instanceof Map&&rt instanceof Map){if(nt.size!==rt.size)return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!rt.has(st.value[0]))return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!equal(st.value[1],rt.get(st.value[0])))return!1;return!0}if(hasSet&&nt instanceof Set&&rt instanceof Set){if(nt.size!==rt.size)return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!rt.has(st.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(nt)&&ArrayBuffer.isView(rt)){if(it=nt.length,it!=rt.length)return!1;for(st=it;st--!==0;)if(nt[st]!==rt[st])return!1;return!0}if(nt.constructor===RegExp)return nt.source===rt.source&&nt.flags===rt.flags;if(nt.valueOf!==Object.prototype.valueOf&&typeof nt.valueOf=="function"&&typeof rt.valueOf=="function")return nt.valueOf()===rt.valueOf();if(nt.toString!==Object.prototype.toString&&typeof nt.toString=="function"&&typeof rt.toString=="function")return nt.toString()===rt.toString();if(lt=Object.keys(nt),it=lt.length,it!==Object.keys(rt).length)return!1;for(st=it;st--!==0;)if(!Object.prototype.hasOwnProperty.call(rt,lt[st]))return!1;if(hasElementType&&nt instanceof Element)return!1;for(st=it;st--!==0;)if(!((lt[st]==="_owner"||lt[st]==="__v"||lt[st]==="__o")&&nt.$$typeof)&&!equal(nt[lt[st]],rt[lt[st]]))return!1;return!0}return nt!==nt&&rt!==rt}var reactFastCompare=function(rt,it){try{return equal(rt,it)}catch(st){if((st.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw st}},__create$3=Object.create,__defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__getOwnPropNames$3=Object.getOwnPropertyNames,__getProtoOf$3=Object.getPrototypeOf,__hasOwnProp$3=Object.prototype.hasOwnProperty,__export$3=(nt,rt)=>{for(var it in rt)__defProp$3(nt,it,{get:rt[it],enumerable:!0})},__copyProps$3=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$3(rt))!__hasOwnProp$3.call(nt,lt)&&lt!==it&&__defProp$3(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$3(rt,lt))||st.enumerable});return nt},__toESM$3=(nt,rt,it)=>(it=nt!=null?__create$3(__getProtoOf$3(nt)):{},__copyProps$3(rt||!nt||!nt.__esModule?__defProp$3(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$3=nt=>__copyProps$3(__defProp$3({},"__esModule",{value:!0}),nt),props_exports={};__export$3(props_exports,{defaultProps:()=>defaultProps,propTypes:()=>propTypes});var props=__toCommonJS$3(props_exports),import_prop_types=__toESM$3(propTypesExports);const{string,bool,number,array,oneOfType,shape,object,func,node}=import_prop_types.default,propTypes={url:oneOfType([string,array,object]),playing:bool,loop:bool,controls:bool,volume:number,muted:bool,playbackRate:number,width:oneOfType([string,number]),height:oneOfType([string,number]),style:object,progressInterval:number,playsinline:bool,pip:bool,stopOnUnmount:bool,light:oneOfType([bool,string,object]),playIcon:node,previewTabIndex:number,fallback:node,oEmbedUrl:string,wrapper:oneOfType([string,func,shape({render:func.isRequired})]),config:shape({soundcloud:shape({options:object}),youtube:shape({playerVars:object,embedOptions:object,onUnstarted:func}),facebook:shape({appId:string,version:string,playerId:string,attributes:object}),dailymotion:shape({params:object}),vimeo:shape({playerOptions:object,title:string}),file:shape({attributes:object,tracks:array,forceVideo:bool,forceAudio:bool,forceHLS:bool,forceSafariHLS:bool,forceDisableHls:bool,forceDASH:bool,forceFLV:bool,hlsOptions:object,hlsVersion:string,dashVersion:string,flvVersion:string}),wistia:shape({options:object,playerId:string,customControls:array}),mixcloud:shape({options:object}),twitch:shape({options:object,playerId:string}),vidyard:shape({options:object})}),onReady:func,onStart:func,onPlay:func,onPause:func,onBuffer:func,onBufferEnd:func,onEnded:func,onError:func,onDuration:func,onSeek:func,onPlaybackRateChange:func,onPlaybackQualityChange:func,onProgress:func,onClickPreview:func,onEnablePIP:func,onDisablePIP:func},noop=()=>{},defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:noop},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:noop,onStart:noop,onPlay:noop,onPause:noop,onBuffer:noop,onBufferEnd:noop,onEnded:noop,onError:noop,onDuration:noop,onSeek:noop,onPlaybackRateChange:noop,onPlaybackQualityChange:noop,onProgress:noop,onClickPreview:noop,onEnablePIP:noop,onDisablePIP:noop};var __create$2=Object.create,__defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__getOwnPropNames$2=Object.getOwnPropertyNames,__getProtoOf$2=Object.getPrototypeOf,__hasOwnProp$2=Object.prototype.hasOwnProperty,__defNormalProp$1=(nt,rt,it)=>rt in nt?__defProp$2(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__export$2=(nt,rt)=>{for(var it in rt)__defProp$2(nt,it,{get:rt[it],enumerable:!0})},__copyProps$2=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$2(rt))!__hasOwnProp$2.call(nt,lt)&&lt!==it&&__defProp$2(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$2(rt,lt))||st.enumerable});return nt},__toESM$2=(nt,rt,it)=>(it=nt!=null?__create$2(__getProtoOf$2(nt)):{},__copyProps$2(rt||!nt||!nt.__esModule?__defProp$2(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$2=nt=>__copyProps$2(__defProp$2({},"__esModule",{value:!0}),nt),__publicField$1=(nt,rt,it)=>(__defNormalProp$1(nt,typeof rt!="symbol"?rt+"":rt,it),it),Player_exports={};__export$2(Player_exports,{default:()=>Player});var Player_1=__toCommonJS$2(Player_exports),import_react$1=__toESM$2(reactExports),import_react_fast_compare$1=__toESM$2(reactFastCompare),import_props$1=props,import_utils$1=utils;const SEEK_ON_PLAY_EXPIRY=5e3;class Player extends import_react$1.Component{constructor(){super(...arguments),__publicField$1(this,"mounted",!1),__publicField$1(this,"isReady",!1),__publicField$1(this,"isPlaying",!1),__publicField$1(this,"isLoading",!0),__publicField$1(this,"loadOnReady",null),__publicField$1(this,"startOnPlay",!0),__publicField$1(this,"seekOnPlay",null),__publicField$1(this,"onDurationCalled",!1),__publicField$1(this,"handlePlayerMount",rt=>{if(this.player){this.progress();return}this.player=rt,this.player.load(this.props.url),this.progress()}),__publicField$1(this,"getInternalPlayer",rt=>this.player?this.player[rt]:null),__publicField$1(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const rt=this.getCurrentTime()||0,it=this.getSecondsLoaded(),st=this.getDuration();if(st){const lt={playedSeconds:rt,played:rt/st};it!==null&&(lt.loadedSeconds=it,lt.loaded=it/st),(lt.playedSeconds!==this.prevPlayed||lt.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(lt),this.prevPlayed=lt.playedSeconds,this.prevLoaded=lt.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),__publicField$1(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:rt,playing:it,volume:st,muted:lt}=this.props;rt(),!lt&&st!==null&&this.player.setVolume(st),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):it&&this.player.play(),this.handleDurationCheck()}),__publicField$1(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:rt,onPlay:it,playbackRate:st}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&st!==1&&this.player.setPlaybackRate(st),rt(),this.startOnPlay=!1),it(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),__publicField$1(this,"handlePause",rt=>{this.isPlaying=!1,this.isLoading||this.props.onPause(rt)}),__publicField$1(this,"handleEnded",()=>{const{activePlayer:rt,loop:it,onEnded:st}=this.props;rt.loopOnEnded&&it&&this.seekTo(0),it||(this.isPlaying=!1,st())}),__publicField$1(this,"handleError",(...rt)=>{this.isLoading=!1,this.props.onError(...rt)}),__publicField$1(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const rt=this.getDuration();rt?this.onDurationCalled||(this.props.onDuration(rt),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),__publicField$1(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(rt){if(!this.player)return;const{url:it,playing:st,volume:lt,muted:ct,playbackRate:ut,pip:dt,loop:ht,activePlayer:pt,disableDeferredLoading:ft}=this.props;if(!(0,import_react_fast_compare$1.default)(rt.url,it)){if(this.isLoading&&!pt.forceLoad&&!ft&&!(0,import_utils$1.isMediaStream)(it)){console.warn(`ReactPlayer: the attempt to load ${it} is being deferred until the player has loaded`),this.loadOnReady=it;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(it,this.isReady)}!rt.playing&&st&&!this.isPlaying&&this.player.play(),rt.playing&&!st&&this.isPlaying&&this.player.pause(),!rt.pip&&dt&&this.player.enablePIP&&this.player.enablePIP(),rt.pip&&!dt&&this.player.disablePIP&&this.player.disablePIP(),rt.volume!==lt&&lt!==null&&this.player.setVolume(lt),rt.muted!==ct&&(ct?this.player.mute():(this.player.unmute(),lt!==null&&setTimeout(()=>this.player.setVolume(lt)))),rt.playbackRate!==ut&&this.player.setPlaybackRate&&this.player.setPlaybackRate(ut),rt.loop!==ht&&this.player.setLoop&&this.player.setLoop(ht)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(rt,it,st){if(!this.isReady){rt!==0&&(this.seekOnPlay=rt,setTimeout(()=>{this.seekOnPlay=null},SEEK_ON_PLAY_EXPIRY));return}if(it?it==="fraction":rt>0&&rt<1){const ct=this.player.getDuration();if(!ct){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(ct*rt,st);return}this.player.seekTo(rt,st)}render(){const rt=this.props.activePlayer;return rt?import_react$1.default.createElement(rt,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}__publicField$1(Player,"displayName","Player");__publicField$1(Player,"propTypes",import_props$1.propTypes);__publicField$1(Player,"defaultProps",import_props$1.defaultProps);var define_global_default={},__create$1=Object.create,__defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__getOwnPropNames$1=Object.getOwnPropertyNames,__getProtoOf$1=Object.getPrototypeOf,__hasOwnProp$1=Object.prototype.hasOwnProperty,__defNormalProp=(nt,rt,it)=>rt in nt?__defProp$1(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__export$1=(nt,rt)=>{for(var it in rt)__defProp$1(nt,it,{get:rt[it],enumerable:!0})},__copyProps$1=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$1(rt))!__hasOwnProp$1.call(nt,lt)&&lt!==it&&__defProp$1(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$1(rt,lt))||st.enumerable});return nt},__toESM$1=(nt,rt,it)=>(it=nt!=null?__create$1(__getProtoOf$1(nt)):{},__copyProps$1(rt||!nt||!nt.__esModule?__defProp$1(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$1=nt=>__copyProps$1(__defProp$1({},"__esModule",{value:!0}),nt),__publicField=(nt,rt,it)=>(__defNormalProp(nt,typeof rt!="symbol"?rt+"":rt,it),it),ReactPlayer_exports={};__export$1(ReactPlayer_exports,{createReactPlayer:()=>createReactPlayer});var ReactPlayer$1=__toCommonJS$1(ReactPlayer_exports),import_react=__toESM$1(reactExports),import_deepmerge=__toESM$1(cjs),import_memoize_one=__toESM$1(require$$2),import_react_fast_compare=__toESM$1(reactFastCompare),import_props=props,import_utils=utils,import_Player=__toESM$1(Player_1);const Preview=(0,import_utils.lazy)(()=>__vitePreload(()=>import("./Preview-g04VzHc8.js").then(nt=>nt.P),__vite__mapDeps([]))),IS_BROWSER=typeof window<"u"&&window.document,IS_GLOBAL=typeof define_global_default<"u"&&define_global_default.window&&define_global_default.window.document,SUPPORTED_PROPS=Object.keys(import_props.propTypes),UniversalSuspense=IS_BROWSER||IS_GLOBAL?import_react.Suspense:()=>null,customPlayers=[],createReactPlayer=(nt,rt)=>{var it;return it=class extends import_react.Component{constructor(){super(...arguments),__publicField(this,"state",{showPreview:!!this.props.light}),__publicField(this,"references",{wrapper:st=>{this.wrapper=st},player:st=>{this.player=st}}),__publicField(this,"handleClickPreview",st=>{this.setState({showPreview:!1}),this.props.onClickPreview(st)}),__publicField(this,"showPreview",()=>{this.setState({showPreview:!0})}),__publicField(this,"getDuration",()=>this.player?this.player.getDuration():null),__publicField(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),__publicField(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),__publicField(this,"getInternalPlayer",(st="player")=>this.player?this.player.getInternalPlayer(st):null),__publicField(this,"seekTo",(st,lt,ct)=>{if(!this.player)return null;this.player.seekTo(st,lt,ct)}),__publicField(this,"handleReady",()=>{this.props.onReady(this)}),__publicField(this,"getActivePlayer",(0,import_memoize_one.default)(st=>{for(const lt of[...customPlayers,...nt])if(lt.canPlay(st))return lt;return rt||null})),__publicField(this,"getConfig",(0,import_memoize_one.default)((st,lt)=>{const{config:ct}=this.props;return import_deepmerge.default.all([import_props.defaultProps.config,import_props.defaultProps.config[lt]||{},ct,ct[lt]||{}])})),__publicField(this,"getAttributes",(0,import_memoize_one.default)(st=>(0,import_utils.omit)(this.props,SUPPORTED_PROPS))),__publicField(this,"renderActivePlayer",st=>{if(!st)return null;const lt=this.getActivePlayer(st);if(!lt)return null;const ct=this.getConfig(st,lt.key);return import_react.default.createElement(import_Player.default,{...this.props,key:lt.key,ref:this.references.player,config:ct,activePlayer:lt.lazyPlayer||lt,onReady:this.handleReady})})}shouldComponentUpdate(st,lt){return!(0,import_react_fast_compare.default)(this.props,st)||!(0,import_react_fast_compare.default)(this.state,lt)}componentDidUpdate(st){const{light:lt}=this.props;!st.light&&lt&&this.setState({showPreview:!0}),st.light&&!lt&&this.setState({showPreview:!1})}renderPreview(st){if(!st)return null;const{light:lt,playIcon:ct,previewTabIndex:ut,oEmbedUrl:dt}=this.props;return import_react.default.createElement(Preview,{url:st,light:lt,playIcon:ct,previewTabIndex:ut,oEmbedUrl:dt,onClick:this.handleClickPreview})}render(){const{url:st,style:lt,width:ct,height:ut,fallback:dt,wrapper:ht}=this.props,{showPreview:pt}=this.state,ft=this.getAttributes(st),mt=typeof ht=="string"?this.references.wrapper:void 0;return import_react.default.createElement(ht,{ref:mt,style:{...lt,width:ct,height:ut},...ft},import_react.default.createElement(UniversalSuspense,{fallback:dt},pt?this.renderPreview(st):this.renderActivePlayer(st)))}},__publicField(it,"displayName","ReactPlayer"),__publicField(it,"propTypes",import_props.propTypes),__publicField(it,"defaultProps",import_props.defaultProps),__publicField(it,"addCustomPlayer",st=>{customPlayers.push(st)}),__publicField(it,"removeCustomPlayers",()=>{customPlayers.length=0}),__publicField(it,"canPlay",st=>{for(const lt of[...customPlayers,...nt])if(lt.canPlay(st))return!0;return!1}),__publicField(it,"canEnablePIP",st=>{for(const lt of[...customPlayers,...nt])if(lt.canEnablePIP&&lt.canEnablePIP(st))return!0;return!1}),it};var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(nt,rt)=>{for(var it in rt)__defProp(nt,it,{get:rt[it],enumerable:!0})},__copyProps=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames(rt))!__hasOwnProp.call(nt,lt)&&lt!==it&&__defProp(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc(rt,lt))||st.enumerable});return nt},__toESM=(nt,rt,it)=>(it=nt!=null?__create(__getProtoOf(nt)):{},__copyProps(rt||!nt||!nt.__esModule?__defProp(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS=nt=>__copyProps(__defProp({},"__esModule",{value:!0}),nt),src_exports={};__export(src_exports,{default:()=>src_default});var lib=__toCommonJS(src_exports),import_players=__toESM(players),import_ReactPlayer=ReactPlayer$1;const fallback=import_players.default[import_players.default.length-1];var src_default=(0,import_ReactPlayer.createReactPlayer)(import_players.default,fallback);const ReactPlayer=getDefaultExportFromCjs(lib),MicOffSmallIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:20,height:21,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:21,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 .543h20v20H0z"})}),jsxRuntimeExports.jsxs("g",{mask:"url(#a)",fill:nt.fillcolor?nt.fillcolor:"#050A0E",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.167 9.453v1.256c0 .752.316 1.473.878 2.004.563.531 1.326.83 2.122.83.288 0 .572-.04.844-.115L7.167 9.453Zm4.929 5.096a4.72 4.72 0 0 1-1.93.41 4.638 4.638 0 0 1-3.181-1.244 4.134 4.134 0 0 1-1.319-3.006v-.337a.689.689 0 0 0-.22-.5.773.773 0 0 0-.53-.208.773.773 0 0 0-.53.207.689.689 0 0 0-.22.501v.337c0 2.89 2.29 5.275 5.25 5.624v1.46h-1.5a.773.773 0 0 0-.53.207.689.689 0 0 0-.22.501c0 .188.08.368.22.5.14.134.332.208.53.208h4.5c.2 0 .39-.074.53-.207a.689.689 0 0 0 .22-.501.689.689 0 0 0-.22-.5.773.773 0 0 0-.53-.208h-1.5v-1.46a6.246 6.246 0 0 0 2.226-.702l-1.046-1.082Zm3.466-1.36-1.119-1.157c.147-.423.223-.87.223-1.323v-.337c0-.188.08-.368.22-.5a.773.773 0 0 1 .53-.208c.2 0 .39.075.53.207.141.133.22.313.22.501v.337c0 .866-.21 1.713-.604 2.48Zm-2.395-2.477L7.21 4.555c.106-.57.395-1.1.834-1.516a3.092 3.092 0 0 1 2.122-.83c.795 0 1.558.299 2.12.83.563.532.88 1.252.88 2.004V10.712Z"}),jsxRuntimeExports.jsx("rect",{x:2.755,y:3.043,width:20.816,height:1.515,rx:.757,transform:"rotate(45.956 2.755 3.043)"})]})]}),ScreenShareIcon=nt=>jsxRuntimeExports.jsx("svg",{className:"MuiSvgIcon-root ",viewBox:"0 0 24 24","aria-hidden":"true",style:{height:48,width:48},...nt,children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"})}),SpeakerIcon=nt=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...nt,children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M8.8 4.19c0-.63-.537-1.142-1.2-1.142-.663 0-1.2.511-1.2 1.142v6.858c0 .63.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V4.19ZM4.8 1.905c0-.631-.537-1.143-1.2-1.143-.663 0-1.2.512-1.2 1.143v11.428c0 .631.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V1.905ZM12.8 1.905c0-.631-.537-1.143-1.2-1.143-.663 0-1.2.512-1.2 1.143v11.428c0 .631.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V1.905Z"})});function NetworkIcon(nt){return jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("path",{d:"M3.8 9.33333H2V13H3.8V9.33333Z",fill:nt.color1}),jsxRuntimeExports.jsx("path",{d:"M7.39998 7.5H5.59998V13H7.39998V7.5Z",fill:nt.color2}),jsxRuntimeExports.jsx("path",{d:"M11 5.20831H9.20001V13H11V5.20831Z",fill:nt.color3}),jsxRuntimeExports.jsx("path",{d:"M14.6 2H12.8V13H14.6V2Z",fill:nt.color4})]})}const CornerDisplayName=({participantId:nt,isPresenting:rt,displayName:it,isLocal:st,micOn:lt,screenShareStream:ct,mouseOver:ut,isActiveSpeaker:dt})=>{var Kt,Xt,or,tr,dr,fr,Sr,vr,mr,hr,gr,lr,Ir,wr,Fr,$r,hn,Zr,Qt,Jt,pr,Vr,Wr,zr,ln,xn,yn,Wn,Mn,sn,qn,Gr,qr,wn,Cr,nr,Ur,Mr,rn,Cn;const ht=useIsMobile(),pt=useIsTab(),ft=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),mt=reactResponsiveExports.useMediaQuery({minWidth:1440}),{height:gt}=useWindowSize(),[xt,yt]=reactExports.useState(null),[vt,St]=reactExports.useState(null),[Et,wt]=reactExports.useState({}),Rt=reactExports.useMemo(()=>xt==null?void 0:xt.offsetHeight,[xt]),Tt=reactExports.useMemo(()=>vt==null?void 0:vt.offsetWidth,[vt]),It=mt?32:ft?28:pt?24:ht?20:18,At=reactExports.useMemo(()=>ut,[ut]),{webcamStream:Dt,micStream:jt,getVideoStats:Ft,getAudioStats:Lt,getShareStats:Pt}=useParticipant(nt),Ot=reactExports.useRef(),[Nt,$t]=reactExports.useState({}),[Vt,Ut]=reactExports.useState({}),[zt,Bt]=reactExports.useState({}),Ht=async()=>{let Rr=[],pn=[],Tr=[];rt?Rr=await Pt():Dt?Rr=await Ft():jt&&(Rr=await Lt()),(Dt||jt||rt)&&(Tr=rt?await Pt():await Ft(),pn=rt?[]:await Lt());let xr=Rr&&Rr.length>0?getQualityScore(Rr[0]):100;$t(xr),Ut(pn),Bt(Tr)},Gt=[{label:"",audio:"Audio",video:"Video"},{label:"Latency",audio:Vt&&((Kt=Vt[0])!=null&&Kt.rtt)?`${(Xt=Vt[0])==null?void 0:Xt.rtt} ms`:"-",video:zt&&((or=zt[0])!=null&&or.rtt)?`${(tr=zt[0])==null?void 0:tr.rtt} ms`:"-"},{label:"Jitter",audio:Vt&&((dr=Vt[0])!=null&&dr.jitter)?`${parseFloat((fr=Vt[0])==null?void 0:fr.jitter).toFixed(2)} ms`:"-",video:zt&&((Sr=zt[0])!=null&&Sr.jitter)?`${parseFloat((vr=zt[0])==null?void 0:vr.jitter).toFixed(2)} ms`:"-"},{label:"Packet Loss",audio:Vt&&(mr=Vt[0])!=null&&mr.packetsLost?`${parseFloat(((hr=Vt[0])==null?void 0:hr.packetsLost)*100/((gr=Vt[0])==null?void 0:gr.totalPackets)).toFixed(2)}%`:"-",video:zt&&(lr=zt[0])!=null&&lr.packetsLost?`${parseFloat(((Ir=zt[0])==null?void 0:Ir.packetsLost)*100/((wr=zt[0])==null?void 0:wr.totalPackets)).toFixed(2)}%`:"-"},{label:"Bitrate",audio:Vt&&((Fr=Vt[0])!=null&&Fr.bitrate)?`${parseFloat(($r=Vt[0])==null?void 0:$r.bitrate).toFixed(2)} kb/s`:"-",video:zt&&((hn=zt[0])!=null&&hn.bitrate)?`${parseFloat((Zr=zt[0])==null?void 0:Zr.bitrate).toFixed(2)} kb/s`:"-"},{label:"Frame rate",audio:"-",video:zt&&(((Jt=(Qt=zt[0])==null?void 0:Qt.size)==null?void 0:Jt.framerate)===null||((Vr=(pr=zt[0])==null?void 0:pr.size)==null?void 0:Vr.framerate)===void 0)?"-":`${zt?(zr=(Wr=zt[0])==null?void 0:Wr.size)==null?void 0:zr.framerate:"-"}`},{label:"Resolution",audio:"-",video:zt?zt&&((xn=(ln=zt[0])==null?void 0:ln.size)==null?void 0:xn.width)===null?"-":`${(Wn=(yn=zt[0])==null?void 0:yn.size)==null?void 0:Wn.width}x${(sn=(Mn=zt[0])==null?void 0:Mn.size)==null?void 0:sn.height}`:"-"},{label:"Codec",audio:Vt&&((qn=Vt[0])!=null&&qn.codec)?(Gr=Vt[0])==null?void 0:Gr.codec:"-",video:zt&&((qr=zt[0])!=null&&qr.codec)?(wn=zt[0])==null?void 0:wn.codec:"-"},{label:"Cur. Layers",audio:"-",video:zt&&!st?zt&&((Cr=zt[0])==null?void 0:Cr.currentSpatialLayer)===null?"-":`S:${((nr=zt[0])==null?void 0:nr.currentSpatialLayer)||0} T:${((Ur=zt[0])==null?void 0:Ur.currentTemporalLayer)||0}`:"-"},{label:"Pref. Layers",audio:"-",video:zt&&!st?zt&&((Mr=zt[0])==null?void 0:Mr.preferredSpatialLayer)===null?"-":`S:${((rn=zt[0])==null?void 0:rn.preferredSpatialLayer)||0} T:${((Cn=zt[0])==null?void 0:Cn.preferredTemporalLayer)||0}`:"-"}];return reactExports.useEffect(()=>(Dt||jt?(Ht(),Ot.current&&clearInterval(Ot.current),Ot.current=setInterval(Ht,500)):Ot.current&&(clearInterval(Ot.current),Ot.current=null),()=>{Ot.current&&clearInterval(Ot.current)}),[Dt,jt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center p-2 rounded-md bottom-2 left-2",style:{backgroundColor:"#00000066",transition:"all 200ms",transitionTimingFunction:"linear",transform:`scale(${At?1:0})`},children:[!lt&&!rt?jsxRuntimeExports.jsx(MicOffSmallIcon,{fillcolor:"white"}):lt&&dt?jsxRuntimeExports.jsx(SpeakerIcon,{}):null,jsxRuntimeExports.jsx("p",{className:"text-sm text-white ml-0.5",children:rt?st?"You are presenting":`${nameTructed$1(it,15)} is presenting`:st?"You":nameTructed$1(it,26)})]}),(Dt||jt||ct)&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{onClick:Rr=>{Rr.stopPropagation()},className:"absolute p-2 rounded-md cursor-pointer top-2 right-2 ",children:jsxRuntimeExports.jsx(Ct,{className:"relative ",children:({close:Rr})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"absolute right-0 top-0 rounded-md flex items-center justify-center p-1.5 cursor-pointer",style:{backgroundColor:Nt>7?"#3BA55D":Nt>4?"#faa713":"#FF5D5D"},onClick:pn=>{pn.stopPropagation();const Tr=pn.target.getBoundingClientRect();wt({left:Math.round(Tr.x+Tr.width/2),top:Math.round(Tr.y+window.scrollY)})},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(NetworkIcon,{color1:"#ffffff",color2:"#ffffff",color3:"#ffffff",color4:"#ffffff",style:{height:It*.6,width:It*.6}})})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{style:{zIndex:999},className:"absolute",children:reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:St,style:{top:(Et==null?void 0:Et.top)+Rt>gt?gt-Rt-20:Et==null?void 0:Et.top,left:(Et==null?void 0:Et.left)-Tt<0?12:(Et==null?void 0:Et.left)-Tt},className:"absolute",children:jsxRuntimeExports.jsxs("div",{ref:yt,className:"bg-gray-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 ",children:[jsxRuntimeExports.jsxs("div",{className:"p-[9px] flex items-center justify-between rounded-t-lg",style:{backgroundColor:Nt>7?"#3BA55D":Nt>4?"#faa713":"#FF5D5D"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-white",children:`Quality Score : ${Nt>7?"Good":Nt>4?"Average":"Poor"}`}),jsxRuntimeExports.jsx("button",{className:"cursor-pointer text-white hover:bg-[#ffffff33] rounded-full px-1 text-center",onClick:pn=>{pn.stopPropagation(),Rr()},children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"text-white",style:{height:16,width:16}})})]}),jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:Gt.map((pn,Tr)=>jsxRuntimeExports.jsxs("div",{className:"flex",style:{borderBottom:Tr===Gt.length-1?"":"1px solid #ffffff33"},children:[jsxRuntimeExports.jsx("div",{className:"flex flex-1 items-center w-[120px]",children:Tr!==0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] ml-2",children:pn.label})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center flex-1",style:{borderLeft:"1px solid #ffffff33"},children:jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] w-[80px] text-center",children:pn.audio})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center flex-1",style:{borderLeft:"1px solid #ffffff33"},children:jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] w-[80px] text-center",children:pn.video})})]},Tr))})})]})}),document.body)})})]})})})})]})};function ParticipantView({participantId:nt}){const{displayName:rt,webcamStream:it,micStream:st,webcamOn:lt,micOn:ct,isLocal:ut,mode:dt,isActiveSpeaker:ht}=useParticipant(nt),pt=reactExports.useRef(null),[ft,mt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(pt.current)if(ct&&st){const xt=new MediaStream;xt.addTrack(st.track),pt.current.srcObject=xt,pt.current.play().catch(yt=>console.error("videoElem.current.play() failed",yt))}else pt.current.srcObject=null},[st,ct]);const gt=reactExports.useMemo(()=>{if(lt&&it){const xt=new MediaStream;return xt.addTrack(it.track),xt}},[it,lt]);return dt==="CONFERENCE"?jsxRuntimeExports.jsxs("div",{onMouseEnter:()=>{mt(!0)},onMouseLeave:()=>{mt(!1)},className:"h-full w-full  bg-gray-750 relative overflow-hidden rounded-lg video-cover",children:[jsxRuntimeExports.jsx("audio",{ref:pt,autoPlay:!0,muted:ut}),lt?jsxRuntimeExports.jsx(ReactPlayer,{playsinline:!0,playIcon:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:gt,height:"100%",width:"100%",onError:xt=>{console.log(xt,"participant video error")}}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-full",children:jsxRuntimeExports.jsx("div",{className:"z-10 flex items-center justify-center rounded-full bg-gray-800 2xl:h-[92px] h-[52px] 2xl:w-[92px] w-[52px]",children:jsxRuntimeExports.jsx("p",{className:"text-2xl text-white",children:String(rt).charAt(0).toUpperCase()})})}),jsxRuntimeExports.jsx(CornerDisplayName,{isLocal:ut,displayName:rt,micOn:ct,webcamOn:lt,isPresenting:!1,participantId:nt,mouseOver:ft,isActiveSpeaker:ht})]}):null}function PresenterView({height:nt}){const rt=useMeeting(),it=rt==null?void 0:rt.presenterId,st=reactExports.useRef(),{micOn:lt,isLocal:ct,screenShareStream:ut,screenShareAudioStream:dt,screenShareOn:ht,displayName:pt,isActiveSpeaker:ft,webcamOn:mt}=useParticipant(it),gt=reactExports.useMemo(()=>{if(ht){const yt=new MediaStream;return yt.addTrack(ut.track),yt}},[ut,ht]),xt=reactExports.useRef();return reactExports.useEffect(()=>{if(!ct&&xt.current&&ht&&dt){const yt=new MediaStream;yt.addTrack(dt.track),xt.current.srcObject=yt,xt.current.play().catch(vt=>{vt.message==="play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD"&&console.error("audio"+vt.message)})}else xt.current.srcObject=null},[dt,ht,ct]),jsxRuntimeExports.jsxs("div",{className:` bg-gray-750 rounded m-2 relative overflow-hidden w-full h-[${nt-"xl:p-6 lg:p-[52px] md:p-[26px] p-1"}] `,children:[jsxRuntimeExports.jsx("audio",{autoPlay:!0,playsInline:!0,controls:!1,ref:xt}),jsxRuntimeExports.jsxs("div",{className:"video-contain absolute h-full w-full",children:[jsxRuntimeExports.jsx(ReactPlayer,{ref:st,playsinline:!0,playIcon:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:gt,height:"100%",width:"100%",style:{filter:ct?"blur(1rem)":void 0},onError:yt=>{console.log(yt,"presenter video error")}}),jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center p-2 rounded-md bottom-2 left-2 bg-gray-750",style:{transition:"all 200ms",transitionTimingFunction:"linear"},children:[lt?lt&&ft?jsxRuntimeExports.jsx(SpeakerIcon,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(MicOffSmallIcon,{fillcolor:"white"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white",children:ct?"You are presenting":`${nameTructed(pt,15)} is presenting`})]}),ct?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex flex-col items-center justify-center p-10 transform -translate-x-1/2 -translate-y-1/2 rounded-2xl top-1/2 left-1/2 bg-gray-750",children:[jsxRuntimeExports.jsx(ScreenShareIcon,{style:{height:48,width:48,color:"white"}}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("p",{className:"text-xl font-semibold text-white",children:"You are presenting to everyone"})}),jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx("button",{className:"px-4 py-2 text-sm font-medium text-center text-white rounded bg-purple-550",onClick:yt=>{yt.stopPropagation(),rt.toggleScreenShare()},children:"STOP PRESENTING"})})]}),jsxRuntimeExports.jsx(CornerDisplayName,{isLocal:ct,displayName:pt,micOn:lt,webcamOn:mt,isPresenting:!0,participantId:it,isActiveSpeaker:ft})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})]})}function MicOffIcon(){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("mask",{id:"mask0_25_170",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsxs("g",{fill:"#050A0E",mask:"url(#mask0_25_170)",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M8.6 10.692V12.2c0 .902.38 1.767 1.054 2.404a3.71 3.71 0 002.546.996c.346 0 .687-.047 1.014-.138L8.6 10.692zm5.915 6.116a5.665 5.665 0 01-2.315.492 5.565 5.565 0 01-3.819-1.494C7.37 14.85 6.8 13.553 6.8 12.2v-.405a.827.827 0 00-.264-.6.928.928 0 00-.636-.25.928.928 0 00-.637.25.827.827 0 00-.263.6v.405c0 3.468 2.748 6.33 6.3 6.748V20.7H9.5a.928.928 0 00-.637.249.827.827 0 00-.263.601c0 .225.095.442.263.601.17.16.398.249.637.249h5.4c.238 0 .467-.09.636-.249a.827.827 0 00.264-.601.827.827 0 00-.264-.601.927.927 0 00-.636-.249h-1.8v-1.752a7.495 7.495 0 002.67-.842l-1.255-1.298zm4.16-1.633l-1.343-1.388A4.84 4.84 0 0017.6 12.2v-.405c0-.225.095-.441.263-.6a.927.927 0 01.637-.25c.238 0 .467.09.636.25.169.159.264.375.264.6v.405a6.491 6.491 0 01-.726 2.975zM15.8 12.203L8.654 4.814a3.34 3.34 0 011-1.818A3.71 3.71 0 0112.2 2c.955 0 1.87.358 2.545.996A3.307 3.307 0 0115.8 5.4v6.803z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("rect",{width:"24.979",height:"1.817",x:"3.306",y:"3",rx:"0.909",transform:"rotate(45.956 3.306 3)"})]})]})}const WebcamOffIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M22.359 17.84a1.196 1.196 0 0 0 .548-1.017V7.786a1.36 1.36 0 0 0-.548-1.017.97.97 0 0 0-1.095 0L17.43 8.804a3.4 3.4 0 0 0-3.286-3.286h-4.052L22.14 17.949c-.001-.11.108-.11.219-.11Zm.219 3.841-5.257-5.424L6.916 5.517 2.863 1.34a1.036 1.036 0 0 0-1.533 0 1.117 1.117 0 0 0 0 1.583l2.519 2.596A3.379 3.379 0 0 0 1 8.91v6.78a3.386 3.386 0 0 0 .945 2.415 3.175 3.175 0 0 0 2.341.975h9.857a2.84 2.84 0 0 0 2.082-.791l4.819 4.972a1.06 1.06 0 0 0 1.533 0 1.144 1.144 0 0 0 0-1.582v.002Z",fill:"#050A0E"})}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,transform:"translate(1 1)",d:"M0 0h21.905v22.59H0z"})})})]}),ChatIcon=nt=>jsxRuntimeExports.jsx("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.25c-2.66 0-5.276.195-7.833.57C2 3.139.5 5.038.5 7.17v6.59c0 2.132 1.5 4.031 3.667 4.349.96.141 1.929.256 2.904.346v4.332a.821.821 0 0 0 1.402.58l4.583-4.581a.428.428 0 0 1 .291-.123 53.608 53.608 0 0 0 6.486-.554C22 17.79 23.5 15.892 23.5 13.76V7.169c0-2.133-1.5-4.03-3.667-4.348A53.825 53.825 0 0 0 12 2.25ZM7.893 9.232a1.232 1.232 0 1 0 0 2.464 1.232 1.232 0 0 0 0-2.464Zm2.875 1.232a1.232 1.232 0 1 1 2.465 0 1.232 1.232 0 0 1-2.465 0Zm5.34-1.232a1.232 1.232 0 1 0 0 2.465 1.232 1.232 0 0 0 0-2.465Z",fill:nt.fillcolor})}),ParticipantsIcon=nt=>jsxRuntimeExports.jsx("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0Zm9.75 2.25a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 1 1 14.25 0v.003l-.001.119a.749.749 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122Zm15.75.003-.001.144a2.25 2.25 0 0 1-.233.96c1.746.108 3.49-.24 5.06-1.01a.75.75 0 0 0 .42-.643 4.874 4.874 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003h.001Z",fill:nt.fillcolor})});function EndIcon(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_262",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_262)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M12.001 9.858a15.938 15.938 0 00-4.6.668v2.883a.932.932 0 01-.556.836 11.66 11.66 0 00-2.665 1.717 1.04 1.04 0 01-.7.265 1.016 1.016 0 01-.705-.274l-2.48-2.298a.884.884 0 010-1.319A17.65 17.65 0 0112.001 8a17.65 17.65 0 0111.704 4.336.888.888 0 01.218 1.018.873.873 0 01-.218.296l-2.476 2.298a1.049 1.049 0 01-1.405.01 11.656 11.656 0 00-2.665-1.718.932.932 0 01-.556-.835V10.52A16.098 16.098 0 0012 9.858z"})})]})}const RaiseHandIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#a)",children:[jsxRuntimeExports.jsx("mask",{id:"b",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:1,width:24,height:24,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 1h24v24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#b)",children:jsxRuntimeExports.jsx("path",{d:"M10.903 2.55c0-.278.101-.546.281-.742a.921.921 0 0 1 .68-.308c.254 0 .499.11.679.308.18.196.281.464.281.742v7.671c.442.151.871.357 1.28.615V3.95c0-.278.102-.546.282-.742a.921.921 0 0 1 .68-.308c.254 0 .498.11.678.308.18.196.282.464.282.742v10.208a3.681 3.681 0 0 0-1.626.75 4.126 4.126 0 0 0-1.149 1.465 7.123 7.123 0 0 1 3.415-.873c.17 0 .333-.074.453-.205a.734.734 0 0 0 .187-.495v-2.115c.003-.83.307-1.625.844-2.212a.918.918 0 0 1 .674-.29c.25.004.49.114.667.308a1.1 1.1 0 0 1 .282.73c.003.273-.092.537-.265.736-.089.097-.16.212-.207.338a1.127 1.127 0 0 0-.074.4V15.5h-.004c-.05 1.408-.584 2.743-1.496 3.74l-1.482 1.62c-.96 1.05-2.263 1.64-3.622 1.64h-1.72c-1.698 0-3.327-.738-4.528-2.05-1.2-1.313-1.875-3.093-1.875-4.95V6.75c0-.278.101-.546.281-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .679.308c.18.196.281.464.281.742v5.151a6.466 6.466 0 0 1 1.28-1.065V3.95c0-.278.102-.546.282-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .678.308c.18.196.282.464.282.742v6.09c.422-.092.85-.14 1.28-.14V2.55Z",fill:nt.fillcolor})})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M0 0h24v24H0z"})})})]});var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(nt,rt){module.exports=rt()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(rt){_useWebWorker=!!rt},getWebWorker=function(){return _useWebWorker},setLocationHref=function(rt){locationHref=rt},getLocationHref=function(){return locationHref};function createTag(nt){return document.createElement(nt)}function extendPrototype(nt,rt){var it,st=nt.length,lt;for(it=0;it<st;it+=1){lt=nt[it].prototype;for(var ct in lt)Object.prototype.hasOwnProperty.call(lt,ct)&&(rt.prototype[ct]=lt[ct])}}function getDescriptor(nt,rt){return Object.getOwnPropertyDescriptor(nt,rt)}function createProxyFunction(nt){function rt(){}return rt.prototype=nt,rt}var audioControllerFactory=function(){function nt(rt){this.audios=[],this.audioFactory=rt,this._volume=1,this._isMuted=!1}return nt.prototype={addAudio:function(it){this.audios.push(it)},pause:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].pause()},resume:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].resume()},setRate:function(it){var st,lt=this.audios.length;for(st=0;st<lt;st+=1)this.audios[st].setRate(it)},createAudio:function(it){return this.audioFactory?this.audioFactory(it):window.Howl?new window.Howl({src:[it]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(it){this.audioFactory=it},setVolume:function(it){this._volume=it,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].volume(this._volume*(this._isMuted?0:1))}},function(){return new nt}}(),createTypedArray=function(){function nt(it,st){var lt=0,ct=[],ut;switch(it){case"int16":case"uint8c":ut=1;break;default:ut=1.1;break}for(lt=0;lt<st;lt+=1)ct.push(ut);return ct}function rt(it,st){return it==="float32"?new Float32Array(st):it==="int16"?new Int16Array(st):it==="uint8c"?new Uint8ClampedArray(st):nt(it,st)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?rt:nt}();function createSizedArray(nt){return Array.apply(null,{length:nt})}function _typeof$6(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(it){return typeof it}:_typeof$6=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$6(nt)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var nt=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],rt,it=nt.length;for(rt=0;rt<it;rt+=1)BMMath[nt[rt]]=Math[nt[rt]]})(),BMMath.random=Math.random,BMMath.abs=function(nt){var rt=_typeof$6(nt);if(rt==="object"&&nt.length){var it=createSizedArray(nt.length),st,lt=nt.length;for(st=0;st<lt;st+=1)it[st]=Math.abs(nt[st]);return it}return Math.abs(nt)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(nt){nt.style.position="absolute",nt.style.top=0,nt.style.left=0,nt.style.display="block",nt.style.transformOrigin="0 0",nt.style.webkitTransformOrigin="0 0",nt.style.backfaceVisibility="visible",nt.style.webkitBackfaceVisibility="visible",nt.style.transformStyle="preserve-3d",nt.style.webkitTransformStyle="preserve-3d",nt.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(nt,rt,it,st){this.type=nt,this.currentTime=rt,this.totalTime=it,this.direction=st<0?-1:1}function BMCompleteEvent(nt,rt){this.type=nt,this.direction=rt<0?-1:1}function BMCompleteLoopEvent(nt,rt,it,st){this.type=nt,this.currentLoop=it,this.totalLoops=rt,this.direction=st<0?-1:1}function BMSegmentStartEvent(nt,rt,it){this.type=nt,this.firstFrame=rt,this.totalFrames=it}function BMDestroyEvent(nt,rt){this.type=nt,this.target=rt}function BMRenderFrameErrorEvent(nt,rt){this.type="renderFrameError",this.nativeError=nt,this.currentTime=rt}function BMConfigErrorEvent(nt){this.type="configError",this.nativeError=nt}var createElementID=function(){var nt=0;return function(){return nt+=1,idPrefix$1+"__lottie_element_"+nt}}();function HSVtoRGB(nt,rt,it){var st,lt,ct,ut,dt,ht,pt,ft;switch(ut=Math.floor(nt*6),dt=nt*6-ut,ht=it*(1-rt),pt=it*(1-dt*rt),ft=it*(1-(1-dt)*rt),ut%6){case 0:st=it,lt=ft,ct=ht;break;case 1:st=pt,lt=it,ct=ht;break;case 2:st=ht,lt=it,ct=ft;break;case 3:st=ht,lt=pt,ct=it;break;case 4:st=ft,lt=ht,ct=it;break;case 5:st=it,lt=ht,ct=pt;break}return[st,lt,ct]}function RGBtoHSV(nt,rt,it){var st=Math.max(nt,rt,it),lt=Math.min(nt,rt,it),ct=st-lt,ut,dt=st===0?0:ct/st,ht=st/255;switch(st){case lt:ut=0;break;case nt:ut=rt-it+ct*(rt<it?6:0),ut/=6*ct;break;case rt:ut=it-nt+ct*2,ut/=6*ct;break;case it:ut=nt-rt+ct*4,ut/=6*ct;break}return[ut,dt,ht]}function addSaturationToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[1]+=rt,it[1]>1?it[1]=1:it[1]<=0&&(it[1]=0),HSVtoRGB(it[0],it[1],it[2])}function addBrightnessToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[2]+=rt,it[2]>1?it[2]=1:it[2]<0&&(it[2]=0),HSVtoRGB(it[0],it[1],it[2])}function addHueToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[0]+=rt/360,it[0]>1?it[0]-=1:it[0]<0&&(it[0]+=1),HSVtoRGB(it[0],it[1],it[2])}var rgbToHex=function(){var nt=[],rt,it;for(rt=0;rt<256;rt+=1)it=rt.toString(16),nt[rt]=it.length===1?"0"+it:it;return function(st,lt,ct){return st<0&&(st=0),lt<0&&(lt=0),ct<0&&(ct=0),"#"+nt[st]+nt[lt]+nt[ct]}}(),setSubframeEnabled=function(rt){subframeEnabled=!!rt},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(rt){expressionsPlugin=rt},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(rt){expressionsInterfaces=rt},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(rt){defaultCurveSegments=rt},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(rt){idPrefix$1=rt};function createNS(nt){return document.createElementNS(svgNS,nt)}function _typeof$5(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(it){return typeof it}:_typeof$5=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$5(nt)}var dataManager=function(){var nt=1,rt=[],it,st,lt={onmessage:function(){},postMessage:function(xt){it({data:xt})}},ct={postMessage:function(xt){lt.onmessage({data:xt})}};function ut(gt){if(window.Worker&&window.Blob&&getWebWorker()){var xt=new Blob(["var _workerSelf = self; self.onmessage = ",gt.toString()],{type:"text/javascript"}),yt=URL.createObjectURL(xt);return new Worker(yt)}return it=gt,lt}function dt(){st||(st=ut(function(xt){function yt(){function St(Vt,Ut){var zt,Bt,Ht=Vt.length,Gt,Kt,Xt,or;for(Bt=0;Bt<Ht;Bt+=1)if(zt=Vt[Bt],"ks"in zt&&!zt.completed){if(zt.completed=!0,zt.hasMask){var tr=zt.masksProperties;for(Kt=tr.length,Gt=0;Gt<Kt;Gt+=1)if(tr[Gt].pt.k.i)It(tr[Gt].pt.k);else for(or=tr[Gt].pt.k.length,Xt=0;Xt<or;Xt+=1)tr[Gt].pt.k[Xt].s&&It(tr[Gt].pt.k[Xt].s[0]),tr[Gt].pt.k[Xt].e&&It(tr[Gt].pt.k[Xt].e[0])}zt.ty===0?(zt.layers=Rt(zt.refId,Ut),St(zt.layers,Ut)):zt.ty===4?Tt(zt.shapes):zt.ty===5&&Nt(zt)}}function Et(Vt,Ut){if(Vt){var zt=0,Bt=Vt.length;for(zt=0;zt<Bt;zt+=1)Vt[zt].t===1&&(Vt[zt].data.layers=Rt(Vt[zt].data.refId,Ut),St(Vt[zt].data.layers,Ut))}}function wt(Vt,Ut){for(var zt=0,Bt=Ut.length;zt<Bt;){if(Ut[zt].id===Vt)return Ut[zt];zt+=1}return null}function Rt(Vt,Ut){var zt=wt(Vt,Ut);return zt?zt.layers.__used?JSON.parse(JSON.stringify(zt.layers)):(zt.layers.__used=!0,zt.layers):null}function Tt(Vt){var Ut,zt=Vt.length,Bt,Ht;for(Ut=zt-1;Ut>=0;Ut-=1)if(Vt[Ut].ty==="sh")if(Vt[Ut].ks.k.i)It(Vt[Ut].ks.k);else for(Ht=Vt[Ut].ks.k.length,Bt=0;Bt<Ht;Bt+=1)Vt[Ut].ks.k[Bt].s&&It(Vt[Ut].ks.k[Bt].s[0]),Vt[Ut].ks.k[Bt].e&&It(Vt[Ut].ks.k[Bt].e[0]);else Vt[Ut].ty==="gr"&&Tt(Vt[Ut].it)}function It(Vt){var Ut,zt=Vt.i.length;for(Ut=0;Ut<zt;Ut+=1)Vt.i[Ut][0]+=Vt.v[Ut][0],Vt.i[Ut][1]+=Vt.v[Ut][1],Vt.o[Ut][0]+=Vt.v[Ut][0],Vt.o[Ut][1]+=Vt.v[Ut][1]}function At(Vt,Ut){var zt=Ut?Ut.split("."):[100,100,100];return Vt[0]>zt[0]?!0:zt[0]>Vt[0]?!1:Vt[1]>zt[1]?!0:zt[1]>Vt[1]?!1:Vt[2]>zt[2]?!0:zt[2]>Vt[2]?!1:null}var Dt=function(){var Vt=[4,4,14];function Ut(Bt){var Ht=Bt.t.d;Bt.t.d={k:[{s:Ht,t:0}]}}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===5&&Ut(Bt[Ht])}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),jt=function(){var Vt=[4,7,99];return function(Ut){if(Ut.chars&&!At(Vt,Ut.v)){var zt,Bt=Ut.chars.length;for(zt=0;zt<Bt;zt+=1){var Ht=Ut.chars[zt];Ht.data&&Ht.data.shapes&&(Tt(Ht.data.shapes),Ht.data.ip=0,Ht.data.op=99999,Ht.data.st=0,Ht.data.sr=1,Ht.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ut.chars[zt].t||(Ht.data.shapes.push({ty:"no"}),Ht.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ft=function(){var Vt=[5,7,15];function Ut(Bt){var Ht=Bt.t.p;typeof Ht.a=="number"&&(Ht.a={a:0,k:Ht.a}),typeof Ht.p=="number"&&(Ht.p={a:0,k:Ht.p}),typeof Ht.r=="number"&&(Ht.r={a:0,k:Ht.r})}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===5&&Ut(Bt[Ht])}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),Lt=function(){var Vt=[4,1,9];function Ut(Bt){var Ht,Gt=Bt.length,Kt,Xt;for(Ht=0;Ht<Gt;Ht+=1)if(Bt[Ht].ty==="gr")Ut(Bt[Ht].it);else if(Bt[Ht].ty==="fl"||Bt[Ht].ty==="st")if(Bt[Ht].c.k&&Bt[Ht].c.k[0].i)for(Xt=Bt[Ht].c.k.length,Kt=0;Kt<Xt;Kt+=1)Bt[Ht].c.k[Kt].s&&(Bt[Ht].c.k[Kt].s[0]/=255,Bt[Ht].c.k[Kt].s[1]/=255,Bt[Ht].c.k[Kt].s[2]/=255,Bt[Ht].c.k[Kt].s[3]/=255),Bt[Ht].c.k[Kt].e&&(Bt[Ht].c.k[Kt].e[0]/=255,Bt[Ht].c.k[Kt].e[1]/=255,Bt[Ht].c.k[Kt].e[2]/=255,Bt[Ht].c.k[Kt].e[3]/=255);else Bt[Ht].c.k[0]/=255,Bt[Ht].c.k[1]/=255,Bt[Ht].c.k[2]/=255,Bt[Ht].c.k[3]/=255}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===4&&Ut(Bt[Ht].shapes)}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),Pt=function(){var Vt=[4,4,18];function Ut(Bt){var Ht,Gt=Bt.length,Kt,Xt;for(Ht=Gt-1;Ht>=0;Ht-=1)if(Bt[Ht].ty==="sh")if(Bt[Ht].ks.k.i)Bt[Ht].ks.k.c=Bt[Ht].closed;else for(Xt=Bt[Ht].ks.k.length,Kt=0;Kt<Xt;Kt+=1)Bt[Ht].ks.k[Kt].s&&(Bt[Ht].ks.k[Kt].s[0].c=Bt[Ht].closed),Bt[Ht].ks.k[Kt].e&&(Bt[Ht].ks.k[Kt].e[0].c=Bt[Ht].closed);else Bt[Ht].ty==="gr"&&Ut(Bt[Ht].it)}function zt(Bt){var Ht,Gt,Kt=Bt.length,Xt,or,tr,dr;for(Gt=0;Gt<Kt;Gt+=1){if(Ht=Bt[Gt],Ht.hasMask){var fr=Ht.masksProperties;for(or=fr.length,Xt=0;Xt<or;Xt+=1)if(fr[Xt].pt.k.i)fr[Xt].pt.k.c=fr[Xt].cl;else for(dr=fr[Xt].pt.k.length,tr=0;tr<dr;tr+=1)fr[Xt].pt.k[tr].s&&(fr[Xt].pt.k[tr].s[0].c=fr[Xt].cl),fr[Xt].pt.k[tr].e&&(fr[Xt].pt.k[tr].e[0].c=fr[Xt].cl)}Ht.ty===4&&Ut(Ht.shapes)}}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}();function Ot(Vt){Vt.__complete||(Lt(Vt),Dt(Vt),jt(Vt),Ft(Vt),Pt(Vt),St(Vt.layers,Vt.assets),Et(Vt.chars,Vt.assets),Vt.__complete=!0)}function Nt(Vt){Vt.t.a.length===0&&"m"in Vt.t.p}var $t={};return $t.completeData=Ot,$t.checkColors=Lt,$t.checkChars=jt,$t.checkPathProperties=Ft,$t.checkShapes=Pt,$t.completeLayers=St,$t}if(ct.dataManager||(ct.dataManager=yt()),ct.assetLoader||(ct.assetLoader=function(){function St(wt){var Rt=wt.getResponseHeader("content-type");return Rt&&wt.responseType==="json"&&Rt.indexOf("json")!==-1||wt.response&&_typeof$5(wt.response)==="object"?wt.response:wt.response&&typeof wt.response=="string"?JSON.parse(wt.response):wt.responseText?JSON.parse(wt.responseText):null}function Et(wt,Rt,Tt,It){var At,Dt=new XMLHttpRequest;try{Dt.responseType="json"}catch{}Dt.onreadystatechange=function(){if(Dt.readyState===4)if(Dt.status===200)At=St(Dt),Tt(At);else try{At=St(Dt),Tt(At)}catch(jt){It&&It(jt)}};try{Dt.open(["G","E","T"].join(""),wt,!0)}catch{Dt.open(["G","E","T"].join(""),Rt+"/"+wt,!0)}Dt.send()}return{load:Et}}()),xt.data.type==="loadAnimation")ct.assetLoader.load(xt.data.path,xt.data.fullPath,function(St){ct.dataManager.completeData(St),ct.postMessage({id:xt.data.id,payload:St,status:"success"})},function(){ct.postMessage({id:xt.data.id,status:"error"})});else if(xt.data.type==="complete"){var vt=xt.data.animation;ct.dataManager.completeData(vt),ct.postMessage({id:xt.data.id,payload:vt,status:"success"})}else xt.data.type==="loadData"&&ct.assetLoader.load(xt.data.path,xt.data.fullPath,function(St){ct.postMessage({id:xt.data.id,payload:St,status:"success"})},function(){ct.postMessage({id:xt.data.id,status:"error"})})}),st.onmessage=function(gt){var xt=gt.data,yt=xt.id,vt=rt[yt];rt[yt]=null,xt.status==="success"?vt.onComplete(xt.payload):vt.onError&&vt.onError()})}function ht(gt,xt){nt+=1;var yt="processId_"+nt;return rt[yt]={onComplete:gt,onError:xt},yt}function pt(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"loadAnimation",path:gt,fullPath:window.location.origin+window.location.pathname,id:vt})}function ft(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"loadData",path:gt,fullPath:window.location.origin+window.location.pathname,id:vt})}function mt(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"complete",animation:gt,id:vt})}return{loadAnimation:pt,loadData:ft,completeAnimation:mt}}(),ImagePreloader=function(){var nt=function(){var Et=createTag("canvas");Et.width=1,Et.height=1;var wt=Et.getContext("2d");return wt.fillStyle="rgba(0,0,0,0)",wt.fillRect(0,0,1,1),Et}();function rt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function it(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function st(Et,wt,Rt){var Tt="";if(Et.e)Tt=Et.p;else if(wt){var It=Et.p;It.indexOf("images/")!==-1&&(It=It.split("/")[1]),Tt=wt+It}else Tt=Rt,Tt+=Et.u?Et.u:"",Tt+=Et.p;return Tt}function lt(Et){var wt=0,Rt=setInterval((function(){var Tt=Et.getBBox();(Tt.width||wt>500)&&(this._imageLoaded(),clearInterval(Rt)),wt+=1}).bind(this),50)}function ct(Et){var wt=st(Et,this.assetsPath,this.path),Rt=createNS("image");isSafari?this.testImageLoaded(Rt):Rt.addEventListener("load",this._imageLoaded,!1),Rt.addEventListener("error",(function(){Tt.img=nt,this._imageLoaded()}).bind(this),!1),Rt.setAttributeNS("http://www.w3.org/1999/xlink","href",wt),this._elementHelper.append?this._elementHelper.append(Rt):this._elementHelper.appendChild(Rt);var Tt={img:Rt,assetData:Et};return Tt}function ut(Et){var wt=st(Et,this.assetsPath,this.path),Rt=createTag("img");Rt.crossOrigin="anonymous",Rt.addEventListener("load",this._imageLoaded,!1),Rt.addEventListener("error",(function(){Tt.img=nt,this._imageLoaded()}).bind(this),!1),Rt.src=wt;var Tt={img:Rt,assetData:Et};return Tt}function dt(Et){var wt={assetData:Et},Rt=st(Et,this.assetsPath,this.path);return dataManager.loadData(Rt,(function(Tt){wt.img=Tt,this._footageLoaded()}).bind(this),(function(){wt.img={},this._footageLoaded()}).bind(this)),wt}function ht(Et,wt){this.imagesLoadedCb=wt;var Rt,Tt=Et.length;for(Rt=0;Rt<Tt;Rt+=1)Et[Rt].layers||(!Et[Rt].t||Et[Rt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Et[Rt]))):Et[Rt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Et[Rt]))))}function pt(Et){this.path=Et||""}function ft(Et){this.assetsPath=Et||""}function mt(Et){for(var wt=0,Rt=this.images.length;wt<Rt;){if(this.images[wt].assetData===Et)return this.images[wt].img;wt+=1}return null}function gt(){this.imagesLoadedCb=null,this.images.length=0}function xt(){return this.totalImages===this.loadedAssets}function yt(){return this.totalFootages===this.loadedFootagesCount}function vt(Et,wt){Et==="svg"?(this._elementHelper=wt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function St(){this._imageLoaded=rt.bind(this),this._footageLoaded=it.bind(this),this.testImageLoaded=lt.bind(this),this.createFootageData=dt.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return St.prototype={loadAssets:ht,setAssetsPath:ft,setPath:pt,loadedImages:xt,loadedFootages:yt,destroy:gt,getAsset:mt,createImgData:ut,createImageData:ct,imageLoaded:rt,footageLoaded:it,setCacheType:vt},St}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(rt,it){if(this._cbs[rt])for(var st=this._cbs[rt],lt=0;lt<st.length;lt+=1)st[lt](it)},addEventListener:function(rt,it){return this._cbs[rt]||(this._cbs[rt]=[]),this._cbs[rt].push(it),(function(){this.removeEventListener(rt,it)}).bind(this)},removeEventListener:function(rt,it){if(!it)this._cbs[rt]=null;else if(this._cbs[rt]){for(var st=0,lt=this._cbs[rt].length;st<lt;)this._cbs[rt][st]===it&&(this._cbs[rt].splice(st,1),st-=1,lt-=1),st+=1;this._cbs[rt].length||(this._cbs[rt]=null)}}};var markerParser=function(){function nt(rt){for(var it=rt.split(`\r
`),st={},lt,ct=0,ut=0;ut<it.length;ut+=1)lt=it[ut].split(":"),lt.length===2&&(st[lt[0]]=lt[1].trim(),ct+=1);if(ct===0)throw new Error;return st}return function(rt){for(var it=[],st=0;st<rt.length;st+=1){var lt=rt[st],ct={time:lt.tm,duration:lt.dr};try{ct.payload=JSON.parse(rt[st].cm)}catch{try{ct.payload=nt(rt[st].cm)}catch{ct.payload={name:rt[st].cm}}}it.push(ct)}return it}}(),ProjectInterface=function(){function nt(rt){this.compositions.push(rt)}return function(){function rt(it){for(var st=0,lt=this.compositions.length;st<lt;){if(this.compositions[st].data&&this.compositions[st].data.nm===it)return this.compositions[st].prepareFrame&&this.compositions[st].data.xt&&this.compositions[st].prepareFrame(this.currentFrame),this.compositions[st].compInterface;st+=1}return null}return rt.compositions=[],rt.currentFrame=0,rt.registerComposition=nt,rt}}(),renderers={},registerRenderer=function(rt,it){renderers[rt]=it};function getRenderer(nt){return renderers[nt]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var nt in renderers)if(renderers[nt])return nt;return""}function _typeof$4(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(it){return typeof it}:_typeof$4=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$4(nt)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(nt){(nt.wrapper||nt.container)&&(this.wrapper=nt.wrapper||nt.container);var rt="svg";nt.animType?rt=nt.animType:nt.renderer&&(rt=nt.renderer);var it=getRenderer(rt);this.renderer=new it(this,nt.rendererSettings),this.imagePreloader.setCacheType(rt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=rt,nt.loop===""||nt.loop===null||nt.loop===void 0||nt.loop===!0?this.loop=!0:nt.loop===!1?this.loop=!1:this.loop=parseInt(nt.loop,10),this.autoplay="autoplay"in nt?nt.autoplay:!0,this.name=nt.name?nt.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(nt,"autoloadSegments")?nt.autoloadSegments:!0,this.assetsPath=nt.assetsPath,this.initialSegment=nt.initialSegment,nt.audioFactory&&this.audioController.setAudioFactory(nt.audioFactory),nt.animationData?this.setupAnimation(nt.animationData):nt.path&&(nt.path.lastIndexOf("\\")!==-1?this.path=nt.path.substr(0,nt.path.lastIndexOf("\\")+1):this.path=nt.path.substr(0,nt.path.lastIndexOf("/")+1),this.fileName=nt.path.substr(nt.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(nt.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(nt){dataManager.completeAnimation(nt,this.configAnimation)},AnimationItem.prototype.setData=function(nt,rt){rt&&_typeof$4(rt)!=="object"&&(rt=JSON.parse(rt));var it={wrapper:nt,animationData:rt},st=nt.attributes;it.path=st.getNamedItem("data-animation-path")?st.getNamedItem("data-animation-path").value:st.getNamedItem("data-bm-path")?st.getNamedItem("data-bm-path").value:st.getNamedItem("bm-path")?st.getNamedItem("bm-path").value:"",it.animType=st.getNamedItem("data-anim-type")?st.getNamedItem("data-anim-type").value:st.getNamedItem("data-bm-type")?st.getNamedItem("data-bm-type").value:st.getNamedItem("bm-type")?st.getNamedItem("bm-type").value:st.getNamedItem("data-bm-renderer")?st.getNamedItem("data-bm-renderer").value:st.getNamedItem("bm-renderer")?st.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var lt=st.getNamedItem("data-anim-loop")?st.getNamedItem("data-anim-loop").value:st.getNamedItem("data-bm-loop")?st.getNamedItem("data-bm-loop").value:st.getNamedItem("bm-loop")?st.getNamedItem("bm-loop").value:"";lt==="false"?it.loop=!1:lt==="true"?it.loop=!0:lt!==""&&(it.loop=parseInt(lt,10));var ct=st.getNamedItem("data-anim-autoplay")?st.getNamedItem("data-anim-autoplay").value:st.getNamedItem("data-bm-autoplay")?st.getNamedItem("data-bm-autoplay").value:st.getNamedItem("bm-autoplay")?st.getNamedItem("bm-autoplay").value:!0;it.autoplay=ct!=="false",it.name=st.getNamedItem("data-name")?st.getNamedItem("data-name").value:st.getNamedItem("data-bm-name")?st.getNamedItem("data-bm-name").value:st.getNamedItem("bm-name")?st.getNamedItem("bm-name").value:"";var ut=st.getNamedItem("data-anim-prerender")?st.getNamedItem("data-anim-prerender").value:st.getNamedItem("data-bm-prerender")?st.getNamedItem("data-bm-prerender").value:st.getNamedItem("bm-prerender")?st.getNamedItem("bm-prerender").value:"";ut==="false"&&(it.prerender=!1),it.path?this.setParams(it):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(nt){nt.op>this.animationData.op&&(this.animationData.op=nt.op,this.totalFrames=Math.floor(nt.op-this.animationData.ip));var rt=this.animationData.layers,it,st=rt.length,lt=nt.layers,ct,ut=lt.length;for(ct=0;ct<ut;ct+=1)for(it=0;it<st;){if(rt[it].id===lt[ct].id){rt[it]=lt[ct];break}it+=1}if((nt.chars||nt.fonts)&&(this.renderer.globalData.fontManager.addChars(nt.chars),this.renderer.globalData.fontManager.addFonts(nt.fonts,this.renderer.globalData.defs)),nt.assets)for(st=nt.assets.length,it=0;it<st;it+=1)this.animationData.assets.push(nt.assets[it]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(nt){this.animationData=nt;var rt=getExpressionsPlugin();rt&&rt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var nt=this.animationData.segments;if(!nt||nt.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var rt=nt.shift();this.timeCompleted=rt.time*this.frameRate;var it=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(it,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var nt=this.animationData.segments;nt||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(nt){if(this.renderer)try{this.animationData=nt,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(nt),nt.assets||(nt.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(nt.assets),this.markers=markerParser(nt.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(rt){this.triggerConfigError(rt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var nt=getExpressionsPlugin();nt&&nt.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(nt,rt){var it=typeof nt=="number"?nt:void 0,st=typeof rt=="number"?rt:void 0;this.renderer.updateContainerSize(it,st)},AnimationItem.prototype.setSubframe=function(nt){this.isSubframeEnabled=!!nt},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(nt){this.triggerRenderFrameError(nt)}},AnimationItem.prototype.play=function(nt){nt&&this.name!==nt||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(nt){nt&&this.name!==nt||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(nt){nt&&this.name!==nt||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(nt){nt&&this.name!==nt||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(nt){for(var rt,it=0;it<this.markers.length;it+=1)if(rt=this.markers[it],rt.payload&&rt.payload.name===nt)return rt;return null},AnimationItem.prototype.goToAndStop=function(nt,rt,it){if(!(it&&this.name!==it)){var st=Number(nt);if(isNaN(st)){var lt=this.getMarkerData(nt);lt&&this.goToAndStop(lt.time,!0)}else rt?this.setCurrentRawFrameValue(nt):this.setCurrentRawFrameValue(nt*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(nt,rt,it){if(!(it&&this.name!==it)){var st=Number(nt);if(isNaN(st)){var lt=this.getMarkerData(nt);lt&&(lt.duration?this.playSegments([lt.time,lt.time+lt.duration],!0):this.goToAndStop(lt.time,!0))}else this.goToAndStop(st,rt,it);this.play()}},AnimationItem.prototype.advanceTime=function(nt){if(!(this.isPaused===!0||this.isLoaded===!1)){var rt=this.currentRawFrame+nt*this.frameModifier,it=!1;rt>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(rt>this.totalFrames?rt%this.totalFrames:0)||(it=!0,rt=this.totalFrames-1):rt>=this.totalFrames?(this.playCount+=1,this.checkSegments(rt%this.totalFrames)||(this.setCurrentRawFrameValue(rt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(rt):rt<0?this.checkSegments(rt%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+rt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(it=!0,rt=0)):this.setCurrentRawFrameValue(rt),it&&(this.setCurrentRawFrameValue(rt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(nt,rt){this.playCount=0,nt[1]<nt[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=nt[0]-nt[1],this.timeCompleted=this.totalFrames,this.firstFrame=nt[1],this.setCurrentRawFrameValue(this.totalFrames-.001-rt)):nt[1]>nt[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=nt[1]-nt[0],this.timeCompleted=this.totalFrames,this.firstFrame=nt[0],this.setCurrentRawFrameValue(.001+rt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(nt,rt){var it=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<nt?it=nt:this.currentRawFrame+this.firstFrame>rt&&(it=rt-nt)),this.firstFrame=nt,this.totalFrames=rt-nt,this.timeCompleted=this.totalFrames,it!==-1&&this.goToAndStop(it,!0)},AnimationItem.prototype.playSegments=function(nt,rt){if(rt&&(this.segments.length=0),_typeof$4(nt[0])==="object"){var it,st=nt.length;for(it=0;it<st;it+=1)this.segments.push(nt[it])}else this.segments.push(nt);this.segments.length&&rt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(nt){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),nt&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(nt){return this.segments.length?(this.adjustSegment(this.segments.shift(),nt),!0):!1},AnimationItem.prototype.destroy=function(nt){nt&&this.name!==nt||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(nt){this.currentRawFrame=nt,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(nt){this.playSpeed=nt,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(nt){this.playDirection=nt<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(nt){this.loop=nt},AnimationItem.prototype.setVolume=function(nt,rt){rt&&this.name!==rt||this.audioController.setVolume(nt)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(nt){nt&&this.name!==nt||this.audioController.mute()},AnimationItem.prototype.unmute=function(nt){nt&&this.name!==nt||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(nt){var rt="";if(nt.e)rt=nt.p;else if(this.assetsPath){var it=nt.p;it.indexOf("images/")!==-1&&(it=it.split("/")[1]),rt=this.assetsPath+it}else rt=this.path,rt+=nt.u?nt.u:"",rt+=nt.p;return rt},AnimationItem.prototype.getAssetData=function(nt){for(var rt=0,it=this.assets.length;rt<it;){if(nt===this.assets[rt].id)return this.assets[rt];rt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(nt){return nt?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(nt,rt,it){try{var st=this.renderer.getElementByPath(nt);st.updateDocumentData(rt,it)}catch{}},AnimationItem.prototype.trigger=function(nt){if(this._cbs&&this._cbs[nt])switch(nt){case"enterFrame":this.triggerEvent(nt,new BMEnterFrameEvent(nt,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(nt,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(nt,new BMCompleteLoopEvent(nt,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(nt,new BMCompleteEvent(nt,this.frameMult));break;case"segmentStart":this.triggerEvent(nt,new BMSegmentStartEvent(nt,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(nt,new BMDestroyEvent(nt,this));break;default:this.triggerEvent(nt)}nt==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(nt,this.currentFrame,this.totalFrames,this.frameMult)),nt==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(nt,this.loop,this.playCount,this.frameMult)),nt==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(nt,this.frameMult)),nt==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(nt,this.firstFrame,this.totalFrames)),nt==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(nt,this))},AnimationItem.prototype.triggerRenderFrameError=function(nt){var rt=new BMRenderFrameErrorEvent(nt,this.currentFrame);this.triggerEvent("error",rt),this.onError&&this.onError.call(this,rt)},AnimationItem.prototype.triggerConfigError=function(nt){var rt=new BMConfigErrorEvent(nt,this.currentFrame);this.triggerEvent("error",rt),this.onError&&this.onError.call(this,rt)};var animationManager=function(){var nt={},rt=[],it=0,st=0,lt=0,ct=!0,ut=!1;function dt(Ut){for(var zt=0,Bt=Ut.target;zt<st;)rt[zt].animation===Bt&&(rt.splice(zt,1),zt-=1,st-=1,Bt.isPaused||mt()),zt+=1}function ht(Ut,zt){if(!Ut)return null;for(var Bt=0;Bt<st;){if(rt[Bt].elem===Ut&&rt[Bt].elem!==null)return rt[Bt].animation;Bt+=1}var Ht=new AnimationItem;return gt(Ht,Ut),Ht.setData(Ut,zt),Ht}function pt(){var Ut,zt=rt.length,Bt=[];for(Ut=0;Ut<zt;Ut+=1)Bt.push(rt[Ut].animation);return Bt}function ft(){lt+=1,Lt()}function mt(){lt-=1}function gt(Ut,zt){Ut.addEventListener("destroy",dt),Ut.addEventListener("_active",ft),Ut.addEventListener("_idle",mt),rt.push({elem:zt,animation:Ut}),st+=1}function xt(Ut){var zt=new AnimationItem;return gt(zt,null),zt.setParams(Ut),zt}function yt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setSpeed(Ut,zt)}function vt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setDirection(Ut,zt)}function St(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.play(Ut)}function Et(Ut){var zt=Ut-it,Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.advanceTime(zt);it=Ut,lt&&!ut?window.requestAnimationFrame(Et):ct=!0}function wt(Ut){it=Ut,window.requestAnimationFrame(Et)}function Rt(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.pause(Ut)}function Tt(Ut,zt,Bt){var Ht;for(Ht=0;Ht<st;Ht+=1)rt[Ht].animation.goToAndStop(Ut,zt,Bt)}function It(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.stop(Ut)}function At(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.togglePause(Ut)}function Dt(Ut){var zt;for(zt=st-1;zt>=0;zt-=1)rt[zt].animation.destroy(Ut)}function jt(Ut,zt,Bt){var Ht=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Gt,Kt=Ht.length;for(Gt=0;Gt<Kt;Gt+=1)Bt&&Ht[Gt].setAttribute("data-bm-type",Bt),ht(Ht[Gt],Ut);if(zt&&Kt===0){Bt||(Bt="svg");var Xt=document.getElementsByTagName("body")[0];Xt.innerText="";var or=createTag("div");or.style.width="100%",or.style.height="100%",or.setAttribute("data-bm-type",Bt),Xt.appendChild(or),ht(or,Ut)}}function Ft(){var Ut;for(Ut=0;Ut<st;Ut+=1)rt[Ut].animation.resize()}function Lt(){!ut&&lt&&ct&&(window.requestAnimationFrame(wt),ct=!1)}function Pt(){ut=!0}function Ot(){ut=!1,Lt()}function Nt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setVolume(Ut,zt)}function $t(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.mute(Ut)}function Vt(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.unmute(Ut)}return nt.registerAnimation=ht,nt.loadAnimation=xt,nt.setSpeed=yt,nt.setDirection=vt,nt.play=St,nt.pause=Rt,nt.stop=It,nt.togglePause=At,nt.searchAnimations=jt,nt.resize=Ft,nt.goToAndStop=Tt,nt.destroy=Dt,nt.freeze=Pt,nt.unfreeze=Ot,nt.setVolume=Nt,nt.mute=$t,nt.unmute=Vt,nt.getRegisteredAnimations=pt,nt}(),BezierFactory=function(){var nt={};nt.getBezierEasing=it;var rt={};function it(wt,Rt,Tt,It,At){var Dt=At||("bez_"+wt+"_"+Rt+"_"+Tt+"_"+It).replace(/\./g,"p");if(rt[Dt])return rt[Dt];var jt=new Et([wt,Rt,Tt,It]);return rt[Dt]=jt,jt}var st=4,lt=.001,ct=1e-7,ut=10,dt=11,ht=1/(dt-1),pt=typeof Float32Array=="function";function ft(wt,Rt){return 1-3*Rt+3*wt}function mt(wt,Rt){return 3*Rt-6*wt}function gt(wt){return 3*wt}function xt(wt,Rt,Tt){return((ft(Rt,Tt)*wt+mt(Rt,Tt))*wt+gt(Rt))*wt}function yt(wt,Rt,Tt){return 3*ft(Rt,Tt)*wt*wt+2*mt(Rt,Tt)*wt+gt(Rt)}function vt(wt,Rt,Tt,It,At){var Dt,jt,Ft=0;do jt=Rt+(Tt-Rt)/2,Dt=xt(jt,It,At)-wt,Dt>0?Tt=jt:Rt=jt;while(Math.abs(Dt)>ct&&++Ft<ut);return jt}function St(wt,Rt,Tt,It){for(var At=0;At<st;++At){var Dt=yt(Rt,Tt,It);if(Dt===0)return Rt;var jt=xt(Rt,Tt,It)-wt;Rt-=jt/Dt}return Rt}function Et(wt){this._p=wt,this._mSampleValues=pt?new Float32Array(dt):new Array(dt),this._precomputed=!1,this.get=this.get.bind(this)}return Et.prototype={get:function(Rt){var Tt=this._p[0],It=this._p[1],At=this._p[2],Dt=this._p[3];return this._precomputed||this._precompute(),Tt===It&&At===Dt?Rt:Rt===0?0:Rt===1?1:xt(this._getTForX(Rt),It,Dt)},_precompute:function(){var Rt=this._p[0],Tt=this._p[1],It=this._p[2],At=this._p[3];this._precomputed=!0,(Rt!==Tt||It!==At)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Rt=this._p[0],Tt=this._p[2],It=0;It<dt;++It)this._mSampleValues[It]=xt(It*ht,Rt,Tt)},_getTForX:function(Rt){for(var Tt=this._p[0],It=this._p[2],At=this._mSampleValues,Dt=0,jt=1,Ft=dt-1;jt!==Ft&&At[jt]<=Rt;++jt)Dt+=ht;--jt;var Lt=(Rt-At[jt])/(At[jt+1]-At[jt]),Pt=Dt+Lt*ht,Ot=yt(Pt,Tt,It);return Ot>=lt?St(Rt,Pt,Tt,It):Ot===0?Pt:vt(Rt,Dt,Dt+ht,Tt,It)}},nt}(),pooling=function(){function nt(rt){return rt.concat(createSizedArray(rt.length))}return{double:nt}}(),poolFactory=function(){return function(nt,rt,it){var st=0,lt=nt,ct=createSizedArray(lt),ut={newElement:dt,release:ht};function dt(){var pt;return st?(st-=1,pt=ct[st]):pt=rt(),pt}function ht(pt){st===lt&&(ct=pooling.double(ct),lt*=2),it&&it(pt),ct[st]=pt,st+=1}return ut}}(),bezierLengthPool=function(){function nt(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,nt)}(),segmentsLengthPool=function(){function nt(){return{lengths:[],totalLength:0}}function rt(it){var st,lt=it.lengths.length;for(st=0;st<lt;st+=1)bezierLengthPool.release(it.lengths[st]);it.lengths.length=0}return poolFactory(8,nt,rt)}();function bezFunction(){var nt=Math;function rt(gt,xt,yt,vt,St,Et){var wt=gt*vt+xt*St+yt*Et-St*vt-Et*gt-yt*xt;return wt>-.001&&wt<.001}function it(gt,xt,yt,vt,St,Et,wt,Rt,Tt){if(yt===0&&Et===0&&Tt===0)return rt(gt,xt,vt,St,wt,Rt);var It=nt.sqrt(nt.pow(vt-gt,2)+nt.pow(St-xt,2)+nt.pow(Et-yt,2)),At=nt.sqrt(nt.pow(wt-gt,2)+nt.pow(Rt-xt,2)+nt.pow(Tt-yt,2)),Dt=nt.sqrt(nt.pow(wt-vt,2)+nt.pow(Rt-St,2)+nt.pow(Tt-Et,2)),jt;return It>At?It>Dt?jt=It-At-Dt:jt=Dt-At-It:Dt>At?jt=Dt-At-It:jt=At-It-Dt,jt>-1e-4&&jt<1e-4}var st=function(){return function(gt,xt,yt,vt){var St=getDefaultCurveSegments(),Et,wt,Rt,Tt,It,At=0,Dt,jt=[],Ft=[],Lt=bezierLengthPool.newElement();for(Rt=yt.length,Et=0;Et<St;Et+=1){for(It=Et/(St-1),Dt=0,wt=0;wt<Rt;wt+=1)Tt=bmPow(1-It,3)*gt[wt]+3*bmPow(1-It,2)*It*yt[wt]+3*(1-It)*bmPow(It,2)*vt[wt]+bmPow(It,3)*xt[wt],jt[wt]=Tt,Ft[wt]!==null&&(Dt+=bmPow(jt[wt]-Ft[wt],2)),Ft[wt]=jt[wt];Dt&&(Dt=bmSqrt(Dt),At+=Dt),Lt.percents[Et]=It,Lt.lengths[Et]=At}return Lt.addedLength=At,Lt}}();function lt(gt){var xt=segmentsLengthPool.newElement(),yt=gt.c,vt=gt.v,St=gt.o,Et=gt.i,wt,Rt=gt._length,Tt=xt.lengths,It=0;for(wt=0;wt<Rt-1;wt+=1)Tt[wt]=st(vt[wt],vt[wt+1],St[wt],Et[wt+1]),It+=Tt[wt].addedLength;return yt&&Rt&&(Tt[wt]=st(vt[wt],vt[0],St[wt],Et[0]),It+=Tt[wt].addedLength),xt.totalLength=It,xt}function ct(gt){this.segmentLength=0,this.points=new Array(gt)}function ut(gt,xt){this.partialLength=gt,this.point=xt}var dt=function(){var gt={};return function(xt,yt,vt,St){var Et=(xt[0]+"_"+xt[1]+"_"+yt[0]+"_"+yt[1]+"_"+vt[0]+"_"+vt[1]+"_"+St[0]+"_"+St[1]).replace(/\./g,"p");if(!gt[Et]){var wt=getDefaultCurveSegments(),Rt,Tt,It,At,Dt,jt=0,Ft,Lt,Pt=null;xt.length===2&&(xt[0]!==yt[0]||xt[1]!==yt[1])&&rt(xt[0],xt[1],yt[0],yt[1],xt[0]+vt[0],xt[1]+vt[1])&&rt(xt[0],xt[1],yt[0],yt[1],yt[0]+St[0],yt[1]+St[1])&&(wt=2);var Ot=new ct(wt);for(It=vt.length,Rt=0;Rt<wt;Rt+=1){for(Lt=createSizedArray(It),Dt=Rt/(wt-1),Ft=0,Tt=0;Tt<It;Tt+=1)At=bmPow(1-Dt,3)*xt[Tt]+3*bmPow(1-Dt,2)*Dt*(xt[Tt]+vt[Tt])+3*(1-Dt)*bmPow(Dt,2)*(yt[Tt]+St[Tt])+bmPow(Dt,3)*yt[Tt],Lt[Tt]=At,Pt!==null&&(Ft+=bmPow(Lt[Tt]-Pt[Tt],2));Ft=bmSqrt(Ft),jt+=Ft,Ot.points[Rt]=new ut(Ft,Lt),Pt=Lt}Ot.segmentLength=jt,gt[Et]=Ot}return gt[Et]}}();function ht(gt,xt){var yt=xt.percents,vt=xt.lengths,St=yt.length,Et=bmFloor((St-1)*gt),wt=gt*xt.addedLength,Rt=0;if(Et===St-1||Et===0||wt===vt[Et])return yt[Et];for(var Tt=vt[Et]>wt?-1:1,It=!0;It;)if(vt[Et]<=wt&&vt[Et+1]>wt?(Rt=(wt-vt[Et])/(vt[Et+1]-vt[Et]),It=!1):Et+=Tt,Et<0||Et>=St-1){if(Et===St-1)return yt[Et];It=!1}return yt[Et]+(yt[Et+1]-yt[Et])*Rt}function pt(gt,xt,yt,vt,St,Et){var wt=ht(St,Et),Rt=1-wt,Tt=nt.round((Rt*Rt*Rt*gt[0]+(wt*Rt*Rt+Rt*wt*Rt+Rt*Rt*wt)*yt[0]+(wt*wt*Rt+Rt*wt*wt+wt*Rt*wt)*vt[0]+wt*wt*wt*xt[0])*1e3)/1e3,It=nt.round((Rt*Rt*Rt*gt[1]+(wt*Rt*Rt+Rt*wt*Rt+Rt*Rt*wt)*yt[1]+(wt*wt*Rt+Rt*wt*wt+wt*Rt*wt)*vt[1]+wt*wt*wt*xt[1])*1e3)/1e3;return[Tt,It]}var ft=createTypedArray("float32",8);function mt(gt,xt,yt,vt,St,Et,wt){St<0?St=0:St>1&&(St=1);var Rt=ht(St,wt);Et=Et>1?1:Et;var Tt=ht(Et,wt),It,At=gt.length,Dt=1-Rt,jt=1-Tt,Ft=Dt*Dt*Dt,Lt=Rt*Dt*Dt*3,Pt=Rt*Rt*Dt*3,Ot=Rt*Rt*Rt,Nt=Dt*Dt*jt,$t=Rt*Dt*jt+Dt*Rt*jt+Dt*Dt*Tt,Vt=Rt*Rt*jt+Dt*Rt*Tt+Rt*Dt*Tt,Ut=Rt*Rt*Tt,zt=Dt*jt*jt,Bt=Rt*jt*jt+Dt*Tt*jt+Dt*jt*Tt,Ht=Rt*Tt*jt+Dt*Tt*Tt+Rt*jt*Tt,Gt=Rt*Tt*Tt,Kt=jt*jt*jt,Xt=Tt*jt*jt+jt*Tt*jt+jt*jt*Tt,or=Tt*Tt*jt+jt*Tt*Tt+Tt*jt*Tt,tr=Tt*Tt*Tt;for(It=0;It<At;It+=1)ft[It*4]=nt.round((Ft*gt[It]+Lt*yt[It]+Pt*vt[It]+Ot*xt[It])*1e3)/1e3,ft[It*4+1]=nt.round((Nt*gt[It]+$t*yt[It]+Vt*vt[It]+Ut*xt[It])*1e3)/1e3,ft[It*4+2]=nt.round((zt*gt[It]+Bt*yt[It]+Ht*vt[It]+Gt*xt[It])*1e3)/1e3,ft[It*4+3]=nt.round((Kt*gt[It]+Xt*yt[It]+or*vt[It]+tr*xt[It])*1e3)/1e3;return ft}return{getSegmentsLength:lt,getNewSegment:mt,getPointInSegment:pt,buildBezierData:dt,pointOnLine2D:rt,pointOnLine3D:it}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(nt,rt){var it=this.offsetTime,st;this.propType==="multidimensional"&&(st=createTypedArray("float32",this.pv.length));for(var lt=rt.lastIndex,ct=lt,ut=this.keyframes.length-1,dt=!0,ht,pt,ft;dt;){if(ht=this.keyframes[ct],pt=this.keyframes[ct+1],ct===ut-1&&nt>=pt.t-it){ht.h&&(ht=pt),lt=0;break}if(pt.t-it>nt){lt=ct;break}ct<ut-1?ct+=1:(lt=0,dt=!1)}ft=this.keyframesMetadata[ct]||{};var mt,gt,xt,yt,vt,St,Et=pt.t-it,wt=ht.t-it,Rt;if(ht.to){ft.bezierData||(ft.bezierData=bez.buildBezierData(ht.s,pt.s||ht.e,ht.to,ht.ti));var Tt=ft.bezierData;if(nt>=Et||nt<wt){var It=nt>=Et?Tt.points.length-1:0;for(gt=Tt.points[It].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[It].point[mt]}else{ft.__fnct?St=ft.__fnct:(St=BezierFactory.getBezierEasing(ht.o.x,ht.o.y,ht.i.x,ht.i.y,ht.n).get,ft.__fnct=St),xt=St((nt-wt)/(Et-wt));var At=Tt.segmentLength*xt,Dt,jt=rt.lastFrame<nt&&rt._lastKeyframeIndex===ct?rt._lastAddedLength:0;for(vt=rt.lastFrame<nt&&rt._lastKeyframeIndex===ct?rt._lastPoint:0,dt=!0,yt=Tt.points.length;dt;){if(jt+=Tt.points[vt].partialLength,At===0||xt===0||vt===Tt.points.length-1){for(gt=Tt.points[vt].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[vt].point[mt];break}else if(At>=jt&&At<jt+Tt.points[vt+1].partialLength){for(Dt=(At-jt)/Tt.points[vt+1].partialLength,gt=Tt.points[vt].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[vt].point[mt]+(Tt.points[vt+1].point[mt]-Tt.points[vt].point[mt])*Dt;break}vt<yt-1?vt+=1:dt=!1}rt._lastPoint=vt,rt._lastAddedLength=jt-Tt.points[vt].partialLength,rt._lastKeyframeIndex=ct}}else{var Ft,Lt,Pt,Ot,Nt;if(ut=ht.s.length,Rt=pt.s||ht.e,this.sh&&ht.h!==1)if(nt>=Et)st[0]=Rt[0],st[1]=Rt[1],st[2]=Rt[2];else if(nt<=wt)st[0]=ht.s[0],st[1]=ht.s[1],st[2]=ht.s[2];else{var $t=createQuaternion(ht.s),Vt=createQuaternion(Rt),Ut=(nt-wt)/(Et-wt);quaternionToEuler(st,slerp($t,Vt,Ut))}else for(ct=0;ct<ut;ct+=1)ht.h!==1&&(nt>=Et?xt=1:nt<wt?xt=0:(ht.o.x.constructor===Array?(ft.__fnct||(ft.__fnct=[]),ft.__fnct[ct]?St=ft.__fnct[ct]:(Ft=ht.o.x[ct]===void 0?ht.o.x[0]:ht.o.x[ct],Lt=ht.o.y[ct]===void 0?ht.o.y[0]:ht.o.y[ct],Pt=ht.i.x[ct]===void 0?ht.i.x[0]:ht.i.x[ct],Ot=ht.i.y[ct]===void 0?ht.i.y[0]:ht.i.y[ct],St=BezierFactory.getBezierEasing(Ft,Lt,Pt,Ot).get,ft.__fnct[ct]=St)):ft.__fnct?St=ft.__fnct:(Ft=ht.o.x,Lt=ht.o.y,Pt=ht.i.x,Ot=ht.i.y,St=BezierFactory.getBezierEasing(Ft,Lt,Pt,Ot).get,ht.keyframeMetadata=St),xt=St((nt-wt)/(Et-wt)))),Rt=pt.s||ht.e,Nt=ht.h===1?ht.s[ct]:ht.s[ct]+(Rt[ct]-ht.s[ct])*xt,this.propType==="multidimensional"?st[ct]=Nt:st=Nt}return rt.lastIndex=lt,st}function slerp(nt,rt,it){var st=[],lt=nt[0],ct=nt[1],ut=nt[2],dt=nt[3],ht=rt[0],pt=rt[1],ft=rt[2],mt=rt[3],gt,xt,yt,vt,St;return xt=lt*ht+ct*pt+ut*ft+dt*mt,xt<0&&(xt=-xt,ht=-ht,pt=-pt,ft=-ft,mt=-mt),1-xt>1e-6?(gt=Math.acos(xt),yt=Math.sin(gt),vt=Math.sin((1-it)*gt)/yt,St=Math.sin(it*gt)/yt):(vt=1-it,St=it),st[0]=vt*lt+St*ht,st[1]=vt*ct+St*pt,st[2]=vt*ut+St*ft,st[3]=vt*dt+St*mt,st}function quaternionToEuler(nt,rt){var it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=Math.atan2(2*st*ct-2*it*lt,1-2*st*st-2*lt*lt),dt=Math.asin(2*it*st+2*lt*ct),ht=Math.atan2(2*it*ct-2*st*lt,1-2*it*it-2*lt*lt);nt[0]=ut/degToRads,nt[1]=dt/degToRads,nt[2]=ht/degToRads}function createQuaternion(nt){var rt=nt[0]*degToRads,it=nt[1]*degToRads,st=nt[2]*degToRads,lt=Math.cos(rt/2),ct=Math.cos(it/2),ut=Math.cos(st/2),dt=Math.sin(rt/2),ht=Math.sin(it/2),pt=Math.sin(st/2),ft=lt*ct*ut-dt*ht*pt,mt=dt*ht*ut+lt*ct*pt,gt=dt*ct*ut+lt*ht*pt,xt=lt*ht*ut-dt*ct*pt;return[mt,gt,xt,ft]}function getValueAtCurrentTime(){var nt=this.comp.renderedFrame-this.offsetTime,rt=this.keyframes[0].t-this.offsetTime,it=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(nt===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=it&&nt>=it||this._caching.lastFrame<rt&&nt<rt))){this._caching.lastFrame>=nt&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var st=this.interpolateValue(nt,this._caching);this.pv=st}return this._caching.lastFrame=nt,this.pv}function setVValue(nt){var rt;if(this.propType==="unidimensional")rt=nt*this.mult,mathAbs(this.v-rt)>1e-5&&(this.v=rt,this._mdf=!0);else for(var it=0,st=this.v.length;it<st;)rt=nt[it]*this.mult,mathAbs(this.v[it]-rt)>1e-5&&(this.v[it]=rt,this._mdf=!0),it+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var nt,rt=this.effectsSequence.length,it=this.kf?this.pv:this.data.k;for(nt=0;nt<rt;nt+=1)it=this.effectsSequence[nt](it);this.setVValue(it),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(nt){this.effectsSequence.push(nt),this.container.addDynamicProperty(this)}function ValueProperty(nt,rt,it,st){this.propType="unidimensional",this.mult=it||1,this.data=rt,this.v=it?rt.k*it:rt.k,this.pv=rt.k,this._mdf=!1,this.elem=nt,this.container=st,this.comp=nt.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(nt,rt,it,st){this.propType="multidimensional",this.mult=it||1,this.data=rt,this._mdf=!1,this.elem=nt,this.container=st,this.comp=nt.comp,this.k=!1,this.kf=!1,this.frameId=-1;var lt,ct=rt.k.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),this.vel=createTypedArray("float32",ct),lt=0;lt<ct;lt+=1)this.v[lt]=rt.k[lt]*this.mult,this.pv[lt]=rt.k[lt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(nt,rt,it,st){this.propType="unidimensional",this.keyframes=rt.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=rt,this.mult=it||1,this.elem=nt,this.container=st,this.comp=nt.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(nt,rt,it,st){this.propType="multidimensional";var lt,ct=rt.k.length,ut,dt,ht,pt;for(lt=0;lt<ct-1;lt+=1)rt.k[lt].to&&rt.k[lt].s&&rt.k[lt+1]&&rt.k[lt+1].s&&(ut=rt.k[lt].s,dt=rt.k[lt+1].s,ht=rt.k[lt].to,pt=rt.k[lt].ti,(ut.length===2&&!(ut[0]===dt[0]&&ut[1]===dt[1])&&bez.pointOnLine2D(ut[0],ut[1],dt[0],dt[1],ut[0]+ht[0],ut[1]+ht[1])&&bez.pointOnLine2D(ut[0],ut[1],dt[0],dt[1],dt[0]+pt[0],dt[1]+pt[1])||ut.length===3&&!(ut[0]===dt[0]&&ut[1]===dt[1]&&ut[2]===dt[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],dt[0],dt[1],dt[2],ut[0]+ht[0],ut[1]+ht[1],ut[2]+ht[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],dt[0],dt[1],dt[2],dt[0]+pt[0],dt[1]+pt[1],dt[2]+pt[2]))&&(rt.k[lt].to=null,rt.k[lt].ti=null),ut[0]===dt[0]&&ut[1]===dt[1]&&ht[0]===0&&ht[1]===0&&pt[0]===0&&pt[1]===0&&(ut.length===2||ut[2]===dt[2]&&ht[2]===0&&pt[2]===0)&&(rt.k[lt].to=null,rt.k[lt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=rt,this.keyframes=rt.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=it||1,this.elem=nt,this.container=st,this.comp=nt.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var ft=rt.k[0].s.length;for(this.v=createTypedArray("float32",ft),this.pv=createTypedArray("float32",ft),lt=0;lt<ft;lt+=1)this.v[lt]=initFrame,this.pv[lt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",ft)},this.addEffect=addEffect}var PropertyFactory=function(){function nt(it,st,lt,ct,ut){st.sid&&(st=it.globalData.slotManager.getProp(st));var dt;if(!st.k.length)dt=new ValueProperty(it,st,ct,ut);else if(typeof st.k[0]=="number")dt=new MultiDimensionalProperty(it,st,ct,ut);else switch(lt){case 0:dt=new KeyframedValueProperty(it,st,ct,ut);break;case 1:dt=new KeyframedMultidimensionalProperty(it,st,ct,ut);break}return dt.effectsSequence.length&&ut.addDynamicProperty(dt),dt}var rt={getProp:nt};return rt}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(rt){this.dynamicProperties.indexOf(rt)===-1&&(this.dynamicProperties.push(rt),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var rt,it=this.dynamicProperties.length;for(rt=0;rt<it;rt+=1)this.dynamicProperties[rt].getValue(),this.dynamicProperties[rt]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(rt){this.container=rt,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function nt(){return createTypedArray("float32",2)}return poolFactory(8,nt)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(nt,rt){this.c=nt,this.setLength(rt);for(var it=0;it<rt;)this.v[it]=pointPool.newElement(),this.o[it]=pointPool.newElement(),this.i[it]=pointPool.newElement(),it+=1},ShapePath.prototype.setLength=function(nt){for(;this._maxLength<nt;)this.doubleArrayLength();this._length=nt},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(nt,rt,it,st,lt){var ct;switch(this._length=Math.max(this._length,st+1),this._length>=this._maxLength&&this.doubleArrayLength(),it){case"v":ct=this.v;break;case"i":ct=this.i;break;case"o":ct=this.o;break;default:ct=[];break}(!ct[st]||ct[st]&&!lt)&&(ct[st]=pointPool.newElement()),ct[st][0]=nt,ct[st][1]=rt},ShapePath.prototype.setTripleAt=function(nt,rt,it,st,lt,ct,ut,dt){this.setXYAt(nt,rt,"v",ut,dt),this.setXYAt(it,st,"o",ut,dt),this.setXYAt(lt,ct,"i",ut,dt)},ShapePath.prototype.reverse=function(){var nt=new ShapePath;nt.setPathData(this.c,this._length);var rt=this.v,it=this.o,st=this.i,lt=0;this.c&&(nt.setTripleAt(rt[0][0],rt[0][1],st[0][0],st[0][1],it[0][0],it[0][1],0,!1),lt=1);var ct=this._length-1,ut=this._length,dt;for(dt=lt;dt<ut;dt+=1)nt.setTripleAt(rt[ct][0],rt[ct][1],st[ct][0],st[ct][1],it[ct][0],it[ct][1],dt,!1),ct-=1;return nt},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function nt(){return new ShapePath}function rt(lt){var ct=lt._length,ut;for(ut=0;ut<ct;ut+=1)pointPool.release(lt.v[ut]),pointPool.release(lt.i[ut]),pointPool.release(lt.o[ut]),lt.v[ut]=null,lt.i[ut]=null,lt.o[ut]=null;lt._length=0,lt.c=!1}function it(lt){var ct=st.newElement(),ut,dt=lt._length===void 0?lt.v.length:lt._length;for(ct.setLength(dt),ct.c=lt.c,ut=0;ut<dt;ut+=1)ct.setTripleAt(lt.v[ut][0],lt.v[ut][1],lt.o[ut][0],lt.o[ut][1],lt.i[ut][0],lt.i[ut][1],ut);return ct}var st=poolFactory(4,nt,rt);return st.clone=it,st}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(nt){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=nt,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var nt;for(nt=0;nt<this._length;nt+=1)shapePool.release(this.shapes[nt]);this._length=0};var shapeCollectionPool=function(){var nt={newShapeCollection:lt,release:ct},rt=0,it=4,st=createSizedArray(it);function lt(){var ut;return rt?(rt-=1,ut=st[rt]):ut=new ShapeCollection,ut}function ct(ut){var dt,ht=ut._length;for(dt=0;dt<ht;dt+=1)shapePool.release(ut.shapes[dt]);ut._length=0,rt===it&&(st=pooling.double(st),it*=2),st[rt]=ut,rt+=1}return nt}(),ShapePropertyFactory=function(){var nt=-999999;function rt(Et,wt,Rt){var Tt=Rt.lastIndex,It,At,Dt,jt,Ft,Lt,Pt,Ot,Nt,$t=this.keyframes;if(Et<$t[0].t-this.offsetTime)It=$t[0].s[0],Dt=!0,Tt=0;else if(Et>=$t[$t.length-1].t-this.offsetTime)It=$t[$t.length-1].s?$t[$t.length-1].s[0]:$t[$t.length-2].e[0],Dt=!0;else{for(var Vt=Tt,Ut=$t.length-1,zt=!0,Bt,Ht,Gt;zt&&(Bt=$t[Vt],Ht=$t[Vt+1],!(Ht.t-this.offsetTime>Et));)Vt<Ut-1?Vt+=1:zt=!1;if(Gt=this.keyframesMetadata[Vt]||{},Dt=Bt.h===1,Tt=Vt,!Dt){if(Et>=Ht.t-this.offsetTime)Ot=1;else if(Et<Bt.t-this.offsetTime)Ot=0;else{var Kt;Gt.__fnct?Kt=Gt.__fnct:(Kt=BezierFactory.getBezierEasing(Bt.o.x,Bt.o.y,Bt.i.x,Bt.i.y).get,Gt.__fnct=Kt),Ot=Kt((Et-(Bt.t-this.offsetTime))/(Ht.t-this.offsetTime-(Bt.t-this.offsetTime)))}At=Ht.s?Ht.s[0]:Bt.e[0]}It=Bt.s[0]}for(Lt=wt._length,Pt=It.i[0].length,Rt.lastIndex=Tt,jt=0;jt<Lt;jt+=1)for(Ft=0;Ft<Pt;Ft+=1)Nt=Dt?It.i[jt][Ft]:It.i[jt][Ft]+(At.i[jt][Ft]-It.i[jt][Ft])*Ot,wt.i[jt][Ft]=Nt,Nt=Dt?It.o[jt][Ft]:It.o[jt][Ft]+(At.o[jt][Ft]-It.o[jt][Ft])*Ot,wt.o[jt][Ft]=Nt,Nt=Dt?It.v[jt][Ft]:It.v[jt][Ft]+(At.v[jt][Ft]-It.v[jt][Ft])*Ot,wt.v[jt][Ft]=Nt}function it(){var Et=this.comp.renderedFrame-this.offsetTime,wt=this.keyframes[0].t-this.offsetTime,Rt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Tt=this._caching.lastFrame;return Tt!==nt&&(Tt<wt&&Et<wt||Tt>Rt&&Et>Rt)||(this._caching.lastIndex=Tt<Et?this._caching.lastIndex:0,this.interpolateShape(Et,this.pv,this._caching)),this._caching.lastFrame=Et,this.pv}function st(){this.paths=this.localShapeCollection}function lt(Et,wt){if(Et._length!==wt._length||Et.c!==wt.c)return!1;var Rt,Tt=Et._length;for(Rt=0;Rt<Tt;Rt+=1)if(Et.v[Rt][0]!==wt.v[Rt][0]||Et.v[Rt][1]!==wt.v[Rt][1]||Et.o[Rt][0]!==wt.o[Rt][0]||Et.o[Rt][1]!==wt.o[Rt][1]||Et.i[Rt][0]!==wt.i[Rt][0]||Et.i[Rt][1]!==wt.i[Rt][1])return!1;return!0}function ct(Et){lt(this.v,Et)||(this.v=shapePool.clone(Et),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ut(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Et;this.kf?Et=this.pv:this.data.ks?Et=this.data.ks.k:Et=this.data.pt.k;var wt,Rt=this.effectsSequence.length;for(wt=0;wt<Rt;wt+=1)Et=this.effectsSequence[wt](Et);this.setVValue(Et),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function dt(Et,wt,Rt){this.propType="shape",this.comp=Et.comp,this.container=Et,this.elem=Et,this.data=wt,this.k=!1,this.kf=!1,this._mdf=!1;var Tt=Rt===3?wt.pt.k:wt.ks.k;this.v=shapePool.clone(Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=st,this.effectsSequence=[]}function ht(Et){this.effectsSequence.push(Et),this.container.addDynamicProperty(this)}dt.prototype.interpolateShape=rt,dt.prototype.getValue=ut,dt.prototype.setVValue=ct,dt.prototype.addEffect=ht;function pt(Et,wt,Rt){this.propType="shape",this.comp=Et.comp,this.elem=Et,this.container=Et,this.offsetTime=Et.data.st,this.keyframes=Rt===3?wt.pt.k:wt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Tt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=nt,this.reset=st,this._caching={lastFrame:nt,lastIndex:0},this.effectsSequence=[it.bind(this)]}pt.prototype.getValue=ut,pt.prototype.interpolateShape=rt,pt.prototype.setVValue=ct,pt.prototype.addEffect=ht;var ft=function(){var Et=roundCorner;function wt(Rt,Tt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Tt.d,this.elem=Rt,this.comp=Rt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Rt),this.p=PropertyFactory.getProp(Rt,Tt.p,1,0,this),this.s=PropertyFactory.getProp(Rt,Tt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return wt.prototype={reset:st,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Tt=this.p.v[0],It=this.p.v[1],At=this.s.v[0]/2,Dt=this.s.v[1]/2,jt=this.d!==3,Ft=this.v;Ft.v[0][0]=Tt,Ft.v[0][1]=It-Dt,Ft.v[1][0]=jt?Tt+At:Tt-At,Ft.v[1][1]=It,Ft.v[2][0]=Tt,Ft.v[2][1]=It+Dt,Ft.v[3][0]=jt?Tt-At:Tt+At,Ft.v[3][1]=It,Ft.i[0][0]=jt?Tt-At*Et:Tt+At*Et,Ft.i[0][1]=It-Dt,Ft.i[1][0]=jt?Tt+At:Tt-At,Ft.i[1][1]=It-Dt*Et,Ft.i[2][0]=jt?Tt+At*Et:Tt-At*Et,Ft.i[2][1]=It+Dt,Ft.i[3][0]=jt?Tt-At:Tt+At,Ft.i[3][1]=It+Dt*Et,Ft.o[0][0]=jt?Tt+At*Et:Tt-At*Et,Ft.o[0][1]=It-Dt,Ft.o[1][0]=jt?Tt+At:Tt-At,Ft.o[1][1]=It+Dt*Et,Ft.o[2][0]=jt?Tt-At*Et:Tt+At*Et,Ft.o[2][1]=It+Dt,Ft.o[3][0]=jt?Tt-At:Tt+At,Ft.o[3][1]=It-Dt*Et}},extendPrototype([DynamicPropertyContainer],wt),wt}(),mt=function(){function Et(wt,Rt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=wt,this.comp=wt.comp,this.data=Rt,this.frameId=-1,this.d=Rt.d,this.initDynamicPropertyContainer(wt),Rt.sy===1?(this.ir=PropertyFactory.getProp(wt,Rt.ir,0,0,this),this.is=PropertyFactory.getProp(wt,Rt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(wt,Rt.pt,0,0,this),this.p=PropertyFactory.getProp(wt,Rt.p,1,0,this),this.r=PropertyFactory.getProp(wt,Rt.r,0,degToRads,this),this.or=PropertyFactory.getProp(wt,Rt.or,0,0,this),this.os=PropertyFactory.getProp(wt,Rt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Et.prototype={reset:st,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Rt=Math.floor(this.pt.v)*2,Tt=Math.PI*2/Rt,It=!0,At=this.or.v,Dt=this.ir.v,jt=this.os.v,Ft=this.is.v,Lt=2*Math.PI*At/(Rt*2),Pt=2*Math.PI*Dt/(Rt*2),Ot,Nt,$t,Vt,Ut=-Math.PI/2;Ut+=this.r.v;var zt=this.data.d===3?-1:1;for(this.v._length=0,Ot=0;Ot<Rt;Ot+=1){Nt=It?At:Dt,$t=It?jt:Ft,Vt=It?Lt:Pt;var Bt=Nt*Math.cos(Ut),Ht=Nt*Math.sin(Ut),Gt=Bt===0&&Ht===0?0:Ht/Math.sqrt(Bt*Bt+Ht*Ht),Kt=Bt===0&&Ht===0?0:-Bt/Math.sqrt(Bt*Bt+Ht*Ht);Bt+=+this.p.v[0],Ht+=+this.p.v[1],this.v.setTripleAt(Bt,Ht,Bt-Gt*Vt*$t*zt,Ht-Kt*Vt*$t*zt,Bt+Gt*Vt*$t*zt,Ht+Kt*Vt*$t*zt,Ot,!0),It=!It,Ut+=Tt*zt}},convertPolygonToPath:function(){var Rt=Math.floor(this.pt.v),Tt=Math.PI*2/Rt,It=this.or.v,At=this.os.v,Dt=2*Math.PI*It/(Rt*4),jt,Ft=-Math.PI*.5,Lt=this.data.d===3?-1:1;for(Ft+=this.r.v,this.v._length=0,jt=0;jt<Rt;jt+=1){var Pt=It*Math.cos(Ft),Ot=It*Math.sin(Ft),Nt=Pt===0&&Ot===0?0:Ot/Math.sqrt(Pt*Pt+Ot*Ot),$t=Pt===0&&Ot===0?0:-Pt/Math.sqrt(Pt*Pt+Ot*Ot);Pt+=+this.p.v[0],Ot+=+this.p.v[1],this.v.setTripleAt(Pt,Ot,Pt-Nt*Dt*At*Lt,Ot-$t*Dt*At*Lt,Pt+Nt*Dt*At*Lt,Ot+$t*Dt*At*Lt,jt,!0),Ft+=Tt*Lt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Et),Et}(),gt=function(){function Et(wt,Rt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=wt,this.comp=wt.comp,this.frameId=-1,this.d=Rt.d,this.initDynamicPropertyContainer(wt),this.p=PropertyFactory.getProp(wt,Rt.p,1,0,this),this.s=PropertyFactory.getProp(wt,Rt.s,1,0,this),this.r=PropertyFactory.getProp(wt,Rt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Et.prototype={convertRectToPath:function(){var Rt=this.p.v[0],Tt=this.p.v[1],It=this.s.v[0]/2,At=this.s.v[1]/2,Dt=bmMin(It,At,this.r.v),jt=Dt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Rt+It,Tt-At+Dt,Rt+It,Tt-At+Dt,Rt+It,Tt-At+jt,0,!0),this.v.setTripleAt(Rt+It,Tt+At-Dt,Rt+It,Tt+At-jt,Rt+It,Tt+At-Dt,1,!0),Dt!==0?(this.v.setTripleAt(Rt+It-Dt,Tt+At,Rt+It-Dt,Tt+At,Rt+It-jt,Tt+At,2,!0),this.v.setTripleAt(Rt-It+Dt,Tt+At,Rt-It+jt,Tt+At,Rt-It+Dt,Tt+At,3,!0),this.v.setTripleAt(Rt-It,Tt+At-Dt,Rt-It,Tt+At-Dt,Rt-It,Tt+At-jt,4,!0),this.v.setTripleAt(Rt-It,Tt-At+Dt,Rt-It,Tt-At+jt,Rt-It,Tt-At+Dt,5,!0),this.v.setTripleAt(Rt-It+Dt,Tt-At,Rt-It+Dt,Tt-At,Rt-It+jt,Tt-At,6,!0),this.v.setTripleAt(Rt+It-Dt,Tt-At,Rt+It-jt,Tt-At,Rt+It-Dt,Tt-At,7,!0)):(this.v.setTripleAt(Rt-It,Tt+At,Rt-It+jt,Tt+At,Rt-It,Tt+At,2),this.v.setTripleAt(Rt-It,Tt-At,Rt-It,Tt-At+jt,Rt-It,Tt-At,3))):(this.v.setTripleAt(Rt+It,Tt-At+Dt,Rt+It,Tt-At+jt,Rt+It,Tt-At+Dt,0,!0),Dt!==0?(this.v.setTripleAt(Rt+It-Dt,Tt-At,Rt+It-Dt,Tt-At,Rt+It-jt,Tt-At,1,!0),this.v.setTripleAt(Rt-It+Dt,Tt-At,Rt-It+jt,Tt-At,Rt-It+Dt,Tt-At,2,!0),this.v.setTripleAt(Rt-It,Tt-At+Dt,Rt-It,Tt-At+Dt,Rt-It,Tt-At+jt,3,!0),this.v.setTripleAt(Rt-It,Tt+At-Dt,Rt-It,Tt+At-jt,Rt-It,Tt+At-Dt,4,!0),this.v.setTripleAt(Rt-It+Dt,Tt+At,Rt-It+Dt,Tt+At,Rt-It+jt,Tt+At,5,!0),this.v.setTripleAt(Rt+It-Dt,Tt+At,Rt+It-jt,Tt+At,Rt+It-Dt,Tt+At,6,!0),this.v.setTripleAt(Rt+It,Tt+At-Dt,Rt+It,Tt+At-Dt,Rt+It,Tt+At-jt,7,!0)):(this.v.setTripleAt(Rt-It,Tt-At,Rt-It+jt,Tt-At,Rt-It,Tt-At,1,!0),this.v.setTripleAt(Rt-It,Tt+At,Rt-It,Tt+At-jt,Rt-It,Tt+At,2,!0),this.v.setTripleAt(Rt+It,Tt+At,Rt+It-jt,Tt+At,Rt+It,Tt+At,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:st},extendPrototype([DynamicPropertyContainer],Et),Et}();function xt(Et,wt,Rt){var Tt;if(Rt===3||Rt===4){var It=Rt===3?wt.pt:wt.ks,At=It.k;At.length?Tt=new pt(Et,wt,Rt):Tt=new dt(Et,wt,Rt)}else Rt===5?Tt=new gt(Et,wt):Rt===6?Tt=new ft(Et,wt):Rt===7&&(Tt=new mt(Et,wt));return Tt.k&&Et.addDynamicProperty(Tt),Tt}function yt(){return dt}function vt(){return pt}var St={};return St.getShapeProp=xt,St.getConstructorFunction=yt,St.getKeyframedConstructorFunction=vt,St}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var nt=Math.cos,rt=Math.sin,it=Math.tan,st=Math.round;function lt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ct(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1,0,0,0,0,1)}function ut(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(1,0,0,0,0,Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1)}function dt(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,0,Gt,0,0,1,0,0,-Gt,0,Ht,0,0,0,0,1)}function ht(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1,0,0,0,0,1)}function pt(Bt,Ht){return this._t(1,Ht,Bt,1,0,0)}function ft(Bt,Ht){return this.shear(it(Bt),it(Ht))}function mt(Bt,Ht){var Gt=nt(Ht),Kt=rt(Ht);return this._t(Gt,Kt,0,0,-Kt,Gt,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,it(Bt),1,0,0,0,0,1,0,0,0,0,1)._t(Gt,-Kt,0,0,Kt,Gt,0,0,0,0,1,0,0,0,0,1)}function gt(Bt,Ht,Gt){return!Gt&&Gt!==0&&(Gt=1),Bt===1&&Ht===1&&Gt===1?this:this._t(Bt,0,0,0,0,Ht,0,0,0,0,Gt,0,0,0,0,1)}function xt(Bt,Ht,Gt,Kt,Xt,or,tr,dr,fr,Sr,vr,mr,hr,gr,lr,Ir){return this.props[0]=Bt,this.props[1]=Ht,this.props[2]=Gt,this.props[3]=Kt,this.props[4]=Xt,this.props[5]=or,this.props[6]=tr,this.props[7]=dr,this.props[8]=fr,this.props[9]=Sr,this.props[10]=vr,this.props[11]=mr,this.props[12]=hr,this.props[13]=gr,this.props[14]=lr,this.props[15]=Ir,this}function yt(Bt,Ht,Gt){return Gt=Gt||0,Bt!==0||Ht!==0||Gt!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Bt,Ht,Gt,1):this}function vt(Bt,Ht,Gt,Kt,Xt,or,tr,dr,fr,Sr,vr,mr,hr,gr,lr,Ir){var wr=this.props;if(Bt===1&&Ht===0&&Gt===0&&Kt===0&&Xt===0&&or===1&&tr===0&&dr===0&&fr===0&&Sr===0&&vr===1&&mr===0)return wr[12]=wr[12]*Bt+wr[15]*hr,wr[13]=wr[13]*or+wr[15]*gr,wr[14]=wr[14]*vr+wr[15]*lr,wr[15]*=Ir,this._identityCalculated=!1,this;var Fr=wr[0],$r=wr[1],hn=wr[2],Zr=wr[3],Qt=wr[4],Jt=wr[5],pr=wr[6],Vr=wr[7],Wr=wr[8],zr=wr[9],ln=wr[10],xn=wr[11],yn=wr[12],Wn=wr[13],Mn=wr[14],sn=wr[15];return wr[0]=Fr*Bt+$r*Xt+hn*fr+Zr*hr,wr[1]=Fr*Ht+$r*or+hn*Sr+Zr*gr,wr[2]=Fr*Gt+$r*tr+hn*vr+Zr*lr,wr[3]=Fr*Kt+$r*dr+hn*mr+Zr*Ir,wr[4]=Qt*Bt+Jt*Xt+pr*fr+Vr*hr,wr[5]=Qt*Ht+Jt*or+pr*Sr+Vr*gr,wr[6]=Qt*Gt+Jt*tr+pr*vr+Vr*lr,wr[7]=Qt*Kt+Jt*dr+pr*mr+Vr*Ir,wr[8]=Wr*Bt+zr*Xt+ln*fr+xn*hr,wr[9]=Wr*Ht+zr*or+ln*Sr+xn*gr,wr[10]=Wr*Gt+zr*tr+ln*vr+xn*lr,wr[11]=Wr*Kt+zr*dr+ln*mr+xn*Ir,wr[12]=yn*Bt+Wn*Xt+Mn*fr+sn*hr,wr[13]=yn*Ht+Wn*or+Mn*Sr+sn*gr,wr[14]=yn*Gt+Wn*tr+Mn*vr+sn*lr,wr[15]=yn*Kt+Wn*dr+Mn*mr+sn*Ir,this._identityCalculated=!1,this}function St(Bt){var Ht=Bt.props;return this.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15])}function Et(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function wt(Bt){for(var Ht=0;Ht<16;){if(Bt.props[Ht]!==this.props[Ht])return!1;Ht+=1}return!0}function Rt(Bt){var Ht;for(Ht=0;Ht<16;Ht+=1)Bt.props[Ht]=this.props[Ht];return Bt}function Tt(Bt){var Ht;for(Ht=0;Ht<16;Ht+=1)this.props[Ht]=Bt[Ht]}function It(Bt,Ht,Gt){return{x:Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12],y:Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13],z:Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]}}function At(Bt,Ht,Gt){return Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12]}function Dt(Bt,Ht,Gt){return Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13]}function jt(Bt,Ht,Gt){return Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]}function Ft(){var Bt=this.props[0]*this.props[5]-this.props[1]*this.props[4],Ht=this.props[5]/Bt,Gt=-this.props[1]/Bt,Kt=-this.props[4]/Bt,Xt=this.props[0]/Bt,or=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Bt,tr=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Bt,dr=new Matrix;return dr.props[0]=Ht,dr.props[1]=Gt,dr.props[4]=Kt,dr.props[5]=Xt,dr.props[12]=or,dr.props[13]=tr,dr}function Lt(Bt){var Ht=this.getInverseMatrix();return Ht.applyToPointArray(Bt[0],Bt[1],Bt[2]||0)}function Pt(Bt){var Ht,Gt=Bt.length,Kt=[];for(Ht=0;Ht<Gt;Ht+=1)Kt[Ht]=Lt(Bt[Ht]);return Kt}function Ot(Bt,Ht,Gt){var Kt=createTypedArray("float32",6);if(this.isIdentity())Kt[0]=Bt[0],Kt[1]=Bt[1],Kt[2]=Ht[0],Kt[3]=Ht[1],Kt[4]=Gt[0],Kt[5]=Gt[1];else{var Xt=this.props[0],or=this.props[1],tr=this.props[4],dr=this.props[5],fr=this.props[12],Sr=this.props[13];Kt[0]=Bt[0]*Xt+Bt[1]*tr+fr,Kt[1]=Bt[0]*or+Bt[1]*dr+Sr,Kt[2]=Ht[0]*Xt+Ht[1]*tr+fr,Kt[3]=Ht[0]*or+Ht[1]*dr+Sr,Kt[4]=Gt[0]*Xt+Gt[1]*tr+fr,Kt[5]=Gt[0]*or+Gt[1]*dr+Sr}return Kt}function Nt(Bt,Ht,Gt){var Kt;return this.isIdentity()?Kt=[Bt,Ht,Gt]:Kt=[Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12],Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13],Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]],Kt}function $t(Bt,Ht){if(this.isIdentity())return Bt+","+Ht;var Gt=this.props;return Math.round((Bt*Gt[0]+Ht*Gt[4]+Gt[12])*100)/100+","+Math.round((Bt*Gt[1]+Ht*Gt[5]+Gt[13])*100)/100}function Vt(){for(var Bt=0,Ht=this.props,Gt="matrix3d(",Kt=1e4;Bt<16;)Gt+=st(Ht[Bt]*Kt)/Kt,Gt+=Bt===15?")":",",Bt+=1;return Gt}function Ut(Bt){var Ht=1e4;return Bt<1e-6&&Bt>0||Bt>-1e-6&&Bt<0?st(Bt*Ht)/Ht:Bt}function zt(){var Bt=this.props,Ht=Ut(Bt[0]),Gt=Ut(Bt[1]),Kt=Ut(Bt[4]),Xt=Ut(Bt[5]),or=Ut(Bt[12]),tr=Ut(Bt[13]);return"matrix("+Ht+","+Gt+","+Kt+","+Xt+","+or+","+tr+")"}return function(){this.reset=lt,this.rotate=ct,this.rotateX=ut,this.rotateY=dt,this.rotateZ=ht,this.skew=ft,this.skewFromAxis=mt,this.shear=pt,this.scale=gt,this.setTransform=xt,this.translate=yt,this.transform=vt,this.multiply=St,this.applyToPoint=It,this.applyToX=At,this.applyToY=Dt,this.applyToZ=jt,this.applyToPointArray=Nt,this.applyToTriplePoints=Ot,this.applyToPointStringified=$t,this.toCSS=Vt,this.to2dCSS=zt,this.clone=Rt,this.cloneFromProps=Tt,this.equals=wt,this.inversePoints=Pt,this.inversePoint=Lt,this.getInverseMatrix=Ft,this._t=this.transform,this.isIdentity=Et,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(it){return typeof it}:_typeof$3=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$3(nt)}var lottie={};function setLocation(nt){setLocationHref(nt)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(nt){setSubframeEnabled(nt)}function setPrefix(nt){setIdPrefix(nt)}function loadAnimation(nt){return animationManager.loadAnimation(nt)}function setQuality(nt){if(typeof nt=="string")switch(nt){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(nt)&&nt>1&&setDefaultCurveSegments(nt)}function inBrowser(){return typeof navigator<"u"}function installPlugin(nt,rt){nt==="expressions"&&setExpressionsPlugin(rt)}function getFactory(nt){switch(nt){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(nt){for(var rt=queryString.split("&"),it=0;it<rt.length;it+=1){var st=rt[it].split("=");if(decodeURIComponent(st[0])==nt)return decodeURIComponent(st[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(nt){}var ShapeModifiers=function(){var nt={},rt={};nt.registerModifier=it,nt.getModifier=st;function it(lt,ct){rt[lt]||(rt[lt]=ct)}function st(lt,ct,ut){return new rt[lt](ct,ut)}return nt}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(nt){if(!this.closed){nt.sh.container.addDynamicProperty(nt.sh);var rt={shape:nt.sh,data:nt,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(rt),this.addShapeToModifier(rt),this._isAnimated&&nt.setAsAnimated()}},ShapeModifier.prototype.init=function(nt,rt){this.shapes=[],this.elem=nt,this.initDynamicPropertyContainer(nt),this.initModifierProperties(nt,rt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(nt,rt){this.s=PropertyFactory.getProp(nt,rt.s,0,.01,this),this.e=PropertyFactory.getProp(nt,rt.e,0,.01,this),this.o=PropertyFactory.getProp(nt,rt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=rt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(nt){nt.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(nt,rt,it,st,lt){var ct=[];rt<=1?ct.push({s:nt,e:rt}):nt>=1?ct.push({s:nt-1,e:rt-1}):(ct.push({s:nt,e:1}),ct.push({s:0,e:rt-1}));var ut=[],dt,ht=ct.length,pt;for(dt=0;dt<ht;dt+=1)if(pt=ct[dt],!(pt.e*lt<st||pt.s*lt>st+it)){var ft,mt;pt.s*lt<=st?ft=0:ft=(pt.s*lt-st)/it,pt.e*lt>=st+it?mt=1:mt=(pt.e*lt-st)/it,ut.push([ft,mt])}return ut.length||ut.push([0,0]),ut},TrimModifier.prototype.releasePathsData=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)segmentsLengthPool.release(nt[rt]);return nt.length=0,nt},TrimModifier.prototype.processShapes=function(nt){var rt,it;if(this._mdf||nt){var st=this.o.v%360/360;if(st<0&&(st+=1),this.s.v>1?rt=1+st:this.s.v<0?rt=0+st:rt=this.s.v+st,this.e.v>1?it=1+st:this.e.v<0?it=0+st:it=this.e.v+st,rt>it){var lt=rt;rt=it,it=lt}rt=Math.round(rt*1e4)*1e-4,it=Math.round(it*1e4)*1e-4,this.sValue=rt,this.eValue=it}else rt=this.sValue,it=this.eValue;var ct,ut,dt=this.shapes.length,ht,pt,ft,mt,gt,xt=0;if(it===rt)for(ut=0;ut<dt;ut+=1)this.shapes[ut].localShapeCollection.releaseShapes(),this.shapes[ut].shape._mdf=!0,this.shapes[ut].shape.paths=this.shapes[ut].localShapeCollection,this._mdf&&(this.shapes[ut].pathsData.length=0);else if(it===1&&rt===0||it===0&&rt===1){if(this._mdf)for(ut=0;ut<dt;ut+=1)this.shapes[ut].pathsData.length=0,this.shapes[ut].shape._mdf=!0}else{var yt=[],vt,St;for(ut=0;ut<dt;ut+=1)if(vt=this.shapes[ut],!vt.shape._mdf&&!this._mdf&&!nt&&this.m!==2)vt.shape.paths=vt.localShapeCollection;else{if(ct=vt.shape.paths,pt=ct._length,gt=0,!vt.shape._mdf&&vt.pathsData.length)gt=vt.totalShapeLength;else{for(ft=this.releasePathsData(vt.pathsData),ht=0;ht<pt;ht+=1)mt=bez.getSegmentsLength(ct.shapes[ht]),ft.push(mt),gt+=mt.totalLength;vt.totalShapeLength=gt,vt.pathsData=ft}xt+=gt,vt.shape._mdf=!0}var Et=rt,wt=it,Rt=0,Tt;for(ut=dt-1;ut>=0;ut-=1)if(vt=this.shapes[ut],vt.shape._mdf){for(St=vt.localShapeCollection,St.releaseShapes(),this.m===2&&dt>1?(Tt=this.calculateShapeEdges(rt,it,vt.totalShapeLength,Rt,xt),Rt+=vt.totalShapeLength):Tt=[[Et,wt]],pt=Tt.length,ht=0;ht<pt;ht+=1){Et=Tt[ht][0],wt=Tt[ht][1],yt.length=0,wt<=1?yt.push({s:vt.totalShapeLength*Et,e:vt.totalShapeLength*wt}):Et>=1?yt.push({s:vt.totalShapeLength*(Et-1),e:vt.totalShapeLength*(wt-1)}):(yt.push({s:vt.totalShapeLength*Et,e:vt.totalShapeLength}),yt.push({s:0,e:vt.totalShapeLength*(wt-1)}));var It=this.addShapes(vt,yt[0]);if(yt[0].s!==yt[0].e){if(yt.length>1){var At=vt.shape.paths.shapes[vt.shape.paths._length-1];if(At.c){var Dt=It.pop();this.addPaths(It,St),It=this.addShapes(vt,yt[1],Dt)}else this.addPaths(It,St),It=this.addShapes(vt,yt[1])}this.addPaths(It,St)}}vt.shape.paths=St}}},TrimModifier.prototype.addPaths=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)rt.addShape(nt[it])},TrimModifier.prototype.addSegment=function(nt,rt,it,st,lt,ct,ut){lt.setXYAt(rt[0],rt[1],"o",ct),lt.setXYAt(it[0],it[1],"i",ct+1),ut&&lt.setXYAt(nt[0],nt[1],"v",ct),lt.setXYAt(st[0],st[1],"v",ct+1)},TrimModifier.prototype.addSegmentFromArray=function(nt,rt,it,st){rt.setXYAt(nt[1],nt[5],"o",it),rt.setXYAt(nt[2],nt[6],"i",it+1),st&&rt.setXYAt(nt[0],nt[4],"v",it),rt.setXYAt(nt[3],nt[7],"v",it+1)},TrimModifier.prototype.addShapes=function(nt,rt,it){var st=nt.pathsData,lt=nt.shape.paths.shapes,ct,ut=nt.shape.paths._length,dt,ht,pt=0,ft,mt,gt,xt,yt=[],vt,St=!0;for(it?(mt=it._length,vt=it._length):(it=shapePool.newElement(),mt=0,vt=0),yt.push(it),ct=0;ct<ut;ct+=1){for(gt=st[ct].lengths,it.c=lt[ct].c,ht=lt[ct].c?gt.length:gt.length+1,dt=1;dt<ht;dt+=1)if(ft=gt[dt-1],pt+ft.addedLength<rt.s)pt+=ft.addedLength,it.c=!1;else if(pt>rt.e){it.c=!1;break}else rt.s<=pt&&rt.e>=pt+ft.addedLength?(this.addSegment(lt[ct].v[dt-1],lt[ct].o[dt-1],lt[ct].i[dt],lt[ct].v[dt],it,mt,St),St=!1):(xt=bez.getNewSegment(lt[ct].v[dt-1],lt[ct].v[dt],lt[ct].o[dt-1],lt[ct].i[dt],(rt.s-pt)/ft.addedLength,(rt.e-pt)/ft.addedLength,gt[dt-1]),this.addSegmentFromArray(xt,it,mt,St),St=!1,it.c=!1),pt+=ft.addedLength,mt+=1;if(lt[ct].c&&gt.length){if(ft=gt[dt-1],pt<=rt.e){var Et=gt[dt-1].addedLength;rt.s<=pt&&rt.e>=pt+Et?(this.addSegment(lt[ct].v[dt-1],lt[ct].o[dt-1],lt[ct].i[0],lt[ct].v[0],it,mt,St),St=!1):(xt=bez.getNewSegment(lt[ct].v[dt-1],lt[ct].v[0],lt[ct].o[dt-1],lt[ct].i[0],(rt.s-pt)/Et,(rt.e-pt)/Et,gt[dt-1]),this.addSegmentFromArray(xt,it,mt,St),St=!1,it.c=!1)}else it.c=!1;pt+=ft.addedLength,mt+=1}if(it._length&&(it.setXYAt(it.v[vt][0],it.v[vt][1],"i",vt),it.setXYAt(it.v[it._length-1][0],it.v[it._length-1][1],"o",it._length-1)),pt>rt.e)break;ct<ut-1&&(it=shapePool.newElement(),St=!0,yt.push(it),mt=0)}return yt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(nt,rt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(nt,rt){var it=rt/100,st=[0,0],lt=nt._length,ct=0;for(ct=0;ct<lt;ct+=1)st[0]+=nt.v[ct][0],st[1]+=nt.v[ct][1];st[0]/=lt,st[1]/=lt;var ut=shapePool.newElement();ut.c=nt.c;var dt,ht,pt,ft,mt,gt;for(ct=0;ct<lt;ct+=1)dt=nt.v[ct][0]+(st[0]-nt.v[ct][0])*it,ht=nt.v[ct][1]+(st[1]-nt.v[ct][1])*it,pt=nt.o[ct][0]+(st[0]-nt.o[ct][0])*-it,ft=nt.o[ct][1]+(st[1]-nt.o[ct][1])*-it,mt=nt.i[ct][0]+(st[0]-nt.i[ct][0])*-it,gt=nt.i[ct][1]+(st[1]-nt.i[ct][1])*-it,ut.setTripleAt(dt,ht,pt,ft,mt,gt,ct);return ut},PuckerAndBloatModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amount.v;if(ut!==0){var dt,ht;for(it=0;it<st;it+=1){if(dt=this.shapes[it],ht=dt.localShapeCollection,!(!dt.shape._mdf&&!this._mdf&&!nt))for(ht.releaseShapes(),dt.shape._mdf=!0,rt=dt.shape.paths.shapes,ct=dt.shape.paths._length,lt=0;lt<ct;lt+=1)ht.addShape(this.processPath(rt[lt],ut));dt.shape.paths=dt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var nt=[0,0];function rt(ht){var pt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||pt,this.a&&ht.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ht.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ht.skewFromAxis(-this.sk.v,this.sa.v),this.r?ht.rotate(-this.r.v):ht.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ht.translate(this.px.v,this.py.v,-this.pz.v):ht.translate(this.px.v,this.py.v,0):ht.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function it(ht){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ht){var pt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var ft,mt;if(pt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(ft=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/pt,0),mt=this.p.getValueAtTime(this.p.keyframes[0].t/pt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(ft=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/pt,0),mt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/pt,0)):(ft=this.p.pv,mt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/pt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){ft=[],mt=[];var gt=this.px,xt=this.py;gt._caching.lastFrame+gt.offsetTime<=gt.keyframes[0].t?(ft[0]=gt.getValueAtTime((gt.keyframes[0].t+.01)/pt,0),ft[1]=xt.getValueAtTime((xt.keyframes[0].t+.01)/pt,0),mt[0]=gt.getValueAtTime(gt.keyframes[0].t/pt,0),mt[1]=xt.getValueAtTime(xt.keyframes[0].t/pt,0)):gt._caching.lastFrame+gt.offsetTime>=gt.keyframes[gt.keyframes.length-1].t?(ft[0]=gt.getValueAtTime(gt.keyframes[gt.keyframes.length-1].t/pt,0),ft[1]=xt.getValueAtTime(xt.keyframes[xt.keyframes.length-1].t/pt,0),mt[0]=gt.getValueAtTime((gt.keyframes[gt.keyframes.length-1].t-.01)/pt,0),mt[1]=xt.getValueAtTime((xt.keyframes[xt.keyframes.length-1].t-.01)/pt,0)):(ft=[gt.pv,xt.pv],mt[0]=gt.getValueAtTime((gt._caching.lastFrame+gt.offsetTime-.01)/pt,gt.offsetTime),mt[1]=xt.getValueAtTime((xt._caching.lastFrame+xt.offsetTime-.01)/pt,xt.offsetTime))}else mt=nt,ft=mt;this.v.rotate(-Math.atan2(ft[1]-mt[1],ft[0]-mt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function st(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function lt(){}function ct(ht){this._addDynamicProperty(ht),this.elem.addDynamicProperty(ht),this._isDirty=!0}function ut(ht,pt,ft){if(this.elem=ht,this.frameId=-1,this.propType="transform",this.data=pt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(ft||ht),pt.p&&pt.p.s?(this.px=PropertyFactory.getProp(ht,pt.p.x,0,0,this),this.py=PropertyFactory.getProp(ht,pt.p.y,0,0,this),pt.p.z&&(this.pz=PropertyFactory.getProp(ht,pt.p.z,0,0,this))):this.p=PropertyFactory.getProp(ht,pt.p||{k:[0,0,0]},1,0,this),pt.rx){if(this.rx=PropertyFactory.getProp(ht,pt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ht,pt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ht,pt.rz,0,degToRads,this),pt.or.k[0].ti){var mt,gt=pt.or.k.length;for(mt=0;mt<gt;mt+=1)pt.or.k[mt].to=null,pt.or.k[mt].ti=null}this.or=PropertyFactory.getProp(ht,pt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ht,pt.r||{k:0},0,degToRads,this);pt.sk&&(this.sk=PropertyFactory.getProp(ht,pt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ht,pt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ht,pt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ht,pt.s||{k:[100,100,100]},1,.01,this),pt.o?this.o=PropertyFactory.getProp(ht,pt.o,0,.01,ht):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}ut.prototype={applyToMatrix:rt,getValue:it,precalculateMatrix:st,autoOrient:lt},extendPrototype([DynamicPropertyContainer],ut),ut.prototype.addDynamicProperty=ct,ut.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function dt(ht,pt,ft){return new ut(ht,pt,ft)}return{getTransformProperty:dt}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(nt,rt.c,0,null,this),this.o=PropertyFactory.getProp(nt,rt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(nt,rt.tr,this),this.so=PropertyFactory.getProp(nt,rt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(nt,rt.tr.eo,0,.01,this),this.data=rt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(nt,rt,it,st,lt,ct){var ut=ct?-1:1,dt=st.s.v[0]+(1-st.s.v[0])*(1-lt),ht=st.s.v[1]+(1-st.s.v[1])*(1-lt);nt.translate(st.p.v[0]*ut*lt,st.p.v[1]*ut*lt,st.p.v[2]),rt.translate(-st.a.v[0],-st.a.v[1],st.a.v[2]),rt.rotate(-st.r.v*ut*lt),rt.translate(st.a.v[0],st.a.v[1],st.a.v[2]),it.translate(-st.a.v[0],-st.a.v[1],st.a.v[2]),it.scale(ct?1/dt:dt,ct?1/ht:ht),it.translate(st.a.v[0],st.a.v[1],st.a.v[2])},RepeaterModifier.prototype.init=function(nt,rt,it,st){for(this.elem=nt,this.arr=rt,this.pos=it,this.elemsData=st,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(nt),this.initModifierProperties(nt,rt[it]);it>0;)it-=1,this._elements.unshift(rt[it]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt]._processed=!1,nt[rt].ty==="gr"&&this.resetElements(nt[rt].it)},RepeaterModifier.prototype.cloneElements=function(nt){var rt=JSON.parse(JSON.stringify(nt));return this.resetElements(rt),rt},RepeaterModifier.prototype.changeGroupRender=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)nt[it]._render=rt,nt[it].ty==="gr"&&this.changeGroupRender(nt[it].it,rt)},RepeaterModifier.prototype.processShapes=function(nt){var rt,it,st,lt,ct,ut=!1;if(this._mdf||nt){var dt=Math.ceil(this.c.v);if(this._groups.length<dt){for(;this._groups.length<dt;){var ht={it:this.cloneElements(this._elements),ty:"gr"};ht.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ht),this._groups.splice(0,0,ht),this._currentCopies+=1}this.elem.reloadShapes(),ut=!0}ct=0;var pt;for(st=0;st<=this._groups.length-1;st+=1){if(pt=ct<dt,this._groups[st]._render=pt,this.changeGroupRender(this._groups[st].it,pt),!pt){var ft=this.elemsData[st].it,mt=ft[ft.length-1];mt.transform.op.v!==0?(mt.transform.op._mdf=!0,mt.transform.op.v=0):mt.transform.op._mdf=!1}ct+=1}this._currentCopies=dt;var gt=this.o.v,xt=gt%1,yt=gt>0?Math.floor(gt):Math.ceil(gt),vt=this.pMatrix.props,St=this.rMatrix.props,Et=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var wt=0;if(gt>0){for(;wt<yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),wt+=1;xt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,xt,!1),wt+=xt)}else if(gt<0){for(;wt>yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),wt-=1;xt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-xt,!0),wt-=xt)}st=this.data.m===1?0:this._currentCopies-1,lt=this.data.m===1?1:-1,ct=this._currentCopies;for(var Rt,Tt;ct;){if(rt=this.elemsData[st].it,it=rt[rt.length-1].transform.mProps.v.props,Tt=it.length,rt[rt.length-1].transform.mProps._mdf=!0,rt[rt.length-1].transform.op._mdf=!0,rt[rt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(st/(this._currentCopies-1)),wt!==0){for((st!==0&&lt===1||st!==this._currentCopies-1&&lt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(St[0],St[1],St[2],St[3],St[4],St[5],St[6],St[7],St[8],St[9],St[10],St[11],St[12],St[13],St[14],St[15]),this.matrix.transform(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6],Et[7],Et[8],Et[9],Et[10],Et[11],Et[12],Et[13],Et[14],Et[15]),this.matrix.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],vt[8],vt[9],vt[10],vt[11],vt[12],vt[13],vt[14],vt[15]),Rt=0;Rt<Tt;Rt+=1)it[Rt]=this.matrix.props[Rt];this.matrix.reset()}else for(this.matrix.reset(),Rt=0;Rt<Tt;Rt+=1)it[Rt]=this.matrix.props[Rt];wt+=1,ct-=1,st+=lt}}else for(ct=this._currentCopies,st=0,lt=1;ct;)rt=this.elemsData[st].it,it=rt[rt.length-1].transform.mProps.v.props,rt[rt.length-1].transform.mProps._mdf=!1,rt[rt.length-1].transform.op._mdf=!1,ct-=1,st+=lt;return ut},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(nt,rt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(nt,rt){var it=shapePool.newElement();it.c=nt.c;var st,lt=nt._length,ct,ut,dt,ht,pt,ft,mt=0,gt,xt,yt,vt,St,Et;for(st=0;st<lt;st+=1)ct=nt.v[st],dt=nt.o[st],ut=nt.i[st],ct[0]===dt[0]&&ct[1]===dt[1]&&ct[0]===ut[0]&&ct[1]===ut[1]?(st===0||st===lt-1)&&!nt.c?(it.setTripleAt(ct[0],ct[1],dt[0],dt[1],ut[0],ut[1],mt),mt+=1):(st===0?ht=nt.v[lt-1]:ht=nt.v[st-1],pt=Math.sqrt(Math.pow(ct[0]-ht[0],2)+Math.pow(ct[1]-ht[1],2)),ft=pt?Math.min(pt/2,rt)/pt:0,St=ct[0]+(ht[0]-ct[0])*ft,gt=St,Et=ct[1]-(ct[1]-ht[1])*ft,xt=Et,yt=gt-(gt-ct[0])*roundCorner,vt=xt-(xt-ct[1])*roundCorner,it.setTripleAt(gt,xt,yt,vt,St,Et,mt),mt+=1,st===lt-1?ht=nt.v[0]:ht=nt.v[st+1],pt=Math.sqrt(Math.pow(ct[0]-ht[0],2)+Math.pow(ct[1]-ht[1],2)),ft=pt?Math.min(pt/2,rt)/pt:0,yt=ct[0]+(ht[0]-ct[0])*ft,gt=yt,vt=ct[1]+(ht[1]-ct[1])*ft,xt=vt,St=gt-(gt-ct[0])*roundCorner,Et=xt-(xt-ct[1])*roundCorner,it.setTripleAt(gt,xt,yt,vt,St,Et,mt),mt+=1):(it.setTripleAt(nt.v[st][0],nt.v[st][1],nt.o[st][0],nt.o[st][1],nt.i[st][0],nt.i[st][1],mt),mt+=1);return it},RoundCornersModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.rd.v;if(ut!==0){var dt,ht;for(it=0;it<st;it+=1){if(dt=this.shapes[it],ht=dt.localShapeCollection,!(!dt.shape._mdf&&!this._mdf&&!nt))for(ht.releaseShapes(),dt.shape._mdf=!0,rt=dt.shape.paths.shapes,ct=dt.shape.paths._length,lt=0;lt<ct;lt+=1)ht.addShape(this.processPath(rt[lt],ut));dt.shape.paths=dt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(nt,rt){return Math.abs(nt-rt)*1e5<=Math.min(Math.abs(nt),Math.abs(rt))}function floatZero(nt){return Math.abs(nt)<=1e-5}function lerp(nt,rt,it){return nt*(1-it)+rt*it}function lerpPoint(nt,rt,it){return[lerp(nt[0],rt[0],it),lerp(nt[1],rt[1],it)]}function quadRoots(nt,rt,it){if(nt===0)return[];var st=rt*rt-4*nt*it;if(st<0)return[];var lt=-rt/(2*nt);if(st===0)return[lt];var ct=Math.sqrt(st)/(2*nt);return[lt-ct,lt+ct]}function polynomialCoefficients(nt,rt,it,st){return[-nt+3*rt-3*it+st,3*nt-6*rt+3*it,-3*nt+3*rt,nt]}function singlePoint(nt){return new PolynomialBezier(nt,nt,nt,nt,!1)}function PolynomialBezier(nt,rt,it,st,lt){lt&&pointEqual(nt,rt)&&(rt=lerpPoint(nt,st,1/3)),lt&&pointEqual(it,st)&&(it=lerpPoint(nt,st,2/3));var ct=polynomialCoefficients(nt[0],rt[0],it[0],st[0]),ut=polynomialCoefficients(nt[1],rt[1],it[1],st[1]);this.a=[ct[0],ut[0]],this.b=[ct[1],ut[1]],this.c=[ct[2],ut[2]],this.d=[ct[3],ut[3]],this.points=[nt,rt,it,st]}PolynomialBezier.prototype.point=function(nt){return[((this.a[0]*nt+this.b[0])*nt+this.c[0])*nt+this.d[0],((this.a[1]*nt+this.b[1])*nt+this.c[1])*nt+this.d[1]]},PolynomialBezier.prototype.derivative=function(nt){return[(3*nt*this.a[0]+2*this.b[0])*nt+this.c[0],(3*nt*this.a[1]+2*this.b[1])*nt+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(nt){var rt=this.derivative(nt);return Math.atan2(rt[1],rt[0])},PolynomialBezier.prototype.normalAngle=function(nt){var rt=this.derivative(nt);return Math.atan2(rt[0],rt[1])},PolynomialBezier.prototype.inflectionPoints=function(){var nt=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(nt))return[];var rt=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/nt,it=rt*rt-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/nt;if(it<0)return[];var st=Math.sqrt(it);return floatZero(st)?st>0&&st<1?[rt]:[]:[rt-st,rt+st].filter(function(lt){return lt>0&&lt<1})},PolynomialBezier.prototype.split=function(nt){if(nt<=0)return[singlePoint(this.points[0]),this];if(nt>=1)return[this,singlePoint(this.points[this.points.length-1])];var rt=lerpPoint(this.points[0],this.points[1],nt),it=lerpPoint(this.points[1],this.points[2],nt),st=lerpPoint(this.points[2],this.points[3],nt),lt=lerpPoint(rt,it,nt),ct=lerpPoint(it,st,nt),ut=lerpPoint(lt,ct,nt);return[new PolynomialBezier(this.points[0],rt,lt,ut,!0),new PolynomialBezier(ut,ct,st,this.points[3],!0)]};function extrema(nt,rt){var it=nt.points[0][rt],st=nt.points[nt.points.length-1][rt];if(it>st){var lt=st;st=it,it=lt}for(var ct=quadRoots(3*nt.a[rt],2*nt.b[rt],nt.c[rt]),ut=0;ut<ct.length;ut+=1)if(ct[ut]>0&&ct[ut]<1){var dt=nt.point(ct[ut])[rt];dt<it?it=dt:dt>st&&(st=dt)}return{min:it,max:st}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var nt=this.bounds();return{left:nt.x.min,right:nt.x.max,top:nt.y.min,bottom:nt.y.max,width:nt.x.max-nt.x.min,height:nt.y.max-nt.y.min,cx:(nt.x.max+nt.x.min)/2,cy:(nt.y.max+nt.y.min)/2}};function intersectData(nt,rt,it){var st=nt.boundingBox();return{cx:st.cx,cy:st.cy,width:st.width,height:st.height,bez:nt,t:(rt+it)/2,t1:rt,t2:it}}function splitData(nt){var rt=nt.bez.split(.5);return[intersectData(rt[0],nt.t1,nt.t),intersectData(rt[1],nt.t,nt.t2)]}function boxIntersect(nt,rt){return Math.abs(nt.cx-rt.cx)*2<nt.width+rt.width&&Math.abs(nt.cy-rt.cy)*2<nt.height+rt.height}function intersectsImpl(nt,rt,it,st,lt,ct){if(boxIntersect(nt,rt)){if(it>=ct||nt.width<=st&&nt.height<=st&&rt.width<=st&&rt.height<=st){lt.push([nt.t,rt.t]);return}var ut=splitData(nt),dt=splitData(rt);intersectsImpl(ut[0],dt[0],it+1,st,lt,ct),intersectsImpl(ut[0],dt[1],it+1,st,lt,ct),intersectsImpl(ut[1],dt[0],it+1,st,lt,ct),intersectsImpl(ut[1],dt[1],it+1,st,lt,ct)}}PolynomialBezier.prototype.intersections=function(nt,rt,it){rt===void 0&&(rt=2),it===void 0&&(it=7);var st=[];return intersectsImpl(intersectData(this,0,1),intersectData(nt,0,1),0,rt,st,it),st},PolynomialBezier.shapeSegment=function(nt,rt){var it=(rt+1)%nt.length();return new PolynomialBezier(nt.v[rt],nt.o[rt],nt.i[it],nt.v[it],!0)},PolynomialBezier.shapeSegmentInverted=function(nt,rt){var it=(rt+1)%nt.length();return new PolynomialBezier(nt.v[it],nt.i[it],nt.o[rt],nt.v[rt],!0)};function crossProduct(nt,rt){return[nt[1]*rt[2]-nt[2]*rt[1],nt[2]*rt[0]-nt[0]*rt[2],nt[0]*rt[1]-nt[1]*rt[0]]}function lineIntersection(nt,rt,it,st){var lt=[nt[0],nt[1],1],ct=[rt[0],rt[1],1],ut=[it[0],it[1],1],dt=[st[0],st[1],1],ht=crossProduct(crossProduct(lt,ct),crossProduct(ut,dt));return floatZero(ht[2])?null:[ht[0]/ht[2],ht[1]/ht[2]]}function polarOffset(nt,rt,it){return[nt[0]+Math.cos(rt)*it,nt[1]-Math.sin(rt)*it]}function pointDistance(nt,rt){return Math.hypot(nt[0]-rt[0],nt[1]-rt[1])}function pointEqual(nt,rt){return floatEqual(nt[0],rt[0])&&floatEqual(nt[1],rt[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(nt,rt.s,0,null,this),this.frequency=PropertyFactory.getProp(nt,rt.r,0,null,this),this.pointsType=PropertyFactory.getProp(nt,rt.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(nt,rt,it,st,lt,ct,ut){var dt=it-Math.PI/2,ht=it+Math.PI/2,pt=rt[0]+Math.cos(it)*st*lt,ft=rt[1]-Math.sin(it)*st*lt;nt.setTripleAt(pt,ft,pt+Math.cos(dt)*ct,ft-Math.sin(dt)*ct,pt+Math.cos(ht)*ut,ft-Math.sin(ht)*ut,nt.length())}function getPerpendicularVector(nt,rt){var it=[rt[0]-nt[0],rt[1]-nt[1]],st=-Math.PI*.5,lt=[Math.cos(st)*it[0]-Math.sin(st)*it[1],Math.sin(st)*it[0]+Math.cos(st)*it[1]];return lt}function getProjectingAngle(nt,rt){var it=rt===0?nt.length()-1:rt-1,st=(rt+1)%nt.length(),lt=nt.v[it],ct=nt.v[st],ut=getPerpendicularVector(lt,ct);return Math.atan2(0,1)-Math.atan2(ut[1],ut[0])}function zigZagCorner(nt,rt,it,st,lt,ct,ut){var dt=getProjectingAngle(rt,it),ht=rt.v[it%rt._length],pt=rt.v[it===0?rt._length-1:it-1],ft=rt.v[(it+1)%rt._length],mt=ct===2?Math.sqrt(Math.pow(ht[0]-pt[0],2)+Math.pow(ht[1]-pt[1],2)):0,gt=ct===2?Math.sqrt(Math.pow(ht[0]-ft[0],2)+Math.pow(ht[1]-ft[1],2)):0;setPoint(nt,rt.v[it%rt._length],dt,ut,st,gt/((lt+1)*2),mt/((lt+1)*2))}function zigZagSegment(nt,rt,it,st,lt,ct){for(var ut=0;ut<st;ut+=1){var dt=(ut+1)/(st+1),ht=lt===2?Math.sqrt(Math.pow(rt.points[3][0]-rt.points[0][0],2)+Math.pow(rt.points[3][1]-rt.points[0][1],2)):0,pt=rt.normalAngle(dt),ft=rt.point(dt);setPoint(nt,ft,pt,ct,it,ht/((st+1)*2),ht/((st+1)*2)),ct=-ct}return ct}ZigZagModifier.prototype.processPath=function(nt,rt,it,st){var lt=nt._length,ct=shapePool.newElement();if(ct.c=nt.c,nt.c||(lt-=1),lt===0)return ct;var ut=-1,dt=PolynomialBezier.shapeSegment(nt,0);zigZagCorner(ct,nt,0,rt,it,st,ut);for(var ht=0;ht<lt;ht+=1)ut=zigZagSegment(ct,dt,rt,it,st,-ut),ht===lt-1&&!nt.c?dt=null:dt=PolynomialBezier.shapeSegment(nt,(ht+1)%lt),zigZagCorner(ct,nt,ht+1,rt,it,st,ut);return ct},ZigZagModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amplitude.v,dt=Math.max(0,Math.round(this.frequency.v)),ht=this.pointsType.v;if(ut!==0){var pt,ft;for(it=0;it<st;it+=1){if(pt=this.shapes[it],ft=pt.localShapeCollection,!(!pt.shape._mdf&&!this._mdf&&!nt))for(ft.releaseShapes(),pt.shape._mdf=!0,rt=pt.shape.paths.shapes,ct=pt.shape.paths._length,lt=0;lt<ct;lt+=1)ft.addShape(this.processPath(rt[lt],ut,dt,ht));pt.shape.paths=pt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(nt,rt,it){var st=Math.atan2(rt[0]-nt[0],rt[1]-nt[1]);return[polarOffset(nt,st,it),polarOffset(rt,st,it)]}function offsetSegment(nt,rt){var it,st,lt,ct,ut,dt,ht;ht=linearOffset(nt.points[0],nt.points[1],rt),it=ht[0],st=ht[1],ht=linearOffset(nt.points[1],nt.points[2],rt),lt=ht[0],ct=ht[1],ht=linearOffset(nt.points[2],nt.points[3],rt),ut=ht[0],dt=ht[1];var pt=lineIntersection(it,st,lt,ct);pt===null&&(pt=st);var ft=lineIntersection(ut,dt,lt,ct);return ft===null&&(ft=ut),new PolynomialBezier(it,pt,ft,dt)}function joinLines(nt,rt,it,st,lt){var ct=rt.points[3],ut=it.points[0];if(st===3||pointEqual(ct,ut))return ct;if(st===2){var dt=-rt.tangentAngle(1),ht=-it.tangentAngle(0)+Math.PI,pt=lineIntersection(ct,polarOffset(ct,dt+Math.PI/2,100),ut,polarOffset(ut,dt+Math.PI/2,100)),ft=pt?pointDistance(pt,ct):pointDistance(ct,ut)/2,mt=polarOffset(ct,dt,2*ft*roundCorner);return nt.setXYAt(mt[0],mt[1],"o",nt.length()-1),mt=polarOffset(ut,ht,2*ft*roundCorner),nt.setTripleAt(ut[0],ut[1],ut[0],ut[1],mt[0],mt[1],nt.length()),ut}var gt=pointEqual(ct,rt.points[2])?rt.points[0]:rt.points[2],xt=pointEqual(ut,it.points[1])?it.points[3]:it.points[1],yt=lineIntersection(gt,ct,ut,xt);return yt&&pointDistance(yt,ct)<lt?(nt.setTripleAt(yt[0],yt[1],yt[0],yt[1],yt[0],yt[1],nt.length()),yt):ct}function getIntersection(nt,rt){var it=nt.intersections(rt);return it.length&&floatEqual(it[0][0],1)&&it.shift(),it.length?it[0]:null}function pruneSegmentIntersection(nt,rt){var it=nt.slice(),st=rt.slice(),lt=getIntersection(nt[nt.length-1],rt[0]);return lt&&(it[nt.length-1]=nt[nt.length-1].split(lt[0])[0],st[0]=rt[0].split(lt[1])[1]),nt.length>1&&rt.length>1&&(lt=getIntersection(nt[0],rt[rt.length-1]),lt)?[[nt[0].split(lt[0])[0]],[rt[rt.length-1].split(lt[1])[1]]]:[it,st]}function pruneIntersections(nt){for(var rt,it=1;it<nt.length;it+=1)rt=pruneSegmentIntersection(nt[it-1],nt[it]),nt[it-1]=rt[0],nt[it]=rt[1];return nt.length>1&&(rt=pruneSegmentIntersection(nt[nt.length-1],nt[0]),nt[nt.length-1]=rt[0],nt[0]=rt[1]),nt}function offsetSegmentSplit(nt,rt){var it=nt.inflectionPoints(),st,lt,ct,ut;if(it.length===0)return[offsetSegment(nt,rt)];if(it.length===1||floatEqual(it[1],1))return ct=nt.split(it[0]),st=ct[0],lt=ct[1],[offsetSegment(st,rt),offsetSegment(lt,rt)];ct=nt.split(it[0]),st=ct[0];var dt=(it[1]-it[0])/(1-it[0]);return ct=ct[1].split(dt),ut=ct[0],lt=ct[1],[offsetSegment(st,rt),offsetSegment(ut,rt),offsetSegment(lt,rt)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(nt,rt.a,0,null,this),this.miterLimit=PropertyFactory.getProp(nt,rt.ml,0,null,this),this.lineJoin=rt.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(nt,rt,it,st){var lt=shapePool.newElement();lt.c=nt.c;var ct=nt.length();nt.c||(ct-=1);var ut,dt,ht,pt=[];for(ut=0;ut<ct;ut+=1)ht=PolynomialBezier.shapeSegment(nt,ut),pt.push(offsetSegmentSplit(ht,rt));if(!nt.c)for(ut=ct-1;ut>=0;ut-=1)ht=PolynomialBezier.shapeSegmentInverted(nt,ut),pt.push(offsetSegmentSplit(ht,rt));pt=pruneIntersections(pt);var ft=null,mt=null;for(ut=0;ut<pt.length;ut+=1){var gt=pt[ut];for(mt&&(ft=joinLines(lt,mt,gt[0],it,st)),mt=gt[gt.length-1],dt=0;dt<gt.length;dt+=1)ht=gt[dt],ft&&pointEqual(ht.points[0],ft)?lt.setXYAt(ht.points[1][0],ht.points[1][1],"o",lt.length()-1):lt.setTripleAt(ht.points[0][0],ht.points[0][1],ht.points[1][0],ht.points[1][1],ht.points[0][0],ht.points[0][1],lt.length()),lt.setTripleAt(ht.points[3][0],ht.points[3][1],ht.points[3][0],ht.points[3][1],ht.points[2][0],ht.points[2][1],lt.length()),ft=ht.points[3]}return pt.length&&joinLines(lt,mt,pt[0][0],it,st),lt},OffsetPathModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amount.v,dt=this.miterLimit.v,ht=this.lineJoin;if(ut!==0){var pt,ft;for(it=0;it<st;it+=1){if(pt=this.shapes[it],ft=pt.localShapeCollection,!(!pt.shape._mdf&&!this._mdf&&!nt))for(ft.releaseShapes(),pt.shape._mdf=!0,rt=pt.shape.paths.shapes,ct=pt.shape.paths._length,lt=0;lt<ct;lt+=1)ft.addShape(this.processPath(rt[lt],ut,ht,dt));pt.shape.paths=pt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(nt){for(var rt=nt.fStyle?nt.fStyle.split(" "):[],it="normal",st="normal",lt=rt.length,ct,ut=0;ut<lt;ut+=1)switch(ct=rt[ut].toLowerCase(),ct){case"italic":st="italic";break;case"bold":it="700";break;case"black":it="900";break;case"medium":it="500";break;case"regular":case"normal":it="400";break;case"light":case"thin":it="200";break}return{style:st,weight:nt.fWeight||it}}var FontManager=function(){var nt=5e3,rt={w:0,size:0,shapes:[],data:{shapes:[]}},it=[];it=it.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var st=127988,lt=917631,ct=917601,ut=917626,dt=65039,ht=8205,pt=127462,ft=127487,mt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function gt(Ut){var zt=Ut.split(","),Bt,Ht=zt.length,Gt=[];for(Bt=0;Bt<Ht;Bt+=1)zt[Bt]!=="sans-serif"&&zt[Bt]!=="monospace"&&Gt.push(zt[Bt]);return Gt.join(",")}function xt(Ut,zt){var Bt=createTag("span");Bt.setAttribute("aria-hidden",!0),Bt.style.fontFamily=zt;var Ht=createTag("span");Ht.innerText="giItT1WQy@!-/#",Bt.style.position="absolute",Bt.style.left="-10000px",Bt.style.top="-10000px",Bt.style.fontSize="300px",Bt.style.fontVariant="normal",Bt.style.fontStyle="normal",Bt.style.fontWeight="normal",Bt.style.letterSpacing="0",Bt.appendChild(Ht),document.body.appendChild(Bt);var Gt=Ht.offsetWidth;return Ht.style.fontFamily=gt(Ut)+", "+zt,{node:Ht,w:Gt,parent:Bt}}function yt(){var Ut,zt=this.fonts.length,Bt,Ht,Gt=zt;for(Ut=0;Ut<zt;Ut+=1)this.fonts[Ut].loaded?Gt-=1:this.fonts[Ut].fOrigin==="n"||this.fonts[Ut].origin===0?this.fonts[Ut].loaded=!0:(Bt=this.fonts[Ut].monoCase.node,Ht=this.fonts[Ut].monoCase.w,Bt.offsetWidth!==Ht?(Gt-=1,this.fonts[Ut].loaded=!0):(Bt=this.fonts[Ut].sansCase.node,Ht=this.fonts[Ut].sansCase.w,Bt.offsetWidth!==Ht&&(Gt-=1,this.fonts[Ut].loaded=!0)),this.fonts[Ut].loaded&&(this.fonts[Ut].sansCase.parent.parentNode.removeChild(this.fonts[Ut].sansCase.parent),this.fonts[Ut].monoCase.parent.parentNode.removeChild(this.fonts[Ut].monoCase.parent)));Gt!==0&&Date.now()-this.initTime<nt?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function vt(Ut,zt){var Bt=document.body&&zt?"svg":"canvas",Ht,Gt=getFontProperties(Ut);if(Bt==="svg"){var Kt=createNS("text");Kt.style.fontSize="100px",Kt.setAttribute("font-family",Ut.fFamily),Kt.setAttribute("font-style",Gt.style),Kt.setAttribute("font-weight",Gt.weight),Kt.textContent="1",Ut.fClass?(Kt.style.fontFamily="inherit",Kt.setAttribute("class",Ut.fClass)):Kt.style.fontFamily=Ut.fFamily,zt.appendChild(Kt),Ht=Kt}else{var Xt=new OffscreenCanvas(500,500).getContext("2d");Xt.font=Gt.style+" "+Gt.weight+" 100px "+Ut.fFamily,Ht=Xt}function or(tr){return Bt==="svg"?(Ht.textContent=tr,Ht.getComputedTextLength()):Ht.measureText(tr).width}return{measureText:or}}function St(Ut,zt){if(!Ut){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Ut.list;return}if(!document.body){this.isLoaded=!0,Ut.list.forEach(function(vr){vr.helper=vt(vr),vr.cache={}}),this.fonts=Ut.list;return}var Bt=Ut.list,Ht,Gt=Bt.length,Kt=Gt;for(Ht=0;Ht<Gt;Ht+=1){var Xt=!0,or,tr;if(Bt[Ht].loaded=!1,Bt[Ht].monoCase=xt(Bt[Ht].fFamily,"monospace"),Bt[Ht].sansCase=xt(Bt[Ht].fFamily,"sans-serif"),!Bt[Ht].fPath)Bt[Ht].loaded=!0,Kt-=1;else if(Bt[Ht].fOrigin==="p"||Bt[Ht].origin===3){if(or=document.querySelectorAll('style[f-forigin="p"][f-family="'+Bt[Ht].fFamily+'"], style[f-origin="3"][f-family="'+Bt[Ht].fFamily+'"]'),or.length>0&&(Xt=!1),Xt){var dr=createTag("style");dr.setAttribute("f-forigin",Bt[Ht].fOrigin),dr.setAttribute("f-origin",Bt[Ht].origin),dr.setAttribute("f-family",Bt[Ht].fFamily),dr.type="text/css",dr.innerText="@font-face {font-family: "+Bt[Ht].fFamily+"; font-style: normal; src: url('"+Bt[Ht].fPath+"');}",zt.appendChild(dr)}}else if(Bt[Ht].fOrigin==="g"||Bt[Ht].origin===1){for(or=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),tr=0;tr<or.length;tr+=1)or[tr].href.indexOf(Bt[Ht].fPath)!==-1&&(Xt=!1);if(Xt){var fr=createTag("link");fr.setAttribute("f-forigin",Bt[Ht].fOrigin),fr.setAttribute("f-origin",Bt[Ht].origin),fr.type="text/css",fr.rel="stylesheet",fr.href=Bt[Ht].fPath,document.body.appendChild(fr)}}else if(Bt[Ht].fOrigin==="t"||Bt[Ht].origin===2){for(or=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),tr=0;tr<or.length;tr+=1)Bt[Ht].fPath===or[tr].src&&(Xt=!1);if(Xt){var Sr=createTag("link");Sr.setAttribute("f-forigin",Bt[Ht].fOrigin),Sr.setAttribute("f-origin",Bt[Ht].origin),Sr.setAttribute("rel","stylesheet"),Sr.setAttribute("href",Bt[Ht].fPath),zt.appendChild(Sr)}}Bt[Ht].helper=vt(Bt[Ht],zt),Bt[Ht].cache={},this.fonts.push(Bt[Ht])}Kt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Et(Ut){if(Ut){this.chars||(this.chars=[]);var zt,Bt=Ut.length,Ht,Gt=this.chars.length,Kt;for(zt=0;zt<Bt;zt+=1){for(Ht=0,Kt=!1;Ht<Gt;)this.chars[Ht].style===Ut[zt].style&&this.chars[Ht].fFamily===Ut[zt].fFamily&&this.chars[Ht].ch===Ut[zt].ch&&(Kt=!0),Ht+=1;Kt||(this.chars.push(Ut[zt]),Gt+=1)}}}function wt(Ut,zt,Bt){for(var Ht=0,Gt=this.chars.length;Ht<Gt;){if(this.chars[Ht].ch===Ut&&this.chars[Ht].style===zt&&this.chars[Ht].fFamily===Bt)return this.chars[Ht];Ht+=1}return(typeof Ut=="string"&&Ut.charCodeAt(0)!==13||!Ut)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Ut,zt,Bt)),rt}function Rt(Ut,zt,Bt){var Ht=this.getFontByName(zt),Gt=Ut;if(!Ht.cache[Gt]){var Kt=Ht.helper;if(Ut===" "){var Xt=Kt.measureText("|"+Ut+"|"),or=Kt.measureText("||");Ht.cache[Gt]=(Xt-or)/100}else Ht.cache[Gt]=Kt.measureText(Ut)/100}return Ht.cache[Gt]*Bt}function Tt(Ut){for(var zt=0,Bt=this.fonts.length;zt<Bt;){if(this.fonts[zt].fName===Ut)return this.fonts[zt];zt+=1}return this.fonts[0]}function It(Ut){var zt=0,Bt=Ut.charCodeAt(0);if(Bt>=55296&&Bt<=56319){var Ht=Ut.charCodeAt(1);Ht>=56320&&Ht<=57343&&(zt=(Bt-55296)*1024+Ht-56320+65536)}return zt}function At(Ut,zt){var Bt=Ut.toString(16)+zt.toString(16);return mt.indexOf(Bt)!==-1}function Dt(Ut){return Ut===ht}function jt(Ut){return Ut===dt}function Ft(Ut){var zt=It(Ut);return zt>=pt&&zt<=ft}function Lt(Ut){return Ft(Ut.substr(0,2))&&Ft(Ut.substr(2,2))}function Pt(Ut){return it.indexOf(Ut)!==-1}function Ot(Ut,zt){var Bt=It(Ut.substr(zt,2));if(Bt!==st)return!1;var Ht=0;for(zt+=2;Ht<5;){if(Bt=It(Ut.substr(zt,2)),Bt<ct||Bt>ut)return!1;Ht+=1,zt+=2}return It(Ut.substr(zt,2))===lt}function Nt(){this.isLoaded=!0}var $t=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};$t.isModifier=At,$t.isZeroWidthJoiner=Dt,$t.isFlagEmoji=Lt,$t.isRegionalCode=Ft,$t.isCombinedCharacter=Pt,$t.isRegionalFlag=Ot,$t.isVariationSelector=jt,$t.BLACK_FLAG_CODE_POINT=st;var Vt={addChars:Et,addFonts:St,getCharData:wt,getFontByName:Tt,measureText:Rt,checkLoadedFonts:yt,setIsLoaded:Nt};return $t.prototype=Vt,$t}();function SlotManager(nt){this.animationData=nt}SlotManager.prototype.getProp=function(nt){return this.animationData.slots&&this.animationData.slots[nt.sid]?Object.assign(nt,this.animationData.slots[nt.sid].p):nt};function slotFactory(nt){return new SlotManager(nt)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(rt){this.renderableComponents.indexOf(rt)===-1&&this.renderableComponents.push(rt)},removeRenderableComponent:function(rt){this.renderableComponents.indexOf(rt)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(rt),1)},prepareRenderableFrame:function(rt){this.checkLayerLimits(rt)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(rt){this.data.ip-this.data.st<=rt&&this.data.op-this.data.st>rt?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var rt,it=this.renderableComponents.length;for(rt=0;rt<it;rt+=1)this.renderableComponents[rt].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var nt={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(rt){return nt[rt]||""}}();function SliderEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function AngleEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function ColorEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,1,0,it)}function PointEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,1,0,it)}function LayerIndexEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function MaskIndexEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function CheckboxEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function NoValueEffect(){this.p={}}function EffectsManager(nt,rt){var it=nt.ef||[];this.effectElements=[];var st,lt=it.length,ct;for(st=0;st<lt;st+=1)ct=new GroupEffect(it[st],rt),this.effectElements.push(ct)}function GroupEffect(nt,rt){this.init(nt,rt)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(nt,rt){this.data=nt,this.effectElements=[],this.initDynamicPropertyContainer(rt);var it,st=this.data.ef.length,lt,ct=this.data.ef;for(it=0;it<st;it+=1){switch(lt=null,ct[it].ty){case 0:lt=new SliderEffect(ct[it],rt,this);break;case 1:lt=new AngleEffect(ct[it],rt,this);break;case 2:lt=new ColorEffect(ct[it],rt,this);break;case 3:lt=new PointEffect(ct[it],rt,this);break;case 4:case 7:lt=new CheckboxEffect(ct[it],rt,this);break;case 10:lt=new LayerIndexEffect(ct[it],rt,this);break;case 11:lt=new MaskIndexEffect(ct[it],rt,this);break;case 5:lt=new EffectsManager(ct[it],rt);break;default:lt=new NoValueEffect(ct[it]);break}lt&&this.effectElements.push(lt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var rt=0,it=this.data.masksProperties.length;rt<it;){if(this.data.masksProperties[rt].mode!=="n"&&this.data.masksProperties[rt].cl!==!1)return!0;rt+=1}return!1},initExpressions:function(){var rt=getExpressionInterfaces();if(rt){var it=rt("layer"),st=rt("effects"),lt=rt("shape"),ct=rt("text"),ut=rt("comp");this.layerInterface=it(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var dt=st.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(dt),this.data.ty===0||this.data.xt?this.compInterface=ut(this):this.data.ty===4?(this.layerInterface.shapeInterface=lt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ct(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var rt=getBlendMode(this.data.bm),it=this.baseElement||this.layerElement;it.style["mix-blend-mode"]=rt},initBaseData:function(rt,it,st){this.globalData=it,this.comp=st,this.data=rt,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(rt,it){var st,lt=this.dynamicProperties.length;for(st=0;st<lt;st+=1)(it||this._isParent&&this.dynamicProperties[st].propType==="transform")&&(this.dynamicProperties[st].getValue(),this.dynamicProperties[st]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(rt){this.dynamicProperties.indexOf(rt)===-1&&this.dynamicProperties.push(rt)}};function FootageElement(nt,rt,it){this.initFrame(),this.initRenderable(),this.assetData=rt.getAssetData(nt.refId),this.footageData=rt.imageLoader.getAsset(this.assetData),this.initBaseData(nt,rt,it)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var nt=getExpressionInterfaces();if(nt){var rt=nt("footage");this.layerInterface=rt(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(nt,rt,it){this.initFrame(),this.initRenderable(),this.assetData=rt.getAssetData(nt.refId),this.initBaseData(nt,rt,it),this._isPlaying=!1,this._canPlay=!1;var st=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(st),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,nt.au&&nt.au.lv?nt.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(nt){if(this.prepareRenderableFrame(nt,!0),this.prepareProperties(nt,!0),this.tm._placeholder)this._currentTime=nt/this.data.sr;else{var rt=this.tm.v;this._currentTime=rt}this._volume=this.lv.v[0];var it=this._volume*this._volumeMultiplier;this._previousVolume!==it&&(this._previousVolume=it,this.audio.volume(it))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(nt){this.audio.rate(nt)},AudioElement.prototype.volume=function(nt){this._volumeMultiplier=nt,this._previousVolume=nt*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(nt){var rt,it=this.layers.length,st;for(this.completeLayers=!0,rt=it-1;rt>=0;rt-=1)this.elements[rt]||(st=this.layers[rt],st.ip-st.st<=nt-this.layers[rt].st&&st.op-st.st>nt-this.layers[rt].st&&this.buildItem(rt)),this.completeLayers=this.elements[rt]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(nt){switch(nt.ty){case 2:return this.createImage(nt);case 0:return this.createComp(nt);case 1:return this.createSolid(nt);case 3:return this.createNull(nt);case 4:return this.createShape(nt);case 5:return this.createText(nt);case 6:return this.createAudio(nt);case 13:return this.createCamera(nt);case 15:return this.createFootage(nt);default:return this.createNull(nt)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(nt){return new AudioElement(nt,this.globalData,this)},BaseRenderer.prototype.createFootage=function(nt){return new FootageElement(nt,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)this.buildItem(nt);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(nt){this.completeLayers=!1;var rt,it=nt.length,st,lt=this.layers.length;for(rt=0;rt<it;rt+=1)for(st=0;st<lt;){if(this.layers[st].id===nt[rt].id){this.layers[st]=nt[rt];break}st+=1}},BaseRenderer.prototype.setProjectInterface=function(nt){this.globalData.projectInterface=nt},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(nt,rt,it){for(var st=this.elements,lt=this.layers,ct=0,ut=lt.length;ct<ut;)lt[ct].ind==rt&&(!st[ct]||st[ct]===!0?(this.buildItem(ct),this.addPendingElement(nt)):(it.push(st[ct]),st[ct].setAsParent(),lt[ct].parent!==void 0?this.buildElementParenting(nt,lt[ct].parent,it):nt.setHierarchy(it))),ct+=1},BaseRenderer.prototype.addPendingElement=function(nt){this.pendingElements.push(nt)},BaseRenderer.prototype.searchExtraCompositions=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)if(nt[rt].xt){var st=this.createComp(nt[rt]);st.initExpressions(),this.globalData.projectInterface.registerComposition(st)}},BaseRenderer.prototype.getElementById=function(nt){var rt,it=this.elements.length;for(rt=0;rt<it;rt+=1)if(this.elements[rt].data.ind===nt)return this.elements[rt];return null},BaseRenderer.prototype.getElementByPath=function(nt){var rt=nt.shift(),it;if(typeof rt=="number")it=this.elements[rt];else{var st,lt=this.elements.length;for(st=0;st<lt;st+=1)if(this.elements[st].data.nm===rt){it=this.elements[st];break}}return nt.length===0?it:it.getElementByPath(nt)},BaseRenderer.prototype.setupGlobalData=function(nt,rt){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(nt),this.globalData.fontManager.addChars(nt.chars),this.globalData.fontManager.addFonts(nt.fonts,rt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=nt.fr,this.globalData.nm=nt.nm,this.globalData.compSize={w:nt.w,h:nt.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var rt=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:rt,localMat:rt,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var rt,it=this.finalTransform.mat,st=0,lt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;st<lt;){if(this.hierarchy[st].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}st+=1}if(this.finalTransform._matMdf)for(rt=this.finalTransform.mProp.v.props,it.cloneFromProps(rt),st=0;st<lt;st+=1)it.multiply(this.hierarchy[st].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var rt=0,it=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;rt<it;)this.localTransforms[rt]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[rt]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),rt+=1;if(this.finalTransform._localMatMdf){var st=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(st),rt=1;rt<it;rt+=1){var lt=this.localTransforms[rt].matrix;st.multiply(lt)}st.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ct=this.finalTransform.localOpacity;for(rt=0;rt<it;rt+=1)ct*=this.localTransforms[rt].opacity*.01;this.finalTransform.localOpacity=ct}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var rt=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(rt.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var it=0,st=rt.length;for(it=0;it<st;it+=1)this.localTransforms.push(rt[it])}}},globalToLocal:function(rt){var it=[];it.push(this.finalTransform);for(var st=!0,lt=this.comp;st;)lt.finalTransform?(lt.data.hasMask&&it.splice(0,0,lt.finalTransform),lt=lt.comp):st=!1;var ct,ut=it.length,dt;for(ct=0;ct<ut;ct+=1)dt=it[ct].mat.applyToPointArray(0,0,0),rt=[rt[0]-dt[0],rt[1]-dt[1],0];return rt},mHelper:new Matrix};function MaskElement(nt,rt,it){this.data=nt,this.element=rt,this.globalData=it,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var st=this.globalData.defs,lt,ct=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ct),this.solidPath="";var ut,dt=this.masksProperties,ht=0,pt=[],ft,mt,gt=createElementID(),xt,yt,vt,St,Et="clipPath",wt="clip-path";for(lt=0;lt<ct;lt+=1)if((dt[lt].mode!=="a"&&dt[lt].mode!=="n"||dt[lt].inv||dt[lt].o.k!==100||dt[lt].o.x)&&(Et="mask",wt="mask"),(dt[lt].mode==="s"||dt[lt].mode==="i")&&ht===0?(xt=createNS("rect"),xt.setAttribute("fill","#ffffff"),xt.setAttribute("width",this.element.comp.data.w||0),xt.setAttribute("height",this.element.comp.data.h||0),pt.push(xt)):xt=null,ut=createNS("path"),dt[lt].mode==="n")this.viewData[lt]={op:PropertyFactory.getProp(this.element,dt[lt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,dt[lt],3),elem:ut,lastPath:""},st.appendChild(ut);else{ht+=1,ut.setAttribute("fill",dt[lt].mode==="s"?"#000000":"#ffffff"),ut.setAttribute("clip-rule","nonzero");var Rt;if(dt[lt].x.k!==0?(Et="mask",wt="mask",St=PropertyFactory.getProp(this.element,dt[lt].x,0,null,this.element),Rt=createElementID(),yt=createNS("filter"),yt.setAttribute("id",Rt),vt=createNS("feMorphology"),vt.setAttribute("operator","erode"),vt.setAttribute("in","SourceGraphic"),vt.setAttribute("radius","0"),yt.appendChild(vt),st.appendChild(yt),ut.setAttribute("stroke",dt[lt].mode==="s"?"#000000":"#ffffff")):(vt=null,St=null),this.storedData[lt]={elem:ut,x:St,expan:vt,lastPath:"",lastOperator:"",filterId:Rt,lastRadius:0},dt[lt].mode==="i"){mt=pt.length;var Tt=createNS("g");for(ft=0;ft<mt;ft+=1)Tt.appendChild(pt[ft]);var It=createNS("mask");It.setAttribute("mask-type","alpha"),It.setAttribute("id",gt+"_"+ht),It.appendChild(ut),st.appendChild(It),Tt.setAttribute("mask","url("+getLocationHref()+"#"+gt+"_"+ht+")"),pt.length=0,pt.push(Tt)}else pt.push(ut);dt[lt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[lt]={elem:ut,lastPath:"",op:PropertyFactory.getProp(this.element,dt[lt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,dt[lt],3),invRect:xt},this.viewData[lt].prop.k||this.drawPath(dt[lt],this.viewData[lt].prop.v,this.viewData[lt])}for(this.maskElement=createNS(Et),ct=pt.length,lt=0;lt<ct;lt+=1)this.maskElement.appendChild(pt[lt]);ht>0&&(this.maskElement.setAttribute("id",gt),this.element.maskedElement.setAttribute(wt,"url("+getLocationHref()+"#"+gt+")"),st.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(nt){return this.viewData[nt].prop},MaskElement.prototype.renderFrame=function(nt){var rt=this.element.finalTransform.mat,it,st=this.masksProperties.length;for(it=0;it<st;it+=1)if((this.viewData[it].prop._mdf||nt)&&this.drawPath(this.masksProperties[it],this.viewData[it].prop.v,this.viewData[it]),(this.viewData[it].op._mdf||nt)&&this.viewData[it].elem.setAttribute("fill-opacity",this.viewData[it].op.v),this.masksProperties[it].mode!=="n"&&(this.viewData[it].invRect&&(this.element.finalTransform.mProp._mdf||nt)&&this.viewData[it].invRect.setAttribute("transform",rt.getInverseMatrix().to2dCSS()),this.storedData[it].x&&(this.storedData[it].x._mdf||nt))){var lt=this.storedData[it].expan;this.storedData[it].x.v<0?(this.storedData[it].lastOperator!=="erode"&&(this.storedData[it].lastOperator="erode",this.storedData[it].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[it].filterId+")")),lt.setAttribute("radius",-this.storedData[it].x.v)):(this.storedData[it].lastOperator!=="dilate"&&(this.storedData[it].lastOperator="dilate",this.storedData[it].elem.setAttribute("filter",null)),this.storedData[it].elem.setAttribute("stroke-width",this.storedData[it].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var nt="M0,0 ";return nt+=" h"+this.globalData.compSize.w,nt+=" v"+this.globalData.compSize.h,nt+=" h-"+this.globalData.compSize.w,nt+=" v-"+this.globalData.compSize.h+" ",nt},MaskElement.prototype.drawPath=function(nt,rt,it){var st=" M"+rt.v[0][0]+","+rt.v[0][1],lt,ct;for(ct=rt._length,lt=1;lt<ct;lt+=1)st+=" C"+rt.o[lt-1][0]+","+rt.o[lt-1][1]+" "+rt.i[lt][0]+","+rt.i[lt][1]+" "+rt.v[lt][0]+","+rt.v[lt][1];if(rt.c&&ct>1&&(st+=" C"+rt.o[lt-1][0]+","+rt.o[lt-1][1]+" "+rt.i[0][0]+","+rt.i[0][1]+" "+rt.v[0][0]+","+rt.v[0][1]),it.lastPath!==st){var ut="";it.elem&&(rt.c&&(ut=nt.inv?this.solidPath+st:st),it.elem.setAttribute("d",ut)),it.lastPath=st}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var nt={};nt.createFilter=rt,nt.createAlphaToLuminanceFilter=it;function rt(st,lt){var ct=createNS("filter");return ct.setAttribute("id",st),lt!==!0&&(ct.setAttribute("filterUnits","objectBoundingBox"),ct.setAttribute("x","0%"),ct.setAttribute("y","0%"),ct.setAttribute("width","100%"),ct.setAttribute("height","100%")),ct}function it(){var st=createNS("feColorMatrix");return st.setAttribute("type","matrix"),st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),st}return nt}(),featureSupport=function(){var nt={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(nt.maskType=!1),/firefox/i.test(navigator.userAgent)&&(nt.svgLumaHidden=!1),nt}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(nt){var rt,it="SourceGraphic",st=nt.data.ef?nt.data.ef.length:0,lt=createElementID(),ct=filtersFactory.createFilter(lt,!0),ut=0;this.filters=[];var dt;for(rt=0;rt<st;rt+=1){dt=null;var ht=nt.data.ef[rt].ty;if(registeredEffects$1[ht]){var pt=registeredEffects$1[ht].effect;dt=new pt(ct,nt.effectsManager.effectElements[rt],nt,idPrefix+ut,it),it=idPrefix+ut,registeredEffects$1[ht].countsAsEffect&&(ut+=1)}dt&&this.filters.push(dt)}ut&&(nt.globalData.defs.appendChild(ct),nt.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+lt+")")),this.filters.length&&nt.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(nt){var rt,it=this.filters.length;for(rt=0;rt<it;rt+=1)this.filters[rt].renderFrame(nt)},SVGEffects.prototype.getEffects=function(nt){var rt,it=this.filters.length,st=[];for(rt=0;rt<it;rt+=1)this.filters[rt].type===nt&&st.push(this.filters[rt]);return st};function registerEffect$1(nt,rt,it){registeredEffects$1[nt]={effect:rt,countsAsEffect:it}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var rt=null;if(this.data.td){this.matteMasks={};var it=createNS("g");it.setAttribute("id",this.layerId),it.appendChild(this.layerElement),rt=it,this.globalData.defs.appendChild(it)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),rt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var st=createNS("clipPath"),lt=createNS("path");lt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ct=createElementID();if(st.setAttribute("id",ct),st.appendChild(lt),this.globalData.defs.appendChild(st),this.checkMasks()){var ut=createNS("g");ut.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),ut.appendChild(this.layerElement),this.transformedElement=ut,rt?rt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(rt){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[rt]){var it=this.layerId+"_"+rt,st,lt,ct,ut;if(rt===1||rt===3){var dt=createNS("mask");dt.setAttribute("id",it),dt.setAttribute("mask-type",rt===3?"luminance":"alpha"),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),dt.appendChild(ct),this.globalData.defs.appendChild(dt),!featureSupport.maskType&&rt===1&&(dt.setAttribute("mask-type","luminance"),st=createElementID(),lt=filtersFactory.createFilter(st),this.globalData.defs.appendChild(lt),lt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),ut.appendChild(ct),dt.appendChild(ut),ut.setAttribute("filter","url("+getLocationHref()+"#"+st+")"))}else if(rt===2){var ht=createNS("mask");ht.setAttribute("id",it),ht.setAttribute("mask-type","alpha");var pt=createNS("g");ht.appendChild(pt),st=createElementID(),lt=filtersFactory.createFilter(st);var ft=createNS("feComponentTransfer");ft.setAttribute("in","SourceGraphic"),lt.appendChild(ft);var mt=createNS("feFuncA");mt.setAttribute("type","table"),mt.setAttribute("tableValues","1.0 0.0"),ft.appendChild(mt),this.globalData.defs.appendChild(lt);var gt=createNS("rect");gt.setAttribute("width",this.comp.data.w),gt.setAttribute("height",this.comp.data.h),gt.setAttribute("x","0"),gt.setAttribute("y","0"),gt.setAttribute("fill","#ffffff"),gt.setAttribute("opacity","0"),pt.setAttribute("filter","url("+getLocationHref()+"#"+st+")"),pt.appendChild(gt),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),pt.appendChild(ct),featureSupport.maskType||(ht.setAttribute("mask-type","luminance"),lt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),pt.appendChild(gt),ut.appendChild(this.layerElement),pt.appendChild(ut)),this.globalData.defs.appendChild(ht)}this.matteMasks[rt]=it}return this.matteMasks[rt]},setMatte:function(rt){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+rt+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(rt){this.hierarchy=rt},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var nt={initElement:function(it,st,lt){this.initFrame(),this.initBaseData(it,st,lt),this.initTransform(it,st,lt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var it=this.baseElement||this.layerElement;it.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var it=this.baseElement||this.layerElement;it.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(nt)],RenderableDOMElement)})();function IImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.assetData&&this.assetData.sid&&(this.assetData=rt.slotManager.getProp(this.assetData)),this.initElement(nt,rt,it),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var nt=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",nt),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(nt,rt){this.elem=nt,this.pos=rt}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(rt){var it,st=this.shapeModifiers.length;for(it=0;it<st;it+=1)this.shapeModifiers[it].addShape(rt)},isShapeInAnimatedModifiers:function(rt){for(var it=0,st=this.shapeModifiers.length;it<st;)if(this.shapeModifiers[it].isAnimatedWithShape(rt))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var rt,it=this.shapes.length;for(rt=0;rt<it;rt+=1)this.shapes[rt].sh.reset();it=this.shapeModifiers.length;var st;for(rt=it-1;rt>=0&&(st=this.shapeModifiers[rt].processShapes(this._isFirstFrame),!st);rt-=1);}},searchProcessedElement:function(rt){for(var it=this.processedElements,st=0,lt=it.length;st<lt;){if(it[st].elem===rt)return it[st].pos;st+=1}return 0},addProcessedElement:function(rt,it){for(var st=this.processedElements,lt=st.length;lt;)if(lt-=1,st[lt].elem===rt){st[lt].pos=it;return}st.push(new ProcessedElement(rt,it))},prepareFrame:function(rt){this.prepareRenderableFrame(rt),this.prepareProperties(rt,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(nt,rt,it){this.caches=[],this.styles=[],this.transformers=nt,this.lStr="",this.sh=it,this.lvl=rt,this._isAnimated=!!it.k;for(var st=0,lt=nt.length;st<lt;){if(nt[st].mProps.dynamicProperties.length){this._isAnimated=!0;break}st+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(nt,rt){this.data=nt,this.type=nt.ty,this.d="",this.lvl=rt,this._mdf=!1,this.closed=nt.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(nt,rt,it,st){this.elem=nt,this.frameId=-1,this.dataProps=createSizedArray(rt.length),this.renderer=it,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",rt.length?rt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(st);var lt,ct=rt.length||0,ut;for(lt=0;lt<ct;lt+=1)ut=PropertyFactory.getProp(nt,rt[lt].v,0,0,this),this.k=ut.k||this.k,this.dataProps[lt]={n:rt[lt].n,p:ut};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(nt){if(!(this.elem.globalData.frameId===this.frameId&&!nt)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||nt,this._mdf)){var rt=0,it=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),rt=0;rt<it;rt+=1)this.dataProps[rt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[rt].p.v:this.dashArray[rt]=this.dataProps[rt].p.v:this.dashoffset[0]=this.dataProps[rt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.w=PropertyFactory.getProp(nt,rt.w,0,null,this),this.d=new DashProperty(nt,rt.d||{},"svg",this),this.c=PropertyFactory.getProp(nt,rt.c,1,255,this),this.style=it,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.c=PropertyFactory.getProp(nt,rt.c,1,255,this),this.style=it}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.style=it}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(nt,rt,it){this.data=rt,this.c=createTypedArray("uint8c",rt.p*4);var st=rt.k.k[0].s?rt.k.k[0].s.length-rt.p*4:rt.k.k.length-rt.p*4;this.o=createTypedArray("float32",st),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=st,this.initDynamicPropertyContainer(it),this.prop=PropertyFactory.getProp(nt,rt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(nt,rt){for(var it=0,st=this.o.length/2,lt;it<st;){if(lt=Math.abs(nt[it*4]-nt[rt*4+it*2]),lt>.01)return!1;it+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var nt=0,rt=this.data.k.k.length;nt<rt;){if(!this.comparePoints(this.data.k.k[nt].s,this.data.p))return!1;nt+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(nt){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||nt){var rt,it=this.data.p*4,st,lt;for(rt=0;rt<it;rt+=1)st=rt%4===0?100:255,lt=Math.round(this.prop.v[rt]*st),this.c[rt]!==lt&&(this.c[rt]=lt,this._cmdf=!nt);if(this.o.length)for(it=this.prop.v.length,rt=this.data.p*4;rt<it;rt+=1)st=rt%2===0?100:1,lt=rt%2===0?Math.round(this.prop.v[rt]*100):this.prop.v[rt],this.o[rt-this.data.p*4]!==lt&&(this.o[rt-this.data.p*4]=lt,this._omdf=!nt);this._mdf=!nt}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.initGradientData(nt,rt,it)}SVGGradientFillStyleData.prototype.initGradientData=function(nt,rt,it){this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.s=PropertyFactory.getProp(nt,rt.s,1,null,this),this.e=PropertyFactory.getProp(nt,rt.e,1,null,this),this.h=PropertyFactory.getProp(nt,rt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(nt,rt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(nt,rt.g,this),this.style=it,this.stops=[],this.setGradientData(it.pElem,rt),this.setGradientOpacity(rt,it),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(nt,rt){var it=createElementID(),st=createNS(rt.t===1?"linearGradient":"radialGradient");st.setAttribute("id",it),st.setAttribute("spreadMethod","pad"),st.setAttribute("gradientUnits","userSpaceOnUse");var lt=[],ct,ut,dt;for(dt=rt.g.p*4,ut=0;ut<dt;ut+=4)ct=createNS("stop"),st.appendChild(ct),lt.push(ct);nt.setAttribute(rt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+it+")"),this.gf=st,this.cst=lt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(nt,rt){if(this.g._hasOpacity&&!this.g._collapsable){var it,st,lt,ct=createNS("mask"),ut=createNS("path");ct.appendChild(ut);var dt=createElementID(),ht=createElementID();ct.setAttribute("id",ht);var pt=createNS(nt.t===1?"linearGradient":"radialGradient");pt.setAttribute("id",dt),pt.setAttribute("spreadMethod","pad"),pt.setAttribute("gradientUnits","userSpaceOnUse"),lt=nt.g.k.k[0].s?nt.g.k.k[0].s.length:nt.g.k.k.length;var ft=this.stops;for(st=nt.g.p*4;st<lt;st+=2)it=createNS("stop"),it.setAttribute("stop-color","rgb(255,255,255)"),pt.appendChild(it),ft.push(it);ut.setAttribute(nt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+dt+")"),nt.ty==="gs"&&(ut.setAttribute("stroke-linecap",lineCapEnum[nt.lc||2]),ut.setAttribute("stroke-linejoin",lineJoinEnum[nt.lj||2]),nt.lj===1&&ut.setAttribute("stroke-miterlimit",nt.ml)),this.of=pt,this.ms=ct,this.ost=ft,this.maskId=ht,rt.msElem=ut}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(nt,rt.w,0,null,this),this.d=new DashProperty(nt,rt.d||{},"svg",this),this.initGradientData(nt,rt,it),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(nt,rt,it){this.transform={mProps:nt,op:rt,container:it},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(rt,it,st,lt){if(it===0)return"";var ct=rt.o,ut=rt.i,dt=rt.v,ht,pt=" M"+lt.applyToPointStringified(dt[0][0],dt[0][1]);for(ht=1;ht<it;ht+=1)pt+=" C"+lt.applyToPointStringified(ct[ht-1][0],ct[ht-1][1])+" "+lt.applyToPointStringified(ut[ht][0],ut[ht][1])+" "+lt.applyToPointStringified(dt[ht][0],dt[ht][1]);return st&&it&&(pt+=" C"+lt.applyToPointStringified(ct[ht-1][0],ct[ht-1][1])+" "+lt.applyToPointStringified(ut[0][0],ut[0][1])+" "+lt.applyToPointStringified(dt[0][0],dt[0][1]),pt+="z"),pt},SVGElementsRenderer=function(){var nt=new Matrix,rt=new Matrix,it={createRenderFunction:st};function st(mt){switch(mt.ty){case"fl":return dt;case"gf":return pt;case"gs":return ht;case"st":return ft;case"sh":case"el":case"rc":case"sr":return ut;case"tr":return lt;case"no":return ct;default:return null}}function lt(mt,gt,xt){(xt||gt.transform.op._mdf)&&gt.transform.container.setAttribute("opacity",gt.transform.op.v),(xt||gt.transform.mProps._mdf)&&gt.transform.container.setAttribute("transform",gt.transform.mProps.v.to2dCSS())}function ct(){}function ut(mt,gt,xt){var yt,vt,St,Et,wt,Rt,Tt=gt.styles.length,It=gt.lvl,At,Dt,jt,Ft;for(Rt=0;Rt<Tt;Rt+=1){if(Et=gt.sh._mdf||xt,gt.styles[Rt].lvl<It){for(Dt=rt.reset(),jt=It-gt.styles[Rt].lvl,Ft=gt.transformers.length-1;!Et&&jt>0;)Et=gt.transformers[Ft].mProps._mdf||Et,jt-=1,Ft-=1;if(Et)for(jt=It-gt.styles[Rt].lvl,Ft=gt.transformers.length-1;jt>0;)Dt.multiply(gt.transformers[Ft].mProps.v),jt-=1,Ft-=1}else Dt=nt;if(At=gt.sh.paths,vt=At._length,Et){for(St="",yt=0;yt<vt;yt+=1)wt=At.shapes[yt],wt&&wt._length&&(St+=buildShapeString(wt,wt._length,wt.c,Dt));gt.caches[Rt]=St}else St=gt.caches[Rt];gt.styles[Rt].d+=mt.hd===!0?"":St,gt.styles[Rt]._mdf=Et||gt.styles[Rt]._mdf}}function dt(mt,gt,xt){var yt=gt.style;(gt.c._mdf||xt)&&yt.pElem.setAttribute("fill","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||xt)&&yt.pElem.setAttribute("fill-opacity",gt.o.v)}function ht(mt,gt,xt){pt(mt,gt,xt),ft(mt,gt,xt)}function pt(mt,gt,xt){var yt=gt.gf,vt=gt.g._hasOpacity,St=gt.s.v,Et=gt.e.v;if(gt.o._mdf||xt){var wt=mt.ty==="gf"?"fill-opacity":"stroke-opacity";gt.style.pElem.setAttribute(wt,gt.o.v)}if(gt.s._mdf||xt){var Rt=mt.t===1?"x1":"cx",Tt=Rt==="x1"?"y1":"cy";yt.setAttribute(Rt,St[0]),yt.setAttribute(Tt,St[1]),vt&&!gt.g._collapsable&&(gt.of.setAttribute(Rt,St[0]),gt.of.setAttribute(Tt,St[1]))}var It,At,Dt,jt;if(gt.g._cmdf||xt){It=gt.cst;var Ft=gt.g.c;for(Dt=It.length,At=0;At<Dt;At+=1)jt=It[At],jt.setAttribute("offset",Ft[At*4]+"%"),jt.setAttribute("stop-color","rgb("+Ft[At*4+1]+","+Ft[At*4+2]+","+Ft[At*4+3]+")")}if(vt&&(gt.g._omdf||xt)){var Lt=gt.g.o;for(gt.g._collapsable?It=gt.cst:It=gt.ost,Dt=It.length,At=0;At<Dt;At+=1)jt=It[At],gt.g._collapsable||jt.setAttribute("offset",Lt[At*2]+"%"),jt.setAttribute("stop-opacity",Lt[At*2+1])}if(mt.t===1)(gt.e._mdf||xt)&&(yt.setAttribute("x2",Et[0]),yt.setAttribute("y2",Et[1]),vt&&!gt.g._collapsable&&(gt.of.setAttribute("x2",Et[0]),gt.of.setAttribute("y2",Et[1])));else{var Pt;if((gt.s._mdf||gt.e._mdf||xt)&&(Pt=Math.sqrt(Math.pow(St[0]-Et[0],2)+Math.pow(St[1]-Et[1],2)),yt.setAttribute("r",Pt),vt&&!gt.g._collapsable&&gt.of.setAttribute("r",Pt)),gt.e._mdf||gt.h._mdf||gt.a._mdf||xt){Pt||(Pt=Math.sqrt(Math.pow(St[0]-Et[0],2)+Math.pow(St[1]-Et[1],2)));var Ot=Math.atan2(Et[1]-St[1],Et[0]-St[0]),Nt=gt.h.v;Nt>=1?Nt=.99:Nt<=-1&&(Nt=-.99);var $t=Pt*Nt,Vt=Math.cos(Ot+gt.a.v)*$t+St[0],Ut=Math.sin(Ot+gt.a.v)*$t+St[1];yt.setAttribute("fx",Vt),yt.setAttribute("fy",Ut),vt&&!gt.g._collapsable&&(gt.of.setAttribute("fx",Vt),gt.of.setAttribute("fy",Ut))}}}function ft(mt,gt,xt){var yt=gt.style,vt=gt.d;vt&&(vt._mdf||xt)&&vt.dashStr&&(yt.pElem.setAttribute("stroke-dasharray",vt.dashStr),yt.pElem.setAttribute("stroke-dashoffset",vt.dashoffset[0])),gt.c&&(gt.c._mdf||xt)&&yt.pElem.setAttribute("stroke","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||xt)&&yt.pElem.setAttribute("stroke-opacity",gt.o.v),(gt.w._mdf||xt)&&(yt.pElem.setAttribute("stroke-width",gt.w.v),yt.msElem&&yt.msElem.setAttribute("stroke-width",gt.w.v))}return it}();function SVGShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(nt,rt,it),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var nt,rt=this.shapes.length,it,st,lt=this.stylesList.length,ct,ut=[],dt=!1;for(st=0;st<lt;st+=1){for(ct=this.stylesList[st],dt=!1,ut.length=0,nt=0;nt<rt;nt+=1)it=this.shapes[nt],it.styles.indexOf(ct)!==-1&&(ut.push(it),dt=it._isAnimated||dt);ut.length>1&&dt&&this.setShapesAsAnimated(ut)}},SVGShapeElement.prototype.setShapesAsAnimated=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(nt,rt){var it,st=new SVGStyleData(nt,rt),lt=st.pElem;if(nt.ty==="st")it=new SVGStrokeStyleData(this,nt,st);else if(nt.ty==="fl")it=new SVGFillStyleData(this,nt,st);else if(nt.ty==="gf"||nt.ty==="gs"){var ct=nt.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;it=new ct(this,nt,st),this.globalData.defs.appendChild(it.gf),it.maskId&&(this.globalData.defs.appendChild(it.ms),this.globalData.defs.appendChild(it.of),lt.setAttribute("mask","url("+getLocationHref()+"#"+it.maskId+")"))}else nt.ty==="no"&&(it=new SVGNoStyleData(this,nt,st));return(nt.ty==="st"||nt.ty==="gs")&&(lt.setAttribute("stroke-linecap",lineCapEnum[nt.lc||2]),lt.setAttribute("stroke-linejoin",lineJoinEnum[nt.lj||2]),lt.setAttribute("fill-opacity","0"),nt.lj===1&&lt.setAttribute("stroke-miterlimit",nt.ml)),nt.r===2&&lt.setAttribute("fill-rule","evenodd"),nt.ln&&lt.setAttribute("id",nt.ln),nt.cl&&lt.setAttribute("class",nt.cl),nt.bm&&(lt.style["mix-blend-mode"]=getBlendMode(nt.bm)),this.stylesList.push(st),this.addToAnimatedContents(nt,it),it},SVGShapeElement.prototype.createGroupElement=function(nt){var rt=new ShapeGroupData;return nt.ln&&rt.gr.setAttribute("id",nt.ln),nt.cl&&rt.gr.setAttribute("class",nt.cl),nt.bm&&(rt.gr.style["mix-blend-mode"]=getBlendMode(nt.bm)),rt},SVGShapeElement.prototype.createTransformElement=function(nt,rt){var it=TransformPropertyFactory.getTransformProperty(this,nt,this),st=new SVGTransformData(it,it.o,rt);return this.addToAnimatedContents(nt,st),st},SVGShapeElement.prototype.createShapeElement=function(nt,rt,it){var st=4;nt.ty==="rc"?st=5:nt.ty==="el"?st=6:nt.ty==="sr"&&(st=7);var lt=ShapePropertyFactory.getShapeProp(this,nt,st,this),ct=new SVGShapeData(rt,it,lt);return this.shapes.push(ct),this.addShapeToModifiers(ct),this.addToAnimatedContents(nt,ct),ct},SVGShapeElement.prototype.addToAnimatedContents=function(nt,rt){for(var it=0,st=this.animatedContents.length;it<st;){if(this.animatedContents[it].element===rt)return;it+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(nt),element:rt,data:nt})},SVGShapeElement.prototype.setElementStyles=function(nt){var rt=nt.styles,it,st=this.stylesList.length;for(it=0;it<st;it+=1)this.stylesList[it].closed||rt.push(this.stylesList[it])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var nt,rt=this.itemsData.length;for(nt=0;nt<rt;nt+=1)this.prevViewData[nt]=this.itemsData[nt];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),rt=this.dynamicProperties.length,nt=0;nt<rt;nt+=1)this.dynamicProperties[nt].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(nt,rt,it,st,lt,ct,ut){var dt=[].concat(ct),ht,pt=nt.length-1,ft,mt,gt=[],xt=[],yt,vt,St;for(ht=pt;ht>=0;ht-=1){if(St=this.searchProcessedElement(nt[ht]),St?rt[ht]=it[St-1]:nt[ht]._render=ut,nt[ht].ty==="fl"||nt[ht].ty==="st"||nt[ht].ty==="gf"||nt[ht].ty==="gs"||nt[ht].ty==="no")St?rt[ht].style.closed=!1:rt[ht]=this.createStyleElement(nt[ht],lt),nt[ht]._render&&rt[ht].style.pElem.parentNode!==st&&st.appendChild(rt[ht].style.pElem),gt.push(rt[ht].style);else if(nt[ht].ty==="gr"){if(!St)rt[ht]=this.createGroupElement(nt[ht]);else for(mt=rt[ht].it.length,ft=0;ft<mt;ft+=1)rt[ht].prevViewData[ft]=rt[ht].it[ft];this.searchShapes(nt[ht].it,rt[ht].it,rt[ht].prevViewData,rt[ht].gr,lt+1,dt,ut),nt[ht]._render&&rt[ht].gr.parentNode!==st&&st.appendChild(rt[ht].gr)}else nt[ht].ty==="tr"?(St||(rt[ht]=this.createTransformElement(nt[ht],st)),yt=rt[ht].transform,dt.push(yt)):nt[ht].ty==="sh"||nt[ht].ty==="rc"||nt[ht].ty==="el"||nt[ht].ty==="sr"?(St||(rt[ht]=this.createShapeElement(nt[ht],dt,lt)),this.setElementStyles(rt[ht])):nt[ht].ty==="tm"||nt[ht].ty==="rd"||nt[ht].ty==="ms"||nt[ht].ty==="pb"||nt[ht].ty==="zz"||nt[ht].ty==="op"?(St?(vt=rt[ht],vt.closed=!1):(vt=ShapeModifiers.getModifier(nt[ht].ty),vt.init(this,nt[ht]),rt[ht]=vt,this.shapeModifiers.push(vt)),xt.push(vt)):nt[ht].ty==="rp"&&(St?(vt=rt[ht],vt.closed=!0):(vt=ShapeModifiers.getModifier(nt[ht].ty),rt[ht]=vt,vt.init(this,nt,ht,rt),this.shapeModifiers.push(vt),ut=!1),xt.push(vt));this.addProcessedElement(nt[ht],ht+1)}for(pt=gt.length,ht=0;ht<pt;ht+=1)gt[ht].closed=!0;for(pt=xt.length,ht=0;ht<pt;ht+=1)xt[ht].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var nt,rt=this.stylesList.length;for(nt=0;nt<rt;nt+=1)this.stylesList[nt].reset();for(this.renderShape(),nt=0;nt<rt;nt+=1)(this.stylesList[nt]._mdf||this._isFirstFrame)&&(this.stylesList[nt].msElem&&(this.stylesList[nt].msElem.setAttribute("d",this.stylesList[nt].d),this.stylesList[nt].d="M0 0"+this.stylesList[nt].d),this.stylesList[nt].pElem.setAttribute("d",this.stylesList[nt].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var nt,rt=this.animatedContents.length,it;for(nt=0;nt<rt;nt+=1)it=this.animatedContents[nt],(this._isFirstFrame||it.element._isAnimated)&&it.data!==!0&&it.fn(it.data,it.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(nt,rt,it,st,lt,ct){this.o=nt,this.sw=rt,this.sc=it,this.fc=st,this.m=lt,this.p=ct,this._mdf={o:!0,sw:!!rt,sc:!!it,fc:!!st,m:!0,p:!0}}LetterProps.prototype.update=function(nt,rt,it,st,lt,ct){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var ut=!1;return this.o!==nt&&(this.o=nt,this._mdf.o=!0,ut=!0),this.sw!==rt&&(this.sw=rt,this._mdf.sw=!0,ut=!0),this.sc!==it&&(this.sc=it,this._mdf.sc=!0,ut=!0),this.fc!==st&&(this.fc=st,this._mdf.fc=!0,ut=!0),this.m!==lt&&(this.m=lt,this._mdf.m=!0,ut=!0),ct.length&&(this.p[0]!==ct[0]||this.p[1]!==ct[1]||this.p[4]!==ct[4]||this.p[5]!==ct[5]||this.p[12]!==ct[12]||this.p[13]!==ct[13])&&(this.p=ct,this._mdf.p=!0,ut=!0),ut};function TextProperty(nt,rt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,rt.d&&rt.d.sid&&(rt.d=nt.globalData.slotManager.getProp(rt.d)),this.data=rt,this.elem=nt,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(nt,rt){for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(nt[it]=rt[it]);return nt},TextProperty.prototype.setCurrentData=function(nt){nt.__complete||this.completeTextData(nt),this.currentData=nt,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(nt){this.effectsSequence.push(nt),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(nt){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!nt)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var rt=this.currentData,it=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var st,lt=this.effectsSequence.length,ct=nt||this.data.d.k[this.keysIndex].s;for(st=0;st<lt;st+=1)it!==this.keysIndex?ct=this.effectsSequence[st](ct,ct.t):ct=this.effectsSequence[st](this.currentData,ct.t);rt!==ct&&this.setCurrentData(ct),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var nt=this.data.d.k,rt=this.elem.comp.renderedFrame,it=0,st=nt.length;it<=st-1&&!(it===st-1||nt[it+1].t>rt);)it+=1;return this.keysIndex!==it&&(this.keysIndex=it),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(nt){for(var rt=[],it=0,st=nt.length,lt,ct,ut=!1,dt=!1,ht="";it<st;)ut=dt,dt=!1,lt=nt.charCodeAt(it),ht=nt.charAt(it),FontManager.isCombinedCharacter(lt)?ut=!0:lt>=55296&&lt<=56319?FontManager.isRegionalFlag(nt,it)?ht=nt.substr(it,14):(ct=nt.charCodeAt(it+1),ct>=56320&&ct<=57343&&(FontManager.isModifier(lt,ct)?(ht=nt.substr(it,2),ut=!0):FontManager.isFlagEmoji(nt.substr(it,4))?ht=nt.substr(it,4):ht=nt.substr(it,2))):lt>56319?(ct=nt.charCodeAt(it+1),FontManager.isVariationSelector(lt)&&(ut=!0)):FontManager.isZeroWidthJoiner(lt)&&(ut=!0,dt=!0),ut?(rt[rt.length-1]+=ht,ut=!1):rt.push(ht),it+=ht.length;return rt},TextProperty.prototype.completeTextData=function(nt){nt.__complete=!0;var rt=this.elem.globalData.fontManager,it=this.data,st=[],lt,ct,ut,dt=0,ht,pt=it.m.g,ft=0,mt=0,gt=0,xt=[],yt=0,vt=0,St,Et,wt=rt.getFontByName(nt.f),Rt,Tt=0,It=getFontProperties(wt);nt.fWeight=It.weight,nt.fStyle=It.style,nt.finalSize=nt.s,nt.finalText=this.buildFinalText(nt.t),ct=nt.finalText.length,nt.finalLineHeight=nt.lh;var At=nt.tr/1e3*nt.finalSize,Dt;if(nt.sz)for(var jt=!0,Ft=nt.sz[0],Lt=nt.sz[1],Pt,Ot;jt;){Ot=this.buildFinalText(nt.t),Pt=0,yt=0,ct=Ot.length,At=nt.tr/1e3*nt.finalSize;var Nt=-1;for(lt=0;lt<ct;lt+=1)Dt=Ot[lt].charCodeAt(0),ut=!1,Ot[lt]===" "?Nt=lt:(Dt===13||Dt===3)&&(yt=0,ut=!0,Pt+=nt.finalLineHeight||nt.finalSize*1.2),rt.chars?(Rt=rt.getCharData(Ot[lt],wt.fStyle,wt.fFamily),Tt=ut?0:Rt.w*nt.finalSize/100):Tt=rt.measureText(Ot[lt],nt.f,nt.finalSize),yt+Tt>Ft&&Ot[lt]!==" "?(Nt===-1?ct+=1:lt=Nt,Pt+=nt.finalLineHeight||nt.finalSize*1.2,Ot.splice(lt,Nt===lt?1:0,"\r"),Nt=-1,yt=0):(yt+=Tt,yt+=At);Pt+=wt.ascent*nt.finalSize/100,this.canResize&&nt.finalSize>this.minimumFontSize&&Lt<Pt?(nt.finalSize-=1,nt.finalLineHeight=nt.finalSize*nt.lh/nt.s):(nt.finalText=Ot,ct=nt.finalText.length,jt=!1)}yt=-At,Tt=0;var $t=0,Vt;for(lt=0;lt<ct;lt+=1)if(ut=!1,Vt=nt.finalText[lt],Dt=Vt.charCodeAt(0),Dt===13||Dt===3?($t=0,xt.push(yt),vt=yt>vt?yt:vt,yt=-2*At,ht="",ut=!0,gt+=1):ht=Vt,rt.chars?(Rt=rt.getCharData(Vt,wt.fStyle,rt.getFontByName(nt.f).fFamily),Tt=ut?0:Rt.w*nt.finalSize/100):Tt=rt.measureText(ht,nt.f,nt.finalSize),Vt===" "?$t+=Tt+At:(yt+=Tt+At+$t,$t=0),st.push({l:Tt,an:Tt,add:ft,n:ut,anIndexes:[],val:ht,line:gt,animatorJustifyOffset:0}),pt==2){if(ft+=Tt,ht===""||ht===" "||lt===ct-1){for((ht===""||ht===" ")&&(ft-=Tt);mt<=lt;)st[mt].an=ft,st[mt].ind=dt,st[mt].extra=Tt,mt+=1;dt+=1,ft=0}}else if(pt==3){if(ft+=Tt,ht===""||lt===ct-1){for(ht===""&&(ft-=Tt);mt<=lt;)st[mt].an=ft,st[mt].ind=dt,st[mt].extra=Tt,mt+=1;ft=0,dt+=1}}else st[dt].ind=dt,st[dt].extra=0,dt+=1;if(nt.l=st,vt=yt>vt?yt:vt,xt.push(yt),nt.sz)nt.boxWidth=nt.sz[0],nt.justifyOffset=0;else switch(nt.boxWidth=vt,nt.j){case 1:nt.justifyOffset=-nt.boxWidth;break;case 2:nt.justifyOffset=-nt.boxWidth/2;break;default:nt.justifyOffset=0}nt.lineWidths=xt;var Ut=it.a,zt,Bt;Et=Ut.length;var Ht,Gt,Kt=[];for(St=0;St<Et;St+=1){for(zt=Ut[St],zt.a.sc&&(nt.strokeColorAnim=!0),zt.a.sw&&(nt.strokeWidthAnim=!0),(zt.a.fc||zt.a.fh||zt.a.fs||zt.a.fb)&&(nt.fillColorAnim=!0),Gt=0,Ht=zt.s.b,lt=0;lt<ct;lt+=1)Bt=st[lt],Bt.anIndexes[St]=Gt,(Ht==1&&Bt.val!==""||Ht==2&&Bt.val!==""&&Bt.val!==" "||Ht==3&&(Bt.n||Bt.val==" "||lt==ct-1)||Ht==4&&(Bt.n||lt==ct-1))&&(zt.s.rn===1&&Kt.push(Gt),Gt+=1);it.a[St].s.totalChars=Gt;var Xt=-1,or;if(zt.s.rn===1)for(lt=0;lt<ct;lt+=1)Bt=st[lt],Xt!=Bt.anIndexes[St]&&(Xt=Bt.anIndexes[St],or=Kt.splice(Math.floor(Math.random()*Kt.length),1)[0]),Bt.anIndexes[St]=or}nt.yOffset=nt.finalLineHeight||nt.finalSize*1.2,nt.ls=nt.ls||0,nt.ascent=wt.ascent*nt.finalSize/100},TextProperty.prototype.updateDocumentData=function(nt,rt){rt=rt===void 0?this.keysIndex:rt;var it=this.copyData({},this.data.d.k[rt].s);it=this.copyData(it,nt),this.data.d.k[rt].s=it,this.recalculate(rt),this.setCurrentData(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(nt){var rt=this.data.d.k[nt].s;rt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(rt)},TextProperty.prototype.canResizeFont=function(nt){this.canResize=nt,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(nt){this.minimumFontSize=Math.floor(nt)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var nt=Math.max,rt=Math.min,it=Math.floor;function st(ct,ut){this._currentTextLength=-1,this.k=!1,this.data=ut,this.elem=ct,this.comp=ct.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ct),this.s=PropertyFactory.getProp(ct,ut.s||{k:0},0,0,this),"e"in ut?this.e=PropertyFactory.getProp(ct,ut.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ct,ut.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ct,ut.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ct,ut.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ct,ut.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ct,ut.a,0,.01,this),this.dynamicProperties.length||this.getValue()}st.prototype={getMult:function(ut){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var dt=0,ht=0,pt=1,ft=1;this.ne.v>0?dt=this.ne.v/100:ht=-this.ne.v/100,this.xe.v>0?pt=1-this.xe.v/100:ft=1+this.xe.v/100;var mt=BezierFactory.getBezierEasing(dt,ht,pt,ft).get,gt=0,xt=this.finalS,yt=this.finalE,vt=this.data.sh;if(vt===2)yt===xt?gt=ut>=yt?1:0:gt=nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt=mt(gt);else if(vt===3)yt===xt?gt=ut>=yt?0:1:gt=1-nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt=mt(gt);else if(vt===4)yt===xt?gt=0:(gt=nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt<.5?gt*=2:gt=1-2*(gt-.5)),gt=mt(gt);else if(vt===5){if(yt===xt)gt=0;else{var St=yt-xt;ut=rt(nt(0,ut+.5-xt),yt-xt);var Et=-St/2+ut,wt=St/2;gt=Math.sqrt(1-Et*Et/(wt*wt))}gt=mt(gt)}else vt===6?(yt===xt?gt=0:(ut=rt(nt(0,ut+.5-xt),yt-xt),gt=(1+Math.cos(Math.PI+Math.PI*2*ut/(yt-xt)))/2),gt=mt(gt)):(ut>=it(xt)&&(ut-xt<0?gt=nt(0,rt(rt(yt,1)-(xt-ut),1)):gt=nt(0,rt(yt-ut,1))),gt=mt(gt));if(this.sm.v!==100){var Rt=this.sm.v*.01;Rt===0&&(Rt=1e-8);var Tt=.5-Rt*.5;gt<Tt?gt=0:(gt=(gt-Tt)/Rt,gt>1&&(gt=1))}return gt*this.a.v},getValue:function(ut){this.iterateDynamicProperties(),this._mdf=ut||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,ut&&this.data.r===2&&(this.e.v=this._currentTextLength);var dt=this.data.r===2?1:100/this.data.totalChars,ht=this.o.v/dt,pt=this.s.v/dt+ht,ft=this.e.v/dt+ht;if(pt>ft){var mt=pt;pt=ft,ft=mt}this.finalS=pt,this.finalE=ft}},extendPrototype([DynamicPropertyContainer],st);function lt(ct,ut,dt){return new st(ct,ut)}return{getTextSelectorProp:lt}}();function TextAnimatorDataProperty(nt,rt,it){var st={propType:!1},lt=PropertyFactory.getProp,ct=rt.a;this.a={r:ct.r?lt(nt,ct.r,0,degToRads,it):st,rx:ct.rx?lt(nt,ct.rx,0,degToRads,it):st,ry:ct.ry?lt(nt,ct.ry,0,degToRads,it):st,sk:ct.sk?lt(nt,ct.sk,0,degToRads,it):st,sa:ct.sa?lt(nt,ct.sa,0,degToRads,it):st,s:ct.s?lt(nt,ct.s,1,.01,it):st,a:ct.a?lt(nt,ct.a,1,0,it):st,o:ct.o?lt(nt,ct.o,0,.01,it):st,p:ct.p?lt(nt,ct.p,1,0,it):st,sw:ct.sw?lt(nt,ct.sw,0,0,it):st,sc:ct.sc?lt(nt,ct.sc,1,0,it):st,fc:ct.fc?lt(nt,ct.fc,1,0,it):st,fh:ct.fh?lt(nt,ct.fh,0,0,it):st,fs:ct.fs?lt(nt,ct.fs,0,.01,it):st,fb:ct.fb?lt(nt,ct.fb,0,.01,it):st,t:ct.t?lt(nt,ct.t,0,0,it):st},this.s=TextSelectorProp.getTextSelectorProp(nt,rt.s,it),this.s.t=rt.s.t}function TextAnimatorProperty(nt,rt,it){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=nt,this._renderType=rt,this._elem=it,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(it)}TextAnimatorProperty.prototype.searchProperties=function(){var nt,rt=this._textData.a.length,it,st=PropertyFactory.getProp;for(nt=0;nt<rt;nt+=1)it=this._textData.a[nt],this._animatorsData[nt]=new TextAnimatorDataProperty(this._elem,it,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:st(this._elem,this._textData.p.a,0,0,this),f:st(this._elem,this._textData.p.f,0,0,this),l:st(this._elem,this._textData.p.l,0,0,this),r:st(this._elem,this._textData.p.r,0,0,this),p:st(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=st(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(nt,rt){if(this.lettersChangedFlag=rt,!(!this._mdf&&!this._isFirstFrame&&!rt&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var it=this._moreOptions.alignment.v,st=this._animatorsData,lt=this._textData,ct=this.mHelper,ut=this._renderType,dt=this.renderedLetters.length,ht,pt,ft,mt,gt=nt.l,xt,yt,vt,St,Et,wt,Rt,Tt,It,At,Dt,jt,Ft,Lt,Pt;if(this._hasMaskedPath){if(Pt=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Ot=Pt.v;this._pathData.r.v&&(Ot=Ot.reverse()),xt={tLength:0,segments:[]},mt=Ot._length-1;var Nt;for(jt=0,ft=0;ft<mt;ft+=1)Nt=bez.buildBezierData(Ot.v[ft],Ot.v[ft+1],[Ot.o[ft][0]-Ot.v[ft][0],Ot.o[ft][1]-Ot.v[ft][1]],[Ot.i[ft+1][0]-Ot.v[ft+1][0],Ot.i[ft+1][1]-Ot.v[ft+1][1]]),xt.tLength+=Nt.segmentLength,xt.segments.push(Nt),jt+=Nt.segmentLength;ft=mt,Pt.v.c&&(Nt=bez.buildBezierData(Ot.v[ft],Ot.v[0],[Ot.o[ft][0]-Ot.v[ft][0],Ot.o[ft][1]-Ot.v[ft][1]],[Ot.i[0][0]-Ot.v[0][0],Ot.i[0][1]-Ot.v[0][1]]),xt.tLength+=Nt.segmentLength,xt.segments.push(Nt),jt+=Nt.segmentLength),this._pathData.pi=xt}if(xt=this._pathData.pi,yt=this._pathData.f.v,Rt=0,wt=1,St=0,Et=!0,At=xt.segments,yt<0&&Pt.v.c)for(xt.tLength<Math.abs(yt)&&(yt=-Math.abs(yt)%xt.tLength),Rt=At.length-1,It=At[Rt].points,wt=It.length-1;yt<0;)yt+=It[wt].partialLength,wt-=1,wt<0&&(Rt-=1,It=At[Rt].points,wt=It.length-1);It=At[Rt].points,Tt=It[wt-1],vt=It[wt],Dt=vt.partialLength}mt=gt.length,ht=0,pt=0;var $t=nt.finalSize*1.2*.714,Vt=!0,Ut,zt,Bt,Ht,Gt;Ht=st.length;var Kt,Xt=-1,or,tr,dr,fr=yt,Sr=Rt,vr=wt,mr=-1,hr,gr,lr,Ir,wr,Fr,$r,hn,Zr="",Qt=this.defaultPropsArray,Jt;if(nt.j===2||nt.j===1){var pr=0,Vr=0,Wr=nt.j===2?-.5:-1,zr=0,ln=!0;for(ft=0;ft<mt;ft+=1)if(gt[ft].n){for(pr&&(pr+=Vr);zr<ft;)gt[zr].animatorJustifyOffset=pr,zr+=1;pr=0,ln=!0}else{for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.t.propType&&(ln&&nt.j===2&&(Vr+=Ut.t.v*Wr),zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Kt.length?pr+=Ut.t.v*Kt[0]*Wr:pr+=Ut.t.v*Kt*Wr);ln=!1}for(pr&&(pr+=Vr);zr<ft;)gt[zr].animatorJustifyOffset=pr,zr+=1}for(ft=0;ft<mt;ft+=1){if(ct.reset(),hr=1,gt[ft].n)ht=0,pt+=nt.yOffset,pt+=Vt?1:0,yt=fr,Vt=!1,this._hasMaskedPath&&(Rt=Sr,wt=vr,It=At[Rt].points,Tt=It[wt-1],vt=It[wt],Dt=vt.partialLength,St=0),Zr="",hn="",Fr="",Jt="",Qt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(mr!==gt[ft].line){switch(nt.j){case 1:yt+=jt-nt.lineWidths[gt[ft].line];break;case 2:yt+=(jt-nt.lineWidths[gt[ft].line])/2;break}mr=gt[ft].line}Xt!==gt[ft].ind&&(gt[Xt]&&(yt+=gt[Xt].extra),yt+=gt[ft].an/2,Xt=gt[ft].ind),yt+=it[0]*gt[ft].an*.005;var xn=0;for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.p.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Kt.length?xn+=Ut.p.v[0]*Kt[0]:xn+=Ut.p.v[0]*Kt),Ut.a.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Kt.length?xn+=Ut.a.v[0]*Kt[0]:xn+=Ut.a.v[0]*Kt);for(Et=!0,this._pathData.a.v&&(yt=gt[0].an*.5+(jt-this._pathData.f.v-gt[0].an*.5-gt[gt.length-1].an*.5)*Xt/(mt-1),yt+=this._pathData.f.v);Et;)St+Dt>=yt+xn||!It?(Ft=(yt+xn-St)/vt.partialLength,tr=Tt.point[0]+(vt.point[0]-Tt.point[0])*Ft,dr=Tt.point[1]+(vt.point[1]-Tt.point[1])*Ft,ct.translate(-it[0]*gt[ft].an*.005,-(it[1]*$t)*.01),Et=!1):It&&(St+=vt.partialLength,wt+=1,wt>=It.length&&(wt=0,Rt+=1,At[Rt]?It=At[Rt].points:Pt.v.c?(wt=0,Rt=0,It=At[Rt].points):(St-=vt.partialLength,It=null)),It&&(Tt=vt,vt=It[wt],Dt=vt.partialLength));or=gt[ft].an/2-gt[ft].add,ct.translate(-or,0,0)}else or=gt[ft].an/2-gt[ft].add,ct.translate(-or,0,0),ct.translate(-it[0]*gt[ft].an*.005,-it[1]*$t*.01,0);for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.t.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),(ht!==0||nt.j!==0)&&(this._hasMaskedPath?Kt.length?yt+=Ut.t.v*Kt[0]:yt+=Ut.t.v*Kt:Kt.length?ht+=Ut.t.v*Kt[0]:ht+=Ut.t.v*Kt));for(nt.strokeWidthAnim&&(lr=nt.sw||0),nt.strokeColorAnim&&(nt.sc?gr=[nt.sc[0],nt.sc[1],nt.sc[2]]:gr=[0,0,0]),nt.fillColorAnim&&nt.fc&&(Ir=[nt.fc[0],nt.fc[1],nt.fc[2]]),Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.a.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Kt.length?ct.translate(-Ut.a.v[0]*Kt[0],-Ut.a.v[1]*Kt[1],Ut.a.v[2]*Kt[2]):ct.translate(-Ut.a.v[0]*Kt,-Ut.a.v[1]*Kt,Ut.a.v[2]*Kt));for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.s.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Kt.length?ct.scale(1+(Ut.s.v[0]-1)*Kt[0],1+(Ut.s.v[1]-1)*Kt[1],1):ct.scale(1+(Ut.s.v[0]-1)*Kt,1+(Ut.s.v[1]-1)*Kt,1));for(Bt=0;Bt<Ht;Bt+=1){if(Ut=st[Bt].a,zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),Ut.sk.propType&&(Kt.length?ct.skewFromAxis(-Ut.sk.v*Kt[0],Ut.sa.v*Kt[1]):ct.skewFromAxis(-Ut.sk.v*Kt,Ut.sa.v*Kt)),Ut.r.propType&&(Kt.length?ct.rotateZ(-Ut.r.v*Kt[2]):ct.rotateZ(-Ut.r.v*Kt)),Ut.ry.propType&&(Kt.length?ct.rotateY(Ut.ry.v*Kt[1]):ct.rotateY(Ut.ry.v*Kt)),Ut.rx.propType&&(Kt.length?ct.rotateX(Ut.rx.v*Kt[0]):ct.rotateX(Ut.rx.v*Kt)),Ut.o.propType&&(Kt.length?hr+=(Ut.o.v*Kt[0]-hr)*Kt[0]:hr+=(Ut.o.v*Kt-hr)*Kt),nt.strokeWidthAnim&&Ut.sw.propType&&(Kt.length?lr+=Ut.sw.v*Kt[0]:lr+=Ut.sw.v*Kt),nt.strokeColorAnim&&Ut.sc.propType)for(wr=0;wr<3;wr+=1)Kt.length?gr[wr]+=(Ut.sc.v[wr]-gr[wr])*Kt[0]:gr[wr]+=(Ut.sc.v[wr]-gr[wr])*Kt;if(nt.fillColorAnim&&nt.fc){if(Ut.fc.propType)for(wr=0;wr<3;wr+=1)Kt.length?Ir[wr]+=(Ut.fc.v[wr]-Ir[wr])*Kt[0]:Ir[wr]+=(Ut.fc.v[wr]-Ir[wr])*Kt;Ut.fh.propType&&(Kt.length?Ir=addHueToRGB(Ir,Ut.fh.v*Kt[0]):Ir=addHueToRGB(Ir,Ut.fh.v*Kt)),Ut.fs.propType&&(Kt.length?Ir=addSaturationToRGB(Ir,Ut.fs.v*Kt[0]):Ir=addSaturationToRGB(Ir,Ut.fs.v*Kt)),Ut.fb.propType&&(Kt.length?Ir=addBrightnessToRGB(Ir,Ut.fb.v*Kt[0]):Ir=addBrightnessToRGB(Ir,Ut.fb.v*Kt))}}for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.p.propType&&(zt=st[Bt].s,Kt=zt.getMult(gt[ft].anIndexes[Bt],lt.a[Bt].s.totalChars),this._hasMaskedPath?Kt.length?ct.translate(0,Ut.p.v[1]*Kt[0],-Ut.p.v[2]*Kt[1]):ct.translate(0,Ut.p.v[1]*Kt,-Ut.p.v[2]*Kt):Kt.length?ct.translate(Ut.p.v[0]*Kt[0],Ut.p.v[1]*Kt[1],-Ut.p.v[2]*Kt[2]):ct.translate(Ut.p.v[0]*Kt,Ut.p.v[1]*Kt,-Ut.p.v[2]*Kt));if(nt.strokeWidthAnim&&(Fr=lr<0?0:lr),nt.strokeColorAnim&&($r="rgb("+Math.round(gr[0]*255)+","+Math.round(gr[1]*255)+","+Math.round(gr[2]*255)+")"),nt.fillColorAnim&&nt.fc&&(hn="rgb("+Math.round(Ir[0]*255)+","+Math.round(Ir[1]*255)+","+Math.round(Ir[2]*255)+")"),this._hasMaskedPath){if(ct.translate(0,-nt.ls),ct.translate(0,it[1]*$t*.01+pt,0),this._pathData.p.v){Lt=(vt.point[1]-Tt.point[1])/(vt.point[0]-Tt.point[0]);var yn=Math.atan(Lt)*180/Math.PI;vt.point[0]<Tt.point[0]&&(yn+=180),ct.rotate(-yn*Math.PI/180)}ct.translate(tr,dr,0),yt-=it[0]*gt[ft].an*.005,gt[ft+1]&&Xt!==gt[ft+1].ind&&(yt+=gt[ft].an/2,yt+=nt.tr*.001*nt.finalSize)}else{switch(ct.translate(ht,pt,0),nt.ps&&ct.translate(nt.ps[0],nt.ps[1]+nt.ascent,0),nt.j){case 1:ct.translate(gt[ft].animatorJustifyOffset+nt.justifyOffset+(nt.boxWidth-nt.lineWidths[gt[ft].line]),0,0);break;case 2:ct.translate(gt[ft].animatorJustifyOffset+nt.justifyOffset+(nt.boxWidth-nt.lineWidths[gt[ft].line])/2,0,0);break}ct.translate(0,-nt.ls),ct.translate(or,0,0),ct.translate(it[0]*gt[ft].an*.005,it[1]*$t*.01,0),ht+=gt[ft].l+nt.tr*.001*nt.finalSize}ut==="html"?Zr=ct.toCSS():ut==="svg"?Zr=ct.to2dCSS():Qt=[ct.props[0],ct.props[1],ct.props[2],ct.props[3],ct.props[4],ct.props[5],ct.props[6],ct.props[7],ct.props[8],ct.props[9],ct.props[10],ct.props[11],ct.props[12],ct.props[13],ct.props[14],ct.props[15]],Jt=hr}dt<=ft?(Gt=new LetterProps(Jt,Fr,$r,hn,Zr,Qt),this.renderedLetters.push(Gt),dt+=1,this.lettersChangedFlag=!0):(Gt=this.renderedLetters[ft],this.lettersChangedFlag=Gt.update(Jt,Fr,$r,hn,Zr,Qt)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(nt,rt,it){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(nt,rt,it),this.textProperty=new TextProperty(this,nt.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(nt.t,this.renderType,this),this.initTransform(nt,rt,it),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(nt){this._mdf=!1,this.prepareRenderableFrame(nt),this.prepareProperties(nt,this.isInRange)},ITextElement.prototype.createPathShape=function(nt,rt){var it,st=rt.length,lt,ct="";for(it=0;it<st;it+=1)rt[it].ty==="sh"&&(lt=rt[it].ks.k,ct+=buildShapeString(lt,lt.i.length,!0,nt));return ct},ITextElement.prototype.updateDocumentData=function(nt,rt){this.textProperty.updateDocumentData(nt,rt)},ITextElement.prototype.canResizeFont=function(nt){this.textProperty.canResizeFont(nt)},ITextElement.prototype.setMinimumFontSize=function(nt){this.textProperty.setMinimumFontSize(nt)},ITextElement.prototype.applyTextPropertiesToMatrix=function(nt,rt,it,st,lt){switch(nt.ps&&rt.translate(nt.ps[0],nt.ps[1]+nt.ascent,0),rt.translate(0,-nt.ls,0),nt.j){case 1:rt.translate(nt.justifyOffset+(nt.boxWidth-nt.lineWidths[it]),0,0);break;case 2:rt.translate(nt.justifyOffset+(nt.boxWidth-nt.lineWidths[it])/2,0,0);break}rt.translate(st,lt,0)},ITextElement.prototype.buildColor=function(nt){return"rgb("+Math.round(nt[0]*255)+","+Math.round(nt[1]*255)+","+Math.round(nt[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(nt,rt,it){this.textSpans=[],this.renderType="svg",this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(nt){for(var rt=0,it=nt.length,st=[],lt="";rt<it;)nt[rt]==="\r"||nt[rt]===""?(st.push(lt),lt=""):lt+=nt[rt],rt+=1;return st.push(lt),st},SVGTextLottieElement.prototype.buildShapeData=function(nt,rt){if(nt.shapes&&nt.shapes.length){var it=nt.shapes[0];if(it.it){var st=it.it[it.it.length-1];st.s&&(st.s.k[0]=rt,st.s.k[1]=rt)}}return nt},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var nt,rt,it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it?it.l.length:0),it.fc?this.layerElement.setAttribute("fill",this.buildColor(it.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),it.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(it.sc)),this.layerElement.setAttribute("stroke-width",it.sw)),this.layerElement.setAttribute("font-size",it.finalSize);var st=this.globalData.fontManager.getFontByName(it.f);if(st.fClass)this.layerElement.setAttribute("class",st.fClass);else{this.layerElement.setAttribute("font-family",st.fFamily);var lt=it.fWeight,ct=it.fStyle;this.layerElement.setAttribute("font-style",ct),this.layerElement.setAttribute("font-weight",lt)}this.layerElement.setAttribute("aria-label",it.t);var ut=it.l||[],dt=!!this.globalData.fontManager.chars;rt=ut.length;var ht,pt=this.mHelper,ft="",mt=this.data.singleShape,gt=0,xt=0,yt=!0,vt=it.tr*.001*it.finalSize;if(mt&&!dt&&!it.sz){var St=this.textContainer,Et="start";switch(it.j){case 1:Et="end";break;case 2:Et="middle";break;default:Et="start";break}St.setAttribute("text-anchor",Et),St.setAttribute("letter-spacing",vt);var wt=this.buildTextContents(it.finalText);for(rt=wt.length,xt=it.ps?it.ps[1]+it.ascent:0,nt=0;nt<rt;nt+=1)ht=this.textSpans[nt].span||createNS("tspan"),ht.textContent=wt[nt],ht.setAttribute("x",0),ht.setAttribute("y",xt),ht.style.display="inherit",St.appendChild(ht),this.textSpans[nt]||(this.textSpans[nt]={span:null,glyph:null}),this.textSpans[nt].span=ht,xt+=it.finalLineHeight;this.layerElement.appendChild(St)}else{var Rt=this.textSpans.length,Tt;for(nt=0;nt<rt;nt+=1){if(this.textSpans[nt]||(this.textSpans[nt]={span:null,childSpan:null,glyph:null}),!dt||!mt||nt===0){if(ht=Rt>nt?this.textSpans[nt].span:createNS(dt?"g":"text"),Rt<=nt){if(ht.setAttribute("stroke-linecap","butt"),ht.setAttribute("stroke-linejoin","round"),ht.setAttribute("stroke-miterlimit","4"),this.textSpans[nt].span=ht,dt){var It=createNS("g");ht.appendChild(It),this.textSpans[nt].childSpan=It}this.textSpans[nt].span=ht,this.layerElement.appendChild(ht)}ht.style.display="inherit"}if(pt.reset(),mt&&(ut[nt].n&&(gt=-vt,xt+=it.yOffset,xt+=yt?1:0,yt=!1),this.applyTextPropertiesToMatrix(it,pt,ut[nt].line,gt,xt),gt+=ut[nt].l||0,gt+=vt),dt){Tt=this.globalData.fontManager.getCharData(it.finalText[nt],st.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily);var At;if(Tt.t===1)At=new SVGCompElement(Tt.data,this.globalData,this);else{var Dt=emptyShapeData;Tt.data&&Tt.data.shapes&&(Dt=this.buildShapeData(Tt.data,it.finalSize)),At=new SVGShapeElement(Dt,this.globalData,this)}if(this.textSpans[nt].glyph){var jt=this.textSpans[nt].glyph;this.textSpans[nt].childSpan.removeChild(jt.layerElement),jt.destroy()}this.textSpans[nt].glyph=At,At._debug=!0,At.prepareFrame(0),At.renderFrame(),this.textSpans[nt].childSpan.appendChild(At.layerElement),Tt.t===1&&this.textSpans[nt].childSpan.setAttribute("transform","scale("+it.finalSize/100+","+it.finalSize/100+")")}else mt&&ht.setAttribute("transform","translate("+pt.props[12]+","+pt.props[13]+")"),ht.textContent=ut[nt].val,ht.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}mt&&ht&&ht.setAttribute("d",ft)}for(;nt<this.textSpans.length;)this.textSpans[nt].span.style.display="none",nt+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var nt=this.layerElement.getBBox();this.bbox={top:nt.y,left:nt.x,width:nt.width,height:nt.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var nt,rt=this.textSpans.length,it;for(this.renderedFrame=this.comp.renderedFrame,nt=0;nt<rt;nt+=1)it=this.textSpans[nt].glyph,it&&(it.prepareFrame(this.comp.renderedFrame-this.data.st),it._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var nt,rt,it=this.textAnimator.renderedLetters,st=this.textProperty.currentData.l;rt=st.length;var lt,ct,ut;for(nt=0;nt<rt;nt+=1)st[nt].n||(lt=it[nt],ct=this.textSpans[nt].span,ut=this.textSpans[nt].glyph,ut&&ut.renderFrame(),lt._mdf.m&&ct.setAttribute("transform",lt.m),lt._mdf.o&&ct.setAttribute("opacity",lt.o),lt._mdf.sw&&ct.setAttribute("stroke-width",lt.sw),lt._mdf.sc&&ct.setAttribute("stroke",lt.sc),lt._mdf.fc&&ct.setAttribute("fill",lt.fc))}};function ISolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var nt=createNS("rect");nt.setAttribute("width",this.data.sw),nt.setAttribute("height",this.data.sh),nt.setAttribute("fill",this.data.sc),this.layerElement.appendChild(nt)};function NullElement(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initFrame(),this.initTransform(nt,rt,it),this.initHierarchy()}NullElement.prototype.prepareFrame=function(nt){this.prepareProperties(nt,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(nt){return new NullElement(nt,this.globalData,this)},SVGRendererBase.prototype.createShape=function(nt){return new SVGShapeElement(nt,this.globalData,this)},SVGRendererBase.prototype.createText=function(nt){return new SVGTextLottieElement(nt,this.globalData,this)},SVGRendererBase.prototype.createImage=function(nt){return new IImageElement(nt,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(nt){return new ISolidElement(nt,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(nt){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+nt.w+" "+nt.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",nt.w),this.svgElement.setAttribute("height",nt.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var rt=this.globalData.defs;this.setupGlobalData(nt,rt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=nt;var it=createNS("clipPath"),st=createNS("rect");st.setAttribute("width",nt.w),st.setAttribute("height",nt.h),st.setAttribute("x",0),st.setAttribute("y",0);var lt=createElementID();it.setAttribute("id",lt),it.appendChild(st),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+lt+")"),rt.appendChild(it),this.layers=nt.layers,this.elements=createSizedArray(nt.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var nt,rt=this.layers?this.layers.length:0;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(nt){var rt=0,it=this.layers.length;for(rt=0;rt<it;rt+=1)if(this.layers[rt].ind===nt)return rt;return-1},SVGRendererBase.prototype.buildItem=function(nt){var rt=this.elements;if(!(rt[nt]||this.layers[nt].ty===99)){rt[nt]=!0;var it=this.createItem(this.layers[nt]);if(rt[nt]=it,getExpressionsPlugin()&&(this.layers[nt].ty===0&&this.globalData.projectInterface.registerComposition(it),it.initExpressions()),this.appendElementInPos(it,nt),this.layers[nt].tt){var st="tp"in this.layers[nt]?this.findIndexByInd(this.layers[nt].tp):nt-1;if(st===-1)return;if(!this.elements[st]||this.elements[st]===!0)this.buildItem(st),this.addPendingElement(it);else{var lt=rt[st],ct=lt.getMatte(this.layers[nt].tt);it.setMatte(ct)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();if(nt.checkParenting(),nt.data.tt)for(var rt=0,it=this.elements.length;rt<it;){if(this.elements[rt]===nt){var st="tp"in nt.data?this.findIndexByInd(nt.data.tp):rt-1,lt=this.elements[st],ct=lt.getMatte(this.layers[rt].tt);nt.setMatte(ct);break}rt+=1}}},SVGRendererBase.prototype.renderFrame=function(nt){if(!(this.renderedFrame===nt||this.destroyed)){nt===null?nt=this.renderedFrame:this.renderedFrame=nt,this.globalData.frameNum=nt,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=nt,this.globalData._mdf=!1;var rt,it=this.layers.length;for(this.completeLayers||this.checkLayers(nt),rt=it-1;rt>=0;rt-=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].prepareFrame(nt-this.layers[rt].st);if(this.globalData._mdf)for(rt=0;rt<it;rt+=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(nt,rt){var it=nt.getBaseElement();if(it){for(var st=0,lt;st<rt;)this.elements[st]&&this.elements[st]!==!0&&this.elements[st].getBaseElement()&&(lt=this.elements[st].getBaseElement()),st+=1;lt?this.layerElement.insertBefore(it,lt):this.layerElement.appendChild(it)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initTransform(nt,rt,it),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!rt.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(nt){if(this._mdf=!1,this.prepareRenderableFrame(nt),this.prepareProperties(nt,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=nt/this.data.sr;else{var rt=this.tm.v;rt===this.data.op&&(rt=this.data.op-1),this.renderedFrame=rt}var it,st=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&(this.elements[it].prepareFrame(this.renderedFrame-this.layers[it].st),this.elements[it]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)(this.completeLayers||this.elements[nt])&&this.elements[nt].renderFrame()},ICompElement.prototype.setElements=function(nt){this.elements=nt},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(nt,rt,it){this.layers=nt.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(nt){return new SVGCompElement(nt,this.globalData,this)};function SVGRenderer(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var it="";if(rt&&rt.title){var st=createNS("title"),lt=createElementID();st.setAttribute("id",lt),st.textContent=rt.title,this.svgElement.appendChild(st),it+=lt}if(rt&&rt.description){var ct=createNS("desc"),ut=createElementID();ct.setAttribute("id",ut),ct.textContent=rt.description,this.svgElement.appendChild(ct),it+=" "+ut}it&&this.svgElement.setAttribute("aria-labelledby",it);var dt=createNS("defs");this.svgElement.appendChild(dt);var ht=createNS("g");this.svgElement.appendChild(ht),this.layerElement=ht,this.renderConfig={preserveAspectRatio:rt&&rt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rt&&rt.contentVisibility||"visible",progressiveLoad:rt&&rt.progressiveLoad||!1,hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),viewBoxOnly:rt&&rt.viewBoxOnly||!1,viewBoxSize:rt&&rt.viewBoxSize||!1,className:rt&&rt.className||"",id:rt&&rt.id||"",focusable:rt&&rt.focusable,filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"100%",height:rt&&rt.filterSize&&rt.filterSize.height||"100%",x:rt&&rt.filterSize&&rt.filterSize.x||"0%",y:rt&&rt.filterSize&&rt.filterSize.y||"0%"},width:rt&&rt.width,height:rt&&rt.height,runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:dt,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(nt){return new SVGCompElement(nt,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(rt){var it,st=rt.length,lt="_";for(it=0;it<st;it+=1)lt+=rt[it].transform.key+"_";var ct=this.sequences[lt];return ct||(ct={transforms:[].concat(rt),finalTransform:new Matrix,_mdf:!1},this.sequences[lt]=ct,this.sequenceList.push(ct)),ct},processSequence:function(rt,it){for(var st=0,lt=rt.transforms.length,ct=it;st<lt&&!it;){if(rt.transforms[st].transform.mProps._mdf){ct=!0;break}st+=1}if(ct)for(rt.finalTransform.reset(),st=lt-1;st>=0;st-=1)rt.finalTransform.multiply(rt.transforms[st].transform.mProps.v);rt._mdf=ct},processSequences:function(rt){var it,st=this.sequenceList.length;for(it=0;it<st;it+=1)this.processSequence(this.sequenceList[it],rt)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var rt="__lottie_element_luma_buffer",it=null,st=null,lt=null;function ct(){var ht=createNS("svg"),pt=createNS("filter"),ft=createNS("feColorMatrix");return pt.setAttribute("id",rt),ft.setAttribute("type","matrix"),ft.setAttribute("color-interpolation-filters","sRGB"),ft.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),pt.appendChild(ft),ht.appendChild(pt),ht.setAttribute("id",rt+"_svg"),featureSupport.svgLumaHidden&&(ht.style.display="none"),ht}function ut(){it||(lt=ct(),document.body.appendChild(lt),it=createTag("canvas"),st=it.getContext("2d"),st.filter="url(#"+rt+")",st.fillStyle="rgba(0,0,0,0)",st.fillRect(0,0,1,1))}function dt(ht){return it||ut(),it.width=ht.width,it.height=ht.height,st.filter="url(#"+rt+")",it}return{load:ut,get:dt}};function createCanvas(nt,rt){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(nt,rt);var it=createTag("canvas");return it.width=nt,it.height=rt,it}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(nt){var rt,it=nt.data.ef?nt.data.ef.length:0;this.filters=[];var st;for(rt=0;rt<it;rt+=1){st=null;var lt=nt.data.ef[rt].ty;if(registeredEffects[lt]){var ct=registeredEffects[lt].effect;st=new ct(nt.effectsManager.effectElements[rt],nt)}st&&this.filters.push(st)}this.filters.length&&nt.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(nt){var rt,it=this.filters.length;for(rt=0;rt<it;rt+=1)this.filters[rt].renderFrame(nt)},CVEffects.prototype.getEffects=function(nt){var rt,it=this.filters.length,st=[];for(rt=0;rt<it;rt+=1)this.filters[rt].type===nt&&st.push(this.filters[rt]);return st};function registerEffect(nt,rt){registeredEffects[nt]={effect:rt}}function CVMaskElement(nt,rt){this.data=nt,this.element=rt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var it,st=this.masksProperties.length,lt=!1;for(it=0;it<st;it+=1)this.masksProperties[it].mode!=="n"&&(lt=!0),this.viewData[it]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[it],3);this.hasMasks=lt,lt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var nt=this.element.finalTransform.mat,rt=this.element.canvasContext,it,st=this.masksProperties.length,lt,ct,ut;for(rt.beginPath(),it=0;it<st;it+=1)if(this.masksProperties[it].mode!=="n"){this.masksProperties[it].inv&&(rt.moveTo(0,0),rt.lineTo(this.element.globalData.compSize.w,0),rt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),rt.lineTo(0,this.element.globalData.compSize.h),rt.lineTo(0,0)),ut=this.viewData[it].v,lt=nt.applyToPointArray(ut.v[0][0],ut.v[0][1],0),rt.moveTo(lt[0],lt[1]);var dt,ht=ut._length;for(dt=1;dt<ht;dt+=1)ct=nt.applyToTriplePoints(ut.o[dt-1],ut.i[dt],ut.v[dt]),rt.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);ct=nt.applyToTriplePoints(ut.o[dt-1],ut.i[0],ut.v[0]),rt.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5])}this.element.globalData.renderer.save(!0),rt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var rt=this.globalData.canvasContext,it=assetLoader.createCanvas(rt.canvas.width,rt.canvas.height);this.buffers.push(it);var st=assetLoader.createCanvas(rt.canvas.width,rt.canvas.height);this.buffers.push(st),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var rt=this.globalData;if(rt.blendMode!==this.data.bm){rt.blendMode=this.data.bm;var it=getBlendMode(this.data.bm);rt.canvasContext.globalCompositeOperation=it}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(rt){rt.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var rt=this.buffers[0],it=rt.getContext("2d");this.clearCanvas(it),it.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var rt=this.buffers[1],it=rt.getContext("2d");this.clearCanvas(it),it.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var st=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(st.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var lt=assetLoader.getLumaCanvas(this.canvasContext.canvas),ct=lt.getContext("2d");ct.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(lt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(rt,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(rt){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!rt)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var it=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(it),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(it),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(nt,rt,it,st){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var lt=4;rt.ty==="rc"?lt=5:rt.ty==="el"?lt=6:rt.ty==="sr"&&(lt=7),this.sh=ShapePropertyFactory.getShapeProp(nt,rt,lt,nt);var ct,ut=it.length,dt;for(ct=0;ct<ut;ct+=1)it[ct].closed||(dt={transforms:st.addTransformSequence(it[ct].transforms),trNodes:[]},this.styledShapes.push(dt),it[ct].elements.push(dt))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(nt,rt){var it={data:nt,type:nt.ty,preTransforms:this.transformsManager.addTransformSequence(rt),transforms:[],elements:[],closed:nt.hd===!0},st={};if(nt.ty==="fl"||nt.ty==="st"?(st.c=PropertyFactory.getProp(this,nt.c,1,255,this),st.c.k||(it.co="rgb("+bmFloor(st.c.v[0])+","+bmFloor(st.c.v[1])+","+bmFloor(st.c.v[2])+")")):(nt.ty==="gf"||nt.ty==="gs")&&(st.s=PropertyFactory.getProp(this,nt.s,1,null,this),st.e=PropertyFactory.getProp(this,nt.e,1,null,this),st.h=PropertyFactory.getProp(this,nt.h||{k:0},0,.01,this),st.a=PropertyFactory.getProp(this,nt.a||{k:0},0,degToRads,this),st.g=new GradientProperty(this,nt.g,this)),st.o=PropertyFactory.getProp(this,nt.o,0,.01,this),nt.ty==="st"||nt.ty==="gs"){if(it.lc=lineCapEnum[nt.lc||2],it.lj=lineJoinEnum[nt.lj||2],nt.lj==1&&(it.ml=nt.ml),st.w=PropertyFactory.getProp(this,nt.w,0,null,this),st.w.k||(it.wi=st.w.v),nt.d){var lt=new DashProperty(this,nt.d,"canvas",this);st.d=lt,st.d.k||(it.da=st.d.dashArray,it.do=st.d.dashoffset[0])}}else it.r=nt.r===2?"evenodd":"nonzero";return this.stylesList.push(it),st.style=it,st},CVShapeElement.prototype.createGroupElement=function(){var nt={it:[],prevViewData:[]};return nt},CVShapeElement.prototype.createTransformElement=function(nt){var rt={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,nt.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,nt,this)}};return rt},CVShapeElement.prototype.createShapeElement=function(nt){var rt=new CVShapeData(this,nt,this.stylesList,this.transformsManager);return this.shapes.push(rt),this.addShapeToModifiers(rt),rt},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var nt,rt=this.itemsData.length;for(nt=0;nt<rt;nt+=1)this.prevViewData[nt]=this.itemsData[nt];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),rt=this.dynamicProperties.length,nt=0;nt<rt;nt+=1)this.dynamicProperties[nt].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(nt){var rt,it=this.stylesList.length;for(rt=0;rt<it;rt+=1)this.stylesList[rt].closed||this.stylesList[rt].transforms.push(nt)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var nt,rt=this.stylesList.length;for(nt=0;nt<rt;nt+=1)this.stylesList[nt].closed||this.stylesList[nt].transforms.pop()},CVShapeElement.prototype.closeStyles=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt].closed=!0},CVShapeElement.prototype.searchShapes=function(nt,rt,it,st,lt){var ct,ut=nt.length-1,dt,ht,pt=[],ft=[],mt,gt,xt,yt=[].concat(lt);for(ct=ut;ct>=0;ct-=1){if(mt=this.searchProcessedElement(nt[ct]),mt?rt[ct]=it[mt-1]:nt[ct]._shouldRender=st,nt[ct].ty==="fl"||nt[ct].ty==="st"||nt[ct].ty==="gf"||nt[ct].ty==="gs")mt?rt[ct].style.closed=!1:rt[ct]=this.createStyleElement(nt[ct],yt),pt.push(rt[ct].style);else if(nt[ct].ty==="gr"){if(!mt)rt[ct]=this.createGroupElement(nt[ct]);else for(ht=rt[ct].it.length,dt=0;dt<ht;dt+=1)rt[ct].prevViewData[dt]=rt[ct].it[dt];this.searchShapes(nt[ct].it,rt[ct].it,rt[ct].prevViewData,st,yt)}else nt[ct].ty==="tr"?(mt||(xt=this.createTransformElement(nt[ct]),rt[ct]=xt),yt.push(rt[ct]),this.addTransformToStyleList(rt[ct])):nt[ct].ty==="sh"||nt[ct].ty==="rc"||nt[ct].ty==="el"||nt[ct].ty==="sr"?mt||(rt[ct]=this.createShapeElement(nt[ct])):nt[ct].ty==="tm"||nt[ct].ty==="rd"||nt[ct].ty==="pb"||nt[ct].ty==="zz"||nt[ct].ty==="op"?(mt?(gt=rt[ct],gt.closed=!1):(gt=ShapeModifiers.getModifier(nt[ct].ty),gt.init(this,nt[ct]),rt[ct]=gt,this.shapeModifiers.push(gt)),ft.push(gt)):nt[ct].ty==="rp"&&(mt?(gt=rt[ct],gt.closed=!0):(gt=ShapeModifiers.getModifier(nt[ct].ty),rt[ct]=gt,gt.init(this,nt,ct,rt),this.shapeModifiers.push(gt),st=!1),ft.push(gt));this.addProcessedElement(nt[ct],ct+1)}for(this.removeTransformFromStyleList(),this.closeStyles(pt),ut=ft.length,ct=0;ct<ut;ct+=1)ft[ct].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(nt,rt){(nt._opMdf||rt.op._mdf||this._isFirstFrame)&&(rt.opacity=nt.opacity,rt.opacity*=rt.op.v,rt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var nt,rt=this.stylesList.length,it,st,lt,ct,ut,dt,ht=this.globalData.renderer,pt=this.globalData.canvasContext,ft,mt;for(nt=0;nt<rt;nt+=1)if(mt=this.stylesList[nt],ft=mt.type,!((ft==="st"||ft==="gs")&&mt.wi===0||!mt.data._shouldRender||mt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ht.save(),ut=mt.elements,ft==="st"||ft==="gs"?(ht.ctxStrokeStyle(ft==="st"?mt.co:mt.grd),ht.ctxLineWidth(mt.wi),ht.ctxLineCap(mt.lc),ht.ctxLineJoin(mt.lj),ht.ctxMiterLimit(mt.ml||0)):ht.ctxFillStyle(ft==="fl"?mt.co:mt.grd),ht.ctxOpacity(mt.coOp),ft!=="st"&&ft!=="gs"&&pt.beginPath(),ht.ctxTransform(mt.preTransforms.finalTransform.props),st=ut.length,it=0;it<st;it+=1){for((ft==="st"||ft==="gs")&&(pt.beginPath(),mt.da&&(pt.setLineDash(mt.da),pt.lineDashOffset=mt.do)),dt=ut[it].trNodes,ct=dt.length,lt=0;lt<ct;lt+=1)dt[lt].t==="m"?pt.moveTo(dt[lt].p[0],dt[lt].p[1]):dt[lt].t==="c"?pt.bezierCurveTo(dt[lt].pts[0],dt[lt].pts[1],dt[lt].pts[2],dt[lt].pts[3],dt[lt].pts[4],dt[lt].pts[5]):pt.closePath();(ft==="st"||ft==="gs")&&(ht.ctxStroke(),mt.da&&pt.setLineDash(this.dashResetter))}ft!=="st"&&ft!=="gs"&&this.globalData.renderer.ctxFill(mt.r),ht.restore()}},CVShapeElement.prototype.renderShape=function(nt,rt,it,st){var lt,ct=rt.length-1,ut;for(ut=nt,lt=ct;lt>=0;lt-=1)rt[lt].ty==="tr"?(ut=it[lt].transform,this.renderShapeTransform(nt,ut)):rt[lt].ty==="sh"||rt[lt].ty==="el"||rt[lt].ty==="rc"||rt[lt].ty==="sr"?this.renderPath(rt[lt],it[lt]):rt[lt].ty==="fl"?this.renderFill(rt[lt],it[lt],ut):rt[lt].ty==="st"?this.renderStroke(rt[lt],it[lt],ut):rt[lt].ty==="gf"||rt[lt].ty==="gs"?this.renderGradientFill(rt[lt],it[lt],ut):rt[lt].ty==="gr"?this.renderShape(ut,rt[lt].it,it[lt].it):rt[lt].ty;st&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(nt,rt){if(this._isFirstFrame||rt._mdf||nt.transforms._mdf){var it=nt.trNodes,st=rt.paths,lt,ct,ut,dt=st._length;it.length=0;var ht=nt.transforms.finalTransform;for(ut=0;ut<dt;ut+=1){var pt=st.shapes[ut];if(pt&&pt.v){for(ct=pt._length,lt=1;lt<ct;lt+=1)lt===1&&it.push({t:"m",p:ht.applyToPointArray(pt.v[0][0],pt.v[0][1],0)}),it.push({t:"c",pts:ht.applyToTriplePoints(pt.o[lt-1],pt.i[lt],pt.v[lt])});ct===1&&it.push({t:"m",p:ht.applyToPointArray(pt.v[0][0],pt.v[0][1],0)}),pt.c&&ct&&(it.push({t:"c",pts:ht.applyToTriplePoints(pt.o[lt-1],pt.i[0],pt.v[0])}),it.push({t:"z"}))}}nt.trNodes=it}},CVShapeElement.prototype.renderPath=function(nt,rt){if(nt.hd!==!0&&nt._shouldRender){var it,st=rt.styledShapes.length;for(it=0;it<st;it+=1)this.renderStyledShape(rt.styledShapes[it],rt.sh)}},CVShapeElement.prototype.renderFill=function(nt,rt,it){var st=rt.style;(rt.c._mdf||this._isFirstFrame)&&(st.co="rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||it._opMdf||this._isFirstFrame)&&(st.coOp=rt.o.v*it.opacity)},CVShapeElement.prototype.renderGradientFill=function(nt,rt,it){var st=rt.style,lt;if(!st.grd||rt.g._mdf||rt.s._mdf||rt.e._mdf||nt.t!==1&&(rt.h._mdf||rt.a._mdf)){var ct=this.globalData.canvasContext,ut=rt.s.v,dt=rt.e.v;if(nt.t===1)lt=ct.createLinearGradient(ut[0],ut[1],dt[0],dt[1]);else{var ht=Math.sqrt(Math.pow(ut[0]-dt[0],2)+Math.pow(ut[1]-dt[1],2)),pt=Math.atan2(dt[1]-ut[1],dt[0]-ut[0]),ft=rt.h.v;ft>=1?ft=.99:ft<=-1&&(ft=-.99);var mt=ht*ft,gt=Math.cos(pt+rt.a.v)*mt+ut[0],xt=Math.sin(pt+rt.a.v)*mt+ut[1];lt=ct.createRadialGradient(gt,xt,0,ut[0],ut[1],ht)}var yt,vt=nt.g.p,St=rt.g.c,Et=1;for(yt=0;yt<vt;yt+=1)rt.g._hasOpacity&&rt.g._collapsable&&(Et=rt.g.o[yt*2+1]),lt.addColorStop(St[yt*4]/100,"rgba("+St[yt*4+1]+","+St[yt*4+2]+","+St[yt*4+3]+","+Et+")");st.grd=lt}st.coOp=rt.o.v*it.opacity},CVShapeElement.prototype.renderStroke=function(nt,rt,it){var st=rt.style,lt=rt.d;lt&&(lt._mdf||this._isFirstFrame)&&(st.da=lt.dashArray,st.do=lt.dashoffset[0]),(rt.c._mdf||this._isFirstFrame)&&(st.co="rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||it._opMdf||this._isFirstFrame)&&(st.coOp=rt.o.v*it.opacity),(rt.w._mdf||this._isFirstFrame)&&(st.wi=rt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(nt,rt,it){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var nt=this.textProperty.currentData;this.renderedLetters=createSizedArray(nt.l?nt.l.length:0);var rt=!1;nt.fc?(rt=!0,this.values.fill=this.buildColor(nt.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=rt;var it=!1;nt.sc&&(it=!0,this.values.stroke=this.buildColor(nt.sc),this.values.sWidth=nt.sw);var st=this.globalData.fontManager.getFontByName(nt.f),lt,ct,ut=nt.l,dt=this.mHelper;this.stroke=it,this.values.fValue=nt.finalSize+"px "+this.globalData.fontManager.getFontByName(nt.f).fFamily,ct=nt.finalText.length;var ht,pt,ft,mt,gt,xt,yt,vt,St,Et,wt=this.data.singleShape,Rt=nt.tr*.001*nt.finalSize,Tt=0,It=0,At=!0,Dt=0;for(lt=0;lt<ct;lt+=1){ht=this.globalData.fontManager.getCharData(nt.finalText[lt],st.fStyle,this.globalData.fontManager.getFontByName(nt.f).fFamily),pt=ht&&ht.data||{},dt.reset(),wt&&ut[lt].n&&(Tt=-Rt,It+=nt.yOffset,It+=At?1:0,At=!1),gt=pt.shapes?pt.shapes[0].it:[],yt=gt.length,dt.scale(nt.finalSize/100,nt.finalSize/100),wt&&this.applyTextPropertiesToMatrix(nt,dt,ut[lt].line,Tt,It),St=createSizedArray(yt-1);var jt=0;for(xt=0;xt<yt;xt+=1)if(gt[xt].ty==="sh"){for(mt=gt[xt].ks.k.i.length,vt=gt[xt].ks.k,Et=[],ft=1;ft<mt;ft+=1)ft===1&&Et.push(dt.applyToX(vt.v[0][0],vt.v[0][1],0),dt.applyToY(vt.v[0][0],vt.v[0][1],0)),Et.push(dt.applyToX(vt.o[ft-1][0],vt.o[ft-1][1],0),dt.applyToY(vt.o[ft-1][0],vt.o[ft-1][1],0),dt.applyToX(vt.i[ft][0],vt.i[ft][1],0),dt.applyToY(vt.i[ft][0],vt.i[ft][1],0),dt.applyToX(vt.v[ft][0],vt.v[ft][1],0),dt.applyToY(vt.v[ft][0],vt.v[ft][1],0));Et.push(dt.applyToX(vt.o[ft-1][0],vt.o[ft-1][1],0),dt.applyToY(vt.o[ft-1][0],vt.o[ft-1][1],0),dt.applyToX(vt.i[0][0],vt.i[0][1],0),dt.applyToY(vt.i[0][0],vt.i[0][1],0),dt.applyToX(vt.v[0][0],vt.v[0][1],0),dt.applyToY(vt.v[0][0],vt.v[0][1],0)),St[jt]=Et,jt+=1}wt&&(Tt+=ut[lt].l,Tt+=Rt),this.textSpans[Dt]?this.textSpans[Dt].elem=St:this.textSpans[Dt]={elem:St},Dt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var nt=this.canvasContext;nt.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var rt,it,st,lt,ct,ut,dt=this.textAnimator.renderedLetters,ht=this.textProperty.currentData.l;it=ht.length;var pt,ft=null,mt=null,gt=null,xt,yt,vt=this.globalData.renderer;for(rt=0;rt<it;rt+=1)if(!ht[rt].n){if(pt=dt[rt],pt&&(vt.save(),vt.ctxTransform(pt.p),vt.ctxOpacity(pt.o)),this.fill){for(pt&&pt.fc?ft!==pt.fc&&(vt.ctxFillStyle(pt.fc),ft=pt.fc):ft!==this.values.fill&&(ft=this.values.fill,vt.ctxFillStyle(this.values.fill)),xt=this.textSpans[rt].elem,lt=xt.length,this.globalData.canvasContext.beginPath(),st=0;st<lt;st+=1)for(yt=xt[st],ut=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),ct=2;ct<ut;ct+=6)this.globalData.canvasContext.bezierCurveTo(yt[ct],yt[ct+1],yt[ct+2],yt[ct+3],yt[ct+4],yt[ct+5]);this.globalData.canvasContext.closePath(),vt.ctxFill()}if(this.stroke){for(pt&&pt.sw?gt!==pt.sw&&(gt=pt.sw,vt.ctxLineWidth(pt.sw)):gt!==this.values.sWidth&&(gt=this.values.sWidth,vt.ctxLineWidth(this.values.sWidth)),pt&&pt.sc?mt!==pt.sc&&(mt=pt.sc,vt.ctxStrokeStyle(pt.sc)):mt!==this.values.stroke&&(mt=this.values.stroke,vt.ctxStrokeStyle(this.values.stroke)),xt=this.textSpans[rt].elem,lt=xt.length,this.globalData.canvasContext.beginPath(),st=0;st<lt;st+=1)for(yt=xt[st],ut=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),ct=2;ct<ut;ct+=6)this.globalData.canvasContext.bezierCurveTo(yt[ct],yt[ct+1],yt[ct+2],yt[ct+3],yt[ct+4],yt[ct+5]);this.globalData.canvasContext.closePath(),vt.ctxStroke()}pt&&this.globalData.renderer.restore()}};function CVImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.img=rt.imageLoader.getAsset(this.assetData),this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var nt=createTag("canvas");nt.width=this.assetData.w,nt.height=this.assetData.h;var rt=nt.getContext("2d"),it=this.img.width,st=this.img.height,lt=it/st,ct=this.assetData.w/this.assetData.h,ut,dt,ht=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;lt>ct&&ht==="xMidYMid slice"||lt<ct&&ht!=="xMidYMid slice"?(dt=st,ut=dt*ct):(ut=it,dt=ut/ct),rt.drawImage(this.img,(it-ut)/2,(st-dt)/2,ut,dt,0,0,this.assetData.w,this.assetData.h),this.img=nt}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(nt){return new CVShapeElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createText=function(nt){return new CVTextElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(nt){return new CVImageElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(nt){return new CVSolidElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(nt){nt[0]===1&&nt[1]===0&&nt[4]===0&&nt[5]===1&&nt[12]===0&&nt[13]===0||this.canvasContext.transform(nt[0],nt[1],nt[4],nt[5],nt[12],nt[13])},CanvasRendererBase.prototype.ctxOpacity=function(nt){this.canvasContext.globalAlpha*=nt<0?0:nt},CanvasRendererBase.prototype.ctxFillStyle=function(nt){this.canvasContext.fillStyle=nt},CanvasRendererBase.prototype.ctxStrokeStyle=function(nt){this.canvasContext.strokeStyle=nt},CanvasRendererBase.prototype.ctxLineWidth=function(nt){this.canvasContext.lineWidth=nt},CanvasRendererBase.prototype.ctxLineCap=function(nt){this.canvasContext.lineCap=nt},CanvasRendererBase.prototype.ctxLineJoin=function(nt){this.canvasContext.lineJoin=nt},CanvasRendererBase.prototype.ctxMiterLimit=function(nt){this.canvasContext.miterLimit=nt},CanvasRendererBase.prototype.ctxFill=function(nt){this.canvasContext.fill(nt)},CanvasRendererBase.prototype.ctxFillRect=function(nt,rt,it,st){this.canvasContext.fillRect(nt,rt,it,st)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(nt){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}nt&&(this.globalData.blendMode="source-over"),this.contextData.restore(nt)},CanvasRendererBase.prototype.configAnimation=function(nt){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var rt=this.animationItem.container.style;rt.width="100%",rt.height="100%";var it="0px 0px 0px";rt.transformOrigin=it,rt.mozTransformOrigin=it,rt.webkitTransformOrigin=it,rt["-webkit-transform"]=it,rt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=nt,this.layers=nt.layers,this.transformCanvas={w:nt.w,h:nt.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(nt,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(nt.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(nt,rt){this.reset();var it,st;nt?(it=nt,st=rt,this.canvasContext.canvas.width=it,this.canvasContext.canvas.height=st):(this.animationItem.wrapper&&this.animationItem.container?(it=this.animationItem.wrapper.offsetWidth,st=this.animationItem.wrapper.offsetHeight):(it=this.canvasContext.canvas.width,st=this.canvasContext.canvas.height),this.canvasContext.canvas.width=it*this.renderConfig.dpr,this.canvasContext.canvas.height=st*this.renderConfig.dpr);var lt,ct;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var ut=this.renderConfig.preserveAspectRatio.split(" "),dt=ut[1]||"meet",ht=ut[0]||"xMidYMid",pt=ht.substr(0,4),ft=ht.substr(4);lt=it/st,ct=this.transformCanvas.w/this.transformCanvas.h,ct>lt&&dt==="meet"||ct<lt&&dt==="slice"?(this.transformCanvas.sx=it/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=it/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=st/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=st/(this.transformCanvas.h/this.renderConfig.dpr)),pt==="xMid"&&(ct<lt&&dt==="meet"||ct>lt&&dt==="slice")?this.transformCanvas.tx=(it-this.transformCanvas.w*(st/this.transformCanvas.h))/2*this.renderConfig.dpr:pt==="xMax"&&(ct<lt&&dt==="meet"||ct>lt&&dt==="slice")?this.transformCanvas.tx=(it-this.transformCanvas.w*(st/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,ft==="YMid"&&(ct>lt&&dt==="meet"||ct<lt&&dt==="slice")?this.transformCanvas.ty=(st-this.transformCanvas.h*(it/this.transformCanvas.w))/2*this.renderConfig.dpr:ft==="YMax"&&(ct>lt&&dt==="meet"||ct<lt&&dt==="slice")?this.transformCanvas.ty=(st-this.transformCanvas.h*(it/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=it/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=st/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var nt,rt=this.layers?this.layers.length:0;for(nt=rt-1;nt>=0;nt-=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(nt,rt){if(!(this.renderedFrame===nt&&this.renderConfig.clearCanvas===!0&&!rt||this.destroyed||nt===-1)){this.renderedFrame=nt,this.globalData.frameNum=nt-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||rt,this.globalData.projectInterface.currentFrame=nt;var it,st=this.layers.length;for(this.completeLayers||this.checkLayers(nt),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&this.elements[it].prepareFrame(nt-this.layers[it].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(nt){var rt=this.elements;if(!(rt[nt]||this.layers[nt].ty===99)){var it=this.createItem(this.layers[nt],this,this.globalData);rt[nt]=it,it.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();nt.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var nt,rt=15;for(nt=0;nt<rt;nt+=1){var it=new CanvasContext;this.stack[nt]=it}this._length=rt,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var nt=this._length*2,rt=0;for(rt=this._length;rt<nt;rt+=1)this.stack[rt]=new CanvasContext;this._length=nt},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(nt){this.cArrPos-=1;var rt=this.stack[this.cArrPos],it=rt.transform,st,lt=this.cTr.props;for(st=0;st<16;st+=1)lt[st]=it[st];if(nt){this.nativeContext.restore();var ct=this.stack[this.cArrPos+1];this.appliedFillStyle=ct.fillStyle,this.appliedStrokeStyle=ct.strokeStyle,this.appliedLineWidth=ct.lineWidth,this.appliedLineCap=ct.lineCap,this.appliedLineJoin=ct.lineJoin,this.appliedMiterLimit=ct.miterLimit}this.nativeContext.setTransform(it[0],it[1],it[4],it[5],it[12],it[13]),(nt||rt.opacity!==-1&&this.currentOpacity!==rt.opacity)&&(this.nativeContext.globalAlpha=rt.opacity,this.currentOpacity=rt.opacity),this.currentFillStyle=rt.fillStyle,this.currentStrokeStyle=rt.strokeStyle,this.currentLineWidth=rt.lineWidth,this.currentLineCap=rt.lineCap,this.currentLineJoin=rt.lineJoin,this.currentMiterLimit=rt.miterLimit},CVContextData.prototype.save=function(nt){nt&&this.nativeContext.save();var rt=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var it=this.stack[this.cArrPos],st;for(st=0;st<16;st+=1)it.transform[st]=rt[st];this.cArrPos+=1;var lt=this.stack[this.cArrPos];lt.opacity=it.opacity,lt.fillStyle=it.fillStyle,lt.strokeStyle=it.strokeStyle,lt.lineWidth=it.lineWidth,lt.lineCap=it.lineCap,lt.lineJoin=it.lineJoin,lt.miterLimit=it.miterLimit},CVContextData.prototype.setOpacity=function(nt){this.stack[this.cArrPos].opacity=nt},CVContextData.prototype.setContext=function(nt){this.nativeContext=nt},CVContextData.prototype.fillStyle=function(nt){this.stack[this.cArrPos].fillStyle!==nt&&(this.currentFillStyle=nt,this.stack[this.cArrPos].fillStyle=nt)},CVContextData.prototype.strokeStyle=function(nt){this.stack[this.cArrPos].strokeStyle!==nt&&(this.currentStrokeStyle=nt,this.stack[this.cArrPos].strokeStyle=nt)},CVContextData.prototype.lineWidth=function(nt){this.stack[this.cArrPos].lineWidth!==nt&&(this.currentLineWidth=nt,this.stack[this.cArrPos].lineWidth=nt)},CVContextData.prototype.lineCap=function(nt){this.stack[this.cArrPos].lineCap!==nt&&(this.currentLineCap=nt,this.stack[this.cArrPos].lineCap=nt)},CVContextData.prototype.lineJoin=function(nt){this.stack[this.cArrPos].lineJoin!==nt&&(this.currentLineJoin=nt,this.stack[this.cArrPos].lineJoin=nt)},CVContextData.prototype.miterLimit=function(nt){this.stack[this.cArrPos].miterLimit!==nt&&(this.currentMiterLimit=nt,this.stack[this.cArrPos].miterLimit=nt)},CVContextData.prototype.transform=function(nt){this.transformMat.cloneFromProps(nt);var rt=this.cTr;this.transformMat.multiply(rt),rt.cloneFromProps(this.transformMat.props);var it=rt.props;this.nativeContext.setTransform(it[0],it[1],it[4],it[5],it[12],it[13])},CVContextData.prototype.opacity=function(nt){var rt=this.stack[this.cArrPos].opacity;rt*=nt<0?0:nt,this.stack[this.cArrPos].opacity!==rt&&(this.currentOpacity!==nt&&(this.nativeContext.globalAlpha=nt,this.currentOpacity=nt),this.stack[this.cArrPos].opacity=rt)},CVContextData.prototype.fill=function(nt){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(nt)},CVContextData.prototype.fillRect=function(nt,rt,it,st){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(nt,rt,it,st)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(nt,rt,it){this.completeLayers=!1,this.layers=nt.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var nt=this.canvasContext;nt.beginPath(),nt.moveTo(0,0),nt.lineTo(this.data.w,0),nt.lineTo(this.data.w,this.data.h),nt.lineTo(0,this.data.h),nt.lineTo(0,0),nt.clip();var rt,it=this.layers.length;for(rt=it-1;rt>=0;rt-=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].renderFrame()},CVCompElement.prototype.destroy=function(){var nt,rt=this.layers.length;for(nt=rt-1;nt>=0;nt-=1)this.elements[nt]&&this.elements[nt].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(nt){return new CVCompElement(nt,this.globalData,this)};function CanvasRenderer(nt,rt){this.animationItem=nt,this.renderConfig={clearCanvas:rt&&rt.clearCanvas!==void 0?rt.clearCanvas:!0,context:rt&&rt.context||null,progressiveLoad:rt&&rt.progressiveLoad||!1,preserveAspectRatio:rt&&rt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rt&&rt.contentVisibility||"visible",className:rt&&rt.className||"",id:rt&&rt.id||"",runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.renderConfig.dpr=rt&&rt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=rt&&rt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(nt){return new CVCompElement(nt,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var rt=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var it=this.finalTransform.mat.toCSS();rt.transform=it,rt.webkitTransform=it}this.finalTransform._opMdf&&(rt.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var nt;this.data.hasMask?(nt=createNS("rect"),nt.setAttribute("width",this.data.sw),nt.setAttribute("height",this.data.sh),nt.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(nt=createTag("div"),nt.style.width=this.data.sw+"px",nt.style.height=this.data.sh+"px",nt.style.backgroundColor=this.data.sc),this.layerElement.appendChild(nt)};function HShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(nt,rt,it),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var nt;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),nt=this.svgElement;else{nt=createNS("svg");var rt=this.comp.data?this.comp.data:this.globalData.compSize;nt.setAttribute("width",rt.w),nt.setAttribute("height",rt.h),nt.appendChild(this.shapesContainer),this.layerElement.appendChild(nt)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=nt},HShapeElement.prototype.getTransformedPoint=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)rt=nt[it].mProps.v.applyToPointArray(rt[0],rt[1],0);return rt},HShapeElement.prototype.calculateShapeBoundingBox=function(nt,rt){var it=nt.sh.v,st=nt.transformers,lt,ct=it._length,ut,dt,ht,pt;if(!(ct<=1)){for(lt=0;lt<ct-1;lt+=1)ut=this.getTransformedPoint(st,it.v[lt]),dt=this.getTransformedPoint(st,it.o[lt]),ht=this.getTransformedPoint(st,it.i[lt+1]),pt=this.getTransformedPoint(st,it.v[lt+1]),this.checkBounds(ut,dt,ht,pt,rt);it.c&&(ut=this.getTransformedPoint(st,it.v[lt]),dt=this.getTransformedPoint(st,it.o[lt]),ht=this.getTransformedPoint(st,it.i[0]),pt=this.getTransformedPoint(st,it.v[0]),this.checkBounds(ut,dt,ht,pt,rt))}},HShapeElement.prototype.checkBounds=function(nt,rt,it,st,lt){this.getBoundsOfCurve(nt,rt,it,st);var ct=this.shapeBoundingBox;lt.x=bmMin(ct.left,lt.x),lt.xMax=bmMax(ct.right,lt.xMax),lt.y=bmMin(ct.top,lt.y),lt.yMax=bmMax(ct.bottom,lt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(nt,rt,it,st){for(var lt=[[nt[0],st[0]],[nt[1],st[1]]],ct,ut,dt,ht,pt,ft,mt,gt=0;gt<2;++gt)ut=6*nt[gt]-12*rt[gt]+6*it[gt],ct=-3*nt[gt]+9*rt[gt]-9*it[gt]+3*st[gt],dt=3*rt[gt]-3*nt[gt],ut|=0,ct|=0,dt|=0,ct===0&&ut===0||(ct===0?(ht=-dt/ut,ht>0&&ht<1&&lt[gt].push(this.calculateF(ht,nt,rt,it,st,gt))):(pt=ut*ut-4*dt*ct,pt>=0&&(ft=(-ut+bmSqrt(pt))/(2*ct),ft>0&&ft<1&&lt[gt].push(this.calculateF(ft,nt,rt,it,st,gt)),mt=(-ut-bmSqrt(pt))/(2*ct),mt>0&&mt<1&&lt[gt].push(this.calculateF(mt,nt,rt,it,st,gt)))));this.shapeBoundingBox.left=bmMin.apply(null,lt[0]),this.shapeBoundingBox.top=bmMin.apply(null,lt[1]),this.shapeBoundingBox.right=bmMax.apply(null,lt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,lt[1])},HShapeElement.prototype.calculateF=function(nt,rt,it,st,lt,ct){return bmPow(1-nt,3)*rt[ct]+3*bmPow(1-nt,2)*nt*it[ct]+3*(1-nt)*bmPow(nt,2)*st[ct]+bmPow(nt,3)*lt[ct]},HShapeElement.prototype.calculateBoundingBox=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)nt[it]&&nt[it].sh?this.calculateShapeBoundingBox(nt[it],rt):nt[it]&&nt[it].it?this.calculateBoundingBox(nt[it].it,rt):nt[it]&&nt[it].style&&nt[it].w&&this.expandStrokeBoundingBox(nt[it].w,rt)},HShapeElement.prototype.expandStrokeBoundingBox=function(nt,rt){var it=0;if(nt.keyframes){for(var st=0;st<nt.keyframes.length;st+=1){var lt=nt.keyframes[st].s;lt>it&&(it=lt)}it*=nt.mult}else it=nt.v*nt.mult;rt.x-=it,rt.xMax+=it,rt.y-=it,rt.yMax+=it},HShapeElement.prototype.currentBoxContains=function(nt){return this.currentBBox.x<=nt.x&&this.currentBBox.y<=nt.y&&this.currentBBox.width+this.currentBBox.x>=nt.x+nt.width&&this.currentBBox.height+this.currentBBox.y>=nt.y+nt.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var nt=this.tempBoundingBox,rt=999999;if(nt.x=rt,nt.xMax=-rt,nt.y=rt,nt.yMax=-rt,this.calculateBoundingBox(this.itemsData,nt),nt.width=nt.xMax<nt.x?0:nt.xMax-nt.x,nt.height=nt.yMax<nt.y?0:nt.yMax-nt.y,this.currentBoxContains(nt))return;var it=!1;if(this.currentBBox.w!==nt.width&&(this.currentBBox.w=nt.width,this.shapeCont.setAttribute("width",nt.width),it=!0),this.currentBBox.h!==nt.height&&(this.currentBBox.h=nt.height,this.shapeCont.setAttribute("height",nt.height),it=!0),it||this.currentBBox.x!==nt.x||this.currentBBox.y!==nt.y){this.currentBBox.w=nt.width,this.currentBBox.h=nt.height,this.currentBBox.x=nt.x,this.currentBBox.y=nt.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var st=this.shapeCont.style,lt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";st.transform=lt,st.webkitTransform=lt}}};function HTextElement(nt,rt,it){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var nt=createNS("g");this.maskedElement.appendChild(nt),this.innerElem=nt}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var nt=this.textProperty.currentData;this.renderedLetters=createSizedArray(nt.l?nt.l.length:0);var rt=this.innerElem.style,it=nt.fc?this.buildColor(nt.fc):"rgba(0,0,0,0)";rt.fill=it,rt.color=it,nt.sc&&(rt.stroke=this.buildColor(nt.sc),rt.strokeWidth=nt.sw+"px");var st=this.globalData.fontManager.getFontByName(nt.f);if(!this.globalData.fontManager.chars)if(rt.fontSize=nt.finalSize+"px",rt.lineHeight=nt.finalSize+"px",st.fClass)this.innerElem.className=st.fClass;else{rt.fontFamily=st.fFamily;var lt=nt.fWeight,ct=nt.fStyle;rt.fontStyle=ct,rt.fontWeight=lt}var ut,dt,ht=nt.l;dt=ht.length;var pt,ft,mt,gt=this.mHelper,xt,yt="",vt=0;for(ut=0;ut<dt;ut+=1){if(this.globalData.fontManager.chars?(this.textPaths[vt]?pt=this.textPaths[vt]:(pt=createNS("path"),pt.setAttribute("stroke-linecap",lineCapEnum[1]),pt.setAttribute("stroke-linejoin",lineJoinEnum[2]),pt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[vt]?(ft=this.textSpans[vt],mt=ft.children[0]):(ft=createTag("div"),ft.style.lineHeight=0,mt=createNS("svg"),mt.appendChild(pt),styleDiv(ft)))):this.isMasked?pt=this.textPaths[vt]?this.textPaths[vt]:createNS("text"):this.textSpans[vt]?(ft=this.textSpans[vt],pt=this.textPaths[vt]):(ft=createTag("span"),styleDiv(ft),pt=createTag("span"),styleDiv(pt),ft.appendChild(pt)),this.globalData.fontManager.chars){var St=this.globalData.fontManager.getCharData(nt.finalText[ut],st.fStyle,this.globalData.fontManager.getFontByName(nt.f).fFamily),Et;if(St?Et=St.data:Et=null,gt.reset(),Et&&Et.shapes&&Et.shapes.length&&(xt=Et.shapes[0].it,gt.scale(nt.finalSize/100,nt.finalSize/100),yt=this.createPathShape(gt,xt),pt.setAttribute("d",yt)),this.isMasked)this.innerElem.appendChild(pt);else{if(this.innerElem.appendChild(ft),Et&&Et.shapes){document.body.appendChild(mt);var wt=mt.getBBox();mt.setAttribute("width",wt.width+2),mt.setAttribute("height",wt.height+2),mt.setAttribute("viewBox",wt.x-1+" "+(wt.y-1)+" "+(wt.width+2)+" "+(wt.height+2));var Rt=mt.style,Tt="translate("+(wt.x-1)+"px,"+(wt.y-1)+"px)";Rt.transform=Tt,Rt.webkitTransform=Tt,ht[ut].yOffset=wt.y-1}else mt.setAttribute("width",1),mt.setAttribute("height",1);ft.appendChild(mt)}}else if(pt.textContent=ht[ut].val,pt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(pt);else{this.innerElem.appendChild(ft);var It=pt.style,At="translate3d(0,"+-nt.finalSize/1.2+"px,0)";It.transform=At,It.webkitTransform=At}this.isMasked?this.textSpans[vt]=pt:this.textSpans[vt]=ft,this.textSpans[vt].style.display="block",this.textPaths[vt]=pt,vt+=1}for(;vt<this.textSpans.length;)this.textSpans[vt].style.display="none",vt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var nt;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),nt=this.svgElement.style;var rt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";nt.transform=rt,nt.webkitTransform=rt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var it,st,lt=0,ct=this.textAnimator.renderedLetters,ut=this.textProperty.currentData.l;st=ut.length;var dt,ht,pt;for(it=0;it<st;it+=1)ut[it].n?lt+=1:(ht=this.textSpans[it],pt=this.textPaths[it],dt=ct[lt],lt+=1,dt._mdf.m&&(this.isMasked?ht.setAttribute("transform",dt.m):(ht.style.webkitTransform=dt.m,ht.style.transform=dt.m)),ht.style.opacity=dt.o,dt.sw&&dt._mdf.sw&&pt.setAttribute("stroke-width",dt.sw),dt.sc&&dt._mdf.sc&&pt.setAttribute("stroke",dt.sc),dt.fc&&dt._mdf.fc&&(pt.setAttribute("fill",dt.fc),pt.style.color=dt.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var ft=this.innerElem.getBBox();this.currentBBox.w!==ft.width&&(this.currentBBox.w=ft.width,this.svgElement.setAttribute("width",ft.width)),this.currentBBox.h!==ft.height&&(this.currentBBox.h=ft.height,this.svgElement.setAttribute("height",ft.height));var mt=1;if(this.currentBBox.w!==ft.width+mt*2||this.currentBBox.h!==ft.height+mt*2||this.currentBBox.x!==ft.x-mt||this.currentBBox.y!==ft.y-mt){this.currentBBox.w=ft.width+mt*2,this.currentBBox.h=ft.height+mt*2,this.currentBBox.x=ft.x-mt,this.currentBBox.y=ft.y-mt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),nt=this.svgElement.style;var gt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";nt.transform=gt,nt.webkitTransform=gt}}}};function HCameraElement(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initHierarchy();var st=PropertyFactory.getProp;if(this.pe=st(this,nt.pe,0,0,this),nt.ks.p.s?(this.px=st(this,nt.ks.p.x,1,0,this),this.py=st(this,nt.ks.p.y,1,0,this),this.pz=st(this,nt.ks.p.z,1,0,this)):this.p=st(this,nt.ks.p,1,0,this),nt.ks.a&&(this.a=st(this,nt.ks.a,1,0,this)),nt.ks.or.k.length&&nt.ks.or.k[0].to){var lt,ct=nt.ks.or.k.length;for(lt=0;lt<ct;lt+=1)nt.ks.or.k[lt].to=null,nt.ks.or.k[lt].ti=null}this.or=st(this,nt.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=st(this,nt.ks.rx,0,degToRads,this),this.ry=st(this,nt.ks.ry,0,degToRads,this),this.rz=st(this,nt.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var nt,rt=this.comp.threeDElements.length,it,st,lt;for(nt=0;nt<rt;nt+=1)if(it=this.comp.threeDElements[nt],it.type==="3d"){st=it.perspectiveElem.style,lt=it.container.style;var ct=this.pe.v+"px",ut="0px 0px 0px",dt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";st.perspective=ct,st.webkitPerspective=ct,lt.transformOrigin=ut,lt.mozTransformOrigin=ut,lt.webkitTransformOrigin=ut,st.transform=dt,st.webkitTransform=dt}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var nt=this._isFirstFrame,rt,it;if(this.hierarchy)for(it=this.hierarchy.length,rt=0;rt<it;rt+=1)nt=this.hierarchy[rt].finalTransform.mProp._mdf||nt;if(nt||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(it=this.hierarchy.length-1,rt=it;rt>=0;rt-=1){var st=this.hierarchy[rt].finalTransform.mProp;this.mat.translate(-st.p.v[0],-st.p.v[1],st.p.v[2]),this.mat.rotateX(-st.or.v[0]).rotateY(-st.or.v[1]).rotateZ(st.or.v[2]),this.mat.rotateX(-st.rx.v).rotateY(-st.ry.v).rotateZ(st.rz.v),this.mat.scale(1/st.s.v[0],1/st.s.v[1],1/st.s.v[2]),this.mat.translate(st.a.v[0],st.a.v[1],st.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var lt;this.p?lt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:lt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ct=Math.sqrt(Math.pow(lt[0],2)+Math.pow(lt[1],2)+Math.pow(lt[2],2)),ut=[lt[0]/ct,lt[1]/ct,lt[2]/ct],dt=Math.sqrt(ut[2]*ut[2]+ut[0]*ut[0]),ht=Math.atan2(ut[1],dt),pt=Math.atan2(ut[0],-ut[2]);this.mat.rotateY(pt).rotateX(-ht)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var ft=!this._prevMat.equals(this.mat);if((ft||this.pe._mdf)&&this.comp.threeDElements){it=this.comp.threeDElements.length;var mt,gt,xt;for(rt=0;rt<it;rt+=1)if(mt=this.comp.threeDElements[rt],mt.type==="3d"){if(ft){var yt=this.mat.toCSS();xt=mt.container.style,xt.transform=yt,xt.webkitTransform=yt}this.pe._mdf&&(gt=mt.perspectiveElem.style,gt.perspective=this.pe.v+"px",gt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(nt){this.prepareProperties(nt,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var nt=this.globalData.getAssetsPath(this.assetData),rt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",nt),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(rt),rt.crossOrigin="anonymous",rt.src=nt,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rt&&rt.className||"",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"400%",height:rt&&rt.filterSize&&rt.filterSize.height||"400%",x:rt&&rt.filterSize&&rt.filterSize.x||"-100%",y:rt&&rt.filterSize&&rt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();nt.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(nt,rt){var it=nt.getBaseElement();if(it){var st=this.layers[rt];if(!st.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(it,rt);else{for(var lt=0,ct,ut,dt;lt<rt;)this.elements[lt]&&this.elements[lt]!==!0&&this.elements[lt].getBaseElement&&(ut=this.elements[lt],dt=this.layers[lt].ddd?this.getThreeDContainerByPos(lt):ut.getBaseElement(),ct=dt||ct),lt+=1;ct?(!st.ddd||!this.supports3d)&&this.layerElement.insertBefore(it,ct):(!st.ddd||!this.supports3d)&&this.layerElement.appendChild(it)}else this.addTo3dContainer(it,rt)}},HybridRendererBase.prototype.createShape=function(nt){return this.supports3d?new HShapeElement(nt,this.globalData,this):new SVGShapeElement(nt,this.globalData,this)},HybridRendererBase.prototype.createText=function(nt){return this.supports3d?new HTextElement(nt,this.globalData,this):new SVGTextLottieElement(nt,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(nt){return this.camera=new HCameraElement(nt,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(nt){return this.supports3d?new HImageElement(nt,this.globalData,this):new IImageElement(nt,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(nt){return this.supports3d?new HSolidElement(nt,this.globalData,this):new ISolidElement(nt,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(nt){for(var rt=0,it=this.threeDElements.length;rt<it;){if(this.threeDElements[rt].startPos<=nt&&this.threeDElements[rt].endPos>=nt)return this.threeDElements[rt].perspectiveElem;rt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(nt,rt){var it=createTag("div"),st,lt;styleDiv(it);var ct=createTag("div");if(styleDiv(ct),rt==="3d"){st=it.style,st.width=this.globalData.compSize.w+"px",st.height=this.globalData.compSize.h+"px";var ut="50% 50%";st.webkitTransformOrigin=ut,st.mozTransformOrigin=ut,st.transformOrigin=ut,lt=ct.style;var dt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";lt.transform=dt,lt.webkitTransform=dt}it.appendChild(ct);var ht={container:ct,perspectiveElem:it,startPos:nt,endPos:nt,type:rt};return this.threeDElements.push(ht),ht},HybridRendererBase.prototype.build3dContainers=function(){var nt,rt=this.layers.length,it,st="";for(nt=0;nt<rt;nt+=1)this.layers[nt].ddd&&this.layers[nt].ty!==3?(st!=="3d"&&(st="3d",it=this.createThreeDContainer(nt,"3d")),it.endPos=Math.max(it.endPos,nt)):(st!=="2d"&&(st="2d",it=this.createThreeDContainer(nt,"2d")),it.endPos=Math.max(it.endPos,nt));for(rt=this.threeDElements.length,nt=rt-1;nt>=0;nt-=1)this.resizerElem.appendChild(this.threeDElements[nt].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(nt,rt){for(var it=0,st=this.threeDElements.length;it<st;){if(rt<=this.threeDElements[it].endPos){for(var lt=this.threeDElements[it].startPos,ct;lt<rt;)this.elements[lt]&&this.elements[lt].getBaseElement&&(ct=this.elements[lt].getBaseElement()),lt+=1;ct?this.threeDElements[it].container.insertBefore(nt,ct):this.threeDElements[it].container.appendChild(nt);break}it+=1}},HybridRendererBase.prototype.configAnimation=function(nt){var rt=createTag("div"),it=this.animationItem.wrapper,st=rt.style;st.width=nt.w+"px",st.height=nt.h+"px",this.resizerElem=rt,styleDiv(rt),st.transformStyle="flat",st.mozTransformStyle="flat",st.webkitTransformStyle="flat",this.renderConfig.className&&rt.setAttribute("class",this.renderConfig.className),it.appendChild(rt),st.overflow="hidden";var lt=createNS("svg");lt.setAttribute("width","1"),lt.setAttribute("height","1"),styleDiv(lt),this.resizerElem.appendChild(lt);var ct=createNS("defs");lt.appendChild(ct),this.data=nt,this.setupGlobalData(nt,lt),this.globalData.defs=ct,this.layers=nt.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var nt,rt=this.layers?this.layers.length:0;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var nt=this.animationItem.wrapper.offsetWidth,rt=this.animationItem.wrapper.offsetHeight,it=nt/rt,st=this.globalData.compSize.w/this.globalData.compSize.h,lt,ct,ut,dt;st>it?(lt=nt/this.globalData.compSize.w,ct=nt/this.globalData.compSize.w,ut=0,dt=(rt-this.globalData.compSize.h*(nt/this.globalData.compSize.w))/2):(lt=rt/this.globalData.compSize.h,ct=rt/this.globalData.compSize.h,ut=(nt-this.globalData.compSize.w*(rt/this.globalData.compSize.h))/2,dt=0);var ht=this.resizerElem.style;ht.webkitTransform="matrix3d("+lt+",0,0,0,0,"+ct+",0,0,0,0,1,0,"+ut+","+dt+",0,1)",ht.transform=ht.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var nt=this.globalData.compSize.w,rt=this.globalData.compSize.h,it,st=this.threeDElements.length;for(it=0;it<st;it+=1){var lt=this.threeDElements[it].perspectiveElem.style;lt.webkitPerspective=Math.sqrt(Math.pow(nt,2)+Math.pow(rt,2))+"px",lt.perspective=lt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(nt){var rt,it=nt.length,st=createTag("div");for(rt=0;rt<it;rt+=1)if(nt[rt].xt){var lt=this.createComp(nt[rt],st,this.globalData.comp,null);lt.initExpressions(),this.globalData.projectInterface.registerComposition(lt)}};function HCompElement(nt,rt,it){this.layers=nt.layers,this.supports3d=!nt.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(nt,rt){for(var it=0,st;it<rt;)this.elements[it]&&this.elements[it].getBaseElement&&(st=this.elements[it].getBaseElement()),it+=1;st?this.layerElement.insertBefore(nt,st):this.layerElement.appendChild(nt)},HCompElement.prototype.createComp=function(nt){return this.supports3d?new HCompElement(nt,this.globalData,this):new SVGCompElement(nt,this.globalData,this)};function HybridRenderer(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rt&&rt.className||"",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"400%",height:rt&&rt.filterSize&&rt.filterSize.height||"400%",x:rt&&rt.filterSize&&rt.filterSize.x||"-100%",y:rt&&rt.filterSize&&rt.filterSize.y||"-100%"},runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(nt){return this.supports3d?new HCompElement(nt,this.globalData,this):new SVGCompElement(nt,this.globalData,this)};var CompExpressionInterface=function(){return function(nt){function rt(it){for(var st=0,lt=nt.layers.length;st<lt;){if(nt.layers[st].nm===it||nt.layers[st].ind===it)return nt.elements[st].layerInterface;st+=1}return null}return Object.defineProperty(rt,"_name",{value:nt.data.nm}),rt.layer=rt,rt.pixelAspect=1,rt.height=nt.data.h||nt.globalData.compSize.h,rt.width=nt.data.w||nt.globalData.compSize.w,rt.pixelAspect=1,rt.frameDuration=1/nt.globalData.frameRate,rt.displayStartTime=0,rt.numLayers=nt.layers.length,rt}}();function _typeof$2(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(it){return typeof it}:_typeof$2=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$2(nt)}function seedRandom(nt,rt){var it=this,st=256,lt=6,ct=52,ut="random",dt=rt.pow(st,lt),ht=rt.pow(2,ct),pt=ht*2,ft=st-1,mt;function gt(Rt,Tt,It){var At=[];Tt=Tt===!0?{entropy:!0}:Tt||{};var Dt=St(vt(Tt.entropy?[Rt,wt(nt)]:Rt===null?Et():Rt,3),At),jt=new xt(At),Ft=function(){for(var Pt=jt.g(lt),Ot=dt,Nt=0;Pt<ht;)Pt=(Pt+Nt)*st,Ot*=st,Nt=jt.g(1);for(;Pt>=pt;)Pt/=2,Ot/=2,Nt>>>=1;return(Pt+Nt)/Ot};return Ft.int32=function(){return jt.g(4)|0},Ft.quick=function(){return jt.g(4)/4294967296},Ft.double=Ft,St(wt(jt.S),nt),(Tt.pass||It||function(Lt,Pt,Ot,Nt){return Nt&&(Nt.S&&yt(Nt,jt),Lt.state=function(){return yt(jt,{})}),Ot?(rt[ut]=Lt,Pt):Lt})(Ft,Dt,"global"in Tt?Tt.global:this==rt,Tt.state)}rt["seed"+ut]=gt;function xt(Rt){var Tt,It=Rt.length,At=this,Dt=0,jt=At.i=At.j=0,Ft=At.S=[];for(It||(Rt=[It++]);Dt<st;)Ft[Dt]=Dt++;for(Dt=0;Dt<st;Dt++)Ft[Dt]=Ft[jt=ft&jt+Rt[Dt%It]+(Tt=Ft[Dt])],Ft[jt]=Tt;At.g=function(Lt){for(var Pt,Ot=0,Nt=At.i,$t=At.j,Vt=At.S;Lt--;)Pt=Vt[Nt=ft&Nt+1],Ot=Ot*st+Vt[ft&(Vt[Nt]=Vt[$t=ft&$t+Pt])+(Vt[$t]=Pt)];return At.i=Nt,At.j=$t,Ot}}function yt(Rt,Tt){return Tt.i=Rt.i,Tt.j=Rt.j,Tt.S=Rt.S.slice(),Tt}function vt(Rt,Tt){var It=[],At=_typeof$2(Rt),Dt;if(Tt&&At=="object")for(Dt in Rt)try{It.push(vt(Rt[Dt],Tt-1))}catch{}return It.length?It:At=="string"?Rt:Rt+"\0"}function St(Rt,Tt){for(var It=Rt+"",At,Dt=0;Dt<It.length;)Tt[ft&Dt]=ft&(At^=Tt[ft&Dt]*19)+It.charCodeAt(Dt++);return wt(Tt)}function Et(){try{var Rt=new Uint8Array(st);return(it.crypto||it.msCrypto).getRandomValues(Rt),wt(Rt)}catch{var Tt=it.navigator,It=Tt&&Tt.plugins;return[+new Date,it,It,it.screen,wt(nt)]}}function wt(Rt){return String.fromCharCode.apply(0,Rt)}St(rt.random(),nt)}function initialize$2(nt){seedRandom([],nt)}var propTypes={SHAPE:"shape"};function _typeof$1(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(it){return typeof it}:_typeof$1=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$1(nt)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(nt){return nt.constructor===Array||nt.constructor===Float32Array}function isNumerable(nt,rt){return nt==="number"||rt instanceof Number||nt==="boolean"||nt==="string"}function $bm_neg(nt){var rt=_typeof$1(nt);if(rt==="number"||nt instanceof Number||rt==="boolean")return-nt;if($bm_isInstanceOfArray(nt)){var it,st=nt.length,lt=[];for(it=0;it<st;it+=1)lt[it]=-nt[it];return lt}return nt.propType?nt.v:-nt}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt);if(isNumerable(it,nt)&&isNumerable(st,rt)||it==="string"||st==="string")return nt+rt;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt))return nt=nt.slice(0),nt[0]+=rt,nt;if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt))return rt=rt.slice(0),rt[0]=nt+rt[0],rt;if($bm_isInstanceOfArray(nt)&&$bm_isInstanceOfArray(rt)){for(var lt=0,ct=nt.length,ut=rt.length,dt=[];lt<ct||lt<ut;)(typeof nt[lt]=="number"||nt[lt]instanceof Number)&&(typeof rt[lt]=="number"||rt[lt]instanceof Number)?dt[lt]=nt[lt]+rt[lt]:dt[lt]=rt[lt]===void 0?nt[lt]:nt[lt]||rt[lt],lt+=1;return dt}return 0}var add=sum;function sub(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt);if(isNumerable(it,nt)&&isNumerable(st,rt))return it==="string"&&(nt=parseInt(nt,10)),st==="string"&&(rt=parseInt(rt,10)),nt-rt;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt))return nt=nt.slice(0),nt[0]-=rt,nt;if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt))return rt=rt.slice(0),rt[0]=nt-rt[0],rt;if($bm_isInstanceOfArray(nt)&&$bm_isInstanceOfArray(rt)){for(var lt=0,ct=nt.length,ut=rt.length,dt=[];lt<ct||lt<ut;)(typeof nt[lt]=="number"||nt[lt]instanceof Number)&&(typeof rt[lt]=="number"||rt[lt]instanceof Number)?dt[lt]=nt[lt]-rt[lt]:dt[lt]=rt[lt]===void 0?nt[lt]:nt[lt]||rt[lt],lt+=1;return dt}return 0}function mul(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt),lt;if(isNumerable(it,nt)&&isNumerable(st,rt))return nt*rt;var ct,ut;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt)){for(ut=nt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt[ct]*rt;return lt}if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt)){for(ut=rt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt*rt[ct];return lt}return 0}function div(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt),lt;if(isNumerable(it,nt)&&isNumerable(st,rt))return nt/rt;var ct,ut;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt)){for(ut=nt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt[ct]/rt;return lt}if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt)){for(ut=rt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt/rt[ct];return lt}return 0}function mod(nt,rt){return typeof nt=="string"&&(nt=parseInt(nt,10)),typeof rt=="string"&&(rt=parseInt(rt,10)),nt%rt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(nt,rt,it){if(rt>it){var st=it;it=rt,rt=st}return Math.min(Math.max(nt,rt),it)}function radiansToDegrees(nt){return nt/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(nt){return nt*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(nt,rt){if(typeof nt=="number"||nt instanceof Number)return rt=rt||0,Math.abs(nt-rt);rt||(rt=helperLengthArray);var it,st=Math.min(nt.length,rt.length),lt=0;for(it=0;it<st;it+=1)lt+=Math.pow(rt[it]-nt[it],2);return Math.sqrt(lt)}function normalize(nt){return div(nt,length(nt))}function rgbToHsl(nt){var rt=nt[0],it=nt[1],st=nt[2],lt=Math.max(rt,it,st),ct=Math.min(rt,it,st),ut,dt,ht=(lt+ct)/2;if(lt===ct)ut=0,dt=0;else{var pt=lt-ct;switch(dt=ht>.5?pt/(2-lt-ct):pt/(lt+ct),lt){case rt:ut=(it-st)/pt+(it<st?6:0);break;case it:ut=(st-rt)/pt+2;break;case st:ut=(rt-it)/pt+4;break}ut/=6}return[ut,dt,ht,nt[3]]}function hue2rgb(nt,rt,it){return it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt}function hslToRgb(nt){var rt=nt[0],it=nt[1],st=nt[2],lt,ct,ut;if(it===0)lt=st,ut=st,ct=st;else{var dt=st<.5?st*(1+it):st+it-st*it,ht=2*st-dt;lt=hue2rgb(ht,dt,rt+1/3),ct=hue2rgb(ht,dt,rt),ut=hue2rgb(ht,dt,rt-1/3)}return[lt,ct,ut,nt[3]]}function linear(nt,rt,it,st,lt){if((st===void 0||lt===void 0)&&(st=rt,lt=it,rt=0,it=1),it<rt){var ct=it;it=rt,rt=ct}if(nt<=rt)return st;if(nt>=it)return lt;var ut=it===rt?0:(nt-rt)/(it-rt);if(!st.length)return st+(lt-st)*ut;var dt,ht=st.length,pt=createTypedArray("float32",ht);for(dt=0;dt<ht;dt+=1)pt[dt]=st[dt]+(lt[dt]-st[dt])*ut;return pt}function random(nt,rt){if(rt===void 0&&(nt===void 0?(nt=0,rt=1):(rt=nt,nt=void 0)),rt.length){var it,st=rt.length;nt||(nt=createTypedArray("float32",st));var lt=createTypedArray("float32",st),ct=BMMath.random();for(it=0;it<st;it+=1)lt[it]=nt[it]+ct*(rt[it]-nt[it]);return lt}nt===void 0&&(nt=0);var ut=BMMath.random();return nt+ut*(rt-nt)}function createPath(nt,rt,it,st){var lt,ct=nt.length,ut=shapePool.newElement();ut.setPathData(!!st,ct);var dt=[0,0],ht,pt;for(lt=0;lt<ct;lt+=1)ht=rt&&rt[lt]?rt[lt]:dt,pt=it&&it[lt]?it[lt]:dt,ut.setTripleAt(nt[lt][0],nt[lt][1],pt[0]+nt[lt][0],pt[1]+nt[lt][1],ht[0]+nt[lt][0],ht[1]+nt[lt][1],lt,!0);return ut}function initiateExpression(elem,data,property){function noOp(nt){return nt}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function nt(rt,it){var st,lt,ct=this.pv.length?this.pv.length:1,ut=createTypedArray("float32",ct);rt=5;var dt=Math.floor(time*rt);for(st=0,lt=0;st<dt;){for(lt=0;lt<ct;lt+=1)ut[lt]+=-it+it*2*BMMath.random();st+=1}var ht=time*rt,pt=ht-Math.floor(ht),ft=createTypedArray("float32",ct);if(ct>1){for(lt=0;lt<ct;lt+=1)ft[lt]=this.pv[lt]+ut[lt]+(-it+it*2*BMMath.random())*pt;return ft}return this.pv+ut[0]+(-it+it*2*BMMath.random())*pt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(nt,rt){return loopIn(nt,rt,!0)}function loopOutDuration(nt,rt){return loopOut(nt,rt,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(nt,rt){var it=[rt[0]-nt[0],rt[1]-nt[1],rt[2]-nt[2]],st=Math.atan2(it[0],Math.sqrt(it[1]*it[1]+it[2]*it[2]))/degToRads,lt=-Math.atan2(it[1],it[2])/degToRads;return[lt,st,0]}function easeOut(nt,rt,it,st,lt){return applyEase(easeOutBez,nt,rt,it,st,lt)}function easeIn(nt,rt,it,st,lt){return applyEase(easeInBez,nt,rt,it,st,lt)}function ease(nt,rt,it,st,lt){return applyEase(easeInOutBez,nt,rt,it,st,lt)}function applyEase(nt,rt,it,st,lt,ct){lt===void 0?(lt=it,ct=st):rt=(rt-it)/(st-it),rt>1?rt=1:rt<0&&(rt=0);var ut=nt(rt);if($bm_isInstanceOfArray(lt)){var dt,ht=lt.length,pt=createTypedArray("float32",ht);for(dt=0;dt<ht;dt+=1)pt[dt]=(ct[dt]-lt[dt])*ut+lt[dt];return pt}return(ct-lt)*ut+lt}function nearestKey(nt){var rt,it=data.k.length,st,lt;if(!data.k.length||typeof data.k[0]=="number")st=0,lt=0;else if(st=-1,nt*=elem.comp.globalData.frameRate,nt<data.k[0].t)st=1,lt=data.k[0].t;else{for(rt=0;rt<it-1;rt+=1)if(nt===data.k[rt].t){st=rt+1,lt=data.k[rt].t;break}else if(nt>data.k[rt].t&&nt<data.k[rt+1].t){nt-data.k[rt].t>data.k[rt+1].t-nt?(st=rt+2,lt=data.k[rt+1].t):(st=rt+1,lt=data.k[rt].t);break}st===-1&&(st=rt+1,lt=data.k[rt].t)}var ct={};return ct.index=st,ct.time=lt/elem.comp.globalData.frameRate,ct}function key(nt){var rt,it,st;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+nt);nt-=1,rt={time:data.k[nt].t/elem.comp.globalData.frameRate,value:[]};var lt=Object.prototype.hasOwnProperty.call(data.k[nt],"s")?data.k[nt].s:data.k[nt-1].e;for(st=lt.length,it=0;it<st;it+=1)rt[it]=lt[it],rt.value[it]=lt[it];return rt}function framesToTime(nt,rt){return rt||(rt=elem.comp.globalData.frameRate),nt/rt}function timeToFrames(nt,rt){return!nt&&nt!==0&&(nt=time),rt||(rt=elem.comp.globalData.frameRate),nt*rt}function seedRandom(nt){BMMath.seedrandom(randSeed+nt)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(nt,rt){return typeof value=="string"?rt===void 0?value.substring(nt):value.substring(nt,rt):""}function substr(nt,rt){return typeof value=="string"?rt===void 0?value.substr(nt):value.substr(nt,rt):""}function posterizeTime(nt){time=nt===0?0:Math.floor(time*nt)/nt,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(nt){return value=nt,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var nt={};nt.initExpressions=rt,nt.resetFrame=ExpressionManager.resetFrame;function rt(it){var st=0,lt=[];function ct(){st+=1}function ut(){st-=1,st===0&&ht()}function dt(pt){lt.indexOf(pt)===-1&&lt.push(pt)}function ht(){var pt,ft=lt.length;for(pt=0;pt<ft;pt+=1)lt[pt].release();lt.length=0}it.renderer.compInterface=CompExpressionInterface(it.renderer),it.renderer.globalData.projectInterface.registerComposition(it.renderer),it.renderer.globalData.pushExpression=ct,it.renderer.globalData.popExpression=ut,it.renderer.globalData.registerExpressionProperty=dt}return nt}(),MaskManagerInterface=function(){function nt(it,st){this._mask=it,this._data=st}Object.defineProperty(nt.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(nt.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var rt=function(st){var lt=createSizedArray(st.viewData.length),ct,ut=st.viewData.length;for(ct=0;ct<ut;ct+=1)lt[ct]=new nt(st.viewData[ct],st.masksProperties[ct]);var dt=function(pt){for(ct=0;ct<ut;){if(st.masksProperties[ct].nm===pt)return lt[ct];ct+=1}return null};return dt};return rt}(),ExpressionPropertyInterface=function(){var nt={pv:0,v:0,mult:1},rt={pv:[0,0,0],v:[0,0,0],mult:1};function it(ut,dt,ht){Object.defineProperty(ut,"velocity",{get:function(){return dt.getVelocityAtTime(dt.comp.currentFrame)}}),ut.numKeys=dt.keyframes?dt.keyframes.length:0,ut.key=function(pt){if(!ut.numKeys)return 0;var ft="";"s"in dt.keyframes[pt-1]?ft=dt.keyframes[pt-1].s:"e"in dt.keyframes[pt-2]?ft=dt.keyframes[pt-2].e:ft=dt.keyframes[pt-2].s;var mt=ht==="unidimensional"?new Number(ft):Object.assign({},ft);return mt.time=dt.keyframes[pt-1].t/dt.elem.comp.globalData.frameRate,mt.value=ht==="unidimensional"?ft[0]:ft,mt},ut.valueAtTime=dt.getValueAtTime,ut.speedAtTime=dt.getSpeedAtTime,ut.velocityAtTime=dt.getVelocityAtTime,ut.propertyGroup=dt.propertyGroup}function st(ut){(!ut||!("pv"in ut))&&(ut=nt);var dt=1/ut.mult,ht=ut.pv*dt,pt=new Number(ht);return pt.value=ht,it(pt,ut,"unidimensional"),function(){return ut.k&&ut.getValue(),ht=ut.v*dt,pt.value!==ht&&(pt=new Number(ht),pt.value=ht,it(pt,ut,"unidimensional")),pt}}function lt(ut){(!ut||!("pv"in ut))&&(ut=rt);var dt=1/ut.mult,ht=ut.data&&ut.data.l||ut.pv.length,pt=createTypedArray("float32",ht),ft=createTypedArray("float32",ht);return pt.value=ft,it(pt,ut,"multidimensional"),function(){ut.k&&ut.getValue();for(var mt=0;mt<ht;mt+=1)ft[mt]=ut.v[mt]*dt,pt[mt]=ft[mt];return pt}}function ct(){return nt}return function(ut){return ut?ut.propType==="unidimensional"?st(ut):lt(ut):ct}}(),TransformExpressionInterface=function(){return function(nt){function rt(ut){switch(ut){case"scale":case"Scale":case"ADBE Scale":case 6:return rt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return rt.rotation;case"ADBE Rotate X":return rt.xRotation;case"ADBE Rotate Y":return rt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return rt.position;case"ADBE Position_0":return rt.xPosition;case"ADBE Position_1":return rt.yPosition;case"ADBE Position_2":return rt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return rt.anchorPoint;case"opacity":case"Opacity":case 11:return rt.opacity;default:return null}}Object.defineProperty(rt,"rotation",{get:ExpressionPropertyInterface(nt.r||nt.rz)}),Object.defineProperty(rt,"zRotation",{get:ExpressionPropertyInterface(nt.rz||nt.r)}),Object.defineProperty(rt,"xRotation",{get:ExpressionPropertyInterface(nt.rx)}),Object.defineProperty(rt,"yRotation",{get:ExpressionPropertyInterface(nt.ry)}),Object.defineProperty(rt,"scale",{get:ExpressionPropertyInterface(nt.s)});var it,st,lt,ct;return nt.p?ct=ExpressionPropertyInterface(nt.p):(it=ExpressionPropertyInterface(nt.px),st=ExpressionPropertyInterface(nt.py),nt.pz&&(lt=ExpressionPropertyInterface(nt.pz))),Object.defineProperty(rt,"position",{get:function(){return nt.p?ct():[it(),st(),lt?lt():0]}}),Object.defineProperty(rt,"xPosition",{get:ExpressionPropertyInterface(nt.px)}),Object.defineProperty(rt,"yPosition",{get:ExpressionPropertyInterface(nt.py)}),Object.defineProperty(rt,"zPosition",{get:ExpressionPropertyInterface(nt.pz)}),Object.defineProperty(rt,"anchorPoint",{get:ExpressionPropertyInterface(nt.a)}),Object.defineProperty(rt,"opacity",{get:ExpressionPropertyInterface(nt.o)}),Object.defineProperty(rt,"skew",{get:ExpressionPropertyInterface(nt.sk)}),Object.defineProperty(rt,"skewAxis",{get:ExpressionPropertyInterface(nt.sa)}),Object.defineProperty(rt,"orientation",{get:ExpressionPropertyInterface(nt.or)}),rt}}(),LayerExpressionInterface=function(){function nt(pt){var ft=new Matrix;if(pt!==void 0){var mt=this._elem.finalTransform.mProp.getValueAtTime(pt);mt.clone(ft)}else{var gt=this._elem.finalTransform.mProp;gt.applyToMatrix(ft)}return ft}function rt(pt,ft){var mt=this.getMatrix(ft);return mt.props[12]=0,mt.props[13]=0,mt.props[14]=0,this.applyPoint(mt,pt)}function it(pt,ft){var mt=this.getMatrix(ft);return this.applyPoint(mt,pt)}function st(pt,ft){var mt=this.getMatrix(ft);return mt.props[12]=0,mt.props[13]=0,mt.props[14]=0,this.invertPoint(mt,pt)}function lt(pt,ft){var mt=this.getMatrix(ft);return this.invertPoint(mt,pt)}function ct(pt,ft){if(this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(pt)}return pt.applyToPointArray(ft[0],ft[1],ft[2]||0)}function ut(pt,ft){if(this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(pt)}return pt.inversePoint(ft)}function dt(pt){var ft=new Matrix;if(ft.reset(),this._elem.finalTransform.mProp.applyToMatrix(ft),this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(ft);return ft.inversePoint(pt)}return ft.inversePoint(pt)}function ht(){return[1,1,1,1]}return function(pt){var ft;function mt(vt){xt.mask=new MaskManagerInterface(vt,pt)}function gt(vt){xt.effect=vt}function xt(vt){switch(vt){case"ADBE Root Vectors Group":case"Contents":case 2:return xt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return ft;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return xt.effect;case"ADBE Text Properties":return xt.textInterface;default:return null}}xt.getMatrix=nt,xt.invertPoint=ut,xt.applyPoint=ct,xt.toWorld=it,xt.toWorldVec=rt,xt.fromWorld=lt,xt.fromWorldVec=st,xt.toComp=it,xt.fromComp=dt,xt.sampleImage=ht,xt.sourceRectAtTime=pt.sourceRectAtTime.bind(pt),xt._elem=pt,ft=TransformExpressionInterface(pt.finalTransform.mProp);var yt=getDescriptor(ft,"anchorPoint");return Object.defineProperties(xt,{hasParent:{get:function(){return pt.hierarchy.length}},parent:{get:function(){return pt.hierarchy[0].layerInterface}},rotation:getDescriptor(ft,"rotation"),scale:getDescriptor(ft,"scale"),position:getDescriptor(ft,"position"),opacity:getDescriptor(ft,"opacity"),anchorPoint:yt,anchor_point:yt,transform:{get:function(){return ft}},active:{get:function(){return pt.isInRange}}}),xt.startTime=pt.data.st,xt.index=pt.data.ind,xt.source=pt.data.refId,xt.height=pt.data.ty===0?pt.data.h:100,xt.width=pt.data.ty===0?pt.data.w:100,xt.inPoint=pt.data.ip/pt.comp.globalData.frameRate,xt.outPoint=pt.data.op/pt.comp.globalData.frameRate,xt._name=pt.data.nm,xt.registerMaskInterface=mt,xt.registerEffectsInterface=gt,xt}}(),propertyGroupFactory=function(){return function(nt,rt){return function(it){return it=it===void 0?1:it,it<=0?nt:rt(it-1)}}}(),PropertyInterface=function(){return function(nt,rt){var it={_name:nt};function st(lt){return lt=lt===void 0?1:lt,lt<=0?it:rt(lt-1)}return st}}(),EffectsExpressionInterface=function(){var nt={createEffectsInterface:rt};function rt(lt,ct){if(lt.effectsManager){var ut=[],dt=lt.data.ef,ht,pt=lt.effectsManager.effectElements.length;for(ht=0;ht<pt;ht+=1)ut.push(it(dt[ht],lt.effectsManager.effectElements[ht],ct,lt));var ft=lt.data.ef||[],mt=function(xt){for(ht=0,pt=ft.length;ht<pt;){if(xt===ft[ht].nm||xt===ft[ht].mn||xt===ft[ht].ix)return ut[ht];ht+=1}return null};return Object.defineProperty(mt,"numProperties",{get:function(){return ft.length}}),mt}return null}function it(lt,ct,ut,dt){function ht(xt){for(var yt=lt.ef,vt=0,St=yt.length;vt<St;){if(xt===yt[vt].nm||xt===yt[vt].mn||xt===yt[vt].ix)return yt[vt].ty===5?ft[vt]:ft[vt]();vt+=1}throw new Error}var pt=propertyGroupFactory(ht,ut),ft=[],mt,gt=lt.ef.length;for(mt=0;mt<gt;mt+=1)lt.ef[mt].ty===5?ft.push(it(lt.ef[mt],ct.effectElements[mt],ct.effectElements[mt].propertyGroup,dt)):ft.push(st(ct.effectElements[mt],lt.ef[mt].ty,dt,pt));return lt.mn==="ADBE Color Control"&&Object.defineProperty(ht,"color",{get:function(){return ft[0]()}}),Object.defineProperties(ht,{numProperties:{get:function(){return lt.np}},_name:{value:lt.nm},propertyGroup:{value:pt}}),ht.enabled=lt.en!==0,ht.active=ht.enabled,ht}function st(lt,ct,ut,dt){var ht=ExpressionPropertyInterface(lt.p);function pt(){return ct===10?ut.comp.compInterface(lt.p.v):ht()}return lt.p.setGroupProperty&&lt.p.setGroupProperty(PropertyInterface("",dt)),pt}return nt}(),ShapePathInterface=function(){return function(rt,it,st){var lt=it.sh;function ct(dt){return dt==="Shape"||dt==="shape"||dt==="Path"||dt==="path"||dt==="ADBE Vector Shape"||dt===2?ct.path:null}var ut=propertyGroupFactory(ct,st);return lt.setGroupProperty(PropertyInterface("Path",ut)),Object.defineProperties(ct,{path:{get:function(){return lt.k&&lt.getValue(),lt}},shape:{get:function(){return lt.k&&lt.getValue(),lt}},_name:{value:rt.nm},ix:{value:rt.ix},propertyIndex:{value:rt.ix},mn:{value:rt.mn},propertyGroup:{value:st}}),ct}}(),ShapeExpressionInterface=function(){function nt(yt,vt,St){var Et=[],wt,Rt=yt?yt.length:0;for(wt=0;wt<Rt;wt+=1)yt[wt].ty==="gr"?Et.push(it(yt[wt],vt[wt],St)):yt[wt].ty==="fl"?Et.push(st(yt[wt],vt[wt],St)):yt[wt].ty==="st"?Et.push(ut(yt[wt],vt[wt],St)):yt[wt].ty==="tm"?Et.push(dt(yt[wt],vt[wt],St)):yt[wt].ty==="tr"||(yt[wt].ty==="el"?Et.push(pt(yt[wt],vt[wt],St)):yt[wt].ty==="sr"?Et.push(ft(yt[wt],vt[wt],St)):yt[wt].ty==="sh"?Et.push(ShapePathInterface(yt[wt],vt[wt],St)):yt[wt].ty==="rc"?Et.push(mt(yt[wt],vt[wt],St)):yt[wt].ty==="rd"?Et.push(gt(yt[wt],vt[wt],St)):yt[wt].ty==="rp"?Et.push(xt(yt[wt],vt[wt],St)):yt[wt].ty==="gf"?Et.push(lt(yt[wt],vt[wt],St)):Et.push(ct(yt[wt],vt[wt])));return Et}function rt(yt,vt,St){var Et,wt=function(It){for(var At=0,Dt=Et.length;At<Dt;){if(Et[At]._name===It||Et[At].mn===It||Et[At].propertyIndex===It||Et[At].ix===It||Et[At].ind===It)return Et[At];At+=1}return typeof It=="number"?Et[It-1]:null};wt.propertyGroup=propertyGroupFactory(wt,St),Et=nt(yt.it,vt.it,wt.propertyGroup),wt.numProperties=Et.length;var Rt=ht(yt.it[yt.it.length-1],vt.it[vt.it.length-1],wt.propertyGroup);return wt.transform=Rt,wt.propertyIndex=yt.cix,wt._name=yt.nm,wt}function it(yt,vt,St){var Et=function(It){switch(It){case"ADBE Vectors Group":case"Contents":case 2:return Et.content;default:return Et.transform}};Et.propertyGroup=propertyGroupFactory(Et,St);var wt=rt(yt,vt,Et.propertyGroup),Rt=ht(yt.it[yt.it.length-1],vt.it[vt.it.length-1],Et.propertyGroup);return Et.content=wt,Et.transform=Rt,Object.defineProperty(Et,"_name",{get:function(){return yt.nm}}),Et.numProperties=yt.np,Et.propertyIndex=yt.ix,Et.nm=yt.nm,Et.mn=yt.mn,Et}function st(yt,vt,St){function Et(wt){return wt==="Color"||wt==="color"?Et.color:wt==="Opacity"||wt==="opacity"?Et.opacity:null}return Object.defineProperties(Et,{color:{get:ExpressionPropertyInterface(vt.c)},opacity:{get:ExpressionPropertyInterface(vt.o)},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.c.setGroupProperty(PropertyInterface("Color",St)),vt.o.setGroupProperty(PropertyInterface("Opacity",St)),Et}function lt(yt,vt,St){function Et(wt){return wt==="Start Point"||wt==="start point"?Et.startPoint:wt==="End Point"||wt==="end point"?Et.endPoint:wt==="Opacity"||wt==="opacity"?Et.opacity:null}return Object.defineProperties(Et,{startPoint:{get:ExpressionPropertyInterface(vt.s)},endPoint:{get:ExpressionPropertyInterface(vt.e)},opacity:{get:ExpressionPropertyInterface(vt.o)},type:{get:function(){return"a"}},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.s.setGroupProperty(PropertyInterface("Start Point",St)),vt.e.setGroupProperty(PropertyInterface("End Point",St)),vt.o.setGroupProperty(PropertyInterface("Opacity",St)),Et}function ct(){function yt(){return null}return yt}function ut(yt,vt,St){var Et=propertyGroupFactory(Dt,St),wt=propertyGroupFactory(At,Et);function Rt(jt){Object.defineProperty(At,yt.d[jt].nm,{get:ExpressionPropertyInterface(vt.d.dataProps[jt].p)})}var Tt,It=yt.d?yt.d.length:0,At={};for(Tt=0;Tt<It;Tt+=1)Rt(Tt),vt.d.dataProps[Tt].p.setGroupProperty(wt);function Dt(jt){return jt==="Color"||jt==="color"?Dt.color:jt==="Opacity"||jt==="opacity"?Dt.opacity:jt==="Stroke Width"||jt==="stroke width"?Dt.strokeWidth:null}return Object.defineProperties(Dt,{color:{get:ExpressionPropertyInterface(vt.c)},opacity:{get:ExpressionPropertyInterface(vt.o)},strokeWidth:{get:ExpressionPropertyInterface(vt.w)},dash:{get:function(){return At}},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.c.setGroupProperty(PropertyInterface("Color",Et)),vt.o.setGroupProperty(PropertyInterface("Opacity",Et)),vt.w.setGroupProperty(PropertyInterface("Stroke Width",Et)),Dt}function dt(yt,vt,St){function Et(Rt){return Rt===yt.e.ix||Rt==="End"||Rt==="end"?Et.end:Rt===yt.s.ix?Et.start:Rt===yt.o.ix?Et.offset:null}var wt=propertyGroupFactory(Et,St);return Et.propertyIndex=yt.ix,vt.s.setGroupProperty(PropertyInterface("Start",wt)),vt.e.setGroupProperty(PropertyInterface("End",wt)),vt.o.setGroupProperty(PropertyInterface("Offset",wt)),Et.propertyIndex=yt.ix,Et.propertyGroup=St,Object.defineProperties(Et,{start:{get:ExpressionPropertyInterface(vt.s)},end:{get:ExpressionPropertyInterface(vt.e)},offset:{get:ExpressionPropertyInterface(vt.o)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}function ht(yt,vt,St){function Et(Rt){return yt.a.ix===Rt||Rt==="Anchor Point"?Et.anchorPoint:yt.o.ix===Rt||Rt==="Opacity"?Et.opacity:yt.p.ix===Rt||Rt==="Position"?Et.position:yt.r.ix===Rt||Rt==="Rotation"||Rt==="ADBE Vector Rotation"?Et.rotation:yt.s.ix===Rt||Rt==="Scale"?Et.scale:yt.sk&&yt.sk.ix===Rt||Rt==="Skew"?Et.skew:yt.sa&&yt.sa.ix===Rt||Rt==="Skew Axis"?Et.skewAxis:null}var wt=propertyGroupFactory(Et,St);return vt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",wt)),vt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",wt)),vt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",wt)),vt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",wt)),vt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",wt)),vt.transform.mProps.sk&&(vt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",wt)),vt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",wt))),vt.transform.op.setGroupProperty(PropertyInterface("Opacity",wt)),Object.defineProperties(Et,{opacity:{get:ExpressionPropertyInterface(vt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(vt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(vt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(vt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(vt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(vt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(vt.transform.mProps.sa)},_name:{value:yt.nm}}),Et.ty="tr",Et.mn=yt.mn,Et.propertyGroup=St,Et}function pt(yt,vt,St){function Et(Tt){return yt.p.ix===Tt?Et.position:yt.s.ix===Tt?Et.size:null}var wt=propertyGroupFactory(Et,St);Et.propertyIndex=yt.ix;var Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return Rt.s.setGroupProperty(PropertyInterface("Size",wt)),Rt.p.setGroupProperty(PropertyInterface("Position",wt)),Object.defineProperties(Et,{size:{get:ExpressionPropertyInterface(Rt.s)},position:{get:ExpressionPropertyInterface(Rt.p)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}function ft(yt,vt,St){function Et(Tt){return yt.p.ix===Tt?Et.position:yt.r.ix===Tt?Et.rotation:yt.pt.ix===Tt?Et.points:yt.or.ix===Tt||Tt==="ADBE Vector Star Outer Radius"?Et.outerRadius:yt.os.ix===Tt?Et.outerRoundness:yt.ir&&(yt.ir.ix===Tt||Tt==="ADBE Vector Star Inner Radius")?Et.innerRadius:yt.is&&yt.is.ix===Tt?Et.innerRoundness:null}var wt=propertyGroupFactory(Et,St),Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return Et.propertyIndex=yt.ix,Rt.or.setGroupProperty(PropertyInterface("Outer Radius",wt)),Rt.os.setGroupProperty(PropertyInterface("Outer Roundness",wt)),Rt.pt.setGroupProperty(PropertyInterface("Points",wt)),Rt.p.setGroupProperty(PropertyInterface("Position",wt)),Rt.r.setGroupProperty(PropertyInterface("Rotation",wt)),yt.ir&&(Rt.ir.setGroupProperty(PropertyInterface("Inner Radius",wt)),Rt.is.setGroupProperty(PropertyInterface("Inner Roundness",wt))),Object.defineProperties(Et,{position:{get:ExpressionPropertyInterface(Rt.p)},rotation:{get:ExpressionPropertyInterface(Rt.r)},points:{get:ExpressionPropertyInterface(Rt.pt)},outerRadius:{get:ExpressionPropertyInterface(Rt.or)},outerRoundness:{get:ExpressionPropertyInterface(Rt.os)},innerRadius:{get:ExpressionPropertyInterface(Rt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Rt.is)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}function mt(yt,vt,St){function Et(Tt){return yt.p.ix===Tt?Et.position:yt.r.ix===Tt?Et.roundness:yt.s.ix===Tt||Tt==="Size"||Tt==="ADBE Vector Rect Size"?Et.size:null}var wt=propertyGroupFactory(Et,St),Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return Et.propertyIndex=yt.ix,Rt.p.setGroupProperty(PropertyInterface("Position",wt)),Rt.s.setGroupProperty(PropertyInterface("Size",wt)),Rt.r.setGroupProperty(PropertyInterface("Rotation",wt)),Object.defineProperties(Et,{position:{get:ExpressionPropertyInterface(Rt.p)},roundness:{get:ExpressionPropertyInterface(Rt.r)},size:{get:ExpressionPropertyInterface(Rt.s)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}function gt(yt,vt,St){function Et(Tt){return yt.r.ix===Tt||Tt==="Round Corners 1"?Et.radius:null}var wt=propertyGroupFactory(Et,St),Rt=vt;return Et.propertyIndex=yt.ix,Rt.rd.setGroupProperty(PropertyInterface("Radius",wt)),Object.defineProperties(Et,{radius:{get:ExpressionPropertyInterface(Rt.rd)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}function xt(yt,vt,St){function Et(Tt){return yt.c.ix===Tt||Tt==="Copies"?Et.copies:yt.o.ix===Tt||Tt==="Offset"?Et.offset:null}var wt=propertyGroupFactory(Et,St),Rt=vt;return Et.propertyIndex=yt.ix,Rt.c.setGroupProperty(PropertyInterface("Copies",wt)),Rt.o.setGroupProperty(PropertyInterface("Offset",wt)),Object.defineProperties(Et,{copies:{get:ExpressionPropertyInterface(Rt.c)},offset:{get:ExpressionPropertyInterface(Rt.o)},_name:{value:yt.nm}}),Et.mn=yt.mn,Et}return function(yt,vt,St){var Et;function wt(Tt){if(typeof Tt=="number")return Tt=Tt===void 0?1:Tt,Tt===0?St:Et[Tt-1];for(var It=0,At=Et.length;It<At;){if(Et[It]._name===Tt)return Et[It];It+=1}return null}function Rt(){return St}return wt.propertyGroup=propertyGroupFactory(wt,Rt),Et=nt(yt,vt,wt.propertyGroup),wt.numProperties=Et.length,wt._name="Contents",wt}}(),TextExpressionInterface=function(){return function(nt){var rt;function it(st){switch(st){case"ADBE Text Document":return it.sourceText;default:return null}}return Object.defineProperty(it,"sourceText",{get:function(){nt.textProperty.getValue();var lt=nt.textProperty.currentData.t;return(!rt||lt!==rt.value)&&(rt=new String(lt),rt.value=lt||new String(lt),Object.defineProperty(rt,"style",{get:function(){return{fillColor:nt.textProperty.currentData.fc}}})),rt}}),it}}();function _typeof(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(it){return typeof it}:_typeof=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof(nt)}var FootageInterface=function(){var nt=function(st){var lt="",ct=st.getFootageData();function ut(){return lt="",ct=st.getFootageData(),dt}function dt(ht){if(ct[ht])return lt=ht,ct=ct[ht],_typeof(ct)==="object"?dt:ct;var pt=ht.indexOf(lt);if(pt!==-1){var ft=parseInt(ht.substr(pt+lt.length),10);return ct=ct[ft],_typeof(ct)==="object"?dt:ct}return""}return ut},rt=function(st){function lt(ct){return ct==="Outline"?lt.outlineInterface():null}return lt._name="Outline",lt.outlineInterface=nt(st),lt};return function(it){function st(lt){return lt==="Data"?st.dataInterface:null}return st._name="Data",st.dataInterface=rt(it),st}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(nt){return interfaces[nt]||null}var expressionHelpers=function(){function nt(ut,dt,ht){dt.x&&(ht.k=!0,ht.x=!0,ht.initiateExpression=ExpressionManager.initiateExpression,ht.effectsSequence.push(ht.initiateExpression(ut,dt,ht).bind(ht)))}function rt(ut){return ut*=this.elem.globalData.frameRate,ut-=this.offsetTime,ut!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<ut?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(ut,this._cachingAtTime),this._cachingAtTime.lastFrame=ut),this._cachingAtTime.value}function it(ut){var dt=-.01,ht=this.getValueAtTime(ut),pt=this.getValueAtTime(ut+dt),ft=0;if(ht.length){var mt;for(mt=0;mt<ht.length;mt+=1)ft+=Math.pow(pt[mt]-ht[mt],2);ft=Math.sqrt(ft)*100}else ft=0;return ft}function st(ut){if(this.vel!==void 0)return this.vel;var dt=-.001,ht=this.getValueAtTime(ut),pt=this.getValueAtTime(ut+dt),ft;if(ht.length){ft=createTypedArray("float32",ht.length);var mt;for(mt=0;mt<ht.length;mt+=1)ft[mt]=(pt[mt]-ht[mt])/dt}else ft=(pt-ht)/dt;return ft}function lt(){return this.pv}function ct(ut){this.propertyGroup=ut}return{searchExpressions:nt,getSpeedAtTime:it,getVelocityAtTime:st,getValueAtTime:rt,getStaticValueAtTime:lt,setGroupProperty:ct}}();function addPropertyDecorator(){function nt(gt,xt,yt){if(!this.k||!this.keyframes)return this.pv;gt=gt?gt.toLowerCase():"";var vt=this.comp.renderedFrame,St=this.keyframes,Et=St[St.length-1].t;if(vt<=Et)return this.pv;var wt,Rt;yt?(xt?wt=Math.abs(Et-this.elem.comp.globalData.frameRate*xt):wt=Math.max(0,Et-this.elem.data.ip),Rt=Et-wt):((!xt||xt>St.length-1)&&(xt=St.length-1),Rt=St[St.length-1-xt].t,wt=Et-Rt);var Tt,It,At;if(gt==="pingpong"){var Dt=Math.floor((vt-Rt)/wt);if(Dt%2!==0)return this.getValueAtTime((wt-(vt-Rt)%wt+Rt)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var jt=this.getValueAtTime(Rt/this.comp.globalData.frameRate,0),Ft=this.getValueAtTime(Et/this.comp.globalData.frameRate,0),Lt=this.getValueAtTime(((vt-Rt)%wt+Rt)/this.comp.globalData.frameRate,0),Pt=Math.floor((vt-Rt)/wt);if(this.pv.length){for(At=new Array(jt.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=(Ft[Tt]-jt[Tt])*Pt+Lt[Tt];return At}return(Ft-jt)*Pt+Lt}else if(gt==="continue"){var Ot=this.getValueAtTime(Et/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime((Et-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(At=new Array(Ot.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Ot[Tt]+(Ot[Tt]-Nt[Tt])*((vt-Et)/this.comp.globalData.frameRate)/5e-4;return At}return Ot+(Ot-Nt)*((vt-Et)/.001)}return this.getValueAtTime(((vt-Rt)%wt+Rt)/this.comp.globalData.frameRate,0)}function rt(gt,xt,yt){if(!this.k)return this.pv;gt=gt?gt.toLowerCase():"";var vt=this.comp.renderedFrame,St=this.keyframes,Et=St[0].t;if(vt>=Et)return this.pv;var wt,Rt;yt?(xt?wt=Math.abs(this.elem.comp.globalData.frameRate*xt):wt=Math.max(0,this.elem.data.op-Et),Rt=Et+wt):((!xt||xt>St.length-1)&&(xt=St.length-1),Rt=St[xt].t,wt=Rt-Et);var Tt,It,At;if(gt==="pingpong"){var Dt=Math.floor((Et-vt)/wt);if(Dt%2===0)return this.getValueAtTime(((Et-vt)%wt+Et)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var jt=this.getValueAtTime(Et/this.comp.globalData.frameRate,0),Ft=this.getValueAtTime(Rt/this.comp.globalData.frameRate,0),Lt=this.getValueAtTime((wt-(Et-vt)%wt+Et)/this.comp.globalData.frameRate,0),Pt=Math.floor((Et-vt)/wt)+1;if(this.pv.length){for(At=new Array(jt.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Lt[Tt]-(Ft[Tt]-jt[Tt])*Pt;return At}return Lt-(Ft-jt)*Pt}else if(gt==="continue"){var Ot=this.getValueAtTime(Et/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime((Et+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(At=new Array(Ot.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Ot[Tt]+(Ot[Tt]-Nt[Tt])*(Et-vt)/.001;return At}return Ot+(Ot-Nt)*(Et-vt)/.001}return this.getValueAtTime((wt-((Et-vt)%wt+Et))/this.comp.globalData.frameRate,0)}function it(gt,xt){if(!this.k)return this.pv;if(gt=(gt||.4)*.5,xt=Math.floor(xt||5),xt<=1)return this.pv;var yt=this.comp.renderedFrame/this.comp.globalData.frameRate,vt=yt-gt,St=yt+gt,Et=xt>1?(St-vt)/(xt-1):1,wt=0,Rt=0,Tt;this.pv.length?Tt=createTypedArray("float32",this.pv.length):Tt=0;for(var It;wt<xt;){if(It=this.getValueAtTime(vt+wt*Et),this.pv.length)for(Rt=0;Rt<this.pv.length;Rt+=1)Tt[Rt]+=It[Rt];else Tt+=It;wt+=1}if(this.pv.length)for(Rt=0;Rt<this.pv.length;Rt+=1)Tt[Rt]/=xt;else Tt/=xt;return Tt}function st(gt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var xt=this._transformCachingAtTime.v;if(xt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var yt=this.a.getValueAtTime(gt);xt.translate(-yt[0]*this.a.mult,-yt[1]*this.a.mult,yt[2]*this.a.mult)}if(this.appliedTransformations<2){var vt=this.s.getValueAtTime(gt);xt.scale(vt[0]*this.s.mult,vt[1]*this.s.mult,vt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var St=this.sk.getValueAtTime(gt),Et=this.sa.getValueAtTime(gt);xt.skewFromAxis(-St*this.sk.mult,Et*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var wt=this.r.getValueAtTime(gt);xt.rotate(-wt*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Rt=this.rz.getValueAtTime(gt),Tt=this.ry.getValueAtTime(gt),It=this.rx.getValueAtTime(gt),At=this.or.getValueAtTime(gt);xt.rotateZ(-Rt*this.rz.mult).rotateY(Tt*this.ry.mult).rotateX(It*this.rx.mult).rotateZ(-At[2]*this.or.mult).rotateY(At[1]*this.or.mult).rotateX(At[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Dt=this.px.getValueAtTime(gt),jt=this.py.getValueAtTime(gt);if(this.data.p.z){var Ft=this.pz.getValueAtTime(gt);xt.translate(Dt*this.px.mult,jt*this.py.mult,-Ft*this.pz.mult)}else xt.translate(Dt*this.px.mult,jt*this.py.mult,0)}else{var Lt=this.p.getValueAtTime(gt);xt.translate(Lt[0]*this.p.mult,Lt[1]*this.p.mult,-Lt[2]*this.p.mult)}return xt}function lt(){return this.v.clone(new Matrix)}var ct=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(gt,xt,yt){var vt=ct(gt,xt,yt);return vt.dynamicProperties.length?vt.getValueAtTime=st.bind(vt):vt.getValueAtTime=lt.bind(vt),vt.setGroupProperty=expressionHelpers.setGroupProperty,vt};var ut=PropertyFactory.getProp;PropertyFactory.getProp=function(gt,xt,yt,vt,St){var Et=ut(gt,xt,yt,vt,St);Et.kf?Et.getValueAtTime=expressionHelpers.getValueAtTime.bind(Et):Et.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Et),Et.setGroupProperty=expressionHelpers.setGroupProperty,Et.loopOut=nt,Et.loopIn=rt,Et.smooth=it,Et.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Et),Et.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Et),Et.numKeys=xt.a===1?xt.k.length:0,Et.propertyIndex=xt.ix;var wt=0;return yt!==0&&(wt=createTypedArray("float32",xt.a===1?xt.k[0].s.length:xt.k.length)),Et._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:wt},expressionHelpers.searchExpressions(gt,xt,Et),Et.k&&St.addDynamicProperty(Et),Et};function dt(gt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),gt*=this.elem.globalData.frameRate,gt-=this.offsetTime,gt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<gt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=gt,this.interpolateShape(gt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ht=ShapePropertyFactory.getConstructorFunction(),pt=ShapePropertyFactory.getKeyframedConstructorFunction();function ft(){}ft.prototype={vertices:function(xt,yt){this.k&&this.getValue();var vt=this.v;yt!==void 0&&(vt=this.getValueAtTime(yt,0));var St,Et=vt._length,wt=vt[xt],Rt=vt.v,Tt=createSizedArray(Et);for(St=0;St<Et;St+=1)xt==="i"||xt==="o"?Tt[St]=[wt[St][0]-Rt[St][0],wt[St][1]-Rt[St][1]]:Tt[St]=[wt[St][0],wt[St][1]];return Tt},points:function(xt){return this.vertices("v",xt)},inTangents:function(xt){return this.vertices("i",xt)},outTangents:function(xt){return this.vertices("o",xt)},isClosed:function(){return this.v.c},pointOnPath:function(xt,yt){var vt=this.v;yt!==void 0&&(vt=this.getValueAtTime(yt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(vt));for(var St=this._segmentsLength,Et=St.lengths,wt=St.totalLength*xt,Rt=0,Tt=Et.length,It=0,At;Rt<Tt;){if(It+Et[Rt].addedLength>wt){var Dt=Rt,jt=vt.c&&Rt===Tt-1?0:Rt+1,Ft=(wt-It)/Et[Rt].addedLength;At=bez.getPointInSegment(vt.v[Dt],vt.v[jt],vt.o[Dt],vt.i[jt],Ft,Et[Rt]);break}else It+=Et[Rt].addedLength;Rt+=1}return At||(At=vt.c?[vt.v[0][0],vt.v[0][1]]:[vt.v[vt._length-1][0],vt.v[vt._length-1][1]]),At},vectorOnPath:function(xt,yt,vt){xt==1?xt=this.v.c:xt==0&&(xt=.999);var St=this.pointOnPath(xt,yt),Et=this.pointOnPath(xt+.001,yt),wt=Et[0]-St[0],Rt=Et[1]-St[1],Tt=Math.sqrt(Math.pow(wt,2)+Math.pow(Rt,2));if(Tt===0)return[0,0];var It=vt==="tangent"?[wt/Tt,Rt/Tt]:[-Rt/Tt,wt/Tt];return It},tangentOnPath:function(xt,yt){return this.vectorOnPath(xt,yt,"tangent")},normalOnPath:function(xt,yt){return this.vectorOnPath(xt,yt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([ft],ht),extendPrototype([ft],pt),pt.prototype.getValueAtTime=dt,pt.prototype.initiateExpression=ExpressionManager.initiateExpression;var mt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(gt,xt,yt,vt,St){var Et=mt(gt,xt,yt,vt,St);return Et.propertyIndex=xt.ix,Et.lock=!1,yt===3?expressionHelpers.searchExpressions(gt,xt.pt,Et):yt===4&&expressionHelpers.searchExpressions(gt,xt.ks,Et),Et.k&&gt.addDynamicProperty(Et),Et}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function nt(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(rt,it){var st=this.calculateExpression(it);if(rt.t!==st){var lt={};return this.copyData(lt,rt),lt.t=st.toString(),lt.__complete=!1,lt}return rt},TextProperty.prototype.searchProperty=function(){var rt=this.searchKeyframes(),it=this.searchExpressions();return this.kf=rt||it,this.kf},TextProperty.prototype.searchExpressions=nt}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function nt(rt,it){var st=createNS("feMerge");st.setAttribute("result",rt);var lt,ct;for(ct=0;ct<it.length;ct+=1)lt=createNS("feMergeNode"),lt.setAttribute("in",it[ct]),st.appendChild(lt),st.appendChild(lt);return st}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(nt,rt,it,st,lt){this.filterManager=rt;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ct,ct.setAttribute("result",st+"_tint_1"),nt.appendChild(ct),ct=createNS("feColorMatrix"),ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",st+"_tint_2"),nt.appendChild(ct),this.matrixFilter=ct;var ut=this.createMergeNode(st,[lt,st+"_tint_1",st+"_tint_2"]);nt.appendChild(ut)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[0].p.v,it=this.filterManager.effectElements[1].p.v,st=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+st+" 0"),this.matrixFilter.setAttribute("values",it[0]-rt[0]+" 0 0 0 "+rt[0]+" "+(it[1]-rt[1])+" 0 0 0 "+rt[1]+" "+(it[2]-rt[2])+" 0 0 0 "+rt[2]+" 0 0 0 1 0")}};function SVGFillFilter(nt,rt,it,st){this.filterManager=rt;var lt=createNS("feColorMatrix");lt.setAttribute("type","matrix"),lt.setAttribute("color-interpolation-filters","sRGB"),lt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),lt.setAttribute("result",st),nt.appendChild(lt),this.matrixFilter=lt}SVGFillFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[2].p.v,it=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+rt[0]+" 0 0 0 0 "+rt[1]+" 0 0 0 0 "+rt[2]+" 0 0 0 "+it+" 0")}};function SVGStrokeEffect(nt,rt,it){this.initialized=!1,this.filterManager=rt,this.elem=it,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var nt=this.elem.layerElement.children||this.elem.layerElement.childNodes,rt,it,st,lt;for(this.filterManager.effectElements[1].p.v===1?(lt=this.elem.maskManager.masksProperties.length,st=0):(st=this.filterManager.effectElements[0].p.v-1,lt=st+1),it=createNS("g"),it.setAttribute("fill","none"),it.setAttribute("stroke-linecap","round"),it.setAttribute("stroke-dashoffset",1),st;st<lt;st+=1)rt=createNS("path"),it.appendChild(rt),this.paths.push({p:rt,m:st});if(this.filterManager.effectElements[10].p.v===3){var ct=createNS("mask"),ut=createElementID();ct.setAttribute("id",ut),ct.setAttribute("mask-type","alpha"),ct.appendChild(it),this.elem.globalData.defs.appendChild(ct);var dt=createNS("g");for(dt.setAttribute("mask","url("+getLocationHref()+"#"+ut+")");nt[0];)dt.appendChild(nt[0]);this.elem.layerElement.appendChild(dt),this.masker=ct,it.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(nt=this.elem.layerElement.children||this.elem.layerElement.childNodes;nt.length;)this.elem.layerElement.removeChild(nt[0]);this.elem.layerElement.appendChild(it),this.elem.layerElement.removeAttribute("mask"),it.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=it},SVGStrokeEffect.prototype.renderFrame=function(nt){this.initialized||this.initialize();var rt,it=this.paths.length,st,lt;for(rt=0;rt<it;rt+=1)if(this.paths[rt].m!==-1&&(st=this.elem.maskManager.viewData[this.paths[rt].m],lt=this.paths[rt].p,(nt||this.filterManager._mdf||st.prop._mdf)&&lt.setAttribute("d",st.lastPath),nt||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||st.prop._mdf)){var ct;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var ut=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,dt=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ht=lt.getTotalLength();ct="0 0 0 "+ht*ut+" ";var pt=ht*(dt-ut),ft=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,mt=Math.floor(pt/ft),gt;for(gt=0;gt<mt;gt+=1)ct+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ct+="0 "+ht*10+" 0 0"}else ct="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;lt.setAttribute("stroke-dasharray",ct)}if((nt||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(nt||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(nt||this.filterManager.effectElements[3].p._mdf)){var xt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(xt[0]*255)+","+bmFloor(xt[1]*255)+","+bmFloor(xt[2]*255)+")")}};function SVGTritoneFilter(nt,rt,it,st){this.filterManager=rt;var lt=createNS("feColorMatrix");lt.setAttribute("type","matrix"),lt.setAttribute("color-interpolation-filters","linearRGB"),lt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),nt.appendChild(lt);var ct=createNS("feComponentTransfer");ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",st),this.matrixFilter=ct;var ut=createNS("feFuncR");ut.setAttribute("type","table"),ct.appendChild(ut),this.feFuncR=ut;var dt=createNS("feFuncG");dt.setAttribute("type","table"),ct.appendChild(dt),this.feFuncG=dt;var ht=createNS("feFuncB");ht.setAttribute("type","table"),ct.appendChild(ht),this.feFuncB=ht,nt.appendChild(ct)}SVGTritoneFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[0].p.v,it=this.filterManager.effectElements[1].p.v,st=this.filterManager.effectElements[2].p.v,lt=st[0]+" "+it[0]+" "+rt[0],ct=st[1]+" "+it[1]+" "+rt[1],ut=st[2]+" "+it[2]+" "+rt[2];this.feFuncR.setAttribute("tableValues",lt),this.feFuncG.setAttribute("tableValues",ct),this.feFuncB.setAttribute("tableValues",ut)}};function SVGProLevelsFilter(nt,rt,it,st){this.filterManager=rt;var lt=this.filterManager.effectElements,ct=createNS("feComponentTransfer");(lt[10].p.k||lt[10].p.v!==0||lt[11].p.k||lt[11].p.v!==1||lt[12].p.k||lt[12].p.v!==1||lt[13].p.k||lt[13].p.v!==0||lt[14].p.k||lt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ct)),(lt[17].p.k||lt[17].p.v!==0||lt[18].p.k||lt[18].p.v!==1||lt[19].p.k||lt[19].p.v!==1||lt[20].p.k||lt[20].p.v!==0||lt[21].p.k||lt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ct)),(lt[24].p.k||lt[24].p.v!==0||lt[25].p.k||lt[25].p.v!==1||lt[26].p.k||lt[26].p.v!==1||lt[27].p.k||lt[27].p.v!==0||lt[28].p.k||lt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ct)),(lt[31].p.k||lt[31].p.v!==0||lt[32].p.k||lt[32].p.v!==1||lt[33].p.k||lt[33].p.v!==1||lt[34].p.k||lt[34].p.v!==0||lt[35].p.k||lt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ct)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ct.setAttribute("color-interpolation-filters","sRGB"),nt.appendChild(ct)),(lt[3].p.k||lt[3].p.v!==0||lt[4].p.k||lt[4].p.v!==1||lt[5].p.k||lt[5].p.v!==1||lt[6].p.k||lt[6].p.v!==0||lt[7].p.k||lt[7].p.v!==1)&&(ct=createNS("feComponentTransfer"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",st),nt.appendChild(ct),this.feFuncRComposed=this.createFeFunc("feFuncR",ct),this.feFuncGComposed=this.createFeFunc("feFuncG",ct),this.feFuncBComposed=this.createFeFunc("feFuncB",ct))}SVGProLevelsFilter.prototype.createFeFunc=function(nt,rt){var it=createNS(nt);return it.setAttribute("type","table"),rt.appendChild(it),it},SVGProLevelsFilter.prototype.getTableValue=function(nt,rt,it,st,lt){for(var ct=0,ut=256,dt,ht=Math.min(nt,rt),pt=Math.max(nt,rt),ft=Array.call(null,{length:ut}),mt,gt=0,xt=lt-st,yt=rt-nt;ct<=256;)dt=ct/256,dt<=ht?mt=yt<0?lt:st:dt>=pt?mt=yt<0?st:lt:mt=st+xt*Math.pow((dt-nt)/yt,1/it),ft[gt]=mt,gt+=1,ct+=256/(ut-1);return ft.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt,it=this.filterManager.effectElements;this.feFuncRComposed&&(nt||it[3].p._mdf||it[4].p._mdf||it[5].p._mdf||it[6].p._mdf||it[7].p._mdf)&&(rt=this.getTableValue(it[3].p.v,it[4].p.v,it[5].p.v,it[6].p.v,it[7].p.v),this.feFuncRComposed.setAttribute("tableValues",rt),this.feFuncGComposed.setAttribute("tableValues",rt),this.feFuncBComposed.setAttribute("tableValues",rt)),this.feFuncR&&(nt||it[10].p._mdf||it[11].p._mdf||it[12].p._mdf||it[13].p._mdf||it[14].p._mdf)&&(rt=this.getTableValue(it[10].p.v,it[11].p.v,it[12].p.v,it[13].p.v,it[14].p.v),this.feFuncR.setAttribute("tableValues",rt)),this.feFuncG&&(nt||it[17].p._mdf||it[18].p._mdf||it[19].p._mdf||it[20].p._mdf||it[21].p._mdf)&&(rt=this.getTableValue(it[17].p.v,it[18].p.v,it[19].p.v,it[20].p.v,it[21].p.v),this.feFuncG.setAttribute("tableValues",rt)),this.feFuncB&&(nt||it[24].p._mdf||it[25].p._mdf||it[26].p._mdf||it[27].p._mdf||it[28].p._mdf)&&(rt=this.getTableValue(it[24].p.v,it[25].p.v,it[26].p.v,it[27].p.v,it[28].p.v),this.feFuncB.setAttribute("tableValues",rt)),this.feFuncA&&(nt||it[31].p._mdf||it[32].p._mdf||it[33].p._mdf||it[34].p._mdf||it[35].p._mdf)&&(rt=this.getTableValue(it[31].p.v,it[32].p.v,it[33].p.v,it[34].p.v,it[35].p.v),this.feFuncA.setAttribute("tableValues",rt))}};function SVGDropShadowEffect(nt,rt,it,st,lt){var ct=rt.container.globalData.renderConfig.filterSize,ut=rt.data.fs||ct;nt.setAttribute("x",ut.x||ct.x),nt.setAttribute("y",ut.y||ct.y),nt.setAttribute("width",ut.width||ct.width),nt.setAttribute("height",ut.height||ct.height),this.filterManager=rt;var dt=createNS("feGaussianBlur");dt.setAttribute("in","SourceAlpha"),dt.setAttribute("result",st+"_drop_shadow_1"),dt.setAttribute("stdDeviation","0"),this.feGaussianBlur=dt,nt.appendChild(dt);var ht=createNS("feOffset");ht.setAttribute("dx","25"),ht.setAttribute("dy","0"),ht.setAttribute("in",st+"_drop_shadow_1"),ht.setAttribute("result",st+"_drop_shadow_2"),this.feOffset=ht,nt.appendChild(ht);var pt=createNS("feFlood");pt.setAttribute("flood-color","#00ff00"),pt.setAttribute("flood-opacity","1"),pt.setAttribute("result",st+"_drop_shadow_3"),this.feFlood=pt,nt.appendChild(pt);var ft=createNS("feComposite");ft.setAttribute("in",st+"_drop_shadow_3"),ft.setAttribute("in2",st+"_drop_shadow_2"),ft.setAttribute("operator","in"),ft.setAttribute("result",st+"_drop_shadow_4"),nt.appendChild(ft);var mt=this.createMergeNode(st,[st+"_drop_shadow_4",lt]);nt.appendChild(mt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){if((nt||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),nt||this.filterManager.effectElements[0].p._mdf){var rt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(rt[0]*255),Math.round(rt[1]*255),Math.round(rt[2]*255)))}if((nt||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),nt||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var it=this.filterManager.effectElements[3].p.v,st=(this.filterManager.effectElements[2].p.v-90)*degToRads,lt=it*Math.cos(st),ct=it*Math.sin(st);this.feOffset.setAttribute("dx",lt),this.feOffset.setAttribute("dy",ct)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(nt,rt,it){this.initialized=!1,this.filterManager=rt,this.filterElem=nt,this.elem=it,it.matteElement=createNS("g"),it.matteElement.appendChild(it.layerElement),it.matteElement.appendChild(it.transformedElement),it.baseElement=it.matteElement}SVGMatte3Effect.prototype.findSymbol=function(nt){for(var rt=0,it=_svgMatteSymbols.length;rt<it;){if(_svgMatteSymbols[rt]===nt)return _svgMatteSymbols[rt];rt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(nt,rt){var it=nt.layerElement.parentNode;if(it){for(var st=it.children,lt=0,ct=st.length;lt<ct&&st[lt]!==nt.layerElement;)lt+=1;var ut;lt<=ct-2&&(ut=st[lt+1]);var dt=createNS("use");dt.setAttribute("href","#"+rt),ut?it.insertBefore(dt,ut):it.appendChild(dt)}},SVGMatte3Effect.prototype.setElementAsMask=function(nt,rt){if(!this.findSymbol(rt)){var it=createElementID(),st=createNS("mask");st.setAttribute("id",rt.layerId),st.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(rt);var lt=nt.globalData.defs;lt.appendChild(st);var ct=createNS("symbol");ct.setAttribute("id",it),this.replaceInParent(rt,it),ct.appendChild(rt.layerElement),lt.appendChild(ct);var ut=createNS("use");ut.setAttribute("href","#"+it),st.appendChild(ut),rt.data.hd=!1,rt.show()}nt.setMatte(rt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var nt=this.filterManager.effectElements[0].p.v,rt=this.elem.comp.elements,it=0,st=rt.length;it<st;)rt[it]&&rt[it].data.ind===nt&&this.setElementAsMask(this.elem,rt[it]),it+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(nt,rt,it,st){nt.setAttribute("x","-100%"),nt.setAttribute("y","-100%"),nt.setAttribute("width","300%"),nt.setAttribute("height","300%"),this.filterManager=rt;var lt=createNS("feGaussianBlur");lt.setAttribute("result",st),nt.appendChild(lt),this.feGaussianBlur=lt}SVGGaussianBlurEffect.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=.3,it=this.filterManager.effectElements[0].p.v*rt,st=this.filterManager.effectElements[1].p.v,lt=st==3?0:it,ct=st==2?0:it;this.feGaussianBlur.setAttribute("stdDeviation",lt+" "+ct);var ut=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ut)}};function TransformEffect(){}TransformEffect.prototype.init=function(nt){this.effectsManager=nt,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(nt){if(this._opMdf=!1,this._mdf=!1,nt||this.effectsManager._mdf){var rt=this.effectsManager.effectElements,it=rt[0].p.v,st=rt[1].p.v,lt=rt[2].p.v===1,ct=rt[3].p.v,ut=lt?ct:rt[4].p.v,dt=rt[5].p.v,ht=rt[6].p.v,pt=rt[7].p.v;this.matrix.reset(),this.matrix.translate(-it[0],-it[1],it[2]),this.matrix.scale(ut*.01,ct*.01,1),this.matrix.rotate(-pt*degToRads),this.matrix.skewFromAxis(-dt*degToRads,(ht+90)*degToRads),this.matrix.translate(st[0],st[1],0),this._mdf=!0,this.opacity!==rt[8].p.v&&(this.opacity=rt[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(nt,rt){this.init(rt)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(nt){this.init(nt)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(nt,rt){var it=nt==null?null:typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(it!=null){var st,lt,ct,ut,dt=[],ht=!0,pt=!1;try{if(ct=(it=it.call(nt)).next,rt===0){if(Object(it)!==it)return;ht=!1}else for(;!(ht=(st=ct.call(it)).done)&&(dt.push(st.value),dt.length!==rt);ht=!0);}catch(ft){pt=!0,lt=ft}finally{try{if(!ht&&it.return!=null&&(ut=it.return(),Object(ut)!==ut))return}finally{if(pt)throw lt}}return dt}}function ownKeys(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(lt){return Object.getOwnPropertyDescriptor(nt,lt).enumerable})),it.push.apply(it,st)}return it}function _objectSpread2(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys(Object(it),!0).forEach(function(st){_defineProperty(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _defineProperty(nt,rt,it){return rt=_toPropertyKey(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _objectWithoutPropertiesLoose(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function _objectWithoutProperties(nt,rt){if(nt==null)return{};var it=_objectWithoutPropertiesLoose(nt,rt),st,lt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(nt);for(lt=0;lt<ct.length;lt++)st=ct[lt],!(rt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(it[st]=nt[st])}return it}function _slicedToArray(nt,rt){return _arrayWithHoles(nt)||_iterableToArrayLimit(nt,rt)||_unsupportedIterableToArray(nt,rt)||_nonIterableRest()}function _arrayWithHoles(nt){if(Array.isArray(nt))return nt}function _unsupportedIterableToArray(nt,rt){if(nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,st=new Array(rt);it<rt;it++)st[it]=nt[it];return st}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function _toPropertyKey(nt){var rt=_toPrimitive(nt,"string");return typeof rt=="symbol"?rt:String(rt)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function nt(rt,it){var st=rt.animationData,lt=rt.loop,ct=rt.autoplay,ut=rt.initialSegment,dt=rt.onComplete,ht=rt.onLoopComplete,pt=rt.onEnterFrame,ft=rt.onSegmentStart,mt=rt.onConfigReady,gt=rt.onDataReady,xt=rt.onDataFailed,yt=rt.onLoadedImages,vt=rt.onDOMLoaded,St=rt.onDestroy;rt.lottieRef,rt.renderer,rt.name,rt.assetsPath,rt.rendererSettings;var Et=_objectWithoutProperties(rt,_excluded$1),wt=reactExports.useState(!1),Rt=_slicedToArray(wt,2),Tt=Rt[0],It=Rt[1],At=reactExports.useRef(),Dt=reactExports.useRef(null),jt=function(){var Xt;(Xt=At.current)===null||Xt===void 0||Xt.play()},Ft=function(){var Xt;(Xt=At.current)===null||Xt===void 0||Xt.stop()},Lt=function(){var Xt;(Xt=At.current)===null||Xt===void 0||Xt.pause()},Pt=function(Xt){var or;(or=At.current)===null||or===void 0||or.setSpeed(Xt)},Ot=function(Xt,or){var tr;(tr=At.current)===null||tr===void 0||tr.goToAndPlay(Xt,or)},Nt=function(Xt,or){var tr;(tr=At.current)===null||tr===void 0||tr.goToAndStop(Xt,or)},$t=function(Xt){var or;(or=At.current)===null||or===void 0||or.setDirection(Xt)},Vt=function(Xt,or){var tr;(tr=At.current)===null||tr===void 0||tr.playSegments(Xt,or)},Ut=function(Xt){var or;(or=At.current)===null||or===void 0||or.setSubframe(Xt)},zt=function(Xt){var or;return(or=At.current)===null||or===void 0?void 0:or.getDuration(Xt)},Bt=function(){var Xt;(Xt=At.current)===null||Xt===void 0||Xt.destroy(),At.current=void 0},Ht=function(){var Xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},or;if(Dt.current){(or=At.current)===null||or===void 0||or.destroy();var tr=_objectSpread2(_objectSpread2(_objectSpread2({},rt),Xt),{},{container:Dt.current});return At.current=lottie.loadAnimation(tr),It(!!At.current),function(){var dr;(dr=At.current)===null||dr===void 0||dr.destroy(),At.current=void 0}}};reactExports.useEffect(function(){var Kt=Ht();return function(){return Kt==null?void 0:Kt()}},[st,lt]),reactExports.useEffect(function(){At.current&&(At.current.autoplay=!!ct)},[ct]),reactExports.useEffect(function(){if(At.current){if(!ut){At.current.resetSegments(!0);return}!Array.isArray(ut)||!ut.length||((At.current.currentRawFrame<ut[0]||At.current.currentRawFrame>ut[1])&&(At.current.currentRawFrame=ut[0]),At.current.setSegment(ut[0],ut[1]))}},[ut]),reactExports.useEffect(function(){var Kt=[{name:"complete",handler:dt},{name:"loopComplete",handler:ht},{name:"enterFrame",handler:pt},{name:"segmentStart",handler:ft},{name:"config_ready",handler:mt},{name:"data_ready",handler:gt},{name:"data_failed",handler:xt},{name:"loaded_images",handler:yt},{name:"DOMLoaded",handler:vt},{name:"destroy",handler:St}],Xt=Kt.filter(function(tr){return tr.handler!=null});if(Xt.length){var or=Xt.map(function(tr){var dr;return(dr=At.current)===null||dr===void 0||dr.addEventListener(tr.name,tr.handler),function(){var fr;(fr=At.current)===null||fr===void 0||fr.removeEventListener(tr.name,tr.handler)}});return function(){or.forEach(function(tr){return tr()})}}},[dt,ht,pt,ft,mt,gt,xt,yt,vt,St]);var Gt=e$2.createElement("div",_objectSpread2({style:it,ref:Dt},Et));return{View:Gt,play:jt,stop:Ft,pause:Lt,setSpeed:Pt,goToAndStop:Nt,goToAndPlay:Ot,setDirection:$t,playSegments:Vt,setSubframe:Ut,getDuration:zt,destroy:Bt,animationContainerRef:Dt,animationLoaded:Tt,animationItem:At.current}};function getContainerVisibility(nt){var rt=nt.getBoundingClientRect(),it=rt.top,st=rt.height,lt=window.innerHeight-it,ct=window.innerHeight+st;return lt/ct}function getContainerCursorPosition(nt,rt,it){var st=nt.getBoundingClientRect(),lt=st.top,ct=st.left,ut=st.width,dt=st.height,ht=(rt-ct)/ut,pt=(it-lt)/dt;return{x:ht,y:pt}}var useInitInteractivity=function nt(rt){var it=rt.wrapperRef,st=rt.animationItem,lt=rt.mode,ct=rt.actions;reactExports.useEffect(function(){var ut=it.current;if(!(!ut||!st||!ct.length)){st.stop();var dt=function(){var ft=null,mt=function(){var xt=getContainerVisibility(ut),yt=ct.find(function(St){var Et=St.visibility;return Et&&xt>=Et[0]&&xt<=Et[1]});if(yt){if(yt.type==="seek"&&yt.visibility&&yt.frames.length===2){var vt=yt.frames[0]+Math.ceil((xt-yt.visibility[0])/(yt.visibility[1]-yt.visibility[0])*yt.frames[1]);//! goToAndStop must be relative to the start of the current segment
st.goToAndStop(vt-st.firstFrame-1,!0)}yt.type==="loop"&&(ft===null||ft!==yt.frames||st.isPaused)&&(st.playSegments(yt.frames,!0),ft=yt.frames),yt.type==="play"&&st.isPaused&&(st.resetSegments(!0),st.play()),yt.type==="stop"&&st.goToAndStop(yt.frames[0]-st.firstFrame-1,!0)}};return document.addEventListener("scroll",mt),function(){document.removeEventListener("scroll",mt)}},ht=function(){var ft=function(yt,vt){var St=yt,Et=vt;if(St!==-1&&Et!==-1){var wt=getContainerCursorPosition(ut,St,Et);St=wt.x,Et=wt.y}var Rt=ct.find(function(At){var Dt=At.position;return Dt&&Array.isArray(Dt.x)&&Array.isArray(Dt.y)?St>=Dt.x[0]&&St<=Dt.x[1]&&Et>=Dt.y[0]&&Et<=Dt.y[1]:Dt&&!Number.isNaN(Dt.x)&&!Number.isNaN(Dt.y)?St===Dt.x&&Et===Dt.y:!1});if(Rt){if(Rt.type==="seek"&&Rt.position&&Array.isArray(Rt.position.x)&&Array.isArray(Rt.position.y)&&Rt.frames.length===2){var Tt=(St-Rt.position.x[0])/(Rt.position.x[1]-Rt.position.x[0]),It=(Et-Rt.position.y[0])/(Rt.position.y[1]-Rt.position.y[0]);st.playSegments(Rt.frames,!0),st.goToAndStop(Math.ceil((Tt+It)/2*(Rt.frames[1]-Rt.frames[0])),!0)}Rt.type==="loop"&&st.playSegments(Rt.frames,!0),Rt.type==="play"&&(st.isPaused&&st.resetSegments(!1),st.playSegments(Rt.frames)),Rt.type==="stop"&&st.goToAndStop(Rt.frames[0],!0)}},mt=function(yt){ft(yt.clientX,yt.clientY)},gt=function(){ft(-1,-1)};return ut.addEventListener("mousemove",mt),ut.addEventListener("mouseout",gt),function(){ut.removeEventListener("mousemove",mt),ut.removeEventListener("mouseout",gt)}};switch(lt){case"scroll":return dt();case"cursor":return ht()}}},[lt,st])},useLottieInteractivity=function nt(rt){var it=rt.actions,st=rt.mode,lt=rt.lottieObj,ct=lt.animationItem,ut=lt.View,dt=lt.animationContainerRef;return useInitInteractivity({actions:it,animationItem:ct,mode:st,wrapperRef:dt}),ut},_excluded=["style","interactivity"],Lottie=function nt(rt){var it,st,lt,ct=rt.style,ut=rt.interactivity,dt=_objectWithoutProperties(rt,_excluded),ht=useLottie(dt,ct),pt=ht.View,ft=ht.play,mt=ht.stop,gt=ht.pause,xt=ht.setSpeed,yt=ht.goToAndStop,vt=ht.goToAndPlay,St=ht.setDirection,Et=ht.playSegments,wt=ht.setSubframe,Rt=ht.getDuration,Tt=ht.destroy,It=ht.animationContainerRef,At=ht.animationLoaded,Dt=ht.animationItem;return reactExports.useEffect(function(){rt.lottieRef&&(rt.lottieRef.current={play:ft,stop:mt,pause:gt,setSpeed:xt,goToAndPlay:vt,goToAndStop:yt,setDirection:St,playSegments:Et,setSubframe:wt,getDuration:Rt,destroy:Tt,animationContainerRef:It,animationLoaded:At,animationItem:Dt})},[(it=rt.lottieRef)===null||it===void 0?void 0:it.current]),useLottieInteractivity({lottieObj:{View:pt,play:ft,stop:mt,pause:gt,setSpeed:xt,goToAndStop:yt,goToAndPlay:vt,setDirection:St,playSegments:Et,setSubframe:wt,getDuration:Rt,destroy:Tt,animationContainerRef:It,animationLoaded:At,animationItem:Dt},actions:(st=ut==null?void 0:ut.actions)!==null&&st!==void 0?st:[],mode:(lt=ut==null?void 0:ut.mode)!==null&&lt!==void 0?lt:"scroll"})};const OutlinedButton=({bgColor:nt,onClick:rt,Icon:it,isFocused:st,tooltip:lt,badge:ct,lottieOption:ut,disabledOpacity:dt,renderRightComponent:ht,disabled:pt,large:ft,btnID:mt,color:gt,focusIconColor:xt,isRequestProcessing:yt,borderColor:vt,buttonText:St})=>{const[Et,wt]=reactExports.useState(!1),[Rt,Tt]=reactExports.useState(!1),[It,At]=reactExports.useState(1),[Dt,jt]=reactExports.useState(!1),Ft=reactExports.useRef(),Lt=reactExports.useRef(),Pt=()=>{createPopper(Ft.current,Lt.current,{placement:"top",modifiers:[{name:"offset",options:{offset:[-40,0]}}]}),jt(!0)},Ot=()=>{jt(!1)},Nt=reactExports.useRef(),$t=24*(ft?1.7:1),Vt=()=>{Nt.current=setInterval(()=>{At(zt=>zt===1?.4:1)},600)},Ut=()=>{clearInterval(Nt.current),At(1)};return reactExports.useEffect(()=>{yt?Vt():Ut()},[yt]),reactExports.useEffect(()=>()=>{Ut()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:Ft,onMouseEnter:()=>{wt(!0),Pt()},onMouseLeave:()=>{wt(!1),Ot()},onMouseDown:()=>{Tt(!0)},onMouseUp:()=>{Tt(!1)},children:jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-center  rounded-lg ${nt?`${nt}`:st?"bg-white":"bg-gray-800"} ${Et?"border-2 border-transparent border-solid":vt?`border-2 border-[${vt}] border-solid`:nt?"border-2 border-transparent border-solid":"border-2 border-solid border-[#ffffff33]"} md:m-2 m-1`,style:{transition:"all 200ms",transitionTimingFunction:"ease-in-out",opacity:It},children:[jsxRuntimeExports.jsxs("button",{className:`${pt?"cursor-default":"cursor-pointer"} flex items-center justify-center`,id:mt,onMouseEnter:()=>{wt(!0)},onMouseLeave:()=>{wt(!1)},onMouseDown:()=>{Tt(!0)},onMouseUp:()=>{Tt(!1)},disabled:pt,onClick:rt,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1 m-1 rounded-lg",style:{opacity:pt?dt||.7:1,transform:`scale(${Et?Rt?.95:1.1:1})`,transition:`all ${200*1}ms`,transitionTimingFunction:"linear"},children:it&&(ut?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{style:{height:$t,width:$t*(ut==null?void 0:ut.width)/(ut==null?void 0:ut.height)},children:jsxRuntimeExports.jsx(Lottie,{loop:ut.loop,autoPlay:ut.autoPlay,animationData:ut.animationData,rendererSettings:{preserveAspectRatio:ut.rendererSettings.preserveAspectRatio},isClickToPauseDisabled:!0})})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(it,{style:{color:st?xt||"#1C1F2E":gt||"#fff",height:$t,width:$t},fillcolor:st?xt||"#1C1F2E":gt||"#fff"}),ct&&jsxRuntimeExports.jsx("p",{className:"text-base ml-2 text-white",children:ct})]}))}),St?jsxRuntimeExports.jsx("p",{className:"mr-2 text-sm font-semibold text-center text-white",children:St}):null]}),typeof ht=="function"&&ht()]})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${Dt&&(Et||Rt)?"":"hidden"} overflow-hidden flex flex-col items-center justify-center whitespace-pre-line`,ref:Lt,children:jsxRuntimeExports.jsx("div",{className:"rounded-md p-1.5 bg-black ",children:jsxRuntimeExports.jsx("p",{className:"text-base text-white ",children:lt||""})})})]})},MobileIconButton=({badge:nt,onClick:rt,Icon:it,isFocused:st,bgColor:lt,disabledOpacity:ct,focusIconColor:ut,disabled:dt,large:ht,tooltipTitle:pt,btnID:ft,buttonText:mt,lottieOption:gt})=>{const[xt,yt]=reactExports.useState(!1),[vt,St]=reactExports.useState(!1),[Et,wt]=reactExports.useState(!1),Rt=reactExports.useRef(),Tt=reactExports.useRef(),It=()=>{createPopper(Rt.current,Tt.current,{placement:"bottom"}),wt(!0)},At=()=>{wt(!1)},Dt=24*(ht?1.7:1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:Rt,onMouseEnter:It,onMouseLeave:At,children:jsxRuntimeExports.jsx("div",{className:"p-0 rounded-lg",style:{transition:`all ${200*.5}ms`,transitionTimingFunction:"linear"},children:jsxRuntimeExports.jsxs("button",{className:"flex flex-col items-center justify-center",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},id:ft,onMouseEnter:()=>{yt(!0)},onMouseLeave:()=>{yt(!1)},onMouseDown:()=>{St(!0)},onMouseUp:()=>{St(!1)},disabled:dt,onClick:rt,children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center p-1 rounded-lg",style:{opacity:dt?ct||.7:1,transform:`scale(${xt?vt?.95:1.1:1})`,transition:`all ${200*.5}ms`,transitionTimingFunction:"linear"},children:[nt&&jsxRuntimeExports.jsx("div",{class:"inline-flex absolute -top-2 -right-3 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-black rounded-full",children:nt}),gt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-[5px] rounded-[5px]",style:{backgroundColor:lt},children:jsxRuntimeExports.jsx("div",{style:{height:Dt,width:Dt*(gt==null?void 0:gt.width)/(gt==null?void 0:gt.height)},children:jsxRuntimeExports.jsx(Lottie,{loop:gt.loop,autoPlay:gt.autoPlay,animationData:gt.animationData,rendererSettings:{preserveAspectRatio:gt.rendererSettings.preserveAspectRatio},isClickToPauseDisabled:!0})})}):jsxRuntimeExports.jsx(it,{style:{color:st?ut||"#fff":"#95959E",height:Dt,width:Dt},fillcolor:st?ut||"#fff":"#95959E"})]}),jsxRuntimeExports.jsx("div",{children:mt?jsxRuntimeExports.jsx("p",{className:"text-sm text-white",children:mt}):null})]})})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${Et?"":"hidden"} overflow-hidden flex flex-col items-center justify-center pb-1`,ref:Tt,children:jsxRuntimeExports.jsx("div",{className:"rounded-md p-1.5 bg-black ",children:jsxRuntimeExports.jsx("p",{className:"text-base text-white ",children:pt||""})})})]})};function ILSBottomBar({bottomBarHeight:nt,setIsMeetingLeft:rt,selectWebcamDeviceId:it,setSelectWebcamDeviceId:st,selectMicDeviceId:lt,setSelectMicDeviceId:ct,meetingMode:ut}){const{sideBarMode:dt,setSideBarMode:ht}=useMeetingAppContext(),pt=({isMobile:jt,isTab:Ft})=>{const{publish:Lt}=usePubSub("RAISE_HAND"),Pt=()=>{Lt("Raise Hand")};return jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{id:"RaiseHandBTN",tooltipTitle:"Raise hand",Icon:RaiseHandIcon,onClick:Pt,buttonText:"손들기"}):jsxRuntimeExports.jsx(OutlinedButton,{onClick:Pt,tooltip:"Raise Hand",Icon:RaiseHandIcon})},ft=()=>{const jt=useMeeting(),Ft=jt==null?void 0:jt.localMicOn;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(OutlinedButton,{Icon:Ft?MicOnIcon$1:MicOffIcon,onClick:()=>{jt.toggleMic()},bgColor:Ft?"bg-gray-800":"bg-white",borderColor:Ft&&"#ffffff33",isFocused:Ft,focusIconColor:Ft&&"white"})})},mt=()=>{const jt=useMeeting(),Ft=jt==null?void 0:jt.localWebcamOn;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(OutlinedButton,{Icon:Ft?WebcamOnIcon:WebcamOffIcon,onClick:async()=>{let Lt;Ft||(Lt=await createCameraVideoTrack({optimizationMode:"motion",encoderConfig:"h540p_w960p",facingMode:"environment",multiStream:!1,cameraId:it})),jt.toggleWebcam(Lt)},bgColor:Ft?"bg-gray-800":"bg-white",borderColor:Ft&&"#ffffff33",isFocused:Ft,focusIconColor:Ft&&"white"})})},gt=()=>{const{leave:jt}=useMeeting();return jsxRuntimeExports.jsx(OutlinedButton,{Icon:EndIcon,bgColor:"bg-red-600",onClick:()=>{confirm("종료하시겠습니까?")&&(jt(),rt(!0))}})},xt=({isMobile:jt,isTab:Ft})=>jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{tooltipTitle:"Chat",buttonText:"채팅",Icon:ChatIcon,isFocused:dt===sideBarModes.CHAT,onClick:()=>{ht(Lt=>Lt===sideBarModes.CHAT?null:sideBarModes.CHAT)}}):jsxRuntimeExports.jsx(OutlinedButton,{Icon:ChatIcon,onClick:()=>{ht(Lt=>Lt===sideBarModes.CHAT?null:sideBarModes.CHAT)},isFocused:dt==="CHAT",tooltip:"View Chat"}),yt=({isMobile:jt,isTab:Ft})=>{var Pt,Ot;const{participants:Lt}=useMeeting();return jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{tooltipTitle:"Participants",isFocused:dt===sideBarModes.PARTICIPANTS,buttonText:"참가자",disabledOpacity:1,Icon:ParticipantsIcon,onClick:()=>{ht(Nt=>Nt===sideBarModes.PARTICIPANTS?null:sideBarModes.PARTICIPANTS)},badge:`${(Pt=new Map(Lt))==null?void 0:Pt.size}`,disabled:ut===Constants.modes.VIEWER}):jsxRuntimeExports.jsx(OutlinedButton,{Icon:ParticipantsIcon,onClick:()=>{ht(Nt=>Nt===sideBarModes.PARTICIPANTS?null:sideBarModes.PARTICIPANTS)},isFocused:dt===sideBarModes.PARTICIPANTS,tooltip:`View 
Participants`,badge:`${(Ot=new Map(Lt))==null?void 0:Ot.size}`,disabled:ut===Constants.modes.VIEWER})},vt=()=>{const{meetingId:jt}=useMeeting(),[Ft,Lt]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mt-0 ml-0 lg:ml-0 xl:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center p-2 border-2 rounded-md",children:[jsxRuntimeExports.jsx("h1",{className:"text-base text-white ",children:`입장 코드 : ${jt}`}),jsxRuntimeExports.jsx("button",{className:"ml-2",onClick:()=>{navigator.clipboard.writeText(jt),Lt(!0),setTimeout(()=>{Lt(!1)},3e3)},children:Ft?jsxRuntimeExports.jsx(CheckIcon$1,{className:"w-5 h-5 text-green-400"}):jsxRuntimeExports.jsx(ClipboardIcon$1,{className:"w-5 h-5 text-white"})})]})})},St=useIsMobile(),Et=useIsTab(),[wt,Rt]=reactExports.useState(!1),Tt=()=>{Rt(!0)},It=()=>{Rt(!1)},At=reactExports.useMemo(()=>({END_CALL:"END_CALL",CHAT:"CHAT",PARTICIPANTS:"PARTICIPANTS",WEBCAM:"WEBCAM",MIC:"MIC",RAISE_HAND:"RAISE_HAND",MEETING_ID_COPY:"MEETING_ID_COPY"}),[]),Dt=[{icon:At.RAISE_HAND},{icon:At.CHAT},{icon:At.PARTICIPANTS},{icon:At.MEETING_ID_COPY}];return St||Et?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center",style:{height:nt},children:[jsxRuntimeExports.jsx(gt,{}),ut===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ft,{}),jsxRuntimeExports.jsx(mt,{})]}),jsxRuntimeExports.jsx(OutlinedButton,{Icon:EllipsisHorizontalIcon$1,onClick:Tt}),jsxRuntimeExports.jsx(qe,{appear:!0,show:!!wt,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative",style:{zIndex:9999},onClose:It,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"translate-y-full opacity-0 scale-95",enterTo:"translate-y-0 opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-full opacity-0 scale-95",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:jsxRuntimeExports.jsx("div",{className:"flex items-end justify-end h-full text-center",children:jsxRuntimeExports.jsx(_t.Panel,{className:"w-screen overflow-hidden transition-all transform bg-gray-800 shadow-xl",children:jsxRuntimeExports.jsx("div",{className:"container grid py-6 bg-gray-800",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-12 gap-2",children:Dt.map(({icon:jt},Ft)=>jsxRuntimeExports.jsx("div",{className:`grid items-center justify-center ${jt===At.MEETING_ID_COPY?"col-start-2 col-end-12 col-span-7 sm:col-span-5 md:col-span-3":"col-span-4 sm:col-span-3 md:col-span-2"}`,children:jt===At.RAISE_HAND?jsxRuntimeExports.jsx(pt,{isMobile:St,isTab:Et}):jt===At.CHAT?jsxRuntimeExports.jsx(xt,{isMobile:St,isTab:Et}):jt===At.PARTICIPANTS?jsxRuntimeExports.jsx(yt,{isMobile:St,isTab:Et}):jt===At.MEETING_ID_COPY?jsxRuntimeExports.jsx(vt,{isMobile:St,isTab:Et}):null},Ft))})})})})})})]})})]}):null}const MemoizedParticipant=e$2.memo(ParticipantView,(nt,rt)=>nt.participantId===rt.participantId);function ParticipantGrid({participantIds:nt,isPresenting:rt}){const{sideBarMode:it}=useMeetingAppContext(),lt=window.matchMedia("only screen and (max-width: 768px)").matches||rt?nt.length<4?1:nt.length<9?2:3:nt.length<5?2:nt.length<7?3:nt.length<9?4:nt.length<10?3:(nt.length<11,4);return jsxRuntimeExports.jsx("div",{className:`flex flex-col md:flex-row flex-grow m-3 items-center justify-center ${nt.length<2&&!it&&!rt?"md:px-16 md:py-2":nt.length<3&&!it&&!rt?"md:px-16 md:py-8":nt.length<4&&!it&&!rt?"md:px-16 md:py-4":nt.length>4&&!it&&!rt?"md:px-14":"md:px-0"}`,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full h-full",children:Array.from({length:Math.ceil(nt.length/lt)},(ct,ut)=>jsxRuntimeExports.jsx("div",{className:`flex flex-1 ${rt&&nt.length===1?"justify-start items-start":"items-center justify-center"}`,children:nt.slice(ut*lt,(ut+1)*lt).map(dt=>jsxRuntimeExports.jsx("div",{className:`flex flex-1 ${rt?nt.length===1?"md:h-48 md:w-44 xl:w-52 xl:h-48 ":nt.length===2?"md:w-44 xl:w-56":"md:w-44 xl:w-48":"w-full"} items-center justify-center h-full ${nt.length===1?"md:max-w-7xl 2xl:max-w-[1480px] ":"md:max-w-lg 2xl:max-w-2xl"} overflow-clip overflow-hidden  p-1`,children:jsxRuntimeExports.jsx(MemoizedParticipant,{participantId:dt})},`participant_${dt}`))},`participant-${ut}`))})})}const MemoizedParticipantGrid=e$2.memo(ParticipantGrid,(nt,rt)=>JSON.stringify(nt.participantIds)===JSON.stringify(rt.participantIds)&&nt.isPresenting===rt.isPresenting);function ILSParticipantView({isPresenting:nt}){const{participants:rt,pinnedParticipants:it,activeSpeakerId:st,localParticipant:lt,localScreenShareOn:ct,presenterId:ut}=useMeeting(),dt=reactExports.useMemo(()=>{const ht=[...it.keys()].filter(gt=>gt!=lt.id),pt=[...rt.keys()].filter(gt=>![...it.keys()].includes(gt)&&lt.id!=gt),ft=[lt.id,...ht,...pt],mt=ft.filter(gt=>{var xt;return((xt=rt.get(gt))==null?void 0:xt.mode)==="CONFERENCE"}).slice(0,16);return st&&(ft.includes(st)||(ft[ft.length-1]=st)),mt},[rt,st,it,ut,ct]);return jsxRuntimeExports.jsx(MemoizedParticipantGrid,{participantIds:dt,isPresenting:nt})}const MemorizedILSParticipantView=e$2.memo(ILSParticipantView,(nt,rt)=>nt.isPresenting===rt.isPresenting),WaitingToJoinScreen=()=>{const nt=[{index:0,text:"방을 만들고 있습니다..."},{index:1,text:"입장 중입니다..."}],[rt,it]=reactExports.useState(nt[0]),st=reactExports.useRef(null);reactExports.useEffect(()=>(st.current=setInterval(()=>{it(ut=>ut.index===nt.length-1?ut:nt[ut.index+1])},3e3),()=>{clearInterval(st.current)}),[]);const lt=useIsTab(),ct=useIsMobile();return jsxRuntimeExports.jsx("div",{className:"bg-gray-200",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{style:{height:lt||ct?200:250,width:lt||ct?200:250},children:jsxRuntimeExports.jsx("img",{src:"/common/로딩스피너.gif",alt:"..."})}),jsxRuntimeExports.jsx("h1",{className:"mt-1 text-xl font-bold text-center text-gray-700",children:rt.text})]})})},c=nt=>typeof nt=="number"&&!isNaN(nt),d=nt=>typeof nt=="string",u=nt=>typeof nt=="function",m=nt=>reactExports.isValidElement(nt)||d(nt)||u(nt)||c(nt),v=new Map;let h=[];const T=new Set,b=()=>v.size>0;function I(nt,rt){var it;if(rt)return!((it=v.get(rt))==null||!it.isToastActive(nt));let st=!1;return v.forEach(lt=>{lt.isToastActive(nt)&&(st=!0)}),st}function _(nt,rt){m(nt)&&(b()||h.push({content:nt,options:rt}),v.forEach(it=>{it.buildToast(nt,rt)}))}function C(nt,rt){v.forEach(it=>{rt!=null&&rt!=null&&rt.containerId?(rt==null?void 0:rt.containerId)===it.id&&it.toggle(nt,rt==null?void 0:rt.id):it.toggle(nt,rt==null?void 0:rt.id)})}let w=1;const k=()=>""+w++;function P(nt){return nt&&(d(nt.toastId)||c(nt.toastId))?nt.toastId:k()}function M(nt,rt){return _(nt,rt),rt.toastId}function x(nt,rt){return{...rt,type:rt&&rt.type||nt,toastId:P(rt)}}function A(nt){return(rt,it)=>M(rt,x(nt,it))}function B(nt,rt){return M(nt,x("default",rt))}B.loading=(nt,rt)=>M(nt,x("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...rt})),B.promise=function(nt,rt,it){let st,{pending:lt,error:ct,success:ut}=rt;lt&&(st=d(lt)?B.loading(lt,it):B.loading(lt.render,{...it,...lt}));const dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ht=(ft,mt,gt)=>{if(mt==null)return void B.dismiss(st);const xt={type:ft,...dt,...it,data:gt},yt=d(mt)?{render:mt}:mt;return st?B.update(st,{...xt,...yt}):B(yt.render,{...xt,...yt}),gt},pt=u(nt)?nt():nt;return pt.then(ft=>ht("success",ut,ft)).catch(ft=>ht("error",ct,ft)),pt},B.success=A("success"),B.info=A("info"),B.error=A("error"),B.warning=A("warning"),B.warn=B.warning,B.dark=(nt,rt)=>M(nt,x("default",{theme:"dark",...rt})),B.dismiss=function(nt){(function(rt){var it;if(b()){if(rt==null||d(it=rt)||c(it))v.forEach(lt=>{lt.removeToast(rt)});else if(rt&&("containerId"in rt||"id"in rt)){var st;(st=v.get(rt.containerId))!=null&&st.removeToast(rt.id)||v.forEach(lt=>{lt.removeToast(rt.id)})}}else h=h.filter(lt=>rt!=null&&lt.options.toastId!==rt)})(nt)},B.clearWaitingQueue=function(nt){nt===void 0&&(nt={}),v.forEach(rt=>{!rt.props.limit||nt.containerId&&rt.id!==nt.containerId||rt.clearQueue()})},B.isActive=I,B.update=function(nt,rt){rt===void 0&&(rt={});const it=((st,lt)=>{var ct;let{containerId:ut}=lt;return(ct=v.get(ut||1))==null?void 0:ct.toasts.get(st)})(nt,rt);if(it){const{props:st,content:lt}=it,ct={delay:100,...st,...rt,toastId:rt.toastId||nt,updateId:k()};ct.toastId!==nt&&(ct.staleId=nt);const ut=ct.render||lt;delete ct.render,M(ut,ct)}},B.done=nt=>{B.update(nt,{progress:1})},B.onChange=function(nt){return T.add(nt),()=>{T.delete(nt)}},B.play=nt=>C(!0,nt),B.pause=nt=>C(!1,nt);const reqInfoDefaultState={enabled:!1,mode:null,senderId:null,accept:()=>{},reject:()=>{}},ModeListner=({setMeetingMode:nt,meetingMode:rt})=>{var gt,xt;const it=reactExports.useRef(),{setSideBarMode:st}=useMeetingAppContext(),[lt,ct]=reactExports.useState(reqInfoDefaultState),ut=useMeeting(),dt=(gt=ut==null?void 0:ut.localParticipant)==null?void 0:gt.id,ht=useParticipant(dt),pt=reactExports.useRef();reactExports.useEffect(()=>{it.current=ut},[ut]),reactExports.useEffect(()=>{pt.current=ht},[ht]),usePubSub(`CHANGE_MODE_${(xt=ut==null?void 0:ut.localParticipant)==null?void 0:xt.id}`,{onMessageReceived:yt=>{var St,Et,wt,Rt,Tt,It;const vt=JSON.parse(yt.message);if(vt.mode===Constants.modes.CONFERENCE){const At=(St=it.current)==null?void 0:St.muteMic,Dt=(Et=it.current)==null?void 0:Et.disableWebcam,jt=(wt=it.current)==null?void 0:wt.disableScreenShare;At(),Dt(),jt(),ct({enabled:!0,senderId:yt.senderId,mode:vt.mode,accept:()=>{},reject:()=>{}})}else{ut.changeMode(vt.mode);const At=(Rt=it.current)==null?void 0:Rt.muteMic,Dt=(Tt=it.current)==null?void 0:Tt.disableWebcam,jt=(It=it.current)==null?void 0:It.disableScreenShare;At(),Dt(),jt(),st(null)}}});const{publish:ft}=usePubSub("INVITATION_ACCEPT_BY_COHOST",{onMessageReceived:yt=>{new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${yt.senderName} has been added as a Co-host`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},onOldMessagesReceived:yt=>{}}),{publish:mt}=usePubSub("INVITATION_REJECT_BY_COHOST",{onMessageReceived:yt=>{yt.message.senderId===pt.current.participant.id&&(new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${yt.senderName} has rejected the request to become Co-host`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}});return useMeeting({onParticipantModeChanged:({mode:yt,participantId:vt})=>{vt===dt&&nt(yt)}}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ConfirmBox,{open:lt.enabled,successText:"Accept",rejectText:"Deny",onReject:()=>{ct(reqInfoDefaultState),mt({senderId:lt.senderId},{persist:!0})},onSuccess:()=>{ut.changeMode(lt.mode),ct(reqInfoDefaultState),ft({},{persist:!0})},title:"Request to become a Co-host",subTitle:"Host has requested you to become a Co-host"})})};function ILSContainer({onMeetingLeave:nt,setIsMeetingLeft:rt,selectedMic:it,selectedWebcam:st,selectWebcamDeviceId:lt,setSelectWebcamDeviceId:ct,selectMicDeviceId:ut,setSelectMicDeviceId:dt,micEnabled:ht,webcamEnabled:pt,meetingMode:ft,setMeetingMode:mt}){const{setAfterMeetingJoinedHLSState:gt,useRaisedHandParticipants:xt,sideBarMode:yt}=useMeetingAppContext(),vt=60,St=60,[Et,wt]=reactExports.useState(0),[Rt,Tt]=reactExports.useState(0),[It,At]=reactExports.useState(!1),[Dt,jt]=reactExports.useState(!1),Ft=reactExports.useRef(),[Lt,Pt]=reactExports.useState(null),Ot=reactExports.createRef(),Nt=reactExports.useRef(),$t=reactExports.useRef(),Vt=reactExports.useRef(ft);reactExports.useEffect(()=>{Nt.current=Et,$t.current=Rt},[Et,Rt]);const Ut=useIsMobile(),zt=useIsTab(),Bt=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),Gt=reactResponsiveExports.useMediaQuery({minWidth:1440})?400:Bt?360:zt?320:Ut?280:240;reactExports.useEffect(()=>{var lr,Ir;(lr=Ot.current)!=null&&lr.offsetHeight&&wt(Ot.current.offsetHeight),(Ir=Ot.current)!=null&&Ir.offsetWidth&&Tt(Ot.current.offsetWidth),window.addEventListener("resize",({target:wr})=>{var Fr,$r;(Fr=Ot.current)!=null&&Fr.offsetHeight&&wt(Ot.current.offsetHeight),($r=Ot.current)!=null&&$r.offsetWidth&&Tt(Ot.current.offsetWidth)})},[Ot]);const{participantRaisedHand:Kt}=xt(),Xt=()=>{rt(!0)},or=({status:lr})=>{Vt.current===Constants.modes.CONFERENCE&&(lr===Constants.recordingEvents.RECORDING_STARTED||lr===Constants.recordingEvents.RECORDING_STOPPED)&&B(`${lr===Constants.recordingEvents.RECORDING_STARTED?"Meeting recording is started.":"Meeting recording is stopped."}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},tr=lr=>{Vt.current===Constants.modes.CONFERENCE&&(lr.status===Constants.hlsEvents.HLS_STARTED||lr.status===Constants.hlsEvents.HLS_STOPPED)&&B(`${lr.status===Constants.hlsEvents.HLS_STARTED?"Meeting HLS is started.":"Meeting HLS is stopped."}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),lr.status===Constants.hlsEvents.HLS_STARTED&&gt("STARTED"),lr.status===Constants.hlsEvents.HLS_STOPPED&&gt("STOPPED")};function dr(lr){lr&&lr.setQuality("high")}function fr(lr,Ir){var wr,Fr;((Fr=(wr=Ft.current)==null?void 0:wr.localParticipant)==null?void 0:Fr.id)===lr&&(Ir==="allowed"?Pt(!0):(Pt(!1),setTimeout(()=>{Xt()},3e3)))}async function Sr(){const{changeWebcam:lr,changeMic:Ir,muteMic:wr,disableWebcam:Fr}=Ft.current;pt&&st.id&&await new Promise($r=>{Fr(),setTimeout(async()=>{const hn=await createCameraVideoTrack({optimizationMode:"motion",encoderConfig:"h540p_w960p",facingMode:"environment",cameraId:st.id,multiStream:!1});lr(hn),$r()},500)}),ht&&it.id&&await new Promise($r=>{wr(),setTimeout(()=>{Ir(it.id),$r()},500)})}function vr(){nt()}const hr=useMeeting({onParticipantJoined:dr,onEntryResponded:fr,onMeetingJoined:Sr,onMeetingLeft:vr,onError:lr=>{const{code:Ir,message:wr}=lr,$r=[4001,4002,4003,4004,4005,4006,4007,4008,4009,4010].findIndex(Zr=>Zr===Ir)!==-1,hn=`${Ir}`.startsWith("500");new Audio(hn?"https://static.videosdk.live/prebuilt/notification_critical_err.mp3":"https://static.videosdk.live/prebuilt/notification_err.mp3").play(),jt(!0),At({code:Ir,message:$r?"Unable to join meeting!":wr})},onRecordingStateChanged:or,onHlsStateChanged:tr});reactExports.useEffect(()=>{Ft.current=hr},[hr]);const gr=!!hr.presenterId;return usePubSub("RAISE_HAND",{onMessageReceived:lr=>{var hn;const Ir=(hn=hr==null?void 0:hr.localParticipant)==null?void 0:hn.id,{senderId:wr,senderName:Fr}=lr,$r=wr===Ir;new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${$r?"You":nameTructed(Fr,15)} raised hand 🖐🏼`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),Kt(wr)}}),usePubSub("CHAT",{onMessageReceived:lr=>{var Zr;const Ir=(Zr=hr==null?void 0:hr.localParticipant)==null?void 0:Zr.id,{senderId:wr,senderName:Fr,message:$r}=lr;wr===Ir||(new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${trimSnackBarText(`${nameTructed(Fr,15)} says: ${$r}`)}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-20",children:jsxRuntimeExports.jsxs("div",{ref:Ot,className:"flex flex-col h-full bg-gray-200",children:[typeof Lt=="boolean"?Lt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ModeListner,{setMeetingMode:mt,meetingMode:ft}),ft===Constants.modes.CONFERENCE&&(Ut||zt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:zt||Ut?"":"column",height:St}})),jsxRuntimeExports.jsxs("div",{className:" flex flex-1 flex-row bg-gray-200",children:[ft===Constants.modes.CONFERENCE?jsxRuntimeExports.jsxs("div",{className:"flex flex-1 ",children:[gr?jsxRuntimeExports.jsx(PresenterView,{height:Et-St-vt}):null,gr&&Ut?null:jsxRuntimeExports.jsx(MemorizedILSParticipantView,{isPresenting:gr})]}):null,jsxRuntimeExports.jsx(SidebarConatiner,{height:ft===Constants.modes.VIEWER||Ut||zt?Et-vt:Et-St-vt,sideBarContainerWidth:Gt,meetingMode:ft})]}),jsxRuntimeExports.jsx(ILSBottomBar,{bottomBarHeight:vt,setIsMeetingLeft:rt,selectWebcamDeviceId:lt,setSelectWebcamDeviceId:ct,selectMicDeviceId:ut,setSelectMicDeviceId:dt,meetingMode:ft})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):!hr.isMeetingJoined&&jsxRuntimeExports.jsx(WaitingToJoinScreen,{}),jsxRuntimeExports.jsx(ConfirmBox,{open:Dt,successText:"OKAY",onSuccess:()=>{jt(!1)},title:`Error Code: ${It.code}`,subTitle:It.message})]})})}const WebRTCPage=()=>{const[nt,rt]=reactExports.useState(""),[it,st]=reactExports.useState(""),[lt,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(!0),[ht,pt]=reactExports.useState(!0),[ft,mt]=reactExports.useState({id:null}),[gt,xt]=reactExports.useState({id:null}),[yt,vt]=reactExports.useState(gt.id),[St,Et]=reactExports.useState(Constants.modes.CONFERENCE),[wt,Rt]=reactExports.useState(ft.id),[Tt,It]=reactExports.useState(!1),[At,Dt]=reactExports.useState(!1),jt=window.matchMedia("only screen and (max-width: 768px)").matches;return reactExports.useEffect(()=>{jt&&(window.onbeforeunload=()=>"Are you sure you want to exit?")},[jt]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Tt?jsxRuntimeExports.jsx(MeetingAppProvider,{selectedMic:ft,selectedWebcam:gt,initialMicOn:ut,initialWebcamOn:ht,children:jsxRuntimeExports.jsx(MeetingProvider,{config:{meetingId:it,micEnabled:ut,webcamEnabled:ht,name:lt||"TestUser",mode:St,multiStream:!1},token:nt,reinitialiseMeetingOnConfigChange:!0,joinWithoutUserInteraction:!0,children:jsxRuntimeExports.jsx(ILSContainer,{onMeetingLeave:()=>{rt(""),st(""),ct(""),pt(!1),dt(!1),It(!1)},setIsMeetingLeft:Dt,selectedMic:ft,selectedWebcam:gt,selectWebcamDeviceId:yt,setSelectWebcamDeviceId:vt,selectMicDeviceId:wt,setSelectMicDeviceId:Rt,micEnabled:ut,webcamEnabled:ht,meetingMode:St,setMeetingMode:Et})})}):At?jsxRuntimeExports.jsx(LeaveScreen,{setIsMeetingLeft:Dt}):jsxRuntimeExports.jsx(JoiningScreen,{participantName:lt,setParticipantName:ct,setMeetingId:st,setToken:rt,setMicOn:dt,micEnabled:ut,webcamEnabled:ht,setSelectedMic:mt,setSelectedWebcam:xt,setWebcamOn:pt,onClickStartMeeting:()=>{It(!0)},startMeeting:Tt,setIsMeetingLeft:Dt,meetingMode:St,setMeetingMode:Et})})},PinChangePage=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(userState),{watch:st,getValues:lt,register:ct,handleSubmit:ut,reset:dt,setError:ht,clearErrors:pt,formState:{errors:ft}}=useForm({mode:"onChange",defaultValues:{currentPin:"",newPin:"",newPinCheck:""}});reactExports.useEffect(()=>{st("newPin")!==st("newPinCheck")&&st("newPinCheck")?ht("newPinCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):pt("newPinCheck")},[st("newPin"),st("newPinCheck")]);const mt=gt=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/pin`,headers:{Authorization:`Bearer ${rt.token}`},data:{current_pin:gt.currentPin,new_pin:gt.newPin,new_pin_check:gt.newPinCheck}}).then(xt=>{console.log(xt),xt.data.data_header.success_code===0?(alert("PIN 번호가 변경되었습니다."),it({token:rt.token,info:{...rt.info,pin:gt.newPin}}),window.location.reload("/")):(alert(xt.data.data_header.result_message),dt())})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"PIN 변경"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:ut(mt),className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"currentPin",children:"현재 PIN번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"currentPin",placeholder:"기존 PIN번호",type:"password",autoComplete:"on",maxLength:6,...ct("currentPin",{required:!0,maxLength:6})}),jsxRuntimeExports.jsx("label",{htmlFor:"newPin",children:"새 PIN번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPin",type:"password",autoComplete:"on",placeholder:"새 PIN번호",maxLength:6,...ct("newPin",{required:!0,pattern:{value:/^[0-9]*$/,message:"숫자만 입력해주세요"}})}),ft.newPin&&jsxRuntimeExports.jsx("p",{children:ft.newPin.message}),jsxRuntimeExports.jsx("label",{htmlFor:"newPinCheck",children:"새 PIN번호 확인"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPinCheck",type:"password",autoComplete:"on",placeholder:"새 PIN번호 확인",maxLength:6,...ct("newPinCheck",{required:!0,validate:{matchPassword:gt=>{const{newPin:xt}=lt();return xt===gt||"비밀번호가 일치하지 않습니다"}}})}),ft.newPinCheck&&jsxRuntimeExports.jsx("p",{children:ft.newPinCheck.message}),jsxRuntimeExports.jsx("input",{type:"submit",className:"p-2 text-white bg-teal-700 border rounded-md"})]})})]})},userCategoryFoodState=Recoil_index_8({key:"userCategoryFoodState",default:[]}),FoodDetailBox=({data:nt,category:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=Recoil_index_20(selectedDateState),ct=Recoil_index_24(userCategoryFoodState),[ut,dt]=reactExports.useState("left"),[ht,pt]=reactExports.useState(""),ft=()=>{dt("left")},mt=()=>{dt("right")},gt=St=>{pt(St.target.value)},xt=async()=>{await axios.get(`${it}api/management/food/list/category/${st.info.userId}?year=${lt[0]}&month=${lt[1]}&day=${lt[2]}&category=${rt.substring(0,2)}`).then(St=>{console.log("FoodList Reloading"),ct(St.data)}).catch(St=>{console.log(St)})},yt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/food/update/${nt.userFoodId}`,{servingSize:parseInt(ht,10)}).then(Et=>{xt()}).catch(Et=>{console.log(Et)})},vt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/food/update/${nt.userFoodId}`,{foodCount:ht.replace(/개/g,"")}).then(Et=>{xt()}).catch(Et=>{console.log(Et)})};return reactExports.useEffect(()=>{pt(ut==="left"?nt.servingSize+" g":nt.foodCount+" 개")},[ut]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("button",{className:`text-xs ${ut==="left"?"text-teal-700 font-semibold":""}`,onClick:()=>ft(),children:"그램"}),jsxRuntimeExports.jsx("button",{className:`text-xs ${ut==="right"?"text-teal-700 font-semibold":""}`,onClick:()=>mt(),children:"개수"})]}),jsxRuntimeExports.jsx("form",{onSubmit:ut==="left"?yt:vt,onBlur:ut==="left"?yt:vt,children:jsxRuntimeExports.jsx("input",{type:"text",value:ht,onChange:gt,className:"p-1 my-1 text-center border-2 rounded-md"})})]})};FoodDetailBox.propTypes={data:PropTypes.object,category:PropTypes.string};const FoodCategoryPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=Recoil_index_22(userCategoryFoodState),ct=useNavigate(),{category:ut}=useParams(),[dt,ht]=reactExports.useState(!1),pt=st.reduce((St,Et)=>St+Et.food.calorie*(Et.servingSize/Et.food.servingSize)*Et.foodCount,0).toFixed(1),ft=st.reduce((St,Et)=>St+Et.food.carbohydrate*(Et.servingSize/Et.food.servingSize)*Et.foodCount,0).toFixed(1),mt=st.reduce((St,Et)=>St+Et.food.protein*(Et.servingSize/Et.food.servingSize)*Et.foodCount,0).toFixed(1),gt=st.reduce((St,Et)=>St+Et.food.lipid*(Et.servingSize/Et.food.servingSize)*Et.foodCount,0).toFixed(1),xt=()=>{ct(`/diary/food/${it[0]}/${it[1]}/${it[2]}`)},yt=async()=>{await axios.get(`${nt}api/management/food/list/category/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}&category=${ut.substring(0,2)}`).then(St=>{lt(St.data)}).catch(St=>{console.log(St)})},vt=async St=>{await axios.delete(`${nt}api/management/food/delete/${St}`).then(Et=>{yt()}).catch(Et=>{console.log(Et)})};return reactExports.useEffect(()=>{yt()},[]),jsxRuntimeExports.jsxs("div",{className:`bg-[#C9DECF]/30 pb-2 ${st.length>5?"":"h-screen"}`,children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute my-4",children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 text-blue-500",onClick:xt})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:ut}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-[#C9DECF]/30 border rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mx-2 my-2 justify-evenly",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:pt+" kcal",subTitle:"칼로리",size:"xl",subsize:"sm"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:ft+" g",subTitle:"탄수화물",size:"xl",subsize:"sm"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mx-2 mb-2 justify-evenly",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:mt+" g",subTitle:"단백질",size:"xl",subsize:"sm"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:gt+" g",subTitle:"지방",size:"xl",subsize:"sm"})})]})]})}),jsxRuntimeExports.jsx("hr",{className:"mb-4 border border-gray-300"})]}),jsxRuntimeExports.jsxs("div",{className:`mx-4 ${st.length>5?"mb-16":"h-1/2"}`,children:[jsxRuntimeExports.jsx("div",{className:`flex justify-center p-4 mb-2 bg-white border border-white rounded-xl ${st.length?"hidden":""}`,children:jsxRuntimeExports.jsx("p",{className:"italic",children:"등록된 식단이 없습니다."})}),st.map(St=>jsxRuntimeExports.jsxs("div",{className:"flex mb-2 bg-white border border-white rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center pb-1 pl-4 basis-full",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-base hover:font-semibold",onClick:()=>{ht(!dt)},children:St.food.name}),jsxRuntimeExports.jsxs("span",{className:`${dt?"":"hidden"}`,children:[" : ",St.food.calorie.toFixed(1),"kcal"]})]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px"},children:["탄 ",(St.food.carbohydrate*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g 단"," ",(St.food.protein*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g 지"," ",(St.food.lipid*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 ml-8 mr-4",children:[jsxRuntimeExports.jsx(FoodDetailBox,{data:St,category:ut}),jsxRuntimeExports.jsx("div",{className:"flex items-center",onClick:()=>vt(St.userFoodId),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-6 h-6"})})]})]},St.userFoodId)),jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4 bg-white border border-white rounded-xl",children:jsxRuntimeExports.jsx(Link,{to:`/diary/food/${ut}/add`,children:jsxRuntimeExports.jsx(PlusCircleIcon$1,{className:"w-6 h-6 text-gray-700"})})})]})]})},FoodAddFage=()=>{const nt=Recoil_index_20(baseUrlState),{category:rt}=useParams(),it=Recoil_index_20(userState),st=Recoil_index_20(selectedDateState),[lt,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState([]),[ht,pt]=reactExports.useState([]),ft=Recoil_index_24(modalState),[mt,gt]=reactExports.useState(!1),xt=new Date(st[0],st[1]-1,st[2]),yt=9*60*60*1e3,vt=new Date(xt.getTime()+yt),St=It=>{ct(It.target.value)},Et=async It=>{It.preventDefault(),await axios.get(`${nt}api/management/food/search?keyword=${lt}`).then(At=>{console.log(At.data),dt(At.data)}).catch(At=>{console.log(At)})},wt=It=>{ht.includes(It)?pt(ht.filter(At=>At!==It)):pt([...ht,It])},Rt=async It=>{for(const At of It)try{await axios.post(`${nt}api/management/food/list/add`,{user_id:it.info.userId,food_id:At,category:rt.substring(0,2),date:vt})}catch(Dt){console.error("Error during request:",Dt)}},Tt=()=>{ft({type:"selfInputFood",data:rt.substring(0,2)})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"음식 추가하기"})]}),jsxRuntimeExports.jsx(Search,{onSubmit:Et,onChange:St,placeholder:"찾으시는 음식을 검색해보세요.",onBlur:Et}),jsxRuntimeExports.jsx("div",{className:"m-4 mb-48",children:ut.map(It=>jsxRuntimeExports.jsxs("div",{className:"flex mb-2 border rounded-md",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>wt(It.foodId),className:"w-6 ml-4 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col py-1 pl-4 basis-3/5",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-base",onClick:()=>{gt(!mt)},children:It.name}),jsxRuntimeExports.jsxs("span",{className:`${mt?"":"hidden"}`,children:[" ",": ",It.calorie.toFixed(1),"kcal"]})]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px"},children:["탄 ",It.carbohydrate.toFixed(1),"g 단"," ",It.protein.toFixed(1),"g 지 ",It.lipid.toFixed(1),"g"]})]}),jsxRuntimeExports.jsx("div",{className:"flex basis-2/5",children:jsxRuntimeExports.jsx("input",{type:"text",onChange:At=>{console.log(At.target.value)},value:It.servingSize+" g",className:"m-2 text-center border-2 rounded-md basis-3/5",disabled:!0})})]},It.foodId))}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-16",children:jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Button,{btnCss:"basis-1/2 text-center border border-teal-700 rounded-md p-2",buttonName:"직접 입력하기",onClick:Tt}),jsxRuntimeExports.jsx(Button,{btnCss:"basis-1/2 text-center text-white bg-teal-700 rounded-md p-2 ",buttonName:"추가하기",onClick:()=>Rt(ht)})]})})})]})},FAQDetailPage=()=>{const{postId:nt}=useParams(),rt=Recoil_index_20(baseUrlState),[it,st]=reactExports.useState({}),lt=()=>{axios({method:"get",url:`${rt}api/faq/posts/${nt}`}).then(ct=>{st(ct.data)})};return reactExports.useEffect(()=>{lt()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"FAQ 상세"}),jsxRuntimeExports.jsx("div",{children:it.content})]})},UserDelete=()=>{const nt=Recoil_index_20(userState),rt=Recoil_index_20(baseUrlState),it=useNavigate();reactExports.useEffect(()=>{confirm("정말 탈퇴하시겠습니까?")?axios({method:"delete",url:`${rt}api/users/${nt.info.userId}`,headers:{Authorization:`Bearer ${nt.token}`}}).then(st=>{st.data.data_header.success_code===0&&(localStorage.clear(),setTimeout(()=>{it("/")},1e3))}):it(-1)})},router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(App,{}),children:[{path:"",Component:HomePage},{path:"/diary",Component:DiaryPage},{path:"/diary/training/:year/:month/:date",Component:DiaryTrainingPage$1},{path:"/diary/food/:year/:month/:date",Component:DiaryTrainingPage},{path:"/diary/training/load/:basepage",Component:TrainingLoadPage},{path:"/diary/training/choice/:basepage",Component:TrainingChoicePage},{path:"/diary/training/myroutine",Component:MyRoutinePage},{path:"/diary/training/myroutine/edit",Component:RoutineEditPage},{path:"/diary/food/:category",Component:FoodCategoryPage},{path:"/diary/food/:category/add",Component:FoodAddFage},{path:"/mypage",Component:MyPage},{path:"/mypage/myinfo",Component:MyInfoPage},{path:"/mypage/passwordchange",Component:PasswordChangePage},{path:"/mypage/pinchange",Component:PinChangePage},{path:"/mypage/notice",Component:NoticePage},{path:"/mypage/notice/:postId",Component:NoticeDetailPage},{path:"/mypage/FAQ",Component:FAQPage},{path:"/mypage/FAQ/:postId",Component:FAQDetailPage},{path:"/mypage/delete",Component:UserDelete},{path:"/challenge",Component:Challenge},{path:"challenge/:challengeId",Component:ChallengeDetail},{path:"challenge/registration",Component:ChallengeRegistrationPage},{path:"challenge/:challengeId/update",Component:ChallengeUpdatePage},{path:"/challenge/ongoing",Component:WebRTCPage}]}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Recoil_index_5,{children:jsxRuntimeExports.jsx(reactExports.Suspense,{children:jsxRuntimeExports.jsx(RouterProvider,{router,fallbackElement:"로딩중!!!!!"})})}));export{getDefaultExportFromCjs as g,patterns as p,reactExports as r,utils as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
